(()=>{var Yn=Object.create;var wr=Object.defineProperty;var Kn=Object.getOwnPropertyDescriptor;var Qn=Object.getOwnPropertyNames;var Zn=Object.getPrototypeOf,eo=Object.prototype.hasOwnProperty;var to=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var io=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Qn(t))!eo.call(e,n)&&n!==i&&wr(e,n,{get:()=>t[n],enumerable:!(r=Kn(t,n))||r.enumerable});return e};var ro=(e,t,i)=>(i=e!=null?Yn(Zn(e)):{},io(t||!e||!e.__esModule?wr(i,"default",{value:e,enumerable:!0}):i,e));var Vn=to((Un,Pi)=>{(function(e,t){"use strict";(function(){for(var u=0,v=["ms","moz","webkit","o"],p=0;p<v.length&&!e.requestAnimationFrame;++p)e.requestAnimationFrame=e[v[p]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[v[p]+"CancelAnimationFrame"]||e[v[p]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(m,b){var g=new Date().getTime(),E=Math.max(0,16-(g-u)),C=e.setTimeout(function(){m(g+E)},E);return u=g+E,C}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(m){clearTimeout(m)})})();function i(){r.width=e.innerWidth,r.height=5*l.barThickness;var u=r.getContext("2d");u.shadowBlur=l.shadowBlur,u.shadowColor=l.shadowColor;var v,p=u.createLinearGradient(0,0,r.width,0);for(v in l.barColors)p.addColorStop(v,l.barColors[v]);u.lineWidth=l.barThickness,u.beginPath(),u.moveTo(0,l.barThickness/2),u.lineTo(Math.ceil(s*r.width),l.barThickness/2),u.strokeStyle=p,u.stroke()}var r,n,o,s,a,l={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},h={config:function(u){for(var v in u)l.hasOwnProperty(v)&&(l[v]=u[v])},show:function(){var u,v,p;a||(a=!0,o!==null&&e.cancelAnimationFrame(o),r||((p=(r=t.createElement("canvas")).style).position="fixed",p.top=p.left=p.right=p.margin=p.padding=0,p.zIndex=100001,p.display="none",l.className&&r.classList.add(l.className),t.body.appendChild(r),u="resize",v=i,(p=e).addEventListener?p.addEventListener(u,v,!1):p.attachEvent?p.attachEvent("on"+u,v):p["on"+u]=v),r.style.opacity=1,r.style.display="block",h.progress(0),l.autoRun&&function m(){n=e.requestAnimationFrame(m),h.progress("+"+.05*Math.pow(1-Math.sqrt(s),2))}())},progress:function(u){return u===void 0||(typeof u=="string"&&(u=(0<=u.indexOf("+")||0<=u.indexOf("-")?s:0)+parseFloat(u)),s=1<u?1:u,i()),s},hide:function(){a&&(a=!1,n!=null&&(e.cancelAnimationFrame(n),n=null),function u(){return 1<=h.progress("+.1")&&(r.style.opacity-=.05,r.style.opacity<=.05)?(r.style.display="none",void(o=null)):void(o=e.requestAnimationFrame(u))}())}};typeof Pi=="object"&&typeof Pi.exports=="object"?Pi.exports=h:typeof define=="function"&&define.amd?define(function(){return h}):this.topbar=h}).call(Un,window,document)});(function(){var e=t();function t(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function n(o,s){s=s||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(o,s.bubbles,s.cancelable,s.detail),a}return n.prototype=window.Event.prototype,n}function i(n,o){var s=document.createElement("input");return s.type="hidden",s.name=n,s.value=o,s}function r(n,o){var s=n.getAttribute("data-to"),a=i("_method",n.getAttribute("data-method")),l=i("_csrf_token",n.getAttribute("data-csrf")),h=document.createElement("form"),u=document.createElement("input"),v=n.getAttribute("target");h.method=n.getAttribute("data-method")==="get"?"get":"post",h.action=s,h.style.display="none",v?h.target=v:o&&(h.target="_blank"),h.appendChild(l),h.appendChild(a),document.body.appendChild(h),u.type="submit",h.appendChild(u),u.click()}window.addEventListener("click",function(n){var o=n.target;if(!n.defaultPrevented)for(;o&&o.getAttribute;){var s=new e("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!o.dispatchEvent(s))return n.preventDefault(),n.stopImmediatePropagation(),!1;if(o.getAttribute("data-method"))return r(o,n.metaKey||n.shiftKey),n.preventDefault(),!1;o=o.parentNode}},!1),window.addEventListener("phoenix.link.click",function(n){var o=n.target.getAttribute("data-confirm");o&&!window.confirm(o)&&n.preventDefault()},!1)})();var At=e=>typeof e=="function"?e:function(){return e},no=typeof self<"u"?self:null,Et=typeof window<"u"?window:null,St=no||Et||St,oo="2.0.0",ke={connecting:0,open:1,closing:2,closed:3},so=1e4,ao=1e3,ue={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},De={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Di={longpoll:"longpoll",websocket:"websocket"},lo={complete:4},ti=class{constructor(e,t,i,r){this.channel=e,this.event=t,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:i}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}},Er=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},co=class{constructor(e,t,i){this.state=ue.closed,this.topic=e,this.params=At(t||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new ti(this,De.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Er(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=ue.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=ue.closed,this.socket.remove(this)}),this.onError(r=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,r),this.isJoining()&&this.joinPush.reset(),this.state=ue.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new ti(this,De.leave,At({}),this.timeout).send(),this.state=ue.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(De.reply,(r,n)=>{this.trigger(this.replyEventName(n),r)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(De.close,e)}onError(e){return this.on(De.error,t=>e(t))}on(e,t){let i=this.bindingRef++;return this.bindings.push({event:e,ref:i,callback:t}),i}off(e,t){this.bindings=this.bindings.filter(i=>!(i.event===e&&(typeof t>"u"||t===i.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,i=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let r=new ti(this,e,function(){return t},i);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=ue.leaving;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(De.close,"leave")},i=new ti(this,De.leave,At({}),e);return i.receive("ok",()=>t()).receive("timeout",()=>t()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(e,t,i){return t}isMember(e,t,i,r){return this.topic!==e?!1:r&&r!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:i,joinRef:r}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=ue.joining,this.joinPush.resend(e))}trigger(e,t,i,r){let n=this.onMessage(e,t,i,r);if(t&&!n)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let o=this.bindings.filter(s=>s.event===e);for(let s=0;s<o.length;s++)o[s].callback(n,i,r||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===ue.closed}isErrored(){return this.state===ue.errored}isJoined(){return this.state===ue.joined}isJoining(){return this.state===ue.joining}isLeaving(){return this.state===ue.leaving}},ri=class{static request(e,t,i,r,n,o,s){if(St.XDomainRequest){let a=new St.XDomainRequest;return this.xdomainRequest(a,e,t,r,n,o,s)}else{let a=new St.XMLHttpRequest;return this.xhrRequest(a,e,t,i,r,n,o,s)}}static xdomainRequest(e,t,i,r,n,o,s){return e.timeout=n,e.open(t,i),e.onload=()=>{let a=this.parseJSON(e.responseText);s&&s(a)},o&&(e.ontimeout=o),e.onprogress=()=>{},e.send(r),e}static xhrRequest(e,t,i,r,n,o,s,a){return e.open(t,i,!0),e.timeout=o,e.setRequestHeader("Content-Type",r),e.onerror=()=>a&&a(null),e.onreadystatechange=()=>{if(e.readyState===lo.complete&&a){let l=this.parseJSON(e.responseText);a(l)}},s&&(e.ontimeout=s),e.send(n),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch{return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let i=[];for(var r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let n=t?`${t}[${r}]`:r,o=e[r];typeof o=="object"?i.push(this.serialize(o,n)):i.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}return i.join("&")}static appendParams(e,t){if(Object.keys(t).length===0)return e;let i=e.match(/\?/)?"&":"?";return`${e}${i}${this.serialize(t)}`}},xt=class{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=ke.connecting,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Di.websocket),"$1/"+Di.longpoll)}endpointURL(){return ri.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,i){this.close(e,t,i),this.readyState=ke.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===ke.open||this.readyState===ke.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),e=>{if(e){var{status:t,token:i,messages:r}=e;this.token=i}else t=0;switch(t){case 200:r.forEach(n=>{setTimeout(()=>this.onmessage({data:n}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=ke.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${t}`)}})}send(e){this.currentBatch?this.currentBatch.push(e):this.awaitingBatchAck?this.batchBuffer.push(e):(this.currentBatch=[e],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(e){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",e.join(`
`),()=>this.onerror("timeout"),t=>{this.awaitingBatchAck=!1,!t||t.status!==200?(this.onerror(t&&t.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(e,t,i){for(let n of this.reqs)n.abort();this.readyState=ke.closed;let r=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:i});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent<"u"?this.onclose(new CloseEvent("close",r)):this.onclose(r)}ajax(e,t,i,r,n){let o,s=()=>{this.reqs.delete(o),r()};o=ri.request(e,this.endpointURL(),t,i,this.timeout,s,a=>{this.reqs.delete(o),this.isActive()&&n(a)}),this.reqs.add(o)}};var ii={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[i,r,n,o,s]=JSON.parse(e);return t({join_ref:i,ref:r,topic:n,event:o,payload:s})}},binaryEncode(e){let{join_ref:t,ref:i,event:r,topic:n,payload:o}=e,s=this.META_LENGTH+t.length+i.length+n.length+r.length,a=new ArrayBuffer(this.HEADER_LENGTH+s),l=new DataView(a),h=0;l.setUint8(h++,this.KINDS.push),l.setUint8(h++,t.length),l.setUint8(h++,i.length),l.setUint8(h++,n.length),l.setUint8(h++,r.length),Array.from(t,v=>l.setUint8(h++,v.charCodeAt(0))),Array.from(i,v=>l.setUint8(h++,v.charCodeAt(0))),Array.from(n,v=>l.setUint8(h++,v.charCodeAt(0))),Array.from(r,v=>l.setUint8(h++,v.charCodeAt(0)));var u=new Uint8Array(a.byteLength+o.byteLength);return u.set(new Uint8Array(a),0),u.set(new Uint8Array(o),a.byteLength),u.buffer},binaryDecode(e){let t=new DataView(e),i=t.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.push:return this.decodePush(e,t,r);case this.KINDS.reply:return this.decodeReply(e,t,r);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,r)}},decodePush(e,t,i){let r=t.getUint8(1),n=t.getUint8(2),o=t.getUint8(3),s=this.HEADER_LENGTH+this.META_LENGTH-1,a=i.decode(e.slice(s,s+r));s=s+r;let l=i.decode(e.slice(s,s+n));s=s+n;let h=i.decode(e.slice(s,s+o));s=s+o;let u=e.slice(s,e.byteLength);return{join_ref:a,ref:null,topic:l,event:h,payload:u}},decodeReply(e,t,i){let r=t.getUint8(1),n=t.getUint8(2),o=t.getUint8(3),s=t.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=i.decode(e.slice(a,a+r));a=a+r;let h=i.decode(e.slice(a,a+n));a=a+n;let u=i.decode(e.slice(a,a+o));a=a+o;let v=i.decode(e.slice(a,a+s));a=a+s;let p=e.slice(a,e.byteLength),m={status:v,response:p};return{join_ref:l,ref:h,topic:u,event:De.reply,payload:m}},decodeBroadcast(e,t,i){let r=t.getUint8(1),n=t.getUint8(2),o=this.HEADER_LENGTH+2,s=i.decode(e.slice(o,o+r));o=o+r;let a=i.decode(e.slice(o,o+n));o=o+n;let l=e.slice(o,e.byteLength);return{join_ref:null,ref:null,topic:s,event:a,payload:l}}},Ar=class{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||so,this.transport=t.transport||St.WebSocket||xt,this.establishedConnections=0,this.defaultEncoder=ii.encode.bind(ii),this.defaultDecoder=ii.decode.bind(ii),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==xt?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;Et&&Et.addEventListener&&(Et.addEventListener("pagehide",r=>{this.conn&&(this.disconnect(),i=this.connectClock)}),Et.addEventListener("pageshow",r=>{i===this.connectClock&&(i=null,this.connect())})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=r=>t.rejoinAfterMs?t.rejoinAfterMs(r):[1e3,2e3,5e3][r-1]||1e4,this.reconnectAfterMs=r=>t.reconnectAfterMs?t.reconnectAfterMs(r):[10,50,100,150,200,250,500,1e3,2e3][r-1]||5e3,this.logger=t.logger||null,this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=At(t.params||{}),this.endPoint=`${e}/${Di.websocket}`,this.vsn=t.vsn||oo,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Er(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return xt}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.sendBuffer=[],this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=ri.appendParams(ri.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,i){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,i)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=At(e)),!this.conn&&(this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=t=>this.onConnError(t),this.conn.onmessage=t=>this.onConnMessage(t),this.conn.onclose=t=>this.onConnClose(t))}log(e,t,i){this.logger(e,t,i)}hasLogger(){return this.logger!==null}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}ping(e){if(!this.isConnected())return!1;let t=this.makeRef(),i=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t});let r=this.onMessage(n=>{n.ref===t&&(this.off([r]),e(Date.now()-i))});return!0}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),ao,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,i){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(t?this.conn.close(t,i||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,t=1){if(t===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,t+1)},150*t)}waitForSocketClosed(e,t=1){if(t===5||!this.conn||this.conn.readyState===ke.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,t+1)},150*t)}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&t!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,i=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,r])=>{r(e,t,i)}),(t===this.transport||i>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(De.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case ke.connecting:return"connecting";case ke.open:return"open";case ke.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([i])=>e.indexOf(i)===-1)}channel(e,t={}){let i=new co(e,t,this);return this.channels.push(i),i}push(e){if(this.hasLogger()){let{topic:t,event:i,payload:r,ref:n,join_ref:o}=e;this.log("push",`${t} ${i} (${o}, ${n})`,r)}this.isConnected()?this.encode(e,t=>this.conn.send(t)):this.sendBuffer.push(()=>this.encode(e,t=>this.conn.send(t)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:r,payload:n,ref:o,join_ref:s}=t;o&&o===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${n.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,n);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];!l.isMember(i,r,n,s)||l.trigger(r,n,o,s)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(t)}})}leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i.isJoined()||i.isJoining()));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}};var Xr="consecutive-reloads",uo=10,ho=5e3,fo=1e4,po=3e4,Jr=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],de="data-phx-component",Ii="data-phx-link",mo="track-static",vo="data-phx-link-state",me="data-phx-ref",Xe="data-phx-ref-src",zr="track-uploads",Je="data-phx-upload-ref",Gi="data-phx-preflighted-refs",go="data-phx-done-refs",Sr="drop-target",qi="data-phx-active-refs",pi="phx:live-file:updated",Xi="data-phx-skip",xr="data-phx-prune",Cr="page-loading",Tr="phx-connected",Ct="phx-loading",Ni="phx-no-feedback",ni="phx-error",kr="phx-client-error",Mi="phx-server-error",st="data-phx-parent-id",Yi="data-phx-main",It="data-phx-root-id",Gr="viewport-top",Yr="viewport-bottom",bo="trigger-action",vi="feedback-for",Ji="phx-has-focused",yo=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],Kr=["checkbox","radio"],gi="phx-has-submitted",$e="data-phx-session",lt=`[${$e}]`,Pr="data-phx-sticky",_t="data-phx-static",Hi="data-phx-readonly",oi="data-phx-disabled",zi="disable-with",si="data-phx-disable-with-restore",Tt="hook",wo="debounce",Eo="throttle",bi="update",ji="stream",kt="data-phx-stream",Ao="key",Pe="phxPrivate",Or="auto-recover",ai="phx:live-socket:debug",Bi="phx:live-socket:profiling",Fi="phx:live-socket:latency-sim",So="progress",Rr="mounted",xo=1,Co=200,To="phx-",ko=3e4,Pt="debounce-trigger",li="throttled",Lr="debounce-prev-key",Po={debounce:300,throttle:300},$i="d",Oe="s",he="c",_r="e",Dr="r",Ir="t",Oo="p",Nr="stream",Ro=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){clearTimeout(this.chunkTimer),this.uploadChannel.leave(),this.entry.error(e)}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return se("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))})}},se=(e,t)=>console.error&&console.error(e,t),Be=e=>{let t=typeof e;return t==="number"||t==="string"&&/^(0|[1-9]\d*)$/.test(e)};function Lo(){let e=new Set,t=document.querySelectorAll("*[id]");for(let i=0,r=t.length;i<r;i++)e.has(t[i].id)?console.error(`Multiple IDs detected: ${t[i].id}. Ensure unique element ids.`):e.add(t[i].id)}var _o=(e,t,i,r)=>{e.liveSocket.isDebugEnabled()&&console.log(`${e.id} ${t}: ${i} - `,r)},Ui=e=>typeof e=="function"?e:function(){return e},mi=e=>JSON.parse(JSON.stringify(e)),Dt=(e,t,i)=>{do{if(e.matches(`[${t}]`)&&!e.disabled)return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1&&!(i&&i.isSameNode(e)||e.matches(lt)));return null},Ot=e=>e!==null&&typeof e=="object"&&!(e instanceof Array),Do=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Mr=e=>{for(let t in e)return!1;return!0},Fe=(e,t)=>e&&t(e),Io=function(e,t,i,r){e.forEach(n=>{new Ro(n,i.config.chunk_size,r).upload()})},Qr={canPushState(){return typeof history.pushState<"u"},dropLocal(e,t,i){return e.removeItem(this.localKey(t,i))},updateLocal(e,t,i,r,n){let o=this.getLocal(e,t,i),s=this.localKey(t,i),a=o===null?r:n(o);return e.setItem(s,JSON.stringify(a)),a},getLocal(e,t,i){return JSON.parse(e.getItem(this.localKey(t,i)))},updateCurrentState(e){!this.canPushState()||history.replaceState(e(history.state||{}),"",window.location.href)},pushState(e,t,i){if(this.canPushState()){if(i!==window.location.href){if(t.type=="redirect"&&t.scroll){let n=history.state||{};n.scroll=t.scroll,history.replaceState(n,"",window.location.href)}delete t.scroll,history[e+"State"](t,"",i||null);let r=this.getHashTargetEl(window.location.hash);r?r.scrollIntoView():t.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(e,t){document.cookie=`${e}=${t}`},getCookie(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${e}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(e,t){t&&Qr.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e},localKey(e,t){return`${e}-${t}`},getHashTargetEl(e){let t=e.toString().substring(1);if(t!=="")return document.getElementById(t)||document.querySelector(`a[name="${t}"]`)}},Re=Qr,pe={byId(e){return document.getElementById(e)||se(`no id found for ${e}`)},removeClass(e,t){e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class")},all(e,t,i){if(!e)return[];let r=Array.from(e.querySelectorAll(t));return i?r.forEach(i):r},childNodeLength(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childElementCount},isUploadInput(e){return e.type==="file"&&e.getAttribute(Je)!==null},findUploadInputs(e){return this.all(e,`input[type="file"][${Je}]`)},findComponentNodeList(e,t){return this.filterWithinSameLiveView(this.all(e,`[${de}="${t}"]`),e)},isPhxDestroyed(e){return!!(e.id&&pe.private(e,"destroyed"))},wantsNewTab(e){let t=e.ctrlKey||e.shiftKey||e.metaKey||e.button&&e.button===1,i=e.target instanceof HTMLAnchorElement&&e.target.hasAttribute("download"),r=e.target.getAttribute("target")==="_blank";return t||r||i},isUnloadableFormSubmit(e){return!e.defaultPrevented&&!this.wantsNewTab(e)},isNewPageHref(e,t){if(e.startsWith("mailto:")||e.startsWith("tel:"))return!1;let i;try{i=new URL(e)}catch{try{i=new URL(e,t)}catch{return!0}}return i.host===t.host&&i.protocol===t.protocol&&i.pathname===t.pathname&&i.search===t.search?i.hash===""&&!i.href.endsWith("#"):!0},markPhxChildDestroyed(e){this.isPhxChild(e)&&e.setAttribute($e,""),this.putPrivate(e,"destroyed",!0)},findPhxChildrenInFragment(e,t){let i=document.createElement("template");return i.innerHTML=e,this.findPhxChildren(i.content,t)},isIgnored(e,t){return(e.getAttribute(t)||e.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(e,t,i){return e.getAttribute&&i.indexOf(e.getAttribute(t))>=0},findPhxSticky(e){return this.all(e,`[${Pr}]`)},findPhxChildren(e,t){return this.all(e,`${lt}[${st}="${t}"]`)},findParentCIDs(e,t){let i=new Set(t),r=t.reduce((n,o)=>{let s=`[${de}="${o}"] [${de}]`;return this.filterWithinSameLiveView(this.all(e,s),e).map(a=>parseInt(a.getAttribute(de))).forEach(a=>n.delete(a)),n},i);return r.size===0?new Set(t):r},filterWithinSameLiveView(e,t){return t.querySelector(lt)?e.filter(i=>this.withinSameLiveView(i,t)):e},withinSameLiveView(e,t){for(;e=e.parentNode;){if(e.isSameNode(t))return!0;if(e.getAttribute($e)!==null)return!1}},private(e,t){return e[Pe]&&e[Pe][t]},deletePrivate(e,t){e[Pe]&&delete e[Pe][t]},putPrivate(e,t,i){e[Pe]||(e[Pe]={}),e[Pe][t]=i},updatePrivate(e,t,i,r){let n=this.private(e,t);n===void 0?this.putPrivate(e,t,r(i)):this.putPrivate(e,t,r(n))},copyPrivates(e,t){t[Pe]&&(e[Pe]=t[Pe])},putTitle(e){let t=document.querySelector("title");if(t){let{prefix:i,suffix:r}=t.dataset;document.title=`${i||""}${e}${r||""}`}else document.title=e},debounce(e,t,i,r,n,o,s,a){let l=e.getAttribute(i),h=e.getAttribute(n);l===""&&(l=r),h===""&&(h=o);let u=l||h;switch(u){case null:return a();case"blur":this.once(e,"debounce-blur")&&e.addEventListener("blur",()=>a());return;default:let v=parseInt(u),p=()=>h?this.deletePrivate(e,li):a(),m=this.incCycle(e,Pt,p);if(isNaN(v))return se(`invalid throttle/debounce value: ${u}`);if(h){let g=!1;if(t.type==="keydown"){let E=this.private(e,Lr);this.putPrivate(e,Lr,t.key),g=E!==t.key}if(!g&&this.private(e,li))return!1;a(),this.putPrivate(e,li,!0),setTimeout(()=>{s()&&this.triggerCycle(e,Pt)},v)}else setTimeout(()=>{s()&&this.triggerCycle(e,Pt,m)},v);let b=e.form;b&&this.once(b,"bind-debounce")&&b.addEventListener("submit",()=>{Array.from(new FormData(b).entries(),([g])=>{let E=b.querySelector(`[name="${g}"]`);this.incCycle(E,Pt),this.deletePrivate(E,li)})}),this.once(e,"bind-debounce")&&e.addEventListener("blur",()=>this.triggerCycle(e,Pt))}},triggerCycle(e,t,i){let[r,n]=this.private(e,t);i||(i=r),i===r&&(this.incCycle(e,t),n())},once(e,t){return this.private(e,t)===!0?!1:(this.putPrivate(e,t,!0),!0)},incCycle(e,t,i=function(){}){let[r]=this.private(e,t)||[0,i];return r++,this.putPrivate(e,t,[r,i]),r},maybeAddPrivateHooks(e,t,i){e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute(i))&&e.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},maybeHideFeedback(e,t,i){if(!(this.private(t,Ji)||this.private(t,gi))){let r=[t.name];t.name.endsWith("[]")&&r.push(t.name.slice(0,-2));let n=r.map(o=>`[${i}="${o}"]`).join(", ");pe.all(e,n,o=>o.classList.add(Ni))}},resetForm(e,t){Array.from(e.elements).forEach(i=>{let r=`[${t}="${i.id}"],
                   [${t}="${i.name}"],
                   [${t}="${i.name.replace(/\[\]$/,"")}"]`;this.deletePrivate(i,Ji),this.deletePrivate(i,gi),this.all(document,r,n=>{n.classList.add(Ni)})})},showError(e,t){(e.id||e.name)&&this.all(e.form,`[${t}="${e.id}"], [${t}="${e.name}"]`,i=>{this.removeClass(i,Ni)})},isPhxChild(e){return e.getAttribute&&e.getAttribute(st)},isPhxSticky(e){return e.getAttribute&&e.getAttribute(Pr)!==null},firstPhxChild(e){return this.isPhxChild(e)?e:this.all(e,`[${st}]`)[0]},dispatchEvent(e,t,i={}){let n={bubbles:i.bubbles===void 0?!0:!!i.bubbles,cancelable:!0,detail:i.detail||{}},o=t==="click"?new MouseEvent("click",n):new CustomEvent(t,n);e.dispatchEvent(o)},cloneNode(e,t){if(typeof t>"u")return e.cloneNode(!0);{let i=e.cloneNode(!1);return i.innerHTML=t,i}},mergeAttrs(e,t,i={}){let r=i.exclude||[],n=i.isIgnored,o=t.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;r.indexOf(l)<0&&e.setAttribute(l,t.getAttribute(l))}let s=e.attributes;for(let a=s.length-1;a>=0;a--){let l=s[a].name;n?l.startsWith("data-")&&!t.hasAttribute(l)&&e.removeAttribute(l):t.hasAttribute(l)||e.removeAttribute(l)}},mergeFocusedInput(e,t){e instanceof HTMLSelectElement||pe.mergeAttrs(e,t,{exclude:["value"]}),t.readOnly?e.setAttribute("readonly",!0):e.removeAttribute("readonly")},hasSelectionRange(e){return e.setSelectionRange&&(e.type==="text"||e.type==="textarea")},restoreFocus(e,t,i){if(!pe.isTextualInput(e))return;let r=e.matches(":focus");e.readOnly&&e.blur(),r||e.focus(),this.hasSelectionRange(e)&&e.setSelectionRange(t,i)},isFormInput(e){return/^(?:input|select|textarea)$/i.test(e.tagName)&&e.type!=="button"},syncAttrsToProps(e){e instanceof HTMLInputElement&&Kr.indexOf(e.type.toLocaleLowerCase())>=0&&(e.checked=e.getAttribute("checked")!==null)},isTextualInput(e){return yo.indexOf(e.type)>=0},isNowTriggerFormExternal(e,t){return e.getAttribute&&e.getAttribute(t)!==null},syncPendingRef(e,t,i){let r=e.getAttribute(me);if(r===null)return!0;let n=e.getAttribute(Xe);return pe.isFormInput(e)||e.getAttribute(i)!==null?(pe.isUploadInput(e)&&pe.mergeAttrs(e,t,{isIgnored:!0}),pe.putPrivate(e,me,t),!1):(Jr.forEach(o=>{e.classList.contains(o)&&t.classList.add(o)}),t.setAttribute(me,r),t.setAttribute(Xe,n),!0)},cleanChildNodes(e,t){if(pe.isPhxUpdate(e,t,["append","prepend"])){let i=[];e.childNodes.forEach(r=>{r.id||(r.nodeType===Node.TEXT_NODE&&r.nodeValue.trim()===""||se(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(r.outerHTML||r.nodeValue).trim()}"

`),i.push(r))}),i.forEach(r=>r.remove())}},replaceRootContainer(e,t,i){let r=new Set(["id",$e,_t,Yi,It]);if(e.tagName.toLowerCase()===t.toLowerCase())return Array.from(e.attributes).filter(n=>!r.has(n.name.toLowerCase())).forEach(n=>e.removeAttribute(n.name)),Object.keys(i).filter(n=>!r.has(n.toLowerCase())).forEach(n=>e.setAttribute(n,i[n])),e;{let n=document.createElement(t);return Object.keys(i).forEach(o=>n.setAttribute(o,i[o])),r.forEach(o=>n.setAttribute(o,e.getAttribute(o))),n.innerHTML=e.innerHTML,e.replaceWith(n),n}},getSticky(e,t,i){let r=(pe.private(e,"sticky")||[]).find(([n])=>t===n);if(r){let[n,o,s]=r;return s}else return typeof i=="function"?i():i},deleteSticky(e,t){this.updatePrivate(e,"sticky",[],i=>i.filter(([r,n])=>r!==t))},putSticky(e,t,i){let r=i(e);this.updatePrivate(e,"sticky",[],n=>{let o=n.findIndex(([s])=>t===s);return o>=0?n[o]=[t,i,r]:n.push([t,i,r]),n})},applyStickyOperations(e){let t=pe.private(e,"sticky");!t||t.forEach(([i,r,n])=>this.putSticky(e,i,r))}},d=pe,Vi=class{static isActive(e,t){let i=t._phxRef===void 0,n=e.getAttribute(qi).split(",").indexOf(oe.genFileRef(t))>=0;return t.size>0&&(i||n)}static isPreflighted(e,t){return e.getAttribute(Gi).split(",").indexOf(oe.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,i){this.ref=oe.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(pi,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{oe.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(pi,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),oe.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(pi,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(qi).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||se(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:Io}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||se(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}},No=0,oe=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(No++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let r=this.activeFiles(e).find(n=>this.genFileRef(n)===t);i(URL.createObjectURL(r))}static hasUploadsInProgress(e){let t=0;return d.findUploadInputs(e).forEach(i=>{i.getAttribute(Gi)!==i.getAttribute(go)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(r=>{let n={path:e.name},o=e.getAttribute(Je);i[o]=i[o]||[],n.ref=this.genFileRef(r),n.last_modified=r.lastModified,n.name=r.name||n.ref,n.relative_path=r.webkitRelativePath,n.type=r.type,n.size=r.size,i[o].push(n)}),i}static clearFiles(e){e.value=null,e.removeAttribute(Je),d.putPrivate(e,"files",[])}static untrackFile(e,t){d.putPrivate(e,"files",d.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t,i){if(e.getAttribute("multiple")!==null){let r=t.filter(n=>!this.activeFiles(e).find(o=>Object.is(o,n)));d.putPrivate(e,"files",this.activeFiles(e).concat(r)),e.value=null}else i&&i.files.length>0&&(e.files=i.files),d.putPrivate(e,"files",t)}static activeFileInputs(e){let t=d.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(d.private(e,"files")||[]).filter(t=>Vi.isActive(e,t))}static inputsAwaitingPreflight(e){let t=d.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!Vi.isPreflighted(e,t))}constructor(e,t,i){this.view=t,this.onComplete=i,this._entries=Array.from(oe.filesAwaitingPreflight(e)||[]).map(r=>new Vi(e,r,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(n=>(n.zipPostFlight(e),n.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),n));let r=this._entries.reduce((n,o)=>{let{name:s,callback:a}=o.uploader(i.uploaders);return n[s]=n[s]||{callback:a,entries:[]},n[s].entries.push(o),n},{});for(let n in r){let{callback:o,entries:s}=r[n];o(s,t,e,i)}}},Mo={focusMain(){let e=document.querySelector("main h1, main, h1");if(e){let t=e.tabIndex;e.tabIndex=-1,e.focus(),e.tabIndex=t}},anyOf(e,t){return t.find(i=>e instanceof i)},isFocusable(e,t){return e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||!e.disabled&&this.anyOf(e,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true"},attemptFocus(e,t){if(this.isFocusable(e,t))try{e.focus()}catch{}return!!document.activeElement&&document.activeElement.isSameNode(e)},focusFirstInteractive(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t,!0)||this.focusFirstInteractive(t,!0))return!0;t=t.nextElementSibling}},focusFirst(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t)||this.focusFirst(t))return!0;t=t.nextElementSibling}},focusLast(e){let t=e.lastElementChild;for(;t;){if(this.attemptFocus(t)||this.focusLast(t))return!0;t=t.previousElementSibling}}},at=Mo,Zr={LiveFileUpload:{activeRefs(){return this.el.getAttribute(qi)},preflightedRefs(){return this.el.getAttribute(Gi)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let e=this.preflightedRefs();this.preflightedWas!==e&&(this.preflightedWas=e,e===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(pi))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(Je)),oe.getEntryDataURL(this.inputEl,this.ref,e=>{this.url=e,this.el.src=e})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>at.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>at.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&at.focusFirst(this.el)}}},Hr=()=>document.documentElement.scrollTop||document.body.scrollTop,Ki=()=>window.innerHeight||document.documentElement.clientHeight,Ho=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=Ki()},jo=e=>{let t=e.getBoundingClientRect();return t.right>=0&&t.left>=0&&t.bottom<=Ki()},jr=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=Ki()};Zr.InfiniteScroll={mounted(){let e=Hr(),t=!1,i=500,r=null,n=this.throttle(i,(a,l)=>{r=()=>!0,this.liveSocket.execJSHookPush(this.el,a,{id:l.id,_overran:!0},()=>{r=null})}),o=this.throttle(i,(a,l)=>{r=()=>l.scrollIntoView({block:"start"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{r=null,jr(l)||l.scrollIntoView({block:"start"})})}),s=this.throttle(i,(a,l)=>{r=()=>l.scrollIntoView({block:"end"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{r=null,jr(l)||l.scrollIntoView({block:"end"})})});this.onScroll=a=>{let l=Hr();if(r)return e=l,r();let h=this.el.getBoundingClientRect(),u=this.el.getAttribute(this.liveSocket.binding("viewport-top")),v=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),p=this.el.lastElementChild,m=this.el.firstElementChild,b=l<e,g=l>e;b&&u&&!t&&h.top>=0?(t=!0,n(u,m)):g&&t&&h.top<=0&&(t=!1),u&&b&&Ho(m)?o(u,m):v&&g&&jo(p)&&s(v,p),e=l},window.addEventListener("scroll",this.onScroll)},destroyed(){window.removeEventListener("scroll",this.onScroll)},throttle(e,t){let i=0,r;return(...n)=>{let o=Date.now(),s=e-(o-i);s<=0||s>e?(r&&(clearTimeout(r),r=null),i=o,t(...n)):r||(r=setTimeout(()=>{i=Date.now(),r=null,t(...n)},s))}}};var Bo=Zr,Fo=class{constructor(e,t,i){let r=new Set,n=new Set([...t.children].map(s=>s.id)),o=[];Array.from(e.children).forEach(s=>{if(s.id&&(r.add(s.id),n.has(s.id))){let a=s.previousElementSibling&&s.previousElementSibling.id;o.push({elementId:s.id,previousElementId:a})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=o,this.elementIdsToAdd=[...n].filter(s=>!r.has(s))}perform(){let e=d.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?Fe(document.getElementById(t.previousElementId),i=>{Fe(document.getElementById(t.elementId),r=>{r.previousElementSibling&&r.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",r)})}):Fe(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{Fe(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}},Br=11;function $o(e,t){var i=t.attributes,r,n,o,s,a;if(!(t.nodeType===Br||e.nodeType===Br)){for(var l=i.length-1;l>=0;l--)r=i[l],n=r.name,o=r.namespaceURI,s=r.value,o?(n=r.localName||n,a=e.getAttributeNS(o,n),a!==s&&(r.prefix==="xmlns"&&(n=r.name),e.setAttributeNS(o,n,s))):(a=e.getAttribute(n),a!==s&&e.setAttribute(n,s));for(var h=e.attributes,u=h.length-1;u>=0;u--)r=h[u],n=r.name,o=r.namespaceURI,o?(n=r.localName||n,t.hasAttributeNS(o,n)||e.removeAttributeNS(o,n)):t.hasAttribute(n)||e.removeAttribute(n)}}var ci,Uo="http://www.w3.org/1999/xhtml",ce=typeof document>"u"?void 0:document,Vo=!!ce&&"content"in ce.createElement("template"),Wo=!!ce&&ce.createRange&&"createContextualFragment"in ce.createRange();function qo(e){var t=ce.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function Xo(e){ci||(ci=ce.createRange(),ci.selectNode(ce.body));var t=ci.createContextualFragment(e);return t.childNodes[0]}function Jo(e){var t=ce.createElement("body");return t.innerHTML=e,t.childNodes[0]}function zo(e){return e=e.trim(),Vo?qo(e):Wo?Xo(e):Jo(e)}function ui(e,t){var i=e.nodeName,r=t.nodeName,n,o;return i===r?!0:(n=i.charCodeAt(0),o=r.charCodeAt(0),n<=90&&o>=97?i===r.toUpperCase():o<=90&&n>=97?r===i.toUpperCase():!1)}function Go(e,t){return!t||t===Uo?ce.createElement(e):ce.createElementNS(t,e)}function Yo(e,t){for(var i=e.firstChild;i;){var r=i.nextSibling;t.appendChild(i),i=r}return t}function Wi(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var Fr={OPTION:function(e,t){var i=e.parentNode;if(i){var r=i.nodeName.toUpperCase();r==="OPTGROUP"&&(i=i.parentNode,r=i&&i.nodeName.toUpperCase()),r==="SELECT"&&!i.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}Wi(e,t,"selected")},INPUT:function(e,t){Wi(e,t,"checked"),Wi(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var r=e.firstChild;if(r){var n=r.nodeValue;if(n==i||!i&&n==e.placeholder)return;r.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i=-1,r=0,n=e.firstChild,o,s;n;)if(s=n.nodeName&&n.nodeName.toUpperCase(),s==="OPTGROUP")o=n,n=o.firstChild;else{if(s==="OPTION"){if(n.hasAttribute("selected")){i=r;break}r++}n=n.nextSibling,!n&&o&&(n=o.nextSibling,o=null)}e.selectedIndex=i}}},Rt=1,$r=11,Ur=3,Vr=8;function je(){}function Ko(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Qo(e){return function(i,r,n){if(n||(n={}),typeof r=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var o=r;r=ce.createElement("html"),r.innerHTML=o}else r=zo(r);else r.nodeType===$r&&(r=r.firstElementChild);var s=n.getNodeKey||Ko,a=n.onBeforeNodeAdded||je,l=n.onNodeAdded||je,h=n.onBeforeElUpdated||je,u=n.onElUpdated||je,v=n.onBeforeNodeDiscarded||je,p=n.onNodeDiscarded||je,m=n.onBeforeElChildrenUpdated||je,b=n.skipFromChildren||je,g=n.addChild||function(S,x){return S.appendChild(x)},E=n.childrenOnly===!0,C=Object.create(null),P=[];function D(S){P.push(S)}function c(S,x){if(S.nodeType===Rt)for(var M=S.firstChild;M;){var R=void 0;x&&(R=s(M))?D(R):(p(M),M.firstChild&&c(M,x)),M=M.nextSibling}}function w(S,x,M){v(S)!==!1&&(x&&x.removeChild(S),p(S),c(S,M))}function y(S){if(S.nodeType===Rt||S.nodeType===$r)for(var x=S.firstChild;x;){var M=s(x);M&&(C[M]=x),y(x),x=x.nextSibling}}y(i);function O(S){l(S);for(var x=S.firstChild;x;){var M=x.nextSibling,R=s(x);if(R){var j=C[R];j&&ui(x,j)?(x.parentNode.replaceChild(j,x),L(j,x)):O(x)}else O(x);x=M}}function _(S,x,M){for(;x;){var R=x.nextSibling;(M=s(x))?D(M):w(x,S,!0),x=R}}function L(S,x,M){var R=s(x);R&&delete C[R],!(!M&&(h(S,x)===!1||(e(S,x),u(S),m(S,x)===!1)))&&(S.nodeName!=="TEXTAREA"?I(S,x):Fr.TEXTAREA(S,x))}function I(S,x){var M=b(S),R=x.firstChild,j=S.firstChild,ee,ie,re,ne,Y;e:for(;R;){for(ne=R.nextSibling,ee=s(R);!M&&j;){if(re=j.nextSibling,R.isSameNode&&R.isSameNode(j)){R=ne,j=re;continue e}ie=s(j);var ye=j.nodeType,K=void 0;if(ye===R.nodeType&&(ye===Rt?(ee?ee!==ie&&((Y=C[ee])?re===Y?K=!1:(S.insertBefore(Y,j),ie?D(ie):w(j,S,!0),j=Y):K=!1):ie&&(K=!1),K=K!==!1&&ui(j,R),K&&L(j,R)):(ye===Ur||ye==Vr)&&(K=!0,j.nodeValue!==R.nodeValue&&(j.nodeValue=R.nodeValue))),K){R=ne,j=re;continue e}ie?D(ie):w(j,S,!0),j=re}if(ee&&(Y=C[ee])&&ui(Y,R))M||g(S,Y),L(Y,R);else{var Te=a(R);Te!==!1&&(Te&&(R=Te),R.actualize&&(R=R.actualize(S.ownerDocument||ce)),g(S,R),O(R))}R=ne,j=re}_(S,j,ie);var we=Fr[S.nodeName];we&&we(S,x)}var T=i,N=T.nodeType,F=r.nodeType;if(!E){if(N===Rt)F===Rt?ui(i,r)||(p(i),T=Yo(i,Go(r.nodeName,r.namespaceURI))):T=r;else if(N===Ur||N===Vr){if(F===N)return T.nodeValue!==r.nodeValue&&(T.nodeValue=r.nodeValue),T;T=r}}if(T===r)p(i);else{if(r.isSameNode&&r.isSameNode(T))return;if(L(T,r,E),P)for(var J=0,q=P.length;J<q;J++){var U=C[P[J]];U&&w(U,U.parentNode,!1)}}return!E&&T!==i&&i.parentNode&&(T.actualize&&(T=T.actualize(i.ownerDocument||ce)),i.parentNode.replaceChild(T,i)),T}}var Zo=Qo($o),Wr=Zo,hi=class{static patchEl(e,t,i){Wr(e,t,{childrenOnly:!1,onBeforeElUpdated:(r,n)=>{if(i&&i.isSameNode(r)&&d.isFormInput(r))return d.mergeFocusedInput(r,n),!1}})}constructor(e,t,i,r,n,o){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=r,this.streams=n,this.streamInserts={},this.targetCID=o,this.cidPatch=Be(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){let e=this.liveSocket.binding(bi);d.all(this.container,`[${e}=${ji}]`,t=>t.innerHTML=""),d.all(this.container,`[${e}=append] > *, [${e}=prepend] > *`,t=>{t.setAttribute(xr,"")})}perform(){let{view:e,liveSocket:t,container:i,html:r}=this,n=this.isCIDPatch()?this.targetCIDContainer(r):i;if(this.isCIDPatch()&&!n)return;let o=t.getActiveElement(),{selectionStart:s,selectionEnd:a}=o&&d.hasSelectionRange(o)?o:{},l=t.binding(bi),h=t.binding(vi),u=t.binding(zi),v=t.binding(Gr),p=t.binding(Yr),m=t.binding(bo),b=[],g=[],E=[],C=[],P=null,D=t.time("premorph container prep",()=>this.buildDiffHTML(i,r,l,n));return this.trackBefore("added",i),this.trackBefore("updated",i,i),t.time("morphdom",()=>{this.streams.forEach(([c,w,y,O])=>{Object.entries(w).forEach(([_,[L,I]])=>{this.streamInserts[_]={ref:c,streamAt:L,limit:I}}),O!==void 0&&d.all(i,`[${kt}="${c}"]`,_=>{this.removeStreamChildElement(_)}),y.forEach(_=>{let L=i.querySelector(`[id="${_}"]`);L&&this.removeStreamChildElement(L)})}),Wr(n,D,{childrenOnly:n.getAttribute(de)===null,getNodeKey:c=>d.isPhxDestroyed(c)?null:c.id,skipFromChildren:c=>c.getAttribute(l)===ji,addChild:(c,w)=>{let{ref:y,streamAt:O,limit:_}=this.getStreamInsert(w);if(y===void 0)return c.appendChild(w);if(d.putSticky(w,kt,I=>I.setAttribute(kt,y)),O===0)c.insertAdjacentElement("afterbegin",w);else if(O===-1)c.appendChild(w);else if(O>0){let I=Array.from(c.children)[O];c.insertBefore(w,I)}let L=_!==null&&Array.from(c.children);_&&_<0&&L.length>_*-1?L.slice(0,L.length+_).forEach(I=>this.removeStreamChildElement(I)):_&&_>=0&&L.length>_&&L.slice(_).forEach(I=>this.removeStreamChildElement(I))},onBeforeNodeAdded:c=>(d.maybeAddPrivateHooks(c,v,p),this.trackBefore("added",c),c),onNodeAdded:c=>{c.getAttribute&&this.maybeReOrderStream(c),c instanceof HTMLImageElement&&c.srcset?c.srcset=c.srcset:c instanceof HTMLVideoElement&&c.autoplay&&c.play(),d.isNowTriggerFormExternal(c,m)&&(P=c),c.getAttribute&&c.getAttribute("name")&&g.push(c),(d.isPhxChild(c)&&e.ownsElement(c)||d.isPhxSticky(c)&&e.ownsElement(c.parentNode))&&this.trackAfter("phxChildAdded",c),b.push(c)},onNodeDiscarded:c=>this.onNodeDiscarded(c),onBeforeNodeDiscarded:c=>c.getAttribute&&c.getAttribute(xr)!==null?!0:!(c.parentElement!==null&&c.id&&d.isPhxUpdate(c.parentElement,l,[ji,"append","prepend"])||this.maybePendingRemove(c)||this.skipCIDSibling(c)),onElUpdated:c=>{d.isNowTriggerFormExternal(c,m)&&(P=c),E.push(c),this.maybeReOrderStream(c)},onBeforeElUpdated:(c,w)=>{if(d.cleanChildNodes(w,l),this.skipCIDSibling(w)||d.isPhxSticky(c))return!1;if(d.isIgnored(c,l)||c.form&&c.form.isSameNode(P))return this.trackBefore("updated",c,w),d.mergeAttrs(c,w,{isIgnored:!0}),E.push(c),d.applyStickyOperations(c),!1;if(c.type==="number"&&c.validity&&c.validity.badInput)return!1;if(!d.syncPendingRef(c,w,u))return d.isUploadInput(c)&&(this.trackBefore("updated",c,w),E.push(c)),d.applyStickyOperations(c),!1;if(d.isPhxChild(w)){let O=c.getAttribute($e);return d.mergeAttrs(c,w,{exclude:[_t]}),O!==""&&c.setAttribute($e,O),c.setAttribute(It,this.rootID),d.applyStickyOperations(c),!1}return d.copyPrivates(w,c),o&&c.isSameNode(o)&&d.isFormInput(c)&&c.type!=="hidden"?(this.trackBefore("updated",c,w),d.mergeFocusedInput(c,w),d.syncAttrsToProps(c),E.push(c),d.applyStickyOperations(c),g.push(c),!1):(d.isPhxUpdate(w,l,["append","prepend"])&&C.push(new Fo(c,w,w.getAttribute(l))),d.maybeAddPrivateHooks(w,v,p),d.syncAttrsToProps(w),d.applyStickyOperations(w),w.getAttribute("name")&&g.push(w),this.trackBefore("updated",c,w),!0)}})}),t.isDebugEnabled()&&Lo(),C.length>0&&t.time("post-morph append/prepend restoration",()=>{C.forEach(c=>c.perform())}),g.forEach(c=>{d.maybeHideFeedback(n,c,h)}),t.silenceEvents(()=>d.restoreFocus(o,s,a)),d.dispatchEvent(document,"phx:update"),b.forEach(c=>this.trackAfter("added",c)),E.forEach(c=>this.trackAfter("updated",c)),this.transitionPendingRemoves(),P&&(t.unload(),P.submit()),!0}onNodeDiscarded(e){(d.isPhxChild(e)||d.isPhxSticky(e))&&this.liveSocket.destroyViewByEl(e),this.trackAfter("discarded",e)}maybePendingRemove(e){return e.getAttribute&&e.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(e),!0):!1}removeStreamChildElement(e){this.maybePendingRemove(e)||(e.remove(),this.onNodeDiscarded(e))}getStreamInsert(e){return(e.id?this.streamInserts[e.id]:{})||{}}maybeReOrderStream(e){let{ref:t,streamAt:i,limit:r}=this.getStreamInsert(e);if(i!==void 0){if(d.putSticky(e,kt,n=>n.setAttribute(kt,t)),i===0)e.parentElement.insertBefore(e,e.parentElement.firstElementChild);else if(i>0){let n=Array.from(e.parentElement.children),o=n.indexOf(e);if(i>=n.length-1)e.parentElement.appendChild(e);else{let s=n[i];o>i?e.parentElement.insertBefore(e,s):e.parentElement.insertBefore(e,s.nextElementSibling)}}}}transitionPendingRemoves(){let{pendingRemoves:e,liveSocket:t}=this;e.length>0&&(t.transitionRemoves(e),t.requestDOMUpdate(()=>{e.forEach(i=>{let r=d.firstPhxChild(i);r&&t.destroyViewByEl(r),i.remove()}),this.trackAfter("transitionsDiscarded",e)}))}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(Xi)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=d.findComponentNodeList(this.container,this.targetCID);return i.length===0&&d.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,i,r){let n=this.isCIDPatch(),o=n&&r.getAttribute(de)===this.targetCID.toString();if(!n||o)return t;{let s=null,a=document.createElement("template");s=d.cloneNode(r);let[l,...h]=d.findComponentNodeList(s,this.targetCID);return a.innerHTML=t,h.forEach(u=>u.remove()),Array.from(s.childNodes).forEach(u=>{u.id&&u.nodeType===Node.ELEMENT_NODE&&u.getAttribute(de)!==this.targetCID.toString()&&(u.setAttribute(Xi,""),u.innerHTML="")}),Array.from(a.content.childNodes).forEach(u=>s.insertBefore(u,l)),l.remove(),s.outerHTML}}indexOf(e,t){return Array.from(e.children).indexOf(t)}},qr=class{static extract(e){let{[Dr]:t,[_r]:i,[Ir]:r}=e;return delete e[Dr],delete e[_r],delete e[Ir],{diff:e,title:r,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){let[t,i]=this.recursiveToString(this.rendered,this.rendered[he],e);return[t,i]}recursiveToString(e,t=e[he],i){i=i?new Set(i):null;let r={buffer:"",components:t,onlyCids:i,streams:new Set};return this.toOutputBuffer(e,null,r),[r.buffer,r.streams]}componentCIDs(e){return Object.keys(e[he]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[he]?Object.keys(e).length===1:!1}getComponent(e,t){return e[he][t]}mergeDiff(e){let t=e[he],i={};if(delete e[he],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[he]=this.rendered[he]||{},t){let r=this.rendered[he];for(let n in t)t[n]=this.cachedFindComponent(n,t[n],r,t,i);for(let n in t)r[n]=t[n];e[he]=t}}cachedFindComponent(e,t,i,r,n){if(n[e])return n[e];{let o,s,a=t[Oe];if(Be(a)){let l;a>0?l=this.cachedFindComponent(a,r[a],i,r,n):l=i[-a],s=l[Oe],o=this.cloneMerge(l,t),o[Oe]=s}else o=t[Oe]!==void 0?t:this.cloneMerge(i[e]||{},t);return n[e]=o,o}}mutableMerge(e,t){return t[Oe]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let r=t[i],n=e[i];Ot(r)&&r[Oe]===void 0&&Ot(n)?this.doMutableMerge(n,r):e[i]=r}}cloneMerge(e,t){let i={...e,...t};for(let r in i){let n=t[r],o=e[r];Ot(n)&&n[Oe]===void 0&&Ot(o)&&(i[r]=this.cloneMerge(o,n))}return i}componentToString(e){let[t,i]=this.recursiveCIDToString(this.rendered[he],e);return[t,i]}pruneCIDs(e){e.forEach(t=>delete this.rendered[he][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[Oe]}templateStatic(e,t){return typeof e=="number"?t[e]:e}toOutputBuffer(e,t,i){if(e[$i])return this.comprehensionToBuffer(e,t,i);let{[Oe]:r}=e;r=this.templateStatic(r,t),i.buffer+=r[0];for(let n=1;n<r.length;n++)this.dynamicToBuffer(e[n-1],t,i),i.buffer+=r[n]}comprehensionToBuffer(e,t,i){let{[$i]:r,[Oe]:n,[Nr]:o}=e,[s,a,l,h]=o||[null,{},[],null];n=this.templateStatic(n,t);let u=t||e[Oo];for(let v=0;v<r.length;v++){let p=r[v];i.buffer+=n[0];for(let m=1;m<n.length;m++)this.dynamicToBuffer(p[m-1],u,i),i.buffer+=n[m]}o!==void 0&&(e[$i].length>0||l.length>0||h)&&(delete e[Nr],i.streams.add(o))}dynamicToBuffer(e,t,i){if(typeof e=="number"){let[r,n]=this.recursiveCIDToString(i.components,e,i.onlyCids);i.buffer+=r,i.streams=new Set([...i.streams,...n])}else Ot(e)?this.toOutputBuffer(e,t,i):i.buffer+=e}recursiveCIDToString(e,t,i){let r=e[t]||se(`no component for CID ${t}`,e),n=document.createElement("template"),[o,s]=this.recursiveToString(r,e,i);n.innerHTML=o;let a=n.content,l=i&&!i.has(t),[h,u]=Array.from(a.childNodes).reduce(([v,p],m,b)=>m.nodeType===Node.ELEMENT_NODE?m.getAttribute(de)?[v,!0]:(m.setAttribute(de,t),m.id||(m.id=`${this.parentViewId()}-${t}-${b}`),l&&(m.setAttribute(Xi,""),m.innerHTML=""),[!0,p]):m.nodeValue.trim()!==""?(se(`only HTML element tags are allowed at the root of components.

got: "${m.nodeValue.trim()}"

within:
`,n.innerHTML.trim()),m.replaceWith(this.createSpan(m.nodeValue,t)),[!0,p]):(m.remove(),[v,p]),[!1,!1]);return!h&&!u?(se(`expected at least one HTML element tag inside a component, but the component is empty:
`,n.innerHTML.trim()),[this.createSpan("",t).outerHTML,s]):!h&&u?(se("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",n.innerHTML.trim()),[n.innerHTML,s]):[n.innerHTML,s]}createSpan(e,t){let i=document.createElement("span");return i.innerText=e,i.setAttribute(de,t),i}},es=1,Lt=class{static makeID(){return es++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let r in this.__callbacks)this[r]=this.__callbacks[r]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(this.el,null,e,t,i)}pushEventTo(e,t,i={},r=function(){}){return this.__view.withinTargets(e,(n,o)=>n.pushHookEvent(this.el,o,t,i,r))}handleEvent(e,t){let i=(r,n)=>n?e:t(r.detail);return window.addEventListener(`phx:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,r=>r.dispatchUploads(t,i))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}},di=null,ts={exec(e,t,i,r,n){let[o,s]=n||[null,{callback:n&&n.callback}];(t.charAt(0)==="["?JSON.parse(t):[[o,s]]).forEach(([l,h])=>{l===o&&s.data&&(h.data=Object.assign(h.data||{},s.data),h.callback=h.callback||s.callback),this.filterToEls(r,h).forEach(u=>{this[`exec_${l}`](e,t,i,r,u,h)})})},isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length>0)},exec_exec(e,t,i,r,n,[o,s]){(s?d.all(document,s):[r]).forEach(l=>{let h=l.getAttribute(o);if(!h)throw new Error(`expected ${o} to contain JS command on "${s}"`);i.liveSocket.execJS(l,h,e)})},exec_dispatch(e,t,i,r,n,{to:o,event:s,detail:a,bubbles:l}){a=a||{},a.dispatcher=r,d.dispatchEvent(n,s,{detail:a,bubbles:l})},exec_push(e,t,i,r,n,o){if(!i.isConnected())return;let{event:s,data:a,target:l,page_loading:h,loading:u,value:v,dispatcher:p,callback:m}=o,b={loading:u,value:v,target:l,page_loading:!!h},g=e==="change"&&p?p:r,E=l||g.getAttribute(i.binding("target"))||g;i.withinTargets(E,(C,P)=>{if(e==="change"){let{newCid:D,_target:c}=o;c=c||(d.isFormInput(r)?r.name:void 0),c&&(b._target=c),C.pushInput(r,P,D,s||t,b,m)}else if(e==="submit"){let{submitter:D}=o;C.submitForm(r,P,s||t,D,b,m)}else C.pushEvent(e,r,P,s||t,a,b,m)})},exec_navigate(e,t,i,r,n,{href:o,replace:s}){i.liveSocket.historyRedirect(o,s?"replace":"push")},exec_patch(e,t,i,r,n,{href:o,replace:s}){i.liveSocket.pushHistoryPatch(o,s?"replace":"push",r)},exec_focus(e,t,i,r,n){window.requestAnimationFrame(()=>at.attemptFocus(n))},exec_focus_first(e,t,i,r,n){window.requestAnimationFrame(()=>at.focusFirstInteractive(n)||at.focusFirst(n))},exec_push_focus(e,t,i,r,n){window.requestAnimationFrame(()=>di=n||r)},exec_pop_focus(e,t,i,r,n){window.requestAnimationFrame(()=>{di&&di.focus(),di=null})},exec_add_class(e,t,i,r,n,{names:o,transition:s,time:a}){this.addOrRemoveClasses(n,o,[],s,a,i)},exec_remove_class(e,t,i,r,n,{names:o,transition:s,time:a}){this.addOrRemoveClasses(n,[],o,s,a,i)},exec_transition(e,t,i,r,n,{time:o,transition:s}){this.addOrRemoveClasses(n,[],[],s,o,i)},exec_toggle(e,t,i,r,n,{display:o,ins:s,outs:a,time:l}){this.toggle(e,i,n,o,s,a,l)},exec_show(e,t,i,r,n,{display:o,transition:s,time:a}){this.show(e,i,n,o,s,a)},exec_hide(e,t,i,r,n,{display:o,transition:s,time:a}){this.hide(e,i,n,o,s,a)},exec_set_attr(e,t,i,r,n,{attr:[o,s]}){this.setOrRemoveAttrs(n,[[o,s]],[])},exec_remove_attr(e,t,i,r,n,{attr:o}){this.setOrRemoveAttrs(n,[],[o])},show(e,t,i,r,n,o){this.isVisible(i)||this.toggle(e,t,i,r,n,null,o)},hide(e,t,i,r,n,o){this.isVisible(i)&&this.toggle(e,t,i,r,null,n,o)},toggle(e,t,i,r,n,o,s){let[a,l,h]=n||[[],[],[]],[u,v,p]=o||[[],[],[]];if(a.length>0||u.length>0)if(this.isVisible(i)){let m=()=>{this.addOrRemoveClasses(i,v,a.concat(l).concat(h)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,u,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,p,v))})};i.dispatchEvent(new Event("phx:hide-start")),t.transition(s,m,()=>{this.addOrRemoveClasses(i,[],u.concat(p)),d.putSticky(i,"toggle",b=>b.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))})}else{if(e==="remove")return;let m=()=>{this.addOrRemoveClasses(i,l,u.concat(v).concat(p));let b=r||this.defaultDisplay(i);d.putSticky(i,"toggle",g=>g.style.display=b),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,h,l))})};i.dispatchEvent(new Event("phx:show-start")),t.transition(s,m,()=>{this.addOrRemoveClasses(i,[],a.concat(h)),i.dispatchEvent(new Event("phx:show-end"))})}else this.isVisible(i)?window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:hide-start")),d.putSticky(i,"toggle",m=>m.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:show-start"));let m=r||this.defaultDisplay(i);d.putSticky(i,"toggle",b=>b.style.display=m),i.dispatchEvent(new Event("phx:show-end"))})},addOrRemoveClasses(e,t,i,r,n,o){let[s,a,l]=r||[[],[],[]];if(s.length>0){let h=()=>this.addOrRemoveClasses(e,a.concat(s),[]),u=()=>this.addOrRemoveClasses(e,t.concat(l),i.concat(s).concat(a));return o.transition(n,h,u)}window.requestAnimationFrame(()=>{let[h,u]=d.getSticky(e,"classes",[[],[]]),v=t.filter(g=>h.indexOf(g)<0&&!e.classList.contains(g)),p=i.filter(g=>u.indexOf(g)<0&&e.classList.contains(g)),m=h.filter(g=>i.indexOf(g)<0).concat(v),b=u.filter(g=>t.indexOf(g)<0).concat(p);d.putSticky(e,"classes",g=>(g.classList.remove(...b),g.classList.add(...m),[m,b]))})},setOrRemoveAttrs(e,t,i){let[r,n]=d.getSticky(e,"attrs",[[],[]]),o=t.map(([l,h])=>l).concat(i),s=r.filter(([l,h])=>!o.includes(l)).concat(t),a=n.filter(l=>!o.includes(l)).concat(i);d.putSticky(e,"attrs",l=>(a.forEach(h=>l.removeAttribute(h)),s.forEach(([h,u])=>l.setAttribute(h,u)),[s,a]))},hasAllClasses(e,t){return t.every(i=>e.classList.contains(i))},isToggledOut(e,t){return!this.isVisible(e)||this.hasAllClasses(e,t)},filterToEls(e,{to:t}){return t?d.all(document,t):[e]},defaultDisplay(e){return{tr:"table-row",td:"table-cell"}[e.tagName.toLowerCase()]||"block"}},Ee=ts,fi=(e,t,i=[])=>{let{submitter:r,...n}=t,o=new FormData(e);r&&r.hasAttribute("name")&&r.form&&r.form===e&&o.append(r.name,r.value);let s=[];o.forEach((l,h,u)=>{l instanceof File&&s.push(h)}),s.forEach(l=>o.delete(l));let a=new URLSearchParams;for(let[l,h]of o.entries())(i.length===0||i.indexOf(l)>=0)&&a.append(l,h);for(let l in n)a.append(l,n[l]);return a.toString()},en=class{constructor(e,t,i,r,n){this.isDead=!1,this.liveSocket=t,this.flash=r,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(o){o&&o()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(n),session:this.getSession(),static:this.getStatic(),flash:this.flash}))}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.hasAttribute(Yi)}connectParams(e){let t=this.liveSocket.params(this.el),i=d.all(document,`[${this.binding(mo)}]`).map(r=>r.src||r.href).filter(r=>typeof r=="string");return i.length>0&&(t._track_static=i),t._mounts=this.joinCount,t._live_referer=e,t}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute($e)}getStatic(){let e=this.el.getAttribute(_t);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};d.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(Tr,Ct,ni,kr,Mi),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(Ct)}}execAll(e){d.all(this.el,`[${e}]`,t=>this.liveSocket.execJS(t,t.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(Tr),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}transition(e,t,i=function(){}){this.liveSocket.transition(e,t,i)}withinTargets(e,t){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,i=>t(i,e));if(Be(e))d.findComponentNodeList(this.el,e).length===0?se(`no component found matching phx-target of ${e}`):t(this,parseInt(e));else{let i=Array.from(document.querySelectorAll(e));i.length===0&&se(`nothing found matching the phx-target selector "${e}"`),i.forEach(r=>this.liveSocket.owner(r,n=>t(n,r)))}}applyDiff(e,t,i){this.log(e,()=>["",mi(t)]);let{diff:r,reply:n,events:o,title:s}=qr.extract(t);i({diff:r,reply:n,events:o}),s&&window.requestAnimationFrame(()=>d.putTitle(s))}onJoin(e){let{rendered:t,container:i}=e;if(i){let[r,n]=i;this.el=d.replaceRootContainer(this.el,r,n)}this.childJoins=0,this.joinPending=!0,this.flash=null,Re.dropLocal(this.liveSocket.localStorage,window.location.pathname,Xr),this.applyDiff("mount",t,({diff:r,events:n})=>{this.rendered=new qr(this.id,r);let[o,s]=this.renderContainer(null,"join");this.dropPendingRefs();let a=this.formsForRecovery(o);this.joinCount++,a.length>0?a.forEach(([l,h,u],v)=>{this.pushFormRecovery(l,u,p=>{v===a.length-1&&this.onJoinComplete(p,o,s,n)})}):this.onJoinComplete(e,o,s,n)})}dropPendingRefs(){d.all(document,`[${Xe}="${this.id}"][${me}]`,e=>{e.removeAttribute(me),e.removeAttribute(Xe)})}onJoinComplete({live_patch:e},t,i,r){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i,r);d.findPhxChildrenInFragment(t,this.id).filter(o=>{let s=o.id&&this.el.querySelector(`[id="${o.id}"]`),a=s&&s.getAttribute(_t);return a&&o.setAttribute(_t,a),this.joinChild(o)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,r)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i,r)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,r)])}attachTrueDocEl(){this.el=d.byId(this.id),this.el.setAttribute(It,this.root.id)}execNewMounted(){let e=this.binding(Gr),t=this.binding(Yr);d.all(this.el,`[${e}], [${t}]`,i=>{d.maybeAddPrivateHooks(i,e,t),this.maybeAddNewHook(i)}),d.all(this.el,`[${this.binding(Tt)}], [data-phx-${Tt}]`,i=>{this.maybeAddNewHook(i)}),d.all(this.el,`[${this.binding(Rr)}]`,i=>this.maybeMounted(i))}applyJoinPatch(e,t,i,r){this.attachTrueDocEl();let n=new hi(this,this.el,this.id,t,i,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(r),this.applyPendingUpdates(),e){let{kind:o,to:s}=e;this.liveSocket.historyPatch(s,o)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),r=i&&d.isIgnored(e,this.binding(bi));if(i&&!e.isEqualNode(t)&&!(r&&Do(e.dataset,t.dataset)))return i.__beforeUpdate(),i}maybeMounted(e){let t=e.getAttribute(this.binding(Rr)),i=t&&d.private(e,"mounted");t&&!i&&(this.liveSocket.execJS(e,t),d.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,t){let i=this.addHook(e);i&&i.__mounted()}performPatch(e,t){let i=[],r=!1,n=new Set;return e.after("added",o=>{this.liveSocket.triggerDOM("onNodeAdded",[o]),this.maybeAddNewHook(o),o.getAttribute&&this.maybeMounted(o)}),e.after("phxChildAdded",o=>{d.isPhxSticky(o)?this.liveSocket.joinRootViews():r=!0}),e.before("updated",(o,s)=>{this.triggerBeforeUpdateHook(o,s)&&n.add(o.id)}),e.after("updated",o=>{n.has(o.id)&&this.getHook(o).__updated()}),e.after("discarded",o=>{o.nodeType===Node.ELEMENT_NODE&&i.push(o)}),e.after("transitionsDiscarded",o=>this.afterElementsRemoved(o,t)),e.perform(),this.afterElementsRemoved(i,t),r}afterElementsRemoved(e,t){let i=[];e.forEach(r=>{let n=d.all(r,`[${de}]`),o=d.all(r,`[${this.binding(Tt)}]`);n.concat(r).forEach(s=>{let a=this.componentID(s);Be(a)&&i.indexOf(a)===-1&&i.push(a)}),o.concat(r).forEach(s=>{let a=this.getHook(s);a&&this.destroyHook(a)})}),t&&this.maybePushComponentsDestroyed(i)}joinNewChildren(){d.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(st)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new en(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]})}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{d.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(n=>{this.componentPatch(this.rendered.getComponent(e,n),n)&&(i=!0)})}):Mr(e)||this.liveSocket.time("full patch complete",()=>{let[r,n]=this.renderContainer(e,"update"),o=new hi(this,this.el,this.id,r,n,null);i=this.performPatch(o,!0)}),this.liveSocket.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,r=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,[n,o]=this.rendered.toString(r);return[`<${i}>${n}</${i}>`,o]})}componentPatch(e,t){if(Mr(e))return!1;let[i,r]=this.rendered.componentToString(t),n=new hi(this,this.el,this.id,i,r,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[Lt.elementID(e)]}addHook(e){if(Lt.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${Tt}`)||e.getAttribute(this.binding(Tt));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||se(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let r=new Lt(this,e,i);return this.viewHooks[Lt.elementID(r.el)]=r,r}else t!==null&&se(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[Lt.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[],this.eachChild(e=>e.applyPendingUpdates())}eachChild(e){let t=this.root.children[this.id]||{};for(let i in t)e(this.getChildById(i))}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):this.liveSocket.requestDOMUpdate(()=>t(i))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))})}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){this.eachChild(e=>e.destroy())}onLiveRedirect(e){let{to:t,kind:i,flash:r}=e,n=this.expandURL(t);this.liveSocket.historyRedirect(n,i,r)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=t=>{t=t||function(){},e?e(this.joinCount,t):t()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(t))}).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="reload")return this.log("error",()=>[`failed mount with ${e.status}. Falling back to page request`,e]),this.onRedirect({to:this.href});if(e.reason==="unauthorized"||e.reason==="stale")return this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href});if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.displayError([Ct,ni,Mi]),this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(Co)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([Ct,ni,Mi]):this.displayError([Ct,ni,kr]))}displayError(e){this.isMain()&&d.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...e),this.execAll(this.binding("disconnected"))}pushWithReply(e,t,i,r=function(){}){if(!this.isConnected())return;let[n,[o],s]=e?e():[null,[],{}],a=function(){};return(s.page_loading||o&&o.getAttribute(this.binding(Cr))!==null)&&(a=this.liveSocket.withPageLoading({kind:"element",target:o})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,ko).receive("ok",l=>{let h=u=>{l.redirect&&this.onRedirect(l.redirect),l.live_patch&&this.onLivePatch(l.live_patch),l.live_redirect&&this.onLiveRedirect(l.live_redirect),a(),r(l,u)};l.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",l.diff,({diff:u,reply:v,events:p})=>{n!==null&&this.undoRefs(n),this.update(u,p),h(v)})}):(n!==null&&this.undoRefs(n),h(null))}))}undoRefs(e){!this.isConnected()||d.all(document,`[${Xe}="${this.id}"][${me}="${e}"]`,t=>{let i=t.getAttribute(oi);t.removeAttribute(me),t.removeAttribute(Xe),t.getAttribute(Hi)!==null&&(t.readOnly=!1,t.removeAttribute(Hi)),i!==null&&(t.disabled=i==="true",t.removeAttribute(oi)),Jr.forEach(o=>d.removeClass(t,o));let r=t.getAttribute(si);r!==null&&(t.innerText=r,t.removeAttribute(si));let n=d.private(t,me);if(n){let o=this.triggerBeforeUpdateHook(t,n);hi.patchEl(t,n,this.liveSocket.getActiveElement()),o&&o.__updated(),d.deletePrivate(t,me)}})}putRef(e,t,i={}){let r=this.ref++,n=this.binding(zi);return i.loading&&(e=e.concat(d.all(document,i.loading))),e.forEach(o=>{o.classList.add(`phx-${t}-loading`),o.setAttribute(me,r),o.setAttribute(Xe,this.el.id);let s=o.getAttribute(n);s!==null&&(o.getAttribute(si)||o.setAttribute(si,o.innerText),s!==""&&(o.innerText=s),o.setAttribute("disabled",""))}),[r,e,i]}componentID(e){let t=e.getAttribute&&e.getAttribute(de);return t?parseInt(t):null}targetComponentID(e,t,i={}){if(Be(t))return t;let r=e.getAttribute(this.binding("target"));return Be(r)?parseInt(r):t&&(r!==null||i.target)?this.closestComponentID(t):null}closestComponentID(e){return Be(e)?e:e?Fe(e.closest(`[${de}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,r,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",i,r]),!1;let[o,s,a]=this.putRef([e],"hook");return this.pushWithReply(()=>[o,s,a],"event",{type:"hook",event:i,value:r,cid:this.closestComponentID(t)},(l,h)=>n(h,o)),o}extractMeta(e,t,i){let r=this.binding("value-");for(let n=0;n<e.attributes.length;n++){t||(t={});let o=e.attributes[n].name;o.startsWith(r)&&(t[o.replace(r,"")]=e.getAttribute(o))}if(e.value!==void 0&&(t||(t={}),t.value=e.value,e.tagName==="INPUT"&&Kr.indexOf(e.type)>=0&&!e.checked&&delete t.value),i){t||(t={});for(let n in i)t[n]=i[n]}return t}pushEvent(e,t,i,r,n,o={},s){this.pushWithReply(()=>this.putRef([t],e,o),"event",{type:e,event:r,value:this.extractMeta(t,n,o.value),cid:this.targetComponentID(t,i,o)},(a,l)=>s&&s(l))}pushFileProgress(e,t,i,r=function(){}){this.liveSocket.withinOwners(e.form,(n,o)=>{n.pushWithReply(null,"progress",{event:e.getAttribute(n.binding(So)),ref:e.getAttribute(Je),entry_ref:t,progress:i,cid:n.targetComponentID(e.form,o)},r)})}pushInput(e,t,i,r,n,o){let s,a=Be(i)?i:this.targetComponentID(e.form,t),l=()=>this.putRef([e,e.form],"change",n),h,u=this.extractMeta(e.form);e.getAttribute(this.binding("change"))?h=fi(e.form,{_target:n._target,...u},[e.name]):h=fi(e.form,{_target:n._target,...u}),d.isUploadInput(e)&&e.files&&e.files.length>0&&oe.trackFiles(e,Array.from(e.files)),s=oe.serializeUploads(e);let v={type:"form",event:r,value:h,uploads:s,cid:a};this.pushWithReply(l,"event",v,p=>{if(d.showError(e,this.liveSocket.binding(vi)),d.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(oe.filesAwaitingPreflight(e).length>0){let[m,b]=l();this.uploadFiles(e.form,t,m,a,g=>{o&&o(p),this.triggerAwaitingSubmit(e.form)})}}else o&&o(p)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,r,n,o]=t;this.cancelSubmit(e),o()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i,r,n])=>t.isSameNode(e))}scheduleSubmit(e,t,i,r){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i,r])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,r])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}disableForm(e,t={}){let i=u=>!(Dt(u,`${this.binding(bi)}=ignore`,u.form)||Dt(u,"data-phx-update=ignore",u.form)),r=u=>u.hasAttribute(this.binding(zi)),n=u=>u.tagName=="BUTTON",o=u=>["INPUT","TEXTAREA","SELECT"].includes(u.tagName),s=Array.from(e.elements),a=s.filter(r),l=s.filter(n).filter(i),h=s.filter(o).filter(i);return l.forEach(u=>{u.setAttribute(oi,u.disabled),u.disabled=!0}),h.forEach(u=>{u.setAttribute(Hi,u.readOnly),u.readOnly=!0,u.files&&(u.setAttribute(oi,u.disabled),u.disabled=!0)}),e.setAttribute(this.binding(Cr),""),this.putRef([e].concat(a).concat(l).concat(h),"submit",t)}pushFormSubmit(e,t,i,r,n,o){let s=()=>this.disableForm(e,n),a=this.targetComponentID(e,t);if(oe.hasUploadsInProgress(e)){let[l,h]=s(),u=()=>this.pushFormSubmit(e,r,t,i,n,o);return this.scheduleSubmit(e,l,n,u)}else if(oe.inputsAwaitingPreflight(e).length>0){let[l,h]=s(),u=()=>[l,h,n];this.uploadFiles(e,t,l,a,v=>{let p=this.extractMeta(e),m=fi(e,{submitter:r,...p});this.pushWithReply(u,"event",{type:"form",event:i,value:m,cid:a},o)})}else if(!(e.hasAttribute(me)&&e.classList.contains("phx-submit-loading"))){let l=this.extractMeta(e),h=fi(e,{submitter:r,...l});this.pushWithReply(s,"event",{type:"form",event:i,value:h,cid:a},o)}}uploadFiles(e,t,i,r,n){let o=this.joinCount,s=oe.activeFileInputs(e),a=s.length;s.forEach(l=>{let h=new oe(l,this,()=>{a--,a===0&&n()});this.uploaders[l]=h;let u=h.entries().map(p=>p.toPreflightPayload()),v={ref:l.getAttribute(Je),entries:u,cid:this.targetComponentID(l.form,t)};this.log("upload",()=>["sending preflight request",v]),this.pushWithReply(null,"allow_upload",v,p=>{if(this.log("upload",()=>["got preflight response",p]),p.error){this.undoRefs(i);let[m,b]=p.error;this.log("upload",()=>[`error for entry ${m}`,b])}else{let m=b=>{this.channel.onError(()=>{this.joinCount===o&&b()})};h.initAdapterUpload(p,m,this.liveSocket)}})})}dispatchUploads(e,t){let i=d.findUploadInputs(this.el).filter(r=>r.name===e);i.length===0?se(`no live file inputs found matching the name "${e}"`):i.length>1?se(`duplicate live file inputs found matching the name "${e}"`):d.dispatchEvent(i[0],zr,{detail:{files:t}})}pushFormRecovery(e,t,i){this.liveSocket.withinOwners(e,(r,n)=>{let o=this.binding("change"),s=Array.from(e.elements).filter(h=>d.isFormInput(h)&&h.name&&!h.hasAttribute(o));if(s.length===0)return;let a=s.find(h=>h.type!=="hidden")||a[0],l=e.getAttribute(this.binding(Or))||e.getAttribute(this.binding("change"));Ee.exec("change",l,r,a,["push",{_target:a.name,newCid:t,callback:i}])})}pushLinkPatch(e,t,i){let r=this.liveSocket.setPendingLink(e),n=t?()=>this.putRef([t],"click"):null,o=()=>this.liveSocket.redirect(window.location.href),s=this.pushWithReply(n,"live_patch",{url:e},a=>{this.liveSocket.requestDOMUpdate(()=>{a.link_redirect?this.liveSocket.replaceMain(e,null,i,r):(this.liveSocket.commitPendingLink(r)&&(this.href=e),this.applyPendingUpdates(),i&&i(r))})});s?s.receive("timeout",o):o()}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),i=document.createElement("template");return i.innerHTML=e,d.all(this.el,`form[${t}]`).filter(r=>r.id&&this.ownsElement(r)).filter(r=>r.elements.length>0).filter(r=>r.getAttribute(this.binding(Or))!=="ignore").map(r=>{let n=i.content.querySelector(`form[id="${r.id}"][${t}="${r.getAttribute(t)}"]`);return n?[r,n,this.targetComponentID(n)]:[r,r,this.targetComponentID(r)]}).filter(([r,n,o])=>n)}maybePushComponentsDestroyed(e){let t=e.filter(i=>d.findComponentNodeList(this.el,i).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(r=>t.indexOf(r)!==-1);let i=t.filter(r=>d.findComponentNodeList(this.el,r).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},r=>{this.rendered.pruneCIDs(r.cids)})}))}ownsElement(e){let t=e.closest(lt);return e.getAttribute(st)===this.id||t&&t.id===this.id||!t&&this.isDead}submitForm(e,t,i,r,n={}){d.putPrivate(e,gi,!0);let o=this.liveSocket.binding(vi),s=Array.from(e.elements);s.forEach(a=>d.putPrivate(a,gi,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,r,n,()=>{s.forEach(a=>d.showError(a,o)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}},tn=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||To,this.opts=i,this.params=Ui(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(mi(Po),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=mi(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||xo,this.reloadWithJitterTimer=null,this.maxReloads=i.maxReloads||uo,this.reloadJitterMin=i.reloadJitterMin||ho,this.reloadJitterMax=i.reloadJitterMax||fo,this.failsafeJitter=i.failsafeJitter||po,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:Ui(),onBeforeElUpdated:Ui()},i.dom||{}),this.transitions=new is,window.addEventListener("pagehide",r=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}isProfileEnabled(){return this.sessionStorage.getItem(Bi)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(ai)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(ai)==="false"}enableDebug(){this.sessionStorage.setItem(ai,"true")}enableProfiling(){this.sessionStorage.setItem(Bi,"true")}disableDebug(){this.sessionStorage.setItem(ai,"false")}disableProfiling(){this.sessionStorage.removeItem(Bi)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(Fi,e)}disableLatencySim(){this.sessionStorage.removeItem(Fi)}getLatencySim(){let e=this.sessionStorage.getItem(Fi);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug();let e=()=>{this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.bindTopLevelEvents({dead:!0}),this.joinDeadView()};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){clearTimeout(this.reloadWithJitterTimer),this.socket.disconnect(e)}replaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,t,i=null){this.owner(e,r=>Ee.exec(i,t,r,e))}execJSHookPush(e,t,i,r){this.withinOwners(e,n=>{Ee.exec("hook",t,n,e,["push",{data:i,callback:r}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[r,n]=i();this.viewLogger(e,t,r,n)}else if(this.isDebugEnabled()){let[r,n]=i();_o(e,t,r,n)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,t,i=function(){}){this.transitions.addTransition(e,t,i)}onChannel(e,t,i){e.on(t,r=>{let n=this.getLatencySim();n?setTimeout(()=>i(r),n):i(r)})}wrapPush(e,t,i){let r=this.getLatencySim(),n=e.joinCount;if(!r)return this.isConnected()&&t.timeout?i().receive("timeout",()=>{e.joinCount===n&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();let o={receives:[],receive(s,a){this.receives.push([s,a])}};return setTimeout(()=>{e.isDestroyed()||o.receives.reduce((s,[a,l])=>s.receive(a,l),i())},r),o}reloadWithJitter(e,t){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let i=this.reloadJitterMin,r=this.reloadJitterMax,n=Math.floor(Math.random()*(r-i+1))+i,o=Re.updateLocal(this.localStorage,window.location.pathname,Xr,0,s=>s+1);o>this.maxReloads&&(n=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{e.isDestroyed()||e.isConnected()||(e.destroy(),t?t():this.log(e,"join",()=>[`encountered ${o} consecutive reloads`]),o>this.maxReloads&&this.log(e,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]),this.hasPendingLink()?window.location=this.pendingLink:window.location.reload())},n)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?Bo[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinDeadView(){let e=document.body;if(e&&!this.isPhxView(e)&&!this.isPhxView(document.firstElementChild)){let t=this.newRootView(e);t.setHref(this.getHref()),t.joinDead(),this.main||(this.main=t),window.requestAnimationFrame(()=>t.execNewMounted())}}joinRootViews(){let e=!1;return d.all(document,`${lt}:not([${st}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.hasAttribute(Yi)&&(this.main=i)}e=!0}),e}redirect(e,t){this.unload(),Re.redirect(e,t)}replaceMain(e,t,i=null,r=this.setPendingLink(e)){let n=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let o=d.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,t,n),this.main.setRedirect(e),this.transitionRemoves(),this.main.join((s,a)=>{s===1&&this.commitPendingLink(r)&&this.requestDOMUpdate(()=>{d.findPhxSticky(document).forEach(l=>o.appendChild(l)),this.outgoingMainEl.replaceWith(o),this.outgoingMainEl=null,i&&requestAnimationFrame(i),a()})})}transitionRemoves(e){let t=this.binding("remove");e=e||d.all(document,`[${t}]`),e.forEach(i=>{this.execJS(i,i.getAttribute(t),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute($e)!==null}newRootView(e,t,i){let r=new en(e,this,null,t,i);return this.roots[r.id]=r,r}owner(e,t){let i=Fe(e.closest(lt),r=>this.getViewByEl(r))||this.main;i&&t(i)}withinOwners(e,t){this.owner(e,i=>t(i,e))}getViewByEl(e){let t=e.getAttribute(It);return Fe(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(It));t&&t.id===e.id?(t.destroy(),delete this.roots[t.id]):t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.socket.onClose(t=>{if(t&&t.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",t=>{t.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),e||this.bindNav(),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(t,i,r,n,o,s)=>{let a=n.getAttribute(this.binding(Ao)),l=t.key&&t.key.toLowerCase();if(a&&a.toLowerCase()!==l)return;let h={key:t.key,...this.eventMeta(i,t,n)};Ee.exec(i,o,r,n,["push",{data:h}])}),this.bind({blur:"focusout",focus:"focusin"},(t,i,r,n,o,s)=>{if(!s){let a={key:t.key,...this.eventMeta(i,t,n)};Ee.exec(i,o,r,n,["push",{data:a}])}}),this.bind({blur:"blur",focus:"focus"},(t,i,r,n,o,s,a)=>{if(a==="window"){let l=this.eventMeta(i,t,n);Ee.exec(i,s,r,n,["push",{data:l}])}}),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("drop",t=>{t.preventDefault();let i=Fe(Dt(t.target,this.binding(Sr)),o=>o.getAttribute(this.binding(Sr))),r=i&&document.getElementById(i),n=Array.from(t.dataTransfer.files||[]);!r||r.disabled||n.length===0||!(r.files instanceof FileList)||(oe.trackFiles(r,n,t.dataTransfer),r.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(zr,t=>{let i=t.target;if(!d.isUploadInput(i))return;let r=Array.from(t.detail.files||[]).filter(n=>n instanceof File||n instanceof Blob);oe.trackFiles(i,r),i.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let r=this.metadataCallbacks[e];return r?r(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let r=e[i];this.on(r,n=>{let o=this.binding(i),s=this.binding(`window-${i}`),a=n.target.getAttribute&&n.target.getAttribute(o);a?this.debounce(n.target,n,r,()=>{this.withinOwners(n.target,l=>{t(n,i,l,n.target,a,null)})}):d.all(document,`[${s}]`,l=>{let h=l.getAttribute(s);this.debounce(l,n,r,()=>{this.withinOwners(l,u=>{t(n,i,u,l,h,"window")})})})})}}bindClicks(){window.addEventListener("click",e=>this.clickStartedAtTarget=e.target),this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,i){let r=this.binding(t);window.addEventListener(e,n=>{let o=null;if(i)o=n.target.matches(`[${r}]`)?n.target:n.target.querySelector(`[${r}]`);else{let a=this.clickStartedAtTarget||n.target;o=Dt(a,r),this.dispatchClickAway(n,a),this.clickStartedAtTarget=null}let s=o&&o.getAttribute(r);if(!s){let a=n.target instanceof HTMLAnchorElement?n.target.getAttribute("href"):null;!i&&a!==null&&!d.wantsNewTab(n)&&d.isNewPageHref(a,window.location)&&this.unload();return}o.getAttribute("href")==="#"&&n.preventDefault(),!o.hasAttribute(me)&&this.debounce(o,n,"click",()=>{this.withinOwners(o,a=>{Ee.exec("click",s,a,o,["push",{data:this.eventMeta("click",n,o)}])})})},i)}dispatchClickAway(e,t){let i=this.binding("click-away");d.all(document,`[${i}]`,r=>{r.isSameNode(t)||r.contains(t)||this.withinOwners(e.target,n=>{let o=r.getAttribute(i);Ee.isVisible(r)&&Ee.exec("click",o,n,r,["push",{data:this.eventMeta("click",e,e.target)}])})})}bindNav(){if(!Re.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{Re.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:r,root:n,scroll:o}=t.state||{},s=window.location.href;this.requestDOMUpdate(()=>{this.main.isConnected()&&i==="patch"&&r===this.main.id?this.main.pushLinkPatch(s,null,()=>{this.maybeScroll(o)}):this.replaceMain(s,null,()=>{n&&this.replaceRootHistory(),this.maybeScroll(o)})})},!1),window.addEventListener("click",t=>{let i=Dt(t.target,Ii),r=i&&i.getAttribute(Ii);if(!r||!this.isConnected()||!this.main||d.wantsNewTab(t))return;let n=i.href,o=i.getAttribute(vo);t.preventDefault(),t.stopImmediatePropagation(),this.pendingLink!==n&&this.requestDOMUpdate(()=>{if(r==="patch")this.pushHistoryPatch(n,o,i);else if(r==="redirect")this.historyRedirect(n,o);else throw new Error(`expected ${Ii} to be "patch" or "redirect", got: ${r}`);let s=i.getAttribute(this.binding("click"));s&&this.requestDOMUpdate(()=>this.execJS(i,s,"click"))})},!1)}maybeScroll(e){typeof e=="number"&&requestAnimationFrame(()=>{window.scrollTo(0,e)})}dispatchEvent(e,t={}){d.dispatchEvent(window,`phx:${e}`,{detail:t})}dispatchEvents(e){e.forEach(([t,i])=>this.dispatchEvent(t,i))}withPageLoading(e,t){d.dispatchEvent(window,"phx:page-loading-start",{detail:e});let i=()=>d.dispatchEvent(window,"phx:page-loading-stop",{detail:e});return t?t(i):i}pushHistoryPatch(e,t,i){if(!this.isConnected())return Re.redirect(e);this.withPageLoading({to:e,kind:"patch"},r=>{this.main.pushLinkPatch(e,i,n=>{this.historyPatch(e,t,n),r()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(Re.pushState(t,{type:"patch",id:this.main.id},e),this.registerNewLocation(window.location))}historyRedirect(e,t,i){if(!this.isConnected())return Re.redirect(e,i);if(/^\/$|^\/[^\/]+.*$/.test(e)){let{protocol:n,host:o}=window.location;e=`${n}//${o}${e}`}let r=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},n=>{this.replaceMain(e,i,()=>{Re.pushState(t,{type:"redirect",id:this.main.id,scroll:r},e),this.registerNewLocation(window.location),n()})})}replaceRootHistory(){Re.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=mi(e),!0)}bindForms(){let e=0,t=!1;this.on("submit",i=>{let r=i.target.getAttribute(this.binding("submit")),n=i.target.getAttribute(this.binding("change"));!t&&n&&!r&&(t=!0,i.preventDefault(),this.withinOwners(i.target,o=>{o.disableForm(i.target),window.requestAnimationFrame(()=>{d.isUnloadableFormSubmit(i)&&this.unload(),i.target.submit()})}))},!0),this.on("submit",i=>{let r=i.target.getAttribute(this.binding("submit"));if(!r){d.isUnloadableFormSubmit(i)&&this.unload();return}i.preventDefault(),i.target.disabled=!0,this.withinOwners(i.target,n=>{Ee.exec("submit",r,n,i.target,["push",{submitter:i.submitter}])})},!1);for(let i of["change","input"])this.on(i,r=>{let n=this.binding("change"),o=r.target,s=o.getAttribute(n),a=o.form&&o.form.getAttribute(n),l=s||a;if(!l||o.type==="number"&&o.validity&&o.validity.badInput)return;let h=s?o:o.form,u=e;e++;let{at:v,type:p}=d.private(o,"prev-iteration")||{};v===u-1&&i!==p||(d.putPrivate(o,"prev-iteration",{at:u,type:i}),this.debounce(o,r,i,()=>{this.withinOwners(h,m=>{d.putPrivate(o,Ji,!0),d.isTextualInput(o)||this.setActiveElement(o),Ee.exec("change",l,m,o,["push",{_target:r.target.name,dispatcher:h}])})}))},!1);this.on("reset",i=>{let r=i.target;d.resetForm(r,this.binding(vi));let n=Array.from(r.elements).find(o=>o.type==="reset");window.requestAnimationFrame(()=>{n.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(e,t,i,r){if(i==="blur"||i==="focusout")return r();let n=this.binding(wo),o=this.binding(Eo),s=this.defaults.debounce.toString(),a=this.defaults.throttle.toString();this.withinOwners(e,l=>{let h=()=>!l.isDestroyed()&&document.body.contains(e);d.debounce(e,t,n,s,o,a,h,()=>{r()})})}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}},is=class{constructor(){this.transitions=new Set,this.pendingOps=[]}reset(){this.transitions.forEach(e=>{clearTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,t,i){t();let r=setTimeout(()=>{this.transitions.delete(r),i(),this.flushPendingOps()},e);this.transitions.add(r)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){if(this.size()>0)return;let e=this.pendingOps.shift();e&&(e(),this.flushPendingOps())}};var V="top",z="bottom",X="right",W="left",yi="auto",Ue=[V,z,X,W],Ie="start",ze="end",rn="clippingParents",wi="viewport",ct="popper",nn="reference",Qi=Ue.reduce(function(e,t){return e.concat([t+"-"+Ie,t+"-"+ze])},[]),Ei=[].concat(Ue,[yi]).reduce(function(e,t){return e.concat([t,t+"-"+Ie,t+"-"+ze])},[]),rs="beforeRead",ns="read",os="afterRead",ss="beforeMain",as="main",ls="afterMain",cs="beforeWrite",us="write",hs="afterWrite",on=[rs,ns,os,ss,as,ls,cs,us,hs];function Q(e){return e?(e.nodeName||"").toLowerCase():null}function $(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ve(e){var t=$(e).Element;return e instanceof t||e instanceof Element}function G(e){var t=$(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ut(e){if(typeof ShadowRoot>"u")return!1;var t=$(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ds(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},n=t.attributes[i]||{},o=t.elements[i];!G(o)||!Q(o)||(Object.assign(o.style,r),Object.keys(n).forEach(function(s){var a=n[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function fs(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var n=t.elements[r],o=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),a=s.reduce(function(l,h){return l[h]="",l},{});!G(n)||!Q(n)||(Object.assign(n.style,a),Object.keys(o).forEach(function(l){n.removeAttribute(l)}))})}}var Nt={name:"applyStyles",enabled:!0,phase:"write",fn:ds,effect:fs,requires:["computeStyles"]};function Z(e){return e.split("-")[0]}var Ae=Math.max,Ge=Math.min,Ne=Math.round;function ht(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Mt(){return!/^((?!chrome|android).)*safari/i.test(ht())}function ge(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=e.getBoundingClientRect(),n=1,o=1;t&&G(e)&&(n=e.offsetWidth>0&&Ne(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Ne(r.height)/e.offsetHeight||1);var s=ve(e)?$(e):window,a=s.visualViewport,l=!Mt()&&i,h=(r.left+(l&&a?a.offsetLeft:0))/n,u=(r.top+(l&&a?a.offsetTop:0))/o,v=r.width/n,p=r.height/o;return{width:v,height:p,top:u,right:h+v,bottom:u+p,left:h,x:h,y:u}}function Ye(e){var t=ge(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function Ht(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&ut(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function le(e){return $(e).getComputedStyle(e)}function Zi(e){return["table","td","th"].indexOf(Q(e))>=0}function te(e){return((ve(e)?e.ownerDocument:e.document)||window.document).documentElement}function Me(e){return Q(e)==="html"?e:e.assignedSlot||e.parentNode||(ut(e)?e.host:null)||te(e)}function sn(e){return!G(e)||le(e).position==="fixed"?null:e.offsetParent}function ps(e){var t=/firefox/i.test(ht()),i=/Trident/i.test(ht());if(i&&G(e)){var r=le(e);if(r.position==="fixed")return null}var n=Me(e);for(ut(n)&&(n=n.host);G(n)&&["html","body"].indexOf(Q(n))<0;){var o=le(n);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return n;n=n.parentNode}return null}function Se(e){for(var t=$(e),i=sn(e);i&&Zi(i)&&le(i).position==="static";)i=sn(i);return i&&(Q(i)==="html"||Q(i)==="body"&&le(i).position==="static")?t:i||ps(e)||t}function Ke(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qe(e,t,i){return Ae(e,Ge(t,i))}function an(e,t,i){var r=Qe(e,t,i);return r>i?i:r}function jt(){return{top:0,right:0,bottom:0,left:0}}function Bt(e){return Object.assign({},jt(),e)}function Ft(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var ms=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,Bt(typeof t!="number"?t:Ft(t,Ue))};function vs(e){var t,i=e.state,r=e.name,n=e.options,o=i.elements.arrow,s=i.modifiersData.popperOffsets,a=Z(i.placement),l=Ke(a),h=[W,X].indexOf(a)>=0,u=h?"height":"width";if(!(!o||!s)){var v=ms(n.padding,i),p=Ye(o),m=l==="y"?V:W,b=l==="y"?z:X,g=i.rects.reference[u]+i.rects.reference[l]-s[l]-i.rects.popper[u],E=s[l]-i.rects.reference[l],C=Se(o),P=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,D=g/2-E/2,c=v[m],w=P-p[u]-v[b],y=P/2-p[u]/2+D,O=Qe(c,y,w),_=l;i.modifiersData[r]=(t={},t[_]=O,t.centerOffset=O-y,t)}}function gs(e){var t=e.state,i=e.options,r=i.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!Ht(t.elements.popper,n)||(t.elements.arrow=n))}var ln={name:"arrow",enabled:!0,phase:"main",fn:vs,effect:gs,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function be(e){return e.split("-")[1]}var bs={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ys(e){var t=e.x,i=e.y,r=window,n=r.devicePixelRatio||1;return{x:Ne(t*n)/n||0,y:Ne(i*n)/n||0}}function cn(e){var t,i=e.popper,r=e.popperRect,n=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,h=e.adaptive,u=e.roundOffsets,v=e.isFixed,p=s.x,m=p===void 0?0:p,b=s.y,g=b===void 0?0:b,E=typeof u=="function"?u({x:m,y:g}):{x:m,y:g};m=E.x,g=E.y;var C=s.hasOwnProperty("x"),P=s.hasOwnProperty("y"),D=W,c=V,w=window;if(h){var y=Se(i),O="clientHeight",_="clientWidth";if(y===$(i)&&(y=te(i),le(y).position!=="static"&&a==="absolute"&&(O="scrollHeight",_="scrollWidth")),y=y,n===V||(n===W||n===X)&&o===ze){c=z;var L=v&&y===w&&w.visualViewport?w.visualViewport.height:y[O];g-=L-r.height,g*=l?1:-1}if(n===W||(n===V||n===z)&&o===ze){D=X;var I=v&&y===w&&w.visualViewport?w.visualViewport.width:y[_];m-=I-r.width,m*=l?1:-1}}var T=Object.assign({position:a},h&&bs),N=u===!0?ys({x:m,y:g}):{x:m,y:g};if(m=N.x,g=N.y,l){var F;return Object.assign({},T,(F={},F[c]=P?"0":"",F[D]=C?"0":"",F.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",F))}return Object.assign({},T,(t={},t[c]=P?g+"px":"",t[D]=C?m+"px":"",t.transform="",t))}function ws(e){var t=e.state,i=e.options,r=i.gpuAcceleration,n=r===void 0?!0:r,o=i.adaptive,s=o===void 0?!0:o,a=i.roundOffsets,l=a===void 0?!0:a;if(!1)var h;var u={placement:Z(t.placement),variation:be(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,cn(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,cn(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var un={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ws,data:{}};var Ai={passive:!0};function Es(e){var t=e.state,i=e.instance,r=e.options,n=r.scroll,o=n===void 0?!0:n,s=r.resize,a=s===void 0?!0:s,l=$(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach(function(u){u.addEventListener("scroll",i.update,Ai)}),a&&l.addEventListener("resize",i.update,Ai),function(){o&&h.forEach(function(u){u.removeEventListener("scroll",i.update,Ai)}),a&&l.removeEventListener("resize",i.update,Ai)}}var hn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Es,data:{}};var As={left:"right",right:"left",bottom:"top",top:"bottom"};function dt(e){return e.replace(/left|right|bottom|top/g,function(t){return As[t]})}var Ss={start:"end",end:"start"};function Si(e){return e.replace(/start|end/g,function(t){return Ss[t]})}function Ze(e){var t=$(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function et(e){return ge(te(e)).left+Ze(e).scrollLeft}function er(e,t){var i=$(e),r=te(e),n=i.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(n){o=n.width,s=n.height;var h=Mt();(h||!h&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:o,height:s,x:a+et(e),y:l}}function tr(e){var t,i=te(e),r=Ze(e),n=(t=e.ownerDocument)==null?void 0:t.body,o=Ae(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),s=Ae(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+et(e),l=-r.scrollTop;return le(n||i).direction==="rtl"&&(a+=Ae(i.clientWidth,n?n.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function tt(e){var t=le(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function xi(e){return["html","body","#document"].indexOf(Q(e))>=0?e.ownerDocument.body:G(e)&&tt(e)?e:xi(Me(e))}function Ve(e,t){var i;t===void 0&&(t=[]);var r=xi(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),o=$(r),s=n?[o].concat(o.visualViewport||[],tt(r)?r:[]):r,a=t.concat(s);return n?a:a.concat(Ve(Me(s)))}function ft(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function xs(e,t){var i=ge(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function dn(e,t,i){return t===wi?ft(er(e,i)):ve(t)?xs(t,i):ft(tr(te(e)))}function Cs(e){var t=Ve(Me(e)),i=["absolute","fixed"].indexOf(le(e).position)>=0,r=i&&G(e)?Se(e):e;return ve(r)?t.filter(function(n){return ve(n)&&Ht(n,r)&&Q(n)!=="body"}):[]}function ir(e,t,i,r){var n=t==="clippingParents"?Cs(e):[].concat(t),o=[].concat(n,[i]),s=o[0],a=o.reduce(function(l,h){var u=dn(e,h,r);return l.top=Ae(u.top,l.top),l.right=Ge(u.right,l.right),l.bottom=Ge(u.bottom,l.bottom),l.left=Ae(u.left,l.left),l},dn(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function $t(e){var t=e.reference,i=e.element,r=e.placement,n=r?Z(r):null,o=r?be(r):null,s=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(n){case V:l={x:s,y:t.y-i.height};break;case z:l={x:s,y:t.y+t.height};break;case X:l={x:t.x+t.width,y:a};break;case W:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var h=n?Ke(n):null;if(h!=null){var u=h==="y"?"height":"width";switch(o){case Ie:l[h]=l[h]-(t[u]/2-i[u]/2);break;case ze:l[h]=l[h]+(t[u]/2-i[u]/2);break;default:}}return l}function xe(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=r===void 0?e.placement:r,o=i.strategy,s=o===void 0?e.strategy:o,a=i.boundary,l=a===void 0?rn:a,h=i.rootBoundary,u=h===void 0?wi:h,v=i.elementContext,p=v===void 0?ct:v,m=i.altBoundary,b=m===void 0?!1:m,g=i.padding,E=g===void 0?0:g,C=Bt(typeof E!="number"?E:Ft(E,Ue)),P=p===ct?nn:ct,D=e.rects.popper,c=e.elements[b?P:p],w=ir(ve(c)?c:c.contextElement||te(e.elements.popper),l,u,s),y=ge(e.elements.reference),O=$t({reference:y,element:D,strategy:"absolute",placement:n}),_=ft(Object.assign({},D,O)),L=p===ct?_:y,I={top:w.top-L.top+C.top,bottom:L.bottom-w.bottom+C.bottom,left:w.left-L.left+C.left,right:L.right-w.right+C.right},T=e.modifiersData.offset;if(p===ct&&T){var N=T[n];Object.keys(I).forEach(function(F){var J=[X,z].indexOf(F)>=0?1:-1,q=[V,z].indexOf(F)>=0?"y":"x";I[F]+=N[q]*J})}return I}function rr(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=i.boundary,o=i.rootBoundary,s=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,h=l===void 0?Ei:l,u=be(r),v=u?a?Qi:Qi.filter(function(b){return be(b)===u}):Ue,p=v.filter(function(b){return h.indexOf(b)>=0});p.length===0&&(p=v);var m=p.reduce(function(b,g){return b[g]=xe(e,{placement:g,boundary:n,rootBoundary:o,padding:s})[Z(g)],b},{});return Object.keys(m).sort(function(b,g){return m[b]-m[g]})}function Ts(e){if(Z(e)===yi)return[];var t=dt(e);return[Si(e),t,Si(t)]}function ks(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var n=i.mainAxis,o=n===void 0?!0:n,s=i.altAxis,a=s===void 0?!0:s,l=i.fallbackPlacements,h=i.padding,u=i.boundary,v=i.rootBoundary,p=i.altBoundary,m=i.flipVariations,b=m===void 0?!0:m,g=i.allowedAutoPlacements,E=t.options.placement,C=Z(E),P=C===E,D=l||(P||!b?[dt(E)]:Ts(E)),c=[E].concat(D).reduce(function(re,ne){return re.concat(Z(ne)===yi?rr(t,{placement:ne,boundary:u,rootBoundary:v,padding:h,flipVariations:b,allowedAutoPlacements:g}):ne)},[]),w=t.rects.reference,y=t.rects.popper,O=new Map,_=!0,L=c[0],I=0;I<c.length;I++){var T=c[I],N=Z(T),F=be(T)===Ie,J=[V,z].indexOf(N)>=0,q=J?"width":"height",U=xe(t,{placement:T,boundary:u,rootBoundary:v,altBoundary:p,padding:h}),S=J?F?X:W:F?z:V;w[q]>y[q]&&(S=dt(S));var x=dt(S),M=[];if(o&&M.push(U[N]<=0),a&&M.push(U[S]<=0,U[x]<=0),M.every(function(re){return re})){L=T,_=!1;break}O.set(T,M)}if(_)for(var R=b?3:1,j=function(ne){var Y=c.find(function(ye){var K=O.get(ye);if(K)return K.slice(0,ne).every(function(Te){return Te})});if(Y)return L=Y,"break"},ee=R;ee>0;ee--){var ie=j(ee);if(ie==="break")break}t.placement!==L&&(t.modifiersData[r]._skip=!0,t.placement=L,t.reset=!0)}}var fn={name:"flip",enabled:!0,phase:"main",fn:ks,requiresIfExists:["offset"],data:{_skip:!1}};function pn(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function mn(e){return[V,X,z,W].some(function(t){return e[t]>=0})}function Ps(e){var t=e.state,i=e.name,r=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,s=xe(t,{elementContext:"reference"}),a=xe(t,{altBoundary:!0}),l=pn(s,r),h=pn(a,n,o),u=mn(l),v=mn(h);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:u,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":v})}var vn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ps};function Os(e,t,i){var r=Z(e),n=[W,V].indexOf(r)>=0?-1:1,o=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,s=o[0],a=o[1];return s=s||0,a=(a||0)*n,[W,X].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function Rs(e){var t=e.state,i=e.options,r=e.name,n=i.offset,o=n===void 0?[0,0]:n,s=Ei.reduce(function(u,v){return u[v]=Os(v,t.rects,o),u},{}),a=s[t.placement],l=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[r]=s}var gn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rs};function Ls(e){var t=e.state,i=e.name;t.modifiersData[i]=$t({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var bn={name:"popperOffsets",enabled:!0,phase:"read",fn:Ls,data:{}};function nr(e){return e==="x"?"y":"x"}function _s(e){var t=e.state,i=e.options,r=e.name,n=i.mainAxis,o=n===void 0?!0:n,s=i.altAxis,a=s===void 0?!1:s,l=i.boundary,h=i.rootBoundary,u=i.altBoundary,v=i.padding,p=i.tether,m=p===void 0?!0:p,b=i.tetherOffset,g=b===void 0?0:b,E=xe(t,{boundary:l,rootBoundary:h,padding:v,altBoundary:u}),C=Z(t.placement),P=be(t.placement),D=!P,c=Ke(C),w=nr(c),y=t.modifiersData.popperOffsets,O=t.rects.reference,_=t.rects.popper,L=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,I=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(!!y){if(o){var F,J=c==="y"?V:W,q=c==="y"?z:X,U=c==="y"?"height":"width",S=y[c],x=S+E[J],M=S-E[q],R=m?-_[U]/2:0,j=P===Ie?O[U]:_[U],ee=P===Ie?-_[U]:-O[U],ie=t.elements.arrow,re=m&&ie?Ye(ie):{width:0,height:0},ne=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:jt(),Y=ne[J],ye=ne[q],K=Qe(0,O[U],re[U]),Te=D?O[U]/2-R-K-Y-I.mainAxis:j-K-Y-I.mainAxis,we=D?-O[U]/2+R+K+ye+I.mainAxis:ee+K+ye+I.mainAxis,rt=t.elements.arrow&&Se(t.elements.arrow),Wt=rt?c==="y"?rt.clientTop||0:rt.clientLeft||0:0,vt=(F=T?.[c])!=null?F:0,qt=S+Te-vt-Wt,Xt=S+we-vt,gt=Qe(m?Ge(x,qt):x,S,m?Ae(M,Xt):M);y[c]=gt,N[c]=gt-S}if(a){var bt,Jt=c==="x"?V:W,zt=c==="x"?z:X,_e=y[w],He=w==="y"?"height":"width",yt=_e+E[Jt],We=_e-E[zt],wt=[V,W].indexOf(C)!==-1,Gt=(bt=T?.[w])!=null?bt:0,Yt=wt?yt:_e-O[He]-_[He]-Gt+I.altAxis,Kt=wt?_e+O[He]+_[He]-Gt-I.altAxis:We,Qt=m&&wt?an(Yt,_e,Kt):Qe(m?Yt:yt,_e,m?Kt:We);y[w]=Qt,N[w]=Qt-_e}t.modifiersData[r]=N}}var yn={name:"preventOverflow",enabled:!0,phase:"main",fn:_s,requiresIfExists:["offset"]};function or(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function sr(e){return e===$(e)||!G(e)?Ze(e):or(e)}function Ds(e){var t=e.getBoundingClientRect(),i=Ne(t.width)/e.offsetWidth||1,r=Ne(t.height)/e.offsetHeight||1;return i!==1||r!==1}function ar(e,t,i){i===void 0&&(i=!1);var r=G(t),n=G(t)&&Ds(t),o=te(t),s=ge(e,n,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Q(t)!=="body"||tt(o))&&(a=sr(t)),G(t)?(l=ge(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=et(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Is(e){var t=new Map,i=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function n(o){i.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&n(l)}}),r.push(o)}return e.forEach(function(o){i.has(o.name)||n(o)}),r}function lr(e){var t=Is(e);return on.reduce(function(i,r){return i.concat(t.filter(function(n){return n.phase===r}))},[])}function cr(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function ur(e){var t=e.reduce(function(i,r){var n=i[r.name];return i[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var wn={placement:"bottom",modifiers:[],strategy:"absolute"};function En(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function An(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,n=t.defaultOptions,o=n===void 0?wn:n;return function(a,l,h){h===void 0&&(h=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},wn,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},v=[],p=!1,m={state:u,setOptions:function(C){var P=typeof C=="function"?C(u.options):C;g(),u.options=Object.assign({},o,u.options,P),u.scrollParents={reference:ve(a)?Ve(a):a.contextElement?Ve(a.contextElement):[],popper:Ve(l)};var D=lr(ur([].concat(r,u.options.modifiers)));if(u.orderedModifiers=D.filter(function(T){return T.enabled}),!1){var c;if(getBasePlacement(u.options.placement)===auto)var w;var y,O,_,L,I}return b(),m.update()},forceUpdate:function(){if(!p){var C=u.elements,P=C.reference,D=C.popper;if(!!En(P,D)){u.rects={reference:ar(P,Se(D),u.options.strategy==="fixed"),popper:Ye(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(T){return u.modifiersData[T.name]=Object.assign({},T.data)});for(var c=0,w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var y=u.orderedModifiers[w],O=y.fn,_=y.options,L=_===void 0?{}:_,I=y.name;typeof O=="function"&&(u=O({state:u,options:L,name:I,instance:m})||u)}}}},update:cr(function(){return new Promise(function(E){m.forceUpdate(),E(u)})}),destroy:function(){g(),p=!0}};if(!En(a,l))return m;m.setOptions(h).then(function(E){!p&&h.onFirstUpdate&&h.onFirstUpdate(E)});function b(){u.orderedModifiers.forEach(function(E){var C=E.name,P=E.options,D=P===void 0?{}:P,c=E.effect;if(typeof c=="function"){var w=c({state:u,name:C,instance:m,options:D}),y=function(){};v.push(w||y)}})}function g(){v.forEach(function(E){return E()}),v=[]}return m}}var Ns=[hn,bn,un,Nt,gn,fn,yn,ln,vn],hr=An({defaultModifiers:Ns});var _n='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',Ms="tippy-box",Dn="tippy-content",Hs="tippy-backdrop",In="tippy-arrow",Nn="tippy-svg-arrow",it={passive:!0,capture:!0},Mn=function(){return document.body};function dr(e,t,i){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(i)?i[t]:i)}return e}function br(e,t){var i={}.toString.call(e);return i.indexOf("[object")===0&&i.indexOf(t+"]")>-1}function Hn(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Sn(e,t){if(t===0)return e;var i;return function(r){clearTimeout(i),i=setTimeout(function(){e(r)},t)}}function js(e){return e.split(/\s+/).filter(Boolean)}function pt(e){return[].concat(e)}function xn(e,t){e.indexOf(t)===-1&&e.push(t)}function Bs(e){return e.filter(function(t,i){return e.indexOf(t)===i})}function Fs(e){return e.split("-")[0]}function Ti(e){return[].slice.call(e)}function Cn(e){return Object.keys(e).reduce(function(t,i){return e[i]!==void 0&&(t[i]=e[i]),t},{})}function Ut(){return document.createElement("div")}function ki(e){return["Element","Fragment"].some(function(t){return br(e,t)})}function $s(e){return br(e,"NodeList")}function Us(e){return br(e,"MouseEvent")}function Vs(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Ws(e){return ki(e)?[e]:$s(e)?Ti(e):Array.isArray(e)?e:Ti(document.querySelectorAll(e))}function fr(e,t){e.forEach(function(i){i&&(i.style.transitionDuration=t+"ms")})}function Tn(e,t){e.forEach(function(i){i&&i.setAttribute("data-state",t)})}function qs(e){var t,i=pt(e),r=i[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function Xs(e,t){var i=t.clientX,r=t.clientY;return e.every(function(n){var o=n.popperRect,s=n.popperState,a=n.props,l=a.interactiveBorder,h=Fs(s.placement),u=s.modifiersData.offset;if(!u)return!0;var v=h==="bottom"?u.top.y:0,p=h==="top"?u.bottom.y:0,m=h==="right"?u.left.x:0,b=h==="left"?u.right.x:0,g=o.top-r+v>l,E=r-o.bottom-p>l,C=o.left-i+m>l,P=i-o.right-b>l;return g||E||C||P})}function pr(e,t,i){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(n){e[r](n,i)})}function kn(e,t){for(var i=t;i;){var r;if(e.contains(i))return!0;i=i.getRootNode==null||(r=i.getRootNode())==null?void 0:r.host}return!1}var Le={isTouch:!1},Pn=0;function Js(){Le.isTouch||(Le.isTouch=!0,window.performance&&document.addEventListener("mousemove",jn))}function jn(){var e=performance.now();e-Pn<20&&(Le.isTouch=!1,document.removeEventListener("mousemove",jn)),Pn=e}function zs(){var e=document.activeElement;if(Vs(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Gs(){document.addEventListener("touchstart",Js,it),window.addEventListener("blur",zs)}var Ys=typeof window<"u"&&typeof document<"u",Ks=Ys?!!window.msCrypto:!1;var Qs={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Zs={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ce=Object.assign({appendTo:Mn,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Qs,Zs),ea=Object.keys(Ce),ta=function(t){var i=Object.keys(t);i.forEach(function(r){Ce[r]=t[r]})};function Bn(e){var t=e.plugins||[],i=t.reduce(function(r,n){var o=n.name,s=n.defaultValue;if(o){var a;r[o]=e[o]!==void 0?e[o]:(a=Ce[o])!=null?a:s}return r},{});return Object.assign({},e,i)}function ia(e,t){var i=t?Object.keys(Bn(Object.assign({},Ce,{plugins:t}))):ea,r=i.reduce(function(n,o){var s=(e.getAttribute("data-tippy-"+o)||"").trim();if(!s)return n;if(o==="content")n[o]=s;else try{n[o]=JSON.parse(s)}catch{n[o]=s}return n},{});return r}function On(e,t){var i=Object.assign({},t,{content:Hn(t.content,[e])},t.ignoreAttributes?{}:ia(e,t.plugins));return i.aria=Object.assign({},Ce.aria,i.aria),i.aria={expanded:i.aria.expanded==="auto"?t.interactive:i.aria.expanded,content:i.aria.content==="auto"?t.interactive?null:"describedby":i.aria.content},i}var ra=function(){return"innerHTML"};function vr(e,t){e[ra()]=t}function Rn(e){var t=Ut();return e===!0?t.className=In:(t.className=Nn,ki(e)?t.appendChild(e):vr(t,e)),t}function Ln(e,t){ki(t.content)?(vr(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?vr(e,t.content):e.textContent=t.content)}function gr(e){var t=e.firstElementChild,i=Ti(t.children);return{box:t,content:i.find(function(r){return r.classList.contains(Dn)}),arrow:i.find(function(r){return r.classList.contains(In)||r.classList.contains(Nn)}),backdrop:i.find(function(r){return r.classList.contains(Hs)})}}function Fn(e){var t=Ut(),i=Ut();i.className=Ms,i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var r=Ut();r.className=Dn,r.setAttribute("data-state","hidden"),Ln(r,e.props),t.appendChild(i),i.appendChild(r),n(e.props,e.props);function n(o,s){var a=gr(t),l=a.box,h=a.content,u=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&Ln(h,e.props),s.arrow?u?o.arrow!==s.arrow&&(l.removeChild(u),l.appendChild(Rn(s.arrow))):l.appendChild(Rn(s.arrow)):u&&l.removeChild(u)}return{popper:t,onUpdate:n}}Fn.$$tippy=!0;var na=1,Ci=[],mr=[];function oa(e,t){var i=On(e,Object.assign({},Ce,Bn(Cn(t)))),r,n,o,s=!1,a=!1,l=!1,h=!1,u,v,p,m=[],b=Sn(qt,i.interactiveDebounce),g,E=na++,C=null,P=Bs(i.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},c={id:E,reference:e,popper:Ut(),popperInstance:C,props:i,state:D,plugins:P,clearDelayTimeouts:Yt,setProps:Kt,setContent:Qt,show:Wn,hide:qn,hideWithInteractivity:Xn,enable:wt,disable:Gt,unmount:Jn,destroy:zn};if(!i.render)return c;var w=i.render(c),y=w.popper,O=w.onUpdate;y.setAttribute("data-tippy-root",""),y.id="tippy-"+c.id,c.popper=y,e._tippy=c,y._tippy=c;var _=P.map(function(f){return f.fn(c)}),L=e.hasAttribute("aria-expanded");return rt(),R(),S(),x("onCreate",[c]),i.showOnCreate&&yt(),y.addEventListener("mouseenter",function(){c.props.interactive&&c.state.isVisible&&c.clearDelayTimeouts()}),y.addEventListener("mouseleave",function(){c.props.interactive&&c.props.trigger.indexOf("mouseenter")>=0&&J().addEventListener("mousemove",b)}),c;function I(){var f=c.props.touch;return Array.isArray(f)?f:[f,0]}function T(){return I()[0]==="hold"}function N(){var f;return!!((f=c.props.render)!=null&&f.$$tippy)}function F(){return g||e}function J(){var f=F().parentNode;return f?qs(f):document}function q(){return gr(y)}function U(f){return c.state.isMounted&&!c.state.isVisible||Le.isTouch||u&&u.type==="focus"?0:dr(c.props.delay,f?0:1,Ce.delay)}function S(f){f===void 0&&(f=!1),y.style.pointerEvents=c.props.interactive&&!f?"":"none",y.style.zIndex=""+c.props.zIndex}function x(f,A,k){if(k===void 0&&(k=!0),_.forEach(function(H){H[f]&&H[f].apply(H,A)}),k){var B;(B=c.props)[f].apply(B,A)}}function M(){var f=c.props.aria;if(!!f.content){var A="aria-"+f.content,k=y.id,B=pt(c.props.triggerTarget||e);B.forEach(function(H){var ae=H.getAttribute(A);if(c.state.isVisible)H.setAttribute(A,ae?ae+" "+k:k);else{var fe=ae&&ae.replace(k,"").trim();fe?H.setAttribute(A,fe):H.removeAttribute(A)}})}}function R(){if(!(L||!c.props.aria.expanded)){var f=pt(c.props.triggerTarget||e);f.forEach(function(A){c.props.interactive?A.setAttribute("aria-expanded",c.state.isVisible&&A===F()?"true":"false"):A.removeAttribute("aria-expanded")})}}function j(){J().removeEventListener("mousemove",b),Ci=Ci.filter(function(f){return f!==b})}function ee(f){if(!(Le.isTouch&&(l||f.type==="mousedown"))){var A=f.composedPath&&f.composedPath()[0]||f.target;if(!(c.props.interactive&&kn(y,A))){if(pt(c.props.triggerTarget||e).some(function(k){return kn(k,A)})){if(Le.isTouch||c.state.isVisible&&c.props.trigger.indexOf("click")>=0)return}else x("onClickOutside",[c,f]);c.props.hideOnClick===!0&&(c.clearDelayTimeouts(),c.hide(),a=!0,setTimeout(function(){a=!1}),c.state.isMounted||Y())}}}function ie(){l=!0}function re(){l=!1}function ne(){var f=J();f.addEventListener("mousedown",ee,!0),f.addEventListener("touchend",ee,it),f.addEventListener("touchstart",re,it),f.addEventListener("touchmove",ie,it)}function Y(){var f=J();f.removeEventListener("mousedown",ee,!0),f.removeEventListener("touchend",ee,it),f.removeEventListener("touchstart",re,it),f.removeEventListener("touchmove",ie,it)}function ye(f,A){Te(f,function(){!c.state.isVisible&&y.parentNode&&y.parentNode.contains(y)&&A()})}function K(f,A){Te(f,A)}function Te(f,A){var k=q().box;function B(H){H.target===k&&(pr(k,"remove",B),A())}if(f===0)return A();pr(k,"remove",v),pr(k,"add",B),v=B}function we(f,A,k){k===void 0&&(k=!1);var B=pt(c.props.triggerTarget||e);B.forEach(function(H){H.addEventListener(f,A,k),m.push({node:H,eventType:f,handler:A,options:k})})}function rt(){T()&&(we("touchstart",vt,{passive:!0}),we("touchend",Xt,{passive:!0})),js(c.props.trigger).forEach(function(f){if(f!=="manual")switch(we(f,vt),f){case"mouseenter":we("mouseleave",Xt);break;case"focus":we(Ks?"focusout":"blur",gt);break;case"focusin":we("focusout",gt);break}})}function Wt(){m.forEach(function(f){var A=f.node,k=f.eventType,B=f.handler,H=f.options;A.removeEventListener(k,B,H)}),m=[]}function vt(f){var A,k=!1;if(!(!c.state.isEnabled||bt(f)||a)){var B=((A=u)==null?void 0:A.type)==="focus";u=f,g=f.currentTarget,R(),!c.state.isVisible&&Us(f)&&Ci.forEach(function(H){return H(f)}),f.type==="click"&&(c.props.trigger.indexOf("mouseenter")<0||s)&&c.props.hideOnClick!==!1&&c.state.isVisible?k=!0:yt(f),f.type==="click"&&(s=!k),k&&!B&&We(f)}}function qt(f){var A=f.target,k=F().contains(A)||y.contains(A);if(!(f.type==="mousemove"&&k)){var B=He().concat(y).map(function(H){var ae,fe=H._tippy,nt=(ae=fe.popperInstance)==null?void 0:ae.state;return nt?{popperRect:H.getBoundingClientRect(),popperState:nt,props:i}:null}).filter(Boolean);Xs(B,f)&&(j(),We(f))}}function Xt(f){var A=bt(f)||c.props.trigger.indexOf("click")>=0&&s;if(!A){if(c.props.interactive){c.hideWithInteractivity(f);return}We(f)}}function gt(f){c.props.trigger.indexOf("focusin")<0&&f.target!==F()||c.props.interactive&&f.relatedTarget&&y.contains(f.relatedTarget)||We(f)}function bt(f){return Le.isTouch?T()!==f.type.indexOf("touch")>=0:!1}function Jt(){zt();var f=c.props,A=f.popperOptions,k=f.placement,B=f.offset,H=f.getReferenceClientRect,ae=f.moveTransition,fe=N()?gr(y).arrow:null,nt=H?{getBoundingClientRect:H,contextElement:H.contextElement||F()}:e,yr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Zt){var ot=Zt.state;if(N()){var Gn=q(),_i=Gn.box;["placement","reference-hidden","escaped"].forEach(function(ei){ei==="placement"?_i.setAttribute("data-placement",ot.placement):ot.attributes.popper["data-popper-"+ei]?_i.setAttribute("data-"+ei,""):_i.removeAttribute("data-"+ei)}),ot.attributes.popper={}}}},qe=[{name:"offset",options:{offset:B}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ae}},yr];N()&&fe&&qe.push({name:"arrow",options:{element:fe,padding:3}}),qe.push.apply(qe,A?.modifiers||[]),c.popperInstance=hr(nt,y,Object.assign({},A,{placement:k,onFirstUpdate:p,modifiers:qe}))}function zt(){c.popperInstance&&(c.popperInstance.destroy(),c.popperInstance=null)}function _e(){var f=c.props.appendTo,A,k=F();c.props.interactive&&f===Mn||f==="parent"?A=k.parentNode:A=Hn(f,[k]),A.contains(y)||A.appendChild(y),c.state.isMounted=!0,Jt()}function He(){return Ti(y.querySelectorAll("[data-tippy-root]"))}function yt(f){c.clearDelayTimeouts(),f&&x("onTrigger",[c,f]),ne();var A=U(!0),k=I(),B=k[0],H=k[1];Le.isTouch&&B==="hold"&&H&&(A=H),A?r=setTimeout(function(){c.show()},A):c.show()}function We(f){if(c.clearDelayTimeouts(),x("onUntrigger",[c,f]),!c.state.isVisible){Y();return}if(!(c.props.trigger.indexOf("mouseenter")>=0&&c.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(f.type)>=0&&s)){var A=U(!1);A?n=setTimeout(function(){c.state.isVisible&&c.hide()},A):o=requestAnimationFrame(function(){c.hide()})}}function wt(){c.state.isEnabled=!0}function Gt(){c.hide(),c.state.isEnabled=!1}function Yt(){clearTimeout(r),clearTimeout(n),cancelAnimationFrame(o)}function Kt(f){if(!c.state.isDestroyed){x("onBeforeUpdate",[c,f]),Wt();var A=c.props,k=On(e,Object.assign({},A,Cn(f),{ignoreAttributes:!0}));c.props=k,rt(),A.interactiveDebounce!==k.interactiveDebounce&&(j(),b=Sn(qt,k.interactiveDebounce)),A.triggerTarget&&!k.triggerTarget?pt(A.triggerTarget).forEach(function(B){B.removeAttribute("aria-expanded")}):k.triggerTarget&&e.removeAttribute("aria-expanded"),R(),S(),O&&O(A,k),c.popperInstance&&(Jt(),He().forEach(function(B){requestAnimationFrame(B._tippy.popperInstance.forceUpdate)})),x("onAfterUpdate",[c,f])}}function Qt(f){c.setProps({content:f})}function Wn(){var f=c.state.isVisible,A=c.state.isDestroyed,k=!c.state.isEnabled,B=Le.isTouch&&!c.props.touch,H=dr(c.props.duration,0,Ce.duration);if(!(f||A||k||B)&&!F().hasAttribute("disabled")&&(x("onShow",[c],!1),c.props.onShow(c)!==!1)){if(c.state.isVisible=!0,N()&&(y.style.visibility="visible"),S(),ne(),c.state.isMounted||(y.style.transition="none"),N()){var ae=q(),fe=ae.box,nt=ae.content;fr([fe,nt],0)}p=function(){var qe;if(!(!c.state.isVisible||h)){if(h=!0,y.offsetHeight,y.style.transition=c.props.moveTransition,N()&&c.props.animation){var Li=q(),Zt=Li.box,ot=Li.content;fr([Zt,ot],H),Tn([Zt,ot],"visible")}M(),R(),xn(mr,c),(qe=c.popperInstance)==null||qe.forceUpdate(),x("onMount",[c]),c.props.animation&&N()&&K(H,function(){c.state.isShown=!0,x("onShown",[c])})}},_e()}}function qn(){var f=!c.state.isVisible,A=c.state.isDestroyed,k=!c.state.isEnabled,B=dr(c.props.duration,1,Ce.duration);if(!(f||A||k)&&(x("onHide",[c],!1),c.props.onHide(c)!==!1)){if(c.state.isVisible=!1,c.state.isShown=!1,h=!1,s=!1,N()&&(y.style.visibility="hidden"),j(),Y(),S(!0),N()){var H=q(),ae=H.box,fe=H.content;c.props.animation&&(fr([ae,fe],B),Tn([ae,fe],"hidden"))}M(),R(),c.props.animation?N()&&ye(B,c.unmount):c.unmount()}}function Xn(f){J().addEventListener("mousemove",b),xn(Ci,b),b(f)}function Jn(){c.state.isVisible&&c.hide(),c.state.isMounted&&(zt(),He().forEach(function(f){f._tippy.unmount()}),y.parentNode&&y.parentNode.removeChild(y),mr=mr.filter(function(f){return f!==c}),c.state.isMounted=!1,x("onHidden",[c]))}function zn(){c.state.isDestroyed||(c.clearDelayTimeouts(),c.unmount(),Wt(),delete e._tippy,c.state.isDestroyed=!0,x("onDestroy",[c]))}}function Vt(e,t){t===void 0&&(t={});var i=Ce.plugins.concat(t.plugins||[]);Gs();var r=Object.assign({},t,{plugins:i}),n=Ws(e);if(!1)var o,s;var a=n.reduce(function(l,h){var u=h&&oa(h,r);return u&&l.push(u),l},[]);return ki(e)?a[0]:a}Vt.defaultProps=Ce;Vt.setDefaultProps=ta;Vt.currentInput=Le;var Ch=Object.assign({},Nt,{effect:function(t){var i=t.state,r={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,r.popper),i.styles=r,i.elements.arrow&&Object.assign(i.elements.arrow.style,r.arrow)}});Vt.setDefaultProps({render:Fn});var $n=Vt;var Ri=ro(Vn()),Oi;Ri.default.config({barColors:{0:"#0284c7"},shadowColor:"rgba(0, 0, 0, .3)"});window.addEventListener("phx:page-loading-start",e=>{Oi||(Oi=setTimeout(()=>Ri.default.show(),500))});window.addEventListener("phx:page-loading-stop",e=>{clearTimeout(Oi),Oi=void 0,Ri.default.hide()});var mt={};mt.Refresher={mounted(){let e="#refresh-selector",t=this;document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?t.pushEventTo(e,"resume-refresh",{}):t.pushEventTo(e,"pause-refresh",{})}),"refresh"in localStorage&&t.pushEventTo(e,"select-refresh",{value:localStorage.refresh}),this.el.querySelectorAll("[role='option']").forEach(i=>{i.addEventListener("click",()=>{localStorage.refresh=i.getAttribute("value")})})}};mt.RestoreTheme={mounted(){this.pushEventTo("#theme-selector","restore",{theme:localStorage.theme})}};mt.ChangeTheme={applyTheme(){let e=window.matchMedia("(prefers-color-scheme: dark)").matches,t=!("theme"in localStorage);localStorage.theme==="dark"||localStorage.theme==="system"&&e||t&&e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},mounted(){let e=this;this.el.addEventListener("click",()=>{let t=this.el.getAttribute("value");localStorage.theme=t,this.applyTheme(),e.pushEventTo("#theme-selector","restore",{theme:t})})}};mt.Tippy={mounted(){let e=this.el.getAttribute("data-title");$n(this.el,{arrow:_n,content:e,delay:[250,null]})}};mt.Chart={mounted(){let h={hour12:!1,timeStyle:"long"},u=this.el.querySelector("#chart-d"),v=this.el.querySelector("#chart-t"),p=this.el.querySelector("[rel='chart-tooltip']").cloneNode(!0),m=this.el.querySelector("[rel='chart-tooltip-label']"),b=p.querySelector("[rel='arrw']"),g=p.querySelector("[rel='date']"),E=p.querySelector("[rel='rect']"),C=p.querySelector("[rel='labs']");p.setAttribute("transform",`translate(-100000,${192})`),v.appendChild(p),u.addEventListener("mouseleave",()=>{p.setAttribute("transform",`translate(-100000,${192})`)}),u.addEventListener("mouseover",P=>{let D=P.target.parentElement,c=D.getAttribute("data-tstamp")*1e3,w=new Date(c);g.childNodes[0].nodeValue=w.toLocaleTimeString("en-US",h);let y=[...D.querySelectorAll("[data-value]")],O=42;C.replaceChildren(),y.reverse().forEach(N=>{let F=N.getAttribute("data-label"),J=N.getAttribute("data-value"),q=m.cloneNode(!0),U=q.querySelector("circle"),S=q.querySelector("text").childNodes[0];S.nodeValue=`${F} ${J}`,U.setAttribute("class",N.getAttribute("class").replace("stroke","fill")),q.setAttribute("transform",`translate(${12}, ${O})`),C.appendChild(q),O+=16});let _=2*Math.round(C.getBBox().width/2),L=Math.max(120,_+16),I=window.visualViewport.width-P.clientX-L/2-10;if(b.setAttribute("transform",`translate(${L/2-8})`),E.setAttribute("height",O-16+2),E.setAttribute("width",L),I<0){let N=`translate(${I})`;E.setAttribute("transform",N),g.setAttribute("transform",N),C.setAttribute("transform",N)}else E.removeAttribute("transform"),g.removeAttribute("transform"),C.removeAttribute("transform");let T=D.getAttribute("data-offset")-L/2+28;p.setAttribute("transform",`translate(${T},${192})`)})}};var sa=document.querySelector("meta[name='csrf-token']").getAttribute("content"),aa=document.querySelector("meta[name='live-transport']").getAttribute("content"),la=document.querySelector("meta[name='live-path']").getAttribute("content"),ca=new tn(la,Ar,{transport:aa==="longpoll"?xt:WebSocket,params:{_csrf_token:sa},hooks:mt});ca.connect();})();
/**
 * @license MIT
 * topbar 1.0.0, 2021-01-06
 * http://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90b3BiYXIvdG9wYmFyLm1pbi5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfaHRtbC9wcml2L3N0YXRpYy9waG9lbml4X2h0bWwuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3V0aWxzLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9jb25zdGFudHMuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3B1c2guanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3RpbWVyLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9jaGFubmVsLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9hamF4LmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9sb25ncG9sbC5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvcHJlc2VuY2UuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3NlcmlhbGl6ZXIuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3NvY2tldC5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9jb25zdGFudHMuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZW50cnlfdXBsb2FkZXIuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdXRpbHMuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvYnJvd3Nlci5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb20uanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdXBsb2FkX2VudHJ5LmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2xpdmVfdXBsb2FkZXIuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvYXJpYS5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9ob29rcy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb21fcG9zdF9tb3JwaF9yZXN0b3Jlci5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9ub2RlX21vZHVsZXMvbW9ycGhkb20vZGlzdC9tb3JwaGRvbS1lc20uanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tX3BhdGNoLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3JlbmRlcmVkLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3ZpZXdfaG9vay5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9qcy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy92aWV3LmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2xpdmVfc29ja2V0LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2VudW1zLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXROb2RlTmFtZS5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9hcHBseVN0eWxlcy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL21hdGguanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvdXNlckFnZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc0xheW91dFZpZXdwb3J0LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldExheW91dFJlY3QuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2NvbnRhaW5zLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDb21wdXRlZFN0eWxlLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc1RhYmxlRWxlbWVudC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRQYXJlbnROb2RlLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL3dpdGhpbi5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRGcmVzaFNpZGVPYmplY3QuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2V4cGFuZFRvSGFzaE1hcC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvYXJyb3cuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0VmFyaWF0aW9uLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9jb21wdXRlU3R5bGVzLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9ldmVudExpc3RlbmVycy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93U2Nyb2xsLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRWaWV3cG9ydFJlY3QuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldERvY3VtZW50UmVjdC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNTY3JvbGxQYXJlbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFNjcm9sbFBhcmVudC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvbGlzdFNjcm9sbFBhcmVudHMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Q2xpcHBpbmdSZWN0LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2NvbXB1dGVPZmZzZXRzLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2NvbXB1dGVBdXRvUGxhY2VtZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9mbGlwLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9oaWRlLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9vZmZzZXQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL3BvcHBlck9mZnNldHMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0QWx0QXhpcy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvcHJldmVudE92ZXJmbG93LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRIVE1MRWxlbWVudFNjcm9sbC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZVNjcm9sbC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Q29tcG9zaXRlUmVjdC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9vcmRlck1vZGlmaWVycy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9kZWJvdW5jZS5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9tZXJnZUJ5TmFtZS5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9jcmVhdGVQb3BwZXIuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvcG9wcGVyLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL2NvbnN0YW50cy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy91dGlscy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9kb20tdXRpbHMudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvYmluZEdsb2JhbEV2ZW50TGlzdGVuZXJzLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL2Jyb3dzZXIudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvdmFsaWRhdGlvbi50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9wcm9wcy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy90ZW1wbGF0ZS50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9jcmVhdGVUaXBweS50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9pbmRleC50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9hZGRvbnMvY3JlYXRlU2luZ2xldG9uLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL2FkZG9ucy9kZWxlZ2F0ZS50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9wbHVnaW5zL2FuaW1hdGVGaWxsLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL3BsdWdpbnMvZm9sbG93Q3Vyc29yLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL3BsdWdpbnMvaW5saW5lUG9zaXRpb25pbmcudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvcGx1Z2lucy9zdGlja3kudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9idWlsZC9iYXNlLmpzIiwgIi4uLy4uL2Fzc2V0cy9qcy9hcHAuanMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogQGxpY2Vuc2UgTUlUXG4gKiB0b3BiYXIgMS4wLjAsIDIwMjEtMDEtMDZcbiAqIGh0dHA6Ly9idXVuZ3V5ZW4uZ2l0aHViLmlvL3RvcGJhclxuICogQ29weXJpZ2h0IChjKSAyMDIxIEJ1dSBOZ3V5ZW5cbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdyxkb2N1bWVudCl7XCJ1c2Ugc3RyaWN0XCI7IWZ1bmN0aW9uKCl7Zm9yKHZhciBsYXN0VGltZT0wLHZlbmRvcnM9W1wibXNcIixcIm1velwiLFwid2Via2l0XCIsXCJvXCJdLHg9MDt4PHZlbmRvcnMubGVuZ3RoJiYhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsrK3gpd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT13aW5kb3dbdmVuZG9yc1t4XStcIlJlcXVlc3RBbmltYXRpb25GcmFtZVwiXSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9d2luZG93W3ZlbmRvcnNbeF0rXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXXx8d2luZG93W3ZlbmRvcnNbeF0rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oY2FsbGJhY2ssZWxlbWVudCl7dmFyIGN1cnJUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRpbWVUb0NhbGw9TWF0aC5tYXgoMCwxNi0oY3VyclRpbWUtbGFzdFRpbWUpKSxpZD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2NhbGxiYWNrKGN1cnJUaW1lK3RpbWVUb0NhbGwpfSx0aW1lVG9DYWxsKTtyZXR1cm4gbGFzdFRpbWU9Y3VyclRpbWUrdGltZVRvQ2FsbCxpZH0pLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbihpZCl7Y2xlYXJUaW1lb3V0KGlkKX0pfSgpO2Z1bmN0aW9uIHJlcGFpbnQoKXtjYW52YXMud2lkdGg9d2luZG93LmlubmVyV2lkdGgsY2FudmFzLmhlaWdodD01Km9wdGlvbnMuYmFyVGhpY2tuZXNzO3ZhciBjdHg9Y2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtjdHguc2hhZG93Qmx1cj1vcHRpb25zLnNoYWRvd0JsdXIsY3R4LnNoYWRvd0NvbG9yPW9wdGlvbnMuc2hhZG93Q29sb3I7dmFyIHN0b3AsbGluZUdyYWRpZW50PWN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAsY2FudmFzLndpZHRoLDApO2ZvcihzdG9wIGluIG9wdGlvbnMuYmFyQ29sb3JzKWxpbmVHcmFkaWVudC5hZGRDb2xvclN0b3Aoc3RvcCxvcHRpb25zLmJhckNvbG9yc1tzdG9wXSk7Y3R4LmxpbmVXaWR0aD1vcHRpb25zLmJhclRoaWNrbmVzcyxjdHguYmVnaW5QYXRoKCksY3R4Lm1vdmVUbygwLG9wdGlvbnMuYmFyVGhpY2tuZXNzLzIpLGN0eC5saW5lVG8oTWF0aC5jZWlsKGN1cnJlbnRQcm9ncmVzcypjYW52YXMud2lkdGgpLG9wdGlvbnMuYmFyVGhpY2tuZXNzLzIpLGN0eC5zdHJva2VTdHlsZT1saW5lR3JhZGllbnQsY3R4LnN0cm9rZSgpfXZhciBjYW52YXMscHJvZ3Jlc3NUaW1lcklkLGZhZGVUaW1lcklkLGN1cnJlbnRQcm9ncmVzcyxzaG93aW5nLG9wdGlvbnM9e2F1dG9SdW46ITAsYmFyVGhpY2tuZXNzOjMsYmFyQ29sb3JzOnswOlwicmdiYSgyNiwgIDE4OCwgMTU2LCAuOSlcIixcIi4yNVwiOlwicmdiYSg1MiwgIDE1MiwgMjE5LCAuOSlcIixcIi41MFwiOlwicmdiYSgyNDEsIDE5NiwgMTUsICAuOSlcIixcIi43NVwiOlwicmdiYSgyMzAsIDEyNiwgMzQsICAuOSlcIixcIjEuMFwiOlwicmdiYSgyMTEsIDg0LCAgMCwgICAuOSlcIn0sc2hhZG93Qmx1cjoxMCxzaGFkb3dDb2xvcjpcInJnYmEoMCwgICAwLCAgIDAsICAgLjYpXCIsY2xhc3NOYW1lOm51bGx9LHRvcGJhcj17Y29uZmlnOmZ1bmN0aW9uKG9wdHMpe2Zvcih2YXIga2V5IGluIG9wdHMpb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpJiYob3B0aW9uc1trZXldPW9wdHNba2V5XSl9LHNob3c6ZnVuY3Rpb24oKXt2YXIgdHlwZSxoYW5kbGVyLGVsZW07c2hvd2luZ3x8KHNob3dpbmc9ITAsbnVsbCE9PWZhZGVUaW1lcklkJiZ3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoZmFkZVRpbWVySWQpLGNhbnZhc3x8KChlbGVtPShjYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSkuc3R5bGUpLnBvc2l0aW9uPVwiZml4ZWRcIixlbGVtLnRvcD1lbGVtLmxlZnQ9ZWxlbS5yaWdodD1lbGVtLm1hcmdpbj1lbGVtLnBhZGRpbmc9MCxlbGVtLnpJbmRleD0xMDAwMDEsZWxlbS5kaXNwbGF5PVwibm9uZVwiLG9wdGlvbnMuY2xhc3NOYW1lJiZjYW52YXMuY2xhc3NMaXN0LmFkZChvcHRpb25zLmNsYXNzTmFtZSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpLHR5cGU9XCJyZXNpemVcIixoYW5kbGVyPXJlcGFpbnQsKGVsZW09d2luZG93KS5hZGRFdmVudExpc3RlbmVyP2VsZW0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLGhhbmRsZXIsITEpOmVsZW0uYXR0YWNoRXZlbnQ/ZWxlbS5hdHRhY2hFdmVudChcIm9uXCIrdHlwZSxoYW5kbGVyKTplbGVtW1wib25cIit0eXBlXT1oYW5kbGVyKSxjYW52YXMuc3R5bGUub3BhY2l0eT0xLGNhbnZhcy5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIix0b3BiYXIucHJvZ3Jlc3MoMCksb3B0aW9ucy5hdXRvUnVuJiZmdW5jdGlvbiBsb29wKCl7cHJvZ3Jlc3NUaW1lcklkPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCksdG9wYmFyLnByb2dyZXNzKFwiK1wiKy4wNSpNYXRoLnBvdygxLU1hdGguc3FydChjdXJyZW50UHJvZ3Jlc3MpLDIpKX0oKSl9LHByb2dyZXNzOmZ1bmN0aW9uKHRvKXtyZXR1cm4gdm9pZCAwPT09dG98fChcInN0cmluZ1wiPT10eXBlb2YgdG8mJih0bz0oMDw9dG8uaW5kZXhPZihcIitcIil8fDA8PXRvLmluZGV4T2YoXCItXCIpP2N1cnJlbnRQcm9ncmVzczowKStwYXJzZUZsb2F0KHRvKSksY3VycmVudFByb2dyZXNzPTE8dG8/MTp0byxyZXBhaW50KCkpLGN1cnJlbnRQcm9ncmVzc30saGlkZTpmdW5jdGlvbigpe3Nob3dpbmcmJihzaG93aW5nPSExLG51bGwhPXByb2dyZXNzVGltZXJJZCYmKHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShwcm9ncmVzc1RpbWVySWQpLHByb2dyZXNzVGltZXJJZD1udWxsKSxmdW5jdGlvbiBsb29wKCl7cmV0dXJuIDE8PXRvcGJhci5wcm9ncmVzcyhcIisuMVwiKSYmKGNhbnZhcy5zdHlsZS5vcGFjaXR5LT0uMDUsY2FudmFzLnN0eWxlLm9wYWNpdHk8PS4wNSk/KGNhbnZhcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHZvaWQoZmFkZVRpbWVySWQ9bnVsbCkpOnZvaWQoZmFkZVRpbWVySWQ9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKSl9KCkpfX07XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPXRvcGJhcjpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIHRvcGJhcn0pOnRoaXMudG9wYmFyPXRvcGJhcn0pLmNhbGwodGhpcyx3aW5kb3csZG9jdW1lbnQpOyIsICJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgUG9seWZpbGxFdmVudCA9IGV2ZW50Q29uc3RydWN0b3IoKTtcblxuICBmdW5jdGlvbiBldmVudENvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB3aW5kb3cuQ3VzdG9tRXZlbnQ7XG4gICAgLy8gSUU8PTkgU3VwcG9ydFxuICAgIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7YnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZH07XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICBldnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICAgICAgcmV0dXJuIGV2dDtcbiAgICB9XG4gICAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcbiAgICByZXR1cm4gQ3VzdG9tRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZEhpZGRlbklucHV0KG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgIGlucHV0Lm5hbWUgPSBuYW1lO1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZWxlbWVudCwgdGFyZ2V0TW9kaWZpZXJLZXkpIHtcbiAgICB2YXIgdG8gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9cIiksXG4gICAgICAgIG1ldGhvZCA9IGJ1aWxkSGlkZGVuSW5wdXQoXCJfbWV0aG9kXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikpLFxuICAgICAgICBjc3JmID0gYnVpbGRIaWRkZW5JbnB1dChcIl9jc3JmX3Rva2VuXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jc3JmXCIpKSxcbiAgICAgICAgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLFxuICAgICAgICBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuXG4gICAgZm9ybS5tZXRob2QgPSAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSA9PT0gXCJnZXRcIikgPyBcImdldFwiIDogXCJwb3N0XCI7XG4gICAgZm9ybS5hY3Rpb24gPSB0bztcbiAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGlmICh0YXJnZXQpIGZvcm0udGFyZ2V0ID0gdGFyZ2V0O1xuICAgIGVsc2UgaWYgKHRhcmdldE1vZGlmaWVyS2V5KSBmb3JtLnRhcmdldCA9IFwiX2JsYW5rXCI7XG5cbiAgICBmb3JtLmFwcGVuZENoaWxkKGNzcmYpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQobWV0aG9kKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgLy8gSW5zZXJ0IGEgYnV0dG9uIGFuZCBjbGljayBpdCBpbnN0ZWFkIG9mIHVzaW5nIGBmb3JtLnN1Ym1pdGBcbiAgICAvLyBiZWNhdXNlIHRoZSBgc3VibWl0YCBmdW5jdGlvbiBkb2VzIG5vdCBlbWl0IGEgYHN1Ym1pdGAgZXZlbnQuXG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoc3VibWl0KTtcbiAgICBzdWJtaXQuY2xpY2soKTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgd2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgIHZhciBwaG9lbml4TGlua0V2ZW50ID0gbmV3IFBvbHlmaWxsRXZlbnQoJ3Bob2VuaXgubGluay5jbGljaycsIHtcbiAgICAgICAgXCJidWJibGVzXCI6IHRydWUsIFwiY2FuY2VsYWJsZVwiOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFlbGVtZW50LmRpc3BhdGNoRXZlbnQocGhvZW5peExpbmtFdmVudCkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpKSB7XG4gICAgICAgIGhhbmRsZUNsaWNrKGVsZW1lbnQsIGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgIH1cbiAgfSwgZmFsc2UpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwaG9lbml4LmxpbmsuY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBtZXNzYWdlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jb25maXJtXCIpO1xuICAgIGlmKG1lc3NhZ2UgJiYgIXdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG59KSgpO1xuIiwgIi8vIHdyYXBzIHZhbHVlIGluIGNsb3N1cmUgb3IgcmV0dXJucyBjbG9zdXJlXG5leHBvcnQgbGV0IGNsb3N1cmUgPSAodmFsdWUpID0+IHtcbiAgaWYodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpe1xuICAgIHJldHVybiB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIGxldCBjbG9zdXJlID0gZnVuY3Rpb24gKCl7IHJldHVybiB2YWx1ZSB9XG4gICAgcmV0dXJuIGNsb3N1cmVcbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBnbG9iYWxTZWxmID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogbnVsbFxuZXhwb3J0IGNvbnN0IHBoeFdpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiBudWxsXG5leHBvcnQgY29uc3QgZ2xvYmFsID0gZ2xvYmFsU2VsZiB8fCBwaHhXaW5kb3cgfHwgZ2xvYmFsXG5leHBvcnQgY29uc3QgREVGQVVMVF9WU04gPSBcIjIuMC4wXCJcbmV4cG9ydCBjb25zdCBTT0NLRVRfU1RBVEVTID0ge2Nvbm5lY3Rpbmc6IDAsIG9wZW46IDEsIGNsb3Npbmc6IDIsIGNsb3NlZDogM31cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVPVVQgPSAxMDAwMFxuZXhwb3J0IGNvbnN0IFdTX0NMT1NFX05PUk1BTCA9IDEwMDBcbmV4cG9ydCBjb25zdCBDSEFOTkVMX1NUQVRFUyA9IHtcbiAgY2xvc2VkOiBcImNsb3NlZFwiLFxuICBlcnJvcmVkOiBcImVycm9yZWRcIixcbiAgam9pbmVkOiBcImpvaW5lZFwiLFxuICBqb2luaW5nOiBcImpvaW5pbmdcIixcbiAgbGVhdmluZzogXCJsZWF2aW5nXCIsXG59XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9FVkVOVFMgPSB7XG4gIGNsb3NlOiBcInBoeF9jbG9zZVwiLFxuICBlcnJvcjogXCJwaHhfZXJyb3JcIixcbiAgam9pbjogXCJwaHhfam9pblwiLFxuICByZXBseTogXCJwaHhfcmVwbHlcIixcbiAgbGVhdmU6IFwicGh4X2xlYXZlXCJcbn1cblxuZXhwb3J0IGNvbnN0IFRSQU5TUE9SVFMgPSB7XG4gIGxvbmdwb2xsOiBcImxvbmdwb2xsXCIsXG4gIHdlYnNvY2tldDogXCJ3ZWJzb2NrZXRcIlxufVxuZXhwb3J0IGNvbnN0IFhIUl9TVEFURVMgPSB7XG4gIGNvbXBsZXRlOiA0XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHVzaFxuICogQHBhcmFtIHtDaGFubmVsfSBjaGFubmVsIC0gVGhlIENoYW5uZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIFRoZSBldmVudCwgZm9yIGV4YW1wbGUgYFwicGh4X2pvaW5cImBcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIC0gVGhlIHBheWxvYWQsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogMTIzfWBcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IC0gVGhlIHB1c2ggdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHVzaCB7XG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIGV2ZW50LCBwYXlsb2FkLCB0aW1lb3V0KXtcbiAgICB0aGlzLmNoYW5uZWwgPSBjaGFubmVsXG4gICAgdGhpcy5ldmVudCA9IGV2ZW50XG4gICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZCB8fCBmdW5jdGlvbiAoKXsgcmV0dXJuIHt9IH1cbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gICAgdGhpcy5yZWNIb29rcyA9IFtdXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dFxuICAgKi9cbiAgcmVzZW5kKHRpbWVvdXQpe1xuICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXRcbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLnNlbmQoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBzZW5kKCl7XG4gICAgaWYodGhpcy5oYXNSZWNlaXZlZChcInRpbWVvdXRcIikpeyByZXR1cm4gfVxuICAgIHRoaXMuc3RhcnRUaW1lb3V0KClcbiAgICB0aGlzLnNlbnQgPSB0cnVlXG4gICAgdGhpcy5jaGFubmVsLnNvY2tldC5wdXNoKHtcbiAgICAgIHRvcGljOiB0aGlzLmNoYW5uZWwudG9waWMsXG4gICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgIHBheWxvYWQ6IHRoaXMucGF5bG9hZCgpLFxuICAgICAgcmVmOiB0aGlzLnJlZixcbiAgICAgIGpvaW5fcmVmOiB0aGlzLmNoYW5uZWwuam9pblJlZigpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHN0YXR1c1xuICAgKiBAcGFyYW0geyp9IGNhbGxiYWNrXG4gICAqL1xuICByZWNlaXZlKHN0YXR1cywgY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoc3RhdHVzKSl7XG4gICAgICBjYWxsYmFjayh0aGlzLnJlY2VpdmVkUmVzcC5yZXNwb25zZSlcbiAgICB9XG5cbiAgICB0aGlzLnJlY0hvb2tzLnB1c2goe3N0YXR1cywgY2FsbGJhY2t9KVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0KCl7XG4gICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgdGhpcy5yZWYgPSBudWxsXG4gICAgdGhpcy5yZWZFdmVudCA9IG51bGxcbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnNlbnQgPSBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtYXRjaFJlY2VpdmUoe3N0YXR1cywgcmVzcG9uc2UsIF9yZWZ9KXtcbiAgICB0aGlzLnJlY0hvb2tzLmZpbHRlcihoID0+IGguc3RhdHVzID09PSBzdGF0dXMpXG4gICAgICAuZm9yRWFjaChoID0+IGguY2FsbGJhY2socmVzcG9uc2UpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxSZWZFdmVudCgpe1xuICAgIGlmKCF0aGlzLnJlZkV2ZW50KXsgcmV0dXJuIH1cbiAgICB0aGlzLmNoYW5uZWwub2ZmKHRoaXMucmVmRXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhbmNlbFRpbWVvdXQoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0VGltZW91dCgpe1xuICAgIGlmKHRoaXMudGltZW91dFRpbWVyKXsgdGhpcy5jYW5jZWxUaW1lb3V0KCkgfVxuICAgIHRoaXMucmVmID0gdGhpcy5jaGFubmVsLnNvY2tldC5tYWtlUmVmKClcbiAgICB0aGlzLnJlZkV2ZW50ID0gdGhpcy5jaGFubmVsLnJlcGx5RXZlbnROYW1lKHRoaXMucmVmKVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKHRoaXMucmVmRXZlbnQsIHBheWxvYWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgICB0aGlzLmNhbmNlbFRpbWVvdXQoKVxuICAgICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBwYXlsb2FkXG4gICAgICB0aGlzLm1hdGNoUmVjZWl2ZShwYXlsb2FkKVxuICAgIH0pXG5cbiAgICB0aGlzLnRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyKFwidGltZW91dFwiLCB7fSlcbiAgICB9LCB0aGlzLnRpbWVvdXQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhc1JlY2VpdmVkKHN0YXR1cyl7XG4gICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRSZXNwICYmIHRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cyA9PT0gc3RhdHVzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXIoc3RhdHVzLCByZXNwb25zZSl7XG4gICAgdGhpcy5jaGFubmVsLnRyaWdnZXIodGhpcy5yZWZFdmVudCwge3N0YXR1cywgcmVzcG9uc2V9KVxuICB9XG59XG4iLCAiLyoqXG4gKlxuICogQ3JlYXRlcyBhIHRpbWVyIHRoYXQgYWNjZXB0cyBhIGB0aW1lckNhbGNgIGZ1bmN0aW9uIHRvIHBlcmZvcm1cbiAqIGNhbGN1bGF0ZWQgdGltZW91dCByZXRyaWVzLCBzdWNoIGFzIGV4cG9uZW50aWFsIGJhY2tvZmYuXG4gKlxuICogQGV4YW1wbGVcbiAqIGxldCByZWNvbm5lY3RUaW1lciA9IG5ldyBUaW1lcigoKSA9PiB0aGlzLmNvbm5lY3QoKSwgZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDUwMDAsIDEwMDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gKiB9KVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgNTAwMFxuICogcmVjb25uZWN0VGltZXIucmVzZXQoKVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lckNhbGNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgdGltZXJDYWxjKXtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICB0aGlzLnRpbWVyQ2FsYyA9IHRpbWVyQ2FsY1xuICAgIHRoaXMudGltZXIgPSBudWxsXG4gICAgdGhpcy50cmllcyA9IDBcbiAgfVxuXG4gIHJlc2V0KCl7XG4gICAgdGhpcy50cmllcyA9IDBcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcilcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFueSBwcmV2aW91cyBzY2hlZHVsZVRpbWVvdXQgYW5kIHNjaGVkdWxlcyBjYWxsYmFja1xuICAgKi9cbiAgc2NoZWR1bGVUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG5cbiAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWVzID0gdGhpcy50cmllcyArIDFcbiAgICAgIHRoaXMuY2FsbGJhY2soKVxuICAgIH0sIHRoaXMudGltZXJDYWxjKHRoaXMudHJpZXMgKyAxKSlcbiAgfVxufVxuIiwgImltcG9ydCB7Y2xvc3VyZX0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHtcbiAgQ0hBTk5FTF9FVkVOVFMsXG4gIENIQU5ORUxfU1RBVEVTLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgUHVzaCBmcm9tIFwiLi9wdXNoXCJcbmltcG9ydCBUaW1lciBmcm9tIFwiLi90aW1lclwiXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKX0gcGFyYW1zXG4gKiBAcGFyYW0ge1NvY2tldH0gc29ja2V0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5uZWwge1xuICBjb25zdHJ1Y3Rvcih0b3BpYywgcGFyYW1zLCBzb2NrZXQpe1xuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWRcbiAgICB0aGlzLnRvcGljID0gdG9waWNcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zIHx8IHt9KVxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0XG4gICAgdGhpcy5iaW5kaW5ncyA9IFtdXG4gICAgdGhpcy5iaW5kaW5nUmVmID0gMFxuICAgIHRoaXMudGltZW91dCA9IHRoaXMuc29ja2V0LnRpbWVvdXRcbiAgICB0aGlzLmpvaW5lZE9uY2UgPSBmYWxzZVxuICAgIHRoaXMuam9pblB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5qb2luLCB0aGlzLnBhcmFtcywgdGhpcy50aW1lb3V0KVxuICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMgPSBbXVxuXG4gICAgdGhpcy5yZWpvaW5UaW1lciA9IG5ldyBUaW1lcigoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSwgdGhpcy5zb2NrZXQucmVqb2luQWZ0ZXJNcylcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uRXJyb3IoKCkgPT4gdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpKSlcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuaXNFcnJvcmVkKCkpeyB0aGlzLnJlam9pbigpIH1cbiAgICB9KVxuICAgIClcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuam9pbmVkXG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5mb3JFYWNoKHB1c2hFdmVudCA9PiBwdXNoRXZlbnQuc2VuZCgpKVxuICAgICAgdGhpcy5wdXNoQnVmZmVyID0gW11cbiAgICB9KVxuICAgIHRoaXMuam9pblB1c2gucmVjZWl2ZShcImVycm9yXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uQ2xvc2UoKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgY2xvc2UgJHt0aGlzLnRvcGljfSAke3RoaXMuam9pblJlZigpfWApXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgICB0aGlzLnNvY2tldC5yZW1vdmUodGhpcylcbiAgICB9KVxuICAgIHRoaXMub25FcnJvcihyZWFzb24gPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGVycm9yICR7dGhpcy50b3BpY31gLCByZWFzb24pXG4gICAgICBpZih0aGlzLmlzSm9pbmluZygpKXsgdGhpcy5qb2luUHVzaC5yZXNldCgpIH1cbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGB0aW1lb3V0ICR7dGhpcy50b3BpY30gKCR7dGhpcy5qb2luUmVmKCl9KWAsIHRoaXMuam9pblB1c2gudGltZW91dClcbiAgICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRoaXMudGltZW91dClcbiAgICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICB0aGlzLmpvaW5QdXNoLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpIH1cbiAgICB9KVxuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMucmVwbHksIChwYXlsb2FkLCByZWYpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcih0aGlzLnJlcGx5RXZlbnROYW1lKHJlZiksIHBheWxvYWQpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBKb2luIHRoZSBjaGFubmVsXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGpvaW4odGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgaWYodGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInRyaWVkIHRvIGpvaW4gbXVsdGlwbGUgdGltZXMuICdqb2luJyBjYW4gb25seSBiZSBjYWxsZWQgYSBzaW5nbGUgdGltZSBwZXIgY2hhbm5lbCBpbnN0YW5jZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgICB0aGlzLmpvaW5lZE9uY2UgPSB0cnVlXG4gICAgICB0aGlzLnJlam9pbigpXG4gICAgICByZXR1cm4gdGhpcy5qb2luUHVzaFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIb29rIGludG8gY2hhbm5lbCBjbG9zZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25DbG9zZShjYWxsYmFjayl7XG4gICAgdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgZXJyb3JzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkVycm9yKGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5lcnJvciwgcmVhc29uID0+IGNhbGxiYWNrKHJlYXNvbikpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlcyBvbiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBTdWJzY3JpcHRpb24gcmV0dXJucyBhIHJlZiBjb3VudGVyLCB3aGljaCBjYW4gYmUgdXNlZCBsYXRlciB0b1xuICAgKiB1bnN1YnNjcmliZSB0aGUgZXhhY3QgZXZlbnQgbGlzdGVuZXJcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY29uc3QgcmVmMiA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19vdGhlcl9zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKiAvLyBTaW5jZSB1bnN1YnNjcmlwdGlvbiwgZG9fc3R1ZmYgd29uJ3QgZmlyZSxcbiAgICogLy8gd2hpbGUgZG9fb3RoZXJfc3R1ZmYgd2lsbCBrZWVwIGZpcmluZyBvbiB0aGUgXCJldmVudFwiXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7aW50ZWdlcn0gcmVmXG4gICAqL1xuICBvbihldmVudCwgY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLmJpbmRpbmdSZWYrK1xuICAgIHRoaXMuYmluZGluZ3MucHVzaCh7ZXZlbnQsIHJlZiwgY2FsbGJhY2t9KVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZXMgb2ZmIG9mIGNoYW5uZWwgZXZlbnRzXG4gICAqXG4gICAqIFVzZSB0aGUgcmVmIHJldHVybmVkIGZyb20gYSBjaGFubmVsLm9uKCkgdG8gdW5zdWJzY3JpYmUgb25lXG4gICAqIGhhbmRsZXIsIG9yIHBhc3Mgbm90aGluZyBmb3IgdGhlIHJlZiB0byB1bnN1YnNjcmliZSBhbGxcbiAgICogaGFuZGxlcnMgZm9yIHRoZSBnaXZlbiBldmVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gVW5zdWJzY3JpYmUgdGhlIGRvX3N0dWZmIGhhbmRsZXJcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKlxuICAgKiAvLyBVbnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgZnJvbSBldmVudFxuICAgKiBjaGFubmVsLm9mZihcImV2ZW50XCIpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb2ZmKGV2ZW50LCByZWYpe1xuICAgIHRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcigoYmluZCkgPT4ge1xuICAgICAgcmV0dXJuICEoYmluZC5ldmVudCA9PT0gZXZlbnQgJiYgKHR5cGVvZiByZWYgPT09IFwidW5kZWZpbmVkXCIgfHwgcmVmID09PSBiaW5kLnJlZikpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuUHVzaCgpeyByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLmlzSm9pbmVkKCkgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgYGV2ZW50YCB0byBwaG9lbml4IHdpdGggdGhlIHBheWxvYWQgYHBheWxvYWRgLlxuICAgKiBQaG9lbml4IHJlY2VpdmVzIHRoaXMgaW4gdGhlIGBoYW5kbGVfaW4oZXZlbnQsIHBheWxvYWQsIHNvY2tldClgXG4gICAqIGZ1bmN0aW9uLiBpZiBwaG9lbml4IHJlcGxpZXMgb3IgaXQgdGltZXMgb3V0IChkZWZhdWx0IDEwMDAwbXMpLFxuICAgKiB0aGVuIG9wdGlvbmFsbHkgdGhlIHJlcGx5IGNhbiBiZSByZWNlaXZlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY2hhbm5lbC5wdXNoKFwiZXZlbnRcIilcbiAgICogICAucmVjZWl2ZShcIm9rXCIsIHBheWxvYWQgPT4gY29uc29sZS5sb2coXCJwaG9lbml4IHJlcGxpZWQ6XCIsIHBheWxvYWQpKVxuICAgKiAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgZXJyID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCBlcnJvcmVkXCIsIGVycikpXG4gICAqICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IGNvbnNvbGUubG9nKFwidGltZWQgb3V0IHB1c2hpbmdcIikpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVvdXRdXG4gICAqIEByZXR1cm5zIHtQdXNofVxuICAgKi9cbiAgcHVzaChldmVudCwgcGF5bG9hZCwgdGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgcGF5bG9hZCA9IHBheWxvYWQgfHwge31cbiAgICBpZighdGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdHJpZWQgdG8gcHVzaCAnJHtldmVudH0nIHRvICcke3RoaXMudG9waWN9JyBiZWZvcmUgam9pbmluZy4gVXNlIGNoYW5uZWwuam9pbigpIGJlZm9yZSBwdXNoaW5nIGV2ZW50c2ApXG4gICAgfVxuICAgIGxldCBwdXNoRXZlbnQgPSBuZXcgUHVzaCh0aGlzLCBldmVudCwgZnVuY3Rpb24gKCl7IHJldHVybiBwYXlsb2FkIH0sIHRpbWVvdXQpXG4gICAgaWYodGhpcy5jYW5QdXNoKCkpe1xuICAgICAgcHVzaEV2ZW50LnNlbmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBwdXNoRXZlbnQuc3RhcnRUaW1lb3V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5wdXNoKHB1c2hFdmVudClcbiAgICB9XG5cbiAgICByZXR1cm4gcHVzaEV2ZW50XG4gIH1cblxuICAvKiogTGVhdmVzIHRoZSBjaGFubmVsXG4gICAqXG4gICAqIFVuc3Vic2NyaWJlcyBmcm9tIHNlcnZlciBldmVudHMsIGFuZFxuICAgKiBpbnN0cnVjdHMgY2hhbm5lbCB0byB0ZXJtaW5hdGUgb24gc2VydmVyXG4gICAqXG4gICAqIFRyaWdnZXJzIG9uQ2xvc2UoKSBob29rc1xuICAgKlxuICAgKiBUbyByZWNlaXZlIGxlYXZlIGFja25vd2xlZGdlbWVudHMsIHVzZSB0aGUgYHJlY2VpdmVgXG4gICAqIGhvb2sgdG8gYmluZCB0byB0aGUgc2VydmVyIGFjaywgaWU6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwubGVhdmUoKS5yZWNlaXZlKFwib2tcIiwgKCkgPT4gYWxlcnQoXCJsZWZ0IVwiKSApXG4gICAqXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGxlYXZlKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgIHRoaXMuam9pblB1c2guY2FuY2VsVGltZW91dCgpXG5cbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMubGVhdmluZ1xuICAgIGxldCBvbkNsb3NlID0gKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGxlYXZlICR7dGhpcy50b3BpY31gKVxuICAgICAgdGhpcy50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmNsb3NlLCBcImxlYXZlXCIpXG4gICAgfVxuICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRpbWVvdXQpXG4gICAgbGVhdmVQdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiBvbkNsb3NlKCkpXG4gICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICBpZighdGhpcy5jYW5QdXNoKCkpeyBsZWF2ZVB1c2gudHJpZ2dlcihcIm9rXCIsIHt9KSB9XG5cbiAgICByZXR1cm4gbGVhdmVQdXNoXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGFibGUgbWVzc2FnZSBob29rXG4gICAqXG4gICAqIFJlY2VpdmVzIGFsbCBldmVudHMgZm9yIHNwZWNpYWxpemVkIG1lc3NhZ2UgaGFuZGxpbmdcbiAgICogYmVmb3JlIGRpc3BhdGNoaW5nIHRvIHRoZSBjaGFubmVsIGNhbGxiYWNrcy5cbiAgICpcbiAgICogTXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gcmVmXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBvbk1lc3NhZ2UoX2V2ZW50LCBwYXlsb2FkLCBfcmVmKXsgcmV0dXJuIHBheWxvYWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmKXtcbiAgICBpZih0aGlzLnRvcGljICE9PSB0b3BpYyl7IHJldHVybiBmYWxzZSB9XG5cbiAgICBpZihqb2luUmVmICYmIGpvaW5SZWYgIT09IHRoaXMuam9pblJlZigpKXtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIFwiZHJvcHBpbmcgb3V0ZGF0ZWQgbWVzc2FnZVwiLCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgam9pblJlZigpeyByZXR1cm4gdGhpcy5qb2luUHVzaC5yZWYgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuaXNMZWF2aW5nKCkpeyByZXR1cm4gfVxuICAgIHRoaXMuc29ja2V0LmxlYXZlT3BlblRvcGljKHRoaXMudG9waWMpXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5pbmdcbiAgICB0aGlzLmpvaW5QdXNoLnJlc2VuZCh0aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpe1xuICAgIGxldCBoYW5kbGVkUGF5bG9hZCA9IHRoaXMub25NZXNzYWdlKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpXG4gICAgaWYocGF5bG9hZCAmJiAhaGFuZGxlZFBheWxvYWQpeyB0aHJvdyBuZXcgRXJyb3IoXCJjaGFubmVsIG9uTWVzc2FnZSBjYWxsYmFja3MgbXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcIikgfVxuXG4gICAgbGV0IGV2ZW50QmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcihiaW5kID0+IGJpbmQuZXZlbnQgPT09IGV2ZW50KVxuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGV2ZW50QmluZGluZ3MubGVuZ3RoOyBpKyspe1xuICAgICAgbGV0IGJpbmQgPSBldmVudEJpbmRpbmdzW2ldXG4gICAgICBiaW5kLmNhbGxiYWNrKGhhbmRsZWRQYXlsb2FkLCByZWYsIGpvaW5SZWYgfHwgdGhpcy5qb2luUmVmKCkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXBseUV2ZW50TmFtZShyZWYpeyByZXR1cm4gYGNoYW5fcmVwbHlfJHtyZWZ9YCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Nsb3NlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzRXJyb3JlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5lZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmVkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzSm9pbmluZygpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmluZyB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0xlYXZpbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmxlYXZpbmcgfVxufVxuIiwgImltcG9ydCB7XG4gIGdsb2JhbCxcbiAgWEhSX1NUQVRFU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBamF4IHtcblxuICBzdGF0aWMgcmVxdWVzdChtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIGlmKGdsb2JhbC5YRG9tYWluUmVxdWVzdCl7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YRG9tYWluUmVxdWVzdCgpIC8vIElFOCwgSUU5XG4gICAgICByZXR1cm4gdGhpcy54ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCByZXEgPSBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KCkgLy8gSUU3KywgRmlyZWZveCwgQ2hyb21lLCBPcGVyYSwgU2FmYXJpXG4gICAgICByZXR1cm4gdGhpcy54aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB4ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQpXG4gICAgcmVxLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGxldCByZXNwb25zZSA9IHRoaXMucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSlcbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBidWcgaW4gSUU5IHRoYXQgcmVxdWlyZXMgYW4gYXR0YWNoZWQgb25wcm9ncmVzcyBoYW5kbGVyXG4gICAgcmVxLm9ucHJvZ3Jlc3MgPSAoKSA9PiB7IH1cblxuICAgIHJlcS5zZW5kKGJvZHkpXG4gICAgcmV0dXJuIHJlcVxuICB9XG5cbiAgc3RhdGljIHhoclJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQsIHRydWUpXG4gICAgcmVxLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgYWNjZXB0KVxuICAgIHJlcS5vbmVycm9yID0gKCkgPT4gY2FsbGJhY2sgJiYgY2FsbGJhY2sobnVsbClcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYocmVxLnJlYWR5U3RhdGUgPT09IFhIUl9TVEFURVMuY29tcGxldGUgJiYgY2FsbGJhY2spe1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgICBjYWxsYmFjayhyZXNwb25zZSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZUpTT04ocmVzcCl7XG4gICAgaWYoIXJlc3AgfHwgcmVzcCA9PT0gXCJcIil7IHJldHVybiBudWxsIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwKVxuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhcImZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlXCIsIHJlc3ApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzZXJpYWxpemUob2JqLCBwYXJlbnRLZXkpe1xuICAgIGxldCBxdWVyeVN0ciA9IFtdXG4gICAgZm9yKHZhciBrZXkgaW4gb2JqKXtcbiAgICAgIGlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKXsgY29udGludWUgfVxuICAgICAgbGV0IHBhcmFtS2V5ID0gcGFyZW50S2V5ID8gYCR7cGFyZW50S2V5fVske2tleX1dYCA6IGtleVxuICAgICAgbGV0IHBhcmFtVmFsID0gb2JqW2tleV1cbiAgICAgIGlmKHR5cGVvZiBwYXJhbVZhbCA9PT0gXCJvYmplY3RcIil7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2godGhpcy5zZXJpYWxpemUocGFyYW1WYWwsIHBhcmFtS2V5KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtS2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtVmFsKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5U3RyLmpvaW4oXCImXCIpXG4gIH1cblxuICBzdGF0aWMgYXBwZW5kUGFyYW1zKHVybCwgcGFyYW1zKXtcbiAgICBpZihPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA9PT0gMCl7IHJldHVybiB1cmwgfVxuXG4gICAgbGV0IHByZWZpeCA9IHVybC5tYXRjaCgvXFw/LykgPyBcIiZcIiA6IFwiP1wiXG4gICAgcmV0dXJuIGAke3VybH0ke3ByZWZpeH0ke3RoaXMuc2VyaWFsaXplKHBhcmFtcyl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgU09DS0VUX1NUQVRFUyxcbiAgVFJBTlNQT1JUU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgQWpheCBmcm9tIFwiLi9hamF4XCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9uZ1BvbGwge1xuXG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50KXtcbiAgICB0aGlzLmVuZFBvaW50ID0gbnVsbFxuICAgIHRoaXMudG9rZW4gPSBudWxsXG4gICAgdGhpcy5za2lwSGVhcnRiZWF0ID0gdHJ1ZVxuICAgIHRoaXMucmVxcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICB0aGlzLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMucG9sbEVuZHBvaW50ID0gdGhpcy5ub3JtYWxpemVFbmRwb2ludChlbmRQb2ludClcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgICB0aGlzLnBvbGwoKVxuICB9XG5cbiAgbm9ybWFsaXplRW5kcG9pbnQoZW5kUG9pbnQpe1xuICAgIHJldHVybiAoZW5kUG9pbnRcbiAgICAgIC5yZXBsYWNlKFwid3M6Ly9cIiwgXCJodHRwOi8vXCIpXG4gICAgICAucmVwbGFjZShcIndzczovL1wiLCBcImh0dHBzOi8vXCIpXG4gICAgICAucmVwbGFjZShuZXcgUmVnRXhwKFwiKC4qKVxcL1wiICsgVFJBTlNQT1JUUy53ZWJzb2NrZXQpLCBcIiQxL1wiICsgVFJBTlNQT1JUUy5sb25ncG9sbCkpXG4gIH1cblxuICBlbmRwb2ludFVSTCgpe1xuICAgIHJldHVybiBBamF4LmFwcGVuZFBhcmFtcyh0aGlzLnBvbGxFbmRwb2ludCwge3Rva2VuOiB0aGlzLnRva2VufSlcbiAgfVxuXG4gIGNsb3NlQW5kUmV0cnkoY29kZSwgcmVhc29uLCB3YXNDbGVhbil7XG4gICAgdGhpcy5jbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZ1xuICB9XG5cbiAgb250aW1lb3V0KCl7XG4gICAgdGhpcy5vbmVycm9yKFwidGltZW91dFwiKVxuICAgIHRoaXMuY2xvc2VBbmRSZXRyeSgxMDA1LCBcInRpbWVvdXRcIiwgZmFsc2UpXG4gIH1cblxuICBpc0FjdGl2ZSgpeyByZXR1cm4gdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLm9wZW4gfHwgdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmcgfVxuXG4gIHBvbGwoKXtcbiAgICB0aGlzLmFqYXgoXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIG51bGwsICgpID0+IHRoaXMub250aW1lb3V0KCksIHJlc3AgPT4ge1xuICAgICAgaWYocmVzcCl7XG4gICAgICAgIHZhciB7c3RhdHVzLCB0b2tlbiwgbWVzc2FnZXN9ID0gcmVzcFxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IDBcbiAgICAgIH1cblxuICAgICAgc3dpdGNoKHN0YXR1cyl7XG4gICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICAgIC8vIFRhc2tzIGFyZSB3aGF0IHRoaW5ncyBsaWtlIGV2ZW50IGhhbmRsZXJzLCBzZXRUaW1lb3V0IGNhbGxiYWNrcyxcbiAgICAgICAgICAgIC8vIHByb21pc2UgcmVzb2x2ZXMgYW5kIG1vcmUgYXJlIHJ1biB3aXRoaW4uXG4gICAgICAgICAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMsIHRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGtpbmRzIG9mIHRhc2tzLFxuICAgICAgICAgICAgLy8gbWljcm90YXNrcyBhbmQgbWFjcm90YXNrcy5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYXJlIG1haW5seSB1c2VkIGZvciBQcm9taXNlcywgd2hpbGUgbWFjcm90YXNrcyBhcmVcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGV2ZXJ5dGhpbmcgZWxzZS5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYWx3YXlzIGhhdmUgcHJpb3JpdHkgb3ZlciBtYWNyb3Rhc2tzLiBJZiB0aGUgSlMgZW5naW5lXG4gICAgICAgICAgICAvLyBpcyBsb29raW5nIGZvciBhIHRhc2sgdG8gcnVuLCBpdCB3aWxsIGFsd2F5cyB0cnkgdG8gZW1wdHkgdGhlXG4gICAgICAgICAgICAvLyBtaWNyb3Rhc2sgcXVldWUgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcnVuIGFueXRoaW5nIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBtYWNyb3Rhc2sgcXVldWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gRm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LCBtZXNzYWdlcyBhbHdheXMgYXJyaXZlIGluIHRoZWlyIG93blxuICAgICAgICAgICAgLy8gZXZlbnQuIFRoaXMgbWVhbnMgdGhhdCBpZiBhbnkgcHJvbWlzZXMgYXJlIHJlc29sdmVkIGZyb20gd2l0aGluLFxuICAgICAgICAgICAgLy8gdGhlaXIgY2FsbGJhY2tzIHdpbGwgYWx3YXlzIGZpbmlzaCBleGVjdXRpb24gYnkgdGhlIHRpbWUgdGhlXG4gICAgICAgICAgICAvLyBuZXh0IG1lc3NhZ2UgZXZlbnQgaGFuZGxlciBpcyBydW4uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gZW11bGF0ZSB0aGlzIGJlaGF2aW91ciwgd2UgbmVlZCB0byBtYWtlIHN1cmUgZWFjaFxuICAgICAgICAgICAgLy8gb25tZXNzYWdlIGhhbmRsZXIgaXMgcnVuIHdpdGhpbiBpdHMgb3duIG1hY3JvdGFzay5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5vbm1lc3NhZ2Uoe2RhdGE6IG1zZ30pLCAwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDIwNDpcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDEwOlxuICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMub3BlblxuICAgICAgICAgIHRoaXMub25vcGVuKHt9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDQwMylcbiAgICAgICAgICB0aGlzLmNsb3NlKDEwMDgsIFwiZm9yYmlkZGVuXCIsIGZhbHNlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDUwMClcbiAgICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgNTAwKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgdW5oYW5kbGVkIHBvbGwgc3RhdHVzICR7c3RhdHVzfWApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHdlIGNvbGxlY3QgYWxsIHB1c2hlcyB3aXRoaW4gdGhlIGN1cnJlbnQgZXZlbnQgbG9vcCBieVxuICAvLyBzZXRUaW1lb3V0IDAsIHdoaWNoIG9wdGltaXplcyBiYWNrLXRvLWJhY2sgcHJvY2VkdXJhbFxuICAvLyBwdXNoZXMgYWdhaW5zdCBhbiBlbXB0eSBidWZmZXJcbiAgc2VuZChib2R5KXtcbiAgICBpZih0aGlzLmN1cnJlbnRCYXRjaCl7XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaC5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIGlmKHRoaXMuYXdhaXRpbmdCYXRjaEFjayl7XG4gICAgICB0aGlzLmJhdGNoQnVmZmVyLnB1c2goYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBbYm9keV1cbiAgICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5jdXJyZW50QmF0Y2gpXG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gbnVsbFxuICAgICAgfSwgMClcbiAgICB9XG4gIH1cblxuICBiYXRjaFNlbmQobWVzc2FnZXMpe1xuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IHRydWVcbiAgICB0aGlzLmFqYXgoXCJQT1NUXCIsIFwiYXBwbGljYXRpb24veC1uZGpzb25cIiwgbWVzc2FnZXMuam9pbihcIlxcblwiKSwgKCkgPT4gdGhpcy5vbmVycm9yKFwidGltZW91dFwiKSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSBmYWxzZVxuICAgICAgaWYoIXJlc3AgfHwgcmVzcC5zdGF0dXMgIT09IDIwMCl7XG4gICAgICAgIHRoaXMub25lcnJvcihyZXNwICYmIHJlc3Auc3RhdHVzKVxuICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYodGhpcy5iYXRjaEJ1ZmZlci5sZW5ndGggPiAwKXtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5iYXRjaEJ1ZmZlcilcbiAgICAgICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFtdXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIGZvcihsZXQgcmVxIG9mIHRoaXMucmVxcyl7IHJlcS5hYm9ydCgpIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNsb3NlZFxuICAgIGxldCBvcHRzID0gT2JqZWN0LmFzc2lnbih7Y29kZTogMTAwMCwgcmVhc29uOiB1bmRlZmluZWQsIHdhc0NsZWFuOiB0cnVlfSwge2NvZGUsIHJlYXNvbiwgd2FzQ2xlYW59KVxuICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRCYXRjaFRpbWVyKVxuICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBudWxsXG4gICAgaWYodHlwZW9mKENsb3NlRXZlbnQpICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHRoaXMub25jbG9zZShuZXcgQ2xvc2VFdmVudChcImNsb3NlXCIsIG9wdHMpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uY2xvc2Uob3B0cylcbiAgICB9XG4gIH1cblxuICBhamF4KG1ldGhvZCwgY29udGVudFR5cGUsIGJvZHksIG9uQ2FsbGVyVGltZW91dCwgY2FsbGJhY2spe1xuICAgIGxldCByZXFcbiAgICBsZXQgb250aW1lb3V0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBvbkNhbGxlclRpbWVvdXQoKVxuICAgIH1cbiAgICByZXEgPSBBamF4LnJlcXVlc3QobWV0aG9kLCB0aGlzLmVuZHBvaW50VVJMKCksIGNvbnRlbnRUeXBlLCBib2R5LCB0aGlzLnRpbWVvdXQsIG9udGltZW91dCwgcmVzcCA9PiB7XG4gICAgICB0aGlzLnJlcXMuZGVsZXRlKHJlcSlcbiAgICAgIGlmKHRoaXMuaXNBY3RpdmUoKSl7IGNhbGxiYWNrKHJlc3ApIH1cbiAgICB9KVxuICAgIHRoaXMucmVxcy5hZGQocmVxKVxuICB9XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHJlc2VuY2VcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBvcHRpb25zLFxuICogICAgICAgIGZvciBleGFtcGxlIGB7ZXZlbnRzOiB7c3RhdGU6IFwic3RhdGVcIiwgZGlmZjogXCJkaWZmXCJ9fWBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VuY2Uge1xuXG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGV2ZW50cyA9IG9wdHMuZXZlbnRzIHx8IHtzdGF0ZTogXCJwcmVzZW5jZV9zdGF0ZVwiLCBkaWZmOiBcInByZXNlbmNlX2RpZmZcIn1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuam9pblJlZiA9IG51bGxcbiAgICB0aGlzLmNhbGxlciA9IHtcbiAgICAgIG9uSm9pbjogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvbkxlYXZlOiBmdW5jdGlvbiAoKXsgfSxcbiAgICAgIG9uU3luYzogZnVuY3Rpb24gKCl7IH1cbiAgICB9XG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLnN0YXRlLCBuZXdTdGF0ZSA9PiB7XG4gICAgICBsZXQge29uSm9pbiwgb25MZWF2ZSwgb25TeW5jfSA9IHRoaXMuY2FsbGVyXG5cbiAgICAgIHRoaXMuam9pblJlZiA9IHRoaXMuY2hhbm5lbC5qb2luUmVmKClcbiAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jU3RhdGUodGhpcy5zdGF0ZSwgbmV3U3RhdGUsIG9uSm9pbiwgb25MZWF2ZSlcblxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaChkaWZmID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgICBvblN5bmMoKVxuICAgIH0pXG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLmRpZmYsIGRpZmYgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICBpZih0aGlzLmluUGVuZGluZ1N5bmNTdGF0ZSgpKXtcbiAgICAgICAgdGhpcy5wZW5kaW5nRGlmZnMucHVzaChkaWZmKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgICAgb25TeW5jKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgb25Kb2luKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25Kb2luID0gY2FsbGJhY2sgfVxuXG4gIG9uTGVhdmUoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vbkxlYXZlID0gY2FsbGJhY2sgfVxuXG4gIG9uU3luYyhjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uU3luYyA9IGNhbGxiYWNrIH1cblxuICBsaXN0KGJ5KXsgcmV0dXJuIFByZXNlbmNlLmxpc3QodGhpcy5zdGF0ZSwgYnkpIH1cblxuICBpblBlbmRpbmdTeW5jU3RhdGUoKXtcbiAgICByZXR1cm4gIXRoaXMuam9pblJlZiB8fCAodGhpcy5qb2luUmVmICE9PSB0aGlzLmNoYW5uZWwuam9pblJlZigpKVxuICB9XG5cbiAgLy8gbG93ZXItbGV2ZWwgcHVibGljIHN0YXRpYyBBUElcblxuICAvKipcbiAgICogVXNlZCB0byBzeW5jIHRoZSBsaXN0IG9mIHByZXNlbmNlcyBvbiB0aGUgc2VydmVyXG4gICAqIHdpdGggdGhlIGNsaWVudCdzIHN0YXRlLiBBbiBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrIGNhblxuICAgKiBiZSBwcm92aWRlZCB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRoZSBjbGllbnQncyBsb2NhbCBwcmVzZW5jZXMgYWNyb3NzXG4gICAqIGRpc2Nvbm5lY3RzIGFuZCByZWNvbm5lY3RzIHdpdGggdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNTdGF0ZShjdXJyZW50U3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCBzdGF0ZSA9IHRoaXMuY2xvbmUoY3VycmVudFN0YXRlKVxuICAgIGxldCBqb2lucyA9IHt9XG4gICAgbGV0IGxlYXZlcyA9IHt9XG5cbiAgICB0aGlzLm1hcChzdGF0ZSwgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIGlmKCFuZXdTdGF0ZVtrZXldKXtcbiAgICAgICAgbGVhdmVzW2tleV0gPSBwcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5tYXAobmV3U3RhdGUsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlKXtcbiAgICAgICAgbGV0IG5ld1JlZnMgPSBuZXdQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJSZWZzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgICAgbGV0IGpvaW5lZE1ldGFzID0gbmV3UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gY3VyUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBsZXQgbGVmdE1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IG5ld1JlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgaWYoam9pbmVkTWV0YXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICAgICAgam9pbnNba2V5XS5tZXRhcyA9IGpvaW5lZE1ldGFzXG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxlYXZlc1trZXldID0gdGhpcy5jbG9uZShjdXJyZW50UHJlc2VuY2UpXG4gICAgICAgICAgbGVhdmVzW2tleV0ubWV0YXMgPSBsZWZ0TWV0YXNcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5zeW5jRGlmZihzdGF0ZSwge2pvaW5zOiBqb2lucywgbGVhdmVzOiBsZWF2ZXN9LCBvbkpvaW4sIG9uTGVhdmUpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogVXNlZCB0byBzeW5jIGEgZGlmZiBvZiBwcmVzZW5jZSBqb2luIGFuZCBsZWF2ZVxuICAgKiBldmVudHMgZnJvbSB0aGUgc2VydmVyLCBhcyB0aGV5IGhhcHBlbi4gTGlrZSBgc3luY1N0YXRlYCwgYHN5bmNEaWZmYFxuICAgKiBhY2NlcHRzIG9wdGlvbmFsIGBvbkpvaW5gIGFuZCBgb25MZWF2ZWAgY2FsbGJhY2tzIHRvIHJlYWN0IHRvIGEgdXNlclxuICAgKiBqb2luaW5nIG9yIGxlYXZpbmcgZnJvbSBhIGRldmljZS5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNEaWZmKHN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCB7am9pbnMsIGxlYXZlc30gPSB0aGlzLmNsb25lKGRpZmYpXG4gICAgaWYoIW9uSm9pbil7IG9uSm9pbiA9IGZ1bmN0aW9uICgpeyB9IH1cbiAgICBpZighb25MZWF2ZSl7IG9uTGVhdmUgPSBmdW5jdGlvbiAoKXsgfSB9XG5cbiAgICB0aGlzLm1hcChqb2lucywgKGtleSwgbmV3UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBzdGF0ZVtrZXldID0gdGhpcy5jbG9uZShuZXdQcmVzZW5jZSlcbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBqb2luZWRSZWZzID0gc3RhdGVba2V5XS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBqb2luZWRSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIHN0YXRlW2tleV0ubWV0YXMudW5zaGlmdCguLi5jdXJNZXRhcylcbiAgICAgIH1cbiAgICAgIG9uSm9pbihrZXksIGN1cnJlbnRQcmVzZW5jZSwgbmV3UHJlc2VuY2UpXG4gICAgfSlcbiAgICB0aGlzLm1hcChsZWF2ZXMsIChrZXksIGxlZnRQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKCFjdXJyZW50UHJlc2VuY2UpeyByZXR1cm4gfVxuICAgICAgbGV0IHJlZnNUb1JlbW92ZSA9IGxlZnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICBjdXJyZW50UHJlc2VuY2UubWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gcmVmc1RvUmVtb3ZlLmluZGV4T2YocC5waHhfcmVmKSA8IDBcbiAgICAgIH0pXG4gICAgICBvbkxlYXZlKGtleSwgY3VycmVudFByZXNlbmNlLCBsZWZ0UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2UubWV0YXMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgZGVsZXRlIHN0YXRlW2tleV1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBzdGF0ZVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFycmF5IG9mIHByZXNlbmNlcywgd2l0aCBzZWxlY3RlZCBtZXRhZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHByZXNlbmNlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaG9vc2VyXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBsaXN0KHByZXNlbmNlcywgY2hvb3Nlcil7XG4gICAgaWYoIWNob29zZXIpeyBjaG9vc2VyID0gZnVuY3Rpb24gKGtleSwgcHJlcyl7IHJldHVybiBwcmVzIH0gfVxuXG4gICAgcmV0dXJuIHRoaXMubWFwKHByZXNlbmNlcywgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIHJldHVybiBjaG9vc2VyKGtleSwgcHJlc2VuY2UpXG4gICAgfSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBzdGF0aWMgbWFwKG9iaiwgZnVuYyl7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubWFwKGtleSA9PiBmdW5jKGtleSwgb2JqW2tleV0pKVxuICB9XG5cbiAgc3RhdGljIGNsb25lKG9iail7IHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpIH1cbn1cbiIsICIvKiBUaGUgZGVmYXVsdCBzZXJpYWxpemVyIGZvciBlbmNvZGluZyBhbmQgZGVjb2RpbmcgbWVzc2FnZXMgKi9cbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgSEVBREVSX0xFTkdUSDogMSxcbiAgTUVUQV9MRU5HVEg6IDQsXG4gIEtJTkRTOiB7cHVzaDogMCwgcmVwbHk6IDEsIGJyb2FkY2FzdDogMn0sXG5cbiAgZW5jb2RlKG1zZywgY2FsbGJhY2spe1xuICAgIGlmKG1zZy5wYXlsb2FkLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5iaW5hcnlFbmNvZGUobXNnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBheWxvYWQgPSBbbXNnLmpvaW5fcmVmLCBtc2cucmVmLCBtc2cudG9waWMsIG1zZy5ldmVudCwgbXNnLnBheWxvYWRdXG4gICAgICByZXR1cm4gY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpXG4gICAgfVxuICB9LFxuXG4gIGRlY29kZShyYXdQYXlsb2FkLCBjYWxsYmFjayl7XG4gICAgaWYocmF3UGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RGVjb2RlKHJhd1BheWxvYWQpKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgW2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZF0gPSBKU09OLnBhcnNlKHJhd1BheWxvYWQpXG4gICAgICByZXR1cm4gY2FsbGJhY2soe2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZH0pXG4gICAgfVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICBiaW5hcnlFbmNvZGUobWVzc2FnZSl7XG4gICAgbGV0IHtqb2luX3JlZiwgcmVmLCBldmVudCwgdG9waWMsIHBheWxvYWR9ID0gbWVzc2FnZVxuICAgIGxldCBtZXRhTGVuZ3RoID0gdGhpcy5NRVRBX0xFTkdUSCArIGpvaW5fcmVmLmxlbmd0aCArIHJlZi5sZW5ndGggKyB0b3BpYy5sZW5ndGggKyBldmVudC5sZW5ndGhcbiAgICBsZXQgaGVhZGVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuSEVBREVSX0xFTkdUSCArIG1ldGFMZW5ndGgpXG4gICAgbGV0IHZpZXcgPSBuZXcgRGF0YVZpZXcoaGVhZGVyKVxuICAgIGxldCBvZmZzZXQgPSAwXG5cbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0aGlzLktJTkRTLnB1c2gpIC8vIGtpbmRcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBqb2luX3JlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgcmVmLmxlbmd0aClcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0b3BpYy5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgZXZlbnQubGVuZ3RoKVxuICAgIEFycmF5LmZyb20oam9pbl9yZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHJlZiwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuICAgIEFycmF5LmZyb20odG9waWMsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKGV2ZW50LCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG5cbiAgICB2YXIgY29tYmluZWQgPSBuZXcgVWludDhBcnJheShoZWFkZXIuYnl0ZUxlbmd0aCArIHBheWxvYWQuYnl0ZUxlbmd0aClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoaGVhZGVyKSwgMClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkocGF5bG9hZCksIGhlYWRlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIGNvbWJpbmVkLmJ1ZmZlclxuICB9LFxuXG4gIGJpbmFyeURlY29kZShidWZmZXIpe1xuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcilcbiAgICBsZXQga2luZCA9IHZpZXcuZ2V0VWludDgoMClcbiAgICBsZXQgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSB0aGlzLktJTkRTLnB1c2g6IHJldHVybiB0aGlzLmRlY29kZVB1c2goYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLnJlcGx5OiByZXR1cm4gdGhpcy5kZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpXG4gICAgICBjYXNlIHRoaXMuS0lORFMuYnJvYWRjYXN0OiByZXR1cm4gdGhpcy5kZWNvZGVCcm9hZGNhc3QoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDIpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMylcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSCAtIDEgLy8gcHVzaGVzIGhhdmUgbm8gcmVmXG4gICAgbGV0IGpvaW5SZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBqb2luUmVmU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgam9pblJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9LFxuXG4gIGRlY29kZVJlcGx5KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCByZWZTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoNClcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSFxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICBsZXQgcGF5bG9hZCA9IHtzdGF0dXM6IGV2ZW50LCByZXNwb25zZTogZGF0YX1cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IHJlZiwgdG9waWM6IHRvcGljLCBldmVudDogQ0hBTk5FTF9FVkVOVFMucmVwbHksIHBheWxvYWQ6IHBheWxvYWR9XG4gIH0sXG5cbiAgZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IHRvcGljU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgZXZlbnRTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBvZmZzZXQgPSB0aGlzLkhFQURFUl9MRU5HVEggKyAyXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG5cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBudWxsLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgZ2xvYmFsLFxuICBwaHhXaW5kb3csXG4gIENIQU5ORUxfRVZFTlRTLFxuICBERUZBVUxUX1RJTUVPVVQsXG4gIERFRkFVTFRfVlNOLFxuICBTT0NLRVRfU1RBVEVTLFxuICBUUkFOU1BPUlRTLFxuICBXU19DTE9TRV9OT1JNQUxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvc3VyZVxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBBamF4IGZyb20gXCIuL2FqYXhcIlxuaW1wb3J0IENoYW5uZWwgZnJvbSBcIi4vY2hhbm5lbFwiXG5pbXBvcnQgTG9uZ1BvbGwgZnJvbSBcIi4vbG9uZ3BvbGxcIlxuaW1wb3J0IFNlcmlhbGl6ZXIgZnJvbSBcIi4vc2VyaWFsaXplclwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFNvY2tldCAqXG4gKlxuICogRm9yIElFOCBzdXBwb3J0IHVzZSBhbiBFUzUtc2hpbSAoaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmRQb2ludCAtIFRoZSBzdHJpbmcgV2ViU29ja2V0IGVuZHBvaW50LCBpZSwgYFwid3M6Ly9leGFtcGxlLmNvbS9zb2NrZXRcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwid3NzOi8vZXhhbXBsZS5jb21cImBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCIvc29ja2V0XCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnRyYW5zcG9ydF0gLSBUaGUgV2Vic29ja2V0IFRyYW5zcG9ydCwgZm9yIGV4YW1wbGUgV2ViU29ja2V0IG9yIFBob2VuaXguTG9uZ1BvbGwuXG4gKlxuICogRGVmYXVsdHMgdG8gV2ViU29ja2V0IHdpdGggYXV0b21hdGljIExvbmdQb2xsIGZhbGxiYWNrLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZW5jb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBlbmNvZGUgb3V0Z29pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTiBlbmNvZGVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmRlY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZGVjb2RlIGluY29taW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT046XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnBhcnNlKHBheWxvYWQpKVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXRdIC0gVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICpcbiAqIERlZmF1bHRzIGBERUZBVUxUX1RJTUVPVVRgXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNc10gLSBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVjb25uZWN0QWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogc29ja2V0IHJlY29ubmVjdCBpbnRlcnZhbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBzdGVwcGVkIGJhY2tvZmYgb2Y6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWpvaW5BZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiByZWpvaW4gaW50ZXJ2YWwgZm9yIGluZGl2aWR1YWwgY2hhbm5lbHMuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5sb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbihraW5kLCBtc2csIGRhdGEpIHtcbiAqICAgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubG9uZ3BvbGxlclRpbWVvdXRdIC0gVGhlIG1heGltdW0gdGltZW91dCBvZiBhIGxvbmcgcG9sbCBBSkFYIHJlcXVlc3QuXG4gKlxuICogRGVmYXVsdHMgdG8gMjBzIChkb3VibGUgdGhlIHNlcnZlciBsb25nIHBvbGwgdGltZXIpLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluYXJ5VHlwZV0gLSBUaGUgYmluYXJ5IHR5cGUgdG8gdXNlIGZvciBiaW5hcnkgV2ViU29ja2V0IGZyYW1lcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBcImFycmF5YnVmZmVyXCJcbiAqXG4gKiBAcGFyYW0ge3Zzbn0gW29wdHMudnNuXSAtIFRoZSBzZXJpYWxpemVyJ3MgcHJvdG9jb2wgdmVyc2lvbiB0byBzZW5kIG9uIGNvbm5lY3QuXG4gKlxuICogRGVmYXVsdHMgdG8gREVGQVVMVF9WU04uXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29ja2V0IHtcbiAgY29uc3RydWN0b3IoZW5kUG9pbnQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyA9IHtvcGVuOiBbXSwgY2xvc2U6IFtdLCBlcnJvcjogW10sIG1lc3NhZ2U6IFtdfVxuICAgIHRoaXMuY2hhbm5lbHMgPSBbXVxuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy50aW1lb3V0ID0gb3B0cy50aW1lb3V0IHx8IERFRkFVTFRfVElNRU9VVFxuICAgIHRoaXMudHJhbnNwb3J0ID0gb3B0cy50cmFuc3BvcnQgfHwgZ2xvYmFsLldlYlNvY2tldCB8fCBMb25nUG9sbFxuICAgIHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9ucyA9IDBcbiAgICB0aGlzLmRlZmF1bHRFbmNvZGVyID0gU2VyaWFsaXplci5lbmNvZGUuYmluZChTZXJpYWxpemVyKVxuICAgIHRoaXMuZGVmYXVsdERlY29kZXIgPSBTZXJpYWxpemVyLmRlY29kZS5iaW5kKFNlcmlhbGl6ZXIpXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmJpbmFyeVR5cGUgPSBvcHRzLmJpbmFyeVR5cGUgfHwgXCJhcnJheWJ1ZmZlclwiXG4gICAgdGhpcy5jb25uZWN0Q2xvY2sgPSAxXG4gICAgaWYodGhpcy50cmFuc3BvcnQgIT09IExvbmdQb2xsKXtcbiAgICAgIHRoaXMuZW5jb2RlID0gb3B0cy5lbmNvZGUgfHwgdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSBvcHRzLmRlY29kZSB8fCB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5jb2RlID0gdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfVxuICAgIGxldCBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgIGlmKHBoeFdpbmRvdyAmJiBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7XG4gICAgICBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIF9lID0+IHtcbiAgICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSB0aGlzLmNvbm5lY3RDbG9ja1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBfZSA9PiB7XG4gICAgICAgIGlmKGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPT09IHRoaXMuY29ubmVjdENsb2NrKXtcbiAgICAgICAgICBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgICAgICAgIHRoaXMuY29ubmVjdCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyA9IG9wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNcyB8fCAzMDAwMFxuICAgIHRoaXMucmVqb2luQWZ0ZXJNcyA9ICh0cmllcykgPT4ge1xuICAgICAgaWYob3B0cy5yZWpvaW5BZnRlck1zKXtcbiAgICAgICAgcmV0dXJuIG9wdHMucmVqb2luQWZ0ZXJNcyh0cmllcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbMTAwMCwgMjAwMCwgNTAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlY29ubmVjdEFmdGVyTXMgPSAodHJpZXMpID0+IHtcbiAgICAgIGlmKG9wdHMucmVjb25uZWN0QWZ0ZXJNcyl7XG4gICAgICAgIHJldHVybiBvcHRzLnJlY29ubmVjdEFmdGVyTXModHJpZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9IG9wdHMubG9nZ2VyIHx8IG51bGxcbiAgICB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0ID0gb3B0cy5sb25ncG9sbGVyVGltZW91dCB8fCAyMDAwMFxuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLmVuZFBvaW50ID0gYCR7ZW5kUG9pbnR9LyR7VFJBTlNQT1JUUy53ZWJzb2NrZXR9YFxuICAgIHRoaXMudnNuID0gb3B0cy52c24gfHwgREVGQVVMVF9WU05cbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IG51bGxcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHtcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5jb25uZWN0KCkpXG4gICAgfSwgdGhpcy5yZWNvbm5lY3RBZnRlck1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIExvbmdQb2xsIHRyYW5zcG9ydCByZWZlcmVuY2VcbiAgICovXG4gIGdldExvbmdQb2xsVHJhbnNwb3J0KCl7IHJldHVybiBMb25nUG9sbCB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGFuZCByZXBsYWNlcyB0aGUgYWN0aXZlIHRyYW5zcG9ydFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXdUcmFuc3BvcnQgLSBUaGUgbmV3IHRyYW5zcG9ydCBjbGFzcyB0byBpbnN0YW50aWF0ZVxuICAgKlxuICAgKi9cbiAgcmVwbGFjZVRyYW5zcG9ydChuZXdUcmFuc3BvcnQpe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgdGhpcy5jb25uLmNsb3NlKClcbiAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICB9XG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXdUcmFuc3BvcnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzb2NrZXQgcHJvdG9jb2xcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHByb3RvY29sKCl7IHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHBzLykgPyBcIndzc1wiIDogXCJ3c1wiIH1cblxuICAvKipcbiAgICogVGhlIGZ1bGx5IHF1YWxpZmllZCBzb2NrZXQgdXJsXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBlbmRQb2ludFVSTCgpe1xuICAgIGxldCB1cmkgPSBBamF4LmFwcGVuZFBhcmFtcyhcbiAgICAgIEFqYXguYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsIHRoaXMucGFyYW1zKCkpLCB7dnNuOiB0aGlzLnZzbn0pXG4gICAgaWYodXJpLmNoYXJBdCgwKSAhPT0gXCIvXCIpeyByZXR1cm4gdXJpIH1cbiAgICBpZih1cmkuY2hhckF0KDEpID09PSBcIi9cIil7IHJldHVybiBgJHt0aGlzLnByb3RvY29sKCl9OiR7dXJpfWAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06Ly8ke2xvY2F0aW9uLmhvc3R9JHt1cml9YFxuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXRcbiAgICpcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DbG9zZUV2ZW50I1N0YXR1c19jb2RlcyBmb3IgdmFsaWQgc3RhdHVzIGNvZGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIE9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBzb2NrZXQgaXMgZGlzY29ubmVjdGVkLlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGNvZGUgLSBBIHN0YXR1cyBjb2RlIGZvciBkaXNjb25uZWN0aW9uIChPcHRpb25hbCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBBIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIHJlYXNvbiB0byBkaXNjb25uZWN0LiAoT3B0aW9uYWwpXG4gICAqL1xuICBkaXNjb25uZWN0KGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy50ZWFyZG93bihjYWxsYmFjaywgY29kZSwgcmVhc29uKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgcGFyYW1zIHRvIHNlbmQgd2hlbiBjb25uZWN0aW5nLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IHVzZXJUb2tlbn1gXG4gICAqXG4gICAqIFBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZDsgcGFzcyB0aGVtIGluIHRoZSBTb2NrZXQgY29uc3RydWN0b3IgaW5zdGVhZDpcbiAgICogYG5ldyBTb2NrZXQoXCIvc29ja2V0XCIsIHtwYXJhbXM6IHt1c2VyX2lkOiB1c2VyVG9rZW59fSlgLlxuICAgKi9cbiAgY29ubmVjdChwYXJhbXMpe1xuICAgIGlmKHBhcmFtcyl7XG4gICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKFwicGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkIHBhc3MgOnBhcmFtcyB0byB0aGUgU29ja2V0IGNvbnN0cnVjdG9yXCIpXG4gICAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zKVxuICAgIH1cbiAgICBpZih0aGlzLmNvbm4peyByZXR1cm4gfVxuXG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5jb25uID0gbmV3IHRoaXMudHJhbnNwb3J0KHRoaXMuZW5kUG9pbnRVUkwoKSlcbiAgICB0aGlzLmNvbm4uYmluYXJ5VHlwZSA9IHRoaXMuYmluYXJ5VHlwZVxuICAgIHRoaXMuY29ubi50aW1lb3V0ID0gdGhpcy5sb25ncG9sbGVyVGltZW91dFxuICAgIHRoaXMuY29ubi5vbm9wZW4gPSAoKSA9PiB0aGlzLm9uQ29ubk9wZW4oKVxuICAgIHRoaXMuY29ubi5vbmVycm9yID0gZXJyb3IgPT4gdGhpcy5vbkNvbm5FcnJvcihlcnJvcilcbiAgICB0aGlzLmNvbm4ub25tZXNzYWdlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5NZXNzYWdlKGV2ZW50KVxuICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5DbG9zZShldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHRoZSBtZXNzYWdlLiBPdmVycmlkZSBgdGhpcy5sb2dnZXJgIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLiBub29wcyBieSBkZWZhdWx0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBraW5kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtc2dcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIGxvZyhraW5kLCBtc2csIGRhdGEpeyB0aGlzLmxvZ2dlcihraW5kLCBtc2csIGRhdGEpIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGEgbG9nZ2VyIGhhcyBiZWVuIHNldCBvbiB0aGlzIHNvY2tldC5cbiAgICovXG4gIGhhc0xvZ2dlcigpeyByZXR1cm4gdGhpcy5sb2dnZXIgIT09IG51bGwgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIG9wZW4gZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbk9wZW4oZnVuY3Rpb24oKXsgY29uc29sZS5pbmZvKFwidGhlIHNvY2tldCB3YXMgb3BlbmVkXCIpIH0pXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbk9wZW4oY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBjbG9zZSBldmVudHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gZXJyb3IgZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbkVycm9yKGZ1bmN0aW9uKGVycm9yKXsgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZFwiKSB9KVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBtZXNzYWdlIGV2ZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFBpbmdzIHRoZSBzZXJ2ZXIgYW5kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggdGhlIFJUVCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwaW5nIHdhcyBwdXNoZWQgb3IgZmFsc2UgaWYgdW5hYmxlIHRvIGJlIHB1c2hlZC5cbiAgICovXG4gIHBpbmcoY2FsbGJhY2spe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gZmFsc2UgfVxuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIGxldCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgdGhpcy5wdXNoKHt0b3BpYzogXCJwaG9lbml4XCIsIGV2ZW50OiBcImhlYXJ0YmVhdFwiLCBwYXlsb2FkOiB7fSwgcmVmOiByZWZ9KVxuICAgIGxldCBvbk1zZ1JlZiA9IHRoaXMub25NZXNzYWdlKG1zZyA9PiB7XG4gICAgICBpZihtc2cucmVmID09PSByZWYpe1xuICAgICAgICB0aGlzLm9mZihbb25Nc2dSZWZdKVxuICAgICAgICBjYWxsYmFjayhEYXRlLm5vdygpIC0gc3RhcnRUaW1lKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBjbGVhckhlYXJ0YmVhdHMoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lcilcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIpXG4gIH1cblxuICBvbkNvbm5PcGVuKCl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGNvbm5lY3RlZCB0byAke3RoaXMuZW5kUG9pbnRVUkwoKX1gKVxuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zKytcbiAgICB0aGlzLmZsdXNoU2VuZEJ1ZmZlcigpXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5yZXNldEhlYXJ0YmVhdCgpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4gY2FsbGJhY2soKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBoZWFydGJlYXRUaW1lb3V0KCl7XG4gICAgaWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpeyB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImhlYXJ0YmVhdCB0aW1lb3V0LiBBdHRlbXB0aW5nIHRvIHJlLWVzdGFibGlzaCBjb25uZWN0aW9uXCIpIH1cbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgICAgdGhpcy50ZWFyZG93bigoKSA9PiB0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpLCBXU19DTE9TRV9OT1JNQUwsIFwiaGVhcnRiZWF0IHRpbWVvdXRcIilcbiAgICB9XG4gIH1cblxuICByZXNldEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4uc2tpcEhlYXJ0YmVhdCl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICB9XG5cbiAgdGVhcmRvd24oY2FsbGJhY2ssIGNvZGUsIHJlYXNvbil7XG4gICAgaWYoIXRoaXMuY29ubil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgIH1cblxuICAgIHRoaXMud2FpdEZvckJ1ZmZlckRvbmUoKCkgPT4ge1xuICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgaWYoY29kZSl7IHRoaXMuY29ubi5jbG9zZShjb2RlLCByZWFzb24gfHwgXCJcIikgfSBlbHNlIHsgdGhpcy5jb25uLmNsb3NlKCkgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLndhaXRGb3JTb2NrZXRDbG9zZWQoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICAgIHRoaXMuY29ubi5vbm9wZW4gPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25jbG9zZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4gPSBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICB3YWl0Rm9yQnVmZmVyRG9uZShjYWxsYmFjaywgdHJpZXMgPSAxKXtcbiAgICBpZih0cmllcyA9PT0gNSB8fCAhdGhpcy5jb25uIHx8ICF0aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQpe1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndhaXRGb3JCdWZmZXJEb25lKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICB3YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyA9IDEpe1xuICAgIGlmKHRyaWVzID09PSA1IHx8ICF0aGlzLmNvbm4gfHwgdGhpcy5jb25uLnJlYWR5U3RhdGUgPT09IFNPQ0tFVF9TVEFURVMuY2xvc2VkKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICBvbkNvbm5DbG9zZShldmVudCl7XG4gICAgbGV0IGNsb3NlQ29kZSA9IGV2ZW50ICYmIGV2ZW50LmNvZGVcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImNsb3NlXCIsIGV2ZW50KVxuICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgIGlmKCF0aGlzLmNsb3NlV2FzQ2xlYW4gJiYgY2xvc2VDb2RlICE9PSAxMDAwKXtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KClcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IGNhbGxiYWNrKGV2ZW50KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25Db25uRXJyb3IoZXJyb3Ipe1xuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGVycm9yKVxuICAgIGxldCB0cmFuc3BvcnRCZWZvcmUgPSB0aGlzLnRyYW5zcG9ydFxuICAgIGxldCBlc3RhYmxpc2hlZEJlZm9yZSA9IHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9uc1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IuZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiB7XG4gICAgICBjYWxsYmFjayhlcnJvciwgdHJhbnNwb3J0QmVmb3JlLCBlc3RhYmxpc2hlZEJlZm9yZSlcbiAgICB9KVxuICAgIGlmKHRyYW5zcG9ydEJlZm9yZSA9PT0gdGhpcy50cmFuc3BvcnQgfHwgZXN0YWJsaXNoZWRCZWZvcmUgPiAwKXtcbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyQ2hhbkVycm9yKCl7XG4gICAgdGhpcy5jaGFubmVscy5mb3JFYWNoKGNoYW5uZWwgPT4ge1xuICAgICAgaWYoIShjaGFubmVsLmlzRXJyb3JlZCgpIHx8IGNoYW5uZWwuaXNMZWF2aW5nKCkgfHwgY2hhbm5lbC5pc0Nsb3NlZCgpKSl7XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKXtcbiAgICBzd2l0Y2godGhpcy5jb25uICYmIHRoaXMuY29ubi5yZWFkeVN0YXRlKXtcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nOiByZXR1cm4gXCJjb25uZWN0aW5nXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5vcGVuOiByZXR1cm4gXCJvcGVuXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jbG9zaW5nOiByZXR1cm4gXCJjbG9zaW5nXCJcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBcImNsb3NlZFwiXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuY29ubmVjdGlvblN0YXRlKCkgPT09IFwib3BlblwiIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtDaGFubmVsfVxuICAgKi9cbiAgcmVtb3ZlKGNoYW5uZWwpe1xuICAgIHRoaXMub2ZmKGNoYW5uZWwuc3RhdGVDaGFuZ2VSZWZzKVxuICAgIHRoaXMuY2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzLmZpbHRlcihjID0+IGMuam9pblJlZigpICE9PSBjaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgIHJlZ2lzdHJhdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7cmVmc30gLSBsaXN0IG9mIHJlZnMgcmV0dXJuZWQgYnkgY2FsbHMgdG9cbiAgICogICAgICAgICAgICAgICAgIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgXG4gICAqL1xuICBvZmYocmVmcyl7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyl7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0uZmlsdGVyKChbcmVmXSkgPT4ge1xuICAgICAgICByZXR1cm4gcmVmcy5pbmRleE9mKHJlZikgPT09IC0xXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgYSBuZXcgY2hhbm5lbCBmb3IgdGhlIGdpdmVuIHRvcGljXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhblBhcmFtcyAtIFBhcmFtZXRlcnMgZm9yIHRoZSBjaGFubmVsXG4gICAqIEByZXR1cm5zIHtDaGFubmVsfVxuICAgKi9cbiAgY2hhbm5lbCh0b3BpYywgY2hhblBhcmFtcyA9IHt9KXtcbiAgICBsZXQgY2hhbiA9IG5ldyBDaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zLCB0aGlzKVxuICAgIHRoaXMuY2hhbm5lbHMucHVzaChjaGFuKVxuICAgIHJldHVybiBjaGFuXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIHB1c2goZGF0YSl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSl7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBkYXRhXG4gICAgICB0aGlzLmxvZyhcInB1c2hcIiwgYCR7dG9waWN9ICR7ZXZlbnR9ICgke2pvaW5fcmVmfSwgJHtyZWZ9KWAsIHBheWxvYWQpXG4gICAgfVxuXG4gICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIucHVzaCgoKSA9PiB0aGlzLmVuY29kZShkYXRhLCByZXN1bHQgPT4gdGhpcy5jb25uLnNlbmQocmVzdWx0KSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmV4dCBtZXNzYWdlIHJlZiwgYWNjb3VudGluZyBmb3Igb3ZlcmZsb3dzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBtYWtlUmVmKCl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmICsgMVxuICAgIGlmKG5ld1JlZiA9PT0gdGhpcy5yZWYpeyB0aGlzLnJlZiA9IDAgfSBlbHNlIHsgdGhpcy5yZWYgPSBuZXdSZWYgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVmLnRvU3RyaW5nKClcbiAgfVxuXG4gIHNlbmRIZWFydGJlYXQoKXtcbiAgICBpZih0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgJiYgIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnB1c2goe3RvcGljOiBcInBob2VuaXhcIiwgZXZlbnQ6IFwiaGVhcnRiZWF0XCIsIHBheWxvYWQ6IHt9LCByZWY6IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZn0pXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaGVhcnRiZWF0VGltZW91dCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gIH1cblxuICBmbHVzaFNlbmRCdWZmZXIoKXtcbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aCA+IDApe1xuICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soKSlcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgfVxuICB9XG5cbiAgb25Db25uTWVzc2FnZShyYXdNZXNzYWdlKXtcbiAgICB0aGlzLmRlY29kZShyYXdNZXNzYWdlLmRhdGEsIG1zZyA9PiB7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBtc2dcbiAgICAgIGlmKHJlZiAmJiByZWYgPT09IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZil7XG4gICAgICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInJlY2VpdmVcIiwgYCR7cGF5bG9hZC5zdGF0dXMgfHwgXCJcIn0gJHt0b3BpY30gJHtldmVudH0gJHtyZWYgJiYgXCIoXCIgKyByZWYgKyBcIilcIiB8fCBcIlwifWAsIHBheWxvYWQpXG5cbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYW5uZWxzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuY2hhbm5lbHNbaV1cbiAgICAgICAgaWYoIWNoYW5uZWwuaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luX3JlZikpeyBjb250aW51ZSB9XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZilcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGxldCBbLCBjYWxsYmFja10gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2VbaV1cbiAgICAgICAgY2FsbGJhY2sobXNnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBsZWF2ZU9wZW5Ub3BpYyh0b3BpYyl7XG4gICAgbGV0IGR1cENoYW5uZWwgPSB0aGlzLmNoYW5uZWxzLmZpbmQoYyA9PiBjLnRvcGljID09PSB0b3BpYyAmJiAoYy5pc0pvaW5lZCgpIHx8IGMuaXNKb2luaW5nKCkpKVxuICAgIGlmKGR1cENoYW5uZWwpe1xuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGxlYXZpbmcgZHVwbGljYXRlIHRvcGljIFwiJHt0b3BpY31cImApXG4gICAgICBkdXBDaGFubmVsLmxlYXZlKClcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgQ09OU0VDVVRJVkVfUkVMT0FEUyA9IFwiY29uc2VjdXRpdmUtcmVsb2Fkc1wiXG5leHBvcnQgY29uc3QgTUFYX1JFTE9BRFMgPSAxMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUlOID0gNTAwMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUFYID0gMTAwMDBcbmV4cG9ydCBjb25zdCBGQUlMU0FGRV9KSVRURVIgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IFBIWF9FVkVOVF9DTEFTU0VTID0gW1xuICBcInBoeC1jbGljay1sb2FkaW5nXCIsIFwicGh4LWNoYW5nZS1sb2FkaW5nXCIsIFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIsXG4gIFwicGh4LWtleWRvd24tbG9hZGluZ1wiLCBcInBoeC1rZXl1cC1sb2FkaW5nXCIsIFwicGh4LWJsdXItbG9hZGluZ1wiLCBcInBoeC1mb2N1cy1sb2FkaW5nXCJcbl1cbmV4cG9ydCBjb25zdCBQSFhfQ09NUE9ORU5UID0gXCJkYXRhLXBoeC1jb21wb25lbnRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0xJTksgPSBcImRhdGEtcGh4LWxpbmtcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19TVEFUSUMgPSBcInRyYWNrLXN0YXRpY1wiXG5leHBvcnQgY29uc3QgUEhYX0xJTktfU1RBVEUgPSBcImRhdGEtcGh4LWxpbmstc3RhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUYgPSBcImRhdGEtcGh4LXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1JFRl9TUkMgPSBcImRhdGEtcGh4LXJlZi1zcmNcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19VUExPQURTID0gXCJ0cmFjay11cGxvYWRzXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBMT0FEX1JFRiA9IFwiZGF0YS1waHgtdXBsb2FkLXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1BSRUZMSUdIVEVEX1JFRlMgPSBcImRhdGEtcGh4LXByZWZsaWdodGVkLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9ET05FX1JFRlMgPSBcImRhdGEtcGh4LWRvbmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RST1BfVEFSR0VUID0gXCJkcm9wLXRhcmdldFwiXG5leHBvcnQgY29uc3QgUEhYX0FDVElWRV9FTlRSWV9SRUZTID0gXCJkYXRhLXBoeC1hY3RpdmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfRklMRV9VUERBVEVEID0gXCJwaHg6bGl2ZS1maWxlOnVwZGF0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TS0lQID0gXCJkYXRhLXBoeC1za2lwXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJVTkUgPSBcImRhdGEtcGh4LXBydW5lXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFHRV9MT0FESU5HID0gXCJwYWdlLWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9DT05ORUNURURfQ0xBU1MgPSBcInBoeC1jb25uZWN0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MT0FESU5HX0NMQVNTID0gXCJwaHgtbG9hZGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX05PX0ZFRURCQUNLX0NMQVNTID0gXCJwaHgtbm8tZmVlZGJhY2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9FUlJPUl9DTEFTUyA9IFwicGh4LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTID0gXCJwaHgtY2xpZW50LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTID0gXCJwaHgtc2VydmVyLWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFSRU5UX0lEID0gXCJkYXRhLXBoeC1wYXJlbnQtaWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9NQUlOID0gXCJkYXRhLXBoeC1tYWluXCJcbmV4cG9ydCBjb25zdCBQSFhfUk9PVF9JRCA9IFwiZGF0YS1waHgtcm9vdC1pZFwiXG5leHBvcnQgY29uc3QgUEhYX1ZJRVdQT1JUX1RPUCA9IFwidmlld3BvcnQtdG9wXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV1BPUlRfQk9UVE9NID0gXCJ2aWV3cG9ydC1ib3R0b21cIlxuZXhwb3J0IGNvbnN0IFBIWF9UUklHR0VSX0FDVElPTiA9IFwidHJpZ2dlci1hY3Rpb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9GRUVEQkFDS19GT1IgPSBcImZlZWRiYWNrLWZvclwiXG5leHBvcnQgY29uc3QgUEhYX0hBU19GT0NVU0VEID0gXCJwaHgtaGFzLWZvY3VzZWRcIlxuZXhwb3J0IGNvbnN0IEZPQ1VTQUJMRV9JTlBVVFMgPSBbXCJ0ZXh0XCIsIFwidGV4dGFyZWFcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInBhc3N3b3JkXCIsIFwic2VhcmNoXCIsIFwidGVsXCIsIFwidXJsXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcImNvbG9yXCIsIFwicmFuZ2VcIl1cbmV4cG9ydCBjb25zdCBDSEVDS0FCTEVfSU5QVVRTID0gW1wiY2hlY2tib3hcIiwgXCJyYWRpb1wiXVxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfU1VCTUlUVEVEID0gXCJwaHgtaGFzLXN1Ym1pdHRlZFwiXG5leHBvcnQgY29uc3QgUEhYX1NFU1NJT04gPSBcImRhdGEtcGh4LXNlc3Npb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9WSUVXX1NFTEVDVE9SID0gYFske1BIWF9TRVNTSU9OfV1gXG5leHBvcnQgY29uc3QgUEhYX1NUSUNLWSA9IFwiZGF0YS1waHgtc3RpY2t5XCJcbmV4cG9ydCBjb25zdCBQSFhfU1RBVElDID0gXCJkYXRhLXBoeC1zdGF0aWNcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUFET05MWSA9IFwiZGF0YS1waHgtcmVhZG9ubHlcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFRCA9IFwiZGF0YS1waHgtZGlzYWJsZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEggPSBcImRpc2FibGUtd2l0aFwiXG5leHBvcnQgY29uc3QgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFID0gXCJkYXRhLXBoeC1kaXNhYmxlLXdpdGgtcmVzdG9yZVwiXG5leHBvcnQgY29uc3QgUEhYX0hPT0sgPSBcImhvb2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9ERUJPVU5DRSA9IFwiZGVib3VuY2VcIlxuZXhwb3J0IGNvbnN0IFBIWF9USFJPVFRMRSA9IFwidGhyb3R0bGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9VUERBVEUgPSBcInVwZGF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX1NUUkVBTSA9IFwic3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfU1RSRUFNX1JFRiA9IFwiZGF0YS1waHgtc3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfS0VZID0gXCJrZXlcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUklWQVRFID0gXCJwaHhQcml2YXRlXCJcbmV4cG9ydCBjb25zdCBQSFhfQVVUT19SRUNPVkVSID0gXCJhdXRvLXJlY292ZXJcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9ERUJVRyA9IFwicGh4OmxpdmUtc29ja2V0OmRlYnVnXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfUFJPRklMRSA9IFwicGh4OmxpdmUtc29ja2V0OnByb2ZpbGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX0xBVEVOQ1lfU0lNID0gXCJwaHg6bGl2ZS1zb2NrZXQ6bGF0ZW5jeS1zaW1cIlxuZXhwb3J0IGNvbnN0IFBIWF9QUk9HUkVTUyA9IFwicHJvZ3Jlc3NcIlxuZXhwb3J0IGNvbnN0IFBIWF9NT1VOVEVEID0gXCJtb3VudGVkXCJcbmV4cG9ydCBjb25zdCBMT0FERVJfVElNRU9VVCA9IDFcbmV4cG9ydCBjb25zdCBCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUID0gMjAwXG5leHBvcnQgY29uc3QgQklORElOR19QUkVGSVggPSBcInBoeC1cIlxuZXhwb3J0IGNvbnN0IFBVU0hfVElNRU9VVCA9IDMwMDAwXG5leHBvcnQgY29uc3QgTElOS19IRUFERVIgPSBcIngtcmVxdWVzdGVkLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFJFU1BPTlNFX1VSTF9IRUFERVIgPSBcIngtcmVzcG9uc2UtdXJsXCJcbmV4cG9ydCBjb25zdCBERUJPVU5DRV9UUklHR0VSID0gXCJkZWJvdW5jZS10cmlnZ2VyXCJcbmV4cG9ydCBjb25zdCBUSFJPVFRMRUQgPSBcInRocm90dGxlZFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfUFJFVl9LRVkgPSBcImRlYm91bmNlLXByZXYta2V5XCJcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgZGVib3VuY2U6IDMwMCxcbiAgdGhyb3R0bGU6IDMwMFxufVxuXG4vLyBSZW5kZXJlZFxuZXhwb3J0IGNvbnN0IERZTkFNSUNTID0gXCJkXCJcbmV4cG9ydCBjb25zdCBTVEFUSUMgPSBcInNcIlxuZXhwb3J0IGNvbnN0IENPTVBPTkVOVFMgPSBcImNcIlxuZXhwb3J0IGNvbnN0IEVWRU5UUyA9IFwiZVwiXG5leHBvcnQgY29uc3QgUkVQTFkgPSBcInJcIlxuZXhwb3J0IGNvbnN0IFRJVExFID0gXCJ0XCJcbmV4cG9ydCBjb25zdCBURU1QTEFURVMgPSBcInBcIlxuZXhwb3J0IGNvbnN0IFNUUkVBTSA9IFwic3RyZWFtXCJcbiIsICJpbXBvcnQge1xuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudHJ5VXBsb2FkZXIge1xuICBjb25zdHJ1Y3RvcihlbnRyeSwgY2h1bmtTaXplLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG4gICAgdGhpcy5lbnRyeSA9IGVudHJ5XG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgdGhpcy5jaHVua1NpemUgPSBjaHVua1NpemVcbiAgICB0aGlzLmNodW5rVGltZXIgPSBudWxsXG4gICAgdGhpcy51cGxvYWRDaGFubmVsID0gbGl2ZVNvY2tldC5jaGFubmVsKGBsdnU6JHtlbnRyeS5yZWZ9YCwge3Rva2VuOiBlbnRyeS5tZXRhZGF0YSgpfSlcbiAgfVxuXG4gIGVycm9yKHJlYXNvbil7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY2h1bmtUaW1lcilcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwubGVhdmUoKVxuICAgIHRoaXMuZW50cnkuZXJyb3IocmVhc29uKVxuICB9XG5cbiAgdXBsb2FkKCl7XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwuam9pbigpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIF9kYXRhID0+IHRoaXMucmVhZE5leHRDaHVuaygpKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZWFzb24gPT4gdGhpcy5lcnJvcihyZWFzb24pKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLm9mZnNldCA+PSB0aGlzLmVudHJ5LmZpbGUuc2l6ZSB9XG5cbiAgcmVhZE5leHRDaHVuaygpe1xuICAgIGxldCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKVxuICAgIGxldCBibG9iID0gdGhpcy5lbnRyeS5maWxlLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmNodW5rU2l6ZSArIHRoaXMub2Zmc2V0KVxuICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgaWYoZS50YXJnZXQuZXJyb3IgPT09IG51bGwpe1xuICAgICAgICB0aGlzLm9mZnNldCArPSBlLnRhcmdldC5yZXN1bHQuYnl0ZUxlbmd0aFxuICAgICAgICB0aGlzLnB1c2hDaHVuayhlLnRhcmdldC5yZXN1bHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9nRXJyb3IoXCJSZWFkIGVycm9yOiBcIiArIGUudGFyZ2V0LmVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgfVxuXG4gIHB1c2hDaHVuayhjaHVuayl7XG4gICAgaWYoIXRoaXMudXBsb2FkQ2hhbm5lbC5pc0pvaW5lZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwucHVzaChcImNodW5rXCIsIGNodW5rKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZW50cnkucHJvZ3Jlc3MoKHRoaXMub2Zmc2V0IC8gdGhpcy5lbnRyeS5maWxlLnNpemUpICogMTAwKVxuICAgICAgICBpZighdGhpcy5pc0RvbmUoKSl7XG4gICAgICAgICAgdGhpcy5jaHVua1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSwgdGhpcy5saXZlU29ja2V0LmdldExhdGVuY3lTaW0oKSB8fCAwKVxuICAgICAgICB9XG4gICAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgUEhYX1ZJRVdfU0VMRUNUT1Jcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEVudHJ5VXBsb2FkZXIgZnJvbSBcIi4vZW50cnlfdXBsb2FkZXJcIlxuXG5leHBvcnQgbGV0IGxvZ0Vycm9yID0gKG1zZywgb2JqKSA9PiBjb25zb2xlLmVycm9yICYmIGNvbnNvbGUuZXJyb3IobXNnLCBvYmopXG5cbmV4cG9ydCBsZXQgaXNDaWQgPSAoY2lkKSA9PiB7XG4gIGxldCB0eXBlID0gdHlwZW9mKGNpZClcbiAgcmV0dXJuIHR5cGUgPT09IFwibnVtYmVyXCIgfHwgKHR5cGUgPT09IFwic3RyaW5nXCIgJiYgL14oMHxbMS05XVxcZCopJC8udGVzdChjaWQpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0RHVwbGljYXRlSWRzKCl7XG4gIGxldCBpZHMgPSBuZXcgU2V0KClcbiAgbGV0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipbaWRdXCIpXG4gIGZvcihsZXQgaSA9IDAsIGxlbiA9IGVsZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKXtcbiAgICBpZihpZHMuaGFzKGVsZW1zW2ldLmlkKSl7XG4gICAgICBjb25zb2xlLmVycm9yKGBNdWx0aXBsZSBJRHMgZGV0ZWN0ZWQ6ICR7ZWxlbXNbaV0uaWR9LiBFbnN1cmUgdW5pcXVlIGVsZW1lbnQgaWRzLmApXG4gICAgfSBlbHNlIHtcbiAgICAgIGlkcy5hZGQoZWxlbXNbaV0uaWQpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBsZXQgZGVidWcgPSAodmlldywga2luZCwgbXNnLCBvYmopID0+IHtcbiAgaWYodmlldy5saXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpe1xuICAgIGNvbnNvbGUubG9nKGAke3ZpZXcuaWR9ICR7a2luZH06ICR7bXNnfSAtIGAsIG9iailcbiAgfVxufVxuXG4vLyB3cmFwcyB2YWx1ZSBpbiBjbG9zdXJlIG9yIHJldHVybnMgY2xvc3VyZVxuZXhwb3J0IGxldCBjbG9zdXJlID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiID8gdmFsIDogZnVuY3Rpb24gKCl7IHJldHVybiB2YWwgfVxuXG5leHBvcnQgbGV0IGNsb25lID0gKG9iaikgPT4geyByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKSB9XG5cbmV4cG9ydCBsZXQgY2xvc2VzdFBoeEJpbmRpbmcgPSAoZWwsIGJpbmRpbmcsIGJvcmRlckVsKSA9PiB7XG4gIGRvIHtcbiAgICBpZihlbC5tYXRjaGVzKGBbJHtiaW5kaW5nfV1gKSAmJiAhZWwuZGlzYWJsZWQpeyByZXR1cm4gZWwgfVxuICAgIGVsID0gZWwucGFyZW50RWxlbWVudCB8fCBlbC5wYXJlbnROb2RlXG4gIH0gd2hpbGUoZWwgIT09IG51bGwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgISgoYm9yZGVyRWwgJiYgYm9yZGVyRWwuaXNTYW1lTm9kZShlbCkpIHx8IGVsLm1hdGNoZXMoUEhYX1ZJRVdfU0VMRUNUT1IpKSlcbiAgcmV0dXJuIG51bGxcbn1cblxuZXhwb3J0IGxldCBpc09iamVjdCA9IChvYmopID0+IHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmICEob2JqIGluc3RhbmNlb2YgQXJyYXkpXG59XG5cbmV4cG9ydCBsZXQgaXNFcXVhbE9iaiA9IChvYmoxLCBvYmoyKSA9PiBKU09OLnN0cmluZ2lmeShvYmoxKSA9PT0gSlNPTi5zdHJpbmdpZnkob2JqMilcblxuZXhwb3J0IGxldCBpc0VtcHR5ID0gKG9iaikgPT4ge1xuICBmb3IobGV0IHggaW4gb2JqKXsgcmV0dXJuIGZhbHNlIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGxldCBtYXliZSA9IChlbCwgY2FsbGJhY2spID0+IGVsICYmIGNhbGxiYWNrKGVsKVxuXG5leHBvcnQgbGV0IGNoYW5uZWxVcGxvYWRlciA9IGZ1bmN0aW9uIChlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KXtcbiAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICBsZXQgZW50cnlVcGxvYWRlciA9IG5ldyBFbnRyeVVwbG9hZGVyKGVudHJ5LCByZXNwLmNvbmZpZy5jaHVua19zaXplLCBsaXZlU29ja2V0KVxuICAgIGVudHJ5VXBsb2FkZXIudXBsb2FkKClcbiAgfSlcbn1cbiIsICJsZXQgQnJvd3NlciA9IHtcbiAgY2FuUHVzaFN0YXRlKCl7IHJldHVybiAodHlwZW9mIChoaXN0b3J5LnB1c2hTdGF0ZSkgIT09IFwidW5kZWZpbmVkXCIpIH0sXG5cbiAgZHJvcExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpe1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmxvY2FsS2V5KG5hbWVzcGFjZSwgc3Via2V5KSlcbiAgfSxcblxuICB1cGRhdGVMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5LCBpbml0aWFsLCBmdW5jKXtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMuZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSlcbiAgICBsZXQga2V5ID0gdGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSlcbiAgICBsZXQgbmV3VmFsID0gY3VycmVudCA9PT0gbnVsbCA/IGluaXRpYWwgOiBmdW5jKGN1cnJlbnQpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShuZXdWYWwpKVxuICAgIHJldHVybiBuZXdWYWxcbiAgfSxcblxuICBnZXRMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmxvY2FsS2V5KG5hbWVzcGFjZSwgc3Via2V5KSkpXG4gIH0sXG5cbiAgdXBkYXRlQ3VycmVudFN0YXRlKGNhbGxiYWNrKXtcbiAgICBpZighdGhpcy5jYW5QdXNoU3RhdGUoKSl7IHJldHVybiB9XG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoY2FsbGJhY2soaGlzdG9yeS5zdGF0ZSB8fCB7fSksIFwiXCIsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICB9LFxuXG4gIHB1c2hTdGF0ZShraW5kLCBtZXRhLCB0byl7XG4gICAgaWYodGhpcy5jYW5QdXNoU3RhdGUoKSl7XG4gICAgICBpZih0byAhPT0gd2luZG93LmxvY2F0aW9uLmhyZWYpe1xuICAgICAgICBpZihtZXRhLnR5cGUgPT0gXCJyZWRpcmVjdFwiICYmIG1ldGEuc2Nyb2xsKXtcbiAgICAgICAgICAvLyBJZiB3ZSdyZSByZWRpcmVjdGluZyBzdG9yZSB0aGUgY3VycmVudCBzY3JvbGxZIGZvciB0aGUgY3VycmVudCBoaXN0b3J5IHN0YXRlLlxuICAgICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSBoaXN0b3J5LnN0YXRlIHx8IHt9XG4gICAgICAgICAgY3VycmVudFN0YXRlLnNjcm9sbCA9IG1ldGEuc2Nyb2xsXG4gICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoY3VycmVudFN0YXRlLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBtZXRhLnNjcm9sbCAvLyBPbmx5IHN0b3JlIHRoZSBzY3JvbGwgaW4gdGhlIHJlZGlyZWN0IGNhc2UuXG4gICAgICAgIGhpc3Rvcnlba2luZCArIFwiU3RhdGVcIl0obWV0YSwgXCJcIiwgdG8gfHwgbnVsbCkgLy8gSUUgd2lsbCBjb2VyY2UgdW5kZWZpbmVkIHRvIHN0cmluZ1xuICAgICAgICBsZXQgaGFzaEVsID0gdGhpcy5nZXRIYXNoVGFyZ2V0RWwod2luZG93LmxvY2F0aW9uLmhhc2gpXG5cbiAgICAgICAgaWYoaGFzaEVsKXtcbiAgICAgICAgICBoYXNoRWwuc2Nyb2xsSW50b1ZpZXcoKVxuICAgICAgICB9IGVsc2UgaWYobWV0YS50eXBlID09PSBcInJlZGlyZWN0XCIpe1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGwoMCwgMClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZGlyZWN0KHRvKVxuICAgIH1cbiAgfSxcblxuICBzZXRDb29raWUobmFtZSwgdmFsdWUpe1xuICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke25hbWV9PSR7dmFsdWV9YFxuICB9LFxuXG4gIGdldENvb2tpZShuYW1lKXtcbiAgICByZXR1cm4gZG9jdW1lbnQuY29va2llLnJlcGxhY2UobmV3IFJlZ0V4cChgKD86KD86XnwuKjtcXHMqKSR7bmFtZX1cXHMqXFw9XFxzKihbXjtdKikuKiQpfF4uKiRgKSwgXCIkMVwiKVxuICB9LFxuXG4gIHJlZGlyZWN0KHRvVVJMLCBmbGFzaCl7XG4gICAgaWYoZmxhc2gpeyBCcm93c2VyLnNldENvb2tpZShcIl9fcGhvZW5peF9mbGFzaF9fXCIsIGZsYXNoICsgXCI7IG1heC1hZ2U9NjAwMDA7IHBhdGg9L1wiKSB9XG4gICAgd2luZG93LmxvY2F0aW9uID0gdG9VUkxcbiAgfSxcblxuICBsb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSl7IHJldHVybiBgJHtuYW1lc3BhY2V9LSR7c3Via2V5fWAgfSxcblxuICBnZXRIYXNoVGFyZ2V0RWwobWF5YmVIYXNoKXtcbiAgICBsZXQgaGFzaCA9IG1heWJlSGFzaC50b1N0cmluZygpLnN1YnN0cmluZygxKVxuICAgIGlmKGhhc2ggPT09IFwiXCIpeyByZXR1cm4gfVxuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBhW25hbWU9XCIke2hhc2h9XCJdYClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCcm93c2VyXG4iLCAiaW1wb3J0IHtcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgREVCT1VOQ0VfUFJFVl9LRVksXG4gIERFQk9VTkNFX1RSSUdHRVIsXG4gIEZPQ1VTQUJMRV9JTlBVVFMsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9FVkVOVF9DTEFTU0VTLFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9IQVNfU1VCTUlUVEVELFxuICBQSFhfTUFJTixcbiAgUEhYX05PX0ZFRURCQUNLX0NMQVNTLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfUFJJVkFURSxcbiAgUEhYX1JFRixcbiAgUEhYX1JFRl9TUkMsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1VQTE9BRF9SRUYsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfU1RJQ0tZLFxuICBUSFJPVFRMRURcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5sZXQgRE9NID0ge1xuICBieUlkKGlkKXsgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSB8fCBsb2dFcnJvcihgbm8gaWQgZm91bmQgZm9yICR7aWR9YCkgfSxcblxuICByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKXtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcbiAgICBpZihlbC5jbGFzc0xpc3QubGVuZ3RoID09PSAwKXsgZWwucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIikgfVxuICB9LFxuXG4gIGFsbChub2RlLCBxdWVyeSwgY2FsbGJhY2spe1xuICAgIGlmKCFub2RlKXsgcmV0dXJuIFtdIH1cbiAgICBsZXQgYXJyYXkgPSBBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpXG4gICAgcmV0dXJuIGNhbGxiYWNrID8gYXJyYXkuZm9yRWFjaChjYWxsYmFjaykgOiBhcnJheVxuICB9LFxuXG4gIGNoaWxkTm9kZUxlbmd0aChodG1sKXtcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRFbGVtZW50Q291bnRcbiAgfSxcblxuICBpc1VwbG9hZElucHV0KGVsKXsgcmV0dXJuIGVsLnR5cGUgPT09IFwiZmlsZVwiICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikgIT09IG51bGwgfSxcblxuICBmaW5kVXBsb2FkSW5wdXRzKG5vZGUpeyByZXR1cm4gdGhpcy5hbGwobm9kZSwgYGlucHV0W3R5cGU9XCJmaWxlXCJdWyR7UEhYX1VQTE9BRF9SRUZ9XWApIH0sXG5cbiAgZmluZENvbXBvbmVudE5vZGVMaXN0KG5vZGUsIGNpZCl7XG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KHRoaXMuYWxsKG5vZGUsIGBbJHtQSFhfQ09NUE9ORU5UfT1cIiR7Y2lkfVwiXWApLCBub2RlKVxuICB9LFxuXG4gIGlzUGh4RGVzdHJveWVkKG5vZGUpe1xuICAgIHJldHVybiBub2RlLmlkICYmIERPTS5wcml2YXRlKG5vZGUsIFwiZGVzdHJveWVkXCIpID8gdHJ1ZSA6IGZhbHNlXG4gIH0sXG5cbiAgd2FudHNOZXdUYWIoZSl7XG4gICAgbGV0IHdhbnRzTmV3VGFiID0gZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5tZXRhS2V5IHx8IChlLmJ1dHRvbiAmJiBlLmJ1dHRvbiA9PT0gMSlcbiAgICBsZXQgaXNEb3dubG9hZCA9IChlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50ICYmIGUudGFyZ2V0Lmhhc0F0dHJpYnV0ZShcImRvd25sb2FkXCIpKVxuICAgIGxldCBpc1RhcmdldEJsYW5rID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpID09PSBcIl9ibGFua1wiXG4gICAgcmV0dXJuIHdhbnRzTmV3VGFiIHx8IGlzVGFyZ2V0QmxhbmsgfHwgaXNEb3dubG9hZFxuICB9LFxuXG4gIGlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSl7XG4gICAgcmV0dXJuICFlLmRlZmF1bHRQcmV2ZW50ZWQgJiYgIXRoaXMud2FudHNOZXdUYWIoZSlcbiAgfSxcblxuICBpc05ld1BhZ2VIcmVmKGhyZWYsIGN1cnJlbnRMb2NhdGlvbil7XG4gICAgaWYoaHJlZi5zdGFydHNXaXRoKFwibWFpbHRvOlwiKSB8fCBocmVmLnN0YXJ0c1dpdGgoXCJ0ZWw6XCIpKXsgcmV0dXJuIGZhbHNlIH1cblxuICAgIGxldCB1cmxcbiAgICB0cnkge1xuICAgICAgdXJsID0gbmV3IFVSTChocmVmKVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdXJsID0gbmV3IFVSTChocmVmLCBjdXJyZW50TG9jYXRpb24pXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgLy8gYmFkIFVSTCwgZmFsbGJhY2sgdG8gbGV0IGJyb3dzZXIgdHJ5IGl0IGFzIGV4dGVybmFsXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYodXJsLmhvc3QgPT09IGN1cnJlbnRMb2NhdGlvbi5ob3N0ICYmIHVybC5wcm90b2NvbCA9PT0gY3VycmVudExvY2F0aW9uLnByb3RvY29sKXtcbiAgICAgIGlmKHVybC5wYXRobmFtZSA9PT0gY3VycmVudExvY2F0aW9uLnBhdGhuYW1lICYmIHVybC5zZWFyY2ggPT09IGN1cnJlbnRMb2NhdGlvbi5zZWFyY2gpe1xuICAgICAgICByZXR1cm4gdXJsLmhhc2ggPT09IFwiXCIgJiYgIXVybC5ocmVmLmVuZHNXaXRoKFwiI1wiKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxuXG4gIG1hcmtQaHhDaGlsZERlc3Ryb3llZChlbCl7XG4gICAgaWYodGhpcy5pc1BoeENoaWxkKGVsKSl7IGVsLnNldEF0dHJpYnV0ZShQSFhfU0VTU0lPTiwgXCJcIikgfVxuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwgXCJkZXN0cm95ZWRcIiwgdHJ1ZSlcbiAgfSxcblxuICBmaW5kUGh4Q2hpbGRyZW5JbkZyYWdtZW50KGh0bWwsIHBhcmVudElkKXtcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgcmV0dXJuIHRoaXMuZmluZFBoeENoaWxkcmVuKHRlbXBsYXRlLmNvbnRlbnQsIHBhcmVudElkKVxuICB9LFxuXG4gIGlzSWdub3JlZChlbCwgcGh4VXBkYXRlKXtcbiAgICByZXR1cm4gKGVsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpIHx8IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtcGh4LXVwZGF0ZVwiKSkgPT09IFwiaWdub3JlXCJcbiAgfSxcblxuICBpc1BoeFVwZGF0ZShlbCwgcGh4VXBkYXRlLCB1cGRhdGVUeXBlcyl7XG4gICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSAmJiB1cGRhdGVUeXBlcy5pbmRleE9mKGVsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpKSA+PSAwXG4gIH0sXG5cbiAgZmluZFBoeFN0aWNreShlbCl7IHJldHVybiB0aGlzLmFsbChlbCwgYFske1BIWF9TVElDS1l9XWApIH0sXG5cbiAgZmluZFBoeENoaWxkcmVuKGVsLCBwYXJlbnRJZCl7XG4gICAgcmV0dXJuIHRoaXMuYWxsKGVsLCBgJHtQSFhfVklFV19TRUxFQ1RPUn1bJHtQSFhfUEFSRU5UX0lEfT1cIiR7cGFyZW50SWR9XCJdYClcbiAgfSxcblxuICBmaW5kUGFyZW50Q0lEcyhub2RlLCBjaWRzKXtcbiAgICBsZXQgaW5pdGlhbCA9IG5ldyBTZXQoY2lkcylcbiAgICBsZXQgcGFyZW50Q2lkcyA9XG4gICAgICBjaWRzLnJlZHVjZSgoYWNjLCBjaWQpID0+IHtcbiAgICAgICAgbGV0IHNlbGVjdG9yID0gYFske1BIWF9DT01QT05FTlR9PVwiJHtjaWR9XCJdIFske1BIWF9DT01QT05FTlR9XWBcblxuICAgICAgICB0aGlzLmZpbHRlcldpdGhpblNhbWVMaXZlVmlldyh0aGlzLmFsbChub2RlLCBzZWxlY3RvciksIG5vZGUpXG4gICAgICAgICAgLm1hcChlbCA9PiBwYXJzZUludChlbC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkpKVxuICAgICAgICAgIC5mb3JFYWNoKGNoaWxkQ0lEID0+IGFjYy5kZWxldGUoY2hpbGRDSUQpKVxuXG4gICAgICAgIHJldHVybiBhY2NcbiAgICAgIH0sIGluaXRpYWwpXG5cbiAgICByZXR1cm4gcGFyZW50Q2lkcy5zaXplID09PSAwID8gbmV3IFNldChjaWRzKSA6IHBhcmVudENpZHNcbiAgfSxcblxuICBmaWx0ZXJXaXRoaW5TYW1lTGl2ZVZpZXcobm9kZXMsIHBhcmVudCl7XG4gICAgaWYocGFyZW50LnF1ZXJ5U2VsZWN0b3IoUEhYX1ZJRVdfU0VMRUNUT1IpKXtcbiAgICAgIHJldHVybiBub2Rlcy5maWx0ZXIoZWwgPT4gdGhpcy53aXRoaW5TYW1lTGl2ZVZpZXcoZWwsIHBhcmVudCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub2Rlc1xuICAgIH1cbiAgfSxcblxuICB3aXRoaW5TYW1lTGl2ZVZpZXcobm9kZSwgcGFyZW50KXtcbiAgICB3aGlsZShub2RlID0gbm9kZS5wYXJlbnROb2RlKXtcbiAgICAgIGlmKG5vZGUuaXNTYW1lTm9kZShwYXJlbnQpKXsgcmV0dXJuIHRydWUgfVxuICAgICAgaWYobm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pICE9PSBudWxsKXsgcmV0dXJuIGZhbHNlIH1cbiAgICB9XG4gIH0sXG5cbiAgcHJpdmF0ZShlbCwga2V5KXsgcmV0dXJuIGVsW1BIWF9QUklWQVRFXSAmJiBlbFtQSFhfUFJJVkFURV1ba2V5XSB9LFxuXG4gIGRlbGV0ZVByaXZhdGUoZWwsIGtleSl7IGVsW1BIWF9QUklWQVRFXSAmJiBkZWxldGUgKGVsW1BIWF9QUklWQVRFXVtrZXldKSB9LFxuXG4gIHB1dFByaXZhdGUoZWwsIGtleSwgdmFsdWUpe1xuICAgIGlmKCFlbFtQSFhfUFJJVkFURV0peyBlbFtQSFhfUFJJVkFURV0gPSB7fSB9XG4gICAgZWxbUEhYX1BSSVZBVEVdW2tleV0gPSB2YWx1ZVxuICB9LFxuXG4gIHVwZGF0ZVByaXZhdGUoZWwsIGtleSwgZGVmYXVsdFZhbCwgdXBkYXRlRnVuYyl7XG4gICAgbGV0IGV4aXN0aW5nID0gdGhpcy5wcml2YXRlKGVsLCBrZXkpXG4gICAgaWYoZXhpc3RpbmcgPT09IHVuZGVmaW5lZCl7XG4gICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgdXBkYXRlRnVuYyhkZWZhdWx0VmFsKSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIHVwZGF0ZUZ1bmMoZXhpc3RpbmcpKVxuICAgIH1cbiAgfSxcblxuICBjb3B5UHJpdmF0ZXModGFyZ2V0LCBzb3VyY2Upe1xuICAgIGlmKHNvdXJjZVtQSFhfUFJJVkFURV0pe1xuICAgICAgdGFyZ2V0W1BIWF9QUklWQVRFXSA9IHNvdXJjZVtQSFhfUFJJVkFURV1cbiAgICB9XG4gIH0sXG5cbiAgcHV0VGl0bGUoc3RyKXtcbiAgICBsZXQgdGl0bGVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ0aXRsZVwiKVxuICAgIGlmKHRpdGxlRWwpe1xuICAgICAgbGV0IHtwcmVmaXgsIHN1ZmZpeH0gPSB0aXRsZUVsLmRhdGFzZXRcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gYCR7cHJlZml4IHx8IFwiXCJ9JHtzdHJ9JHtzdWZmaXggfHwgXCJcIn1gXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gc3RyXG4gICAgfVxuICB9LFxuXG4gIGRlYm91bmNlKGVsLCBldmVudCwgcGh4RGVib3VuY2UsIGRlZmF1bHREZWJvdW5jZSwgcGh4VGhyb3R0bGUsIGRlZmF1bHRUaHJvdHRsZSwgYXN5bmNGaWx0ZXIsIGNhbGxiYWNrKXtcbiAgICBsZXQgZGVib3VuY2UgPSBlbC5nZXRBdHRyaWJ1dGUocGh4RGVib3VuY2UpXG4gICAgbGV0IHRocm90dGxlID0gZWwuZ2V0QXR0cmlidXRlKHBoeFRocm90dGxlKVxuXG4gICAgaWYoZGVib3VuY2UgPT09IFwiXCIpeyBkZWJvdW5jZSA9IGRlZmF1bHREZWJvdW5jZSB9XG4gICAgaWYodGhyb3R0bGUgPT09IFwiXCIpeyB0aHJvdHRsZSA9IGRlZmF1bHRUaHJvdHRsZSB9XG4gICAgbGV0IHZhbHVlID0gZGVib3VuY2UgfHwgdGhyb3R0bGVcbiAgICBzd2l0Y2godmFsdWUpe1xuICAgICAgY2FzZSBudWxsOiByZXR1cm4gY2FsbGJhY2soKVxuXG4gICAgICBjYXNlIFwiYmx1clwiOlxuICAgICAgICBpZih0aGlzLm9uY2UoZWwsIFwiZGVib3VuY2UtYmx1clwiKSl7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCkgPT4gY2FsbGJhY2soKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbGV0IHRpbWVvdXQgPSBwYXJzZUludCh2YWx1ZSlcbiAgICAgICAgbGV0IHRyaWdnZXIgPSAoKSA9PiB0aHJvdHRsZSA/IHRoaXMuZGVsZXRlUHJpdmF0ZShlbCwgVEhST1RUTEVEKSA6IGNhbGxiYWNrKClcbiAgICAgICAgbGV0IGN1cnJlbnRDeWNsZSA9IHRoaXMuaW5jQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIsIHRyaWdnZXIpXG4gICAgICAgIGlmKGlzTmFOKHRpbWVvdXQpKXsgcmV0dXJuIGxvZ0Vycm9yKGBpbnZhbGlkIHRocm90dGxlL2RlYm91bmNlIHZhbHVlOiAke3ZhbHVlfWApIH1cbiAgICAgICAgaWYodGhyb3R0bGUpe1xuICAgICAgICAgIGxldCBuZXdLZXlEb3duID0gZmFsc2VcbiAgICAgICAgICBpZihldmVudC50eXBlID09PSBcImtleWRvd25cIil7XG4gICAgICAgICAgICBsZXQgcHJldktleSA9IHRoaXMucHJpdmF0ZShlbCwgREVCT1VOQ0VfUFJFVl9LRVkpXG4gICAgICAgICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIERFQk9VTkNFX1BSRVZfS0VZLCBldmVudC5rZXkpXG4gICAgICAgICAgICBuZXdLZXlEb3duID0gcHJldktleSAhPT0gZXZlbnQua2V5XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoIW5ld0tleURvd24gJiYgdGhpcy5wcml2YXRlKGVsLCBUSFJPVFRMRUQpKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICB0aGlzLnB1dFByaXZhdGUoZWwsIFRIUk9UVExFRCwgdHJ1ZSlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZihhc3luY0ZpbHRlcigpKXsgdGhpcy50cmlnZ2VyQ3ljbGUoZWwsIERFQk9VTkNFX1RSSUdHRVIpIH1cbiAgICAgICAgICAgIH0sIHRpbWVvdXQpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSLCBjdXJyZW50Q3ljbGUpIH1cbiAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZvcm0gPSBlbC5mb3JtXG4gICAgICAgIGlmKGZvcm0gJiYgdGhpcy5vbmNlKGZvcm0sIFwiYmluZC1kZWJvdW5jZVwiKSl7XG4gICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oKG5ldyBGb3JtRGF0YShmb3JtKSkuZW50cmllcygpLCAoW25hbWVdKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBpbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgW25hbWU9XCIke25hbWV9XCJdYClcbiAgICAgICAgICAgICAgdGhpcy5pbmNDeWNsZShpbnB1dCwgREVCT1VOQ0VfVFJJR0dFUilcbiAgICAgICAgICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBUSFJPVFRMRUQpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImJpbmQtZGVib3VuY2VcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSKSlcbiAgICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB0cmlnZ2VyQ3ljbGUoZWwsIGtleSwgY3VycmVudEN5Y2xlKXtcbiAgICBsZXQgW2N5Y2xlLCB0cmlnZ2VyXSA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKCFjdXJyZW50Q3ljbGUpeyBjdXJyZW50Q3ljbGUgPSBjeWNsZSB9XG4gICAgaWYoY3VycmVudEN5Y2xlID09PSBjeWNsZSl7XG4gICAgICB0aGlzLmluY0N5Y2xlKGVsLCBrZXkpXG4gICAgICB0cmlnZ2VyKClcbiAgICB9XG4gIH0sXG5cbiAgb25jZShlbCwga2V5KXtcbiAgICBpZih0aGlzLnByaXZhdGUoZWwsIGtleSkgPT09IHRydWUpeyByZXR1cm4gZmFsc2UgfVxuICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB0cnVlKVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG5cbiAgaW5jQ3ljbGUoZWwsIGtleSwgdHJpZ2dlciA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBsZXQgW2N1cnJlbnRDeWNsZV0gPSB0aGlzLnByaXZhdGUoZWwsIGtleSkgfHwgWzAsIHRyaWdnZXJdXG4gICAgY3VycmVudEN5Y2xlKytcbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgW2N1cnJlbnRDeWNsZSwgdHJpZ2dlcl0pXG4gICAgcmV0dXJuIGN1cnJlbnRDeWNsZVxuICB9LFxuXG4gIG1heWJlQWRkUHJpdmF0ZUhvb2tzKGVsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pe1xuICAgIGlmKGVsLmhhc0F0dHJpYnV0ZSAmJiAoZWwuaGFzQXR0cmlidXRlKHBoeFZpZXdwb3J0VG9wKSB8fCBlbC5oYXNBdHRyaWJ1dGUocGh4Vmlld3BvcnRCb3R0b20pKSl7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1ob29rXCIsIFwiUGhvZW5peC5JbmZpbml0ZVNjcm9sbFwiKVxuICAgIH1cbiAgfSxcblxuICBtYXliZUhpZGVGZWVkYmFjayhjb250YWluZXIsIGlucHV0LCBwaHhGZWVkYmFja0Zvcil7XG4gICAgaWYoISh0aGlzLnByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRCkgfHwgdGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCkpKXtcbiAgICAgIGxldCBmZWVkYmFja3MgPSBbaW5wdXQubmFtZV1cbiAgICAgIGlmKGlucHV0Lm5hbWUuZW5kc1dpdGgoXCJbXVwiKSl7IGZlZWRiYWNrcy5wdXNoKGlucHV0Lm5hbWUuc2xpY2UoMCwgLTIpKSB9XG4gICAgICBsZXQgc2VsZWN0b3IgPSBmZWVkYmFja3MubWFwKGYgPT4gYFske3BoeEZlZWRiYWNrRm9yfT1cIiR7Zn1cIl1gKS5qb2luKFwiLCBcIilcbiAgICAgIERPTS5hbGwoY29udGFpbmVyLCBzZWxlY3RvciwgZWwgPT4gZWwuY2xhc3NMaXN0LmFkZChQSFhfTk9fRkVFREJBQ0tfQ0xBU1MpKVxuICAgIH1cbiAgfSxcblxuICByZXNldEZvcm0oZm9ybSwgcGh4RmVlZGJhY2tGb3Ipe1xuICAgIEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBsZXQgcXVlcnkgPSBgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5pZH1cIl0sXG4gICAgICAgICAgICAgICAgICAgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5uYW1lfVwiXSxcbiAgICAgICAgICAgICAgICAgICBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0Lm5hbWUucmVwbGFjZSgvXFxbXFxdJC8sIFwiXCIpfVwiXWBcblxuICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQpXG4gICAgICB0aGlzLmRlbGV0ZVByaXZhdGUoaW5wdXQsIFBIWF9IQVNfU1VCTUlUVEVEKVxuICAgICAgdGhpcy5hbGwoZG9jdW1lbnQsIHF1ZXJ5LCBmZWVkYmFja0VsID0+IHtcbiAgICAgICAgZmVlZGJhY2tFbC5jbGFzc0xpc3QuYWRkKFBIWF9OT19GRUVEQkFDS19DTEFTUylcbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBzaG93RXJyb3IoaW5wdXRFbCwgcGh4RmVlZGJhY2tGb3Ipe1xuICAgIGlmKGlucHV0RWwuaWQgfHwgaW5wdXRFbC5uYW1lKXtcbiAgICAgIHRoaXMuYWxsKGlucHV0RWwuZm9ybSwgYFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXRFbC5pZH1cIl0sIFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXRFbC5uYW1lfVwiXWAsIChlbCkgPT4ge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKGVsLCBQSFhfTk9fRkVFREJBQ0tfQ0xBU1MpXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBpc1BoeENoaWxkKG5vZGUpe1xuICAgIHJldHVybiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShQSFhfUEFSRU5UX0lEKVxuICB9LFxuXG4gIGlzUGh4U3RpY2t5KG5vZGUpe1xuICAgIHJldHVybiBub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZShQSFhfU1RJQ0tZKSAhPT0gbnVsbFxuICB9LFxuXG4gIGZpcnN0UGh4Q2hpbGQoZWwpe1xuICAgIHJldHVybiB0aGlzLmlzUGh4Q2hpbGQoZWwpID8gZWwgOiB0aGlzLmFsbChlbCwgYFske1BIWF9QQVJFTlRfSUR9XWApWzBdXG4gIH0sXG5cbiAgZGlzcGF0Y2hFdmVudCh0YXJnZXQsIG5hbWUsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGJ1YmJsZXMgPSBvcHRzLmJ1YmJsZXMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiAhIW9wdHMuYnViYmxlc1xuICAgIGxldCBldmVudE9wdHMgPSB7YnViYmxlczogYnViYmxlcywgY2FuY2VsYWJsZTogdHJ1ZSwgZGV0YWlsOiBvcHRzLmRldGFpbCB8fCB7fX1cbiAgICBsZXQgZXZlbnQgPSBuYW1lID09PSBcImNsaWNrXCIgPyBuZXcgTW91c2VFdmVudChcImNsaWNrXCIsIGV2ZW50T3B0cykgOiBuZXcgQ3VzdG9tRXZlbnQobmFtZSwgZXZlbnRPcHRzKVxuICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KVxuICB9LFxuXG4gIGNsb25lTm9kZShub2RlLCBodG1sKXtcbiAgICBpZih0eXBlb2YgKGh0bWwpID09PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZSh0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY2xvbmVkID0gbm9kZS5jbG9uZU5vZGUoZmFsc2UpXG4gICAgICBjbG9uZWQuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgcmV0dXJuIGNsb25lZFxuICAgIH1cbiAgfSxcblxuICBtZXJnZUF0dHJzKHRhcmdldCwgc291cmNlLCBvcHRzID0ge30pe1xuICAgIGxldCBleGNsdWRlID0gb3B0cy5leGNsdWRlIHx8IFtdXG4gICAgbGV0IGlzSWdub3JlZCA9IG9wdHMuaXNJZ25vcmVkXG4gICAgbGV0IHNvdXJjZUF0dHJzID0gc291cmNlLmF0dHJpYnV0ZXNcbiAgICBmb3IobGV0IGkgPSBzb3VyY2VBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG4gICAgICBsZXQgbmFtZSA9IHNvdXJjZUF0dHJzW2ldLm5hbWVcbiAgICAgIGlmKGV4Y2x1ZGUuaW5kZXhPZihuYW1lKSA8IDApeyB0YXJnZXQuc2V0QXR0cmlidXRlKG5hbWUsIHNvdXJjZS5nZXRBdHRyaWJ1dGUobmFtZSkpIH1cbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0QXR0cnMgPSB0YXJnZXQuYXR0cmlidXRlc1xuICAgIGZvcihsZXQgaSA9IHRhcmdldEF0dHJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgIGxldCBuYW1lID0gdGFyZ2V0QXR0cnNbaV0ubmFtZVxuICAgICAgaWYoaXNJZ25vcmVkKXtcbiAgICAgICAgaWYobmFtZS5zdGFydHNXaXRoKFwiZGF0YS1cIikgJiYgIXNvdXJjZS5oYXNBdHRyaWJ1dGUobmFtZSkpeyB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKG5hbWUpIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKCFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG1lcmdlRm9jdXNlZElucHV0KHRhcmdldCwgc291cmNlKXtcbiAgICAvLyBza2lwIHNlbGVjdHMgYmVjYXVzZSBGRiB3aWxsIHJlc2V0IGhpZ2hsaWdodGVkIGluZGV4IGZvciBhbnkgc2V0QXR0cmlidXRlXG4gICAgaWYoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCkpeyBET00ubWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwge2V4Y2x1ZGU6IFtcInZhbHVlXCJdfSkgfVxuICAgIGlmKHNvdXJjZS5yZWFkT25seSl7XG4gICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgdHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpXG4gICAgfVxuICB9LFxuXG4gIGhhc1NlbGVjdGlvblJhbmdlKGVsKXtcbiAgICByZXR1cm4gZWwuc2V0U2VsZWN0aW9uUmFuZ2UgJiYgKGVsLnR5cGUgPT09IFwidGV4dFwiIHx8IGVsLnR5cGUgPT09IFwidGV4dGFyZWFcIilcbiAgfSxcblxuICByZXN0b3JlRm9jdXMoZm9jdXNlZCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCl7XG4gICAgaWYoIURPTS5pc1RleHR1YWxJbnB1dChmb2N1c2VkKSl7IHJldHVybiB9XG4gICAgbGV0IHdhc0ZvY3VzZWQgPSBmb2N1c2VkLm1hdGNoZXMoXCI6Zm9jdXNcIilcbiAgICBpZihmb2N1c2VkLnJlYWRPbmx5KXsgZm9jdXNlZC5ibHVyKCkgfVxuICAgIGlmKCF3YXNGb2N1c2VkKXsgZm9jdXNlZC5mb2N1cygpIH1cbiAgICBpZih0aGlzLmhhc1NlbGVjdGlvblJhbmdlKGZvY3VzZWQpKXtcbiAgICAgIGZvY3VzZWQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZClcbiAgICB9XG4gIH0sXG5cbiAgaXNGb3JtSW5wdXQoZWwpeyByZXR1cm4gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pLnRlc3QoZWwudGFnTmFtZSkgJiYgZWwudHlwZSAhPT0gXCJidXR0b25cIiB9LFxuXG4gIHN5bmNBdHRyc1RvUHJvcHMoZWwpe1xuICAgIGlmKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJiBDSEVDS0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgIGVsLmNoZWNrZWQgPSBlbC5nZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIpICE9PSBudWxsXG4gICAgfVxuICB9LFxuXG4gIGlzVGV4dHVhbElucHV0KGVsKXsgcmV0dXJuIEZPQ1VTQUJMRV9JTlBVVFMuaW5kZXhPZihlbC50eXBlKSA+PSAwIH0sXG5cbiAgaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpe1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKHBoeFRyaWdnZXJFeHRlcm5hbCkgIT09IG51bGxcbiAgfSxcblxuICBzeW5jUGVuZGluZ1JlZihmcm9tRWwsIHRvRWwsIGRpc2FibGVXaXRoKXtcbiAgICBsZXQgcmVmID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfUkVGKVxuICAgIGlmKHJlZiA9PT0gbnVsbCl7IHJldHVybiB0cnVlIH1cbiAgICBsZXQgcmVmU3JjID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfUkVGX1NSQylcblxuICAgIGlmKERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpIHx8IGZyb21FbC5nZXRBdHRyaWJ1dGUoZGlzYWJsZVdpdGgpICE9PSBudWxsKXtcbiAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpeyBET00ubWVyZ2VBdHRycyhmcm9tRWwsIHRvRWwsIHtpc0lnbm9yZWQ6IHRydWV9KSB9XG4gICAgICBET00ucHV0UHJpdmF0ZShmcm9tRWwsIFBIWF9SRUYsIHRvRWwpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgUEhYX0VWRU5UX0NMQVNTRVMuZm9yRWFjaChjbGFzc05hbWUgPT4ge1xuICAgICAgICBmcm9tRWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgJiYgdG9FbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSlcbiAgICAgIH0pXG4gICAgICB0b0VsLnNldEF0dHJpYnV0ZShQSFhfUkVGLCByZWYpXG4gICAgICB0b0VsLnNldEF0dHJpYnV0ZShQSFhfUkVGX1NSQywgcmVmU3JjKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH0sXG5cbiAgY2xlYW5DaGlsZE5vZGVzKGNvbnRhaW5lciwgcGh4VXBkYXRlKXtcbiAgICBpZihET00uaXNQaHhVcGRhdGUoY29udGFpbmVyLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgIGxldCB0b1JlbW92ZSA9IFtdXG4gICAgICBjb250YWluZXIuY2hpbGROb2Rlcy5mb3JFYWNoKGNoaWxkTm9kZSA9PiB7XG4gICAgICAgIGlmKCFjaGlsZE5vZGUuaWQpe1xuICAgICAgICAgIC8vIFNraXAgd2FybmluZyBpZiBpdCdzIGFuIGVtcHR5IHRleHQgbm9kZSAoZS5nLiBhIG5ldy1saW5lKVxuICAgICAgICAgIGxldCBpc0VtcHR5VGV4dE5vZGUgPSBjaGlsZE5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIGNoaWxkTm9kZS5ub2RlVmFsdWUudHJpbSgpID09PSBcIlwiXG4gICAgICAgICAgaWYoIWlzRW1wdHlUZXh0Tm9kZSl7XG4gICAgICAgICAgICBsb2dFcnJvcihcIm9ubHkgSFRNTCBlbGVtZW50IHRhZ3Mgd2l0aCBhbiBpZCBhcmUgYWxsb3dlZCBpbnNpZGUgY29udGFpbmVycyB3aXRoIHBoeC11cGRhdGUuXFxuXFxuXCIgK1xuICAgICAgICAgICAgICBgcmVtb3ZpbmcgaWxsZWdhbCBub2RlOiBcIiR7KGNoaWxkTm9kZS5vdXRlckhUTUwgfHwgY2hpbGROb2RlLm5vZGVWYWx1ZSkudHJpbSgpfVwiXFxuXFxuYClcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9SZW1vdmUucHVzaChjaGlsZE5vZGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICB0b1JlbW92ZS5mb3JFYWNoKGNoaWxkTm9kZSA9PiBjaGlsZE5vZGUucmVtb3ZlKCkpXG4gICAgfVxuICB9LFxuXG4gIHJlcGxhY2VSb290Q29udGFpbmVyKGNvbnRhaW5lciwgdGFnTmFtZSwgYXR0cnMpe1xuICAgIGxldCByZXRhaW5lZEF0dHJzID0gbmV3IFNldChbXCJpZFwiLCBQSFhfU0VTU0lPTiwgUEhYX1NUQVRJQywgUEhYX01BSU4sIFBIWF9ST09UX0lEXSlcbiAgICBpZihjb250YWluZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0YWdOYW1lLnRvTG93ZXJDYXNlKCkpe1xuICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuYXR0cmlidXRlcylcbiAgICAgICAgLmZpbHRlcihhdHRyID0+ICFyZXRhaW5lZEF0dHJzLmhhcyhhdHRyLm5hbWUudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgIC5mb3JFYWNoKGF0dHIgPT4gY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpKVxuXG4gICAgICBPYmplY3Qua2V5cyhhdHRycylcbiAgICAgICAgLmZpbHRlcihuYW1lID0+ICFyZXRhaW5lZEF0dHJzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuXG4gICAgICByZXR1cm4gY29udGFpbmVyXG5cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5ld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSlcbiAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSkpXG4gICAgICByZXRhaW5lZEF0dHJzLmZvckVhY2goYXR0ciA9PiBuZXdDb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoYXR0cikpKVxuICAgICAgbmV3Q29udGFpbmVyLmlubmVySFRNTCA9IGNvbnRhaW5lci5pbm5lckhUTUxcbiAgICAgIGNvbnRhaW5lci5yZXBsYWNlV2l0aChuZXdDb250YWluZXIpXG4gICAgICByZXR1cm4gbmV3Q29udGFpbmVyXG4gICAgfVxuICB9LFxuXG4gIGdldFN0aWNreShlbCwgbmFtZSwgZGVmYXVsdFZhbCl7XG4gICAgbGV0IG9wID0gKERPTS5wcml2YXRlKGVsLCBcInN0aWNreVwiKSB8fCBbXSkuZmluZCgoW2V4aXN0aW5nTmFtZSwgXSkgPT4gbmFtZSA9PT0gZXhpc3RpbmdOYW1lKVxuICAgIGlmKG9wKXtcbiAgICAgIGxldCBbX25hbWUsIF9vcCwgc3Rhc2hlZFJlc3VsdF0gPSBvcFxuICAgICAgcmV0dXJuIHN0YXNoZWRSZXN1bHRcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHR5cGVvZihkZWZhdWx0VmFsKSA9PT0gXCJmdW5jdGlvblwiID8gZGVmYXVsdFZhbCgpIDogZGVmYXVsdFZhbFxuICAgIH1cbiAgfSxcblxuICBkZWxldGVTdGlja3koZWwsIG5hbWUpe1xuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICByZXR1cm4gb3BzLmZpbHRlcigoW2V4aXN0aW5nTmFtZSwgX10pID0+IGV4aXN0aW5nTmFtZSAhPT0gbmFtZSlcbiAgICB9KVxuICB9LFxuXG4gIHB1dFN0aWNreShlbCwgbmFtZSwgb3Ape1xuICAgIGxldCBzdGFzaGVkUmVzdWx0ID0gb3AoZWwpXG4gICAgdGhpcy51cGRhdGVQcml2YXRlKGVsLCBcInN0aWNreVwiLCBbXSwgb3BzID0+IHtcbiAgICAgIGxldCBleGlzdGluZ0luZGV4ID0gb3BzLmZpbmRJbmRleCgoW2V4aXN0aW5nTmFtZSwgXSkgPT4gbmFtZSA9PT0gZXhpc3RpbmdOYW1lKVxuICAgICAgaWYoZXhpc3RpbmdJbmRleCA+PSAwKXtcbiAgICAgICAgb3BzW2V4aXN0aW5nSW5kZXhdID0gW25hbWUsIG9wLCBzdGFzaGVkUmVzdWx0XVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BzLnB1c2goW25hbWUsIG9wLCBzdGFzaGVkUmVzdWx0XSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcHNcbiAgICB9KVxuICB9LFxuXG4gIGFwcGx5U3RpY2t5T3BlcmF0aW9ucyhlbCl7XG4gICAgbGV0IG9wcyA9IERPTS5wcml2YXRlKGVsLCBcInN0aWNreVwiKVxuICAgIGlmKCFvcHMpeyByZXR1cm4gfVxuXG4gICAgb3BzLmZvckVhY2goKFtuYW1lLCBvcCwgX3N0YXNoZWRdKSA9PiB0aGlzLnB1dFN0aWNreShlbCwgbmFtZSwgb3ApKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERPTSIsICJpbXBvcnQge1xuICBQSFhfQUNUSVZFX0VOVFJZX1JFRlMsXG4gIFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2hhbm5lbFVwbG9hZGVyLFxuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVwbG9hZEVudHJ5IHtcbiAgc3RhdGljIGlzQWN0aXZlKGZpbGVFbCwgZmlsZSl7XG4gICAgbGV0IGlzTmV3ID0gZmlsZS5fcGh4UmVmID09PSB1bmRlZmluZWRcbiAgICBsZXQgYWN0aXZlUmVmcyA9IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBsZXQgaXNBY3RpdmUgPSBhY3RpdmVSZWZzLmluZGV4T2YoTGl2ZVVwbG9hZGVyLmdlbkZpbGVSZWYoZmlsZSkpID49IDBcbiAgICByZXR1cm4gZmlsZS5zaXplID4gMCAmJiAoaXNOZXcgfHwgaXNBY3RpdmUpXG4gIH1cblxuICBzdGF0aWMgaXNQcmVmbGlnaHRlZChmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBwcmVmbGlnaHRlZFJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKS5zcGxpdChcIixcIilcbiAgICBsZXQgaXNQcmVmbGlnaHRlZCA9IHByZWZsaWdodGVkUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGlzUHJlZmxpZ2h0ZWQgJiYgdGhpcy5pc0FjdGl2ZShmaWxlRWwsIGZpbGUpXG4gIH1cblxuICBjb25zdHJ1Y3RvcihmaWxlRWwsIGZpbGUsIHZpZXcpe1xuICAgIHRoaXMucmVmID0gTGl2ZVVwbG9hZGVyLmdlbkZpbGVSZWYoZmlsZSlcbiAgICB0aGlzLmZpbGVFbCA9IGZpbGVFbFxuICAgIHRoaXMuZmlsZSA9IGZpbGVcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5tZXRhID0gbnVsbFxuICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gZmFsc2VcbiAgICB0aGlzLl9pc0RvbmUgPSBmYWxzZVxuICAgIHRoaXMuX3Byb2dyZXNzID0gMFxuICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSAtMVxuICAgIHRoaXMuX29uRG9uZSA9IGZ1bmN0aW9uICgpeyB9XG4gICAgdGhpcy5fb25FbFVwZGF0ZWQgPSB0aGlzLm9uRWxVcGRhdGVkLmJpbmQodGhpcylcbiAgICB0aGlzLmZpbGVFbC5hZGRFdmVudExpc3RlbmVyKFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCwgdGhpcy5fb25FbFVwZGF0ZWQpXG4gIH1cblxuICBtZXRhZGF0YSgpeyByZXR1cm4gdGhpcy5tZXRhIH1cblxuICBwcm9ncmVzcyhwcm9ncmVzcyl7XG4gICAgdGhpcy5fcHJvZ3Jlc3MgPSBNYXRoLmZsb29yKHByb2dyZXNzKVxuICAgIGlmKHRoaXMuX3Byb2dyZXNzID4gdGhpcy5fbGFzdFByb2dyZXNzU2VudCl7XG4gICAgICBpZih0aGlzLl9wcm9ncmVzcyA+PSAxMDApe1xuICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IDEwMFxuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gMTAwXG4gICAgICAgIHRoaXMuX2lzRG9uZSA9IHRydWVcbiAgICAgICAgdGhpcy52aWV3LnB1c2hGaWxlUHJvZ3Jlc3ModGhpcy5maWxlRWwsIHRoaXMucmVmLCAxMDAsICgpID0+IHtcbiAgICAgICAgICBMaXZlVXBsb2FkZXIudW50cmFja0ZpbGUodGhpcy5maWxlRWwsIHRoaXMuZmlsZSlcbiAgICAgICAgICB0aGlzLl9vbkRvbmUoKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IHRoaXMuX3Byb2dyZXNzXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgdGhpcy5fcHJvZ3Jlc3MpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2FuY2VsKCl7XG4gICAgdGhpcy5faXNDYW5jZWxsZWQgPSB0cnVlXG4gICAgdGhpcy5faXNEb25lID0gdHJ1ZVxuICAgIHRoaXMuX29uRG9uZSgpXG4gIH1cblxuICBpc0RvbmUoKXsgcmV0dXJuIHRoaXMuX2lzRG9uZSB9XG5cbiAgZXJyb3IocmVhc29uID0gXCJmYWlsZWRcIil7XG4gICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwge2Vycm9yOiByZWFzb259KVxuICAgIExpdmVVcGxvYWRlci5jbGVhckZpbGVzKHRoaXMuZmlsZUVsKVxuICB9XG5cbiAgLy9wcml2YXRlXG5cbiAgb25Eb25lKGNhbGxiYWNrKXtcbiAgICB0aGlzLl9vbkRvbmUgPSAoKSA9PiB7XG4gICAgICB0aGlzLmZpbGVFbC5yZW1vdmVFdmVudExpc3RlbmVyKFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCwgdGhpcy5fb25FbFVwZGF0ZWQpXG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgb25FbFVwZGF0ZWQoKXtcbiAgICBsZXQgYWN0aXZlUmVmcyA9IHRoaXMuZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpLnNwbGl0KFwiLFwiKVxuICAgIGlmKGFjdGl2ZVJlZnMuaW5kZXhPZih0aGlzLnJlZikgPT09IC0xKXsgdGhpcy5jYW5jZWwoKSB9XG4gIH1cblxuICB0b1ByZWZsaWdodFBheWxvYWQoKXtcbiAgICByZXR1cm4ge1xuICAgICAgbGFzdF9tb2RpZmllZDogdGhpcy5maWxlLmxhc3RNb2RpZmllZCxcbiAgICAgIG5hbWU6IHRoaXMuZmlsZS5uYW1lLFxuICAgICAgcmVsYXRpdmVfcGF0aDogdGhpcy5maWxlLndlYmtpdFJlbGF0aXZlUGF0aCxcbiAgICAgIHNpemU6IHRoaXMuZmlsZS5zaXplLFxuICAgICAgdHlwZTogdGhpcy5maWxlLnR5cGUsXG4gICAgICByZWY6IHRoaXMucmVmXG4gICAgfVxuICB9XG5cbiAgdXBsb2FkZXIodXBsb2FkZXJzKXtcbiAgICBpZih0aGlzLm1ldGEudXBsb2FkZXIpe1xuICAgICAgbGV0IGNhbGxiYWNrID0gdXBsb2FkZXJzW3RoaXMubWV0YS51cGxvYWRlcl0gfHwgbG9nRXJyb3IoYG5vIHVwbG9hZGVyIGNvbmZpZ3VyZWQgZm9yICR7dGhpcy5tZXRhLnVwbG9hZGVyfWApXG4gICAgICByZXR1cm4ge25hbWU6IHRoaXMubWV0YS51cGxvYWRlciwgY2FsbGJhY2s6IGNhbGxiYWNrfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge25hbWU6IFwiY2hhbm5lbFwiLCBjYWxsYmFjazogY2hhbm5lbFVwbG9hZGVyfVxuICAgIH1cbiAgfVxuXG4gIHppcFBvc3RGbGlnaHQocmVzcCl7XG4gICAgdGhpcy5tZXRhID0gcmVzcC5lbnRyaWVzW3RoaXMucmVmXVxuICAgIGlmKCF0aGlzLm1ldGEpeyBsb2dFcnJvcihgbm8gcHJlZmxpZ2h0IHVwbG9hZCByZXNwb25zZSByZXR1cm5lZCB3aXRoIHJlZiAke3RoaXMucmVmfWAsIHtpbnB1dDogdGhpcy5maWxlRWwsIHJlc3BvbnNlOiByZXNwfSkgfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgUEhYX0RPTkVfUkVGUyxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlMsXG4gIFBIWF9VUExPQURfUkVGXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IFVwbG9hZEVudHJ5IGZyb20gXCIuL3VwbG9hZF9lbnRyeVwiXG5cbmxldCBsaXZlVXBsb2FkZXJGaWxlUmVmID0gMFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlVXBsb2FkZXIge1xuICBzdGF0aWMgZ2VuRmlsZVJlZihmaWxlKXtcbiAgICBsZXQgcmVmID0gZmlsZS5fcGh4UmVmXG4gICAgaWYocmVmICE9PSB1bmRlZmluZWQpe1xuICAgICAgcmV0dXJuIHJlZlxuICAgIH0gZWxzZSB7XG4gICAgICBmaWxlLl9waHhSZWYgPSAobGl2ZVVwbG9hZGVyRmlsZVJlZisrKS50b1N0cmluZygpXG4gICAgICByZXR1cm4gZmlsZS5fcGh4UmVmXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEVudHJ5RGF0YVVSTChpbnB1dEVsLCByZWYsIGNhbGxiYWNrKXtcbiAgICBsZXQgZmlsZSA9IHRoaXMuYWN0aXZlRmlsZXMoaW5wdXRFbCkuZmluZChmaWxlID0+IHRoaXMuZ2VuRmlsZVJlZihmaWxlKSA9PT0gcmVmKVxuICAgIGNhbGxiYWNrKFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSkpXG4gIH1cblxuICBzdGF0aWMgaGFzVXBsb2Fkc0luUHJvZ3Jlc3MoZm9ybUVsKXtcbiAgICBsZXQgYWN0aXZlID0gMFxuICAgIERPTS5maW5kVXBsb2FkSW5wdXRzKGZvcm1FbCkuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoUEhYX1BSRUZMSUdIVEVEX1JFRlMpICE9PSBpbnB1dC5nZXRBdHRyaWJ1dGUoUEhYX0RPTkVfUkVGUykpe1xuICAgICAgICBhY3RpdmUrK1xuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGFjdGl2ZSA+IDBcbiAgfVxuXG4gIHN0YXRpYyBzZXJpYWxpemVVcGxvYWRzKGlucHV0RWwpe1xuICAgIGxldCBmaWxlcyA9IHRoaXMuYWN0aXZlRmlsZXMoaW5wdXRFbClcbiAgICBsZXQgZmlsZURhdGEgPSB7fVxuICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICBsZXQgZW50cnkgPSB7cGF0aDogaW5wdXRFbC5uYW1lfVxuICAgICAgbGV0IHVwbG9hZFJlZiA9IGlucHV0RWwuZ2V0QXR0cmlidXRlKFBIWF9VUExPQURfUkVGKVxuICAgICAgZmlsZURhdGFbdXBsb2FkUmVmXSA9IGZpbGVEYXRhW3VwbG9hZFJlZl0gfHwgW11cbiAgICAgIGVudHJ5LnJlZiA9IHRoaXMuZ2VuRmlsZVJlZihmaWxlKVxuICAgICAgZW50cnkubGFzdF9tb2RpZmllZCA9IGZpbGUubGFzdE1vZGlmaWVkXG4gICAgICBlbnRyeS5uYW1lID0gZmlsZS5uYW1lIHx8IGVudHJ5LnJlZlxuICAgICAgZW50cnkucmVsYXRpdmVfcGF0aCA9IGZpbGUud2Via2l0UmVsYXRpdmVQYXRoXG4gICAgICBlbnRyeS50eXBlID0gZmlsZS50eXBlXG4gICAgICBlbnRyeS5zaXplID0gZmlsZS5zaXplXG4gICAgICBmaWxlRGF0YVt1cGxvYWRSZWZdLnB1c2goZW50cnkpXG4gICAgfSlcbiAgICByZXR1cm4gZmlsZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBjbGVhckZpbGVzKGlucHV0RWwpe1xuICAgIGlucHV0RWwudmFsdWUgPSBudWxsXG4gICAgaW5wdXRFbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpXG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBbXSlcbiAgfVxuXG4gIHN0YXRpYyB1bnRyYWNrRmlsZShpbnB1dEVsLCBmaWxlKXtcbiAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIERPTS5wcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIikuZmlsdGVyKGYgPT4gIU9iamVjdC5pcyhmLCBmaWxlKSkpXG4gIH1cblxuICBzdGF0aWMgdHJhY2tGaWxlcyhpbnB1dEVsLCBmaWxlcywgZGF0YVRyYW5zZmVyKXtcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlXCIpICE9PSBudWxsKXtcbiAgICAgIGxldCBuZXdGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+ICF0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZiA9PiBPYmplY3QuaXMoZiwgZmlsZSkpKVxuICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmNvbmNhdChuZXdGaWxlcykpXG4gICAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZXNldCBpbnB1dEVsIGZpbGVzIHRvIGFsaWduIG91dHB1dCB3aXRoIHByb2dyYW1tYXRpYyBjaGFuZ2VzIChpLmUuIGRyYWcgYW5kIGRyb3ApXG4gICAgICBpZihkYXRhVHJhbnNmZXIgJiYgZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCA+IDApeyBpbnB1dEVsLmZpbGVzID0gZGF0YVRyYW5zZmVyLmZpbGVzIH1cbiAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgZmlsZXMpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKXtcbiAgICBsZXQgZmlsZUlucHV0cyA9IERPTS5maW5kVXBsb2FkSW5wdXRzKGZvcm1FbClcbiAgICByZXR1cm4gQXJyYXkuZnJvbShmaWxlSW5wdXRzKS5maWx0ZXIoZWwgPT4gZWwuZmlsZXMgJiYgdGhpcy5hY3RpdmVGaWxlcyhlbCkubGVuZ3RoID4gMClcbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlcyhpbnB1dCl7XG4gICAgcmV0dXJuIChET00ucHJpdmF0ZShpbnB1dCwgXCJmaWxlc1wiKSB8fCBbXSkuZmlsdGVyKGYgPT4gVXBsb2FkRW50cnkuaXNBY3RpdmUoaW5wdXQsIGYpKVxuICB9XG5cbiAgc3RhdGljIGlucHV0c0F3YWl0aW5nUHJlZmxpZ2h0KGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGlucHV0ID0+IHRoaXMuZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCkubGVuZ3RoID4gMClcbiAgfVxuXG4gIHN0YXRpYyBmaWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0KXtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVGaWxlcyhpbnB1dCkuZmlsdGVyKGYgPT4gIVVwbG9hZEVudHJ5LmlzUHJlZmxpZ2h0ZWQoaW5wdXQsIGYpKVxuICB9XG5cbiAgY29uc3RydWN0b3IoaW5wdXRFbCwgdmlldywgb25Db21wbGV0ZSl7XG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMub25Db21wbGV0ZSA9IG9uQ29tcGxldGVcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIEFycmF5LmZyb20oTGl2ZVVwbG9hZGVyLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXRFbCkgfHwgW10pXG4gICAgICAgIC5tYXAoZmlsZSA9PiBuZXcgVXBsb2FkRW50cnkoaW5wdXRFbCwgZmlsZSwgdmlldykpXG5cbiAgICB0aGlzLm51bUVudHJpZXNJblByb2dyZXNzID0gdGhpcy5fZW50cmllcy5sZW5ndGhcbiAgfVxuXG4gIGVudHJpZXMoKXsgcmV0dXJuIHRoaXMuX2VudHJpZXMgfVxuXG4gIGluaXRBZGFwdGVyVXBsb2FkKHJlc3AsIG9uRXJyb3IsIGxpdmVTb2NrZXQpe1xuICAgIHRoaXMuX2VudHJpZXMgPVxuICAgICAgdGhpcy5fZW50cmllcy5tYXAoZW50cnkgPT4ge1xuICAgICAgICBlbnRyeS56aXBQb3N0RmxpZ2h0KHJlc3ApXG4gICAgICAgIGVudHJ5Lm9uRG9uZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcy0tXG4gICAgICAgICAgaWYodGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9PT0gMCl7IHRoaXMub25Db21wbGV0ZSgpIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGVudHJ5XG4gICAgICB9KVxuXG4gICAgbGV0IGdyb3VwZWRFbnRyaWVzID0gdGhpcy5fZW50cmllcy5yZWR1Y2UoKGFjYywgZW50cnkpID0+IHtcbiAgICAgIGxldCB7bmFtZSwgY2FsbGJhY2t9ID0gZW50cnkudXBsb2FkZXIobGl2ZVNvY2tldC51cGxvYWRlcnMpXG4gICAgICBhY2NbbmFtZV0gPSBhY2NbbmFtZV0gfHwge2NhbGxiYWNrOiBjYWxsYmFjaywgZW50cmllczogW119XG4gICAgICBhY2NbbmFtZV0uZW50cmllcy5wdXNoKGVudHJ5KVxuICAgICAgcmV0dXJuIGFjY1xuICAgIH0sIHt9KVxuXG4gICAgZm9yKGxldCBuYW1lIGluIGdyb3VwZWRFbnRyaWVzKXtcbiAgICAgIGxldCB7Y2FsbGJhY2ssIGVudHJpZXN9ID0gZ3JvdXBlZEVudHJpZXNbbmFtZV1cbiAgICAgIGNhbGxiYWNrKGVudHJpZXMsIG9uRXJyb3IsIHJlc3AsIGxpdmVTb2NrZXQpXG4gICAgfVxuICB9XG59XG4iLCAibGV0IEFSSUEgPSB7XG4gIGZvY3VzTWFpbigpe1xuICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpbiBoMSwgbWFpbiwgaDFcIilcbiAgICBpZih0YXJnZXQpe1xuICAgICAgbGV0IG9yaWdUYWJJbmRleCA9IHRhcmdldC50YWJJbmRleFxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gLTFcbiAgICAgIHRhcmdldC5mb2N1cygpXG4gICAgICB0YXJnZXQudGFiSW5kZXggPSBvcmlnVGFiSW5kZXhcbiAgICB9XG4gIH0sXG5cbiAgYW55T2YoaW5zdGFuY2UsIGNsYXNzZXMpeyByZXR1cm4gY2xhc3Nlcy5maW5kKG5hbWUgPT4gaW5zdGFuY2UgaW5zdGFuY2VvZiBuYW1lKSB9LFxuXG4gIGlzRm9jdXNhYmxlKGVsLCBpbnRlcmFjdGl2ZU9ubHkpe1xuICAgIHJldHVybihcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50ICYmIGVsLnJlbCAhPT0gXCJpZ25vcmVcIikgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxBcmVhRWxlbWVudCAmJiBlbC5ocmVmICE9PSB1bmRlZmluZWQpIHx8XG4gICAgICAoIWVsLmRpc2FibGVkICYmICh0aGlzLmFueU9mKGVsLCBbSFRNTElucHV0RWxlbWVudCwgSFRNTFNlbGVjdEVsZW1lbnQsIEhUTUxUZXh0QXJlYUVsZW1lbnQsIEhUTUxCdXR0b25FbGVtZW50XSkpKSB8fFxuICAgICAgKGVsIGluc3RhbmNlb2YgSFRNTElGcmFtZUVsZW1lbnQpIHx8XG4gICAgICAoZWwudGFiSW5kZXggPiAwIHx8ICghaW50ZXJhY3RpdmVPbmx5ICYmIGVsLnRhYkluZGV4ID09PSAwICYmIGVsLmdldEF0dHJpYnV0ZShcInRhYmluZGV4XCIpICE9PSBudWxsICYmIGVsLmdldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpICE9PSBcInRydWVcIikpXG4gICAgKVxuICB9LFxuXG4gIGF0dGVtcHRGb2N1cyhlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICBpZih0aGlzLmlzRm9jdXNhYmxlKGVsLCBpbnRlcmFjdGl2ZU9ubHkpKXsgdHJ5eyBlbC5mb2N1cygpIH0gY2F0Y2goZSl7fSB9XG4gICAgcmV0dXJuICEhZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlzU2FtZU5vZGUoZWwpXG4gIH0sXG5cbiAgZm9jdXNGaXJzdEludGVyYWN0aXZlKGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgIHdoaWxlKGNoaWxkKXtcbiAgICAgIGlmKHRoaXMuYXR0ZW1wdEZvY3VzKGNoaWxkLCB0cnVlKSB8fCB0aGlzLmZvY3VzRmlyc3RJbnRlcmFjdGl2ZShjaGlsZCwgdHJ1ZSkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNGaXJzdChlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCkgfHwgdGhpcy5mb2N1c0ZpcnN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLm5leHRFbGVtZW50U2libGluZ1xuICAgIH1cbiAgfSxcblxuICBmb2N1c0xhc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmxhc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCkgfHwgdGhpcy5mb2N1c0xhc3QoY2hpbGQpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZ1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQVJJQSIsICJpbXBvcnQge1xuICBQSFhfQUNUSVZFX0VOVFJZX1JFRlMsXG4gIFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCxcbiAgUEhYX1BSRUZMSUdIVEVEX1JFRlMsXG4gIFBIWF9VUExPQURfUkVGXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgQVJJQSBmcm9tIFwiLi9hcmlhXCJcblxubGV0IEhvb2tzID0ge1xuICBMaXZlRmlsZVVwbG9hZDoge1xuICAgIGFjdGl2ZVJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykgfSxcblxuICAgIHByZWZsaWdodGVkUmVmcygpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1BSRUZMSUdIVEVEX1JFRlMpIH0sXG5cbiAgICBtb3VudGVkKCl7IHRoaXMucHJlZmxpZ2h0ZWRXYXMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpIH0sXG5cbiAgICB1cGRhdGVkKCl7XG4gICAgICBsZXQgbmV3UHJlZmxpZ2h0cyA9IHRoaXMucHJlZmxpZ2h0ZWRSZWZzKClcbiAgICAgIGlmKHRoaXMucHJlZmxpZ2h0ZWRXYXMgIT09IG5ld1ByZWZsaWdodHMpe1xuICAgICAgICB0aGlzLnByZWZsaWdodGVkV2FzID0gbmV3UHJlZmxpZ2h0c1xuICAgICAgICBpZihuZXdQcmVmbGlnaHRzID09PSBcIlwiKXtcbiAgICAgICAgICB0aGlzLl9fdmlldy5jYW5jZWxTdWJtaXQodGhpcy5lbC5mb3JtKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMuYWN0aXZlUmVmcygpID09PSBcIlwiKXsgdGhpcy5lbC52YWx1ZSA9IG51bGwgfVxuICAgICAgdGhpcy5lbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChQSFhfTElWRV9GSUxFX1VQREFURUQpKVxuICAgIH1cbiAgfSxcblxuICBMaXZlSW1nUHJldmlldzoge1xuICAgIG1vdW50ZWQoKXtcbiAgICAgIHRoaXMucmVmID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1lbnRyeS1yZWZcIilcbiAgICAgIHRoaXMuaW5wdXRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9VUExPQURfUkVGKSlcbiAgICAgIExpdmVVcGxvYWRlci5nZXRFbnRyeURhdGFVUkwodGhpcy5pbnB1dEVsLCB0aGlzLnJlZiwgdXJsID0+IHtcbiAgICAgICAgdGhpcy51cmwgPSB1cmxcbiAgICAgICAgdGhpcy5lbC5zcmMgPSB1cmxcbiAgICAgIH0pXG4gICAgfSxcbiAgICBkZXN0cm95ZWQoKXtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy51cmwpXG4gICAgfVxuICB9LFxuICBGb2N1c1dyYXA6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLmZvY3VzU3RhcnQgPSB0aGlzLmVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgICB0aGlzLmZvY3VzRW5kID0gdGhpcy5lbC5sYXN0RWxlbWVudENoaWxkXG4gICAgICB0aGlzLmZvY3VzU3RhcnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNMYXN0KHRoaXMuZWwpKVxuICAgICAgdGhpcy5mb2N1c0VuZC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4gQVJJQS5mb2N1c0ZpcnN0KHRoaXMuZWwpKVxuICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwicGh4OnNob3ctZW5kXCIsICgpID0+IHRoaXMuZWwuZm9jdXMoKSlcbiAgICAgIGlmKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpLmRpc3BsYXkgIT09IFwibm9uZVwiKXtcbiAgICAgICAgQVJJQS5mb2N1c0ZpcnN0KHRoaXMuZWwpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmxldCBzY3JvbGxUb3AgPSAoKSA9PiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXG5sZXQgd2luSGVpZ2h0ID0gKCkgPT4gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcblxubGV0IGlzQXRWaWV3cG9ydFRvcCA9IChlbCkgPT4ge1xuICBsZXQgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIHJldHVybiByZWN0LnRvcCA+PSAwICYmIHJlY3QubGVmdCA+PSAwICYmIHJlY3QudG9wIDw9IHdpbkhlaWdodCgpXG59XG5cbmxldCBpc0F0Vmlld3BvcnRCb3R0b20gPSAoZWwpID0+IHtcbiAgbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4gcmVjdC5yaWdodCA+PSAwICYmIHJlY3QubGVmdCA+PSAwICYmIHJlY3QuYm90dG9tIDw9IHdpbkhlaWdodCgpXG59XG5cbmxldCBpc1dpdGhpblZpZXdwb3J0ID0gKGVsKSA9PiB7XG4gIGxldCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHJlY3QudG9wID49IDAgJiYgcmVjdC5sZWZ0ID49IDAgJiYgcmVjdC50b3AgPD0gd2luSGVpZ2h0KClcbn1cblxuSG9va3MuSW5maW5pdGVTY3JvbGwgPSB7XG4gIG1vdW50ZWQoKXtcbiAgICBsZXQgc2Nyb2xsQmVmb3JlID0gc2Nyb2xsVG9wKClcbiAgICBsZXQgdG9wT3ZlcnJhbiA9IGZhbHNlXG4gICAgbGV0IHRocm90dGxlSW50ZXJ2YWwgPSA1MDBcbiAgICBsZXQgcGVuZGluZ09wID0gbnVsbFxuXG4gICAgbGV0IG9uVG9wT3ZlcnJ1biA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKHRvcEV2ZW50LCBmaXJzdENoaWxkKSA9PiB7XG4gICAgICBwZW5kaW5nT3AgPSAoKSA9PiB0cnVlXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTSG9va1B1c2godGhpcy5lbCwgdG9wRXZlbnQsIHtpZDogZmlyc3RDaGlsZC5pZCwgX292ZXJyYW46IHRydWV9LCAoKSA9PiB7XG4gICAgICAgIHBlbmRpbmdPcCA9IG51bGxcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGxldCBvbkZpcnN0Q2hpbGRBdFRvcCA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKHRvcEV2ZW50LCBmaXJzdENoaWxkKSA9PiB7XG4gICAgICBwZW5kaW5nT3AgPSAoKSA9PiBmaXJzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJzdGFydFwifSlcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5leGVjSlNIb29rUHVzaCh0aGlzLmVsLCB0b3BFdmVudCwge2lkOiBmaXJzdENoaWxkLmlkfSwgKCkgPT4ge1xuICAgICAgICBwZW5kaW5nT3AgPSBudWxsXG4gICAgICAgIGlmKCFpc1dpdGhpblZpZXdwb3J0KGZpcnN0Q2hpbGQpKXsgZmlyc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwic3RhcnRcIn0pIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGxldCBvbkxhc3RDaGlsZEF0Qm90dG9tID0gdGhpcy50aHJvdHRsZSh0aHJvdHRsZUludGVydmFsLCAoYm90dG9tRXZlbnQsIGxhc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gbGFzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJlbmRcIn0pXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTSG9va1B1c2godGhpcy5lbCwgYm90dG9tRXZlbnQsIHtpZDogbGFzdENoaWxkLmlkfSwgKCkgPT4ge1xuICAgICAgICBwZW5kaW5nT3AgPSBudWxsXG4gICAgICAgIGlmKCFpc1dpdGhpblZpZXdwb3J0KGxhc3RDaGlsZCkpeyBsYXN0Q2hpbGQuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiBcImVuZFwifSkgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy5vblNjcm9sbCA9IChlKSA9PiB7XG4gICAgICBsZXQgc2Nyb2xsTm93ID0gc2Nyb2xsVG9wKClcblxuICAgICAgaWYocGVuZGluZ09wKXtcbiAgICAgICAgc2Nyb2xsQmVmb3JlID0gc2Nyb2xsTm93XG4gICAgICAgIHJldHVybiBwZW5kaW5nT3AoKVxuICAgICAgfVxuICAgICAgbGV0IHJlY3QgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBsZXQgdG9wRXZlbnQgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSh0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInZpZXdwb3J0LXRvcFwiKSlcbiAgICAgIGxldCBib3R0b21FdmVudCA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFwidmlld3BvcnQtYm90dG9tXCIpKVxuICAgICAgbGV0IGxhc3RDaGlsZCA9IHRoaXMuZWwubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgbGV0IGZpcnN0Q2hpbGQgPSB0aGlzLmVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgICBsZXQgaXNTY3JvbGxpbmdVcCA9IHNjcm9sbE5vdyA8IHNjcm9sbEJlZm9yZVxuICAgICAgbGV0IGlzU2Nyb2xsaW5nRG93biA9IHNjcm9sbE5vdyA+IHNjcm9sbEJlZm9yZVxuXG4gICAgICAvLyBlbCBvdmVycmFuIHdoaWxlIHNjcm9sbGluZyB1cFxuICAgICAgaWYoaXNTY3JvbGxpbmdVcCAmJiB0b3BFdmVudCAmJiAhdG9wT3ZlcnJhbiAmJiByZWN0LnRvcCA+PSAwKXtcbiAgICAgICAgdG9wT3ZlcnJhbiA9IHRydWVcbiAgICAgICAgb25Ub3BPdmVycnVuKHRvcEV2ZW50LCBmaXJzdENoaWxkKVxuICAgICAgfSBlbHNlIGlmKGlzU2Nyb2xsaW5nRG93biAmJiB0b3BPdmVycmFuICYmIHJlY3QudG9wIDw9IDApe1xuICAgICAgICB0b3BPdmVycmFuID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYodG9wRXZlbnQgJiYgaXNTY3JvbGxpbmdVcCAmJiBpc0F0Vmlld3BvcnRUb3AoZmlyc3RDaGlsZCkpe1xuICAgICAgICBvbkZpcnN0Q2hpbGRBdFRvcCh0b3BFdmVudCwgZmlyc3RDaGlsZClcbiAgICAgIH0gZWxzZSBpZihib3R0b21FdmVudCAmJiBpc1Njcm9sbGluZ0Rvd24gJiYgaXNBdFZpZXdwb3J0Qm90dG9tKGxhc3RDaGlsZCkpe1xuICAgICAgICBvbkxhc3RDaGlsZEF0Qm90dG9tKGJvdHRvbUV2ZW50LCBsYXN0Q2hpbGQpXG4gICAgICB9XG4gICAgICBzY3JvbGxCZWZvcmUgPSBzY3JvbGxOb3dcbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbClcbiAgfSxcbiAgZGVzdHJveWVkKCl7IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpIH0sXG5cbiAgdGhyb3R0bGUoaW50ZXJ2YWwsIGNhbGxiYWNrKXtcbiAgICBsZXQgbGFzdENhbGxBdCA9IDBcbiAgICBsZXQgdGltZXJcblxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgbGV0IG5vdyA9IERhdGUubm93KClcbiAgICAgIGxldCByZW1haW5pbmdUaW1lID0gaW50ZXJ2YWwgLSAobm93IC0gbGFzdENhbGxBdClcblxuICAgICAgaWYocmVtYWluaW5nVGltZSA8PSAwIHx8IHJlbWFpbmluZ1RpbWUgPiBpbnRlcnZhbCl7XG4gICAgICAgIGlmKHRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgICAgICAgIHRpbWVyID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGxhc3RDYWxsQXQgPSBub3dcbiAgICAgICAgY2FsbGJhY2soLi4uYXJncylcbiAgICAgIH0gZWxzZSBpZighdGltZXIpe1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGxhc3RDYWxsQXQgPSBEYXRlLm5vdygpXG4gICAgICAgICAgdGltZXIgPSBudWxsXG4gICAgICAgICAgY2FsbGJhY2soLi4uYXJncylcbiAgICAgICAgfSwgcmVtYWluaW5nVGltZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEhvb2tzXG4iLCAiaW1wb3J0IHtcbiAgbWF5YmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERPTVBvc3RNb3JwaFJlc3RvcmVyIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyQmVmb3JlLCBjb250YWluZXJBZnRlciwgdXBkYXRlVHlwZSl7XG4gICAgbGV0IGlkc0JlZm9yZSA9IG5ldyBTZXQoKVxuICAgIGxldCBpZHNBZnRlciA9IG5ldyBTZXQoWy4uLmNvbnRhaW5lckFmdGVyLmNoaWxkcmVuXS5tYXAoY2hpbGQgPT4gY2hpbGQuaWQpKVxuXG4gICAgbGV0IGVsZW1lbnRzVG9Nb2RpZnkgPSBbXVxuXG4gICAgQXJyYXkuZnJvbShjb250YWluZXJCZWZvcmUuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgaWYoY2hpbGQuaWQpeyAvLyBhbGwgb2Ygb3VyIGNoaWxkcmVuIHNob3VsZCBiZSBlbGVtZW50cyB3aXRoIGlkc1xuICAgICAgICBpZHNCZWZvcmUuYWRkKGNoaWxkLmlkKVxuICAgICAgICBpZihpZHNBZnRlci5oYXMoY2hpbGQuaWQpKXtcbiAgICAgICAgICBsZXQgcHJldmlvdXNFbGVtZW50SWQgPSBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWRcbiAgICAgICAgICBlbGVtZW50c1RvTW9kaWZ5LnB1c2goe2VsZW1lbnRJZDogY2hpbGQuaWQsIHByZXZpb3VzRWxlbWVudElkOiBwcmV2aW91c0VsZW1lbnRJZH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5jb250YWluZXJJZCA9IGNvbnRhaW5lckFmdGVyLmlkXG4gICAgdGhpcy51cGRhdGVUeXBlID0gdXBkYXRlVHlwZVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeSA9IGVsZW1lbnRzVG9Nb2RpZnlcbiAgICB0aGlzLmVsZW1lbnRJZHNUb0FkZCA9IFsuLi5pZHNBZnRlcl0uZmlsdGVyKGlkID0+ICFpZHNCZWZvcmUuaGFzKGlkKSlcbiAgfVxuXG4gIC8vIFdlIGRvIHRoZSBmb2xsb3dpbmcgdG8gb3B0aW1pemUgYXBwZW5kL3ByZXBlbmQgb3BlcmF0aW9uczpcbiAgLy8gICAxKSBUcmFjayBpZHMgb2YgbW9kaWZpZWQgZWxlbWVudHMgJiBvZiBuZXcgZWxlbWVudHNcbiAgLy8gICAyKSBBbGwgdGhlIG1vZGlmaWVkIGVsZW1lbnRzIGFyZSBwdXQgYmFjayBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBpbiB0aGUgRE9NIHRyZWVcbiAgLy8gICAgICBieSBzdG9yaW5nIHRoZSBpZCBvZiB0aGVpciBwcmV2aW91cyBzaWJsaW5nXG4gIC8vICAgMykgTmV3IGVsZW1lbnRzIGFyZSBnb2luZyB0byBiZSBwdXQgaW4gdGhlIHJpZ2h0IHBsYWNlIGJ5IG1vcnBoZG9tIGR1cmluZyBhcHBlbmQuXG4gIC8vICAgICAgRm9yIHByZXBlbmQsIHdlIG1vdmUgdGhlbSB0byB0aGUgZmlyc3QgcG9zaXRpb24gaW4gdGhlIGNvbnRhaW5lclxuICBwZXJmb3JtKCl7XG4gICAgbGV0IGNvbnRhaW5lciA9IERPTS5ieUlkKHRoaXMuY29udGFpbmVySWQpXG4gICAgdGhpcy5lbGVtZW50c1RvTW9kaWZ5LmZvckVhY2goZWxlbWVudFRvTW9kaWZ5ID0+IHtcbiAgICAgIGlmKGVsZW1lbnRUb01vZGlmeS5wcmV2aW91c0VsZW1lbnRJZCl7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5wcmV2aW91c0VsZW1lbnRJZCksIHByZXZpb3VzRWxlbSA9PiB7XG4gICAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudFRvTW9kaWZ5LmVsZW1lbnRJZCksIGVsZW0gPT4ge1xuICAgICAgICAgICAgbGV0IGlzSW5SaWdodFBsYWNlID0gZWxlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZy5pZCA9PSBwcmV2aW91c0VsZW0uaWRcbiAgICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBlbGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBjb250YWluZXJcbiAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudFRvTW9kaWZ5LmVsZW1lbnRJZCksIGVsZW0gPT4ge1xuICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyA9PSBudWxsXG4gICAgICAgICAgaWYoIWlzSW5SaWdodFBsYWNlKXtcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGVsZW0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZih0aGlzLnVwZGF0ZVR5cGUgPT0gXCJwcmVwZW5kXCIpe1xuICAgICAgdGhpcy5lbGVtZW50SWRzVG9BZGQucmV2ZXJzZSgpLmZvckVhY2goZWxlbUlkID0+IHtcbiAgICAgICAgbWF5YmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbUlkKSwgZWxlbSA9PiBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCAidmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgPSAxMTtcblxuZnVuY3Rpb24gbW9ycGhBdHRycyhmcm9tTm9kZSwgdG9Ob2RlKSB7XG4gICAgdmFyIHRvTm9kZUF0dHJzID0gdG9Ob2RlLmF0dHJpYnV0ZXM7XG4gICAgdmFyIGF0dHI7XG4gICAgdmFyIGF0dHJOYW1lO1xuICAgIHZhciBhdHRyTmFtZXNwYWNlVVJJO1xuICAgIHZhciBhdHRyVmFsdWU7XG4gICAgdmFyIGZyb21WYWx1ZTtcblxuICAgIC8vIGRvY3VtZW50LWZyYWdtZW50cyBkb250IGhhdmUgYXR0cmlidXRlcyBzbyBsZXRzIG5vdCBkbyBhbnl0aGluZ1xuICAgIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUgfHwgZnJvbU5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudFxuICAgIGZvciAodmFyIGkgPSB0b05vZGVBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBhdHRyID0gdG9Ob2RlQXR0cnNbaV07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG4gICAgICAgIGF0dHJWYWx1ZSA9IGF0dHIudmFsdWU7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG4gICAgICAgICAgICBmcm9tVmFsdWUgPSBmcm9tTm9kZS5nZXRBdHRyaWJ1dGVOUyhhdHRyTmFtZXNwYWNlVVJJLCBhdHRyTmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChmcm9tVmFsdWUgIT09IGF0dHJWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyLnByZWZpeCA9PT0gJ3htbG5zJyl7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lOyAvLyBJdCdzIG5vdCBhbGxvd2VkIHRvIHNldCBhbiBhdHRyaWJ1dGUgd2l0aCB0aGUgWE1MTlMgbmFtZXNwYWNlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgYHhtbG5zYCBwcmVmaXhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcm9tVmFsdWUgPSBmcm9tTm9kZS5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYW55IGV4dHJhIGF0dHJpYnV0ZXMgZm91bmQgb24gdGhlIG9yaWdpbmFsIERPTSBlbGVtZW50IHRoYXRcbiAgICAvLyB3ZXJlbid0IGZvdW5kIG9uIHRoZSB0YXJnZXQgZWxlbWVudC5cbiAgICB2YXIgZnJvbU5vZGVBdHRycyA9IGZyb21Ob2RlLmF0dHJpYnV0ZXM7XG5cbiAgICBmb3IgKHZhciBkID0gZnJvbU5vZGVBdHRycy5sZW5ndGggLSAxOyBkID49IDA7IGQtLSkge1xuICAgICAgICBhdHRyID0gZnJvbU5vZGVBdHRyc1tkXTtcbiAgICAgICAgYXR0ck5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgIGF0dHJOYW1lc3BhY2VVUkkgPSBhdHRyLm5hbWVzcGFjZVVSSTtcblxuICAgICAgICBpZiAoYXR0ck5hbWVzcGFjZVVSSSkge1xuICAgICAgICAgICAgYXR0ck5hbWUgPSBhdHRyLmxvY2FsTmFtZSB8fCBhdHRyTmFtZTtcblxuICAgICAgICAgICAgaWYgKCF0b05vZGUuaGFzQXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUucmVtb3ZlQXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0b05vZGUuaGFzQXR0cmlidXRlKGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciByYW5nZTsgLy8gQ3JlYXRlIGEgcmFuZ2Ugb2JqZWN0IGZvciBlZmZpY2VudGx5IHJlbmRlcmluZyBzdHJpbmdzIHRvIGVsZW1lbnRzLlxudmFyIE5TX1hIVE1MID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnO1xuXG52YXIgZG9jID0gdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IGRvY3VtZW50O1xudmFyIEhBU19URU1QTEFURV9TVVBQT1JUID0gISFkb2MgJiYgJ2NvbnRlbnQnIGluIGRvYy5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xudmFyIEhBU19SQU5HRV9TVVBQT1JUID0gISFkb2MgJiYgZG9jLmNyZWF0ZVJhbmdlICYmICdjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQnIGluIGRvYy5jcmVhdGVSYW5nZSgpO1xuXG5mdW5jdGlvbiBjcmVhdGVGcmFnbWVudEZyb21UZW1wbGF0ZShzdHIpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKSB7XG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgICByYW5nZSA9IGRvYy5jcmVhdGVSYW5nZSgpO1xuICAgICAgICByYW5nZS5zZWxlY3ROb2RlKGRvYy5ib2R5KTtcbiAgICB9XG5cbiAgICB2YXIgZnJhZ21lbnQgPSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoc3RyKTtcbiAgICByZXR1cm4gZnJhZ21lbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCgnYm9keScpO1xuICAgIGZyYWdtZW50LmlubmVySFRNTCA9IHN0cjtcbiAgICByZXR1cm4gZnJhZ21lbnQuY2hpbGROb2Rlc1swXTtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGFib3V0IHRoZSBzYW1lXG4gKiB2YXIgaHRtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoc3RyLCAndGV4dC9odG1sJyk7XG4gKiByZXR1cm4gaHRtbC5ib2R5LmZpcnN0Q2hpbGQ7XG4gKlxuICogQG1ldGhvZCB0b0VsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqL1xuZnVuY3Rpb24gdG9FbGVtZW50KHN0cikge1xuICAgIHN0ciA9IHN0ci50cmltKCk7XG4gICAgaWYgKEhBU19URU1QTEFURV9TVVBQT1JUKSB7XG4gICAgICAvLyBhdm9pZCByZXN0cmljdGlvbnMgb24gY29udGVudCBmb3IgdGhpbmdzIGxpa2UgYDx0cj48dGg+SGk8L3RoPjwvdHI+YCB3aGljaFxuICAgICAgLy8gY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IGRvZXNuJ3Qgc3VwcG9ydFxuICAgICAgLy8gPHRlbXBsYXRlPiBzdXBwb3J0IG5vdCBhdmFpbGFibGUgaW4gSUVcbiAgICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21UZW1wbGF0ZShzdHIpO1xuICAgIH0gZWxzZSBpZiAoSEFTX1JBTkdFX1NVUFBPUlQpIHtcbiAgICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21SYW5nZShzdHIpO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVGcmFnbWVudEZyb21XcmFwKHN0cik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHR3byBub2RlJ3MgbmFtZXMgYXJlIHRoZSBzYW1lLlxuICpcbiAqIE5PVEU6IFdlIGRvbid0IGJvdGhlciBjaGVja2luZyBgbmFtZXNwYWNlVVJJYCBiZWNhdXNlIHlvdSB3aWxsIG5ldmVyIGZpbmQgdHdvIEhUTUwgZWxlbWVudHMgd2l0aCB0aGUgc2FtZVxuICogICAgICAgbm9kZU5hbWUgYW5kIGRpZmZlcmVudCBuYW1lc3BhY2UgVVJJcy5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYiBUaGUgdGFyZ2V0IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVOb2RlTmFtZXMoZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGZyb21Ob2RlTmFtZSA9IGZyb21FbC5ub2RlTmFtZTtcbiAgICB2YXIgdG9Ob2RlTmFtZSA9IHRvRWwubm9kZU5hbWU7XG4gICAgdmFyIGZyb21Db2RlU3RhcnQsIHRvQ29kZVN0YXJ0O1xuXG4gICAgaWYgKGZyb21Ob2RlTmFtZSA9PT0gdG9Ob2RlTmFtZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmcm9tQ29kZVN0YXJ0ID0gZnJvbU5vZGVOYW1lLmNoYXJDb2RlQXQoMCk7XG4gICAgdG9Db2RlU3RhcnQgPSB0b05vZGVOYW1lLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAvLyBJZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgYSB2aXJ0dWFsIERPTSBub2RlIG9yIFNWRyBub2RlIHRoZW4gd2UgbWF5XG4gICAgLy8gbmVlZCB0byBub3JtYWxpemUgdGhlIHRhZyBuYW1lIGJlZm9yZSBjb21wYXJpbmcuIE5vcm1hbCBIVE1MIGVsZW1lbnRzIHRoYXQgYXJlXG4gICAgLy8gaW4gdGhlIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiXG4gICAgLy8gYXJlIGNvbnZlcnRlZCB0byB1cHBlciBjYXNlXG4gICAgaWYgKGZyb21Db2RlU3RhcnQgPD0gOTAgJiYgdG9Db2RlU3RhcnQgPj0gOTcpIHsgLy8gZnJvbSBpcyB1cHBlciBhbmQgdG8gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIGZyb21Ob2RlTmFtZSA9PT0gdG9Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSBpZiAodG9Db2RlU3RhcnQgPD0gOTAgJiYgZnJvbUNvZGVTdGFydCA+PSA5NykgeyAvLyB0byBpcyB1cHBlciBhbmQgZnJvbSBpcyBsb3dlclxuICAgICAgICByZXR1cm4gdG9Ob2RlTmFtZSA9PT0gZnJvbU5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gZWxlbWVudCwgb3B0aW9uYWxseSB3aXRoIGEga25vd24gbmFtZXNwYWNlIFVSSS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSB0aGUgZWxlbWVudCBuYW1lLCBlLmcuICdkaXYnIG9yICdzdmcnXG4gKiBAcGFyYW0ge3N0cmluZ30gW25hbWVzcGFjZVVSSV0gdGhlIGVsZW1lbnQncyBuYW1lc3BhY2UgVVJJLCBpLmUuIHRoZSB2YWx1ZSBvZlxuICogaXRzIGB4bWxuc2AgYXR0cmlidXRlIG9yIGl0cyBpbmZlcnJlZCBuYW1lc3BhY2UuXG4gKlxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRWxlbWVudE5TKG5hbWUsIG5hbWVzcGFjZVVSSSkge1xuICAgIHJldHVybiAhbmFtZXNwYWNlVVJJIHx8IG5hbWVzcGFjZVVSSSA9PT0gTlNfWEhUTUwgP1xuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudChuYW1lKSA6XG4gICAgICAgIGRvYy5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlVVJJLCBuYW1lKTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgdGhlIGNoaWxkcmVuIG9mIG9uZSBET00gZWxlbWVudCB0byBhbm90aGVyIERPTSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIG1vdmVDaGlsZHJlbihmcm9tRWwsIHRvRWwpIHtcbiAgICB2YXIgY3VyQ2hpbGQgPSBmcm9tRWwuZmlyc3RDaGlsZDtcbiAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcbiAgICAgICAgdmFyIG5leHRDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB0b0VsLmFwcGVuZENoaWxkKGN1ckNoaWxkKTtcbiAgICAgICAgY3VyQ2hpbGQgPSBuZXh0Q2hpbGQ7XG4gICAgfVxuICAgIHJldHVybiB0b0VsO1xufVxuXG5mdW5jdGlvbiBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgbmFtZSkge1xuICAgIGlmIChmcm9tRWxbbmFtZV0gIT09IHRvRWxbbmFtZV0pIHtcbiAgICAgICAgZnJvbUVsW25hbWVdID0gdG9FbFtuYW1lXTtcbiAgICAgICAgaWYgKGZyb21FbFtuYW1lXSkge1xuICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZShuYW1lLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmcm9tRWwucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgc3BlY2lhbEVsSGFuZGxlcnMgPSB7XG4gICAgT1BUSU9OOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBmcm9tRWwucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnROYW1lID0gcGFyZW50Tm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHBhcmVudE5hbWUgPT09ICdPUFRHUk9VUCcpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBwYXJlbnROb2RlICYmIHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnU0VMRUNUJyAmJiAhcGFyZW50Tm9kZS5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbUVsLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSAmJiAhdG9FbC5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBNUyBFZGdlIGJ1ZyB3aGVyZSB0aGUgJ3NlbGVjdGVkJyBhdHRyaWJ1dGUgY2FuIG9ubHkgYmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCBpZiBzZXQgdG8gYSBub24tZW1wdHkgdmFsdWU6XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzEyMDg3Njc5L1xuICAgICAgICAgICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICBmcm9tRWwucmVtb3ZlQXR0cmlidXRlKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHJlc2V0IHNlbGVjdCBlbGVtZW50J3Mgc2VsZWN0ZWRJbmRleCB0byAtMSwgb3RoZXJ3aXNlIHNldHRpbmdcbiAgICAgICAgICAgICAgICAvLyBmcm9tRWwuc2VsZWN0ZWQgdXNpbmcgdGhlIHN5bmNCb29sZWFuQXR0clByb3AgYmVsb3cgaGFzIG5vIGVmZmVjdC5cbiAgICAgICAgICAgICAgICAvLyBUaGUgY29ycmVjdCBzZWxlY3RlZEluZGV4IHdpbGwgYmUgc2V0IGluIHRoZSBTRUxFQ1Qgc3BlY2lhbCBoYW5kbGVyIGJlbG93LlxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnc2VsZWN0ZWQnKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoZSBcInZhbHVlXCIgYXR0cmlidXRlIGlzIHNwZWNpYWwgZm9yIHRoZSA8aW5wdXQ+IGVsZW1lbnQgc2luY2UgaXQgc2V0c1xuICAgICAqIHRoZSBpbml0aWFsIHZhbHVlLiBDaGFuZ2luZyB0aGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAqIFwidmFsdWVcIiBwcm9wZXJ0eSB3aWxsIGhhdmUgbm8gZWZmZWN0IHNpbmNlIGl0IGlzIG9ubHkgdXNlZCB0byB0aGUgc2V0IHRoZVxuICAgICAqIGluaXRpYWwgdmFsdWUuICBTaW1pbGFyIGZvciB0aGUgXCJjaGVja2VkXCIgYXR0cmlidXRlLCBhbmQgXCJkaXNhYmxlZFwiLlxuICAgICAqL1xuICAgIElOUFVUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsICdjaGVja2VkJyk7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnZGlzYWJsZWQnKTtcblxuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSB0b0VsLnZhbHVlKSB7XG4gICAgICAgICAgICBmcm9tRWwudmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSkge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBURVhUQVJFQTogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IHRvRWwudmFsdWU7XG4gICAgICAgIGlmIChmcm9tRWwudmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICBmcm9tRWwudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaXJzdENoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChmaXJzdENoaWxkKSB7XG4gICAgICAgICAgICAvLyBOZWVkZWQgZm9yIElFLiBBcHBhcmVudGx5IElFIHNldHMgdGhlIHBsYWNlaG9sZGVyIGFzIHRoZVxuICAgICAgICAgICAgLy8gbm9kZSB2YWx1ZSBhbmQgdmlzZSB2ZXJzYS4gVGhpcyBpZ25vcmVzIGFuIGVtcHR5IHVwZGF0ZS5cbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IGZpcnN0Q2hpbGQubm9kZVZhbHVlO1xuXG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgPT0gbmV3VmFsdWUgfHwgKCFuZXdWYWx1ZSAmJiBvbGRWYWx1ZSA9PSBmcm9tRWwucGxhY2Vob2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmaXJzdENoaWxkLm5vZGVWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBTRUxFQ1Q6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICBpZiAoIXRvRWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBsb29wIHRocm91Z2ggY2hpbGRyZW4gb2YgZnJvbUVsLCBub3QgdG9FbCBzaW5jZSBub2RlcyBjYW4gYmUgbW92ZWRcbiAgICAgICAgICAgIC8vIGZyb20gdG9FbCB0byBmcm9tRWwgZGlyZWN0bHkgd2hlbiBtb3JwaGluZy5cbiAgICAgICAgICAgIC8vIEF0IHRoZSB0aW1lIHRoaXMgc3BlY2lhbCBoYW5kbGVyIGlzIGludm9rZWQsIGFsbCBjaGlsZHJlbiBoYXZlIGFscmVhZHkgYmVlbiBtb3JwaGVkXG4gICAgICAgICAgICAvLyBhbmQgYXBwZW5kZWQgdG8gLyByZW1vdmVkIGZyb20gZnJvbUVsLCBzbyB1c2luZyBmcm9tRWwgaGVyZSBpcyBzYWZlIGFuZCBjb3JyZWN0LlxuICAgICAgICAgICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB2YXIgb3B0Z3JvdXA7XG4gICAgICAgICAgICB2YXIgbm9kZU5hbWU7XG4gICAgICAgICAgICB3aGlsZShjdXJDaGlsZCkge1xuICAgICAgICAgICAgICAgIG5vZGVOYW1lID0gY3VyQ2hpbGQubm9kZU5hbWUgJiYgY3VyQ2hpbGQubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRHUk9VUCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0Z3JvdXAgPSBjdXJDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlTmFtZSA9PT0gJ09QVElPTicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJDaGlsZC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1ckNoaWxkICYmIG9wdGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDaGlsZCA9IG9wdGdyb3VwLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0Z3JvdXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmcm9tRWwuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG52YXIgRUxFTUVOVF9OT0RFID0gMTtcbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFJDEgPSAxMTtcbnZhciBURVhUX05PREUgPSAzO1xudmFyIENPTU1FTlRfTk9ERSA9IDg7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5mdW5jdGlvbiBkZWZhdWx0R2V0Tm9kZUtleShub2RlKSB7XG4gIGlmIChub2RlKSB7XG4gICAgcmV0dXJuIChub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSgnaWQnKSkgfHwgbm9kZS5pZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtb3JwaGRvbUZhY3RvcnkobW9ycGhBdHRycykge1xuXG4gIHJldHVybiBmdW5jdGlvbiBtb3JwaGRvbShmcm9tTm9kZSwgdG9Ob2RlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0b05vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoZnJvbU5vZGUubm9kZU5hbWUgPT09ICcjZG9jdW1lbnQnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnSFRNTCcgfHwgZnJvbU5vZGUubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICB2YXIgdG9Ob2RlSHRtbCA9IHRvTm9kZTtcbiAgICAgICAgdG9Ob2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2h0bWwnKTtcbiAgICAgICAgdG9Ob2RlLmlubmVySFRNTCA9IHRvTm9kZUh0bWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b05vZGUgPSB0b0VsZW1lbnQodG9Ob2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRvTm9kZS5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxKSB7XG4gICAgICB0b05vZGUgPSB0b05vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgfVxuXG4gICAgdmFyIGdldE5vZGVLZXkgPSBvcHRpb25zLmdldE5vZGVLZXkgfHwgZGVmYXVsdEdldE5vZGVLZXk7XG4gICAgdmFyIG9uQmVmb3JlTm9kZUFkZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVBZGRlZCB8fCBub29wO1xuICAgIHZhciBvbk5vZGVBZGRlZCA9IG9wdGlvbnMub25Ob2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbFVwZGF0ZWQgPSBvcHRpb25zLm9uQmVmb3JlRWxVcGRhdGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uRWxVcGRhdGVkID0gb3B0aW9ucy5vbkVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkJlZm9yZU5vZGVEaXNjYXJkZWQgPSBvcHRpb25zLm9uQmVmb3JlTm9kZURpc2NhcmRlZCB8fCBub29wO1xuICAgIHZhciBvbk5vZGVEaXNjYXJkZWQgPSBvcHRpb25zLm9uTm9kZURpc2NhcmRlZCB8fCBub29wO1xuICAgIHZhciBvbkJlZm9yZUVsQ2hpbGRyZW5VcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsQ2hpbGRyZW5VcGRhdGVkIHx8IG5vb3A7XG4gICAgdmFyIHNraXBGcm9tQ2hpbGRyZW4gPSBvcHRpb25zLnNraXBGcm9tQ2hpbGRyZW4gfHwgbm9vcDtcbiAgICB2YXIgYWRkQ2hpbGQgPSBvcHRpb25zLmFkZENoaWxkIHx8IGZ1bmN0aW9uKHBhcmVudCwgY2hpbGQpeyByZXR1cm4gcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTsgfTtcbiAgICB2YXIgY2hpbGRyZW5Pbmx5ID0gb3B0aW9ucy5jaGlsZHJlbk9ubHkgPT09IHRydWU7XG5cbiAgICAvLyBUaGlzIG9iamVjdCBpcyB1c2VkIGFzIGEgbG9va3VwIHRvIHF1aWNrbHkgZmluZCBhbGwga2V5ZWQgZWxlbWVudHMgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlLlxuICAgIHZhciBmcm9tTm9kZXNMb29rdXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHZhciBrZXllZFJlbW92YWxMaXN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBhZGRLZXllZFJlbW92YWwoa2V5KSB7XG4gICAgICBrZXllZFJlbW92YWxMaXN0LnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YWxrRGlzY2FyZGVkQ2hpbGROb2Rlcyhub2RlLCBza2lwS2V5ZWROb2Rlcykge1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuXG4gICAgICAgICAgdmFyIGtleSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChza2lwS2V5ZWROb2RlcyAmJiAoa2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCkpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgc2tpcHBpbmcga2V5ZWQgbm9kZXMgdGhlbiB3ZSBhZGQgdGhlIGtleVxuICAgICAgICAgICAgLy8gdG8gYSBsaXN0IHNvIHRoYXQgaXQgY2FuIGJlIGhhbmRsZWQgYXQgdGhlIHZlcnkgZW5kLlxuICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9ubHkgcmVwb3J0IHRoZSBub2RlIGFzIGRpc2NhcmRlZCBpZiBpdCBpcyBub3Qga2V5ZWQuIFdlIGRvIHRoaXMgYmVjYXVzZVxuICAgICAgICAgICAgLy8gYXQgdGhlIGVuZCB3ZSBsb29wIHRocm91Z2ggYWxsIGtleWVkIGVsZW1lbnRzIHRoYXQgd2VyZSB1bm1hdGNoZWRcbiAgICAgICAgICAgIC8vIGFuZCB0aGVuIGRpc2NhcmQgdGhlbSBpbiBvbmUgZmluYWwgcGFzcy5cbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgICBpZiAoY3VyQ2hpbGQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICB3YWxrRGlzY2FyZGVkQ2hpbGROb2RlcyhjdXJDaGlsZCwgc2tpcEtleWVkTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckNoaWxkID0gY3VyQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAqIFJlbW92ZXMgYSBET00gbm9kZSBvdXQgb2YgdGhlIG9yaWdpbmFsIERPTVxuICAgICpcbiAgICAqIEBwYXJhbSAge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBwYXJlbnROb2RlIFRoZSBub2RlcyBwYXJlbnRcbiAgICAqIEBwYXJhbSAge0Jvb2xlYW59IHNraXBLZXllZE5vZGVzIElmIHRydWUgdGhlbiBlbGVtZW50cyB3aXRoIGtleXMgd2lsbCBiZSBza2lwcGVkIGFuZCBub3QgZGlzY2FyZGVkLlxuICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxuICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlLCBwYXJlbnROb2RlLCBza2lwS2V5ZWROb2Rlcykge1xuICAgICAgaWYgKG9uQmVmb3JlTm9kZURpc2NhcmRlZChub2RlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Tm9kZSkge1xuICAgICAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgfVxuXG4gICAgICBvbk5vZGVEaXNjYXJkZWQobm9kZSk7XG4gICAgICB3YWxrRGlzY2FyZGVkQ2hpbGROb2Rlcyhub2RlLCBza2lwS2V5ZWROb2Rlcyk7XG4gICAgfVxuXG4gICAgLy8gLy8gVHJlZVdhbGtlciBpbXBsZW1lbnRhdGlvbiBpcyBubyBmYXN0ZXIsIGJ1dCBrZWVwaW5nIHRoaXMgYXJvdW5kIGluIGNhc2UgdGhpcyBjaGFuZ2VzIGluIHRoZSBmdXR1cmVcbiAgICAvLyBmdW5jdGlvbiBpbmRleFRyZWUocm9vdCkge1xuICAgIC8vICAgICB2YXIgdHJlZVdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoXG4gICAgLy8gICAgICAgICByb290LFxuICAgIC8vICAgICAgICAgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQpO1xuICAgIC8vXG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gdHJlZVdhbGtlci5uZXh0Tm9kZSgpKSkge1xuICAgIC8vICAgICAgICAgdmFyIGtleSA9IGdldE5vZGVLZXkoZWwpO1xuICAgIC8vICAgICAgICAgaWYgKGtleSkge1xuICAgIC8vICAgICAgICAgICAgIGZyb21Ob2Rlc0xvb2t1cFtrZXldID0gZWw7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICAvLyAvLyBOb2RlSXRlcmF0b3IgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy9cbiAgICAvLyBmdW5jdGlvbiBpbmRleFRyZWUobm9kZSkge1xuICAgIC8vICAgICB2YXIgbm9kZUl0ZXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlTm9kZUl0ZXJhdG9yKG5vZGUsIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvLyAgICAgdmFyIGVsO1xuICAgIC8vICAgICB3aGlsZSgoZWwgPSBub2RlSXRlcmF0b3IubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUgfHwgbm9kZS5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxKSB7XG4gICAgICAgIHZhciBjdXJDaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpO1xuICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIGZyb21Ob2Rlc0xvb2t1cFtrZXldID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV2FsayByZWN1cnNpdmVseVxuICAgICAgICAgIGluZGV4VHJlZShjdXJDaGlsZCk7XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5kZXhUcmVlKGZyb21Ob2RlKTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZU5vZGVBZGRlZChlbCkge1xuICAgICAgb25Ob2RlQWRkZWQoZWwpO1xuXG4gICAgICB2YXIgY3VyQ2hpbGQgPSBlbC5maXJzdENoaWxkO1xuICAgICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0U2libGluZyA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHZhciB1bm1hdGNoZWRGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBba2V5XTtcbiAgICAgICAgICAvLyBpZiB3ZSBmaW5kIGEgZHVwbGljYXRlICNpZCBub2RlIGluIGNhY2hlLCByZXBsYWNlIGBlbGAgd2l0aCBjYWNoZSB2YWx1ZVxuICAgICAgICAgIC8vIGFuZCBtb3JwaCBpdCB0byB0aGUgY2hpbGQgbm9kZS5cbiAgICAgICAgICBpZiAodW5tYXRjaGVkRnJvbUVsICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyQ2hpbGQsIHVubWF0Y2hlZEZyb21FbCkpIHtcbiAgICAgICAgICAgIGN1ckNoaWxkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHVubWF0Y2hlZEZyb21FbCwgY3VyQ2hpbGQpO1xuICAgICAgICAgICAgbW9ycGhFbCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1ckNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgY2FsbCBmb3IgY3VyQ2hpbGQgYW5kIGl0J3MgY2hpbGRyZW4gdG8gc2VlIGlmIHdlIGZpbmQgc29tZXRoaW5nIGluXG4gICAgICAgICAgLy8gZnJvbU5vZGVzTG9va3VwXG4gICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1ckNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1ckNoaWxkID0gbmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW51cEZyb21FbChmcm9tRWwsIGN1ckZyb21Ob2RlQ2hpbGQsIGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAvLyBXZSBoYXZlIHByb2Nlc3NlZCBhbGwgb2YgdGhlIFwidG8gbm9kZXNcIi4gSWYgY3VyRnJvbU5vZGVDaGlsZCBpc1xuICAgICAgLy8gbm9uLW51bGwgdGhlbiB3ZSBzdGlsbCBoYXZlIHNvbWUgZnJvbSBub2RlcyBsZWZ0IG92ZXIgdGhhdCBuZWVkXG4gICAgICAvLyB0byBiZSByZW1vdmVkXG4gICAgICB3aGlsZSAoY3VyRnJvbU5vZGVDaGlsZCkge1xuICAgICAgICB2YXIgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgaWYgKChjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCkpKSB7XG4gICAgICAgICAgLy8gU2luY2UgdGhlIG5vZGUgaXMga2V5ZWQgaXQgbWlnaHQgYmUgbWF0Y2hlZCB1cCBsYXRlciBzbyB3ZSBkZWZlclxuICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICByZW1vdmVOb2RlKGN1ckZyb21Ob2RlQ2hpbGQsIGZyb21FbCwgdHJ1ZSAvKiBza2lwIGtleWVkIG5vZGVzICovKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbU5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoRWwoZnJvbUVsLCB0b0VsLCBjaGlsZHJlbk9ubHkpIHtcbiAgICAgIHZhciB0b0VsS2V5ID0gZ2V0Tm9kZUtleSh0b0VsKTtcblxuICAgICAgaWYgKHRvRWxLZXkpIHtcbiAgICAgICAgLy8gSWYgYW4gZWxlbWVudCB3aXRoIGFuIElEIGlzIGJlaW5nIG1vcnBoZWQgdGhlbiBpdCB3aWxsIGJlIGluIHRoZSBmaW5hbFxuICAgICAgICAvLyBET00gc28gY2xlYXIgaXQgb3V0IG9mIHRoZSBzYXZlZCBlbGVtZW50cyBjb2xsZWN0aW9uXG4gICAgICAgIGRlbGV0ZSBmcm9tTm9kZXNMb29rdXBbdG9FbEtleV07XG4gICAgICB9XG5cbiAgICAgIGlmICghY2hpbGRyZW5Pbmx5KSB7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIGlmIChvbkJlZm9yZUVsVXBkYXRlZChmcm9tRWwsIHRvRWwpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVzIG9uIG9yaWdpbmFsIERPTSBlbGVtZW50IGZpcnN0XG4gICAgICAgIG1vcnBoQXR0cnMoZnJvbUVsLCB0b0VsKTtcbiAgICAgICAgLy8gb3B0aW9uYWxcbiAgICAgICAgb25FbFVwZGF0ZWQoZnJvbUVsKTtcblxuICAgICAgICBpZiAob25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZChmcm9tRWwsIHRvRWwpID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZnJvbUVsLm5vZGVOYW1lICE9PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXJzLlRFWFRBUkVBKGZyb21FbCwgdG9FbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9ycGhDaGlsZHJlbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgIHZhciBza2lwRnJvbSA9IHNraXBGcm9tQ2hpbGRyZW4oZnJvbUVsKTtcbiAgICAgIHZhciBjdXJUb05vZGVDaGlsZCA9IHRvRWwuZmlyc3RDaGlsZDtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyVG9Ob2RlS2V5O1xuICAgICAgdmFyIGN1ckZyb21Ob2RlS2V5O1xuXG4gICAgICB2YXIgZnJvbU5leHRTaWJsaW5nO1xuICAgICAgdmFyIHRvTmV4dFNpYmxpbmc7XG4gICAgICB2YXIgbWF0Y2hpbmdGcm9tRWw7XG5cbiAgICAgIC8vIHdhbGsgdGhlIGNoaWxkcmVuXG4gICAgICBvdXRlcjogd2hpbGUgKGN1clRvTm9kZUNoaWxkKSB7XG4gICAgICAgIHRvTmV4dFNpYmxpbmcgPSBjdXJUb05vZGVDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgY3VyVG9Ob2RlS2V5ID0gZ2V0Tm9kZUtleShjdXJUb05vZGVDaGlsZCk7XG5cbiAgICAgICAgLy8gd2FsayB0aGUgZnJvbU5vZGUgY2hpbGRyZW4gYWxsIHRoZSB3YXkgdGhyb3VnaFxuICAgICAgICB3aGlsZSAoIXNraXBGcm9tICYmIGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgICBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgaWYgKGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUgJiYgY3VyVG9Ob2RlQ2hpbGQuaXNTYW1lTm9kZShjdXJGcm9tTm9kZUNoaWxkKSkge1xuICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSB0b05leHRTaWJsaW5nO1xuICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlS2V5ID0gZ2V0Tm9kZUtleShjdXJGcm9tTm9kZUNoaWxkKTtcblxuICAgICAgICAgIHZhciBjdXJGcm9tTm9kZVR5cGUgPSBjdXJGcm9tTm9kZUNoaWxkLm5vZGVUeXBlO1xuXG4gICAgICAgICAgLy8gdGhpcyBtZWFucyBpZiB0aGUgY3VyRnJvbU5vZGVDaGlsZCBkb2VzbnQgaGF2ZSBhIG1hdGNoIHdpdGggdGhlIGN1clRvTm9kZUNoaWxkXG4gICAgICAgICAgdmFyIGlzQ29tcGF0aWJsZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIGlmIChjdXJGcm9tTm9kZVR5cGUgPT09IGN1clRvTm9kZUNoaWxkLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgLy8gQm90aCBub2RlcyBiZWluZyBjb21wYXJlZCBhcmUgRWxlbWVudCBub2Rlc1xuXG4gICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgdGFyZ2V0IG5vZGUgaGFzIGEga2V5IHNvIHdlIHdhbnQgdG8gbWF0Y2ggaXQgdXAgd2l0aCB0aGUgY29ycmVjdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlXG4gICAgICAgICAgICAgICAgaWYgKGN1clRvTm9kZUtleSAhPT0gY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlIGRvZXMgbm90IGhhdmUgYSBtYXRjaGluZyBrZXkgc29cbiAgICAgICAgICAgICAgICAgIC8vIGxldCdzIGNoZWNrIG91ciBsb29rdXAgdG8gc2VlIGlmIHRoZXJlIGlzIGEgbWF0Y2hpbmcgZWxlbWVudCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgICAgICAgIC8vIERPTSB0cmVlXG4gICAgICAgICAgICAgICAgICBpZiAoKG1hdGNoaW5nRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2N1clRvTm9kZUtleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9tTmV4dFNpYmxpbmcgPT09IG1hdGNoaW5nRnJvbUVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIGZvciBzaW5nbGUgZWxlbWVudCByZW1vdmFscy4gVG8gYXZvaWQgcmVtb3ZpbmcgdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRE9NIG5vZGUgb3V0IG9mIHRoZSB0cmVlIChzaW5jZSB0aGF0IGNhbiBicmVhayBDU1MgdHJhbnNpdGlvbnMsIGV0Yy4pLFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHdpbGwgaW5zdGVhZCBkaXNjYXJkIHRoZSBjdXJyZW50IG5vZGUgYW5kIHdhaXQgdW50aWwgdGhlIG5leHRcbiAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRpb24gdG8gcHJvcGVybHkgbWF0Y2ggdXAgdGhlIGtleWVkIHRhcmdldCBlbGVtZW50IHdpdGggaXRzIG1hdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCBpbiB0aGUgb3JpZ2luYWwgdHJlZVxuICAgICAgICAgICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGZvdW5kIGEgbWF0Y2hpbmcga2V5ZWQgZWxlbWVudCBzb21ld2hlcmUgaW4gdGhlIG9yaWdpbmFsIERPTSB0cmVlLlxuICAgICAgICAgICAgICAgICAgICAgIC8vIExldCdzIG1vdmUgdGhlIG9yaWdpbmFsIERPTSBub2RlIGludG8gdGhlIGN1cnJlbnQgcG9zaXRpb24gYW5kIG1vcnBoXG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXQuXG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBXZSB1c2UgaW5zZXJ0QmVmb3JlIGluc3RlYWQgb2YgcmVwbGFjZUNoaWxkIGJlY2F1c2Ugd2Ugd2FudCB0byBnbyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGByZW1vdmVOb2RlKClgIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSB0aGF0IGlzIGJlaW5nIGRpc2NhcmRlZCBzbyB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gYWxsIGxpZmVjeWNsZSBob29rcyBhcmUgY29ycmVjdGx5IGludm9rZWRcbiAgICAgICAgICAgICAgICAgICAgICBmcm9tRWwuaW5zZXJ0QmVmb3JlKG1hdGNoaW5nRnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkKTtcblxuICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGN1ckZyb21Ob2RlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBzdGlsbCBhIGNoYW5jZSB0aGV5IHdpbGwgYmUgbWF0Y2hlZCB1cCBsYXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IG1hdGNoaW5nRnJvbUVsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbm9kZXMgYXJlIG5vdCBjb21wYXRpYmxlIHNpbmNlIHRoZSBcInRvXCIgbm9kZSBoYXMgYSBrZXkgYW5kIHRoZXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG5vIG1hdGNoaW5nIGtleWVkIG5vZGUgaW4gdGhlIHNvdXJjZSB0cmVlXG4gICAgICAgICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJGcm9tTm9kZUtleSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmlnaW5hbCBoYXMgYSBrZXlcbiAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlzQ29tcGF0aWJsZSA9IGlzQ29tcGF0aWJsZSAhPT0gZmFsc2UgJiYgY29tcGFyZU5vZGVOYW1lcyhjdXJGcm9tTm9kZUNoaWxkLCBjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBjb21wYXRpYmxlIERPTSBlbGVtZW50cyBzbyB0cmFuc2Zvcm1cbiAgICAgICAgICAgICAgICAvLyB0aGUgY3VycmVudCBcImZyb21cIiBub2RlIHRvIG1hdGNoIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gdGFyZ2V0IERPTSBub2RlLlxuICAgICAgICAgICAgICAgIC8vIE1PUlBIXG4gICAgICAgICAgICAgICAgbW9ycGhFbChjdXJGcm9tTm9kZUNoaWxkLCBjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJGcm9tTm9kZVR5cGUgPT09IFRFWFRfTk9ERSB8fCBjdXJGcm9tTm9kZVR5cGUgPT0gQ09NTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIFRleHQgb3IgQ29tbWVudCBub2Rlc1xuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAvLyBTaW1wbHkgdXBkYXRlIG5vZGVWYWx1ZSBvbiB0aGUgb3JpZ2luYWwgbm9kZSB0b1xuICAgICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIHRleHQgdmFsdWVcbiAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlQ2hpbGQubm9kZVZhbHVlICE9PSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSA9IGN1clRvTm9kZUNoaWxkLm5vZGVWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzQ29tcGF0aWJsZSkge1xuICAgICAgICAgICAgLy8gQWR2YW5jZSBib3RoIHRoZSBcInRvXCIgY2hpbGQgYW5kIHRoZSBcImZyb21cIiBjaGlsZCBzaW5jZSB3ZSBmb3VuZCBhIG1hdGNoXG4gICAgICAgICAgICAvLyBOb3RoaW5nIGVsc2UgdG8gZG8gYXMgd2UgYWxyZWFkeSByZWN1cnNpdmVseSBjYWxsZWQgbW9ycGhDaGlsZHJlbiBhYm92ZVxuICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSB0b05leHRTaWJsaW5nO1xuICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5vIGNvbXBhdGlibGUgbWF0Y2ggc28gcmVtb3ZlIHRoZSBvbGQgbm9kZSBmcm9tIHRoZSBET00gYW5kIGNvbnRpbnVlIHRyeWluZyB0byBmaW5kIGFcbiAgICAgICAgICAvLyBtYXRjaCBpbiB0aGUgb3JpZ2luYWwgRE9NLiBIb3dldmVyLCB3ZSBvbmx5IGRvIHRoaXMgaWYgdGhlIGZyb20gbm9kZSBpcyBub3Qga2V5ZWRcbiAgICAgICAgICAvLyBzaW5jZSBpdCBpcyBwb3NzaWJsZSB0aGF0IGEga2V5ZWQgbm9kZSBtaWdodCBtYXRjaCB1cCB3aXRoIGEgbm9kZSBzb21ld2hlcmUgZWxzZSBpbiB0aGVcbiAgICAgICAgICAvLyB0YXJnZXQgdHJlZSBhbmQgd2UgZG9uJ3Qgd2FudCB0byBkaXNjYXJkIGl0IGp1c3QgeWV0IHNpbmNlIGl0IHN0aWxsIG1pZ2h0IGZpbmQgYVxuICAgICAgICAgIC8vIGhvbWUgaW4gdGhlIGZpbmFsIERPTSB0cmVlLiBBZnRlciBldmVyeXRoaW5nIGlzIGRvbmUgd2Ugd2lsbCByZW1vdmUgYW55IGtleWVkIG5vZGVzXG4gICAgICAgICAgLy8gdGhhdCBkaWRuJ3QgZmluZCBhIGhvbWVcbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAgIC8vIHRoZSBhY3R1YWwgcmVtb3ZhbCB0byBsYXRlclxuICAgICAgICAgICAgYWRkS2V5ZWRSZW1vdmFsKGN1ckZyb21Ob2RlS2V5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTk9URTogd2Ugc2tpcCBuZXN0ZWQga2V5ZWQgbm9kZXMgZnJvbSBiZWluZyByZW1vdmVkIHNpbmNlIHRoZXJlIGlzXG4gICAgICAgICAgICAvLyAgICAgICBzdGlsbCBhIGNoYW5jZSB0aGV5IHdpbGwgYmUgbWF0Y2hlZCB1cCBsYXRlclxuICAgICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgICAgfSAvLyBFTkQ6IHdoaWxlKGN1ckZyb21Ob2RlQ2hpbGQpIHt9XG5cbiAgICAgICAgLy8gSWYgd2UgZ290IHRoaXMgZmFyIHRoZW4gd2UgZGlkIG5vdCBmaW5kIGEgY2FuZGlkYXRlIG1hdGNoIGZvclxuICAgICAgICAvLyBvdXIgXCJ0byBub2RlXCIgYW5kIHdlIGV4aGF1c3RlZCBhbGwgb2YgdGhlIGNoaWxkcmVuIFwiZnJvbVwiXG4gICAgICAgIC8vIG5vZGVzLiBUaGVyZWZvcmUsIHdlIHdpbGwganVzdCBhcHBlbmQgdGhlIGN1cnJlbnQgXCJ0b1wiIG5vZGVcbiAgICAgICAgLy8gdG8gdGhlIGVuZFxuICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5ICYmIChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSAmJiBjb21wYXJlTm9kZU5hbWVzKG1hdGNoaW5nRnJvbUVsLCBjdXJUb05vZGVDaGlsZCkpIHtcbiAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgIGlmKCFza2lwRnJvbSl7IGFkZENoaWxkKGZyb21FbCwgbWF0Y2hpbmdGcm9tRWwpOyB9XG4gICAgICAgICAgbW9ycGhFbChtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZFJlc3VsdCA9IG9uQmVmb3JlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICBpZiAob25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAob25CZWZvcmVOb2RlQWRkZWRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBvbkJlZm9yZU5vZGVBZGRlZFJlc3VsdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1clRvTm9kZUNoaWxkLmFjdHVhbGl6ZSkge1xuICAgICAgICAgICAgICBjdXJUb05vZGVDaGlsZCA9IGN1clRvTm9kZUNoaWxkLmFjdHVhbGl6ZShmcm9tRWwub3duZXJEb2N1bWVudCB8fCBkb2MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkQ2hpbGQoZnJvbUVsLCBjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgICBoYW5kbGVOb2RlQWRkZWQoY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cblxuICAgICAgY2xlYW51cEZyb21FbChmcm9tRWwsIGN1ckZyb21Ob2RlQ2hpbGQsIGN1ckZyb21Ob2RlS2V5KTtcblxuICAgICAgdmFyIHNwZWNpYWxFbEhhbmRsZXIgPSBzcGVjaWFsRWxIYW5kbGVyc1tmcm9tRWwubm9kZU5hbWVdO1xuICAgICAgaWYgKHNwZWNpYWxFbEhhbmRsZXIpIHtcbiAgICAgICAgc3BlY2lhbEVsSGFuZGxlcihmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH0gLy8gRU5EOiBtb3JwaENoaWxkcmVuKC4uLilcblxuICAgIHZhciBtb3JwaGVkTm9kZSA9IGZyb21Ob2RlO1xuICAgIHZhciBtb3JwaGVkTm9kZVR5cGUgPSBtb3JwaGVkTm9kZS5ub2RlVHlwZTtcbiAgICB2YXIgdG9Ob2RlVHlwZSA9IHRvTm9kZS5ub2RlVHlwZTtcblxuICAgIGlmICghY2hpbGRyZW5Pbmx5KSB7XG4gICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgd2UgYXJlIGdpdmVuIHR3byBET00gbm9kZXMgdGhhdCBhcmUgbm90XG4gICAgICAvLyBjb21wYXRpYmxlIChlLmcuIDxkaXY+IC0tPiA8c3Bhbj4gb3IgPGRpdj4gLS0+IFRFWFQpXG4gICAgICBpZiAobW9ycGhlZE5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgaWYgKHRvTm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgIGlmICghY29tcGFyZU5vZGVOYW1lcyhmcm9tTm9kZSwgdG9Ob2RlKSkge1xuICAgICAgICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICAgICAgICAgIG1vcnBoZWROb2RlID0gbW92ZUNoaWxkcmVuKGZyb21Ob2RlLCBjcmVhdGVFbGVtZW50TlModG9Ob2RlLm5vZGVOYW1lLCB0b05vZGUubmFtZXNwYWNlVVJJKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEdvaW5nIGZyb20gYW4gZWxlbWVudCBub2RlIHRvIGEgdGV4dCBub2RlXG4gICAgICAgICAgbW9ycGhlZE5vZGUgPSB0b05vZGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobW9ycGhlZE5vZGVUeXBlID09PSBURVhUX05PREUgfHwgbW9ycGhlZE5vZGVUeXBlID09PSBDT01NRU5UX05PREUpIHsgLy8gVGV4dCBvciBjb21tZW50IG5vZGVcbiAgICAgICAgaWYgKHRvTm9kZVR5cGUgPT09IG1vcnBoZWROb2RlVHlwZSkge1xuICAgICAgICAgIGlmIChtb3JwaGVkTm9kZS5ub2RlVmFsdWUgIT09IHRvTm9kZS5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgIG1vcnBoZWROb2RlLm5vZGVWYWx1ZSA9IHRvTm9kZS5ub2RlVmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG1vcnBoZWROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRleHQgbm9kZSB0byBzb21ldGhpbmcgZWxzZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vcnBoZWROb2RlID09PSB0b05vZGUpIHtcbiAgICAgIC8vIFRoZSBcInRvIG5vZGVcIiB3YXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgXCJmcm9tIG5vZGVcIiBzbyB3ZSBoYWQgdG9cbiAgICAgIC8vIHRvc3Mgb3V0IHRoZSBcImZyb20gbm9kZVwiIGFuZCB1c2UgdGhlIFwidG8gbm9kZVwiXG4gICAgICBvbk5vZGVEaXNjYXJkZWQoZnJvbU5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodG9Ob2RlLmlzU2FtZU5vZGUgJiYgdG9Ob2RlLmlzU2FtZU5vZGUobW9ycGhlZE5vZGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbW9ycGhFbChtb3JwaGVkTm9kZSwgdG9Ob2RlLCBjaGlsZHJlbk9ubHkpO1xuXG4gICAgICAvLyBXZSBub3cgbmVlZCB0byBsb29wIG92ZXIgYW55IGtleWVkIG5vZGVzIHRoYXQgbWlnaHQgbmVlZCB0byBiZVxuICAgICAgLy8gcmVtb3ZlZC4gV2Ugb25seSBkbyB0aGUgcmVtb3ZhbCBpZiB3ZSBrbm93IHRoYXQgdGhlIGtleWVkIG5vZGVcbiAgICAgIC8vIG5ldmVyIGZvdW5kIGEgbWF0Y2guIFdoZW4gYSBrZXllZCBub2RlIGlzIG1hdGNoZWQgdXAgd2UgcmVtb3ZlXG4gICAgICAvLyBpdCBvdXQgb2YgZnJvbU5vZGVzTG9va3VwIGFuZCB3ZSB1c2UgZnJvbU5vZGVzTG9va3VwIHRvIGRldGVybWluZVxuICAgICAgLy8gaWYgYSBrZXllZCBub2RlIGhhcyBiZWVuIG1hdGNoZWQgdXAgb3Igbm90XG4gICAgICBpZiAoa2V5ZWRSZW1vdmFsTGlzdCkge1xuICAgICAgICBmb3IgKHZhciBpPTAsIGxlbj1rZXllZFJlbW92YWxMaXN0Lmxlbmd0aDsgaTxsZW47IGkrKykge1xuICAgICAgICAgIHZhciBlbFRvUmVtb3ZlID0gZnJvbU5vZGVzTG9va3VwW2tleWVkUmVtb3ZhbExpc3RbaV1dO1xuICAgICAgICAgIGlmIChlbFRvUmVtb3ZlKSB7XG4gICAgICAgICAgICByZW1vdmVOb2RlKGVsVG9SZW1vdmUsIGVsVG9SZW1vdmUucGFyZW50Tm9kZSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2hpbGRyZW5Pbmx5ICYmIG1vcnBoZWROb2RlICE9PSBmcm9tTm9kZSAmJiBmcm9tTm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICBpZiAobW9ycGhlZE5vZGUuYWN0dWFsaXplKSB7XG4gICAgICAgIG1vcnBoZWROb2RlID0gbW9ycGhlZE5vZGUuYWN0dWFsaXplKGZyb21Ob2RlLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgIH1cbiAgICAgIC8vIElmIHdlIGhhZCB0byBzd2FwIG91dCB0aGUgZnJvbSBub2RlIHdpdGggYSBuZXcgbm9kZSBiZWNhdXNlIHRoZSBvbGRcbiAgICAgIC8vIG5vZGUgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHRhcmdldCBub2RlIHRoZW4gd2UgbmVlZCB0b1xuICAgICAgLy8gcmVwbGFjZSB0aGUgb2xkIERPTSBub2RlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS4gVGhpcyBpcyBvbmx5XG4gICAgICAvLyBwb3NzaWJsZSBpZiB0aGUgb3JpZ2luYWwgRE9NIG5vZGUgd2FzIHBhcnQgb2YgYSBET00gdHJlZSB3aGljaFxuICAgICAgLy8gd2Uga25vdyBpcyB0aGUgY2FzZSBpZiBpdCBoYXMgYSBwYXJlbnQgbm9kZS5cbiAgICAgIGZyb21Ob2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG1vcnBoZWROb2RlLCBmcm9tTm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vcnBoZWROb2RlO1xuICB9O1xufVxuXG52YXIgbW9ycGhkb20gPSBtb3JwaGRvbUZhY3RvcnkobW9ycGhBdHRycyk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vcnBoZG9tO1xuIiwgImltcG9ydCB7XG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9ESVNBQkxFX1dJVEgsXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFBIWF9QUlVORSxcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfU0tJUCxcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1RSSUdHRVJfQUNUSU9OLFxuICBQSFhfVVBEQVRFLFxuICBQSFhfU1RSRUFNLFxuICBQSFhfU1RSRUFNX1JFRixcbiAgUEhYX1ZJRVdQT1JUX1RPUCxcbiAgUEhYX1ZJRVdQT1JUX0JPVFRPTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgZGV0ZWN0RHVwbGljYXRlSWRzLFxuICBpc0NpZFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBET01Qb3N0TW9ycGhSZXN0b3JlciBmcm9tIFwiLi9kb21fcG9zdF9tb3JwaF9yZXN0b3JlclwiXG5pbXBvcnQgbW9ycGhkb20gZnJvbSBcIm1vcnBoZG9tXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRE9NUGF0Y2gge1xuICBzdGF0aWMgcGF0Y2hFbChmcm9tRWwsIHRvRWwsIGFjdGl2ZUVsZW1lbnQpe1xuICAgIG1vcnBoZG9tKGZyb21FbCwgdG9FbCwge1xuICAgICAgY2hpbGRyZW5Pbmx5OiBmYWxzZSxcbiAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgIGlmKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGZyb21FbCkgJiYgRE9NLmlzRm9ybUlucHV0KGZyb21FbCkpe1xuICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3RydWN0b3IodmlldywgY29udGFpbmVyLCBpZCwgaHRtbCwgc3RyZWFtcywgdGFyZ2V0Q0lEKXtcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5saXZlU29ja2V0ID0gdmlldy5saXZlU29ja2V0XG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXJcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLnJvb3RJRCA9IHZpZXcucm9vdC5pZFxuICAgIHRoaXMuaHRtbCA9IGh0bWxcbiAgICB0aGlzLnN0cmVhbXMgPSBzdHJlYW1zXG4gICAgdGhpcy5zdHJlYW1JbnNlcnRzID0ge31cbiAgICB0aGlzLnRhcmdldENJRCA9IHRhcmdldENJRFxuICAgIHRoaXMuY2lkUGF0Y2ggPSBpc0NpZCh0aGlzLnRhcmdldENJRClcbiAgICB0aGlzLnBlbmRpbmdSZW1vdmVzID0gW11cbiAgICB0aGlzLnBoeFJlbW92ZSA9IHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgdGhpcy5jYWxsYmFja3MgPSB7XG4gICAgICBiZWZvcmVhZGRlZDogW10sIGJlZm9yZXVwZGF0ZWQ6IFtdLCBiZWZvcmVwaHhDaGlsZEFkZGVkOiBbXSxcbiAgICAgIGFmdGVyYWRkZWQ6IFtdLCBhZnRlcnVwZGF0ZWQ6IFtdLCBhZnRlcmRpc2NhcmRlZDogW10sIGFmdGVycGh4Q2hpbGRBZGRlZDogW10sXG4gICAgICBhZnRlcnRyYW5zaXRpb25zRGlzY2FyZGVkOiBbXVxuICAgIH1cbiAgfVxuXG4gIGJlZm9yZShraW5kLCBjYWxsYmFjayl7IHRoaXMuY2FsbGJhY2tzW2BiZWZvcmUke2tpbmR9YF0ucHVzaChjYWxsYmFjaykgfVxuICBhZnRlcihraW5kLCBjYWxsYmFjayl7IHRoaXMuY2FsbGJhY2tzW2BhZnRlciR7a2luZH1gXS5wdXNoKGNhbGxiYWNrKSB9XG5cbiAgdHJhY2tCZWZvcmUoa2luZCwgLi4uYXJncyl7XG4gICAgdGhpcy5jYWxsYmFja3NbYGJlZm9yZSR7a2luZH1gXS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKC4uLmFyZ3MpKVxuICB9XG5cbiAgdHJhY2tBZnRlcihraW5kLCAuLi5hcmdzKXtcbiAgICB0aGlzLmNhbGxiYWNrc1tgYWZ0ZXIke2tpbmR9YF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayguLi5hcmdzKSlcbiAgfVxuXG4gIG1hcmtQcnVuYWJsZUNvbnRlbnRGb3JSZW1vdmFsKCl7XG4gICAgbGV0IHBoeFVwZGF0ZSA9IHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9VUERBVEUpXG4gICAgRE9NLmFsbCh0aGlzLmNvbnRhaW5lciwgYFske3BoeFVwZGF0ZX09JHtQSFhfU1RSRUFNfV1gLCBlbCA9PiBlbC5pbm5lckhUTUwgPSBcIlwiKVxuICAgIERPTS5hbGwodGhpcy5jb250YWluZXIsIGBbJHtwaHhVcGRhdGV9PWFwcGVuZF0gPiAqLCBbJHtwaHhVcGRhdGV9PXByZXBlbmRdID4gKmAsIGVsID0+IHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUFJVTkUsIFwiXCIpXG4gICAgfSlcbiAgfVxuXG4gIHBlcmZvcm0oKXtcbiAgICBsZXQge3ZpZXcsIGxpdmVTb2NrZXQsIGNvbnRhaW5lciwgaHRtbH0gPSB0aGlzXG4gICAgbGV0IHRhcmdldENvbnRhaW5lciA9IHRoaXMuaXNDSURQYXRjaCgpID8gdGhpcy50YXJnZXRDSURDb250YWluZXIoaHRtbCkgOiBjb250YWluZXJcbiAgICBpZih0aGlzLmlzQ0lEUGF0Y2goKSAmJiAhdGFyZ2V0Q29udGFpbmVyKXsgcmV0dXJuIH1cblxuICAgIGxldCBmb2N1c2VkID0gbGl2ZVNvY2tldC5nZXRBY3RpdmVFbGVtZW50KClcbiAgICBsZXQge3NlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmR9ID0gZm9jdXNlZCAmJiBET00uaGFzU2VsZWN0aW9uUmFuZ2UoZm9jdXNlZCkgPyBmb2N1c2VkIDoge31cbiAgICBsZXQgcGh4VXBkYXRlID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9VUERBVEUpXG4gICAgbGV0IHBoeEZlZWRiYWNrRm9yID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpXG4gICAgbGV0IGRpc2FibGVXaXRoID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpXG4gICAgbGV0IHBoeFZpZXdwb3J0VG9wID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9WSUVXUE9SVF9UT1ApXG4gICAgbGV0IHBoeFZpZXdwb3J0Qm90dG9tID0gbGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9WSUVXUE9SVF9CT1RUT00pXG4gICAgbGV0IHBoeFRyaWdnZXJFeHRlcm5hbCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVFJJR0dFUl9BQ1RJT04pXG4gICAgbGV0IGFkZGVkID0gW11cbiAgICBsZXQgdHJhY2tlZElucHV0cyA9IFtdXG4gICAgbGV0IHVwZGF0ZXMgPSBbXVxuICAgIGxldCBhcHBlbmRQcmVwZW5kVXBkYXRlcyA9IFtdXG5cbiAgICBsZXQgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gbnVsbFxuXG4gICAgbGV0IGRpZmZIVE1MID0gbGl2ZVNvY2tldC50aW1lKFwicHJlbW9ycGggY29udGFpbmVyIHByZXBcIiwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnVpbGREaWZmSFRNTChjb250YWluZXIsIGh0bWwsIHBoeFVwZGF0ZSwgdGFyZ2V0Q29udGFpbmVyKVxuICAgIH0pXG5cbiAgICB0aGlzLnRyYWNrQmVmb3JlKFwiYWRkZWRcIiwgY29udGFpbmVyKVxuICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGNvbnRhaW5lciwgY29udGFpbmVyKVxuXG4gICAgbGl2ZVNvY2tldC50aW1lKFwibW9ycGhkb21cIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdHJlYW1zLmZvckVhY2goKFtyZWYsIGluc2VydHMsIGRlbGV0ZUlkcywgcmVzZXRdKSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGluc2VydHMpLmZvckVhY2goKFtrZXksIFtzdHJlYW1BdCwgbGltaXRdXSkgPT4ge1xuICAgICAgICAgIHRoaXMuc3RyZWFtSW5zZXJ0c1trZXldID0ge3JlZiwgc3RyZWFtQXQsIGxpbWl0fVxuICAgICAgICB9KVxuICAgICAgICBpZihyZXNldCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICBET00uYWxsKGNvbnRhaW5lciwgYFske1BIWF9TVFJFQU1fUkVGfT1cIiR7cmVmfVwiXWAsIGNoaWxkID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KGNoaWxkKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlSWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbaWQ9XCIke2lkfVwiXWApXG4gICAgICAgICAgaWYoY2hpbGQpeyB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZCkgfVxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgICAgbW9ycGhkb20odGFyZ2V0Q29udGFpbmVyLCBkaWZmSFRNTCwge1xuICAgICAgICBjaGlsZHJlbk9ubHk6IHRhcmdldENvbnRhaW5lci5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkgPT09IG51bGwsXG4gICAgICAgIGdldE5vZGVLZXk6IChub2RlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIERPTS5pc1BoeERlc3Ryb3llZChub2RlKSA/IG51bGwgOiBub2RlLmlkXG4gICAgICAgIH0sXG4gICAgICAgIC8vIHNraXAgaW5kZXhpbmcgZnJvbSBjaGlsZHJlbiB3aGVuIGNvbnRhaW5lciBpcyBzdHJlYW1cbiAgICAgICAgc2tpcEZyb21DaGlsZHJlbjogKGZyb20pID0+IHsgcmV0dXJuIGZyb20uZ2V0QXR0cmlidXRlKHBoeFVwZGF0ZSkgPT09IFBIWF9TVFJFQU0gfSxcbiAgICAgICAgLy8gdGVsbCBtb3JwaGRvbSBob3cgdG8gYWRkIGEgY2hpbGRcbiAgICAgICAgYWRkQ2hpbGQ6IChwYXJlbnQsIGNoaWxkKSA9PiB7XG4gICAgICAgICAgbGV0IHtyZWYsIHN0cmVhbUF0LCBsaW1pdH0gPSB0aGlzLmdldFN0cmVhbUluc2VydChjaGlsZClcbiAgICAgICAgICBpZihyZWYgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKSB9XG5cbiAgICAgICAgICBET00ucHV0U3RpY2t5KGNoaWxkLCBQSFhfU1RSRUFNX1JFRiwgZWwgPT4gZWwuc2V0QXR0cmlidXRlKFBIWF9TVFJFQU1fUkVGLCByZWYpKVxuXG4gICAgICAgICAgLy8gc3RyZWFtaW5nXG4gICAgICAgICAgaWYoc3RyZWFtQXQgPT09IDApe1xuICAgICAgICAgICAgcGFyZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgY2hpbGQpXG4gICAgICAgICAgfSBlbHNlIGlmKHN0cmVhbUF0ID09PSAtMSl7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpXG4gICAgICAgICAgfSBlbHNlIGlmKHN0cmVhbUF0ID4gMCl7XG4gICAgICAgICAgICBsZXQgc2libGluZyA9IEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKVtzdHJlYW1BdF1cbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHNpYmxpbmcpXG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBjaGlsZHJlbiA9IGxpbWl0ICE9PSBudWxsICYmIEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKVxuICAgICAgICAgIGlmKGxpbWl0ICYmIGxpbWl0IDwgMCAmJiBjaGlsZHJlbi5sZW5ndGggPiBsaW1pdCAqIC0xKXtcbiAgICAgICAgICAgIGNoaWxkcmVuLnNsaWNlKDAsIGNoaWxkcmVuLmxlbmd0aCArIGxpbWl0KS5mb3JFYWNoKGNoaWxkID0+IHRoaXMucmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KGNoaWxkKSlcbiAgICAgICAgICB9IGVsc2UgaWYobGltaXQgJiYgbGltaXQgPj0gMCAmJiBjaGlsZHJlbi5sZW5ndGggPiBsaW1pdCl7XG4gICAgICAgICAgICBjaGlsZHJlbi5zbGljZShsaW1pdCkuZm9yRWFjaChjaGlsZCA9PiB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZCkpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkJlZm9yZU5vZGVBZGRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgRE9NLm1heWJlQWRkUHJpdmF0ZUhvb2tzKGVsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pXG4gICAgICAgICAgdGhpcy50cmFja0JlZm9yZShcImFkZGVkXCIsIGVsKVxuICAgICAgICAgIHJldHVybiBlbFxuICAgICAgICB9LFxuICAgICAgICBvbk5vZGVBZGRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKXsgdGhpcy5tYXliZVJlT3JkZXJTdHJlYW0oZWwpIH1cblxuICAgICAgICAgIC8vIGhhY2sgdG8gZml4IFNhZmFyaSBoYW5kbGluZyBvZiBpbWcgc3Jjc2V0IGFuZCB2aWRlbyB0YWdzXG4gICAgICAgICAgaWYoZWwgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ICYmIGVsLnNyY3NldCl7XG4gICAgICAgICAgICBlbC5zcmNzZXQgPSBlbC5zcmNzZXRcbiAgICAgICAgICB9IGVsc2UgaWYoZWwgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50ICYmIGVsLmF1dG9wbGF5KXtcbiAgICAgICAgICAgIGVsLnBsYXkoKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZihET00uaXNOb3dUcmlnZ2VyRm9ybUV4dGVybmFsKGVsLCBwaHhUcmlnZ2VyRXh0ZXJuYWwpKXtcbiAgICAgICAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IGVsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShcIm5hbWVcIikpe1xuICAgICAgICAgICAgdHJhY2tlZElucHV0cy5wdXNoKGVsKVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBuZXN0ZWQgdmlldyBoYW5kbGluZ1xuICAgICAgICAgIGlmKChET00uaXNQaHhDaGlsZChlbCkgJiYgdmlldy5vd25zRWxlbWVudChlbCkpIHx8IERPTS5pc1BoeFN0aWNreShlbCkgJiYgdmlldy5vd25zRWxlbWVudChlbC5wYXJlbnROb2RlKSl7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJwaHhDaGlsZEFkZGVkXCIsIGVsKVxuICAgICAgICAgIH1cbiAgICAgICAgICBhZGRlZC5wdXNoKGVsKVxuICAgICAgICB9LFxuICAgICAgICBvbk5vZGVEaXNjYXJkZWQ6IChlbCkgPT4gdGhpcy5vbk5vZGVEaXNjYXJkZWQoZWwpLFxuICAgICAgICBvbkJlZm9yZU5vZGVEaXNjYXJkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1BSVU5FKSAhPT0gbnVsbCl7IHJldHVybiB0cnVlIH1cbiAgICAgICAgICBpZihlbC5wYXJlbnRFbGVtZW50ICE9PSBudWxsICYmIGVsLmlkICYmXG4gICAgICAgICAgICBET00uaXNQaHhVcGRhdGUoZWwucGFyZW50RWxlbWVudCwgcGh4VXBkYXRlLCBbUEhYX1NUUkVBTSwgXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYodGhpcy5tYXliZVBlbmRpbmdSZW1vdmUoZWwpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZih0aGlzLnNraXBDSURTaWJsaW5nKGVsKSl7IHJldHVybiBmYWxzZSB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBvbkVsVXBkYXRlZDogKGVsKSA9PiB7XG4gICAgICAgICAgaWYoRE9NLmlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKSl7XG4gICAgICAgICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBlbFxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVzLnB1c2goZWwpXG4gICAgICAgICAgdGhpcy5tYXliZVJlT3JkZXJTdHJlYW0oZWwpXG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlRWxVcGRhdGVkOiAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICAgICAgRE9NLmNsZWFuQ2hpbGROb2Rlcyh0b0VsLCBwaHhVcGRhdGUpXG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyh0b0VsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYoRE9NLmlzUGh4U3RpY2t5KGZyb21FbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKERPTS5pc0lnbm9yZWQoZnJvbUVsLCBwaHhVcGRhdGUpIHx8IChmcm9tRWwuZm9ybSAmJiBmcm9tRWwuZm9ybS5pc1NhbWVOb2RlKGV4dGVybmFsRm9ybVRyaWdnZXJlZCkpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2lzSWdub3JlZDogdHJ1ZX0pXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZnJvbUVsLnR5cGUgPT09IFwibnVtYmVyXCIgJiYgKGZyb21FbC52YWxpZGl0eSAmJiBmcm9tRWwudmFsaWRpdHkuYmFkSW5wdXQpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZighRE9NLnN5bmNQZW5kaW5nUmVmKGZyb21FbCwgdG9FbCwgZGlzYWJsZVdpdGgpKXtcbiAgICAgICAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpe1xuICAgICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoRE9NLmlzUGh4Q2hpbGQodG9FbCkpe1xuICAgICAgICAgICAgbGV0IHByZXZTZXNzaW9uID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTilcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2V4Y2x1ZGU6IFtQSFhfU1RBVElDXX0pXG4gICAgICAgICAgICBpZihwcmV2U2Vzc2lvbiAhPT0gXCJcIil7IGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIHByZXZTZXNzaW9uKSB9XG4gICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3RJRClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uY29weVByaXZhdGVzKHRvRWwsIGZyb21FbClcblxuICAgICAgICAgIGxldCBpc0ZvY3VzZWRGb3JtRWwgPSBmb2N1c2VkICYmIGZyb21FbC5pc1NhbWVOb2RlKGZvY3VzZWQpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpXG4gICAgICAgICAgaWYoaXNGb2N1c2VkRm9ybUVsICYmIGZyb21FbC50eXBlICE9PSBcImhpZGRlblwiKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00uc3luY0F0dHJzVG9Qcm9wcyhmcm9tRWwpXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICB0cmFja2VkSW5wdXRzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKERPTS5pc1BoeFVwZGF0ZSh0b0VsLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMucHVzaChuZXcgRE9NUG9zdE1vcnBoUmVzdG9yZXIoZnJvbUVsLCB0b0VsLCB0b0VsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgRE9NLm1heWJlQWRkUHJpdmF0ZUhvb2tzKHRvRWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgICAgICAgIERPTS5zeW5jQXR0cnNUb1Byb3BzKHRvRWwpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKHRvRWwpXG4gICAgICAgICAgICBpZih0b0VsLmdldEF0dHJpYnV0ZShcIm5hbWVcIikpe1xuICAgICAgICAgICAgICB0cmFja2VkSW5wdXRzLnB1c2godG9FbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihsaXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpeyBkZXRlY3REdXBsaWNhdGVJZHMoKSB9XG5cbiAgICBpZihhcHBlbmRQcmVwZW5kVXBkYXRlcy5sZW5ndGggPiAwKXtcbiAgICAgIGxpdmVTb2NrZXQudGltZShcInBvc3QtbW9ycGggYXBwZW5kL3ByZXBlbmQgcmVzdG9yYXRpb25cIiwgKCkgPT4ge1xuICAgICAgICBhcHBlbmRQcmVwZW5kVXBkYXRlcy5mb3JFYWNoKHVwZGF0ZSA9PiB1cGRhdGUucGVyZm9ybSgpKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0cmFja2VkSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgRE9NLm1heWJlSGlkZUZlZWRiYWNrKHRhcmdldENvbnRhaW5lciwgaW5wdXQsIHBoeEZlZWRiYWNrRm9yKVxuICAgIH0pXG5cbiAgICBsaXZlU29ja2V0LnNpbGVuY2VFdmVudHMoKCkgPT4gRE9NLnJlc3RvcmVGb2N1cyhmb2N1c2VkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSlcbiAgICBET00uZGlzcGF0Y2hFdmVudChkb2N1bWVudCwgXCJwaHg6dXBkYXRlXCIpXG4gICAgYWRkZWQuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJhZGRlZFwiLCBlbCkpXG4gICAgdXBkYXRlcy5mb3JFYWNoKGVsID0+IHRoaXMudHJhY2tBZnRlcihcInVwZGF0ZWRcIiwgZWwpKVxuXG4gICAgdGhpcy50cmFuc2l0aW9uUGVuZGluZ1JlbW92ZXMoKVxuXG4gICAgaWYoZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkKXtcbiAgICAgIGxpdmVTb2NrZXQudW5sb2FkKClcbiAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZC5zdWJtaXQoKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgb25Ob2RlRGlzY2FyZGVkKGVsKXtcbiAgICAvLyBuZXN0ZWQgdmlldyBoYW5kbGluZ1xuICAgIGlmKERPTS5pc1BoeENoaWxkKGVsKSB8fCBET00uaXNQaHhTdGlja3koZWwpKXsgdGhpcy5saXZlU29ja2V0LmRlc3Ryb3lWaWV3QnlFbChlbCkgfVxuICAgIHRoaXMudHJhY2tBZnRlcihcImRpc2NhcmRlZFwiLCBlbClcbiAgfVxuXG4gIG1heWJlUGVuZGluZ1JlbW92ZShub2RlKXtcbiAgICBpZihub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSh0aGlzLnBoeFJlbW92ZSkgIT09IG51bGwpe1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3Zlcy5wdXNoKG5vZGUpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpe1xuICAgIGlmKCF0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShjaGlsZCkpe1xuICAgICAgY2hpbGQucmVtb3ZlKClcbiAgICAgIHRoaXMub25Ob2RlRGlzY2FyZGVkKGNoaWxkKVxuICAgIH1cbiAgfVxuXG4gIGdldFN0cmVhbUluc2VydChlbCl7XG4gICAgbGV0IGluc2VydCA9IGVsLmlkID8gdGhpcy5zdHJlYW1JbnNlcnRzW2VsLmlkXSA6IHt9XG4gICAgcmV0dXJuIGluc2VydCB8fCB7fVxuICB9XG5cbiAgbWF5YmVSZU9yZGVyU3RyZWFtKGVsKXtcbiAgICBsZXQge3JlZiwgc3RyZWFtQXQsIGxpbWl0fSA9IHRoaXMuZ2V0U3RyZWFtSW5zZXJ0KGVsKVxuICAgIGlmKHN0cmVhbUF0ID09PSB1bmRlZmluZWQpeyByZXR1cm4gfVxuXG4gICAgLy8gd2UgbmVlZCB0byB0aGUgUEhYX1NUUkVBTV9SRUYgaGVyZSBhcyB3ZWxsIGFzIGFkZENoaWxkIGlzIGludm9rZWQgb25seSBmb3IgcGFyZW50c1xuICAgIERPTS5wdXRTdGlja3koZWwsIFBIWF9TVFJFQU1fUkVGLCBlbCA9PiBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NUUkVBTV9SRUYsIHJlZikpXG5cbiAgICBpZihzdHJlYW1BdCA9PT0gMCl7XG4gICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgZWwucGFyZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZClcbiAgICB9IGVsc2UgaWYoc3RyZWFtQXQgPiAwKXtcbiAgICAgIGxldCBjaGlsZHJlbiA9IEFycmF5LmZyb20oZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbilcbiAgICAgIGxldCBvbGRJbmRleCA9IGNoaWxkcmVuLmluZGV4T2YoZWwpXG4gICAgICBpZihzdHJlYW1BdCA+PSBjaGlsZHJlbi5sZW5ndGggLSAxKXtcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBzaWJsaW5nID0gY2hpbGRyZW5bc3RyZWFtQXRdXG4gICAgICAgIGlmKG9sZEluZGV4ID4gc3RyZWFtQXQpe1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nLm5leHRFbGVtZW50U2libGluZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRyYW5zaXRpb25QZW5kaW5nUmVtb3Zlcygpe1xuICAgIGxldCB7cGVuZGluZ1JlbW92ZXMsIGxpdmVTb2NrZXR9ID0gdGhpc1xuICAgIGlmKHBlbmRpbmdSZW1vdmVzLmxlbmd0aCA+IDApe1xuICAgICAgbGl2ZVNvY2tldC50cmFuc2l0aW9uUmVtb3ZlcyhwZW5kaW5nUmVtb3ZlcylcbiAgICAgIGxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmVzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZCA9IERPTS5maXJzdFBoeENoaWxkKGVsKVxuICAgICAgICAgIGlmKGNoaWxkKXsgbGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoY2hpbGQpIH1cbiAgICAgICAgICBlbC5yZW1vdmUoKVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBwZW5kaW5nUmVtb3ZlcylcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaXNDSURQYXRjaCgpeyByZXR1cm4gdGhpcy5jaWRQYXRjaCB9XG5cbiAgc2tpcENJRFNpYmxpbmcoZWwpe1xuICAgIHJldHVybiBlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9TS0lQKSAhPT0gbnVsbFxuICB9XG5cbiAgdGFyZ2V0Q0lEQ29udGFpbmVyKGh0bWwpe1xuICAgIGlmKCF0aGlzLmlzQ0lEUGF0Y2goKSl7IHJldHVybiB9XG4gICAgbGV0IFtmaXJzdCwgLi4ucmVzdF0gPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuY29udGFpbmVyLCB0aGlzLnRhcmdldENJRClcbiAgICBpZihyZXN0Lmxlbmd0aCA9PT0gMCAmJiBET00uY2hpbGROb2RlTGVuZ3RoKGh0bWwpID09PSAxKXtcbiAgICAgIHJldHVybiBmaXJzdFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlyc3QgJiYgZmlyc3QucGFyZW50Tm9kZVxuICAgIH1cbiAgfVxuXG4gIC8vIGJ1aWxkcyBIVE1MIGZvciBtb3JwaGRvbSBwYXRjaFxuICAvLyAtIGZvciBmdWxsIHBhdGNoZXMgb2YgTGl2ZVZpZXcgb3IgYSBjb21wb25lbnQgd2l0aCBhIHNpbmdsZVxuICAvLyAgIHJvb3Qgbm9kZSwgc2ltcGx5IHJldHVybnMgdGhlIEhUTUxcbiAgLy8gLSBmb3IgcGF0Y2hlcyBvZiBhIGNvbXBvbmVudCB3aXRoIG11bHRpcGxlIHJvb3Qgbm9kZXMsIHRoZVxuICAvLyAgIHBhcmVudCBub2RlIGJlY29tZXMgdGhlIHRhcmdldCBjb250YWluZXIgYW5kIG5vbi1jb21wb25lbnRcbiAgLy8gICBzaWJsaW5ncyBhcmUgbWFya2VkIGFzIHNraXAuXG4gIGJ1aWxkRGlmZkhUTUwoY29udGFpbmVyLCBodG1sLCBwaHhVcGRhdGUsIHRhcmdldENvbnRhaW5lcil7XG4gICAgbGV0IGlzQ0lEUGF0Y2ggPSB0aGlzLmlzQ0lEUGF0Y2goKVxuICAgIGxldCBpc0NJRFdpdGhTaW5nbGVSb290ID0gaXNDSURQYXRjaCAmJiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSB0aGlzLnRhcmdldENJRC50b1N0cmluZygpXG4gICAgaWYoIWlzQ0lEUGF0Y2ggfHwgaXNDSURXaXRoU2luZ2xlUm9vdCl7XG4gICAgICByZXR1cm4gaHRtbFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb21wb25lbnQgcGF0Y2ggd2l0aCBtdWx0aXBsZSBDSUQgcm9vdHNcbiAgICAgIGxldCBkaWZmQ29udGFpbmVyID0gbnVsbFxuICAgICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgICBkaWZmQ29udGFpbmVyID0gRE9NLmNsb25lTm9kZSh0YXJnZXRDb250YWluZXIpXG4gICAgICBsZXQgW2ZpcnN0Q29tcG9uZW50LCAuLi5yZXN0XSA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QoZGlmZkNvbnRhaW5lciwgdGhpcy50YXJnZXRDSUQpXG4gICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgICByZXN0LmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpXG4gICAgICBBcnJheS5mcm9tKGRpZmZDb250YWluZXIuY2hpbGROb2RlcykuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIC8vIHdlIGNhbiBvbmx5IHNraXAgdHJhY2thYmxlIG5vZGVzIHdpdGggYW4gSURcbiAgICAgICAgaWYoY2hpbGQuaWQgJiYgY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIGNoaWxkLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSAhPT0gdGhpcy50YXJnZXRDSUQudG9TdHJpbmcoKSl7XG4gICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9TS0lQLCBcIlwiKVxuICAgICAgICAgIGNoaWxkLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIEFycmF5LmZyb20odGVtcGxhdGUuY29udGVudC5jaGlsZE5vZGVzKS5mb3JFYWNoKGVsID0+IGRpZmZDb250YWluZXIuaW5zZXJ0QmVmb3JlKGVsLCBmaXJzdENvbXBvbmVudCkpXG4gICAgICBmaXJzdENvbXBvbmVudC5yZW1vdmUoKVxuICAgICAgcmV0dXJuIGRpZmZDb250YWluZXIub3V0ZXJIVE1MXG4gICAgfVxuICB9XG5cbiAgaW5kZXhPZihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKS5pbmRleE9mKGNoaWxkKSB9XG59XG4iLCAiaW1wb3J0IHtcbiAgQ09NUE9ORU5UUyxcbiAgRFlOQU1JQ1MsXG4gIFRFTVBMQVRFUyxcbiAgRVZFTlRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfU0tJUCxcbiAgUkVQTFksXG4gIFNUQVRJQyxcbiAgVElUTEUsXG4gIFNUUkVBTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgaXNPYmplY3QsXG4gIGxvZ0Vycm9yLFxuICBpc0NpZCxcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlZCB7XG4gIHN0YXRpYyBleHRyYWN0KGRpZmYpe1xuICAgIGxldCB7W1JFUExZXTogcmVwbHksIFtFVkVOVFNdOiBldmVudHMsIFtUSVRMRV06IHRpdGxlfSA9IGRpZmZcbiAgICBkZWxldGUgZGlmZltSRVBMWV1cbiAgICBkZWxldGUgZGlmZltFVkVOVFNdXG4gICAgZGVsZXRlIGRpZmZbVElUTEVdXG4gICAgcmV0dXJuIHtkaWZmLCB0aXRsZSwgcmVwbHk6IHJlcGx5IHx8IG51bGwsIGV2ZW50czogZXZlbnRzIHx8IFtdfVxuICB9XG5cbiAgY29uc3RydWN0b3Iodmlld0lkLCByZW5kZXJlZCl7XG4gICAgdGhpcy52aWV3SWQgPSB2aWV3SWRcbiAgICB0aGlzLnJlbmRlcmVkID0ge31cbiAgICB0aGlzLm1lcmdlRGlmZihyZW5kZXJlZClcbiAgfVxuXG4gIHBhcmVudFZpZXdJZCgpeyByZXR1cm4gdGhpcy52aWV3SWQgfVxuXG4gIHRvU3RyaW5nKG9ubHlDaWRzKXtcbiAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZVRvU3RyaW5nKHRoaXMucmVuZGVyZWQsIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10sIG9ubHlDaWRzKVxuICAgIHJldHVybiBbc3RyLCBzdHJlYW1zXVxuICB9XG5cbiAgcmVjdXJzaXZlVG9TdHJpbmcocmVuZGVyZWQsIGNvbXBvbmVudHMgPSByZW5kZXJlZFtDT01QT05FTlRTXSwgb25seUNpZHMpe1xuICAgIG9ubHlDaWRzID0gb25seUNpZHMgPyBuZXcgU2V0KG9ubHlDaWRzKSA6IG51bGxcbiAgICBsZXQgb3V0cHV0ID0ge2J1ZmZlcjogXCJcIiwgY29tcG9uZW50czogY29tcG9uZW50cywgb25seUNpZHM6IG9ubHlDaWRzLCBzdHJlYW1zOiBuZXcgU2V0KCl9XG4gICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgbnVsbCwgb3V0cHV0KVxuICAgIHJldHVybiBbb3V0cHV0LmJ1ZmZlciwgb3V0cHV0LnN0cmVhbXNdXG4gIH1cblxuICBjb21wb25lbnRDSURzKGRpZmYpeyByZXR1cm4gT2JqZWN0LmtleXMoZGlmZltDT01QT05FTlRTXSB8fCB7fSkubWFwKGkgPT4gcGFyc2VJbnQoaSkpIH1cblxuICBpc0NvbXBvbmVudE9ubHlEaWZmKGRpZmYpe1xuICAgIGlmKCFkaWZmW0NPTVBPTkVOVFNdKXsgcmV0dXJuIGZhbHNlIH1cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZGlmZikubGVuZ3RoID09PSAxXG4gIH1cblxuICBnZXRDb21wb25lbnQoZGlmZiwgY2lkKXsgcmV0dXJuIGRpZmZbQ09NUE9ORU5UU11bY2lkXSB9XG5cbiAgbWVyZ2VEaWZmKGRpZmYpe1xuICAgIGxldCBuZXdjID0gZGlmZltDT01QT05FTlRTXVxuICAgIGxldCBjYWNoZSA9IHt9XG4gICAgZGVsZXRlIGRpZmZbQ09NUE9ORU5UU11cbiAgICB0aGlzLnJlbmRlcmVkID0gdGhpcy5tdXRhYmxlTWVyZ2UodGhpcy5yZW5kZXJlZCwgZGlmZilcbiAgICB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdID0gdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSB8fCB7fVxuXG4gICAgaWYobmV3Yyl7XG4gICAgICBsZXQgb2xkYyA9IHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11cblxuICAgICAgZm9yKGxldCBjaWQgaW4gbmV3Yyl7XG4gICAgICAgIG5ld2NbY2lkXSA9IHRoaXMuY2FjaGVkRmluZENvbXBvbmVudChjaWQsIG5ld2NbY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICB9XG5cbiAgICAgIGZvcihsZXQgY2lkIGluIG5ld2MpeyBvbGRjW2NpZF0gPSBuZXdjW2NpZF0gfVxuICAgICAgZGlmZltDT01QT05FTlRTXSA9IG5ld2NcbiAgICB9XG4gIH1cblxuICBjYWNoZWRGaW5kQ29tcG9uZW50KGNpZCwgY2RpZmYsIG9sZGMsIG5ld2MsIGNhY2hlKXtcbiAgICBpZihjYWNoZVtjaWRdKXtcbiAgICAgIHJldHVybiBjYWNoZVtjaWRdXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZGlmZiwgc3RhdCwgc2NpZCA9IGNkaWZmW1NUQVRJQ11cblxuICAgICAgaWYoaXNDaWQoc2NpZCkpe1xuICAgICAgICBsZXQgdGRpZmZcblxuICAgICAgICBpZihzY2lkID4gMCl7XG4gICAgICAgICAgdGRpZmYgPSB0aGlzLmNhY2hlZEZpbmRDb21wb25lbnQoc2NpZCwgbmV3Y1tzY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGRpZmYgPSBvbGRjWy1zY2lkXVxuICAgICAgICB9XG5cbiAgICAgICAgc3RhdCA9IHRkaWZmW1NUQVRJQ11cbiAgICAgICAgbmRpZmYgPSB0aGlzLmNsb25lTWVyZ2UodGRpZmYsIGNkaWZmKVxuICAgICAgICBuZGlmZltTVEFUSUNdID0gc3RhdFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmRpZmYgPSBjZGlmZltTVEFUSUNdICE9PSB1bmRlZmluZWQgPyBjZGlmZiA6IHRoaXMuY2xvbmVNZXJnZShvbGRjW2NpZF0gfHwge30sIGNkaWZmKVxuICAgICAgfVxuXG4gICAgICBjYWNoZVtjaWRdID0gbmRpZmZcbiAgICAgIHJldHVybiBuZGlmZlxuICAgIH1cbiAgfVxuXG4gIG11dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1NUQVRJQ10gIT09IHVuZGVmaW5lZCl7XG4gICAgICByZXR1cm4gc291cmNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2UpXG4gICAgICByZXR1cm4gdGFyZ2V0XG4gICAgfVxuICB9XG5cbiAgZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGZvcihsZXQga2V5IGluIHNvdXJjZSl7XG4gICAgICBsZXQgdmFsID0gc291cmNlW2tleV1cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XVxuICAgICAgbGV0IGlzT2JqVmFsID0gaXNPYmplY3QodmFsKVxuICAgICAgaWYoaXNPYmpWYWwgJiYgdmFsW1NUQVRJQ10gPT09IHVuZGVmaW5lZCAmJiBpc09iamVjdCh0YXJnZXRWYWwpKXtcbiAgICAgICAgdGhpcy5kb011dGFibGVNZXJnZSh0YXJnZXRWYWwsIHZhbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gdmFsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xvbmVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgbGV0IG1lcmdlZCA9IHsuLi50YXJnZXQsIC4uLnNvdXJjZX1cbiAgICBmb3IobGV0IGtleSBpbiBtZXJnZWQpe1xuICAgICAgbGV0IHZhbCA9IHNvdXJjZVtrZXldXG4gICAgICBsZXQgdGFyZ2V0VmFsID0gdGFyZ2V0W2tleV1cbiAgICAgIGlmKGlzT2JqZWN0KHZhbCkgJiYgdmFsW1NUQVRJQ10gPT09IHVuZGVmaW5lZCAmJiBpc09iamVjdCh0YXJnZXRWYWwpKXtcbiAgICAgICAgbWVyZ2VkW2tleV0gPSB0aGlzLmNsb25lTWVyZ2UodGFyZ2V0VmFsLCB2YWwpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWRcbiAgfVxuXG4gIGNvbXBvbmVudFRvU3RyaW5nKGNpZCl7XG4gICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVDSURUb1N0cmluZyh0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdLCBjaWQpXG4gICAgcmV0dXJuIFtzdHIsIHN0cmVhbXNdXG4gIH1cblxuICBwcnVuZUNJRHMoY2lkcyl7XG4gICAgY2lkcy5mb3JFYWNoKGNpZCA9PiBkZWxldGUgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXVtjaWRdKVxuICB9XG5cbiAgLy8gcHJpdmF0ZVxuXG4gIGdldCgpeyByZXR1cm4gdGhpcy5yZW5kZXJlZCB9XG5cbiAgaXNOZXdGaW5nZXJwcmludChkaWZmID0ge30peyByZXR1cm4gISFkaWZmW1NUQVRJQ10gfVxuXG4gIHRlbXBsYXRlU3RhdGljKHBhcnQsIHRlbXBsYXRlcyl7XG4gICAgaWYodHlwZW9mIChwYXJ0KSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIHRlbXBsYXRlc1twYXJ0XVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFydFxuICAgIH1cbiAgfVxuXG4gIHRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCl7XG4gICAgaWYocmVuZGVyZWRbRFlOQU1JQ1NdKXsgcmV0dXJuIHRoaXMuY29tcHJlaGVuc2lvblRvQnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCkgfVxuICAgIGxldCB7W1NUQVRJQ106IHN0YXRpY3N9ID0gcmVuZGVyZWRcbiAgICBzdGF0aWNzID0gdGhpcy50ZW1wbGF0ZVN0YXRpYyhzdGF0aWNzLCB0ZW1wbGF0ZXMpXG5cbiAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbMF1cbiAgICBmb3IobGV0IGkgPSAxOyBpIDwgc3RhdGljcy5sZW5ndGg7IGkrKyl7XG4gICAgICB0aGlzLmR5bmFtaWNUb0J1ZmZlcihyZW5kZXJlZFtpIC0gMV0sIHRlbXBsYXRlcywgb3V0cHV0KVxuICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzW2ldXG4gICAgfVxuICB9XG5cbiAgY29tcHJlaGVuc2lvblRvQnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCl7XG4gICAgbGV0IHtbRFlOQU1JQ1NdOiBkeW5hbWljcywgW1NUQVRJQ106IHN0YXRpY3MsIFtTVFJFQU1dOiBzdHJlYW19ID0gcmVuZGVyZWRcbiAgICBsZXQgW19yZWYsIF9pbnNlcnRzLCBkZWxldGVJZHMsIHJlc2V0XSA9IHN0cmVhbSB8fCBbbnVsbCwge30sIFtdLCBudWxsXVxuICAgIHN0YXRpY3MgPSB0aGlzLnRlbXBsYXRlU3RhdGljKHN0YXRpY3MsIHRlbXBsYXRlcylcbiAgICBsZXQgY29tcFRlbXBsYXRlcyA9IHRlbXBsYXRlcyB8fCByZW5kZXJlZFtURU1QTEFURVNdXG4gICAgZm9yKGxldCBkID0gMDsgZCA8IGR5bmFtaWNzLmxlbmd0aDsgZCsrKXtcbiAgICAgIGxldCBkeW5hbWljID0gZHluYW1pY3NbZF1cbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1swXVxuICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgICB0aGlzLmR5bmFtaWNUb0J1ZmZlcihkeW5hbWljW2kgLSAxXSwgY29tcFRlbXBsYXRlcywgb3V0cHV0KVxuICAgICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbaV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZihzdHJlYW0gIT09IHVuZGVmaW5lZCAmJiAocmVuZGVyZWRbRFlOQU1JQ1NdLmxlbmd0aCA+IDAgfHwgZGVsZXRlSWRzLmxlbmd0aCA+IDAgfHwgcmVzZXQpKXtcbiAgICAgIGRlbGV0ZSByZW5kZXJlZFtTVFJFQU1dXG4gICAgICBvdXRwdXQuc3RyZWFtcy5hZGQoc3RyZWFtKVxuICAgIH1cbiAgfVxuXG4gIGR5bmFtaWNUb0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGlmKHR5cGVvZiAocmVuZGVyZWQpID09PSBcIm51bWJlclwiKXtcbiAgICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlQ0lEVG9TdHJpbmcob3V0cHV0LmNvbXBvbmVudHMsIHJlbmRlcmVkLCBvdXRwdXQub25seUNpZHMpXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0clxuICAgICAgb3V0cHV0LnN0cmVhbXMgPSBuZXcgU2V0KFsuLi5vdXRwdXQuc3RyZWFtcywgLi4uc3RyZWFtc10pXG4gICAgfSBlbHNlIGlmKGlzT2JqZWN0KHJlbmRlcmVkKSl7XG4gICAgICB0aGlzLnRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dClcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LmJ1ZmZlciArPSByZW5kZXJlZFxuICAgIH1cbiAgfVxuXG4gIHJlY3Vyc2l2ZUNJRFRvU3RyaW5nKGNvbXBvbmVudHMsIGNpZCwgb25seUNpZHMpe1xuICAgIGxldCBjb21wb25lbnQgPSBjb21wb25lbnRzW2NpZF0gfHwgbG9nRXJyb3IoYG5vIGNvbXBvbmVudCBmb3IgQ0lEICR7Y2lkfWAsIGNvbXBvbmVudHMpXG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlVG9TdHJpbmcoY29tcG9uZW50LCBjb21wb25lbnRzLCBvbmx5Q2lkcylcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgbGV0IGNvbnRhaW5lciA9IHRlbXBsYXRlLmNvbnRlbnRcbiAgICBsZXQgc2tpcCA9IG9ubHlDaWRzICYmICFvbmx5Q2lkcy5oYXMoY2lkKVxuXG4gICAgbGV0IFtoYXNDaGlsZE5vZGVzLCBoYXNDaGlsZENvbXBvbmVudHNdID1cbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkTm9kZXMpLnJlZHVjZSgoW2hhc05vZGVzLCBoYXNDb21wb25lbnRzXSwgY2hpbGQsIGkpID0+IHtcbiAgICAgICAgaWYoY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKXtcbiAgICAgICAgICBpZihjaGlsZC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkpe1xuICAgICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgdHJ1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQsIGNpZClcbiAgICAgICAgICBpZighY2hpbGQuaWQpeyBjaGlsZC5pZCA9IGAke3RoaXMucGFyZW50Vmlld0lkKCl9LSR7Y2lkfS0ke2l9YCB9XG4gICAgICAgICAgaWYoc2tpcCl7XG4gICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoUEhYX1NLSVAsIFwiXCIpXG4gICAgICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSBcIlwiXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBbdHJ1ZSwgaGFzQ29tcG9uZW50c11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZihjaGlsZC5ub2RlVmFsdWUudHJpbSgpICE9PSBcIlwiKXtcbiAgICAgICAgICAgIGxvZ0Vycm9yKFwib25seSBIVE1MIGVsZW1lbnQgdGFncyBhcmUgYWxsb3dlZCBhdCB0aGUgcm9vdCBvZiBjb21wb25lbnRzLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYGdvdDogXCIke2NoaWxkLm5vZGVWYWx1ZS50cmltKCl9XCJcXG5cXG5gICtcbiAgICAgICAgICAgICAgXCJ3aXRoaW46XFxuXCIsIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICAgICAgICBjaGlsZC5yZXBsYWNlV2l0aCh0aGlzLmNyZWF0ZVNwYW4oY2hpbGQubm9kZVZhbHVlLCBjaWQpKVxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlLCBoYXNDb21wb25lbnRzXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGlsZC5yZW1vdmUoKVxuICAgICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIFtmYWxzZSwgZmFsc2VdKVxuXG4gICAgaWYoIWhhc0NoaWxkTm9kZXMgJiYgIWhhc0NoaWxkQ29tcG9uZW50cyl7XG4gICAgICBsb2dFcnJvcihcImV4cGVjdGVkIGF0IGxlYXN0IG9uZSBIVE1MIGVsZW1lbnQgdGFnIGluc2lkZSBhIGNvbXBvbmVudCwgYnV0IHRoZSBjb21wb25lbnQgaXMgZW1wdHk6XFxuXCIsXG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICByZXR1cm4gW3RoaXMuY3JlYXRlU3BhbihcIlwiLCBjaWQpLm91dGVySFRNTCwgc3RyZWFtc11cbiAgICB9IGVsc2UgaWYoIWhhc0NoaWxkTm9kZXMgJiYgaGFzQ2hpbGRDb21wb25lbnRzKXtcbiAgICAgIGxvZ0Vycm9yKFwiZXhwZWN0ZWQgYXQgbGVhc3Qgb25lIEhUTUwgZWxlbWVudCB0YWcgZGlyZWN0bHkgaW5zaWRlIGEgY29tcG9uZW50LCBidXQgb25seSBzdWJjb21wb25lbnRzIHdlcmUgZm91bmQuIEEgY29tcG9uZW50IG11c3QgcmVuZGVyIGF0IGxlYXN0IG9uZSBIVE1MIHRhZyBkaXJlY3RseSBpbnNpZGUgaXRzZWxmLlwiLFxuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgcmV0dXJuIFt0ZW1wbGF0ZS5pbm5lckhUTUwsIHN0cmVhbXNdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbdGVtcGxhdGUuaW5uZXJIVE1MLCBzdHJlYW1zXVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNwYW4odGV4dCwgY2lkKXtcbiAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgc3Bhbi5pbm5lclRleHQgPSB0ZXh0XG4gICAgc3Bhbi5zZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCwgY2lkKVxuICAgIHJldHVybiBzcGFuXG4gIH1cbn1cbiIsICJsZXQgdmlld0hvb2tJRCA9IDFcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXdIb29rIHtcbiAgc3RhdGljIG1ha2VJRCgpeyByZXR1cm4gdmlld0hvb2tJRCsrIH1cbiAgc3RhdGljIGVsZW1lbnRJRChlbCl7IHJldHVybiBlbC5waHhIb29rSWQgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGVsLCBjYWxsYmFja3Mpe1xuICAgIHRoaXMuX192aWV3ID0gdmlld1xuICAgIHRoaXMubGl2ZVNvY2tldCA9IHZpZXcubGl2ZVNvY2tldFxuICAgIHRoaXMuX19jYWxsYmFja3MgPSBjYWxsYmFja3NcbiAgICB0aGlzLl9fbGlzdGVuZXJzID0gbmV3IFNldCgpXG4gICAgdGhpcy5fX2lzRGlzY29ubmVjdGVkID0gZmFsc2VcbiAgICB0aGlzLmVsID0gZWxcbiAgICB0aGlzLmVsLnBoeEhvb2tJZCA9IHRoaXMuY29uc3RydWN0b3IubWFrZUlEKClcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLl9fY2FsbGJhY2tzKXsgdGhpc1trZXldID0gdGhpcy5fX2NhbGxiYWNrc1trZXldIH1cbiAgfVxuXG4gIF9fbW91bnRlZCgpeyB0aGlzLm1vdW50ZWQgJiYgdGhpcy5tb3VudGVkKCkgfVxuICBfX3VwZGF0ZWQoKXsgdGhpcy51cGRhdGVkICYmIHRoaXMudXBkYXRlZCgpIH1cbiAgX19iZWZvcmVVcGRhdGUoKXsgdGhpcy5iZWZvcmVVcGRhdGUgJiYgdGhpcy5iZWZvcmVVcGRhdGUoKSB9XG4gIF9fZGVzdHJveWVkKCl7IHRoaXMuZGVzdHJveWVkICYmIHRoaXMuZGVzdHJveWVkKCkgfVxuICBfX3JlY29ubmVjdGVkKCl7XG4gICAgaWYodGhpcy5fX2lzRGlzY29ubmVjdGVkKXtcbiAgICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgICB0aGlzLnJlY29ubmVjdGVkICYmIHRoaXMucmVjb25uZWN0ZWQoKVxuICAgIH1cbiAgfVxuICBfX2Rpc2Nvbm5lY3RlZCgpe1xuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IHRydWVcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCAmJiB0aGlzLmRpc2Nvbm5lY3RlZCgpXG4gIH1cblxuICBwdXNoRXZlbnQoZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcucHVzaEhvb2tFdmVudCh0aGlzLmVsLCBudWxsLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgfVxuXG4gIHB1c2hFdmVudFRvKHBoeFRhcmdldCwgZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHJldHVybiB2aWV3LnB1c2hIb29rRXZlbnQodGhpcy5lbCwgdGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlRXZlbnQoZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgY2FsbGJhY2tSZWYgPSAoY3VzdG9tRXZlbnQsIGJ5cGFzcykgPT4gYnlwYXNzID8gZXZlbnQgOiBjYWxsYmFjayhjdXN0b21FdmVudC5kZXRhaWwpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuYWRkKGNhbGxiYWNrUmVmKVxuICAgIHJldHVybiBjYWxsYmFja1JlZlxuICB9XG5cbiAgcmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpe1xuICAgIGxldCBldmVudCA9IGNhbGxiYWNrUmVmKG51bGwsIHRydWUpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrUmVmKVxuICB9XG5cbiAgdXBsb2FkKG5hbWUsIGZpbGVzKXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcuZGlzcGF0Y2hVcGxvYWRzKG5hbWUsIGZpbGVzKVxuICB9XG5cbiAgdXBsb2FkVG8ocGh4VGFyZ2V0LCBuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCB2aWV3ID0+IHZpZXcuZGlzcGF0Y2hVcGxvYWRzKG5hbWUsIGZpbGVzKSlcbiAgfVxuXG4gIF9fY2xlYW51cF9fKCl7XG4gICAgdGhpcy5fX2xpc3RlbmVycy5mb3JFYWNoKGNhbGxiYWNrUmVmID0+IHRoaXMucmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpKVxuICB9XG59XG4iLCAiaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBmb2N1c1N0YWNrID0gbnVsbFxuXG5sZXQgSlMgPSB7XG4gIGV4ZWMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGRlZmF1bHRzKXtcbiAgICBsZXQgW2RlZmF1bHRLaW5kLCBkZWZhdWx0QXJnc10gPSBkZWZhdWx0cyB8fCBbbnVsbCwge2NhbGxiYWNrOiBkZWZhdWx0cyAmJiBkZWZhdWx0cy5jYWxsYmFja31dXG4gICAgbGV0IGNvbW1hbmRzID0gcGh4RXZlbnQuY2hhckF0KDApID09PSBcIltcIiA/XG4gICAgICBKU09OLnBhcnNlKHBoeEV2ZW50KSA6IFtbZGVmYXVsdEtpbmQsIGRlZmF1bHRBcmdzXV1cblxuXG5cbiAgICBjb21tYW5kcy5mb3JFYWNoKChba2luZCwgYXJnc10pID0+IHtcbiAgICAgIGlmKGtpbmQgPT09IGRlZmF1bHRLaW5kICYmIGRlZmF1bHRBcmdzLmRhdGEpe1xuICAgICAgICBhcmdzLmRhdGEgPSBPYmplY3QuYXNzaWduKGFyZ3MuZGF0YSB8fCB7fSwgZGVmYXVsdEFyZ3MuZGF0YSlcbiAgICAgICAgYXJncy5jYWxsYmFjayA9IGFyZ3MuY2FsbGJhY2sgfHwgZGVmYXVsdEFyZ3MuY2FsbGJhY2tcbiAgICAgIH1cbiAgICAgIHRoaXMuZmlsdGVyVG9FbHMoc291cmNlRWwsIGFyZ3MpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICB0aGlzW2BleGVjXyR7a2luZH1gXShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIGFyZ3MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgaXNWaXNpYmxlKGVsKXtcbiAgICByZXR1cm4gISEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoID4gMClcbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgLy8gY29tbWFuZHNcblxuICBleGVjX2V4ZWMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCBbYXR0ciwgdG9dKXtcbiAgICBsZXQgbm9kZXMgPSB0byA/IERPTS5hbGwoZG9jdW1lbnQsIHRvKSA6IFtzb3VyY2VFbF1cbiAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IGVuY29kZWRKUyA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHIpXG4gICAgICBpZighZW5jb2RlZEpTKXsgdGhyb3cgbmV3IEVycm9yKGBleHBlY3RlZCAke2F0dHJ9IHRvIGNvbnRhaW4gSlMgY29tbWFuZCBvbiBcIiR7dG99XCJgKSB9XG4gICAgICB2aWV3LmxpdmVTb2NrZXQuZXhlY0pTKG5vZGUsIGVuY29kZWRKUywgZXZlbnRUeXBlKVxuICAgIH0pXG4gIH0sXG5cbiAgZXhlY19kaXNwYXRjaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHt0bywgZXZlbnQsIGRldGFpbCwgYnViYmxlc30pe1xuICAgIGRldGFpbCA9IGRldGFpbCB8fCB7fVxuICAgIGRldGFpbC5kaXNwYXRjaGVyID0gc291cmNlRWxcbiAgICBET00uZGlzcGF0Y2hFdmVudChlbCwgZXZlbnQsIHtkZXRhaWwsIGJ1YmJsZXN9KVxuICB9LFxuXG4gIGV4ZWNfcHVzaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIGFyZ3Mpe1xuICAgIGlmKCF2aWV3LmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuXG4gICAgbGV0IHtldmVudCwgZGF0YSwgdGFyZ2V0LCBwYWdlX2xvYWRpbmcsIGxvYWRpbmcsIHZhbHVlLCBkaXNwYXRjaGVyLCBjYWxsYmFja30gPSBhcmdzXG4gICAgbGV0IHB1c2hPcHRzID0ge2xvYWRpbmcsIHZhbHVlLCB0YXJnZXQsIHBhZ2VfbG9hZGluZzogISFwYWdlX2xvYWRpbmd9XG4gICAgbGV0IHRhcmdldFNyYyA9IGV2ZW50VHlwZSA9PT0gXCJjaGFuZ2VcIiAmJiBkaXNwYXRjaGVyID8gZGlzcGF0Y2hlciA6IHNvdXJjZUVsXG4gICAgbGV0IHBoeFRhcmdldCA9IHRhcmdldCB8fCB0YXJnZXRTcmMuZ2V0QXR0cmlidXRlKHZpZXcuYmluZGluZyhcInRhcmdldFwiKSkgfHwgdGFyZ2V0U3JjXG4gICAgdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgKHRhcmdldFZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgaWYoZXZlbnRUeXBlID09PSBcImNoYW5nZVwiKXtcbiAgICAgICAgbGV0IHtuZXdDaWQsIF90YXJnZXR9ID0gYXJnc1xuICAgICAgICBfdGFyZ2V0ID0gX3RhcmdldCB8fCAoRE9NLmlzRm9ybUlucHV0KHNvdXJjZUVsKSA/IHNvdXJjZUVsLm5hbWUgOiB1bmRlZmluZWQpXG4gICAgICAgIGlmKF90YXJnZXQpeyBwdXNoT3B0cy5fdGFyZ2V0ID0gX3RhcmdldCB9XG4gICAgICAgIHRhcmdldFZpZXcucHVzaElucHV0KHNvdXJjZUVsLCB0YXJnZXRDdHgsIG5ld0NpZCwgZXZlbnQgfHwgcGh4RXZlbnQsIHB1c2hPcHRzLCBjYWxsYmFjaylcbiAgICAgIH0gZWxzZSBpZihldmVudFR5cGUgPT09IFwic3VibWl0XCIpe1xuICAgICAgICBsZXQge3N1Ym1pdHRlcn0gPSBhcmdzXG4gICAgICAgIHRhcmdldFZpZXcuc3VibWl0Rm9ybShzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBldmVudCB8fCBwaHhFdmVudCwgc3VibWl0dGVyLCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRWaWV3LnB1c2hFdmVudChldmVudFR5cGUsIHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBkYXRhLCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBleGVjX25hdmlnYXRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2hyZWYsIHJlcGxhY2V9KXtcbiAgICB2aWV3LmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiKVxuICB9LFxuXG4gIGV4ZWNfcGF0Y2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5wdXNoSGlzdG9yeVBhdGNoKGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiLCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmF0dGVtcHRGb2N1cyhlbCkpXG4gIH0sXG5cbiAgZXhlY19mb2N1c19maXJzdChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gQVJJQS5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoZWwpIHx8IEFSSUEuZm9jdXNGaXJzdChlbCkpXG4gIH0sXG5cbiAgZXhlY19wdXNoX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBmb2N1c1N0YWNrID0gZWwgfHwgc291cmNlRWwpXG4gIH0sXG5cbiAgZXhlY19wb3BfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmKGZvY3VzU3RhY2speyBmb2N1c1N0YWNrLmZvY3VzKCkgfVxuICAgICAgZm9jdXNTdGFjayA9IG51bGxcbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfYWRkX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge25hbWVzLCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG5hbWVzLCBbXSwgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3JlbW92ZV9jbGFzcyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtuYW1lcywgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgbmFtZXMsIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190cmFuc2l0aW9uKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RpbWUsIHRyYW5zaXRpb259KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdG9nZ2xlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIGlucywgb3V0cywgdGltZX0pe1xuICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIGlucywgb3V0cywgdGltZSlcbiAgfSxcblxuICBleGVjX3Nob3coZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfaGlkZShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5oaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19zZXRfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyOiBbYXR0ciwgdmFsXX0pe1xuICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWxdXSwgW10pXG4gIH0sXG5cbiAgZXhlY19yZW1vdmVfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbXSwgW2F0dHJdKVxuICB9LFxuXG4gIC8vIHV0aWxzIGZvciBjb21tYW5kc1xuXG4gIHNob3coZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYoIXRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCBudWxsLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICBoaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpe1xuICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBudWxsLCB0cmFuc2l0aW9uLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICB0b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKXtcbiAgICBsZXQgW2luQ2xhc3NlcywgaW5TdGFydENsYXNzZXMsIGluRW5kQ2xhc3Nlc10gPSBpbnMgfHwgW1tdLCBbXSwgW11dXG4gICAgbGV0IFtvdXRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMsIG91dEVuZENsYXNzZXNdID0gb3V0cyB8fCBbW10sIFtdLCBbXV1cbiAgICBpZihpbkNsYXNzZXMubGVuZ3RoID4gMCB8fCBvdXRDbGFzc2VzLmxlbmd0aCA+IDApe1xuICAgICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dFN0YXJ0Q2xhc3NlcywgaW5DbGFzc2VzLmNvbmNhdChpblN0YXJ0Q2xhc3NlcykuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0Q2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRFbmRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1zdGFydFwiKSlcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIG91dENsYXNzZXMuY29uY2F0KG91dEVuZENsYXNzZXMpKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYoZXZlbnRUeXBlID09PSBcInJlbW92ZVwiKXsgcmV0dXJuIH1cbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluU3RhcnRDbGFzc2VzLCBvdXRDbGFzc2VzLmNvbmNhdChvdXRTdGFydENsYXNzZXMpLmNvbmNhdChvdXRFbmRDbGFzc2VzKSlcbiAgICAgICAgICBsZXQgc3RpY2t5RGlzcGxheSA9IGRpc3BsYXkgfHwgdGhpcy5kZWZhdWx0RGlzcGxheShlbClcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBzdGlja3lEaXNwbGF5KVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluQ2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpbkVuZENsYXNzZXMsIGluU3RhcnRDbGFzc2VzKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctc3RhcnRcIikpXG4gICAgICAgIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBpbkNsYXNzZXMuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtc3RhcnRcIikpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LXN0YXJ0XCIpKVxuICAgICAgICAgIGxldCBzdGlja3lEaXNwbGF5ID0gZGlzcGxheSB8fCB0aGlzLmRlZmF1bHREaXNwbGF5KGVsKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IHN0aWNreURpc3BsYXkpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgYWRkcywgcmVtb3ZlcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldyl7XG4gICAgbGV0IFt0cmFuc2l0aW9uX3J1biwgdHJhbnNpdGlvbl9zdGFydCwgdHJhbnNpdGlvbl9lbmRdID0gdHJhbnNpdGlvbiB8fCBbW10sIFtdLCBbXV1cbiAgICBpZih0cmFuc2l0aW9uX3J1bi5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25fc3RhcnQuY29uY2F0KHRyYW5zaXRpb25fcnVuKSwgW10pXG4gICAgICBsZXQgb25Eb25lID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGFkZHMuY29uY2F0KHRyYW5zaXRpb25fZW5kKSwgcmVtb3Zlcy5jb25jYXQodHJhbnNpdGlvbl9ydW4pLmNvbmNhdCh0cmFuc2l0aW9uX3N0YXJ0KSlcbiAgICAgIHJldHVybiB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICAgIH1cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGxldCBbcHJldkFkZHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiY2xhc3Nlc1wiLCBbW10sIFtdXSlcbiAgICAgIGxldCBrZWVwQWRkcyA9IGFkZHMuZmlsdGVyKG5hbWUgPT4gcHJldkFkZHMuaW5kZXhPZihuYW1lKSA8IDAgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIGxldCBrZWVwUmVtb3ZlcyA9IHJlbW92ZXMuZmlsdGVyKG5hbWUgPT4gcHJldlJlbW92ZXMuaW5kZXhPZihuYW1lKSA8IDAgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IG5ld0FkZHMgPSBwcmV2QWRkcy5maWx0ZXIobmFtZSA9PiByZW1vdmVzLmluZGV4T2YobmFtZSkgPCAwKS5jb25jYXQoa2VlcEFkZHMpXG4gICAgICBsZXQgbmV3UmVtb3ZlcyA9IHByZXZSZW1vdmVzLmZpbHRlcihuYW1lID0+IGFkZHMuaW5kZXhPZihuYW1lKSA8IDApLmNvbmNhdChrZWVwUmVtb3ZlcylcblxuICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJjbGFzc2VzXCIsIGN1cnJlbnRFbCA9PiB7XG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QucmVtb3ZlKC4uLm5ld1JlbW92ZXMpXG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QuYWRkKC4uLm5ld0FkZHMpXG4gICAgICAgIHJldHVybiBbbmV3QWRkcywgbmV3UmVtb3Zlc11cbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBzZXRPclJlbW92ZUF0dHJzKGVsLCBzZXRzLCByZW1vdmVzKXtcbiAgICBsZXQgW3ByZXZTZXRzLCBwcmV2UmVtb3Zlc10gPSBET00uZ2V0U3RpY2t5KGVsLCBcImF0dHJzXCIsIFtbXSwgW11dKVxuXG4gICAgbGV0IGFsdGVyZWRBdHRycyA9IHNldHMubWFwKChbYXR0ciwgX3ZhbF0pID0+IGF0dHIpLmNvbmNhdChyZW1vdmVzKTtcbiAgICBsZXQgbmV3U2V0cyA9IHByZXZTZXRzLmZpbHRlcigoW2F0dHIsIF92YWxdKSA9PiAhYWx0ZXJlZEF0dHJzLmluY2x1ZGVzKGF0dHIpKS5jb25jYXQoc2V0cyk7XG4gICAgbGV0IG5ld1JlbW92ZXMgPSBwcmV2UmVtb3Zlcy5maWx0ZXIoKGF0dHIpID0+ICFhbHRlcmVkQXR0cnMuaW5jbHVkZXMoYXR0cikpLmNvbmNhdChyZW1vdmVzKTtcblxuICAgIERPTS5wdXRTdGlja3koZWwsIFwiYXR0cnNcIiwgY3VycmVudEVsID0+IHtcbiAgICAgIG5ld1JlbW92ZXMuZm9yRWFjaChhdHRyID0+IGN1cnJlbnRFbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cikpXG4gICAgICBuZXdTZXRzLmZvckVhY2goKFthdHRyLCB2YWxdKSA9PiBjdXJyZW50RWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbCkpXG4gICAgICByZXR1cm4gW25ld1NldHMsIG5ld1JlbW92ZXNdXG4gICAgfSlcbiAgfSxcblxuICBoYXNBbGxDbGFzc2VzKGVsLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZXZlcnkobmFtZSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpIH0sXG5cbiAgaXNUb2dnbGVkT3V0KGVsLCBvdXRDbGFzc2VzKXtcbiAgICByZXR1cm4gIXRoaXMuaXNWaXNpYmxlKGVsKSB8fCB0aGlzLmhhc0FsbENsYXNzZXMoZWwsIG91dENsYXNzZXMpXG4gIH0sXG5cbiAgZmlsdGVyVG9FbHMoc291cmNlRWwsIHt0b30pe1xuICAgIHJldHVybiB0byA/IERPTS5hbGwoZG9jdW1lbnQsIHRvKSA6IFtzb3VyY2VFbF1cbiAgfSxcblxuICBkZWZhdWx0RGlzcGxheShlbCl7XG4gICAgcmV0dXJuIHt0cjogXCJ0YWJsZS1yb3dcIiwgdGQ6IFwidGFibGUtY2VsbFwifVtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCldIHx8IFwiYmxvY2tcIlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEpTXG4iLCAiaW1wb3J0IHtcbiAgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCxcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgQ09OU0VDVVRJVkVfUkVMT0FEUyxcbiAgUEhYX0FVVE9fUkVDT1ZFUixcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgUEhYX0RJU0FCTEVfV0lUSCxcbiAgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLFxuICBQSFhfRElTQUJMRUQsXG4gIFBIWF9MT0FESU5HX0NMQVNTLFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0VSUk9SX0NMQVNTLFxuICBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTLFxuICBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfSEFTX1NVQk1JVFRFRCxcbiAgUEhYX0hPT0ssXG4gIFBIWF9QQUdFX0xPQURJTkcsXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9QUk9HUkVTUyxcbiAgUEhYX1JFQURPTkxZLFxuICBQSFhfUkVGLFxuICBQSFhfUkVGX1NSQyxcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfU1RBVElDLFxuICBQSFhfVFJBQ0tfU1RBVElDLFxuICBQSFhfVFJBQ0tfVVBMT0FEUyxcbiAgUEhYX1VQREFURSxcbiAgUEhYX1VQTE9BRF9SRUYsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfTUFJTixcbiAgUEhYX01PVU5URUQsXG4gIFBVU0hfVElNRU9VVCxcbiAgUEhYX1ZJRVdQT1JUX1RPUCxcbiAgUEhYX1ZJRVdQT1JUX0JPVFRPTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBpc0VtcHR5LFxuICBpc0VxdWFsT2JqLFxuICBsb2dFcnJvcixcbiAgbWF5YmUsXG4gIGlzQ2lkLFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBCcm93c2VyIGZyb20gXCIuL2Jyb3dzZXJcIlxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IERPTVBhdGNoIGZyb20gXCIuL2RvbV9wYXRjaFwiXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IFJlbmRlcmVkIGZyb20gXCIuL3JlbmRlcmVkXCJcbmltcG9ydCBWaWV3SG9vayBmcm9tIFwiLi92aWV3X2hvb2tcIlxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxubGV0IHNlcmlhbGl6ZUZvcm0gPSAoZm9ybSwgbWV0YWRhdGEsIG9ubHlOYW1lcyA9IFtdKSA9PiB7XG4gIGxldCB7c3VibWl0dGVyLCAuLi5tZXRhfSA9IG1ldGFkYXRhXG5cbiAgLy8gVE9ETzogUmVwbGFjZSB3aXRoIGBuZXcgRm9ybURhdGEoZm9ybSwgc3VibWl0dGVyKWAgd2hlbiBzdXBwb3J0ZWQgYnkgbGF0ZXN0IGJyb3dzZXJzLFxuICAvLyAgICAgICBhbmQgbWVudGlvbiBgZm9ybWRhdGEtc3VibWl0dGVyLXBvbHlmaWxsYCBpbiB0aGUgZG9jcy5cbiAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXG5cbiAgLy8gVE9ETzogUmVtb3ZlIHdoZW4gRm9ybURhdGEgY29uc3RydWN0b3Igc3VwcG9ydHMgdGhlIHN1Ym1pdHRlciBhcmd1bWVudC5cbiAgaWYoc3VibWl0dGVyICYmIHN1Ym1pdHRlci5oYXNBdHRyaWJ1dGUoXCJuYW1lXCIpICYmIHN1Ym1pdHRlci5mb3JtICYmIHN1Ym1pdHRlci5mb3JtID09PSBmb3JtKXtcbiAgICBmb3JtRGF0YS5hcHBlbmQoc3VibWl0dGVyLm5hbWUsIHN1Ym1pdHRlci52YWx1ZSlcbiAgfVxuXG4gIGxldCB0b1JlbW92ZSA9IFtdXG5cbiAgZm9ybURhdGEuZm9yRWFjaCgodmFsLCBrZXksIF9pbmRleCkgPT4ge1xuICAgIGlmKHZhbCBpbnN0YW5jZW9mIEZpbGUpeyB0b1JlbW92ZS5wdXNoKGtleSkgfVxuICB9KVxuXG4gIC8vIENsZWFudXAgYWZ0ZXIgYnVpbGRpbmcgZmlsZURhdGFcbiAgdG9SZW1vdmUuZm9yRWFjaChrZXkgPT4gZm9ybURhdGEuZGVsZXRlKGtleSkpXG5cbiAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICBmb3IobGV0IFtrZXksIHZhbF0gb2YgZm9ybURhdGEuZW50cmllcygpKXtcbiAgICBpZihvbmx5TmFtZXMubGVuZ3RoID09PSAwIHx8IG9ubHlOYW1lcy5pbmRleE9mKGtleSkgPj0gMCl7XG4gICAgICBwYXJhbXMuYXBwZW5kKGtleSwgdmFsKVxuICAgIH1cbiAgfVxuICBmb3IobGV0IG1ldGFLZXkgaW4gbWV0YSl7IHBhcmFtcy5hcHBlbmQobWV0YUtleSwgbWV0YVttZXRhS2V5XSkgfVxuXG4gIHJldHVybiBwYXJhbXMudG9TdHJpbmcoKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgY29uc3RydWN0b3IoZWwsIGxpdmVTb2NrZXQsIHBhcmVudFZpZXcsIGZsYXNoLCBsaXZlUmVmZXJlcil7XG4gICAgdGhpcy5pc0RlYWQgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcbiAgICB0aGlzLmZsYXNoID0gZmxhc2hcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudFZpZXdcbiAgICB0aGlzLnJvb3QgPSBwYXJlbnRWaWV3ID8gcGFyZW50Vmlldy5yb290IDogdGhpc1xuICAgIHRoaXMuZWwgPSBlbFxuICAgIHRoaXMuaWQgPSB0aGlzLmVsLmlkXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMubG9hZGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMucHJ1bmluZ0NJRHMgPSBbXVxuICAgIHRoaXMucmVkaXJlY3QgPSBmYWxzZVxuICAgIHRoaXMuaHJlZiA9IG51bGxcbiAgICB0aGlzLmpvaW5Db3VudCA9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuam9pbkNvdW50IC0gMSA6IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2VcbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IGZ1bmN0aW9uKG9uRG9uZSl7IG9uRG9uZSAmJiBvbkRvbmUoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2sgPSBmdW5jdGlvbigpeyB9XG4gICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IHRoaXMucGFyZW50ID8gbnVsbCA6IFtdXG4gICAgdGhpcy52aWV3SG9va3MgPSB7fVxuICAgIHRoaXMudXBsb2FkZXJzID0ge31cbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gW11cbiAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5wYXJlbnQgPyBudWxsIDoge31cbiAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gPSB7fVxuICAgIHRoaXMuY2hhbm5lbCA9IHRoaXMubGl2ZVNvY2tldC5jaGFubmVsKGBsdjoke3RoaXMuaWR9YCwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVkaXJlY3Q6IHRoaXMucmVkaXJlY3QgPyB0aGlzLmhyZWYgOiB1bmRlZmluZWQsXG4gICAgICAgIHVybDogdGhpcy5yZWRpcmVjdCA/IHVuZGVmaW5lZCA6IHRoaXMuaHJlZiB8fCB1bmRlZmluZWQsXG4gICAgICAgIHBhcmFtczogdGhpcy5jb25uZWN0UGFyYW1zKGxpdmVSZWZlcmVyKSxcbiAgICAgICAgc2Vzc2lvbjogdGhpcy5nZXRTZXNzaW9uKCksXG4gICAgICAgIHN0YXRpYzogdGhpcy5nZXRTdGF0aWMoKSxcbiAgICAgICAgZmxhc2g6IHRoaXMuZmxhc2gsXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNldEhyZWYoaHJlZil7IHRoaXMuaHJlZiA9IGhyZWYgfVxuXG4gIHNldFJlZGlyZWN0KGhyZWYpe1xuICAgIHRoaXMucmVkaXJlY3QgPSB0cnVlXG4gICAgdGhpcy5ocmVmID0gaHJlZlxuICB9XG5cbiAgaXNNYWluKCl7IHJldHVybiB0aGlzLmVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikgfVxuXG4gIGNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpe1xuICAgIGxldCBwYXJhbXMgPSB0aGlzLmxpdmVTb2NrZXQucGFyYW1zKHRoaXMuZWwpXG4gICAgbGV0IG1hbmlmZXN0ID1cbiAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX1RSQUNLX1NUQVRJQyl9XWApXG4gICAgICAgIC5tYXAobm9kZSA9PiBub2RlLnNyYyB8fCBub2RlLmhyZWYpLmZpbHRlcih1cmwgPT4gdHlwZW9mICh1cmwpID09PSBcInN0cmluZ1wiKVxuXG4gICAgaWYobWFuaWZlc3QubGVuZ3RoID4gMCl7IHBhcmFtc1tcIl90cmFja19zdGF0aWNcIl0gPSBtYW5pZmVzdCB9XG4gICAgcGFyYW1zW1wiX21vdW50c1wiXSA9IHRoaXMuam9pbkNvdW50XG4gICAgcGFyYW1zW1wiX2xpdmVfcmVmZXJlclwiXSA9IGxpdmVSZWZlcmVyXG5cbiAgICByZXR1cm4gcGFyYW1zXG4gIH1cblxuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5jaGFubmVsLmNhblB1c2goKSB9XG5cbiAgZ2V0U2Vzc2lvbigpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pIH1cblxuICBnZXRTdGF0aWMoKXtcbiAgICBsZXQgdmFsID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICByZXR1cm4gdmFsID09PSBcIlwiID8gbnVsbCA6IHZhbFxuICB9XG5cbiAgZGVzdHJveShjYWxsYmFjayA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlXG4gICAgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVxuICAgIGlmKHRoaXMucGFyZW50KXsgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLnBhcmVudC5pZF1bdGhpcy5pZF0gfVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGxldCBvbkZpbmlzaGVkID0gKCkgPT4ge1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7XG4gICAgICAgIHRoaXMuZGVzdHJveUhvb2sodGhpcy52aWV3SG9va3NbaWRdKVxuICAgICAgfVxuICAgIH1cblxuICAgIERPTS5tYXJrUGh4Q2hpbGREZXN0cm95ZWQodGhpcy5lbClcblxuICAgIHRoaXMubG9nKFwiZGVzdHJveWVkXCIsICgpID0+IFtcInRoZSBjaGlsZCBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHBhcmVudFwiXSlcbiAgICB0aGlzLmNoYW5uZWwubGVhdmUoKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIG9uRmluaXNoZWQpXG4gIH1cblxuICBzZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpe1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIFBIWF9DT05ORUNURURfQ0xBU1MsXG4gICAgICBQSFhfTE9BRElOR19DTEFTUyxcbiAgICAgIFBIWF9FUlJPUl9DTEFTUyxcbiAgICAgIFBIWF9DTElFTlRfRVJST1JfQ0xBU1MsXG4gICAgICBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXG4gICAgKVxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKVxuICB9XG5cbiAgc2hvd0xvYWRlcih0aW1lb3V0KXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICBpZih0aW1lb3V0KXtcbiAgICAgIHRoaXMubG9hZGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvd0xvYWRlcigpLCB0aW1lb3V0KVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fZGlzY29ubmVjdGVkKCkgfVxuICAgICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9MT0FESU5HX0NMQVNTKVxuICAgIH1cbiAgfVxuXG4gIGV4ZWNBbGwoYmluZGluZyl7XG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7YmluZGluZ31dYCwgZWwgPT4gdGhpcy5saXZlU29ja2V0LmV4ZWNKUyhlbCwgZWwuZ2V0QXR0cmlidXRlKGJpbmRpbmcpKSlcbiAgfVxuXG4gIGhpZGVMb2FkZXIoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoUEhYX0NPTk5FQ1RFRF9DTEFTUylcbiAgICB0aGlzLmV4ZWNBbGwodGhpcy5iaW5kaW5nKFwiY29ubmVjdGVkXCIpKVxuICB9XG5cbiAgdHJpZ2dlclJlY29ubmVjdGVkKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7IHRoaXMudmlld0hvb2tzW2lkXS5fX3JlY29ubmVjdGVkKCkgfVxuICB9XG5cbiAgbG9nKGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQubG9nKHRoaXMsIGtpbmQsIG1zZ0NhbGxiYWNrKVxuICB9XG5cbiAgdHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUgPSBmdW5jdGlvbigpe30pe1xuICAgIHRoaXMubGl2ZVNvY2tldC50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIHdpdGhpblRhcmdldHMocGh4VGFyZ2V0LCBjYWxsYmFjayl7XG4gICAgaWYocGh4VGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgcGh4VGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudCl7XG4gICAgICByZXR1cm4gdGhpcy5saXZlU29ja2V0Lm93bmVyKHBoeFRhcmdldCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCBwaHhUYXJnZXQpKVxuICAgIH1cblxuICAgIGlmKGlzQ2lkKHBoeFRhcmdldCkpe1xuICAgICAgbGV0IHRhcmdldHMgPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIHBoeFRhcmdldClcbiAgICAgIGlmKHRhcmdldHMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgbG9nRXJyb3IoYG5vIGNvbXBvbmVudCBmb3VuZCBtYXRjaGluZyBwaHgtdGFyZ2V0IG9mICR7cGh4VGFyZ2V0fWApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayh0aGlzLCBwYXJzZUludChwaHhUYXJnZXQpKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdGFyZ2V0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChwaHhUYXJnZXQpKVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApeyBsb2dFcnJvcihgbm90aGluZyBmb3VuZCBtYXRjaGluZyB0aGUgcGh4LXRhcmdldCBzZWxlY3RvciBcIiR7cGh4VGFyZ2V0fVwiYCkgfVxuICAgICAgdGFyZ2V0cy5mb3JFYWNoKHRhcmdldCA9PiB0aGlzLmxpdmVTb2NrZXQub3duZXIodGFyZ2V0LCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIHRhcmdldCkpKVxuICAgIH1cbiAgfVxuXG4gIGFwcGx5RGlmZih0eXBlLCByYXdEaWZmLCBjYWxsYmFjayl7XG4gICAgdGhpcy5sb2codHlwZSwgKCkgPT4gW1wiXCIsIGNsb25lKHJhd0RpZmYpXSlcbiAgICBsZXQge2RpZmYsIHJlcGx5LCBldmVudHMsIHRpdGxlfSA9IFJlbmRlcmVkLmV4dHJhY3QocmF3RGlmZilcbiAgICBjYWxsYmFjayh7ZGlmZiwgcmVwbHksIGV2ZW50c30pXG4gICAgaWYodGl0bGUpeyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IERPTS5wdXRUaXRsZSh0aXRsZSkpIH1cbiAgfVxuXG4gIG9uSm9pbihyZXNwKXtcbiAgICBsZXQge3JlbmRlcmVkLCBjb250YWluZXJ9ID0gcmVzcFxuICAgIGlmKGNvbnRhaW5lcil7XG4gICAgICBsZXQgW3RhZywgYXR0cnNdID0gY29udGFpbmVyXG4gICAgICB0aGlzLmVsID0gRE9NLnJlcGxhY2VSb290Q29udGFpbmVyKHRoaXMuZWwsIHRhZywgYXR0cnMpXG4gICAgfVxuICAgIHRoaXMuY2hpbGRKb2lucyA9IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZmxhc2ggPSBudWxsXG5cbiAgICBCcm93c2VyLmRyb3BMb2NhbCh0aGlzLmxpdmVTb2NrZXQubG9jYWxTdG9yYWdlLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsIENPTlNFQ1VUSVZFX1JFTE9BRFMpXG4gICAgdGhpcy5hcHBseURpZmYoXCJtb3VudFwiLCByZW5kZXJlZCwgKHtkaWZmLCBldmVudHN9KSA9PiB7XG4gICAgICB0aGlzLnJlbmRlcmVkID0gbmV3IFJlbmRlcmVkKHRoaXMuaWQsIGRpZmYpXG4gICAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJDb250YWluZXIobnVsbCwgXCJqb2luXCIpXG4gICAgICB0aGlzLmRyb3BQZW5kaW5nUmVmcygpXG4gICAgICBsZXQgZm9ybXMgPSB0aGlzLmZvcm1zRm9yUmVjb3ZlcnkoaHRtbClcbiAgICAgIHRoaXMuam9pbkNvdW50KytcblxuICAgICAgaWYoZm9ybXMubGVuZ3RoID4gMCl7XG4gICAgICAgIGZvcm1zLmZvckVhY2goKFtmb3JtLCBuZXdGb3JtLCBuZXdDaWRdLCBpKSA9PiB7XG4gICAgICAgICAgdGhpcy5wdXNoRm9ybVJlY292ZXJ5KGZvcm0sIG5ld0NpZCwgcmVzcCA9PiB7XG4gICAgICAgICAgICBpZihpID09PSBmb3Jtcy5sZW5ndGggLSAxKXtcbiAgICAgICAgICAgICAgdGhpcy5vbkpvaW5Db21wbGV0ZShyZXNwLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25Kb2luQ29tcGxldGUocmVzcCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBkcm9wUGVuZGluZ1JlZnMoKXtcbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7UEhYX1JFRl9TUkN9PVwiJHt0aGlzLmlkfVwiXVske1BIWF9SRUZ9XWAsIGVsID0+IHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuICAgIH0pXG4gIH1cblxuICBvbkpvaW5Db21wbGV0ZSh7bGl2ZV9wYXRjaH0sIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyl7XG4gICAgLy8gSW4gb3JkZXIgdG8gcHJvdmlkZSBhIGJldHRlciBleHBlcmllbmNlLCB3ZSB3YW50IHRvIGpvaW5cbiAgICAvLyBhbGwgTGl2ZVZpZXdzIGZpcnN0IGFuZCBvbmx5IHRoZW4gYXBwbHkgdGhlaXIgcGF0Y2hlcy5cbiAgICBpZih0aGlzLmpvaW5Db3VudCA+IDEgfHwgKHRoaXMucGFyZW50ICYmICF0aGlzLnBhcmVudC5pc0pvaW5QZW5kaW5nKCkpKXtcbiAgICAgIHJldHVybiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICB9XG5cbiAgICAvLyBPbmUgZG93bnNpZGUgb2YgdGhpcyBhcHByb2FjaCBpcyB0aGF0IHdlIG5lZWQgdG8gZmluZCBwaHhDaGlsZHJlblxuICAgIC8vIGluIHRoZSBodG1sIGZyYWdtZW50LCBpbnN0ZWFkIG9mIGRpcmVjdGx5IG9uIHRoZSBET00uIFRoZSBmcmFnbWVudFxuICAgIC8vIGFsc28gZG9lcyBub3QgaW5jbHVkZSBQSFhfU1RBVElDLCBzbyB3ZSBuZWVkIHRvIGNvcHkgaXQgb3ZlciBmcm9tXG4gICAgLy8gdGhlIERPTS5cbiAgICBsZXQgbmV3Q2hpbGRyZW4gPSBET00uZmluZFBoeENoaWxkcmVuSW5GcmFnbWVudChodG1sLCB0aGlzLmlkKS5maWx0ZXIodG9FbCA9PiB7XG4gICAgICBsZXQgZnJvbUVsID0gdG9FbC5pZCAmJiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoYFtpZD1cIiR7dG9FbC5pZH1cIl1gKVxuICAgICAgbGV0IHBoeFN0YXRpYyA9IGZyb21FbCAmJiBmcm9tRWwuZ2V0QXR0cmlidXRlKFBIWF9TVEFUSUMpXG4gICAgICBpZihwaHhTdGF0aWMpeyB0b0VsLnNldEF0dHJpYnV0ZShQSFhfU1RBVElDLCBwaHhTdGF0aWMpIH1cbiAgICAgIHJldHVybiB0aGlzLmpvaW5DaGlsZCh0b0VsKVxuICAgIH0pXG5cbiAgICBpZihuZXdDaGlsZHJlbi5sZW5ndGggPT09IDApe1xuICAgICAgaWYodGhpcy5wYXJlbnQpe1xuICAgICAgICB0aGlzLnJvb3QucGVuZGluZ0pvaW5PcHMucHVzaChbdGhpcywgKCkgPT4gdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXSlcbiAgICAgICAgdGhpcy5wYXJlbnQuYWNrSm9pbih0aGlzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkFsbENoaWxkSm9pbnNDb21wbGV0ZSgpXG4gICAgICAgIHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvb3QucGVuZGluZ0pvaW5PcHMucHVzaChbdGhpcywgKCkgPT4gdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXSlcbiAgICB9XG4gIH1cblxuICBhdHRhY2hUcnVlRG9jRWwoKXtcbiAgICB0aGlzLmVsID0gRE9NLmJ5SWQodGhpcy5pZClcbiAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCwgdGhpcy5yb290LmlkKVxuICB9XG5cbiAgZXhlY05ld01vdW50ZWQoKXtcbiAgICBsZXQgcGh4Vmlld3BvcnRUb3AgPSB0aGlzLmJpbmRpbmcoUEhYX1ZJRVdQT1JUX1RPUClcbiAgICBsZXQgcGh4Vmlld3BvcnRCb3R0b20gPSB0aGlzLmJpbmRpbmcoUEhYX1ZJRVdQT1JUX0JPVFRPTSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHtwaHhWaWV3cG9ydFRvcH1dLCBbJHtwaHhWaWV3cG9ydEJvdHRvbX1dYCwgaG9va0VsID0+IHtcbiAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyhob29rRWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGhvb2tFbClcbiAgICB9KVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfSE9PSyl9XSwgW2RhdGEtcGh4LSR7UEhYX0hPT0t9XWAsIGhvb2tFbCA9PiB7XG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhob29rRWwpXG4gICAgfSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpfV1gLCBlbCA9PiB0aGlzLm1heWJlTW91bnRlZChlbCkpXG4gIH1cblxuICBhcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpe1xuICAgIHRoaXMuYXR0YWNoVHJ1ZURvY0VsKClcbiAgICBsZXQgcGF0Y2ggPSBuZXcgRE9NUGF0Y2godGhpcywgdGhpcy5lbCwgdGhpcy5pZCwgaHRtbCwgc3RyZWFtcywgbnVsbClcbiAgICBwYXRjaC5tYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpXG4gICAgdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIGZhbHNlKVxuICAgIHRoaXMuam9pbk5ld0NoaWxkcmVuKClcbiAgICB0aGlzLmV4ZWNOZXdNb3VudGVkKClcblxuICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcblxuICAgIGlmKGxpdmVfcGF0Y2gpe1xuICAgICAgbGV0IHtraW5kLCB0b30gPSBsaXZlX3BhdGNoXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICAgIH1cbiAgICB0aGlzLmhpZGVMb2FkZXIoKVxuICAgIGlmKHRoaXMuam9pbkNvdW50ID4gMSl7IHRoaXMudHJpZ2dlclJlY29ubmVjdGVkKCkgfVxuICAgIHRoaXMuc3RvcENhbGxiYWNrKClcbiAgfVxuXG4gIHRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGZyb21FbCwgdG9FbCl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyaWdnZXJET00oXCJvbkJlZm9yZUVsVXBkYXRlZFwiLCBbZnJvbUVsLCB0b0VsXSlcbiAgICBsZXQgaG9vayA9IHRoaXMuZ2V0SG9vayhmcm9tRWwpXG4gICAgbGV0IGlzSWdub3JlZCA9IGhvb2sgJiYgRE9NLmlzSWdub3JlZChmcm9tRWwsIHRoaXMuYmluZGluZyhQSFhfVVBEQVRFKSlcbiAgICBpZihob29rICYmICFmcm9tRWwuaXNFcXVhbE5vZGUodG9FbCkgJiYgIShpc0lnbm9yZWQgJiYgaXNFcXVhbE9iaihmcm9tRWwuZGF0YXNldCwgdG9FbC5kYXRhc2V0KSkpe1xuICAgICAgaG9vay5fX2JlZm9yZVVwZGF0ZSgpXG4gICAgICByZXR1cm4gaG9va1xuICAgIH1cbiAgfVxuXG4gIG1heWJlTW91bnRlZChlbCl7XG4gICAgbGV0IHBoeE1vdW50ZWQgPSBlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9NT1VOVEVEKSlcbiAgICBsZXQgaGFzQmVlbkludm9rZWQgPSBwaHhNb3VudGVkICYmIERPTS5wcml2YXRlKGVsLCBcIm1vdW50ZWRcIilcbiAgICBpZihwaHhNb3VudGVkICYmICFoYXNCZWVuSW52b2tlZCl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBwaHhNb3VudGVkKVxuICAgICAgRE9NLnB1dFByaXZhdGUoZWwsIFwibW91bnRlZFwiLCB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIG1heWJlQWRkTmV3SG9vayhlbCwgZm9yY2Upe1xuICAgIGxldCBuZXdIb29rID0gdGhpcy5hZGRIb29rKGVsKVxuICAgIGlmKG5ld0hvb2speyBuZXdIb29rLl9fbW91bnRlZCgpIH1cbiAgfVxuXG4gIHBlcmZvcm1QYXRjaChwYXRjaCwgcHJ1bmVDaWRzKXtcbiAgICBsZXQgcmVtb3ZlZEVscyA9IFtdXG4gICAgbGV0IHBoeENoaWxkcmVuQWRkZWQgPSBmYWxzZVxuICAgIGxldCB1cGRhdGVkSG9va0lkcyA9IG5ldyBTZXQoKVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJhZGRlZFwiLCBlbCA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uTm9kZUFkZGVkXCIsIFtlbF0pXG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhlbClcbiAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSl7IHRoaXMubWF5YmVNb3VudGVkKGVsKSB9XG4gICAgfSlcblxuICAgIHBhdGNoLmFmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbCA9PiB7XG4gICAgICBpZihET00uaXNQaHhTdGlja3koZWwpKXtcbiAgICAgICAgdGhpcy5saXZlU29ja2V0LmpvaW5Sb290Vmlld3MoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYmVmb3JlKFwidXBkYXRlZFwiLCAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICBsZXQgaG9vayA9IHRoaXMudHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKVxuICAgICAgaWYoaG9vayl7IHVwZGF0ZWRIb29rSWRzLmFkZChmcm9tRWwuaWQpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKHVwZGF0ZWRIb29rSWRzLmhhcyhlbC5pZCkpeyB0aGlzLmdldEhvb2soZWwpLl9fdXBkYXRlZCgpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJkaXNjYXJkZWRcIiwgKGVsKSA9PiB7XG4gICAgICBpZihlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpeyByZW1vdmVkRWxzLnB1c2goZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBlbHMgPT4gdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChlbHMsIHBydW5lQ2lkcykpXG4gICAgcGF0Y2gucGVyZm9ybSgpXG4gICAgdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChyZW1vdmVkRWxzLCBwcnVuZUNpZHMpXG5cbiAgICByZXR1cm4gcGh4Q2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgYWZ0ZXJFbGVtZW50c1JlbW92ZWQoZWxlbWVudHMsIHBydW5lQ2lkcyl7XG4gICAgbGV0IGRlc3Ryb3llZENJRHMgPSBbXVxuICAgIGVsZW1lbnRzLmZvckVhY2gocGFyZW50ID0+IHtcbiAgICAgIGxldCBjb21wb25lbnRzID0gRE9NLmFsbChwYXJlbnQsIGBbJHtQSFhfQ09NUE9ORU5UfV1gKVxuICAgICAgbGV0IGhvb2tzID0gRE9NLmFsbChwYXJlbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX0hPT0spfV1gKVxuICAgICAgY29tcG9uZW50cy5jb25jYXQocGFyZW50KS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgbGV0IGNpZCA9IHRoaXMuY29tcG9uZW50SUQoZWwpXG4gICAgICAgIGlmKGlzQ2lkKGNpZCkgJiYgZGVzdHJveWVkQ0lEcy5pbmRleE9mKGNpZCkgPT09IC0xKXsgZGVzdHJveWVkQ0lEcy5wdXNoKGNpZCkgfVxuICAgICAgfSlcbiAgICAgIGhvb2tzLmNvbmNhdChwYXJlbnQpLmZvckVhY2goaG9va0VsID0+IHtcbiAgICAgICAgbGV0IGhvb2sgPSB0aGlzLmdldEhvb2soaG9va0VsKVxuICAgICAgICBob29rICYmIHRoaXMuZGVzdHJveUhvb2soaG9vaylcbiAgICAgIH0pXG4gICAgfSlcbiAgICAvLyBXZSBzaG91bGQgbm90IHBydW5lQ2lkcyBvbiBqb2lucy4gT3RoZXJ3aXNlLCBpbiBjYXNlIG9mXG4gICAgLy8gcmVqb2lucywgd2UgbWF5IG5vdGlmeSBjaWRzIHRoYXQgbm8gbG9uZ2VyIGJlbG9uZyB0byB0aGVcbiAgICAvLyBjdXJyZW50IExpdmVWaWV3IHRvIGJlIHJlbW92ZWQuXG4gICAgaWYocHJ1bmVDaWRzKXtcbiAgICAgIHRoaXMubWF5YmVQdXNoQ29tcG9uZW50c0Rlc3Ryb3llZChkZXN0cm95ZWRDSURzKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5OZXdDaGlsZHJlbigpe1xuICAgIERPTS5maW5kUGh4Q2hpbGRyZW4odGhpcy5lbCwgdGhpcy5pZCkuZm9yRWFjaChlbCA9PiB0aGlzLmpvaW5DaGlsZChlbCkpXG4gIH1cblxuICBnZXRDaGlsZEJ5SWQoaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdW2lkXSB9XG5cbiAgZ2V0RGVzY2VuZGVudEJ5RWwoZWwpe1xuICAgIGlmKGVsLmlkID09PSB0aGlzLmlkKXtcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW2VsLmdldEF0dHJpYnV0ZShQSFhfUEFSRU5UX0lEKV1bZWwuaWRdXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveURlc2NlbmRlbnQoaWQpe1xuICAgIGZvcihsZXQgcGFyZW50SWQgaW4gdGhpcy5yb290LmNoaWxkcmVuKXtcbiAgICAgIGZvcihsZXQgY2hpbGRJZCBpbiB0aGlzLnJvb3QuY2hpbGRyZW5bcGFyZW50SWRdKXtcbiAgICAgICAgaWYoY2hpbGRJZCA9PT0gaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3BhcmVudElkXVtjaGlsZElkXS5kZXN0cm95KCkgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGpvaW5DaGlsZChlbCl7XG4gICAgbGV0IGNoaWxkID0gdGhpcy5nZXRDaGlsZEJ5SWQoZWwuaWQpXG4gICAgaWYoIWNoaWxkKXtcbiAgICAgIGxldCB2aWV3ID0gbmV3IFZpZXcoZWwsIHRoaXMubGl2ZVNvY2tldCwgdGhpcylcbiAgICAgIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVt2aWV3LmlkXSA9IHZpZXdcbiAgICAgIHZpZXcuam9pbigpXG4gICAgICB0aGlzLmNoaWxkSm9pbnMrK1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBpc0pvaW5QZW5kaW5nKCl7IHJldHVybiB0aGlzLmpvaW5QZW5kaW5nIH1cblxuICBhY2tKb2luKF9jaGlsZCl7XG4gICAgdGhpcy5jaGlsZEpvaW5zLS1cblxuICAgIGlmKHRoaXMuY2hpbGRKb2lucyA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucGFyZW50LmFja0pvaW4odGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKCl7XG4gICAgdGhpcy5qb2luQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgdGhpcy5wZW5kaW5nSm9pbk9wcy5mb3JFYWNoKChbdmlldywgb3BdKSA9PiB7XG4gICAgICAgIGlmKCF2aWV3LmlzRGVzdHJveWVkKCkpeyBvcCgpIH1cbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdKb2luT3BzID0gW11cbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlKGRpZmYsIGV2ZW50cyl7XG4gICAgaWYodGhpcy5pc0pvaW5QZW5kaW5nKCkgfHwgKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHRoaXMucm9vdC5pc01haW4oKSkpe1xuICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ0RpZmZzLnB1c2goe2RpZmYsIGV2ZW50c30pXG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJlZC5tZXJnZURpZmYoZGlmZilcbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG5cbiAgICAvLyBXaGVuIHRoZSBkaWZmIG9ubHkgY29udGFpbnMgY29tcG9uZW50IGRpZmZzLCB0aGVuIHdhbGsgY29tcG9uZW50c1xuICAgIC8vIGFuZCBwYXRjaCBvbmx5IHRoZSBwYXJlbnQgY29tcG9uZW50IGNvbnRhaW5lcnMgZm91bmQgaW4gdGhlIGRpZmYuXG4gICAgLy8gT3RoZXJ3aXNlLCBwYXRjaCBlbnRpcmUgTFYgY29udGFpbmVyLlxuICAgIGlmKHRoaXMucmVuZGVyZWQuaXNDb21wb25lbnRPbmx5RGlmZihkaWZmKSl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudGltZShcImNvbXBvbmVudCBwYXRjaCBjb21wbGV0ZVwiLCAoKSA9PiB7XG4gICAgICAgIGxldCBwYXJlbnRDaWRzID0gRE9NLmZpbmRQYXJlbnRDSURzKHRoaXMuZWwsIHRoaXMucmVuZGVyZWQuY29tcG9uZW50Q0lEcyhkaWZmKSlcbiAgICAgICAgcGFyZW50Q2lkcy5mb3JFYWNoKHBhcmVudENJRCA9PiB7XG4gICAgICAgICAgaWYodGhpcy5jb21wb25lbnRQYXRjaCh0aGlzLnJlbmRlcmVkLmdldENvbXBvbmVudChkaWZmLCBwYXJlbnRDSUQpLCBwYXJlbnRDSUQpKXsgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWUgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIWlzRW1wdHkoZGlmZikpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRpbWUoXCJmdWxsIHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKGRpZmYsIFwidXBkYXRlXCIpXG4gICAgICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIHRydWUpXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgaWYocGh4Q2hpbGRyZW5BZGRlZCl7IHRoaXMuam9pbk5ld0NoaWxkcmVuKCkgfVxuICB9XG5cbiAgcmVuZGVyQ29udGFpbmVyKGRpZmYsIGtpbmQpe1xuICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQudGltZShgdG9TdHJpbmcgZGlmZiAoJHtraW5kfSlgLCAoKSA9PiB7XG4gICAgICBsZXQgdGFnID0gdGhpcy5lbC50YWdOYW1lXG4gICAgICAvLyBEb24ndCBza2lwIGFueSBjb21wb25lbnQgaW4gdGhlIGRpZmYgbm9yIGFueSBtYXJrZWQgYXMgcHJ1bmVkXG4gICAgICAvLyAoYXMgdGhleSBtYXkgaGF2ZSBiZWVuIGFkZGVkIGJhY2spXG4gICAgICBsZXQgY2lkcyA9IGRpZmYgPyB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudENJRHMoZGlmZikuY29uY2F0KHRoaXMucHJ1bmluZ0NJRHMpIDogbnVsbFxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQudG9TdHJpbmcoY2lkcylcbiAgICAgIHJldHVybiBbYDwke3RhZ30+JHtodG1sfTwvJHt0YWd9PmAsIHN0cmVhbXNdXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudFBhdGNoKGRpZmYsIGNpZCl7XG4gICAgaWYoaXNFbXB0eShkaWZmKSkgcmV0dXJuIGZhbHNlXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQuY29tcG9uZW50VG9TdHJpbmcoY2lkKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBjaWQpXG4gICAgbGV0IGNoaWxkcmVuQWRkZWQgPSB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgdHJ1ZSlcbiAgICByZXR1cm4gY2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgZ2V0SG9vayhlbCl7IHJldHVybiB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoZWwpXSB9XG5cbiAgYWRkSG9vayhlbCl7XG4gICAgaWYoVmlld0hvb2suZWxlbWVudElEKGVsKSB8fCAhZWwuZ2V0QXR0cmlidXRlKXsgcmV0dXJuIH1cbiAgICBsZXQgaG9va05hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoYGRhdGEtcGh4LSR7UEhYX0hPT0t9YCkgfHwgZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfSE9PSykpXG4gICAgaWYoaG9va05hbWUgJiYgIXRoaXMub3duc0VsZW1lbnQoZWwpKXsgcmV0dXJuIH1cbiAgICBsZXQgY2FsbGJhY2tzID0gdGhpcy5saXZlU29ja2V0LmdldEhvb2tDYWxsYmFja3MoaG9va05hbWUpXG5cbiAgICBpZihjYWxsYmFja3Mpe1xuICAgICAgaWYoIWVsLmlkKXsgbG9nRXJyb3IoYG5vIERPTSBJRCBmb3IgaG9vayBcIiR7aG9va05hbWV9XCIuIEhvb2tzIHJlcXVpcmUgYSB1bmlxdWUgSUQgb24gZWFjaCBlbGVtZW50LmAsIGVsKSB9XG4gICAgICBsZXQgaG9vayA9IG5ldyBWaWV3SG9vayh0aGlzLCBlbCwgY2FsbGJhY2tzKVxuICAgICAgdGhpcy52aWV3SG9va3NbVmlld0hvb2suZWxlbWVudElEKGhvb2suZWwpXSA9IGhvb2tcbiAgICAgIHJldHVybiBob29rXG4gICAgfSBlbHNlIGlmKGhvb2tOYW1lICE9PSBudWxsKXtcbiAgICAgIGxvZ0Vycm9yKGB1bmtub3duIGhvb2sgZm91bmQgZm9yIFwiJHtob29rTmFtZX1cImAsIGVsKVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lIb29rKGhvb2spe1xuICAgIGhvb2suX19kZXN0cm95ZWQoKVxuICAgIGhvb2suX19jbGVhbnVwX18oKVxuICAgIGRlbGV0ZSB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldXG4gIH1cblxuICBhcHBseVBlbmRpbmdVcGRhdGVzKCl7XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaCgoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKSlcbiAgfVxuXG4gIGVhY2hDaGlsZChjYWxsYmFjayl7XG4gICAgbGV0IGNoaWxkcmVuID0gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdIHx8IHt9XG4gICAgZm9yKGxldCBpZCBpbiBjaGlsZHJlbil7IGNhbGxiYWNrKHRoaXMuZ2V0Q2hpbGRCeUlkKGlkKSkgfVxuICB9XG5cbiAgb25DaGFubmVsKGV2ZW50LCBjYil7XG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIGlmKHRoaXMuaXNKb2luUGVuZGluZygpKXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IGNiKHJlc3ApXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IGNiKHJlc3ApKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBiaW5kQ2hhbm5lbCgpe1xuICAgIC8vIFRoZSBkaWZmIGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSByZWd1bGFyIHVwZGF0ZSBvcGVyYXRpb25zLlxuICAgIC8vIEFsbCBvdGhlciBvcGVyYXRpb25zIGFyZSBxdWV1ZWQgdG8gYmUgYXBwbGllZCBvbmx5IGFmdGVyIGpvaW4uXG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIFwiZGlmZlwiLCAocmF3RGlmZikgPT4ge1xuICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByYXdEaWZmLCAoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgICB9KVxuICAgIH0pXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJyZWRpcmVjdFwiLCAoe3RvLCBmbGFzaH0pID0+IHRoaXMub25SZWRpcmVjdCh7dG8sIGZsYXNofSkpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3BhdGNoXCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVQYXRjaChyZWRpcikpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3JlZGlyZWN0XCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZWRpcikpXG4gICAgdGhpcy5jaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMub25FcnJvcihyZWFzb24pKVxuICAgIHRoaXMuY2hhbm5lbC5vbkNsb3NlKHJlYXNvbiA9PiB0aGlzLm9uQ2xvc2UocmVhc29uKSlcbiAgfVxuXG4gIGRlc3Ryb3lBbGxDaGlsZHJlbigpeyB0aGlzLmVhY2hDaGlsZChjaGlsZCA9PiBjaGlsZC5kZXN0cm95KCkpIH1cblxuICBvbkxpdmVSZWRpcmVjdChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZCwgZmxhc2h9ID0gcmVkaXJcbiAgICBsZXQgdXJsID0gdGhpcy5leHBhbmRVUkwodG8pXG4gICAgdGhpcy5saXZlU29ja2V0Lmhpc3RvcnlSZWRpcmVjdCh1cmwsIGtpbmQsIGZsYXNoKVxuICB9XG5cbiAgb25MaXZlUGF0Y2gocmVkaXIpe1xuICAgIGxldCB7dG8sIGtpbmR9ID0gcmVkaXJcbiAgICB0aGlzLmhyZWYgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICB9XG5cbiAgZXhwYW5kVVJMKHRvKXtcbiAgICByZXR1cm4gdG8uc3RhcnRzV2l0aChcIi9cIikgPyBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fSR7dG99YCA6IHRvXG4gIH1cblxuICBvblJlZGlyZWN0KHt0bywgZmxhc2h9KXsgdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHRvLCBmbGFzaCkgfVxuXG4gIGlzRGVzdHJveWVkKCl7IHJldHVybiB0aGlzLmRlc3Ryb3llZCB9XG5cbiAgam9pbkRlYWQoKXsgdGhpcy5pc0RlYWQgPSB0cnVlIH1cblxuICBqb2luKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNob3dMb2FkZXIodGhpcy5saXZlU29ja2V0LmxvYWRlclRpbWVvdXQpXG4gICAgdGhpcy5iaW5kQ2hhbm5lbCgpXG4gICAgaWYodGhpcy5pc01haW4oKSl7XG4gICAgICB0aGlzLnN0b3BDYWxsYmFjayA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe3RvOiB0aGlzLmhyZWYsIGtpbmQ6IFwiaW5pdGlhbFwifSlcbiAgICB9XG4gICAgdGhpcy5qb2luQ2FsbGJhY2sgPSAob25Eb25lKSA9PiB7XG4gICAgICBvbkRvbmUgPSBvbkRvbmUgfHwgZnVuY3Rpb24oKXt9XG4gICAgICBjYWxsYmFjayA/IGNhbGxiYWNrKHRoaXMuam9pbkNvdW50LCBvbkRvbmUpIDogb25Eb25lKClcbiAgICB9XG4gICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiBmYWxzZX0sICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuam9pbigpXG4gICAgICAgIC5yZWNlaXZlKFwib2tcIiwgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoIXRoaXMuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB0aGlzLm9uSm9pbihkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVzcCA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3IocmVzcCkpXG4gICAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3Ioe3JlYXNvbjogXCJ0aW1lb3V0XCJ9KSlcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luRXJyb3IocmVzcCl7XG4gICAgaWYocmVzcC5yZWFzb24gPT09IFwicmVsb2FkXCIpe1xuICAgICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbYGZhaWxlZCBtb3VudCB3aXRoICR7cmVzcC5zdGF0dXN9LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0YCwgcmVzcF0pXG4gICAgICByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHt0bzogdGhpcy5ocmVmfSlcbiAgICB9IGVsc2UgaWYocmVzcC5yZWFzb24gPT09IFwidW5hdXRob3JpemVkXCIgfHwgcmVzcC5yZWFzb24gPT09IFwic3RhbGVcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYXV0aG9yaXplZCBsaXZlX3JlZGlyZWN0LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0XCIsIHJlc3BdKVxuICAgICAgcmV0dXJuIHRoaXMub25SZWRpcmVjdCh7dG86IHRoaXMuaHJlZn0pXG4gICAgfVxuICAgIGlmKHJlc3AucmVkaXJlY3QgfHwgcmVzcC5saXZlX3JlZGlyZWN0KXtcbiAgICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5jaGFubmVsLmxlYXZlKClcbiAgICB9XG4gICAgaWYocmVzcC5yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uUmVkaXJlY3QocmVzcC5yZWRpcmVjdCkgfVxuICAgIGlmKHJlc3AubGl2ZV9yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlc3AubGl2ZV9yZWRpcmVjdCkgfVxuICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXSlcbiAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYWJsZSB0byBqb2luXCIsIHJlc3BdKVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5saXZlU29ja2V0LnJlbG9hZFdpdGhKaXR0ZXIodGhpcykgfVxuICB9XG5cbiAgb25DbG9zZShyZWFzb24pe1xuICAgIGlmKHRoaXMuaXNEZXN0cm95ZWQoKSl7IHJldHVybiB9XG4gICAgaWYodGhpcy5saXZlU29ja2V0Lmhhc1BlbmRpbmdMaW5rKCkgJiYgcmVhc29uICE9PSBcImxlYXZlXCIpe1xuICAgICAgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5yZWxvYWRXaXRoSml0dGVyKHRoaXMpXG4gICAgfVxuICAgIHRoaXMuZGVzdHJveUFsbENoaWxkcmVuKClcbiAgICB0aGlzLmxpdmVTb2NrZXQuZHJvcEFjdGl2ZUVsZW1lbnQodGhpcylcbiAgICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiBiZSBudWxsIGluIEludGVybmV0IEV4cGxvcmVyIDExXG4gICAgaWYoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl7IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpIH1cbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNVbmxvYWRlZCgpKXtcbiAgICAgIHRoaXMuc2hvd0xvYWRlcihCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUKVxuICAgIH1cbiAgfVxuXG4gIG9uRXJyb3IocmVhc29uKXtcbiAgICB0aGlzLm9uQ2xvc2UocmVhc29uKVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ2aWV3IGNyYXNoZWRcIiwgcmVhc29uXSkgfVxuICAgIGlmKCF0aGlzLmxpdmVTb2NrZXQuaXNVbmxvYWRlZCgpKXtcbiAgICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoW1BIWF9MT0FESU5HX0NMQVNTLCBQSFhfRVJST1JfQ0xBU1MsIFBIWF9TRVJWRVJfRVJST1JfQ0xBU1NdKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoW1BIWF9MT0FESU5HX0NMQVNTLCBQSFhfRVJST1JfQ0xBU1MsIFBIWF9DTElFTlRfRVJST1JfQ0xBU1NdKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRpc3BsYXlFcnJvcihjbGFzc2VzKXtcbiAgICBpZih0aGlzLmlzTWFpbigpKXsgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwge2RldGFpbDoge3RvOiB0aGlzLmhyZWYsIGtpbmQ6IFwiZXJyb3JcIn19KSB9XG4gICAgdGhpcy5zaG93TG9hZGVyKClcbiAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoLi4uY2xhc3NlcylcbiAgICB0aGlzLmV4ZWNBbGwodGhpcy5iaW5kaW5nKFwiZGlzY29ubmVjdGVkXCIpKVxuICB9XG5cbiAgcHVzaFdpdGhSZXBseShyZWZHZW5lcmF0b3IsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuXG4gICAgbGV0IFtyZWYsIFtlbF0sIG9wdHNdID0gcmVmR2VuZXJhdG9yID8gcmVmR2VuZXJhdG9yKCkgOiBbbnVsbCwgW10sIHt9XVxuICAgIGxldCBvbkxvYWRpbmdEb25lID0gZnVuY3Rpb24oKXsgfVxuICAgIGlmKG9wdHMucGFnZV9sb2FkaW5nIHx8IChlbCAmJiAoZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfUEFHRV9MT0FESU5HKSkgIT09IG51bGwpKSl7XG4gICAgICBvbkxvYWRpbmdEb25lID0gdGhpcy5saXZlU29ja2V0LndpdGhQYWdlTG9hZGluZyh7a2luZDogXCJlbGVtZW50XCIsIHRhcmdldDogZWx9KVxuICAgIH1cblxuICAgIGlmKHR5cGVvZiAocGF5bG9hZC5jaWQpICE9PSBcIm51bWJlclwiKXsgZGVsZXRlIHBheWxvYWQuY2lkIH1cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsLnB1c2goZXZlbnQsIHBheWxvYWQsIFBVU0hfVElNRU9VVCkucmVjZWl2ZShcIm9rXCIsIHJlc3AgPT4ge1xuICAgICAgICAgIGxldCBmaW5pc2ggPSAoaG9va1JlcGx5KSA9PiB7XG4gICAgICAgICAgICBpZihyZXNwLnJlZGlyZWN0KXsgdGhpcy5vblJlZGlyZWN0KHJlc3AucmVkaXJlY3QpIH1cbiAgICAgICAgICAgIGlmKHJlc3AubGl2ZV9wYXRjaCl7IHRoaXMub25MaXZlUGF0Y2gocmVzcC5saXZlX3BhdGNoKSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcmVkaXJlY3QpeyB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlc3AubGl2ZV9yZWRpcmVjdCkgfVxuICAgICAgICAgICAgb25Mb2FkaW5nRG9uZSgpXG4gICAgICAgICAgICBvblJlcGx5KHJlc3AsIGhvb2tSZXBseSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYocmVzcC5kaWZmKXtcbiAgICAgICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5hcHBseURpZmYoXCJ1cGRhdGVcIiwgcmVzcC5kaWZmLCAoe2RpZmYsIHJlcGx5LCBldmVudHN9KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYocmVmICE9PSBudWxsKXsgdGhpcy51bmRvUmVmcyhyZWYpIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShkaWZmLCBldmVudHMpXG4gICAgICAgICAgICAgICAgZmluaXNoKHJlcGx5KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYocmVmICE9PSBudWxsKXsgdGhpcy51bmRvUmVmcyhyZWYpIH1cbiAgICAgICAgICAgIGZpbmlzaChudWxsKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgKVxuICB9XG5cbiAgdW5kb1JlZnMocmVmKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH0gLy8gZXhpdCBpZiBleHRlcm5hbCBmb3JtIHRyaWdnZXJlZFxuXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske1BIWF9SRUZfU1JDfT1cIiR7dGhpcy5pZH1cIl1bJHtQSFhfUkVGfT1cIiR7cmVmfVwiXWAsIGVsID0+IHtcbiAgICAgIGxldCBkaXNhYmxlZFZhbCA9IGVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQpXG4gICAgICAvLyByZW1vdmUgcmVmc1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUYpXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG4gICAgICAvLyByZXN0b3JlIGlucHV0c1xuICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKFBIWF9SRUFET05MWSkgIT09IG51bGwpe1xuICAgICAgICBlbC5yZWFkT25seSA9IGZhbHNlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVBRE9OTFkpXG4gICAgICB9XG4gICAgICBpZihkaXNhYmxlZFZhbCAhPT0gbnVsbCl7XG4gICAgICAgIGVsLmRpc2FibGVkID0gZGlzYWJsZWRWYWwgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfRElTQUJMRUQpXG4gICAgICB9XG4gICAgICAvLyByZW1vdmUgY2xhc3Nlc1xuICAgICAgUEhYX0VWRU5UX0NMQVNTRVMuZm9yRWFjaChjbGFzc05hbWUgPT4gRE9NLnJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpKVxuICAgICAgLy8gcmVzdG9yZSBkaXNhYmxlc1xuICAgICAgbGV0IGRpc2FibGVSZXN0b3JlID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSlcbiAgICAgIGlmKGRpc2FibGVSZXN0b3JlICE9PSBudWxsKXtcbiAgICAgICAgZWwuaW5uZXJUZXh0ID0gZGlzYWJsZVJlc3RvcmVcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSlcbiAgICAgIH1cbiAgICAgIGxldCB0b0VsID0gRE9NLnByaXZhdGUoZWwsIFBIWF9SRUYpXG4gICAgICBpZih0b0VsKXtcbiAgICAgICAgbGV0IGhvb2sgPSB0aGlzLnRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGVsLCB0b0VsKVxuICAgICAgICBET01QYXRjaC5wYXRjaEVsKGVsLCB0b0VsLCB0aGlzLmxpdmVTb2NrZXQuZ2V0QWN0aXZlRWxlbWVudCgpKVxuICAgICAgICBpZihob29rKXsgaG9vay5fX3VwZGF0ZWQoKSB9XG4gICAgICAgIERPTS5kZWxldGVQcml2YXRlKGVsLCBQSFhfUkVGKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwdXRSZWYoZWxlbWVudHMsIGV2ZW50LCBvcHRzID0ge30pe1xuICAgIGxldCBuZXdSZWYgPSB0aGlzLnJlZisrXG4gICAgbGV0IGRpc2FibGVXaXRoID0gdGhpcy5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpXG4gICAgaWYob3B0cy5sb2FkaW5nKXsgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoRE9NLmFsbChkb2N1bWVudCwgb3B0cy5sb2FkaW5nKSl9XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoYHBoeC0ke2V2ZW50fS1sb2FkaW5nYClcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUkVGLCBuZXdSZWYpXG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMsIHRoaXMuZWwuaWQpXG4gICAgICBsZXQgZGlzYWJsZVRleHQgPSBlbC5nZXRBdHRyaWJ1dGUoZGlzYWJsZVdpdGgpXG4gICAgICBpZihkaXNhYmxlVGV4dCAhPT0gbnVsbCl7XG4gICAgICAgIGlmKCFlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKSl7XG4gICAgICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSwgZWwuaW5uZXJUZXh0KVxuICAgICAgICB9XG4gICAgICAgIGlmKGRpc2FibGVUZXh0ICE9PSBcIlwiKXsgZWwuaW5uZXJUZXh0ID0gZGlzYWJsZVRleHQgfVxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIFtuZXdSZWYsIGVsZW1lbnRzLCBvcHRzXVxuICB9XG5cbiAgY29tcG9uZW50SUQoZWwpe1xuICAgIGxldCBjaWQgPSBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpXG4gICAgcmV0dXJuIGNpZCA/IHBhcnNlSW50KGNpZCkgOiBudWxsXG4gIH1cblxuICB0YXJnZXRDb21wb25lbnRJRCh0YXJnZXQsIHRhcmdldEN0eCwgb3B0cyA9IHt9KXtcbiAgICBpZihpc0NpZCh0YXJnZXRDdHgpKXsgcmV0dXJuIHRhcmdldEN0eCB9XG5cbiAgICBsZXQgY2lkT3JTZWxlY3RvciA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwidGFyZ2V0XCIpKVxuICAgIGlmKGlzQ2lkKGNpZE9yU2VsZWN0b3IpKXtcbiAgICAgIHJldHVybiBwYXJzZUludChjaWRPclNlbGVjdG9yKVxuICAgIH0gZWxzZSBpZih0YXJnZXRDdHggJiYgKGNpZE9yU2VsZWN0b3IgIT09IG51bGwgfHwgb3B0cy50YXJnZXQpKXtcbiAgICAgIHJldHVybiB0aGlzLmNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eCl7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7XG4gICAgICByZXR1cm4gdGFyZ2V0Q3R4XG4gICAgfSBlbHNlIGlmKHRhcmdldEN0eCl7XG4gICAgICByZXR1cm4gbWF5YmUodGFyZ2V0Q3R4LmNsb3Nlc3QoYFske1BIWF9DT01QT05FTlR9XWApLCBlbCA9PiB0aGlzLm93bnNFbGVtZW50KGVsKSAmJiB0aGlzLmNvbXBvbmVudElEKGVsKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBwdXNoSG9va0V2ZW50KGVsLCB0YXJnZXRDdHgsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMubG9nKFwiaG9va1wiLCAoKSA9PiBbXCJ1bmFibGUgdG8gcHVzaCBob29rIGV2ZW50LiBMaXZlVmlldyBub3QgY29ubmVjdGVkXCIsIGV2ZW50LCBwYXlsb2FkXSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBsZXQgW3JlZiwgZWxzLCBvcHRzXSA9IHRoaXMucHV0UmVmKFtlbF0sIFwiaG9va1wiKVxuICAgIHRoaXMucHVzaFdpdGhSZXBseSgoKSA9PiBbcmVmLCBlbHMsIG9wdHNdLCBcImV2ZW50XCIsIHtcbiAgICAgIHR5cGU6IFwiaG9va1wiLFxuICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgdmFsdWU6IHBheWxvYWQsXG4gICAgICBjaWQ6IHRoaXMuY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eClcbiAgICB9LCAocmVzcCwgcmVwbHkpID0+IG9uUmVwbHkocmVwbHksIHJlZikpXG5cbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICBleHRyYWN0TWV0YShlbCwgbWV0YSwgdmFsdWUpe1xuICAgIGxldCBwcmVmaXggPSB0aGlzLmJpbmRpbmcoXCJ2YWx1ZS1cIilcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZWwuYXR0cmlidXRlcy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBsZXQgbmFtZSA9IGVsLmF0dHJpYnV0ZXNbaV0ubmFtZVxuICAgICAgaWYobmFtZS5zdGFydHNXaXRoKHByZWZpeCkpeyBtZXRhW25hbWUucmVwbGFjZShwcmVmaXgsIFwiXCIpXSA9IGVsLmdldEF0dHJpYnV0ZShuYW1lKSB9XG4gICAgfVxuICAgIGlmKGVsLnZhbHVlICE9PSB1bmRlZmluZWQpe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgbWV0YS52YWx1ZSA9IGVsLnZhbHVlXG5cbiAgICAgIGlmKGVsLnRhZ05hbWUgPT09IFwiSU5QVVRcIiAmJiBDSEVDS0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCAmJiAhZWwuY2hlY2tlZCl7XG4gICAgICAgIGRlbGV0ZSBtZXRhLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmKHZhbHVlKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIGZvcihsZXQga2V5IGluIHZhbHVlKXsgbWV0YVtrZXldID0gdmFsdWVba2V5XSB9XG4gICAgfVxuICAgIHJldHVybiBtZXRhXG4gIH1cblxuXG4gIHB1c2hFdmVudCh0eXBlLCBlbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgbWV0YSwgb3B0cyA9IHt9LCBvblJlcGx5KXtcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gdGhpcy5wdXRSZWYoW2VsXSwgdHlwZSwgb3B0cyksIFwiZXZlbnRcIiwge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiB0aGlzLmV4dHJhY3RNZXRhKGVsLCBtZXRhLCBvcHRzLnZhbHVlKSxcbiAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChlbCwgdGFyZ2V0Q3R4LCBvcHRzKVxuICAgIH0sIChyZXNwLCByZXBseSkgPT4gb25SZXBseSAmJiBvblJlcGx5KHJlcGx5KSlcbiAgfVxuXG4gIHB1c2hGaWxlUHJvZ3Jlc3MoZmlsZUVsLCBlbnRyeVJlZiwgcHJvZ3Jlc3MsIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmaWxlRWwuZm9ybSwgKHZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgdmlldy5wdXNoV2l0aFJlcGx5KG51bGwsIFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICBldmVudDogZmlsZUVsLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoUEhYX1BST0dSRVNTKSksXG4gICAgICAgIHJlZjogZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJ5X3JlZjogZW50cnlSZWYsXG4gICAgICAgIHByb2dyZXNzOiBwcm9ncmVzcyxcbiAgICAgICAgY2lkOiB2aWV3LnRhcmdldENvbXBvbmVudElEKGZpbGVFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgICB9LCBvblJlcGx5KVxuICAgIH0pXG4gIH1cblxuICBwdXNoSW5wdXQoaW5wdXRFbCwgdGFyZ2V0Q3R4LCBmb3JjZUNpZCwgcGh4RXZlbnQsIG9wdHMsIGNhbGxiYWNrKXtcbiAgICBsZXQgdXBsb2Fkc1xuICAgIGxldCBjaWQgPSBpc0NpZChmb3JjZUNpZCkgPyBmb3JjZUNpZCA6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgbGV0IHJlZkdlbmVyYXRvciA9ICgpID0+IHRoaXMucHV0UmVmKFtpbnB1dEVsLCBpbnB1dEVsLmZvcm1dLCBcImNoYW5nZVwiLCBvcHRzKVxuICAgIGxldCBmb3JtRGF0YVxuICAgIGxldCBtZXRhICA9IHRoaXMuZXh0cmFjdE1ldGEoaW5wdXRFbC5mb3JtKVxuICAgIGlmKGlucHV0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSkpe1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldCwgLi4ubWV0YX0sIFtpbnB1dEVsLm5hbWVdKVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oaW5wdXRFbC5mb3JtLCB7X3RhcmdldDogb3B0cy5fdGFyZ2V0LCAuLi5tZXRhfSlcbiAgICB9XG4gICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoaW5wdXRFbCkgJiYgaW5wdXRFbC5maWxlcyAmJiBpbnB1dEVsLmZpbGVzLmxlbmd0aCA+IDApe1xuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXMoaW5wdXRFbCwgQXJyYXkuZnJvbShpbnB1dEVsLmZpbGVzKSlcbiAgICB9XG4gICAgdXBsb2FkcyA9IExpdmVVcGxvYWRlci5zZXJpYWxpemVVcGxvYWRzKGlucHV0RWwpXG5cbiAgICBsZXQgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBcImZvcm1cIixcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgIHVwbG9hZHM6IHVwbG9hZHMsXG4gICAgICBjaWQ6IGNpZFxuICAgIH1cbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIERPTS5zaG93RXJyb3IoaW5wdXRFbCwgdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUikpXG4gICAgICBpZihET00uaXNVcGxvYWRJbnB1dChpbnB1dEVsKSAmJiBpbnB1dEVsLmdldEF0dHJpYnV0ZShcImRhdGEtcGh4LWF1dG8tdXBsb2FkXCIpICE9PSBudWxsKXtcbiAgICAgICAgaWYoTGl2ZVVwbG9hZGVyLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXRFbCkubGVuZ3RoID4gMCl7XG4gICAgICAgICAgbGV0IFtyZWYsIF9lbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4LCByZWYsIGNpZCwgKF91cGxvYWRzKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwKVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQXdhaXRpbmdTdWJtaXQoaW5wdXRFbC5mb3JtKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3ApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHRyaWdnZXJBd2FpdGluZ1N1Ym1pdChmb3JtRWwpe1xuICAgIGxldCBhd2FpdGluZ1N1Ym1pdCA9IHRoaXMuZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbClcbiAgICBpZihhd2FpdGluZ1N1Ym1pdCl7XG4gICAgICBsZXQgW19lbCwgX3JlZiwgX29wdHMsIGNhbGxiYWNrXSA9IGF3YWl0aW5nU3VibWl0XG4gICAgICB0aGlzLmNhbmNlbFN1Ym1pdChmb3JtRWwpXG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbCl7XG4gICAgcmV0dXJuIHRoaXMuZm9ybVN1Ym1pdHMuZmluZCgoW2VsLCBfcmVmLCBfb3B0cywgX2NhbGxiYWNrXSkgPT4gZWwuaXNTYW1lTm9kZShmb3JtRWwpKVxuICB9XG5cbiAgc2NoZWR1bGVTdWJtaXQoZm9ybUVsLCByZWYsIG9wdHMsIGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLmdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpKXsgcmV0dXJuIHRydWUgfVxuICAgIHRoaXMuZm9ybVN1Ym1pdHMucHVzaChbZm9ybUVsLCByZWYsIG9wdHMsIGNhbGxiYWNrXSlcbiAgfVxuXG4gIGNhbmNlbFN1Ym1pdChmb3JtRWwpe1xuICAgIHRoaXMuZm9ybVN1Ym1pdHMgPSB0aGlzLmZvcm1TdWJtaXRzLmZpbHRlcigoW2VsLCByZWYsIF9jYWxsYmFja10pID0+IHtcbiAgICAgIGlmKGVsLmlzU2FtZU5vZGUoZm9ybUVsKSl7XG4gICAgICAgIHRoaXMudW5kb1JlZnMocmVmKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRpc2FibGVGb3JtKGZvcm1FbCwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZmlsdGVySWdub3JlZCA9IGVsID0+IHtcbiAgICAgIGxldCB1c2VySWdub3JlZCA9IGNsb3Nlc3RQaHhCaW5kaW5nKGVsLCBgJHt0aGlzLmJpbmRpbmcoUEhYX1VQREFURSl9PWlnbm9yZWAsIGVsLmZvcm0pXG4gICAgICByZXR1cm4gISh1c2VySWdub3JlZCB8fCBjbG9zZXN0UGh4QmluZGluZyhlbCwgXCJkYXRhLXBoeC11cGRhdGU9aWdub3JlXCIsIGVsLmZvcm0pKVxuICAgIH1cbiAgICBsZXQgZmlsdGVyRGlzYWJsZXMgPSBlbCA9PiB7XG4gICAgICByZXR1cm4gZWwuaGFzQXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKSlcbiAgICB9XG4gICAgbGV0IGZpbHRlckJ1dHRvbiA9IGVsID0+IGVsLnRhZ05hbWUgPT0gXCJCVVRUT05cIlxuXG4gICAgbGV0IGZpbHRlcklucHV0ID0gZWwgPT4gW1wiSU5QVVRcIiwgXCJURVhUQVJFQVwiLCBcIlNFTEVDVFwiXS5pbmNsdWRlcyhlbC50YWdOYW1lKVxuXG4gICAgbGV0IGZvcm1FbGVtZW50cyA9IEFycmF5LmZyb20oZm9ybUVsLmVsZW1lbnRzKVxuICAgIGxldCBkaXNhYmxlcyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVyRGlzYWJsZXMpXG4gICAgbGV0IGJ1dHRvbnMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlckJ1dHRvbikuZmlsdGVyKGZpbHRlcklnbm9yZWQpXG4gICAgbGV0IGlucHV0cyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVySW5wdXQpLmZpbHRlcihmaWx0ZXJJZ25vcmVkKVxuXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCwgYnV0dG9uLmRpc2FibGVkKVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICAgIH0pXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFBIWF9SRUFET05MWSwgaW5wdXQucmVhZE9ubHkpXG4gICAgICBpbnB1dC5yZWFkT25seSA9IHRydWVcbiAgICAgIGlmKGlucHV0LmZpbGVzKXtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCwgaW5wdXQuZGlzYWJsZWQpXG4gICAgICAgIGlucHV0LmRpc2FibGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgZm9ybUVsLnNldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORyksIFwiXCIpXG4gICAgcmV0dXJuIHRoaXMucHV0UmVmKFtmb3JtRWxdLmNvbmNhdChkaXNhYmxlcykuY29uY2F0KGJ1dHRvbnMpLmNvbmNhdChpbnB1dHMpLCBcInN1Ym1pdFwiLCBvcHRzKVxuICB9XG5cbiAgcHVzaEZvcm1TdWJtaXQoZm9ybUVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsIG9uUmVwbHkpe1xuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLmRpc2FibGVGb3JtKGZvcm1FbCwgb3B0cylcbiAgICBsZXQgY2lkID0gdGhpcy50YXJnZXRDb21wb25lbnRJRChmb3JtRWwsIHRhcmdldEN0eClcbiAgICBpZihMaXZlVXBsb2FkZXIuaGFzVXBsb2Fkc0luUHJvZ3Jlc3MoZm9ybUVsKSl7XG4gICAgICBsZXQgW3JlZiwgX2Vsc10gPSByZWZHZW5lcmF0b3IoKVxuICAgICAgbGV0IHB1c2ggPSAoKSA9PiB0aGlzLnB1c2hGb3JtU3VibWl0KGZvcm1FbCwgc3VibWl0dGVyLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBvcHRzLCBvblJlcGx5KVxuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVTdWJtaXQoZm9ybUVsLCByZWYsIG9wdHMsIHB1c2gpXG4gICAgfSBlbHNlIGlmKExpdmVVcGxvYWRlci5pbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpLmxlbmd0aCA+IDApe1xuICAgICAgbGV0IFtyZWYsIGVsc10gPSByZWZHZW5lcmF0b3IoKVxuICAgICAgbGV0IHByb3h5UmVmR2VuID0gKCkgPT4gW3JlZiwgZWxzLCBvcHRzXVxuICAgICAgdGhpcy51cGxvYWRGaWxlcyhmb3JtRWwsIHRhcmdldEN0eCwgcmVmLCBjaWQsIChfdXBsb2FkcykgPT4ge1xuICAgICAgICBsZXQgbWV0YSA9IHRoaXMuZXh0cmFjdE1ldGEoZm9ybUVsKVxuICAgICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlciwgLi4ubWV0YX0pXG4gICAgICAgIHRoaXMucHVzaFdpdGhSZXBseShwcm94eVJlZkdlbiwgXCJldmVudFwiLCB7XG4gICAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgICAgICBjaWQ6IGNpZFxuICAgICAgICB9LCBvblJlcGx5KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIShmb3JtRWwuaGFzQXR0cmlidXRlKFBIWF9SRUYpICYmIGZvcm1FbC5jbGFzc0xpc3QuY29udGFpbnMoXCJwaHgtc3VibWl0LWxvYWRpbmdcIikpKXtcbiAgICAgIGxldCBtZXRhID0gdGhpcy5leHRyYWN0TWV0YShmb3JtRWwpXG4gICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlciwgLi4ubWV0YX0pXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIHtcbiAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgICBjaWQ6IGNpZFxuICAgICAgfSwgb25SZXBseSlcbiAgICB9XG4gIH1cblxuICB1cGxvYWRGaWxlcyhmb3JtRWwsIHRhcmdldEN0eCwgcmVmLCBjaWQsIG9uQ29tcGxldGUpe1xuICAgIGxldCBqb2luQ291bnRBdFVwbG9hZCA9IHRoaXMuam9pbkNvdW50XG4gICAgbGV0IGlucHV0RWxzID0gTGl2ZVVwbG9hZGVyLmFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKVxuICAgIGxldCBudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9IGlucHV0RWxzLmxlbmd0aFxuXG4gICAgLy8gZ2V0IGVhY2ggZmlsZSBpbnB1dFxuICAgIGlucHV0RWxzLmZvckVhY2goaW5wdXRFbCA9PiB7XG4gICAgICBsZXQgdXBsb2FkZXIgPSBuZXcgTGl2ZVVwbG9hZGVyKGlucHV0RWwsIHRoaXMsICgpID0+IHtcbiAgICAgICAgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MtLVxuICAgICAgICBpZihudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9PT0gMCl7IG9uQ29tcGxldGUoKSB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51cGxvYWRlcnNbaW5wdXRFbF0gPSB1cGxvYWRlclxuICAgICAgbGV0IGVudHJpZXMgPSB1cGxvYWRlci5lbnRyaWVzKCkubWFwKGVudHJ5ID0+IGVudHJ5LnRvUHJlZmxpZ2h0UGF5bG9hZCgpKVxuXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcbiAgICAgICAgcmVmOiBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJpZXM6IGVudHJpZXMsXG4gICAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChpbnB1dEVsLmZvcm0sIHRhcmdldEN0eClcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wic2VuZGluZyBwcmVmbGlnaHQgcmVxdWVzdFwiLCBwYXlsb2FkXSlcblxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiYWxsb3dfdXBsb2FkXCIsIHBheWxvYWQsIHJlc3AgPT4ge1xuICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbXCJnb3QgcHJlZmxpZ2h0IHJlc3BvbnNlXCIsIHJlc3BdKVxuICAgICAgICBpZihyZXNwLmVycm9yKXtcbiAgICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgICBsZXQgW2VudHJ5X3JlZiwgcmVhc29uXSA9IHJlc3AuZXJyb3JcbiAgICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbYGVycm9yIGZvciBlbnRyeSAke2VudHJ5X3JlZn1gLCByZWFzb25dKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBvbkVycm9yID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWwub25FcnJvcigoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSBqb2luQ291bnRBdFVwbG9hZCl7IGNhbGxiYWNrKCkgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBsb2FkZXIuaW5pdEFkYXB0ZXJVcGxvYWQocmVzcCwgb25FcnJvciwgdGhpcy5saXZlU29ja2V0KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkaXNwYXRjaFVwbG9hZHMobmFtZSwgZmlsZXNPckJsb2JzKXtcbiAgICBsZXQgaW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHModGhpcy5lbCkuZmlsdGVyKGVsID0+IGVsLm5hbWUgPT09IG5hbWUpXG4gICAgaWYoaW5wdXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBubyBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgaWYoaW5wdXRzLmxlbmd0aCA+IDEpeyBsb2dFcnJvcihgZHVwbGljYXRlIGxpdmUgZmlsZSBpbnB1dHMgZm91bmQgbWF0Y2hpbmcgdGhlIG5hbWUgXCIke25hbWV9XCJgKSB9XG4gICAgZWxzZSB7IERPTS5kaXNwYXRjaEV2ZW50KGlucHV0c1swXSwgUEhYX1RSQUNLX1VQTE9BRFMsIHtkZXRhaWw6IHtmaWxlczogZmlsZXNPckJsb2JzfX0pIH1cbiAgfVxuXG4gIHB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCBjYWxsYmFjayl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmb3JtLCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICBsZXQgcGh4Q2hhbmdlID0gdGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpXG4gICAgICBsZXQgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKS5maWx0ZXIoZWwgPT4gRE9NLmlzRm9ybUlucHV0KGVsKSAmJiBlbC5uYW1lICYmICFlbC5oYXNBdHRyaWJ1dGUocGh4Q2hhbmdlKSlcbiAgICAgIGlmKGlucHV0cy5sZW5ndGggPT09IDApeyByZXR1cm4gfVxuXG4gICAgICBsZXQgaW5wdXQgPSBpbnB1dHMuZmluZChlbCA9PiBlbC50eXBlICE9PSBcImhpZGRlblwiKSB8fCBpbnB1dFswXVxuICAgICAgbGV0IHBoeEV2ZW50ID0gZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9BVVRPX1JFQ09WRVIpKSB8fCBmb3JtLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogaW5wdXQubmFtZSwgbmV3Q2lkOiBuZXdDaWQsIGNhbGxiYWNrOiBjYWxsYmFja31dKVxuICAgIH0pXG4gIH1cblxuICBwdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxpbmtSZWYgPSB0aGlzLmxpdmVTb2NrZXQuc2V0UGVuZGluZ0xpbmsoaHJlZilcbiAgICBsZXQgcmVmR2VuID0gdGFyZ2V0RWwgPyAoKSA9PiB0aGlzLnB1dFJlZihbdGFyZ2V0RWxdLCBcImNsaWNrXCIpIDogbnVsbFxuICAgIGxldCBmYWxsYmFjayA9ICgpID0+IHRoaXMubGl2ZVNvY2tldC5yZWRpcmVjdCh3aW5kb3cubG9jYXRpb24uaHJlZilcblxuICAgIGxldCBwdXNoID0gdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbiwgXCJsaXZlX3BhdGNoXCIsIHt1cmw6IGhyZWZ9LCByZXNwID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYocmVzcC5saW5rX3JlZGlyZWN0KXtcbiAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgY2FsbGJhY2ssIGxpbmtSZWYpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYodGhpcy5saXZlU29ja2V0LmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXtcbiAgICAgICAgICAgIHRoaXMuaHJlZiA9IGhyZWZcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcbiAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhsaW5rUmVmKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihwdXNoKXtcbiAgICAgIHB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwgZmFsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGZhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBmb3Jtc0ZvclJlY292ZXJ5KGh0bWwpe1xuICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSAwKXsgcmV0dXJuIFtdIH1cblxuICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG5cbiAgICByZXR1cm4gKFxuICAgICAgRE9NLmFsbCh0aGlzLmVsLCBgZm9ybVske3BoeENoYW5nZX1dYClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uaWQgJiYgdGhpcy5vd25zRWxlbWVudChmb3JtKSlcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZWxlbWVudHMubGVuZ3RoID4gMClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgIT09IFwiaWdub3JlXCIpXG4gICAgICAgIC5tYXAoZm9ybSA9PiB7XG4gICAgICAgICAgbGV0IG5ld0Zvcm0gPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm1baWQ9XCIke2Zvcm0uaWR9XCJdWyR7cGh4Q2hhbmdlfT1cIiR7Zm9ybS5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKX1cIl1gKVxuICAgICAgICAgIGlmKG5ld0Zvcm0pe1xuICAgICAgICAgICAgcmV0dXJuIFtmb3JtLCBuZXdGb3JtLCB0aGlzLnRhcmdldENvbXBvbmVudElEKG5ld0Zvcm0pXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW2Zvcm0sIGZvcm0sIHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZm9ybSldXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChbZm9ybSwgbmV3Rm9ybSwgbmV3Q2lkXSkgPT4gbmV3Rm9ybSlcbiAgICApXG4gIH1cblxuICBtYXliZVB1c2hDb21wb25lbnRzRGVzdHJveWVkKGRlc3Ryb3llZENJRHMpe1xuICAgIGxldCB3aWxsRGVzdHJveUNJRHMgPSBkZXN0cm95ZWRDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgcmV0dXJuIERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgY2lkKS5sZW5ndGggPT09IDBcbiAgICB9KVxuICAgIGlmKHdpbGxEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgIHRoaXMucHJ1bmluZ0NJRHMucHVzaCguLi53aWxsRGVzdHJveUNJRHMpXG5cbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfd2lsbF9kZXN0cm95XCIsIHtjaWRzOiB3aWxsRGVzdHJveUNJRHN9LCAoKSA9PiB7XG4gICAgICAgIC8vIFRoZSBjaWRzIGFyZSBlaXRoZXIgYmFjayBvbiB0aGUgcGFnZSBvciB0aGV5IHdpbGwgYmUgZnVsbHkgcmVtb3ZlZCxcbiAgICAgICAgLy8gc28gd2UgY2FuIHJlbW92ZSB0aGVtIGZyb20gdGhlIHBydW5pbmdDSURzLlxuICAgICAgICB0aGlzLnBydW5pbmdDSURzID0gdGhpcy5wcnVuaW5nQ0lEcy5maWx0ZXIoY2lkID0+IHdpbGxEZXN0cm95Q0lEcy5pbmRleE9mKGNpZCkgIT09IC0xKVxuXG4gICAgICAgIC8vIFNlZSBpZiBhbnkgb2YgdGhlIGNpZHMgd2Ugd2FudGVkIHRvIGRlc3Ryb3kgd2VyZSBhZGRlZCBiYWNrLFxuICAgICAgICAvLyBpZiB0aGV5IHdlcmUgYWRkZWQgYmFjaywgd2UgZG9uJ3QgYWN0dWFsbHkgZGVzdHJveSB0aGVtLlxuICAgICAgICBsZXQgY29tcGxldGVseURlc3Ryb3lDSURzID0gd2lsbERlc3Ryb3lDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIGNpZCkubGVuZ3RoID09PSAwXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYoY29tcGxldGVseURlc3Ryb3lDSURzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfZGVzdHJveWVkXCIsIHtjaWRzOiBjb21wbGV0ZWx5RGVzdHJveUNJRHN9LCAocmVzcCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZC5wcnVuZUNJRHMocmVzcC5jaWRzKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb3duc0VsZW1lbnQoZWwpe1xuICAgIGxldCBwYXJlbnRWaWV3RWwgPSBlbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKVxuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRCkgPT09IHRoaXMuaWQgfHxcbiAgICAgIChwYXJlbnRWaWV3RWwgJiYgcGFyZW50Vmlld0VsLmlkID09PSB0aGlzLmlkKSB8fFxuICAgICAgKCFwYXJlbnRWaWV3RWwgJiYgdGhpcy5pc0RlYWQpXG4gIH1cblxuICBzdWJtaXRGb3JtKGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cyA9IHt9KXtcbiAgICBET00ucHV0UHJpdmF0ZShmb3JtLCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSlcbiAgICBsZXQgcGh4RmVlZGJhY2sgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGxldCBpbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnB1dFByaXZhdGUoaW5wdXQsIFBIWF9IQVNfU1VCTUlUVEVELCB0cnVlKSlcbiAgICB0aGlzLmxpdmVTb2NrZXQuYmx1ckFjdGl2ZUVsZW1lbnQodGhpcylcbiAgICB0aGlzLnB1c2hGb3JtU3VibWl0KGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cywgKCkgPT4ge1xuICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnNob3dFcnJvcihpbnB1dCwgcGh4RmVlZGJhY2spKVxuICAgICAgdGhpcy5saXZlU29ja2V0LnJlc3RvcmVQcmV2aW91c2x5QWN0aXZlRm9jdXMoKVxuICAgIH0pXG4gIH1cblxuICBiaW5kaW5nKGtpbmQpeyByZXR1cm4gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoa2luZCkgfVxufVxuIiwgIi8qKiBJbml0aWFsaXplcyB0aGUgTGl2ZVNvY2tldFxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIGBcIndzczovL2V4YW1wbGUuY29tL2xpdmVcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiL2xpdmVcImAgKGluaGVyaXRlZCBob3N0ICYgcHJvdG9jb2wpXG4gKiBAcGFyYW0ge1Bob2VuaXguU29ja2V0fSBzb2NrZXQgLSB0aGUgcmVxdWlyZWQgUGhvZW5peCBTb2NrZXQgY2xhc3MgaW1wb3J0ZWQgZnJvbSBcInBob2VuaXhcIi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gKiAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICogICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBPcHRpb25hbCBjb25maWd1cmF0aW9uLiBPdXRzaWRlIG9mIGtleXMgbGlzdGVkIGJlbG93LCBhbGxcbiAqIGNvbmZpZ3VyYXRpb24gaXMgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBQaG9lbml4IFNvY2tldCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5kZWZhdWx0c10gLSBUaGUgb3B0aW9uYWwgZGVmYXVsdHMgdG8gdXNlIGZvciB2YXJpb3VzIGJpbmRpbmdzLFxuICogc3VjaCBhcyBgcGh4LWRlYm91bmNlYC4gU3VwcG9ydHMgdGhlIGZvbGxvd2luZyBrZXlzOlxuICpcbiAqICAgLSBkZWJvdW5jZSAtIHRoZSBtaWxsaXNlY29uZCBwaHgtZGVib3VuY2UgdGltZS4gRGVmYXVsdHMgMzAwXG4gKiAgIC0gdGhyb3R0bGUgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LXRocm90dGxlIHRpbWUuIERlZmF1bHRzIDMwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gZm9yIHBhc3NpbmcgY29ubmVjdCBwYXJhbXMuXG4gKiBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gTGl2ZVZpZXcuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAoZWwpID0+IHt2aWV3OiBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW15LXZpZXctbmFtZVwiLCB0b2tlbjogd2luZG93Lm15VG9rZW59XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmJpbmRpbmdQcmVmaXhdIC0gVGhlIG9wdGlvbmFsIHByZWZpeCB0byB1c2UgZm9yIGFsbCBwaHggRE9NIGFubm90YXRpb25zLlxuICogRGVmYXVsdHMgdG8gXCJwaHgtXCIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuaG9va3NdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBmb3IgcmVmZXJlbmNpbmcgTGl2ZVZpZXcgaG9vayBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMudXBsb2FkZXJzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IHVwbG9hZGVyIGNhbGxiYWNrcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubG9hZGVyVGltZW91dF0gLSBUaGUgb3B0aW9uYWwgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGFwcGx5XG4gKiBsb2FkaW5nIHN0YXRlcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubWF4UmVsb2Fkc10gLSBUaGUgbWF4aW11bSByZWxvYWRzIGJlZm9yZSBlbnRlcmluZyBmYWlsc2FmZSBtb2RlLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNaW5dIC0gVGhlIG1pbmltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLnJlbG9hZEppdHRlck1heF0gLSBUaGUgbWF4aW11bSB0aW1lIGJldHdlZW4gbm9ybWFsIHJlbG9hZCBhdHRlbXB0cy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMuZmFpbHNhZmVKaXR0ZXJdIC0gVGhlIHRpbWUgYmV0d2VlbiByZWxvYWQgYXR0ZW1wdHMgaW4gZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnZpZXdMb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvZyBkZWJ1ZyBpbmZvcm1hdGlvbi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgICh2aWV3LCBraW5kLCBtc2csIG9iaikgPT4gY29uc29sZS5sb2coYCR7dmlldy5pZH0gJHtraW5kfTogJHttc2d9IC0gYCwgb2JqKVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5tZXRhZGF0YV0gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IG1hcHBpbmcgZXZlbnQgbmFtZXMgdG8gZnVuY3Rpb25zIGZvclxuICogcG9wdWxhdGluZyBldmVudCBtZXRhZGF0YS4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIG1ldGFkYXRhOiB7XG4gKiAgICAgICBjbGljazogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgY3RybEtleTogZS5jdHJsS2V5LFxuICogICAgICAgICAgIG1ldGFLZXk6IGUubWV0YUtleSxcbiAqICAgICAgICAgICBkZXRhaWw6IGUuZGV0YWlsIHx8IDEsXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH0sXG4gKiAgICAgICBrZXlkb3duOiAoZSwgZWwpID0+IHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICBrZXk6IGUua2V5LFxuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgc2hpZnRLZXk6IGUuc2hpZnRLZXlcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5zZXNzaW9uU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgc2Vzc2lvblN0b3JhZ2VgLiAgRm9yIGV4YW1wbGUsIFRoaXMgY291bGRcbiAqIGhhcHBlbiBpZiBhIHNpdGUgbG9hZHMgYSBjcm9zcy1kb21haW4gTGl2ZVZpZXcgaW4gYW4gaWZyYW1lLiAgRXhhbXBsZSB1c2FnZTpcbiAqXG4gKiAgICAgY2xhc3MgSW5NZW1vcnlTdG9yYWdlIHtcbiAqICAgICAgIGNvbnN0cnVjdG9yKCkgeyB0aGlzLnN0b3JhZ2UgPSB7fSB9XG4gKiAgICAgICBnZXRJdGVtKGtleU5hbWUpIHsgcmV0dXJuIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB8fCBudWxsIH1cbiAqICAgICAgIHJlbW92ZUl0ZW0oa2V5TmFtZSkgeyBkZWxldGUgdGhpcy5zdG9yYWdlW2tleU5hbWVdIH1cbiAqICAgICAgIHNldEl0ZW0oa2V5TmFtZSwga2V5VmFsdWUpIHsgdGhpcy5zdG9yYWdlW2tleU5hbWVdID0ga2V5VmFsdWUgfVxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubG9jYWxTdG9yYWdlXSAtIEFuIG9wdGlvbmFsIFN0b3JhZ2UgY29tcGF0aWJsZSBvYmplY3RcbiAqIFVzZWZ1bCBmb3Igd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgbG9jYWxTdG9yYWdlYC5cbiAqIFNlZSBgb3B0cy5zZXNzaW9uU3RvcmFnZWAgZm9yIGV4YW1wbGVzLlxuKi9cblxuaW1wb3J0IHtcbiAgQklORElOR19QUkVGSVgsXG4gIENPTlNFQ1VUSVZFX1JFTE9BRFMsXG4gIERFRkFVTFRTLFxuICBGQUlMU0FGRV9KSVRURVIsXG4gIExPQURFUl9USU1FT1VULFxuICBNQVhfUkVMT0FEUyxcbiAgUEhYX0RFQk9VTkNFLFxuICBQSFhfRFJPUF9UQVJHRVQsXG4gIFBIWF9IQVNfRk9DVVNFRCxcbiAgUEhYX0tFWSxcbiAgUEhYX0xJTktfU1RBVEUsXG4gIFBIWF9MSVZFX0xJTkssXG4gIFBIWF9MVl9ERUJVRyxcbiAgUEhYX0xWX0xBVEVOQ1lfU0lNLFxuICBQSFhfTFZfUFJPRklMRSxcbiAgUEhYX01BSU4sXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1RIUk9UVExFLFxuICBQSFhfVFJBQ0tfVVBMT0FEUyxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFJFTE9BRF9KSVRURVJfTUlOLFxuICBSRUxPQURfSklUVEVSX01BWCxcbiAgUEhYX1JFRixcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBjbG9zdXJlLFxuICBkZWJ1ZyxcbiAgaXNPYmplY3QsXG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEJyb3dzZXIgZnJvbSBcIi4vYnJvd3NlclwiXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgSG9va3MgZnJvbSBcIi4vaG9va3NcIlxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBWaWV3IGZyb20gXCIuL3ZpZXdcIlxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKHVybCwgcGh4U29ja2V0LCBvcHRzID0ge30pe1xuICAgIHRoaXMudW5sb2FkZWQgPSBmYWxzZVxuICAgIGlmKCFwaHhTb2NrZXQgfHwgcGh4U29ja2V0LmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCIpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcbiAgICAgIGEgcGhvZW5peCBTb2NrZXQgbXVzdCBiZSBwcm92aWRlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIHRoZSBMaXZlU29ja2V0IGNvbnN0cnVjdG9yLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gICAgICAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICAgICAgICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICAgICAgYClcbiAgICB9XG4gICAgdGhpcy5zb2NrZXQgPSBuZXcgcGh4U29ja2V0KHVybCwgb3B0cylcbiAgICB0aGlzLmJpbmRpbmdQcmVmaXggPSBvcHRzLmJpbmRpbmdQcmVmaXggfHwgQklORElOR19QUkVGSVhcbiAgICB0aGlzLm9wdHMgPSBvcHRzXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKG9wdHMucGFyYW1zIHx8IHt9KVxuICAgIHRoaXMudmlld0xvZ2dlciA9IG9wdHMudmlld0xvZ2dlclxuICAgIHRoaXMubWV0YWRhdGFDYWxsYmFja3MgPSBvcHRzLm1ldGFkYXRhIHx8IHt9XG4gICAgdGhpcy5kZWZhdWx0cyA9IE9iamVjdC5hc3NpZ24oY2xvbmUoREVGQVVMVFMpLCBvcHRzLmRlZmF1bHRzIHx8IHt9KVxuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IG51bGxcbiAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgdGhpcy5zaWxlbmNlZCA9IGZhbHNlXG4gICAgdGhpcy5tYWluID0gbnVsbFxuICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSBudWxsXG4gICAgdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IG51bGxcbiAgICB0aGlzLmxpbmtSZWYgPSAxXG4gICAgdGhpcy5yb290cyA9IHt9XG4gICAgdGhpcy5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gbnVsbFxuICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gY2xvbmUod2luZG93LmxvY2F0aW9uKVxuICAgIHRoaXMuaG9va3MgPSBvcHRzLmhvb2tzIHx8IHt9XG4gICAgdGhpcy51cGxvYWRlcnMgPSBvcHRzLnVwbG9hZGVycyB8fCB7fVxuICAgIHRoaXMubG9hZGVyVGltZW91dCA9IG9wdHMubG9hZGVyVGltZW91dCB8fCBMT0FERVJfVElNRU9VVFxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gbnVsbFxuICAgIHRoaXMubWF4UmVsb2FkcyA9IG9wdHMubWF4UmVsb2FkcyB8fCBNQVhfUkVMT0FEU1xuICAgIHRoaXMucmVsb2FkSml0dGVyTWluID0gb3B0cy5yZWxvYWRKaXR0ZXJNaW4gfHwgUkVMT0FEX0pJVFRFUl9NSU5cbiAgICB0aGlzLnJlbG9hZEppdHRlck1heCA9IG9wdHMucmVsb2FkSml0dGVyTWF4IHx8IFJFTE9BRF9KSVRURVJfTUFYXG4gICAgdGhpcy5mYWlsc2FmZUppdHRlciA9IG9wdHMuZmFpbHNhZmVKaXR0ZXIgfHwgRkFJTFNBRkVfSklUVEVSXG4gICAgdGhpcy5sb2NhbFN0b3JhZ2UgPSBvcHRzLmxvY2FsU3RvcmFnZSB8fCB3aW5kb3cubG9jYWxTdG9yYWdlXG4gICAgdGhpcy5zZXNzaW9uU3RvcmFnZSA9IG9wdHMuc2Vzc2lvblN0b3JhZ2UgfHwgd2luZG93LnNlc3Npb25TdG9yYWdlXG4gICAgdGhpcy5ib3VuZFRvcExldmVsRXZlbnRzID0gZmFsc2VcbiAgICB0aGlzLmRvbUNhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe29uTm9kZUFkZGVkOiBjbG9zdXJlKCksIG9uQmVmb3JlRWxVcGRhdGVkOiBjbG9zdXJlKCl9LCBvcHRzLmRvbSB8fCB7fSlcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gbmV3IFRyYW5zaXRpb25TZXQoKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgX2UgPT4ge1xuICAgICAgdGhpcy51bmxvYWRlZCA9IHRydWVcbiAgICB9KVxuICAgIHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICBpZih0aGlzLmlzVW5sb2FkZWQoKSl7XG4gICAgICAgIC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlIGFuZCBicm93c2VyIGRvZXMgbm90IGVtaXQgXCJwYWdlc2hvd1wiXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBwdWJsaWNcblxuICBpc1Byb2ZpbGVFbmFibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX1BST0ZJTEUpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0VuYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfREVCVUcpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0Rpc2FibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0RFQlVHKSA9PT0gXCJmYWxzZVwiIH1cblxuICBlbmFibGVEZWJ1ZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0RFQlVHLCBcInRydWVcIikgfVxuXG4gIGVuYWJsZVByb2ZpbGluZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX1BST0ZJTEUsIFwidHJ1ZVwiKSB9XG5cbiAgZGlzYWJsZURlYnVnKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfREVCVUcsIFwiZmFsc2VcIikgfVxuXG4gIGRpc2FibGVQcm9maWxpbmcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFBIWF9MVl9QUk9GSUxFKSB9XG5cbiAgZW5hYmxlTGF0ZW5jeVNpbSh1cHBlckJvdW5kTXMpe1xuICAgIHRoaXMuZW5hYmxlRGVidWcoKVxuICAgIGNvbnNvbGUubG9nKFwibGF0ZW5jeSBzaW11bGF0b3IgZW5hYmxlZCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoaXMgYnJvd3NlciBzZXNzaW9uLiBDYWxsIGRpc2FibGVMYXRlbmN5U2ltKCkgdG8gZGlzYWJsZVwiKVxuICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0sIHVwcGVyQm91bmRNcylcbiAgfVxuXG4gIGRpc2FibGVMYXRlbmN5U2ltKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShQSFhfTFZfTEFURU5DWV9TSU0pIH1cblxuICBnZXRMYXRlbmN5U2ltKCl7XG4gICAgbGV0IHN0ciA9IHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0pXG4gICAgcmV0dXJuIHN0ciA/IHBhcnNlSW50KHN0cikgOiBudWxsXG4gIH1cblxuICBnZXRTb2NrZXQoKXsgcmV0dXJuIHRoaXMuc29ja2V0IH1cblxuICBjb25uZWN0KCl7XG4gICAgLy8gZW5hYmxlIGRlYnVnIGJ5IGRlZmF1bHQgaWYgb24gbG9jYWxob3N0IGFuZCBub3QgZXhwbGljaXRseSBkaXNhYmxlZFxuICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gXCJsb2NhbGhvc3RcIiAmJiAhdGhpcy5pc0RlYnVnRGlzYWJsZWQoKSl7IHRoaXMuZW5hYmxlRGVidWcoKSB9XG4gICAgbGV0IGRvQ29ubmVjdCA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuam9pblJvb3RWaWV3cygpKXtcbiAgICAgICAgdGhpcy5iaW5kVG9wTGV2ZWxFdmVudHMoKVxuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSBpZih0aGlzLm1haW4pe1xuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYmluZFRvcExldmVsRXZlbnRzKHtkZWFkOiB0cnVlfSlcbiAgICAgIH1cbiAgICAgIHRoaXMuam9pbkRlYWRWaWV3KClcbiAgICB9XG4gICAgaWYoW1wiY29tcGxldGVcIiwgXCJsb2FkZWRcIiwgXCJpbnRlcmFjdGl2ZVwiXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpID49IDApe1xuICAgICAgZG9Db25uZWN0KClcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gZG9Db25uZWN0KCkpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdChjYWxsYmFjayl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoY2FsbGJhY2spXG4gIH1cblxuICByZXBsYWNlVHJhbnNwb3J0KHRyYW5zcG9ydCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LnJlcGxhY2VUcmFuc3BvcnQodHJhbnNwb3J0KVxuICAgIHRoaXMuY29ubmVjdCgpXG4gIH1cblxuICBleGVjSlMoZWwsIGVuY29kZWRKUywgZXZlbnRUeXBlID0gbnVsbCl7XG4gICAgdGhpcy5vd25lcihlbCwgdmlldyA9PiBKUy5leGVjKGV2ZW50VHlwZSwgZW5jb2RlZEpTLCB2aWV3LCBlbCkpXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgZXhlY0pTSG9va1B1c2goZWwsIHBoeEV2ZW50LCBkYXRhLCBjYWxsYmFjayl7XG4gICAgdGhpcy53aXRoaW5Pd25lcnMoZWwsIHZpZXcgPT4ge1xuICAgICAgSlMuZXhlYyhcImhvb2tcIiwgcGh4RXZlbnQsIHZpZXcsIGVsLCBbXCJwdXNoXCIsIHtkYXRhLCBjYWxsYmFja31dKVxuICAgIH0pXG4gIH1cblxuICB1bmxvYWQoKXtcbiAgICBpZih0aGlzLnVubG9hZGVkKXsgcmV0dXJuIH1cbiAgICBpZih0aGlzLm1haW4gJiYgdGhpcy5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5sb2codGhpcy5tYWluLCBcInNvY2tldFwiLCAoKSA9PiBbXCJkaXNjb25uZWN0IGZvciBwYWdlIG5hdlwiXSkgfVxuICAgIHRoaXMudW5sb2FkZWQgPSB0cnVlXG4gICAgdGhpcy5kZXN0cm95QWxsVmlld3MoKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gIH1cblxuICB0cmlnZ2VyRE9NKGtpbmQsIGFyZ3MpeyB0aGlzLmRvbUNhbGxiYWNrc1traW5kXSguLi5hcmdzKSB9XG5cbiAgdGltZShuYW1lLCBmdW5jKXtcbiAgICBpZighdGhpcy5pc1Byb2ZpbGVFbmFibGVkKCkgfHwgIWNvbnNvbGUudGltZSl7IHJldHVybiBmdW5jKCkgfVxuICAgIGNvbnNvbGUudGltZShuYW1lKVxuICAgIGxldCByZXN1bHQgPSBmdW5jKClcbiAgICBjb25zb2xlLnRpbWVFbmQobmFtZSlcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBsb2codmlldywga2luZCwgbXNnQ2FsbGJhY2spe1xuICAgIGlmKHRoaXMudmlld0xvZ2dlcil7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIHRoaXMudmlld0xvZ2dlcih2aWV3LCBraW5kLCBtc2csIG9iailcbiAgICB9IGVsc2UgaWYodGhpcy5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICAgIGxldCBbbXNnLCBvYmpdID0gbXNnQ2FsbGJhY2soKVxuICAgICAgZGVidWcodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdERPTVVwZGF0ZShjYWxsYmFjayl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZnRlcihjYWxsYmFjaylcbiAgfVxuXG4gIHRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lID0gZnVuY3Rpb24oKXt9KXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmFkZFRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICB9XG5cbiAgb25DaGFubmVsKGNoYW5uZWwsIGV2ZW50LCBjYil7XG4gICAgY2hhbm5lbC5vbihldmVudCwgZGF0YSA9PiB7XG4gICAgICBsZXQgbGF0ZW5jeSA9IHRoaXMuZ2V0TGF0ZW5jeVNpbSgpXG4gICAgICBpZighbGF0ZW5jeSl7XG4gICAgICAgIGNiKGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNiKGRhdGEpLCBsYXRlbmN5KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB3cmFwUHVzaCh2aWV3LCBvcHRzLCBwdXNoKXtcbiAgICBsZXQgbGF0ZW5jeSA9IHRoaXMuZ2V0TGF0ZW5jeVNpbSgpXG4gICAgbGV0IG9sZEpvaW5Db3VudCA9IHZpZXcuam9pbkNvdW50XG4gICAgaWYoIWxhdGVuY3kpe1xuICAgICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpICYmIG9wdHMudGltZW91dCl7XG4gICAgICAgIHJldHVybiBwdXNoKCkucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgIGlmKHZpZXcuam9pbkNvdW50ID09PSBvbGRKb2luQ291bnQgJiYgIXZpZXcuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodmlldywgKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxvZyh2aWV3LCBcInRpbWVvdXRcIiwgKCkgPT4gW1wicmVjZWl2ZWQgdGltZW91dCB3aGlsZSBjb21tdW5pY2F0aW5nIHdpdGggc2VydmVyLiBGYWxsaW5nIGJhY2sgdG8gaGFyZCByZWZyZXNoIGZvciByZWNvdmVyeVwiXSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHB1c2goKVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBmYWtlUHVzaCA9IHtcbiAgICAgIHJlY2VpdmVzOiBbXSxcbiAgICAgIHJlY2VpdmUoa2luZCwgY2IpeyB0aGlzLnJlY2VpdmVzLnB1c2goW2tpbmQsIGNiXSkgfVxuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmKHZpZXcuaXNEZXN0cm95ZWQoKSl7IHJldHVybiB9XG4gICAgICBmYWtlUHVzaC5yZWNlaXZlcy5yZWR1Y2UoKGFjYywgW2tpbmQsIGNiXSkgPT4gYWNjLnJlY2VpdmUoa2luZCwgY2IpLCBwdXNoKCkpXG4gICAgfSwgbGF0ZW5jeSlcbiAgICByZXR1cm4gZmFrZVB1c2hcbiAgfVxuXG4gIHJlbG9hZFdpdGhKaXR0ZXIodmlldywgbG9nKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIpXG4gICAgdGhpcy5kaXNjb25uZWN0KClcbiAgICBsZXQgbWluTXMgPSB0aGlzLnJlbG9hZEppdHRlck1pblxuICAgIGxldCBtYXhNcyA9IHRoaXMucmVsb2FkSml0dGVyTWF4XG4gICAgbGV0IGFmdGVyTXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4TXMgLSBtaW5NcyArIDEpKSArIG1pbk1zXG4gICAgbGV0IHRyaWVzID0gQnJvd3Nlci51cGRhdGVMb2NhbCh0aGlzLmxvY2FsU3RvcmFnZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCBDT05TRUNVVElWRV9SRUxPQURTLCAwLCBjb3VudCA9PiBjb3VudCArIDEpXG4gICAgaWYodHJpZXMgPiB0aGlzLm1heFJlbG9hZHMpe1xuICAgICAgYWZ0ZXJNcyA9IHRoaXMuZmFpbHNhZmVKaXR0ZXJcbiAgICB9XG4gICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIGlmIHZpZXcgaGFzIHJlY292ZXJlZCwgc3VjaCBhcyB0cmFuc3BvcnQgcmVwbGFjZWQsIHRoZW4gY2FuY2VsXG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkgfHwgdmlldy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cbiAgICAgIHZpZXcuZGVzdHJveSgpXG4gICAgICBsb2cgPyBsb2coKSA6IHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGVuY291bnRlcmVkICR7dHJpZXN9IGNvbnNlY3V0aXZlIHJlbG9hZHNgXSlcbiAgICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgICAgdGhpcy5sb2codmlldywgXCJqb2luXCIsICgpID0+IFtgZXhjZWVkZWQgJHt0aGlzLm1heFJlbG9hZHN9IGNvbnNlY3V0aXZlIHJlbG9hZHMuIEVudGVyaW5nIGZhaWxzYWZlIG1vZGVgXSlcbiAgICAgIH1cbiAgICAgIGlmKHRoaXMuaGFzUGVuZGluZ0xpbmsoKSl7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRoaXMucGVuZGluZ0xpbmtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0sIGFmdGVyTXMpXG4gIH1cblxuICBnZXRIb29rQ2FsbGJhY2tzKG5hbWUpe1xuICAgIHJldHVybiBuYW1lICYmIG5hbWUuc3RhcnRzV2l0aChcIlBob2VuaXguXCIpID8gSG9va3NbbmFtZS5zcGxpdChcIi5cIilbMV1dIDogdGhpcy5ob29rc1tuYW1lXVxuICB9XG5cbiAgaXNVbmxvYWRlZCgpeyByZXR1cm4gdGhpcy51bmxvYWRlZCB9XG5cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgfVxuXG4gIGdldEJpbmRpbmdQcmVmaXgoKXsgcmV0dXJuIHRoaXMuYmluZGluZ1ByZWZpeCB9XG5cbiAgYmluZGluZyhraW5kKXsgcmV0dXJuIGAke3RoaXMuZ2V0QmluZGluZ1ByZWZpeCgpfSR7a2luZH1gIH1cblxuICBjaGFubmVsKHRvcGljLCBwYXJhbXMpeyByZXR1cm4gdGhpcy5zb2NrZXQuY2hhbm5lbCh0b3BpYywgcGFyYW1zKSB9XG5cbiAgam9pbkRlYWRWaWV3KCl7XG4gICAgbGV0IGJvZHkgPSBkb2N1bWVudC5ib2R5XG4gICAgaWYoYm9keSAmJiAhdGhpcy5pc1BoeFZpZXcoYm9keSkgJiYgIXRoaXMuaXNQaHhWaWV3KGRvY3VtZW50LmZpcnN0RWxlbWVudENoaWxkKSl7XG4gICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcoYm9keSlcbiAgICAgIHZpZXcuc2V0SHJlZih0aGlzLmdldEhyZWYoKSlcbiAgICAgIHZpZXcuam9pbkRlYWQoKVxuICAgICAgaWYoIXRoaXMubWFpbil7IHRoaXMubWFpbiA9IHZpZXcgfVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB2aWV3LmV4ZWNOZXdNb3VudGVkKCkpXG4gICAgfVxuICB9XG5cbiAgam9pblJvb3RWaWV3cygpe1xuICAgIGxldCByb290c0ZvdW5kID0gZmFsc2VcbiAgICBET00uYWxsKGRvY3VtZW50LCBgJHtQSFhfVklFV19TRUxFQ1RPUn06bm90KFske1BIWF9QQVJFTlRfSUR9XSlgLCByb290RWwgPT4ge1xuICAgICAgaWYoIXRoaXMuZ2V0Um9vdEJ5SWQocm9vdEVsLmlkKSl7XG4gICAgICAgIGxldCB2aWV3ID0gdGhpcy5uZXdSb290Vmlldyhyb290RWwpXG4gICAgICAgIHZpZXcuc2V0SHJlZih0aGlzLmdldEhyZWYoKSlcbiAgICAgICAgdmlldy5qb2luKClcbiAgICAgICAgaWYocm9vdEVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikpeyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIH1cbiAgICAgIHJvb3RzRm91bmQgPSB0cnVlXG4gICAgfSlcbiAgICByZXR1cm4gcm9vdHNGb3VuZFxuICB9XG5cbiAgcmVkaXJlY3QodG8sIGZsYXNoKXtcbiAgICB0aGlzLnVubG9hZCgpXG4gICAgQnJvd3Nlci5yZWRpcmVjdCh0bywgZmxhc2gpXG4gIH1cblxuICByZXBsYWNlTWFpbihocmVmLCBmbGFzaCwgY2FsbGJhY2sgPSBudWxsLCBsaW5rUmVmID0gdGhpcy5zZXRQZW5kaW5nTGluayhocmVmKSl7XG4gICAgbGV0IGxpdmVSZWZlcmVyID0gdGhpcy5jdXJyZW50TG9jYXRpb24uaHJlZlxuICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSB0aGlzLm91dGdvaW5nTWFpbkVsIHx8IHRoaXMubWFpbi5lbFxuICAgIGxldCBuZXdNYWluRWwgPSBET00uY2xvbmVOb2RlKHRoaXMub3V0Z29pbmdNYWluRWwsIFwiXCIpXG4gICAgdGhpcy5tYWluLnNob3dMb2FkZXIodGhpcy5sb2FkZXJUaW1lb3V0KVxuICAgIHRoaXMubWFpbi5kZXN0cm95KClcblxuICAgIHRoaXMubWFpbiA9IHRoaXMubmV3Um9vdFZpZXcobmV3TWFpbkVsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5tYWluLnNldFJlZGlyZWN0KGhyZWYpXG4gICAgdGhpcy50cmFuc2l0aW9uUmVtb3ZlcygpXG4gICAgdGhpcy5tYWluLmpvaW4oKGpvaW5Db3VudCwgb25Eb25lKSA9PiB7XG4gICAgICBpZihqb2luQ291bnQgPT09IDEgJiYgdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7XG4gICAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgRE9NLmZpbmRQaHhTdGlja3koZG9jdW1lbnQpLmZvckVhY2goZWwgPT4gbmV3TWFpbkVsLmFwcGVuZENoaWxkKGVsKSlcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsLnJlcGxhY2VXaXRoKG5ld01haW5FbClcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrICYmIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaylcbiAgICAgICAgICBvbkRvbmUoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmFuc2l0aW9uUmVtb3ZlcyhlbGVtZW50cyl7XG4gICAgbGV0IHJlbW92ZUF0dHIgPSB0aGlzLmJpbmRpbmcoXCJyZW1vdmVcIilcbiAgICBlbGVtZW50cyA9IGVsZW1lbnRzIHx8IERPTS5hbGwoZG9jdW1lbnQsIGBbJHtyZW1vdmVBdHRyfV1gKVxuICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgdGhpcy5leGVjSlMoZWwsIGVsLmdldEF0dHJpYnV0ZShyZW1vdmVBdHRyKSwgXCJyZW1vdmVcIilcbiAgICB9KVxuICB9XG5cbiAgaXNQaHhWaWV3KGVsKXsgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pICE9PSBudWxsIH1cblxuICBuZXdSb290VmlldyhlbCwgZmxhc2gsIGxpdmVSZWZlcmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBWaWV3KGVsLCB0aGlzLCBudWxsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5yb290c1t2aWV3LmlkXSA9IHZpZXdcbiAgICByZXR1cm4gdmlld1xuICB9XG5cbiAgb3duZXIoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIGxldCB2aWV3ID0gbWF5YmUoY2hpbGRFbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKSwgZWwgPT4gdGhpcy5nZXRWaWV3QnlFbChlbCkpIHx8IHRoaXMubWFpblxuICAgIGlmKHZpZXcpeyBjYWxsYmFjayh2aWV3KSB9XG4gIH1cblxuICB3aXRoaW5Pd25lcnMoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIHRoaXMub3duZXIoY2hpbGRFbCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCBjaGlsZEVsKSlcbiAgfVxuXG4gIGdldFZpZXdCeUVsKGVsKXtcbiAgICBsZXQgcm9vdElkID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ST09UX0lEKVxuICAgIHJldHVybiBtYXliZSh0aGlzLmdldFJvb3RCeUlkKHJvb3RJZCksIHJvb3QgPT4gcm9vdC5nZXREZXNjZW5kZW50QnlFbChlbCkpXG4gIH1cblxuICBnZXRSb290QnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3RzW2lkXSB9XG5cbiAgZGVzdHJveUFsbFZpZXdzKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnJvb3RzKXtcbiAgICAgIHRoaXMucm9vdHNbaWRdLmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbaWRdXG4gICAgfVxuICAgIHRoaXMubWFpbiA9IG51bGxcbiAgfVxuXG4gIGRlc3Ryb3lWaWV3QnlFbChlbCl7XG4gICAgbGV0IHJvb3QgPSB0aGlzLmdldFJvb3RCeUlkKGVsLmdldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCkpXG4gICAgaWYocm9vdCAmJiByb290LmlkID09PSBlbC5pZCl7XG4gICAgICByb290LmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbcm9vdC5pZF1cbiAgICB9IGVsc2UgaWYocm9vdCl7XG4gICAgICByb290LmRlc3Ryb3lEZXNjZW5kZW50KGVsLmlkKVxuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZUVsZW1lbnQodGFyZ2V0KXtcbiAgICBpZih0aGlzLmFjdGl2ZUVsZW1lbnQgPT09IHRhcmdldCl7IHJldHVybiB9XG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gdGFyZ2V0XG4gICAgbGV0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgIGlmKHRhcmdldCA9PT0gdGhpcy5hY3RpdmVFbGVtZW50KXsgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbCB9XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcylcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcylcbiAgICB9XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNhbmNlbClcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGNhbmNlbClcbiAgfVxuXG4gIGdldEFjdGl2ZUVsZW1lbnQoKXtcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KXtcbiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiBiZSBudWxsIGluIEludGVybmV0IEV4cGxvcmVyIDExXG4gICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5XG4gICAgfVxuICB9XG5cbiAgZHJvcEFjdGl2ZUVsZW1lbnQodmlldyl7XG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICYmIHZpZXcub3duc0VsZW1lbnQodGhpcy5wcmV2QWN0aXZlKSl7XG4gICAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgcmVzdG9yZVByZXZpb3VzbHlBY3RpdmVGb2N1cygpe1xuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAmJiB0aGlzLnByZXZBY3RpdmUgIT09IGRvY3VtZW50LmJvZHkpe1xuICAgICAgdGhpcy5wcmV2QWN0aXZlLmZvY3VzKClcbiAgICB9XG4gIH1cblxuICBibHVyQWN0aXZlRWxlbWVudCgpe1xuICAgIHRoaXMucHJldkFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICE9PSBkb2N1bWVudC5ib2R5KXsgdGhpcy5wcmV2QWN0aXZlLmJsdXIoKSB9XG4gIH1cblxuICBiaW5kVG9wTGV2ZWxFdmVudHMoe2RlYWR9ID0ge30pe1xuICAgIGlmKHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyl7IHJldHVybiB9XG5cbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSB0cnVlXG4gICAgLy8gZW50ZXIgZmFpbHNhZmUgcmVsb2FkIGlmIHNlcnZlciBoYXMgZ29uZSBhd2F5IGludGVudGlvbmFsbHksIHN1Y2ggYXMgXCJkaXNjb25uZWN0XCIgYnJvYWRjYXN0XG4gICAgdGhpcy5zb2NrZXQub25DbG9zZShldmVudCA9PiB7XG4gICAgICAvLyBmYWlsc2FmZSByZWxvYWQgaWYgbm9ybWFsIGNsb3N1cmUgYW5kIHdlIHN0aWxsIGhhdmUgYSBtYWluIExWXG4gICAgICBpZihldmVudCAmJiBldmVudC5jb2RlID09PSAxMDAwICYmIHRoaXMubWFpbil7IHJldHVybiB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodGhpcy5tYWluKSB9XG4gICAgfSlcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKXsgfSkgLy8gZW5zdXJlIGFsbCBjbGljayBldmVudHMgYnViYmxlIGZvciBtb2JpbGUgU2FmYXJpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBlID0+IHtcbiAgICAgIGlmKGUucGVyc2lzdGVkKXsgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGVcbiAgICAgICAgdGhpcy5nZXRTb2NrZXQoKS5kaXNjb25uZWN0KClcbiAgICAgICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiB3aW5kb3cubG9jYXRpb24uaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSlcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSwgdHJ1ZSlcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZE5hdigpIH1cbiAgICB0aGlzLmJpbmRDbGlja3MoKVxuICAgIGlmKCFkZWFkKXsgdGhpcy5iaW5kRm9ybXMoKSB9XG4gICAgdGhpcy5iaW5kKHtrZXl1cDogXCJrZXl1cFwiLCBrZXlkb3duOiBcImtleWRvd25cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIGV2ZW50VGFyZ2V0KSA9PiB7XG4gICAgICBsZXQgbWF0Y2hLZXkgPSB0YXJnZXRFbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9LRVkpKVxuICAgICAgbGV0IHByZXNzZWRLZXkgPSBlLmtleSAmJiBlLmtleS50b0xvd2VyQ2FzZSgpIC8vIGNocm9tZSBjbGlja2VkIGF1dG9jb21wbGV0ZXMgc2VuZCBhIGtleWRvd24gd2l0aG91dCBrZXlcbiAgICAgIGlmKG1hdGNoS2V5ICYmIG1hdGNoS2V5LnRvTG93ZXJDYXNlKCkgIT09IHByZXNzZWRLZXkpeyByZXR1cm4gfVxuXG4gICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICBKUy5leGVjKHR5cGUsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXRFbCwgW1wicHVzaFwiLCB7ZGF0YX1dKVxuICAgIH0pXG4gICAgdGhpcy5iaW5kKHtibHVyOiBcImZvY3Vzb3V0XCIsIGZvY3VzOiBcImZvY3VzaW5cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIGV2ZW50VGFyZ2V0KSA9PiB7XG4gICAgICBpZighZXZlbnRUYXJnZXQpe1xuICAgICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLmJpbmQoe2JsdXI6IFwiYmx1clwiLCBmb2N1czogXCJmb2N1c1wifSwgKGUsIHR5cGUsIHZpZXcsIHRhcmdldEVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBwaHhUYXJnZXQpID0+IHtcbiAgICAgIC8vIGJsdXIgYW5kIGZvY3VzIGFyZSB0cmlnZ2VyZWQgb24gZG9jdW1lbnQgYW5kIHdpbmRvdy4gRGlzY2FyZCBvbmUgdG8gYXZvaWQgZHVwc1xuICAgICAgaWYocGh4VGFyZ2V0ID09PSBcIndpbmRvd1wiKXtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbClcbiAgICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBsZXQgZHJvcFRhcmdldElkID0gbWF5YmUoY2xvc2VzdFBoeEJpbmRpbmcoZS50YXJnZXQsIHRoaXMuYmluZGluZyhQSFhfRFJPUF9UQVJHRVQpKSwgdHJ1ZVRhcmdldCA9PiB7XG4gICAgICAgIHJldHVybiB0cnVlVGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSlcbiAgICAgIH0pXG4gICAgICBsZXQgZHJvcFRhcmdldCA9IGRyb3BUYXJnZXRJZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkcm9wVGFyZ2V0SWQpXG4gICAgICBsZXQgZmlsZXMgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyLmZpbGVzIHx8IFtdKVxuICAgICAgaWYoIWRyb3BUYXJnZXQgfHwgZHJvcFRhcmdldC5kaXNhYmxlZCB8fCBmaWxlcy5sZW5ndGggPT09IDAgfHwgIShkcm9wVGFyZ2V0LmZpbGVzIGluc3RhbmNlb2YgRmlsZUxpc3QpKXsgcmV0dXJuIH1cblxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXMoZHJvcFRhcmdldCwgZmlsZXMsIGUuZGF0YVRyYW5zZmVyKVxuICAgICAgZHJvcFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgICB0aGlzLm9uKFBIWF9UUkFDS19VUExPQURTLCBlID0+IHtcbiAgICAgIGxldCB1cGxvYWRUYXJnZXQgPSBlLnRhcmdldFxuICAgICAgaWYoIURPTS5pc1VwbG9hZElucHV0KHVwbG9hZFRhcmdldCkpeyByZXR1cm4gfVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRldGFpbC5maWxlcyB8fCBbXSkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIEZpbGUgfHwgZiBpbnN0YW5jZW9mIEJsb2IpXG4gICAgICBMaXZlVXBsb2FkZXIudHJhY2tGaWxlcyh1cGxvYWRUYXJnZXQsIGZpbGVzKVxuICAgICAgdXBsb2FkVGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWV9KSlcbiAgICB9KVxuICB9XG5cbiAgZXZlbnRNZXRhKGV2ZW50TmFtZSwgZSwgdGFyZ2V0RWwpe1xuICAgIGxldCBjYWxsYmFjayA9IHRoaXMubWV0YWRhdGFDYWxsYmFja3NbZXZlbnROYW1lXVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGUsIHRhcmdldEVsKSA6IHt9XG4gIH1cblxuICBzZXRQZW5kaW5nTGluayhocmVmKXtcbiAgICB0aGlzLmxpbmtSZWYrK1xuICAgIHRoaXMucGVuZGluZ0xpbmsgPSBocmVmXG4gICAgcmV0dXJuIHRoaXMubGlua1JlZlxuICB9XG5cbiAgY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZil7XG4gICAgaWYodGhpcy5saW5rUmVmICE9PSBsaW5rUmVmKXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhyZWYgPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB0aGlzLnBlbmRpbmdMaW5rID0gbnVsbFxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBnZXRIcmVmKCl7IHJldHVybiB0aGlzLmhyZWYgfVxuXG4gIGhhc1BlbmRpbmdMaW5rKCl7IHJldHVybiAhIXRoaXMucGVuZGluZ0xpbmsgfVxuXG4gIGJpbmQoZXZlbnRzLCBjYWxsYmFjayl7XG4gICAgZm9yKGxldCBldmVudCBpbiBldmVudHMpe1xuICAgICAgbGV0IGJyb3dzZXJFdmVudE5hbWUgPSBldmVudHNbZXZlbnRdXG5cbiAgICAgIHRoaXMub24oYnJvd3NlckV2ZW50TmFtZSwgZSA9PiB7XG4gICAgICAgIGxldCBiaW5kaW5nID0gdGhpcy5iaW5kaW5nKGV2ZW50KVxuICAgICAgICBsZXQgd2luZG93QmluZGluZyA9IHRoaXMuYmluZGluZyhgd2luZG93LSR7ZXZlbnR9YClcbiAgICAgICAgbGV0IHRhcmdldFBoeEV2ZW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlICYmIGUudGFyZ2V0LmdldEF0dHJpYnV0ZShiaW5kaW5nKVxuICAgICAgICBpZih0YXJnZXRQaHhFdmVudCl7XG4gICAgICAgICAgdGhpcy5kZWJvdW5jZShlLnRhcmdldCwgZSwgYnJvd3NlckV2ZW50TmFtZSwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZS50YXJnZXQsIHRhcmdldFBoeEV2ZW50LCBudWxsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt3aW5kb3dCaW5kaW5nfV1gLCBlbCA9PiB7XG4gICAgICAgICAgICBsZXQgcGh4RXZlbnQgPSBlbC5nZXRBdHRyaWJ1dGUod2luZG93QmluZGluZylcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2UoZWwsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZWwsIHZpZXcgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUsIGV2ZW50LCB2aWV3LCBlbCwgcGh4RXZlbnQsIFwid2luZG93XCIpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYmluZENsaWNrcygpe1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gZS50YXJnZXQpXG4gICAgdGhpcy5iaW5kQ2xpY2soXCJjbGlja1wiLCBcImNsaWNrXCIsIGZhbHNlKVxuICAgIHRoaXMuYmluZENsaWNrKFwibW91c2Vkb3duXCIsIFwiY2FwdHVyZS1jbGlja1wiLCB0cnVlKVxuICB9XG5cbiAgYmluZENsaWNrKGV2ZW50TmFtZSwgYmluZGluZ05hbWUsIGNhcHR1cmUpe1xuICAgIGxldCBjbGljayA9IHRoaXMuYmluZGluZyhiaW5kaW5nTmFtZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGUgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IG51bGxcbiAgICAgIGlmKGNhcHR1cmUpe1xuICAgICAgICB0YXJnZXQgPSBlLnRhcmdldC5tYXRjaGVzKGBbJHtjbGlja31dYCkgPyBlLnRhcmdldCA6IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYFske2NsaWNrfV1gKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCB8fCBlLnRhcmdldFxuICAgICAgICB0YXJnZXQgPSBjbG9zZXN0UGh4QmluZGluZyhjbGlja1N0YXJ0ZWRBdFRhcmdldCwgY2xpY2spXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDbGlja0F3YXkoZSwgY2xpY2tTdGFydGVkQXRUYXJnZXQpXG4gICAgICAgIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBudWxsXG4gICAgICB9XG4gICAgICBsZXQgcGh4RXZlbnQgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShjbGljaylcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGxldCBocmVmID0gZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCA/IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgOiBudWxsXG4gICAgICAgIGlmKCFjYXB0dXJlICYmIGhyZWYgIT09IG51bGwgJiYgIURPTS53YW50c05ld1RhYihlKSAmJiBET00uaXNOZXdQYWdlSHJlZihocmVmLCB3aW5kb3cubG9jYXRpb24pKXtcbiAgICAgICAgICB0aGlzLnVubG9hZCgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZih0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIpeyBlLnByZXZlbnREZWZhdWx0KCkgfVxuICAgICAgLy8gbm9vcCBpZiB3ZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhd2FpdGluZyBhbiBhY2sgZm9yIHRoaXMgZWwgYWxyZWFkeVxuICAgICAgaWYodGFyZ2V0Lmhhc0F0dHJpYnV0ZShQSFhfUkVGKSl7IHJldHVybiB9XG5cbiAgICAgIHRoaXMuZGVib3VuY2UodGFyZ2V0LCBlLCBcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnModGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICBKUy5leGVjKFwiY2xpY2tcIiwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldCwgW1wicHVzaFwiLCB7ZGF0YTogdGhpcy5ldmVudE1ldGEoXCJjbGlja1wiLCBlLCB0YXJnZXQpfV0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sIGNhcHR1cmUpXG4gIH1cblxuICBkaXNwYXRjaENsaWNrQXdheShlLCBjbGlja1N0YXJ0ZWRBdCl7XG4gICAgbGV0IHBoeENsaWNrQXdheSA9IHRoaXMuYmluZGluZyhcImNsaWNrLWF3YXlcIilcbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7cGh4Q2xpY2tBd2F5fV1gLCBlbCA9PiB7XG4gICAgICBpZighKGVsLmlzU2FtZU5vZGUoY2xpY2tTdGFydGVkQXQpIHx8IGVsLmNvbnRhaW5zKGNsaWNrU3RhcnRlZEF0KSkpe1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHBoeENsaWNrQXdheSlcbiAgICAgICAgICBpZihKUy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgICAgIEpTLmV4ZWMoXCJjbGlja1wiLCBwaHhFdmVudCwgdmlldywgZWwsIFtcInB1c2hcIiwge2RhdGE6IHRoaXMuZXZlbnRNZXRhKFwiY2xpY2tcIiwgZSwgZS50YXJnZXQpfV0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBiaW5kTmF2KCl7XG4gICAgaWYoIUJyb3dzZXIuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGlmKGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24peyBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gXCJtYW51YWxcIiB9XG4gICAgbGV0IHNjcm9sbFRpbWVyID0gbnVsbFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIF9lID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChzY3JvbGxUaW1lcilcbiAgICAgIHNjcm9sbFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIEJyb3dzZXIudXBkYXRlQ3VycmVudFN0YXRlKHN0YXRlID0+IE9iamVjdC5hc3NpZ24oc3RhdGUsIHtzY3JvbGw6IHdpbmRvdy5zY3JvbGxZfSkpXG4gICAgICB9LCAxMDApXG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIGV2ZW50ID0+IHtcbiAgICAgIGlmKCF0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKSl7IHJldHVybiB9XG4gICAgICBsZXQge3R5cGUsIGlkLCByb290LCBzY3JvbGx9ID0gZXZlbnQuc3RhdGUgfHwge31cbiAgICAgIGxldCBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWZcblxuICAgICAgdGhpcy5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYodGhpcy5tYWluLmlzQ29ubmVjdGVkKCkgJiYgKHR5cGUgPT09IFwicGF0Y2hcIiAmJiBpZCA9PT0gdGhpcy5tYWluLmlkKSl7XG4gICAgICAgICAgdGhpcy5tYWluLnB1c2hMaW5rUGF0Y2goaHJlZiwgbnVsbCwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tYXliZVNjcm9sbChzY3JvbGwpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnJlcGxhY2VNYWluKGhyZWYsIG51bGwsICgpID0+IHtcbiAgICAgICAgICAgIGlmKHJvb3QpeyB0aGlzLnJlcGxhY2VSb290SGlzdG9yeSgpIH1cbiAgICAgICAgICAgIHRoaXMubWF5YmVTY3JvbGwoc2Nyb2xsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBjbG9zZXN0UGh4QmluZGluZyhlLnRhcmdldCwgUEhYX0xJVkVfTElOSylcbiAgICAgIGxldCB0eXBlID0gdGFyZ2V0ICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoUEhYX0xJVkVfTElOSylcbiAgICAgIGlmKCF0eXBlIHx8ICF0aGlzLmlzQ29ubmVjdGVkKCkgfHwgIXRoaXMubWFpbiB8fCBET00ud2FudHNOZXdUYWIoZSkpeyByZXR1cm4gfVxuXG4gICAgICBsZXQgaHJlZiA9IHRhcmdldC5ocmVmXG4gICAgICBsZXQgbGlua1N0YXRlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShQSFhfTElOS19TVEFURSlcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSAvLyBkbyBub3QgYnViYmxlIGNsaWNrIHRvIHJlZ3VsYXIgcGh4LWNsaWNrIGJpbmRpbmdzXG4gICAgICBpZih0aGlzLnBlbmRpbmdMaW5rID09PSBocmVmKXsgcmV0dXJuIH1cblxuICAgICAgdGhpcy5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYodHlwZSA9PT0gXCJwYXRjaFwiKXtcbiAgICAgICAgICB0aGlzLnB1c2hIaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCB0YXJnZXQpXG4gICAgICAgIH0gZWxzZSBpZih0eXBlID09PSBcInJlZGlyZWN0XCIpe1xuICAgICAgICAgIHRoaXMuaGlzdG9yeVJlZGlyZWN0KGhyZWYsIGxpbmtTdGF0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkICR7UEhYX0xJVkVfTElOS30gdG8gYmUgXCJwYXRjaFwiIG9yIFwicmVkaXJlY3RcIiwgZ290OiAke3R5cGV9YClcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGh4Q2xpY2sgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNsaWNrXCIpKVxuICAgICAgICBpZihwaHhDbGljayl7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHRoaXMuZXhlY0pTKHRhcmdldCwgcGh4Q2xpY2ssIFwiY2xpY2tcIikpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG4gIH1cblxuICBtYXliZVNjcm9sbChzY3JvbGwpIHtcbiAgICBpZih0eXBlb2Yoc2Nyb2xsKSA9PT0gXCJudW1iZXJcIil7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgc2Nyb2xsKVxuICAgICAgfSkgLy8gdGhlIGJvZHkgbmVlZHMgdG8gcmVuZGVyIGJlZm9yZSB3ZSBzY3JvbGwuXG4gICAgfVxuICB9XG5cbiAgZGlzcGF0Y2hFdmVudChldmVudCwgcGF5bG9hZCA9IHt9KXtcbiAgICBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIGBwaHg6JHtldmVudH1gLCB7ZGV0YWlsOiBwYXlsb2FkfSlcbiAgfVxuXG4gIGRpc3BhdGNoRXZlbnRzKGV2ZW50cyl7XG4gICAgZXZlbnRzLmZvckVhY2goKFtldmVudCwgcGF5bG9hZF0pID0+IHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCwgcGF5bG9hZCkpXG4gIH1cblxuICB3aXRoUGFnZUxvYWRpbmcoaW5mbywgY2FsbGJhY2spe1xuICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0YXJ0XCIsIHtkZXRhaWw6IGluZm99KVxuICAgIGxldCBkb25lID0gKCkgPT4gRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RvcFwiLCB7ZGV0YWlsOiBpbmZvfSlcbiAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjayhkb25lKSA6IGRvbmVcbiAgfVxuXG4gIHB1c2hIaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCB0YXJnZXRFbCl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiBCcm93c2VyLnJlZGlyZWN0KGhyZWYpIH1cblxuICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogaHJlZiwga2luZDogXCJwYXRjaFwifSwgZG9uZSA9PiB7XG4gICAgICB0aGlzLm1haW4ucHVzaExpbmtQYXRjaChocmVmLCB0YXJnZXRFbCwgbGlua1JlZiA9PiB7XG4gICAgICAgIHRoaXMuaGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgbGlua1JlZilcbiAgICAgICAgZG9uZSgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBoaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCBsaW5rUmVmID0gdGhpcy5zZXRQZW5kaW5nTGluayhocmVmKSl7XG4gICAgaWYoIXRoaXMuY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZikpeyByZXR1cm4gfVxuXG4gICAgQnJvd3Nlci5wdXNoU3RhdGUobGlua1N0YXRlLCB7dHlwZTogXCJwYXRjaFwiLCBpZDogdGhpcy5tYWluLmlkfSwgaHJlZilcbiAgICB0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKVxuICB9XG5cbiAgaGlzdG9yeVJlZGlyZWN0KGhyZWYsIGxpbmtTdGF0ZSwgZmxhc2gpe1xuICAgIC8vIGNvbnZlcnQgdG8gZnVsbCBocmVmIGlmIG9ubHkgcGF0aCBwcmVmaXhcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIEJyb3dzZXIucmVkaXJlY3QoaHJlZiwgZmxhc2gpIH1cbiAgICBpZigvXlxcLyR8XlxcL1teXFwvXSsuKiQvLnRlc3QoaHJlZikpe1xuICAgICAgbGV0IHtwcm90b2NvbCwgaG9zdH0gPSB3aW5kb3cubG9jYXRpb25cbiAgICAgIGhyZWYgPSBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke2hyZWZ9YFxuICAgIH1cbiAgICBsZXQgc2Nyb2xsID0gd2luZG93LnNjcm9sbFlcbiAgICB0aGlzLndpdGhQYWdlTG9hZGluZyh7dG86IGhyZWYsIGtpbmQ6IFwicmVkaXJlY3RcIn0sIGRvbmUgPT4ge1xuICAgICAgdGhpcy5yZXBsYWNlTWFpbihocmVmLCBmbGFzaCwgKCkgPT4ge1xuICAgICAgICBCcm93c2VyLnB1c2hTdGF0ZShsaW5rU3RhdGUsIHt0eXBlOiBcInJlZGlyZWN0XCIsIGlkOiB0aGlzLm1haW4uaWQsIHNjcm9sbDogc2Nyb2xsfSwgaHJlZilcbiAgICAgICAgdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbilcbiAgICAgICAgZG9uZSgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICByZXBsYWNlUm9vdEhpc3RvcnkoKXtcbiAgICBCcm93c2VyLnB1c2hTdGF0ZShcInJlcGxhY2VcIiwge3Jvb3Q6IHRydWUsIHR5cGU6IFwicGF0Y2hcIiwgaWQ6IHRoaXMubWFpbi5pZH0pXG4gIH1cblxuICByZWdpc3Rlck5ld0xvY2F0aW9uKG5ld0xvY2F0aW9uKXtcbiAgICBsZXQge3BhdGhuYW1lLCBzZWFyY2h9ID0gdGhpcy5jdXJyZW50TG9jYXRpb25cbiAgICBpZihwYXRobmFtZSArIHNlYXJjaCA9PT0gbmV3TG9jYXRpb24ucGF0aG5hbWUgKyBuZXdMb2NhdGlvbi5zZWFyY2gpe1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gY2xvbmUobmV3TG9jYXRpb24pXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGJpbmRGb3Jtcygpe1xuICAgIGxldCBpdGVyYXRpb25zID0gMFxuICAgIGxldCBleHRlcm5hbEZvcm1TdWJtaXR0ZWQgPSBmYWxzZVxuXG4gICAgLy8gZGlzYWJsZSBmb3JtcyBvbiBzdWJtaXQgdGhhdCB0cmFjayBwaHgtY2hhbmdlIGJ1dCBwZXJmb3JtIGV4dGVybmFsIHN1Ym1pdFxuICAgIHRoaXMub24oXCJzdWJtaXRcIiwgZSA9PiB7XG4gICAgICBsZXQgcGh4U3VibWl0ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInN1Ym1pdFwiKSlcbiAgICAgIGxldCBwaHhDaGFuZ2UgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKVxuICAgICAgaWYoIWV4dGVybmFsRm9ybVN1Ym1pdHRlZCAmJiBwaHhDaGFuZ2UgJiYgIXBoeFN1Ym1pdCl7XG4gICAgICAgIGV4dGVybmFsRm9ybVN1Ym1pdHRlZCA9IHRydWVcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICB2aWV3LmRpc2FibGVGb3JtKGUudGFyZ2V0KVxuICAgICAgICAgIC8vIHNhZmFyaSBuZWVkcyBuZXh0IHRpY2tcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIGlmKERPTS5pc1VubG9hZGFibGVGb3JtU3VibWl0KGUpKXsgdGhpcy51bmxvYWQoKSB9XG4gICAgICAgICAgICBlLnRhcmdldC5zdWJtaXQoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSwgdHJ1ZSlcblxuICAgIHRoaXMub24oXCJzdWJtaXRcIiwgZSA9PiB7XG4gICAgICBsZXQgcGh4RXZlbnQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwic3VibWl0XCIpKVxuICAgICAgaWYoIXBoeEV2ZW50KXtcbiAgICAgICAgaWYoRE9NLmlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSkpeyB0aGlzLnVubG9hZCgpIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGUudGFyZ2V0LmRpc2FibGVkID0gdHJ1ZVxuICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICBKUy5leGVjKFwic3VibWl0XCIsIHBoeEV2ZW50LCB2aWV3LCBlLnRhcmdldCwgW1wicHVzaFwiLCB7c3VibWl0dGVyOiBlLnN1Ym1pdHRlcn1dKVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcblxuICAgIGZvcihsZXQgdHlwZSBvZiBbXCJjaGFuZ2VcIiwgXCJpbnB1dFwiXSl7XG4gICAgICB0aGlzLm9uKHR5cGUsIGUgPT4ge1xuICAgICAgICBsZXQgcGh4Q2hhbmdlID0gdGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpXG4gICAgICAgIGxldCBpbnB1dCA9IGUudGFyZ2V0XG4gICAgICAgIGxldCBpbnB1dEV2ZW50ID0gaW5wdXQuZ2V0QXR0cmlidXRlKHBoeENoYW5nZSlcbiAgICAgICAgbGV0IGZvcm1FdmVudCA9IGlucHV0LmZvcm0gJiYgaW5wdXQuZm9ybS5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKVxuICAgICAgICBsZXQgcGh4RXZlbnQgPSBpbnB1dEV2ZW50IHx8IGZvcm1FdmVudFxuICAgICAgICBpZighcGh4RXZlbnQpeyByZXR1cm4gfVxuICAgICAgICBpZihpbnB1dC50eXBlID09PSBcIm51bWJlclwiICYmIGlucHV0LnZhbGlkaXR5ICYmIGlucHV0LnZhbGlkaXR5LmJhZElucHV0KXsgcmV0dXJuIH1cblxuICAgICAgICBsZXQgZGlzcGF0Y2hlciA9IGlucHV0RXZlbnQgPyBpbnB1dCA6IGlucHV0LmZvcm1cbiAgICAgICAgbGV0IGN1cnJlbnRJdGVyYXRpb25zID0gaXRlcmF0aW9uc1xuICAgICAgICBpdGVyYXRpb25zKytcbiAgICAgICAgbGV0IHthdDogYXQsIHR5cGU6IGxhc3RUeXBlfSA9IERPTS5wcml2YXRlKGlucHV0LCBcInByZXYtaXRlcmF0aW9uXCIpIHx8IHt9XG4gICAgICAgIC8vIGRldGVjdCBkdXAgYmVjYXVzZSBzb21lIGJyb3dzZXJzIGRpc3BhdGNoIGJvdGggXCJpbnB1dFwiIGFuZCBcImNoYW5nZVwiXG4gICAgICAgIGlmKGF0ID09PSBjdXJyZW50SXRlcmF0aW9ucyAtIDEgJiYgdHlwZSAhPT0gbGFzdFR5cGUpeyByZXR1cm4gfVxuXG4gICAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0LCBcInByZXYtaXRlcmF0aW9uXCIsIHthdDogY3VycmVudEl0ZXJhdGlvbnMsIHR5cGU6IHR5cGV9KVxuXG4gICAgICAgIHRoaXMuZGVib3VuY2UoaW5wdXQsIGUsIHR5cGUsICgpID0+IHtcbiAgICAgICAgICB0aGlzLndpdGhpbk93bmVycyhkaXNwYXRjaGVyLCB2aWV3ID0+IHtcbiAgICAgICAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQsIHRydWUpXG4gICAgICAgICAgICBpZighRE9NLmlzVGV4dHVhbElucHV0KGlucHV0KSl7XG4gICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRWxlbWVudChpbnB1dClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEpTLmV4ZWMoXCJjaGFuZ2VcIiwgcGh4RXZlbnQsIHZpZXcsIGlucHV0LCBbXCJwdXNoXCIsIHtfdGFyZ2V0OiBlLnRhcmdldC5uYW1lLCBkaXNwYXRjaGVyOiBkaXNwYXRjaGVyfV0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0sIGZhbHNlKVxuICAgIH1cbiAgICB0aGlzLm9uKFwicmVzZXRcIiwgKGUpID0+IHtcbiAgICAgIGxldCBmb3JtID0gZS50YXJnZXRcbiAgICAgIERPTS5yZXNldEZvcm0oZm9ybSwgdGhpcy5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpKVxuICAgICAgbGV0IGlucHV0ID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKS5maW5kKGVsID0+IGVsLnR5cGUgPT09IFwicmVzZXRcIilcbiAgICAgIC8vIHdhaXQgdW50aWwgbmV4dCB0aWNrIHRvIGdldCB1cGRhdGVkIGlucHV0IHZhbHVlXG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogZmFsc2V9KSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGRlYm91bmNlKGVsLCBldmVudCwgZXZlbnRUeXBlLCBjYWxsYmFjayl7XG4gICAgaWYoZXZlbnRUeXBlID09PSBcImJsdXJcIiB8fCBldmVudFR5cGUgPT09IFwiZm9jdXNvdXRcIil7IHJldHVybiBjYWxsYmFjaygpIH1cblxuICAgIGxldCBwaHhEZWJvdW5jZSA9IHRoaXMuYmluZGluZyhQSFhfREVCT1VOQ0UpXG4gICAgbGV0IHBoeFRocm90dGxlID0gdGhpcy5iaW5kaW5nKFBIWF9USFJPVFRMRSlcbiAgICBsZXQgZGVmYXVsdERlYm91bmNlID0gdGhpcy5kZWZhdWx0cy5kZWJvdW5jZS50b1N0cmluZygpXG4gICAgbGV0IGRlZmF1bHRUaHJvdHRsZSA9IHRoaXMuZGVmYXVsdHMudGhyb3R0bGUudG9TdHJpbmcoKVxuXG4gICAgdGhpcy53aXRoaW5Pd25lcnMoZWwsIHZpZXcgPT4ge1xuICAgICAgbGV0IGFzeW5jRmlsdGVyID0gKCkgPT4gIXZpZXcuaXNEZXN0cm95ZWQoKSAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGVsKVxuICAgICAgRE9NLmRlYm91bmNlKGVsLCBldmVudCwgcGh4RGVib3VuY2UsIGRlZmF1bHREZWJvdW5jZSwgcGh4VGhyb3R0bGUsIGRlZmF1bHRUaHJvdHRsZSwgYXN5bmNGaWx0ZXIsICgpID0+IHtcbiAgICAgICAgY2FsbGJhY2soKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgc2lsZW5jZUV2ZW50cyhjYWxsYmFjayl7XG4gICAgdGhpcy5zaWxlbmNlZCA9IHRydWVcbiAgICBjYWxsYmFjaygpXG4gICAgdGhpcy5zaWxlbmNlZCA9IGZhbHNlXG4gIH1cblxuICBvbihldmVudCwgY2FsbGJhY2spe1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBlID0+IHtcbiAgICAgIGlmKCF0aGlzLnNpbGVuY2VkKXsgY2FsbGJhY2soZSkgfVxuICAgIH0pXG4gIH1cbn1cblxuY2xhc3MgVHJhbnNpdGlvblNldCB7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy50cmFuc2l0aW9ucyA9IG5ldyBTZXQoKVxuICAgIHRoaXMucGVuZGluZ09wcyA9IFtdXG4gIH1cblxuICByZXNldCgpe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuZm9yRWFjaCh0aW1lciA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpXG4gICAgICB0aGlzLnRyYW5zaXRpb25zLmRlbGV0ZSh0aW1lcilcbiAgICB9KVxuICAgIHRoaXMuZmx1c2hQZW5kaW5nT3BzKClcbiAgfVxuXG4gIGFmdGVyKGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLnNpemUoKSA9PT0gMCl7XG4gICAgICBjYWxsYmFjaygpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHVzaFBlbmRpbmdPcChjYWxsYmFjaylcbiAgICB9XG4gIH1cblxuICBhZGRUcmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSl7XG4gICAgb25TdGFydCgpXG4gICAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyYW5zaXRpb25zLmRlbGV0ZSh0aW1lcilcbiAgICAgIG9uRG9uZSgpXG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gICAgfSwgdGltZSlcbiAgICB0aGlzLnRyYW5zaXRpb25zLmFkZCh0aW1lcilcbiAgfVxuXG4gIHB1c2hQZW5kaW5nT3Aob3ApeyB0aGlzLnBlbmRpbmdPcHMucHVzaChvcCkgfVxuXG4gIHNpemUoKXsgcmV0dXJuIHRoaXMudHJhbnNpdGlvbnMuc2l6ZSB9XG5cbiAgZmx1c2hQZW5kaW5nT3BzKCl7XG4gICAgaWYodGhpcy5zaXplKCkgPiAwKXsgcmV0dXJuIH1cbiAgICBsZXQgb3AgPSB0aGlzLnBlbmRpbmdPcHMuc2hpZnQoKVxuICAgIGlmKG9wKXtcbiAgICAgIG9wKClcbiAgICAgIHRoaXMuZmx1c2hQZW5kaW5nT3BzKClcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgdmFyIHRvcCA9ICd0b3AnO1xuZXhwb3J0IHZhciBib3R0b20gPSAnYm90dG9tJztcbmV4cG9ydCB2YXIgcmlnaHQgPSAncmlnaHQnO1xuZXhwb3J0IHZhciBsZWZ0ID0gJ2xlZnQnO1xuZXhwb3J0IHZhciBhdXRvID0gJ2F1dG8nO1xuZXhwb3J0IHZhciBiYXNlUGxhY2VtZW50cyA9IFt0b3AsIGJvdHRvbSwgcmlnaHQsIGxlZnRdO1xuZXhwb3J0IHZhciBzdGFydCA9ICdzdGFydCc7XG5leHBvcnQgdmFyIGVuZCA9ICdlbmQnO1xuZXhwb3J0IHZhciBjbGlwcGluZ1BhcmVudHMgPSAnY2xpcHBpbmdQYXJlbnRzJztcbmV4cG9ydCB2YXIgdmlld3BvcnQgPSAndmlld3BvcnQnO1xuZXhwb3J0IHZhciBwb3BwZXIgPSAncG9wcGVyJztcbmV4cG9ydCB2YXIgcmVmZXJlbmNlID0gJ3JlZmVyZW5jZSc7XG5leHBvcnQgdmFyIHZhcmlhdGlvblBsYWNlbWVudHMgPSAvKiNfX1BVUkVfXyovYmFzZVBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICByZXR1cm4gYWNjLmNvbmNhdChbcGxhY2VtZW50ICsgXCItXCIgKyBzdGFydCwgcGxhY2VtZW50ICsgXCItXCIgKyBlbmRdKTtcbn0sIFtdKTtcbmV4cG9ydCB2YXIgcGxhY2VtZW50cyA9IC8qI19fUFVSRV9fKi9bXS5jb25jYXQoYmFzZVBsYWNlbWVudHMsIFthdXRvXSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICByZXR1cm4gYWNjLmNvbmNhdChbcGxhY2VtZW50LCBwbGFjZW1lbnQgKyBcIi1cIiArIHN0YXJ0LCBwbGFjZW1lbnQgKyBcIi1cIiArIGVuZF0pO1xufSwgW10pOyAvLyBtb2RpZmllcnMgdGhhdCBuZWVkIHRvIHJlYWQgdGhlIERPTVxuXG5leHBvcnQgdmFyIGJlZm9yZVJlYWQgPSAnYmVmb3JlUmVhZCc7XG5leHBvcnQgdmFyIHJlYWQgPSAncmVhZCc7XG5leHBvcnQgdmFyIGFmdGVyUmVhZCA9ICdhZnRlclJlYWQnOyAvLyBwdXJlLWxvZ2ljIG1vZGlmaWVyc1xuXG5leHBvcnQgdmFyIGJlZm9yZU1haW4gPSAnYmVmb3JlTWFpbic7XG5leHBvcnQgdmFyIG1haW4gPSAnbWFpbic7XG5leHBvcnQgdmFyIGFmdGVyTWFpbiA9ICdhZnRlck1haW4nOyAvLyBtb2RpZmllciB3aXRoIHRoZSBwdXJwb3NlIHRvIHdyaXRlIHRvIHRoZSBET00gKG9yIHdyaXRlIGludG8gYSBmcmFtZXdvcmsgc3RhdGUpXG5cbmV4cG9ydCB2YXIgYmVmb3JlV3JpdGUgPSAnYmVmb3JlV3JpdGUnO1xuZXhwb3J0IHZhciB3cml0ZSA9ICd3cml0ZSc7XG5leHBvcnQgdmFyIGFmdGVyV3JpdGUgPSAnYWZ0ZXJXcml0ZSc7XG5leHBvcnQgdmFyIG1vZGlmaWVyUGhhc2VzID0gW2JlZm9yZVJlYWQsIHJlYWQsIGFmdGVyUmVhZCwgYmVmb3JlTWFpbiwgbWFpbiwgYWZ0ZXJNYWluLCBiZWZvcmVXcml0ZSwgd3JpdGUsIGFmdGVyV3JpdGVdOyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXROb2RlTmFtZShlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50ID8gKGVsZW1lbnQubm9kZU5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3cobm9kZSkge1xuICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuXG4gIGlmIChub2RlLnRvU3RyaW5nKCkgIT09ICdbb2JqZWN0IFdpbmRvd10nKSB7XG4gICAgdmFyIG93bmVyRG9jdW1lbnQgPSBub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgcmV0dXJuIG93bmVyRG9jdW1lbnQgPyBvd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdyA6IHdpbmRvdztcbiAgfVxuXG4gIHJldHVybiBub2RlO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkge1xuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5FbGVtZW50O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQobm9kZSkge1xuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5IVE1MRWxlbWVudDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaXNTaGFkb3dSb290KG5vZGUpIHtcbiAgLy8gSUUgMTEgaGFzIG5vIFNoYWRvd1Jvb3RcbiAgaWYgKHR5cGVvZiBTaGFkb3dSb290ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBPd25FbGVtZW50ID0gZ2V0V2luZG93KG5vZGUpLlNoYWRvd1Jvb3Q7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgU2hhZG93Um9vdDtcbn1cblxuZXhwb3J0IHsgaXNFbGVtZW50LCBpc0hUTUxFbGVtZW50LCBpc1NoYWRvd1Jvb3QgfTsiLCAiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjsgLy8gVGhpcyBtb2RpZmllciB0YWtlcyB0aGUgc3R5bGVzIHByZXBhcmVkIGJ5IHRoZSBgY29tcHV0ZVN0eWxlc2AgbW9kaWZpZXJcbi8vIGFuZCBhcHBsaWVzIHRoZW0gdG8gdGhlIEhUTUxFbGVtZW50cyBzdWNoIGFzIHBvcHBlciBhbmQgYXJyb3dcblxuZnVuY3Rpb24gYXBwbHlTdHlsZXMoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlO1xuICBPYmplY3Qua2V5cyhzdGF0ZS5lbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBzdHlsZSA9IHN0YXRlLnN0eWxlc1tuYW1lXSB8fCB7fTtcbiAgICB2YXIgYXR0cmlidXRlcyA9IHN0YXRlLmF0dHJpYnV0ZXNbbmFtZV0gfHwge307XG4gICAgdmFyIGVsZW1lbnQgPSBzdGF0ZS5lbGVtZW50c1tuYW1lXTsgLy8gYXJyb3cgaXMgb3B0aW9uYWwgKyB2aXJ0dWFsIGVsZW1lbnRzXG5cbiAgICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgIWdldE5vZGVOYW1lKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBGbG93IGRvZXNuJ3Qgc3VwcG9ydCB0byBleHRlbmQgdGhpcyBwcm9wZXJ0eSwgYnV0IGl0J3MgdGhlIG1vc3RcbiAgICAvLyBlZmZlY3RpdmUgd2F5IHRvIGFwcGx5IHN0eWxlcyB0byBhbiBIVE1MRWxlbWVudFxuICAgIC8vICRGbG93Rml4TWVbY2Fubm90LXdyaXRlXVxuXG5cbiAgICBPYmplY3QuYXNzaWduKGVsZW1lbnQuc3R5bGUsIHN0eWxlKTtcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhdHRyaWJ1dGVzW25hbWVdO1xuXG4gICAgICBpZiAodmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVmZmVjdChfcmVmMikge1xuICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTtcbiAgdmFyIGluaXRpYWxTdHlsZXMgPSB7XG4gICAgcG9wcGVyOiB7XG4gICAgICBwb3NpdGlvbjogc3RhdGUub3B0aW9ucy5zdHJhdGVneSxcbiAgICAgIGxlZnQ6ICcwJyxcbiAgICAgIHRvcDogJzAnLFxuICAgICAgbWFyZ2luOiAnMCdcbiAgICB9LFxuICAgIGFycm93OiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgIH0sXG4gICAgcmVmZXJlbmNlOiB7fVxuICB9O1xuICBPYmplY3QuYXNzaWduKHN0YXRlLmVsZW1lbnRzLnBvcHBlci5zdHlsZSwgaW5pdGlhbFN0eWxlcy5wb3BwZXIpO1xuICBzdGF0ZS5zdHlsZXMgPSBpbml0aWFsU3R5bGVzO1xuXG4gIGlmIChzdGF0ZS5lbGVtZW50cy5hcnJvdykge1xuICAgIE9iamVjdC5hc3NpZ24oc3RhdGUuZWxlbWVudHMuYXJyb3cuc3R5bGUsIGluaXRpYWxTdHlsZXMuYXJyb3cpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBPYmplY3Qua2V5cyhzdGF0ZS5lbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBzdGF0ZS5lbGVtZW50c1tuYW1lXTtcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gc3RhdGUuYXR0cmlidXRlc1tuYW1lXSB8fCB7fTtcbiAgICAgIHZhciBzdHlsZVByb3BlcnRpZXMgPSBPYmplY3Qua2V5cyhzdGF0ZS5zdHlsZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBzdGF0ZS5zdHlsZXNbbmFtZV0gOiBpbml0aWFsU3R5bGVzW25hbWVdKTsgLy8gU2V0IGFsbCB2YWx1ZXMgdG8gYW4gZW1wdHkgc3RyaW5nIHRvIHVuc2V0IHRoZW1cblxuICAgICAgdmFyIHN0eWxlID0gc3R5bGVQcm9wZXJ0aWVzLnJlZHVjZShmdW5jdGlvbiAoc3R5bGUsIHByb3BlcnR5KSB7XG4gICAgICAgIHN0eWxlW3Byb3BlcnR5XSA9ICcnO1xuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICB9LCB7fSk7IC8vIGFycm93IGlzIG9wdGlvbmFsICsgdmlydHVhbCBlbGVtZW50c1xuXG4gICAgICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgIWdldE5vZGVOYW1lKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZSk7XG4gICAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnYXBwbHlTdHlsZXMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ3dyaXRlJyxcbiAgZm46IGFwcGx5U3R5bGVzLFxuICBlZmZlY3Q6IGVmZmVjdCxcbiAgcmVxdWlyZXM6IFsnY29tcHV0ZVN0eWxlcyddXG59OyIsICJpbXBvcnQgeyBhdXRvIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnNwbGl0KCctJylbMF07XG59IiwgImV4cG9ydCB2YXIgbWF4ID0gTWF0aC5tYXg7XG5leHBvcnQgdmFyIG1pbiA9IE1hdGgubWluO1xuZXhwb3J0IHZhciByb3VuZCA9IE1hdGgucm91bmQ7IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVBU3RyaW5nKCkge1xuICB2YXIgdWFEYXRhID0gbmF2aWdhdG9yLnVzZXJBZ2VudERhdGE7XG5cbiAgaWYgKHVhRGF0YSAhPSBudWxsICYmIHVhRGF0YS5icmFuZHMpIHtcbiAgICByZXR1cm4gdWFEYXRhLmJyYW5kcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmJyYW5kICsgXCIvXCIgKyBpdGVtLnZlcnNpb247XG4gICAgfSkuam9pbignICcpO1xuICB9XG5cbiAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQ7XG59IiwgImltcG9ydCBnZXRVQVN0cmluZyBmcm9tIFwiLi4vdXRpbHMvdXNlckFnZW50LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0xheW91dFZpZXdwb3J0KCkge1xuICByZXR1cm4gIS9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QoZ2V0VUFTdHJpbmcoKSk7XG59IiwgImltcG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgaXNMYXlvdXRWaWV3cG9ydCBmcm9tIFwiLi9pc0xheW91dFZpZXdwb3J0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgaW5jbHVkZVNjYWxlLCBpc0ZpeGVkU3RyYXRlZ3kpIHtcbiAgaWYgKGluY2x1ZGVTY2FsZSA9PT0gdm9pZCAwKSB7XG4gICAgaW5jbHVkZVNjYWxlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoaXNGaXhlZFN0cmF0ZWd5ID09PSB2b2lkIDApIHtcbiAgICBpc0ZpeGVkU3RyYXRlZ3kgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBjbGllbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IDE7XG4gIHZhciBzY2FsZVkgPSAxO1xuXG4gIGlmIChpbmNsdWRlU2NhbGUgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSkge1xuICAgIHNjYWxlWCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPiAwID8gcm91bmQoY2xpZW50UmVjdC53aWR0aCkgLyBlbGVtZW50Lm9mZnNldFdpZHRoIHx8IDEgOiAxO1xuICAgIHNjYWxlWSA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMCA/IHJvdW5kKGNsaWVudFJlY3QuaGVpZ2h0KSAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8IDEgOiAxO1xuICB9XG5cbiAgdmFyIF9yZWYgPSBpc0VsZW1lbnQoZWxlbWVudCkgPyBnZXRXaW5kb3coZWxlbWVudCkgOiB3aW5kb3csXG4gICAgICB2aXN1YWxWaWV3cG9ydCA9IF9yZWYudmlzdWFsVmlld3BvcnQ7XG5cbiAgdmFyIGFkZFZpc3VhbE9mZnNldHMgPSAhaXNMYXlvdXRWaWV3cG9ydCgpICYmIGlzRml4ZWRTdHJhdGVneTtcbiAgdmFyIHggPSAoY2xpZW50UmVjdC5sZWZ0ICsgKGFkZFZpc3VhbE9mZnNldHMgJiYgdmlzdWFsVmlld3BvcnQgPyB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0IDogMCkpIC8gc2NhbGVYO1xuICB2YXIgeSA9IChjbGllbnRSZWN0LnRvcCArIChhZGRWaXN1YWxPZmZzZXRzICYmIHZpc3VhbFZpZXdwb3J0ID8gdmlzdWFsVmlld3BvcnQub2Zmc2V0VG9wIDogMCkpIC8gc2NhbGVZO1xuICB2YXIgd2lkdGggPSBjbGllbnRSZWN0LndpZHRoIC8gc2NhbGVYO1xuICB2YXIgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQgLyBzY2FsZVk7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHRvcDogeSxcbiAgICByaWdodDogeCArIHdpZHRoLFxuICAgIGJvdHRvbTogeSArIGhlaWdodCxcbiAgICBsZWZ0OiB4LFxuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiOyAvLyBSZXR1cm5zIHRoZSBsYXlvdXQgcmVjdCBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIGl0cyBvZmZzZXRQYXJlbnQuIExheW91dFxuLy8gbWVhbnMgaXQgZG9lc24ndCB0YWtlIGludG8gYWNjb3VudCB0cmFuc2Zvcm1zLlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRMYXlvdXRSZWN0KGVsZW1lbnQpIHtcbiAgdmFyIGNsaWVudFJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCk7IC8vIFVzZSB0aGUgY2xpZW50UmVjdCBzaXplcyBpZiBpdCdzIG5vdCBiZWVuIHRyYW5zZm9ybWVkLlxuICAvLyBGaXhlcyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzEyMjNcblxuICB2YXIgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgaWYgKE1hdGguYWJzKGNsaWVudFJlY3Qud2lkdGggLSB3aWR0aCkgPD0gMSkge1xuICAgIHdpZHRoID0gY2xpZW50UmVjdC53aWR0aDtcbiAgfVxuXG4gIGlmIChNYXRoLmFicyhjbGllbnRSZWN0LmhlaWdodCAtIGhlaWdodCkgPD0gMSkge1xuICAgIGhlaWdodCA9IGNsaWVudFJlY3QuaGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBlbGVtZW50Lm9mZnNldExlZnQsXG4gICAgeTogZWxlbWVudC5vZmZzZXRUb3AsXG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0XG4gIH07XG59IiwgImltcG9ydCB7IGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnRhaW5zKHBhcmVudCwgY2hpbGQpIHtcbiAgdmFyIHJvb3ROb2RlID0gY2hpbGQuZ2V0Um9vdE5vZGUgJiYgY2hpbGQuZ2V0Um9vdE5vZGUoKTsgLy8gRmlyc3QsIGF0dGVtcHQgd2l0aCBmYXN0ZXIgbmF0aXZlIG1ldGhvZFxuXG4gIGlmIChwYXJlbnQuY29udGFpbnMoY2hpbGQpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gdGhlbiBmYWxsYmFjayB0byBjdXN0b20gaW1wbGVtZW50YXRpb24gd2l0aCBTaGFkb3cgRE9NIHN1cHBvcnRcbiAgZWxzZSBpZiAocm9vdE5vZGUgJiYgaXNTaGFkb3dSb290KHJvb3ROb2RlKSkge1xuICAgICAgdmFyIG5leHQgPSBjaGlsZDtcblxuICAgICAgZG8ge1xuICAgICAgICBpZiAobmV4dCAmJiBwYXJlbnQuaXNTYW1lTm9kZShuZXh0KSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXTogbmVlZCBhIGJldHRlciB3YXkgdG8gaGFuZGxlIHRoaXMuLi5cblxuXG4gICAgICAgIG5leHQgPSBuZXh0LnBhcmVudE5vZGUgfHwgbmV4dC5ob3N0O1xuICAgICAgfSB3aGlsZSAobmV4dCk7XG4gICAgfSAvLyBHaXZlIHVwLCB0aGUgcmVzdWx0IGlzIGZhbHNlXG5cblxuICByZXR1cm4gZmFsc2U7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGdldFdpbmRvdyhlbGVtZW50KS5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xufSIsICJpbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVGFibGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgcmV0dXJuIFsndGFibGUnLCAndGQnLCAndGgnXS5pbmRleE9mKGdldE5vZGVOYW1lKGVsZW1lbnQpKSA+PSAwO1xufSIsICJpbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkge1xuICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBhc3N1bWUgYm9keSBpcyBhbHdheXMgYXZhaWxhYmxlXG4gIHJldHVybiAoKGlzRWxlbWVudChlbGVtZW50KSA/IGVsZW1lbnQub3duZXJEb2N1bWVudCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICBlbGVtZW50LmRvY3VtZW50KSB8fCB3aW5kb3cuZG9jdW1lbnQpLmRvY3VtZW50RWxlbWVudDtcbn0iLCAiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0UGFyZW50Tm9kZShlbGVtZW50KSB7XG4gIGlmIChnZXROb2RlTmFtZShlbGVtZW50KSA9PT0gJ2h0bWwnKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gKC8vIHRoaXMgaXMgYSBxdWlja2VyIChidXQgbGVzcyB0eXBlIHNhZmUpIHdheSB0byBzYXZlIHF1aXRlIHNvbWUgYnl0ZXMgZnJvbSB0aGUgYnVuZGxlXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXVxuICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgIGVsZW1lbnQuYXNzaWduZWRTbG90IHx8IC8vIHN0ZXAgaW50byB0aGUgc2hhZG93IERPTSBvZiB0aGUgcGFyZW50IG9mIGEgc2xvdHRlZCBub2RlXG4gICAgZWxlbWVudC5wYXJlbnROb2RlIHx8ICggLy8gRE9NIEVsZW1lbnQgZGV0ZWN0ZWRcbiAgICBpc1NoYWRvd1Jvb3QoZWxlbWVudCkgPyBlbGVtZW50Lmhvc3QgOiBudWxsKSB8fCAvLyBTaGFkb3dSb290IGRldGVjdGVkXG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF06IEhUTUxFbGVtZW50IGlzIGEgTm9kZVxuICAgIGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSAvLyBmYWxsYmFja1xuXG4gICk7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQsIGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBpc1RhYmxlRWxlbWVudCBmcm9tIFwiLi9pc1RhYmxlRWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGdldFVBU3RyaW5nIGZyb20gXCIuLi91dGlscy91c2VyQWdlbnQuanNcIjtcblxuZnVuY3Rpb24gZ2V0VHJ1ZU9mZnNldFBhcmVudChlbGVtZW50KSB7XG4gIGlmICghaXNIVE1MRWxlbWVudChlbGVtZW50KSB8fCAvLyBodHRwczovL2dpdGh1Yi5jb20vcG9wcGVyanMvcG9wcGVyLWNvcmUvaXNzdWVzLzgzN1xuICBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG59IC8vIGAub2Zmc2V0UGFyZW50YCByZXBvcnRzIGBudWxsYCBmb3IgZml4ZWQgZWxlbWVudHMsIHdoaWxlIGFic29sdXRlIGVsZW1lbnRzXG4vLyByZXR1cm4gdGhlIGNvbnRhaW5pbmcgYmxvY2tcblxuXG5mdW5jdGlvbiBnZXRDb250YWluaW5nQmxvY2soZWxlbWVudCkge1xuICB2YXIgaXNGaXJlZm94ID0gL2ZpcmVmb3gvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xuICB2YXIgaXNJRSA9IC9UcmlkZW50L2kudGVzdChnZXRVQVN0cmluZygpKTtcblxuICBpZiAoaXNJRSAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgLy8gSW4gSUUgOSwgMTAgYW5kIDExIGZpeGVkIGVsZW1lbnRzIGNvbnRhaW5pbmcgYmxvY2sgaXMgYWx3YXlzIGVzdGFibGlzaGVkIGJ5IHRoZSB2aWV3cG9ydFxuICAgIHZhciBlbGVtZW50Q3NzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgIGlmIChlbGVtZW50Q3NzLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICB2YXIgY3VycmVudE5vZGUgPSBnZXRQYXJlbnROb2RlKGVsZW1lbnQpO1xuXG4gIGlmIChpc1NoYWRvd1Jvb3QoY3VycmVudE5vZGUpKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5ob3N0O1xuICB9XG5cbiAgd2hpbGUgKGlzSFRNTEVsZW1lbnQoY3VycmVudE5vZGUpICYmIFsnaHRtbCcsICdib2R5J10uaW5kZXhPZihnZXROb2RlTmFtZShjdXJyZW50Tm9kZSkpIDwgMCkge1xuICAgIHZhciBjc3MgPSBnZXRDb21wdXRlZFN0eWxlKGN1cnJlbnROb2RlKTsgLy8gVGhpcyBpcyBub24tZXhoYXVzdGl2ZSBidXQgY292ZXJzIHRoZSBtb3N0IGNvbW1vbiBDU1MgcHJvcGVydGllcyB0aGF0XG4gICAgLy8gY3JlYXRlIGEgY29udGFpbmluZyBibG9jay5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQ29udGFpbmluZ19ibG9jayNpZGVudGlmeWluZ190aGVfY29udGFpbmluZ19ibG9ja1xuXG4gICAgaWYgKGNzcy50cmFuc2Zvcm0gIT09ICdub25lJyB8fCBjc3MucGVyc3BlY3RpdmUgIT09ICdub25lJyB8fCBjc3MuY29udGFpbiA9PT0gJ3BhaW50JyB8fCBbJ3RyYW5zZm9ybScsICdwZXJzcGVjdGl2ZSddLmluZGV4T2YoY3NzLndpbGxDaGFuZ2UpICE9PSAtMSB8fCBpc0ZpcmVmb3ggJiYgY3NzLndpbGxDaGFuZ2UgPT09ICdmaWx0ZXInIHx8IGlzRmlyZWZveCAmJiBjc3MuZmlsdGVyICYmIGNzcy5maWx0ZXIgIT09ICdub25lJykge1xuICAgICAgcmV0dXJuIGN1cnJlbnROb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59IC8vIEdldHMgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgcG9zaXRpb25lZCBlbGVtZW50LiBIYW5kbGVzIHNvbWUgZWRnZSBjYXNlcyxcbi8vIHN1Y2ggYXMgdGFibGUgYW5jZXN0b3JzIGFuZCBjcm9zcyBicm93c2VyIGJ1Z3MuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgdmFyIHdpbmRvdyA9IGdldFdpbmRvdyhlbGVtZW50KTtcbiAgdmFyIG9mZnNldFBhcmVudCA9IGdldFRydWVPZmZzZXRQYXJlbnQoZWxlbWVudCk7XG5cbiAgd2hpbGUgKG9mZnNldFBhcmVudCAmJiBpc1RhYmxlRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KG9mZnNldFBhcmVudCk7XG4gIH1cblxuICBpZiAob2Zmc2V0UGFyZW50ICYmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpID09PSAnaHRtbCcgfHwgZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSA9PT0gJ2JvZHknICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuXG4gIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHx8IHdpbmRvdztcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gWyd0b3AnLCAnYm90dG9tJ10uaW5kZXhPZihwbGFjZW1lbnQpID49IDAgPyAneCcgOiAneSc7XG59IiwgImltcG9ydCB7IG1heCBhcyBtYXRoTWF4LCBtaW4gYXMgbWF0aE1pbiB9IGZyb20gXCIuL21hdGguanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW4obWluLCB2YWx1ZSwgbWF4KSB7XG4gIHJldHVybiBtYXRoTWF4KG1pbiwgbWF0aE1pbih2YWx1ZSwgbWF4KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2l0aGluTWF4Q2xhbXAobWluLCB2YWx1ZSwgbWF4KSB7XG4gIHZhciB2ID0gd2l0aGluKG1pbiwgdmFsdWUsIG1heCk7XG4gIHJldHVybiB2ID4gbWF4ID8gbWF4IDogdjtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RnJlc2hTaWRlT2JqZWN0KCkge1xuICByZXR1cm4ge1xuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMFxuICB9O1xufSIsICJpbXBvcnQgZ2V0RnJlc2hTaWRlT2JqZWN0IGZyb20gXCIuL2dldEZyZXNoU2lkZU9iamVjdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVyZ2VQYWRkaW5nT2JqZWN0KHBhZGRpbmdPYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGdldEZyZXNoU2lkZU9iamVjdCgpLCBwYWRkaW5nT2JqZWN0KTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXhwYW5kVG9IYXNoTWFwKHZhbHVlLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoaGFzaE1hcCwga2V5KSB7XG4gICAgaGFzaE1hcFtrZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIGhhc2hNYXA7XG4gIH0sIHt9KTtcbn0iLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGNvbnRhaW5zIGZyb20gXCIuLi9kb20tdXRpbHMvY29udGFpbnMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgd2l0aGluIH0gZnJvbSBcIi4uL3V0aWxzL3dpdGhpbi5qc1wiO1xuaW1wb3J0IG1lcmdlUGFkZGluZ09iamVjdCBmcm9tIFwiLi4vdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzXCI7XG5pbXBvcnQgZXhwYW5kVG9IYXNoTWFwIGZyb20gXCIuLi91dGlscy9leHBhbmRUb0hhc2hNYXAuanNcIjtcbmltcG9ydCB7IGxlZnQsIHJpZ2h0LCBiYXNlUGxhY2VtZW50cywgdG9wLCBib3R0b20gfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgdG9QYWRkaW5nT2JqZWN0ID0gZnVuY3Rpb24gdG9QYWRkaW5nT2JqZWN0KHBhZGRpbmcsIHN0YXRlKSB7XG4gIHBhZGRpbmcgPSB0eXBlb2YgcGFkZGluZyA9PT0gJ2Z1bmN0aW9uJyA/IHBhZGRpbmcoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KSkgOiBwYWRkaW5nO1xuICByZXR1cm4gbWVyZ2VQYWRkaW5nT2JqZWN0KHR5cGVvZiBwYWRkaW5nICE9PSAnbnVtYmVyJyA/IHBhZGRpbmcgOiBleHBhbmRUb0hhc2hNYXAocGFkZGluZywgYmFzZVBsYWNlbWVudHMpKTtcbn07XG5cbmZ1bmN0aW9uIGFycm93KF9yZWYpIHtcbiAgdmFyIF9zdGF0ZSRtb2RpZmllcnNEYXRhJDtcblxuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gIHZhciBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdztcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHM7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgYXhpcyA9IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KTtcbiAgdmFyIGlzVmVydGljYWwgPSBbbGVmdCwgcmlnaHRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMDtcbiAgdmFyIGxlbiA9IGlzVmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgaWYgKCFhcnJvd0VsZW1lbnQgfHwgIXBvcHBlck9mZnNldHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcGFkZGluZ09iamVjdCA9IHRvUGFkZGluZ09iamVjdChvcHRpb25zLnBhZGRpbmcsIHN0YXRlKTtcbiAgdmFyIGFycm93UmVjdCA9IGdldExheW91dFJlY3QoYXJyb3dFbGVtZW50KTtcbiAgdmFyIG1pblByb3AgPSBheGlzID09PSAneScgPyB0b3AgOiBsZWZ0O1xuICB2YXIgbWF4UHJvcCA9IGF4aXMgPT09ICd5JyA/IGJvdHRvbSA6IHJpZ2h0O1xuICB2YXIgZW5kRGlmZiA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtsZW5dICsgc3RhdGUucmVjdHMucmVmZXJlbmNlW2F4aXNdIC0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnBvcHBlcltsZW5dO1xuICB2YXIgc3RhcnREaWZmID0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtheGlzXTtcbiAgdmFyIGFycm93T2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KGFycm93RWxlbWVudCk7XG4gIHZhciBjbGllbnRTaXplID0gYXJyb3dPZmZzZXRQYXJlbnQgPyBheGlzID09PSAneScgPyBhcnJvd09mZnNldFBhcmVudC5jbGllbnRIZWlnaHQgfHwgMCA6IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudFdpZHRoIHx8IDAgOiAwO1xuICB2YXIgY2VudGVyVG9SZWZlcmVuY2UgPSBlbmREaWZmIC8gMiAtIHN0YXJ0RGlmZiAvIDI7IC8vIE1ha2Ugc3VyZSB0aGUgYXJyb3cgZG9lc24ndCBvdmVyZmxvdyB0aGUgcG9wcGVyIGlmIHRoZSBjZW50ZXIgcG9pbnQgaXNcbiAgLy8gb3V0c2lkZSBvZiB0aGUgcG9wcGVyIGJvdW5kc1xuXG4gIHZhciBtaW4gPSBwYWRkaW5nT2JqZWN0W21pblByb3BdO1xuICB2YXIgbWF4ID0gY2xpZW50U2l6ZSAtIGFycm93UmVjdFtsZW5dIC0gcGFkZGluZ09iamVjdFttYXhQcm9wXTtcbiAgdmFyIGNlbnRlciA9IGNsaWVudFNpemUgLyAyIC0gYXJyb3dSZWN0W2xlbl0gLyAyICsgY2VudGVyVG9SZWZlcmVuY2U7XG4gIHZhciBvZmZzZXQgPSB3aXRoaW4obWluLCBjZW50ZXIsIG1heCk7IC8vIFByZXZlbnRzIGJyZWFraW5nIHN5bnRheCBoaWdobGlnaHRpbmcuLi5cblxuICB2YXIgYXhpc1Byb3AgPSBheGlzO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gKF9zdGF0ZSRtb2RpZmllcnNEYXRhJCA9IHt9LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSRbYXhpc1Byb3BdID0gb2Zmc2V0LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQuY2VudGVyT2Zmc2V0ID0gb2Zmc2V0IC0gY2VudGVyLCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQpO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjIub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQsXG4gICAgICBhcnJvd0VsZW1lbnQgPSBfb3B0aW9ucyRlbGVtZW50ID09PSB2b2lkIDAgPyAnW2RhdGEtcG9wcGVyLWFycm93XScgOiBfb3B0aW9ucyRlbGVtZW50O1xuXG4gIGlmIChhcnJvd0VsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfSAvLyBDU1Mgc2VsZWN0b3JcblxuXG4gIGlmICh0eXBlb2YgYXJyb3dFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLnBvcHBlci5xdWVyeVNlbGVjdG9yKGFycm93RWxlbWVudCk7XG5cbiAgICBpZiAoIWFycm93RWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBpZiAoIWlzSFRNTEVsZW1lbnQoYXJyb3dFbGVtZW50KSkge1xuICAgICAgY29uc29sZS5lcnJvcihbJ1BvcHBlcjogXCJhcnJvd1wiIGVsZW1lbnQgbXVzdCBiZSBhbiBIVE1MRWxlbWVudCAobm90IGFuIFNWR0VsZW1lbnQpLicsICdUbyB1c2UgYW4gU1ZHIGFycm93LCB3cmFwIGl0IGluIGFuIEhUTUxFbGVtZW50IHRoYXQgd2lsbCBiZSB1c2VkIGFzJywgJ3RoZSBhcnJvdy4nXS5qb2luKCcgJykpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29udGFpbnMoc3RhdGUuZWxlbWVudHMucG9wcGVyLCBhcnJvd0VsZW1lbnQpKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgY29uc29sZS5lcnJvcihbJ1BvcHBlcjogXCJhcnJvd1wiIG1vZGlmaWVyXFwncyBgZWxlbWVudGAgbXVzdCBiZSBhIGNoaWxkIG9mIHRoZSBwb3BwZXInLCAnZWxlbWVudC4nXS5qb2luKCcgJykpO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIHN0YXRlLmVsZW1lbnRzLmFycm93ID0gYXJyb3dFbGVtZW50O1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnYXJyb3cnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogYXJyb3csXG4gIGVmZmVjdDogZWZmZWN0LFxuICByZXF1aXJlczogWydwb3BwZXJPZmZzZXRzJ10sXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsncHJldmVudE92ZXJmbG93J11cbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFZhcmlhdGlvbihwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzFdO1xufSIsICJpbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBib3R0b20sIGVuZCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHVuc2V0U2lkZXMgPSB7XG4gIHRvcDogJ2F1dG8nLFxuICByaWdodDogJ2F1dG8nLFxuICBib3R0b206ICdhdXRvJyxcbiAgbGVmdDogJ2F1dG8nXG59OyAvLyBSb3VuZCB0aGUgb2Zmc2V0cyB0byB0aGUgbmVhcmVzdCBzdWl0YWJsZSBzdWJwaXhlbCBiYXNlZCBvbiB0aGUgRFBSLlxuLy8gWm9vbWluZyBjYW4gY2hhbmdlIHRoZSBEUFIsIGJ1dCBpdCBzZWVtcyB0byByZXBvcnQgYSB2YWx1ZSB0aGF0IHdpbGxcbi8vIGNsZWFubHkgZGl2aWRlIHRoZSB2YWx1ZXMgaW50byB0aGUgYXBwcm9wcmlhdGUgc3VicGl4ZWxzLlxuXG5mdW5jdGlvbiByb3VuZE9mZnNldHNCeURQUihfcmVmKSB7XG4gIHZhciB4ID0gX3JlZi54LFxuICAgICAgeSA9IF9yZWYueTtcbiAgdmFyIHdpbiA9IHdpbmRvdztcbiAgdmFyIGRwciA9IHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gIHJldHVybiB7XG4gICAgeDogcm91bmQoeCAqIGRwcikgLyBkcHIgfHwgMCxcbiAgICB5OiByb3VuZCh5ICogZHByKSAvIGRwciB8fCAwXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXBUb1N0eWxlcyhfcmVmMikge1xuICB2YXIgX09iamVjdCRhc3NpZ24yO1xuXG4gIHZhciBwb3BwZXIgPSBfcmVmMi5wb3BwZXIsXG4gICAgICBwb3BwZXJSZWN0ID0gX3JlZjIucG9wcGVyUmVjdCxcbiAgICAgIHBsYWNlbWVudCA9IF9yZWYyLnBsYWNlbWVudCxcbiAgICAgIHZhcmlhdGlvbiA9IF9yZWYyLnZhcmlhdGlvbixcbiAgICAgIG9mZnNldHMgPSBfcmVmMi5vZmZzZXRzLFxuICAgICAgcG9zaXRpb24gPSBfcmVmMi5wb3NpdGlvbixcbiAgICAgIGdwdUFjY2VsZXJhdGlvbiA9IF9yZWYyLmdwdUFjY2VsZXJhdGlvbixcbiAgICAgIGFkYXB0aXZlID0gX3JlZjIuYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHMgPSBfcmVmMi5yb3VuZE9mZnNldHMsXG4gICAgICBpc0ZpeGVkID0gX3JlZjIuaXNGaXhlZDtcbiAgdmFyIF9vZmZzZXRzJHggPSBvZmZzZXRzLngsXG4gICAgICB4ID0gX29mZnNldHMkeCA9PT0gdm9pZCAwID8gMCA6IF9vZmZzZXRzJHgsXG4gICAgICBfb2Zmc2V0cyR5ID0gb2Zmc2V0cy55LFxuICAgICAgeSA9IF9vZmZzZXRzJHkgPT09IHZvaWQgMCA/IDAgOiBfb2Zmc2V0cyR5O1xuXG4gIHZhciBfcmVmMyA9IHR5cGVvZiByb3VuZE9mZnNldHMgPT09ICdmdW5jdGlvbicgPyByb3VuZE9mZnNldHMoe1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9KSA6IHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcblxuICB4ID0gX3JlZjMueDtcbiAgeSA9IF9yZWYzLnk7XG4gIHZhciBoYXNYID0gb2Zmc2V0cy5oYXNPd25Qcm9wZXJ0eSgneCcpO1xuICB2YXIgaGFzWSA9IG9mZnNldHMuaGFzT3duUHJvcGVydHkoJ3knKTtcbiAgdmFyIHNpZGVYID0gbGVmdDtcbiAgdmFyIHNpZGVZID0gdG9wO1xuICB2YXIgd2luID0gd2luZG93O1xuXG4gIGlmIChhZGFwdGl2ZSkge1xuICAgIHZhciBvZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKTtcbiAgICB2YXIgaGVpZ2h0UHJvcCA9ICdjbGllbnRIZWlnaHQnO1xuICAgIHZhciB3aWR0aFByb3AgPSAnY2xpZW50V2lkdGgnO1xuXG4gICAgaWYgKG9mZnNldFBhcmVudCA9PT0gZ2V0V2luZG93KHBvcHBlcikpIHtcbiAgICAgIG9mZnNldFBhcmVudCA9IGdldERvY3VtZW50RWxlbWVudChwb3BwZXIpO1xuXG4gICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uICE9PSAnc3RhdGljJyAmJiBwb3NpdGlvbiA9PT0gJ2Fic29sdXRlJykge1xuICAgICAgICBoZWlnaHRQcm9wID0gJ3Njcm9sbEhlaWdodCc7XG4gICAgICAgIHdpZHRoUHJvcCA9ICdzY3JvbGxXaWR0aCc7XG4gICAgICB9XG4gICAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYXN0XTogZm9yY2UgdHlwZSByZWZpbmVtZW50LCB3ZSBjb21wYXJlIG9mZnNldFBhcmVudCB3aXRoIHdpbmRvdyBhYm92ZSwgYnV0IEZsb3cgZG9lc24ndCBkZXRlY3QgaXRcblxuXG4gICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50O1xuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gdG9wIHx8IChwbGFjZW1lbnQgPT09IGxlZnQgfHwgcGxhY2VtZW50ID09PSByaWdodCkgJiYgdmFyaWF0aW9uID09PSBlbmQpIHtcbiAgICAgIHNpZGVZID0gYm90dG9tO1xuICAgICAgdmFyIG9mZnNldFkgPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC5oZWlnaHQgOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgIG9mZnNldFBhcmVudFtoZWlnaHRQcm9wXTtcbiAgICAgIHkgLT0gb2Zmc2V0WSAtIHBvcHBlclJlY3QuaGVpZ2h0O1xuICAgICAgeSAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gbGVmdCB8fCAocGxhY2VtZW50ID09PSB0b3AgfHwgcGxhY2VtZW50ID09PSBib3R0b20pICYmIHZhcmlhdGlvbiA9PT0gZW5kKSB7XG4gICAgICBzaWRlWCA9IHJpZ2h0O1xuICAgICAgdmFyIG9mZnNldFggPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC53aWR0aCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgICAgb2Zmc2V0UGFyZW50W3dpZHRoUHJvcF07XG4gICAgICB4IC09IG9mZnNldFggLSBwb3BwZXJSZWN0LndpZHRoO1xuICAgICAgeCAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbW1vblN0eWxlcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIHBvc2l0aW9uOiBwb3NpdGlvblxuICB9LCBhZGFwdGl2ZSAmJiB1bnNldFNpZGVzKTtcblxuICB2YXIgX3JlZjQgPSByb3VuZE9mZnNldHMgPT09IHRydWUgPyByb3VuZE9mZnNldHNCeURQUih7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH0pIDoge1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xuXG4gIHggPSBfcmVmNC54O1xuICB5ID0gX3JlZjQueTtcblxuICBpZiAoZ3B1QWNjZWxlcmF0aW9uKSB7XG4gICAgdmFyIF9PYmplY3QkYXNzaWduO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywgKF9PYmplY3QkYXNzaWduID0ge30sIF9PYmplY3QkYXNzaWduW3NpZGVZXSA9IGhhc1kgPyAnMCcgOiAnJywgX09iamVjdCRhc3NpZ25bc2lkZVhdID0gaGFzWCA/ICcwJyA6ICcnLCBfT2JqZWN0JGFzc2lnbi50cmFuc2Zvcm0gPSAod2luLmRldmljZVBpeGVsUmF0aW8gfHwgMSkgPD0gMSA/IFwidHJhbnNsYXRlKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgpXCIgOiBcInRyYW5zbGF0ZTNkKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgsIDApXCIsIF9PYmplY3QkYXNzaWduKSk7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCAoX09iamVjdCRhc3NpZ24yID0ge30sIF9PYmplY3QkYXNzaWduMltzaWRlWV0gPSBoYXNZID8geSArIFwicHhcIiA6ICcnLCBfT2JqZWN0JGFzc2lnbjJbc2lkZVhdID0gaGFzWCA/IHggKyBcInB4XCIgOiAnJywgX09iamVjdCRhc3NpZ24yLnRyYW5zZm9ybSA9ICcnLCBfT2JqZWN0JGFzc2lnbjIpKTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVN0eWxlcyhfcmVmNSkge1xuICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmNS5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkZ3B1QWNjZWxlcmF0ID0gb3B0aW9ucy5ncHVBY2NlbGVyYXRpb24sXG4gICAgICBncHVBY2NlbGVyYXRpb24gPSBfb3B0aW9ucyRncHVBY2NlbGVyYXQgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRncHVBY2NlbGVyYXQsXG4gICAgICBfb3B0aW9ucyRhZGFwdGl2ZSA9IG9wdGlvbnMuYWRhcHRpdmUsXG4gICAgICBhZGFwdGl2ZSA9IF9vcHRpb25zJGFkYXB0aXZlID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkYWRhcHRpdmUsXG4gICAgICBfb3B0aW9ucyRyb3VuZE9mZnNldHMgPSBvcHRpb25zLnJvdW5kT2Zmc2V0cyxcbiAgICAgIHJvdW5kT2Zmc2V0cyA9IF9vcHRpb25zJHJvdW5kT2Zmc2V0cyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHJvdW5kT2Zmc2V0cztcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgdmFyIHRyYW5zaXRpb25Qcm9wZXJ0eSA9IGdldENvbXB1dGVkU3R5bGUoc3RhdGUuZWxlbWVudHMucG9wcGVyKS50cmFuc2l0aW9uUHJvcGVydHkgfHwgJyc7XG5cbiAgICBpZiAoYWRhcHRpdmUgJiYgWyd0cmFuc2Zvcm0nLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0J10uc29tZShmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgIHJldHVybiB0cmFuc2l0aW9uUHJvcGVydHkuaW5kZXhPZihwcm9wZXJ0eSkgPj0gMDtcbiAgICB9KSkge1xuICAgICAgY29uc29sZS53YXJuKFsnUG9wcGVyOiBEZXRlY3RlZCBDU1MgdHJhbnNpdGlvbnMgb24gYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcnLCAnQ1NTIHByb3BlcnRpZXM6IFwidHJhbnNmb3JtXCIsIFwidG9wXCIsIFwicmlnaHRcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIuJywgJ1xcblxcbicsICdEaXNhYmxlIHRoZSBcImNvbXB1dGVTdHlsZXNcIiBtb2RpZmllclxcJ3MgYGFkYXB0aXZlYCBvcHRpb24gdG8gYWxsb3cnLCAnZm9yIHNtb290aCB0cmFuc2l0aW9ucywgb3IgcmVtb3ZlIHRoZXNlIHByb3BlcnRpZXMgZnJvbSB0aGUgQ1NTJywgJ3RyYW5zaXRpb24gZGVjbGFyYXRpb24gb24gdGhlIHBvcHBlciBlbGVtZW50IGlmIG9ubHkgdHJhbnNpdGlvbmluZycsICdvcGFjaXR5IG9yIGJhY2tncm91bmQtY29sb3IgZm9yIGV4YW1wbGUuJywgJ1xcblxcbicsICdXZSByZWNvbW1lbmQgdXNpbmcgdGhlIHBvcHBlciBlbGVtZW50IGFzIGEgd3JhcHBlciBhcm91bmQgYW4gaW5uZXInLCAnZWxlbWVudCB0aGF0IGNhbiBoYXZlIGFueSBDU1MgcHJvcGVydHkgdHJhbnNpdGlvbmVkIGZvciBhbmltYXRpb25zLiddLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbW1vblN0eWxlcyA9IHtcbiAgICBwbGFjZW1lbnQ6IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KSxcbiAgICB2YXJpYXRpb246IGdldFZhcmlhdGlvbihzdGF0ZS5wbGFjZW1lbnQpLFxuICAgIHBvcHBlcjogc3RhdGUuZWxlbWVudHMucG9wcGVyLFxuICAgIHBvcHBlclJlY3Q6IHN0YXRlLnJlY3RzLnBvcHBlcixcbiAgICBncHVBY2NlbGVyYXRpb246IGdwdUFjY2VsZXJhdGlvbixcbiAgICBpc0ZpeGVkOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5ID09PSAnZml4ZWQnXG4gIH07XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnN0eWxlcy5wb3BwZXIsIG1hcFRvU3R5bGVzKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywge1xuICAgICAgb2Zmc2V0czogc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLFxuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBhZGFwdGl2ZTogYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHM6IHJvdW5kT2Zmc2V0c1xuICAgIH0pKSk7XG4gIH1cblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5hcnJvdyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLmFycm93ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuc3R5bGVzLmFycm93LCBtYXBUb1N0eWxlcyhPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIHtcbiAgICAgIG9mZnNldHM6IHN0YXRlLm1vZGlmaWVyc0RhdGEuYXJyb3csXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGFkYXB0aXZlOiBmYWxzZSxcbiAgICAgIHJvdW5kT2Zmc2V0czogcm91bmRPZmZzZXRzXG4gICAgfSkpKTtcbiAgfVxuXG4gIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIsIHtcbiAgICAnZGF0YS1wb3BwZXItcGxhY2VtZW50Jzogc3RhdGUucGxhY2VtZW50XG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnY29tcHV0ZVN0eWxlcycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnYmVmb3JlV3JpdGUnLFxuICBmbjogY29tcHV0ZVN0eWxlcyxcbiAgZGF0YToge31cbn07IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRXaW5kb3cuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgcGFzc2l2ZSA9IHtcbiAgcGFzc2l2ZTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gZWZmZWN0KF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIGluc3RhbmNlID0gX3JlZi5pbnN0YW5jZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gIHZhciBfb3B0aW9ucyRzY3JvbGwgPSBvcHRpb25zLnNjcm9sbCxcbiAgICAgIHNjcm9sbCA9IF9vcHRpb25zJHNjcm9sbCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHNjcm9sbCxcbiAgICAgIF9vcHRpb25zJHJlc2l6ZSA9IG9wdGlvbnMucmVzaXplLFxuICAgICAgcmVzaXplID0gX29wdGlvbnMkcmVzaXplID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkcmVzaXplO1xuICB2YXIgd2luZG93ID0gZ2V0V2luZG93KHN0YXRlLmVsZW1lbnRzLnBvcHBlcik7XG4gIHZhciBzY3JvbGxQYXJlbnRzID0gW10uY29uY2F0KHN0YXRlLnNjcm9sbFBhcmVudHMucmVmZXJlbmNlLCBzdGF0ZS5zY3JvbGxQYXJlbnRzLnBvcHBlcik7XG5cbiAgaWYgKHNjcm9sbCkge1xuICAgIHNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAoc2Nyb2xsUGFyZW50KSB7XG4gICAgICBzY3JvbGxQYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChyZXNpemUpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNjcm9sbCkge1xuICAgICAgc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChzY3JvbGxQYXJlbnQpIHtcbiAgICAgICAgc2Nyb2xsUGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVzaXplKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICB9XG4gIH07XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdldmVudExpc3RlbmVycycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnd3JpdGUnLFxuICBmbjogZnVuY3Rpb24gZm4oKSB7fSxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIGRhdGE6IHt9XG59OyIsICJ2YXIgaGFzaCA9IHtcbiAgbGVmdDogJ3JpZ2h0JyxcbiAgcmlnaHQ6ICdsZWZ0JyxcbiAgYm90dG9tOiAndG9wJyxcbiAgdG9wOiAnYm90dG9tJ1xufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL2xlZnR8cmlnaHR8Ym90dG9tfHRvcC9nLCBmdW5jdGlvbiAobWF0Y2hlZCkge1xuICAgIHJldHVybiBoYXNoW21hdGNoZWRdO1xuICB9KTtcbn0iLCAidmFyIGhhc2ggPSB7XG4gIHN0YXJ0OiAnZW5kJyxcbiAgZW5kOiAnc3RhcnQnXG59O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQucmVwbGFjZSgvc3RhcnR8ZW5kL2csIGZ1bmN0aW9uIChtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGhhc2hbbWF0Y2hlZF07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsKG5vZGUpIHtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhub2RlKTtcbiAgdmFyIHNjcm9sbExlZnQgPSB3aW4ucGFnZVhPZmZzZXQ7XG4gIHZhciBzY3JvbGxUb3AgPSB3aW4ucGFnZVlPZmZzZXQ7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcFxuICB9O1xufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpIHtcbiAgLy8gSWYgPGh0bWw+IGhhcyBhIENTUyB3aWR0aCBncmVhdGVyIHRoYW4gdGhlIHZpZXdwb3J0LCB0aGVuIHRoaXMgd2lsbCBiZVxuICAvLyBpbmNvcnJlY3QgZm9yIFJUTC5cbiAgLy8gUG9wcGVyIDEgaXMgYnJva2VuIGluIHRoaXMgY2FzZSBhbmQgbmV2ZXIgaGFkIGEgYnVnIHJlcG9ydCBzbyBsZXQncyBhc3N1bWVcbiAgLy8gaXQncyBub3QgYW4gaXNzdWUuIEkgZG9uJ3QgdGhpbmsgYW55b25lIGV2ZXIgc3BlY2lmaWVzIHdpZHRoIG9uIDxodG1sPlxuICAvLyBhbnl3YXkuXG4gIC8vIEJyb3dzZXJzIHdoZXJlIHRoZSBsZWZ0IHNjcm9sbGJhciBkb2Vzbid0IGNhdXNlIGFuIGlzc3VlIHJlcG9ydCBgMGAgZm9yXG4gIC8vIHRoaXMgKGUuZy4gRWRnZSAyMDE5LCBJRTExLCBTYWZhcmkpXG4gIHJldHVybiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpKS5sZWZ0ICsgZ2V0V2luZG93U2Nyb2xsKGVsZW1lbnQpLnNjcm9sbExlZnQ7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGlzTGF5b3V0Vmlld3BvcnQgZnJvbSBcIi4vaXNMYXlvdXRWaWV3cG9ydC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSB7XG4gIHZhciB3aW4gPSBnZXRXaW5kb3coZWxlbWVudCk7XG4gIHZhciBodG1sID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICB2YXIgdmlzdWFsVmlld3BvcnQgPSB3aW4udmlzdWFsVmlld3BvcnQ7XG4gIHZhciB3aWR0aCA9IGh0bWwuY2xpZW50V2lkdGg7XG4gIHZhciBoZWlnaHQgPSBodG1sLmNsaWVudEhlaWdodDtcbiAgdmFyIHggPSAwO1xuICB2YXIgeSA9IDA7XG5cbiAgaWYgKHZpc3VhbFZpZXdwb3J0KSB7XG4gICAgd2lkdGggPSB2aXN1YWxWaWV3cG9ydC53aWR0aDtcbiAgICBoZWlnaHQgPSB2aXN1YWxWaWV3cG9ydC5oZWlnaHQ7XG4gICAgdmFyIGxheW91dFZpZXdwb3J0ID0gaXNMYXlvdXRWaWV3cG9ydCgpO1xuXG4gICAgaWYgKGxheW91dFZpZXdwb3J0IHx8ICFsYXlvdXRWaWV3cG9ydCAmJiBzdHJhdGVneSA9PT0gJ2ZpeGVkJykge1xuICAgICAgeCA9IHZpc3VhbFZpZXdwb3J0Lm9mZnNldExlZnQ7XG4gICAgICB5ID0gdmlzdWFsVmlld3BvcnQub2Zmc2V0VG9wO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIHg6IHggKyBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpLFxuICAgIHk6IHlcbiAgfTtcbn0iLCAiaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGxCYXJYIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbEJhclguanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5pbXBvcnQgeyBtYXggfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiOyAvLyBHZXRzIHRoZSBlbnRpcmUgc2l6ZSBvZiB0aGUgc2Nyb2xsYWJsZSBkb2N1bWVudCBhcmVhLCBldmVuIGV4dGVuZGluZyBvdXRzaWRlXG4vLyBvZiB0aGUgYDxodG1sPmAgYW5kIGA8Ym9keT5gIHJlY3QgYm91bmRzIGlmIGhvcml6b250YWxseSBzY3JvbGxhYmxlXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldERvY3VtZW50UmVjdChlbGVtZW50KSB7XG4gIHZhciBfZWxlbWVudCRvd25lckRvY3VtZW47XG5cbiAgdmFyIGh0bWwgPSBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCk7XG4gIHZhciB3aW5TY3JvbGwgPSBnZXRXaW5kb3dTY3JvbGwoZWxlbWVudCk7XG4gIHZhciBib2R5ID0gKF9lbGVtZW50JG93bmVyRG9jdW1lbiA9IGVsZW1lbnQub3duZXJEb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lbGVtZW50JG93bmVyRG9jdW1lbi5ib2R5O1xuICB2YXIgd2lkdGggPSBtYXgoaHRtbC5zY3JvbGxXaWR0aCwgaHRtbC5jbGllbnRXaWR0aCwgYm9keSA/IGJvZHkuc2Nyb2xsV2lkdGggOiAwLCBib2R5ID8gYm9keS5jbGllbnRXaWR0aCA6IDApO1xuICB2YXIgaGVpZ2h0ID0gbWF4KGh0bWwuc2Nyb2xsSGVpZ2h0LCBodG1sLmNsaWVudEhlaWdodCwgYm9keSA/IGJvZHkuc2Nyb2xsSGVpZ2h0IDogMCwgYm9keSA/IGJvZHkuY2xpZW50SGVpZ2h0IDogMCk7XG4gIHZhciB4ID0gLXdpblNjcm9sbC5zY3JvbGxMZWZ0ICsgZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KTtcbiAgdmFyIHkgPSAtd2luU2Nyb2xsLnNjcm9sbFRvcDtcblxuICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShib2R5IHx8IGh0bWwpLmRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICB4ICs9IG1heChodG1sLmNsaWVudFdpZHRoLCBib2R5ID8gYm9keS5jbGllbnRXaWR0aCA6IDApIC0gd2lkdGg7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcbn0iLCAiaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTY3JvbGxQYXJlbnQoZWxlbWVudCkge1xuICAvLyBGaXJlZm94IHdhbnRzIHVzIHRvIGNoZWNrIGAteGAgYW5kIGAteWAgdmFyaWF0aW9ucyBhcyB3ZWxsXG4gIHZhciBfZ2V0Q29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICBvdmVyZmxvdyA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93LFxuICAgICAgb3ZlcmZsb3dYID0gX2dldENvbXB1dGVkU3R5bGUub3ZlcmZsb3dYLFxuICAgICAgb3ZlcmZsb3dZID0gX2dldENvbXB1dGVkU3R5bGUub3ZlcmZsb3dZO1xuXG4gIHJldHVybiAvYXV0b3xzY3JvbGx8b3ZlcmxheXxoaWRkZW4vLnRlc3Qob3ZlcmZsb3cgKyBvdmVyZmxvd1kgKyBvdmVyZmxvd1gpO1xufSIsICJpbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudChub2RlKSB7XG4gIGlmIChbJ2h0bWwnLCAnYm9keScsICcjZG9jdW1lbnQnXS5pbmRleE9mKGdldE5vZGVOYW1lKG5vZGUpKSA+PSAwKSB7XG4gICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogYXNzdW1lIGJvZHkgaXMgYWx3YXlzIGF2YWlsYWJsZVxuICAgIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQuYm9keTtcbiAgfVxuXG4gIGlmIChpc0hUTUxFbGVtZW50KG5vZGUpICYmIGlzU2Nyb2xsUGFyZW50KG5vZGUpKSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICByZXR1cm4gZ2V0U2Nyb2xsUGFyZW50KGdldFBhcmVudE5vZGUobm9kZSkpO1xufSIsICJpbXBvcnQgZ2V0U2Nyb2xsUGFyZW50IGZyb20gXCIuL2dldFNjcm9sbFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBpc1Njcm9sbFBhcmVudCBmcm9tIFwiLi9pc1Njcm9sbFBhcmVudC5qc1wiO1xuLypcbmdpdmVuIGEgRE9NIGVsZW1lbnQsIHJldHVybiB0aGUgbGlzdCBvZiBhbGwgc2Nyb2xsIHBhcmVudHMsIHVwIHRoZSBsaXN0IG9mIGFuY2Vzb3JzXG51bnRpbCB3ZSBnZXQgdG8gdGhlIHRvcCB3aW5kb3cgb2JqZWN0LiBUaGlzIGxpc3QgaXMgd2hhdCB3ZSBhdHRhY2ggc2Nyb2xsIGxpc3RlbmVyc1xudG8sIGJlY2F1c2UgaWYgYW55IG9mIHRoZXNlIHBhcmVudCBlbGVtZW50cyBzY3JvbGwsIHdlJ2xsIG5lZWQgdG8gcmUtY2FsY3VsYXRlIHRoZVxucmVmZXJlbmNlIGVsZW1lbnQncyBwb3NpdGlvbi5cbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxpc3RTY3JvbGxQYXJlbnRzKGVsZW1lbnQsIGxpc3QpIHtcbiAgdmFyIF9lbGVtZW50JG93bmVyRG9jdW1lbjtcblxuICBpZiAobGlzdCA9PT0gdm9pZCAwKSB7XG4gICAgbGlzdCA9IFtdO1xuICB9XG5cbiAgdmFyIHNjcm9sbFBhcmVudCA9IGdldFNjcm9sbFBhcmVudChlbGVtZW50KTtcbiAgdmFyIGlzQm9keSA9IHNjcm9sbFBhcmVudCA9PT0gKChfZWxlbWVudCRvd25lckRvY3VtZW4gPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZWxlbWVudCRvd25lckRvY3VtZW4uYm9keSk7XG4gIHZhciB3aW4gPSBnZXRXaW5kb3coc2Nyb2xsUGFyZW50KTtcbiAgdmFyIHRhcmdldCA9IGlzQm9keSA/IFt3aW5dLmNvbmNhdCh3aW4udmlzdWFsVmlld3BvcnQgfHwgW10sIGlzU2Nyb2xsUGFyZW50KHNjcm9sbFBhcmVudCkgPyBzY3JvbGxQYXJlbnQgOiBbXSkgOiBzY3JvbGxQYXJlbnQ7XG4gIHZhciB1cGRhdGVkTGlzdCA9IGxpc3QuY29uY2F0KHRhcmdldCk7XG4gIHJldHVybiBpc0JvZHkgPyB1cGRhdGVkTGlzdCA6IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdOiBpc0JvZHkgdGVsbHMgdXMgdGFyZ2V0IHdpbGwgYmUgYW4gSFRNTEVsZW1lbnQgaGVyZVxuICB1cGRhdGVkTGlzdC5jb25jYXQobGlzdFNjcm9sbFBhcmVudHMoZ2V0UGFyZW50Tm9kZSh0YXJnZXQpKSk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlY3RUb0NsaWVudFJlY3QocmVjdCkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcmVjdCwge1xuICAgIGxlZnQ6IHJlY3QueCxcbiAgICB0b3A6IHJlY3QueSxcbiAgICByaWdodDogcmVjdC54ICsgcmVjdC53aWR0aCxcbiAgICBib3R0b206IHJlY3QueSArIHJlY3QuaGVpZ2h0XG4gIH0pO1xufSIsICJpbXBvcnQgeyB2aWV3cG9ydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldFZpZXdwb3J0UmVjdCBmcm9tIFwiLi9nZXRWaWV3cG9ydFJlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudFJlY3QgZnJvbSBcIi4vZ2V0RG9jdW1lbnRSZWN0LmpzXCI7XG5pbXBvcnQgbGlzdFNjcm9sbFBhcmVudHMgZnJvbSBcIi4vbGlzdFNjcm9sbFBhcmVudHMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4vZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50LCBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBjb250YWlucyBmcm9tIFwiLi9jb250YWlucy5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgcmVjdFRvQ2xpZW50UmVjdCBmcm9tIFwiLi4vdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IHsgbWF4LCBtaW4gfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBnZXRJbm5lckJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBzdHJhdGVneSkge1xuICB2YXIgcmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBmYWxzZSwgc3RyYXRlZ3kgPT09ICdmaXhlZCcpO1xuICByZWN0LnRvcCA9IHJlY3QudG9wICsgZWxlbWVudC5jbGllbnRUb3A7XG4gIHJlY3QubGVmdCA9IHJlY3QubGVmdCArIGVsZW1lbnQuY2xpZW50TGVmdDtcbiAgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICByZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0ICsgZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgcmVjdC53aWR0aCA9IGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIHJlY3QuaGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIHJlY3QueCA9IHJlY3QubGVmdDtcbiAgcmVjdC55ID0gcmVjdC50b3A7XG4gIHJldHVybiByZWN0O1xufVxuXG5mdW5jdGlvbiBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBjbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpIHtcbiAgcmV0dXJuIGNsaXBwaW5nUGFyZW50ID09PSB2aWV3cG9ydCA/IHJlY3RUb0NsaWVudFJlY3QoZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQsIHN0cmF0ZWd5KSkgOiBpc0VsZW1lbnQoY2xpcHBpbmdQYXJlbnQpID8gZ2V0SW5uZXJCb3VuZGluZ0NsaWVudFJlY3QoY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KSA6IHJlY3RUb0NsaWVudFJlY3QoZ2V0RG9jdW1lbnRSZWN0KGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSkpO1xufSAvLyBBIFwiY2xpcHBpbmcgcGFyZW50XCIgaXMgYW4gb3ZlcmZsb3dhYmxlIGNvbnRhaW5lciB3aXRoIHRoZSBjaGFyYWN0ZXJpc3RpYyBvZlxuLy8gY2xpcHBpbmcgKG9yIGhpZGluZykgb3ZlcmZsb3dpbmcgZWxlbWVudHMgd2l0aCBhIHBvc2l0aW9uIGRpZmZlcmVudCBmcm9tXG4vLyBgaW5pdGlhbGBcblxuXG5mdW5jdGlvbiBnZXRDbGlwcGluZ1BhcmVudHMoZWxlbWVudCkge1xuICB2YXIgY2xpcHBpbmdQYXJlbnRzID0gbGlzdFNjcm9sbFBhcmVudHMoZ2V0UGFyZW50Tm9kZShlbGVtZW50KSk7XG4gIHZhciBjYW5Fc2NhcGVDbGlwcGluZyA9IFsnYWJzb2x1dGUnLCAnZml4ZWQnXS5pbmRleE9mKGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb24pID49IDA7XG4gIHZhciBjbGlwcGVyRWxlbWVudCA9IGNhbkVzY2FwZUNsaXBwaW5nICYmIGlzSFRNTEVsZW1lbnQoZWxlbWVudCkgPyBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkgOiBlbGVtZW50O1xuXG4gIGlmICghaXNFbGVtZW50KGNsaXBwZXJFbGVtZW50KSkge1xuICAgIHJldHVybiBbXTtcbiAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMTQxNFxuXG5cbiAgcmV0dXJuIGNsaXBwaW5nUGFyZW50cy5maWx0ZXIoZnVuY3Rpb24gKGNsaXBwaW5nUGFyZW50KSB7XG4gICAgcmV0dXJuIGlzRWxlbWVudChjbGlwcGluZ1BhcmVudCkgJiYgY29udGFpbnMoY2xpcHBpbmdQYXJlbnQsIGNsaXBwZXJFbGVtZW50KSAmJiBnZXROb2RlTmFtZShjbGlwcGluZ1BhcmVudCkgIT09ICdib2R5JztcbiAgfSk7XG59IC8vIEdldHMgdGhlIG1heGltdW0gYXJlYSB0aGF0IHRoZSBlbGVtZW50IGlzIHZpc2libGUgaW4gZHVlIHRvIGFueSBudW1iZXIgb2Zcbi8vIGNsaXBwaW5nIHBhcmVudHNcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDbGlwcGluZ1JlY3QoZWxlbWVudCwgYm91bmRhcnksIHJvb3RCb3VuZGFyeSwgc3RyYXRlZ3kpIHtcbiAgdmFyIG1haW5DbGlwcGluZ1BhcmVudHMgPSBib3VuZGFyeSA9PT0gJ2NsaXBwaW5nUGFyZW50cycgPyBnZXRDbGlwcGluZ1BhcmVudHMoZWxlbWVudCkgOiBbXS5jb25jYXQoYm91bmRhcnkpO1xuICB2YXIgY2xpcHBpbmdQYXJlbnRzID0gW10uY29uY2F0KG1haW5DbGlwcGluZ1BhcmVudHMsIFtyb290Qm91bmRhcnldKTtcbiAgdmFyIGZpcnN0Q2xpcHBpbmdQYXJlbnQgPSBjbGlwcGluZ1BhcmVudHNbMF07XG4gIHZhciBjbGlwcGluZ1JlY3QgPSBjbGlwcGluZ1BhcmVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2NSZWN0LCBjbGlwcGluZ1BhcmVudCkge1xuICAgIHZhciByZWN0ID0gZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KTtcbiAgICBhY2NSZWN0LnRvcCA9IG1heChyZWN0LnRvcCwgYWNjUmVjdC50b3ApO1xuICAgIGFjY1JlY3QucmlnaHQgPSBtaW4ocmVjdC5yaWdodCwgYWNjUmVjdC5yaWdodCk7XG4gICAgYWNjUmVjdC5ib3R0b20gPSBtaW4ocmVjdC5ib3R0b20sIGFjY1JlY3QuYm90dG9tKTtcbiAgICBhY2NSZWN0LmxlZnQgPSBtYXgocmVjdC5sZWZ0LCBhY2NSZWN0LmxlZnQpO1xuICAgIHJldHVybiBhY2NSZWN0O1xuICB9LCBnZXRDbGllbnRSZWN0RnJvbU1peGVkVHlwZShlbGVtZW50LCBmaXJzdENsaXBwaW5nUGFyZW50LCBzdHJhdGVneSkpO1xuICBjbGlwcGluZ1JlY3Qud2lkdGggPSBjbGlwcGluZ1JlY3QucmlnaHQgLSBjbGlwcGluZ1JlY3QubGVmdDtcbiAgY2xpcHBpbmdSZWN0LmhlaWdodCA9IGNsaXBwaW5nUmVjdC5ib3R0b20gLSBjbGlwcGluZ1JlY3QudG9wO1xuICBjbGlwcGluZ1JlY3QueCA9IGNsaXBwaW5nUmVjdC5sZWZ0O1xuICBjbGlwcGluZ1JlY3QueSA9IGNsaXBwaW5nUmVjdC50b3A7XG4gIHJldHVybiBjbGlwcGluZ1JlY3Q7XG59IiwgImltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4vZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50IGZyb20gXCIuL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LCBzdGFydCwgZW5kIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21wdXRlT2Zmc2V0cyhfcmVmKSB7XG4gIHZhciByZWZlcmVuY2UgPSBfcmVmLnJlZmVyZW5jZSxcbiAgICAgIGVsZW1lbnQgPSBfcmVmLmVsZW1lbnQsXG4gICAgICBwbGFjZW1lbnQgPSBfcmVmLnBsYWNlbWVudDtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBwbGFjZW1lbnQgPyBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkgOiBudWxsO1xuICB2YXIgdmFyaWF0aW9uID0gcGxhY2VtZW50ID8gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkgOiBudWxsO1xuICB2YXIgY29tbW9uWCA9IHJlZmVyZW5jZS54ICsgcmVmZXJlbmNlLndpZHRoIC8gMiAtIGVsZW1lbnQud2lkdGggLyAyO1xuICB2YXIgY29tbW9uWSA9IHJlZmVyZW5jZS55ICsgcmVmZXJlbmNlLmhlaWdodCAvIDIgLSBlbGVtZW50LmhlaWdodCAvIDI7XG4gIHZhciBvZmZzZXRzO1xuXG4gIHN3aXRjaCAoYmFzZVBsYWNlbWVudCkge1xuICAgIGNhc2UgdG9wOlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogY29tbW9uWCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnkgLSBlbGVtZW50LmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBib3R0b206XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiBjb21tb25YLFxuICAgICAgICB5OiByZWZlcmVuY2UueSArIHJlZmVyZW5jZS5oZWlnaHRcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgcmlnaHQ6XG4gICAgICBvZmZzZXRzID0ge1xuICAgICAgICB4OiByZWZlcmVuY2UueCArIHJlZmVyZW5jZS53aWR0aCxcbiAgICAgICAgeTogY29tbW9uWVxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBsZWZ0OlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogcmVmZXJlbmNlLnggLSBlbGVtZW50LndpZHRoLFxuICAgICAgICB5OiBjb21tb25ZXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogcmVmZXJlbmNlLngsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55XG4gICAgICB9O1xuICB9XG5cbiAgdmFyIG1haW5BeGlzID0gYmFzZVBsYWNlbWVudCA/IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KSA6IG51bGw7XG5cbiAgaWYgKG1haW5BeGlzICE9IG51bGwpIHtcbiAgICB2YXIgbGVuID0gbWFpbkF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICAgIHN3aXRjaCAodmFyaWF0aW9uKSB7XG4gICAgICBjYXNlIHN0YXJ0OlxuICAgICAgICBvZmZzZXRzW21haW5BeGlzXSA9IG9mZnNldHNbbWFpbkF4aXNdIC0gKHJlZmVyZW5jZVtsZW5dIC8gMiAtIGVsZW1lbnRbbGVuXSAvIDIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBlbmQ6XG4gICAgICAgIG9mZnNldHNbbWFpbkF4aXNdID0gb2Zmc2V0c1ttYWluQXhpc10gKyAocmVmZXJlbmNlW2xlbl0gLyAyIC0gZWxlbWVudFtsZW5dIC8gMik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvZmZzZXRzO1xufSIsICJpbXBvcnQgZ2V0Q2xpcHBpbmdSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Q2xpcHBpbmdSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgY29tcHV0ZU9mZnNldHMgZnJvbSBcIi4vY29tcHV0ZU9mZnNldHMuanNcIjtcbmltcG9ydCByZWN0VG9DbGllbnRSZWN0IGZyb20gXCIuL3JlY3RUb0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCB7IGNsaXBwaW5nUGFyZW50cywgcmVmZXJlbmNlLCBwb3BwZXIsIGJvdHRvbSwgdG9wLCByaWdodCwgYmFzZVBsYWNlbWVudHMsIHZpZXdwb3J0IH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiLi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBtZXJnZVBhZGRpbmdPYmplY3QgZnJvbSBcIi4vbWVyZ2VQYWRkaW5nT2JqZWN0LmpzXCI7XG5pbXBvcnQgZXhwYW5kVG9IYXNoTWFwIGZyb20gXCIuL2V4cGFuZFRvSGFzaE1hcC5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRldGVjdE92ZXJmbG93KHN0YXRlLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgX29wdGlvbnMkcGxhY2VtZW50ID0gX29wdGlvbnMucGxhY2VtZW50LFxuICAgICAgcGxhY2VtZW50ID0gX29wdGlvbnMkcGxhY2VtZW50ID09PSB2b2lkIDAgPyBzdGF0ZS5wbGFjZW1lbnQgOiBfb3B0aW9ucyRwbGFjZW1lbnQsXG4gICAgICBfb3B0aW9ucyRzdHJhdGVneSA9IF9vcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgc3RyYXRlZ3kgPSBfb3B0aW9ucyRzdHJhdGVneSA9PT0gdm9pZCAwID8gc3RhdGUuc3RyYXRlZ3kgOiBfb3B0aW9ucyRzdHJhdGVneSxcbiAgICAgIF9vcHRpb25zJGJvdW5kYXJ5ID0gX29wdGlvbnMuYm91bmRhcnksXG4gICAgICBib3VuZGFyeSA9IF9vcHRpb25zJGJvdW5kYXJ5ID09PSB2b2lkIDAgPyBjbGlwcGluZ1BhcmVudHMgOiBfb3B0aW9ucyRib3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJHJvb3RCb3VuZGFyeSA9IF9vcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IF9vcHRpb25zJHJvb3RCb3VuZGFyeSA9PT0gdm9pZCAwID8gdmlld3BvcnQgOiBfb3B0aW9ucyRyb290Qm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRlbGVtZW50Q29udGUgPSBfb3B0aW9ucy5lbGVtZW50Q29udGV4dCxcbiAgICAgIGVsZW1lbnRDb250ZXh0ID0gX29wdGlvbnMkZWxlbWVudENvbnRlID09PSB2b2lkIDAgPyBwb3BwZXIgOiBfb3B0aW9ucyRlbGVtZW50Q29udGUsXG4gICAgICBfb3B0aW9ucyRhbHRCb3VuZGFyeSA9IF9vcHRpb25zLmFsdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnkgPSBfb3B0aW9ucyRhbHRCb3VuZGFyeSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfb3B0aW9ucyRhbHRCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJHBhZGRpbmcgPSBfb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgcGFkZGluZyA9IF9vcHRpb25zJHBhZGRpbmcgPT09IHZvaWQgMCA/IDAgOiBfb3B0aW9ucyRwYWRkaW5nO1xuICB2YXIgcGFkZGluZ09iamVjdCA9IG1lcmdlUGFkZGluZ09iamVjdCh0eXBlb2YgcGFkZGluZyAhPT0gJ251bWJlcicgPyBwYWRkaW5nIDogZXhwYW5kVG9IYXNoTWFwKHBhZGRpbmcsIGJhc2VQbGFjZW1lbnRzKSk7XG4gIHZhciBhbHRDb250ZXh0ID0gZWxlbWVudENvbnRleHQgPT09IHBvcHBlciA/IHJlZmVyZW5jZSA6IHBvcHBlcjtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbYWx0Qm91bmRhcnkgPyBhbHRDb250ZXh0IDogZWxlbWVudENvbnRleHRdO1xuICB2YXIgY2xpcHBpbmdDbGllbnRSZWN0ID0gZ2V0Q2xpcHBpbmdSZWN0KGlzRWxlbWVudChlbGVtZW50KSA/IGVsZW1lbnQgOiBlbGVtZW50LmNvbnRleHRFbGVtZW50IHx8IGdldERvY3VtZW50RWxlbWVudChzdGF0ZS5lbGVtZW50cy5wb3BwZXIpLCBib3VuZGFyeSwgcm9vdEJvdW5kYXJ5LCBzdHJhdGVneSk7XG4gIHZhciByZWZlcmVuY2VDbGllbnRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KHN0YXRlLmVsZW1lbnRzLnJlZmVyZW5jZSk7XG4gIHZhciBwb3BwZXJPZmZzZXRzID0gY29tcHV0ZU9mZnNldHMoe1xuICAgIHJlZmVyZW5jZTogcmVmZXJlbmNlQ2xpZW50UmVjdCxcbiAgICBlbGVtZW50OiBwb3BwZXJSZWN0LFxuICAgIHN0cmF0ZWd5OiAnYWJzb2x1dGUnLFxuICAgIHBsYWNlbWVudDogcGxhY2VtZW50XG4gIH0pO1xuICB2YXIgcG9wcGVyQ2xpZW50UmVjdCA9IHJlY3RUb0NsaWVudFJlY3QoT2JqZWN0LmFzc2lnbih7fSwgcG9wcGVyUmVjdCwgcG9wcGVyT2Zmc2V0cykpO1xuICB2YXIgZWxlbWVudENsaWVudFJlY3QgPSBlbGVtZW50Q29udGV4dCA9PT0gcG9wcGVyID8gcG9wcGVyQ2xpZW50UmVjdCA6IHJlZmVyZW5jZUNsaWVudFJlY3Q7IC8vIHBvc2l0aXZlID0gb3ZlcmZsb3dpbmcgdGhlIGNsaXBwaW5nIHJlY3RcbiAgLy8gMCBvciBuZWdhdGl2ZSA9IHdpdGhpbiB0aGUgY2xpcHBpbmcgcmVjdFxuXG4gIHZhciBvdmVyZmxvd09mZnNldHMgPSB7XG4gICAgdG9wOiBjbGlwcGluZ0NsaWVudFJlY3QudG9wIC0gZWxlbWVudENsaWVudFJlY3QudG9wICsgcGFkZGluZ09iamVjdC50b3AsXG4gICAgYm90dG9tOiBlbGVtZW50Q2xpZW50UmVjdC5ib3R0b20gLSBjbGlwcGluZ0NsaWVudFJlY3QuYm90dG9tICsgcGFkZGluZ09iamVjdC5ib3R0b20sXG4gICAgbGVmdDogY2xpcHBpbmdDbGllbnRSZWN0LmxlZnQgLSBlbGVtZW50Q2xpZW50UmVjdC5sZWZ0ICsgcGFkZGluZ09iamVjdC5sZWZ0LFxuICAgIHJpZ2h0OiBlbGVtZW50Q2xpZW50UmVjdC5yaWdodCAtIGNsaXBwaW5nQ2xpZW50UmVjdC5yaWdodCArIHBhZGRpbmdPYmplY3QucmlnaHRcbiAgfTtcbiAgdmFyIG9mZnNldERhdGEgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldDsgLy8gT2Zmc2V0cyBjYW4gYmUgYXBwbGllZCBvbmx5IHRvIHRoZSBwb3BwZXIgZWxlbWVudFxuXG4gIGlmIChlbGVtZW50Q29udGV4dCA9PT0gcG9wcGVyICYmIG9mZnNldERhdGEpIHtcbiAgICB2YXIgb2Zmc2V0ID0gb2Zmc2V0RGF0YVtwbGFjZW1lbnRdO1xuICAgIE9iamVjdC5rZXlzKG92ZXJmbG93T2Zmc2V0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgbXVsdGlwbHkgPSBbcmlnaHQsIGJvdHRvbV0uaW5kZXhPZihrZXkpID49IDAgPyAxIDogLTE7XG4gICAgICB2YXIgYXhpcyA9IFt0b3AsIGJvdHRvbV0uaW5kZXhPZihrZXkpID49IDAgPyAneScgOiAneCc7XG4gICAgICBvdmVyZmxvd09mZnNldHNba2V5XSArPSBvZmZzZXRbYXhpc10gKiBtdWx0aXBseTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBvdmVyZmxvd09mZnNldHM7XG59IiwgImltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4vZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgeyB2YXJpYXRpb25QbGFjZW1lbnRzLCBiYXNlUGxhY2VtZW50cywgcGxhY2VtZW50cyBhcyBhbGxQbGFjZW1lbnRzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4vZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXB1dGVBdXRvUGxhY2VtZW50KHN0YXRlLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgcGxhY2VtZW50ID0gX29wdGlvbnMucGxhY2VtZW50LFxuICAgICAgYm91bmRhcnkgPSBfb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IF9vcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmcgPSBfb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgZmxpcFZhcmlhdGlvbnMgPSBfb3B0aW9ucy5mbGlwVmFyaWF0aW9ucyxcbiAgICAgIF9vcHRpb25zJGFsbG93ZWRBdXRvUCA9IF9vcHRpb25zLmFsbG93ZWRBdXRvUGxhY2VtZW50cyxcbiAgICAgIGFsbG93ZWRBdXRvUGxhY2VtZW50cyA9IF9vcHRpb25zJGFsbG93ZWRBdXRvUCA9PT0gdm9pZCAwID8gYWxsUGxhY2VtZW50cyA6IF9vcHRpb25zJGFsbG93ZWRBdXRvUDtcbiAgdmFyIHZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpO1xuICB2YXIgcGxhY2VtZW50cyA9IHZhcmlhdGlvbiA/IGZsaXBWYXJpYXRpb25zID8gdmFyaWF0aW9uUGxhY2VtZW50cyA6IHZhcmlhdGlvblBsYWNlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkgPT09IHZhcmlhdGlvbjtcbiAgfSkgOiBiYXNlUGxhY2VtZW50cztcbiAgdmFyIGFsbG93ZWRQbGFjZW1lbnRzID0gcGxhY2VtZW50cy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgIHJldHVybiBhbGxvd2VkQXV0b1BsYWNlbWVudHMuaW5kZXhPZihwbGFjZW1lbnQpID49IDA7XG4gIH0pO1xuXG4gIGlmIChhbGxvd2VkUGxhY2VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBhbGxvd2VkUGxhY2VtZW50cyA9IHBsYWNlbWVudHM7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFsnUG9wcGVyOiBUaGUgYGFsbG93ZWRBdXRvUGxhY2VtZW50c2Agb3B0aW9uIGRpZCBub3QgYWxsb3cgYW55JywgJ3BsYWNlbWVudHMuIEVuc3VyZSB0aGUgYHBsYWNlbWVudGAgb3B0aW9uIG1hdGNoZXMgdGhlIHZhcmlhdGlvbicsICdvZiB0aGUgYWxsb3dlZCBwbGFjZW1lbnRzLicsICdGb3IgZXhhbXBsZSwgXCJhdXRvXCIgY2Fubm90IGJlIHVzZWQgdG8gYWxsb3cgXCJib3R0b20tc3RhcnRcIi4nLCAnVXNlIFwiYXV0by1zdGFydFwiIGluc3RlYWQuJ10uam9pbignICcpKTtcbiAgICB9XG4gIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV06IEZsb3cgc2VlbXMgdG8gaGF2ZSBwcm9ibGVtcyB3aXRoIHR3byBhcnJheSB1bmlvbnMuLi5cblxuXG4gIHZhciBvdmVyZmxvd3MgPSBhbGxvd2VkUGxhY2VtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgYWNjW3BsYWNlbWVudF0gPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmdcbiAgICB9KVtnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCldO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG92ZXJmbG93cykuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBvdmVyZmxvd3NbYV0gLSBvdmVyZmxvd3NbYl07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0T3Bwb3NpdGVQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE9wcG9zaXRlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IGNvbXB1dGVBdXRvUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9jb21wdXRlQXV0b1BsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgYm90dG9tLCB0b3AsIHN0YXJ0LCByaWdodCwgbGVmdCwgYXV0byB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZnVuY3Rpb24gZ2V0RXhwYW5kZWRGYWxsYmFja1BsYWNlbWVudHMocGxhY2VtZW50KSB7XG4gIGlmIChnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkgPT09IGF1dG8pIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICB2YXIgb3Bwb3NpdGVQbGFjZW1lbnQgPSBnZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpO1xuICByZXR1cm4gW2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50KHBsYWNlbWVudCksIG9wcG9zaXRlUGxhY2VtZW50LCBnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudChvcHBvc2l0ZVBsYWNlbWVudCldO1xufVxuXG5mdW5jdGlvbiBmbGlwKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdLl9za2lwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIF9vcHRpb25zJG1haW5BeGlzID0gb3B0aW9ucy5tYWluQXhpcyxcbiAgICAgIGNoZWNrTWFpbkF4aXMgPSBfb3B0aW9ucyRtYWluQXhpcyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJG1haW5BeGlzLFxuICAgICAgX29wdGlvbnMkYWx0QXhpcyA9IG9wdGlvbnMuYWx0QXhpcyxcbiAgICAgIGNoZWNrQWx0QXhpcyA9IF9vcHRpb25zJGFsdEF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRhbHRBeGlzLFxuICAgICAgc3BlY2lmaWVkRmFsbGJhY2tQbGFjZW1lbnRzID0gb3B0aW9ucy5mYWxsYmFja1BsYWNlbWVudHMsXG4gICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgYm91bmRhcnkgPSBvcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IG9wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRmbGlwVmFyaWF0aW8gPSBvcHRpb25zLmZsaXBWYXJpYXRpb25zLFxuICAgICAgZmxpcFZhcmlhdGlvbnMgPSBfb3B0aW9ucyRmbGlwVmFyaWF0aW8gPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRmbGlwVmFyaWF0aW8sXG4gICAgICBhbGxvd2VkQXV0b1BsYWNlbWVudHMgPSBvcHRpb25zLmFsbG93ZWRBdXRvUGxhY2VtZW50cztcbiAgdmFyIHByZWZlcnJlZFBsYWNlbWVudCA9IHN0YXRlLm9wdGlvbnMucGxhY2VtZW50O1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocHJlZmVycmVkUGxhY2VtZW50KTtcbiAgdmFyIGlzQmFzZVBsYWNlbWVudCA9IGJhc2VQbGFjZW1lbnQgPT09IHByZWZlcnJlZFBsYWNlbWVudDtcbiAgdmFyIGZhbGxiYWNrUGxhY2VtZW50cyA9IHNwZWNpZmllZEZhbGxiYWNrUGxhY2VtZW50cyB8fCAoaXNCYXNlUGxhY2VtZW50IHx8ICFmbGlwVmFyaWF0aW9ucyA/IFtnZXRPcHBvc2l0ZVBsYWNlbWVudChwcmVmZXJyZWRQbGFjZW1lbnQpXSA6IGdldEV4cGFuZGVkRmFsbGJhY2tQbGFjZW1lbnRzKHByZWZlcnJlZFBsYWNlbWVudCkpO1xuICB2YXIgcGxhY2VtZW50cyA9IFtwcmVmZXJyZWRQbGFjZW1lbnRdLmNvbmNhdChmYWxsYmFja1BsYWNlbWVudHMpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkgPT09IGF1dG8gPyBjb21wdXRlQXV0b1BsYWNlbWVudChzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmcsXG4gICAgICBmbGlwVmFyaWF0aW9uczogZmxpcFZhcmlhdGlvbnMsXG4gICAgICBhbGxvd2VkQXV0b1BsYWNlbWVudHM6IGFsbG93ZWRBdXRvUGxhY2VtZW50c1xuICAgIH0pIDogcGxhY2VtZW50KTtcbiAgfSwgW10pO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBjaGVja3NNYXAgPSBuZXcgTWFwKCk7XG4gIHZhciBtYWtlRmFsbGJhY2tDaGVja3MgPSB0cnVlO1xuICB2YXIgZmlyc3RGaXR0aW5nUGxhY2VtZW50ID0gcGxhY2VtZW50c1swXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBsYWNlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGxhY2VtZW50ID0gcGxhY2VtZW50c1tpXTtcblxuICAgIHZhciBfYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KTtcblxuICAgIHZhciBpc1N0YXJ0VmFyaWF0aW9uID0gZ2V0VmFyaWF0aW9uKHBsYWNlbWVudCkgPT09IHN0YXJ0O1xuICAgIHZhciBpc1ZlcnRpY2FsID0gW3RvcCwgYm90dG9tXS5pbmRleE9mKF9iYXNlUGxhY2VtZW50KSA+PSAwO1xuICAgIHZhciBsZW4gPSBpc1ZlcnRpY2FsID8gJ3dpZHRoJyA6ICdoZWlnaHQnO1xuICAgIHZhciBvdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeTogcm9vdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnk6IGFsdEJvdW5kYXJ5LFxuICAgICAgcGFkZGluZzogcGFkZGluZ1xuICAgIH0pO1xuICAgIHZhciBtYWluVmFyaWF0aW9uU2lkZSA9IGlzVmVydGljYWwgPyBpc1N0YXJ0VmFyaWF0aW9uID8gcmlnaHQgOiBsZWZ0IDogaXNTdGFydFZhcmlhdGlvbiA/IGJvdHRvbSA6IHRvcDtcblxuICAgIGlmIChyZWZlcmVuY2VSZWN0W2xlbl0gPiBwb3BwZXJSZWN0W2xlbl0pIHtcbiAgICAgIG1haW5WYXJpYXRpb25TaWRlID0gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQobWFpblZhcmlhdGlvblNpZGUpO1xuICAgIH1cblxuICAgIHZhciBhbHRWYXJpYXRpb25TaWRlID0gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQobWFpblZhcmlhdGlvblNpZGUpO1xuICAgIHZhciBjaGVja3MgPSBbXTtcblxuICAgIGlmIChjaGVja01haW5BeGlzKSB7XG4gICAgICBjaGVja3MucHVzaChvdmVyZmxvd1tfYmFzZVBsYWNlbWVudF0gPD0gMCk7XG4gICAgfVxuXG4gICAgaWYgKGNoZWNrQWx0QXhpcykge1xuICAgICAgY2hlY2tzLnB1c2gob3ZlcmZsb3dbbWFpblZhcmlhdGlvblNpZGVdIDw9IDAsIG92ZXJmbG93W2FsdFZhcmlhdGlvblNpZGVdIDw9IDApO1xuICAgIH1cblxuICAgIGlmIChjaGVja3MuZXZlcnkoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICByZXR1cm4gY2hlY2s7XG4gICAgfSkpIHtcbiAgICAgIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IHBsYWNlbWVudDtcbiAgICAgIG1ha2VGYWxsYmFja0NoZWNrcyA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2hlY2tzTWFwLnNldChwbGFjZW1lbnQsIGNoZWNrcyk7XG4gIH1cblxuICBpZiAobWFrZUZhbGxiYWNrQ2hlY2tzKSB7XG4gICAgLy8gYDJgIG1heSBiZSBkZXNpcmVkIGluIHNvbWUgY2FzZXMgXHUyMDEzIHJlc2VhcmNoIGxhdGVyXG4gICAgdmFyIG51bWJlck9mQ2hlY2tzID0gZmxpcFZhcmlhdGlvbnMgPyAzIDogMTtcblxuICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pKSB7XG4gICAgICB2YXIgZml0dGluZ1BsYWNlbWVudCA9IHBsYWNlbWVudHMuZmluZChmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgICAgIHZhciBjaGVja3MgPSBjaGVja3NNYXAuZ2V0KHBsYWNlbWVudCk7XG5cbiAgICAgICAgaWYgKGNoZWNrcykge1xuICAgICAgICAgIHJldHVybiBjaGVja3Muc2xpY2UoMCwgX2kpLmV2ZXJ5KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGZpdHRpbmdQbGFjZW1lbnQpIHtcbiAgICAgICAgZmlyc3RGaXR0aW5nUGxhY2VtZW50ID0gZml0dGluZ1BsYWNlbWVudDtcbiAgICAgICAgcmV0dXJuIFwiYnJlYWtcIjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgX2kgPSBudW1iZXJPZkNoZWNrczsgX2kgPiAwOyBfaS0tKSB7XG4gICAgICB2YXIgX3JldCA9IF9sb29wKF9pKTtcblxuICAgICAgaWYgKF9yZXQgPT09IFwiYnJlYWtcIikgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLnBsYWNlbWVudCAhPT0gZmlyc3RGaXR0aW5nUGxhY2VtZW50KSB7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXS5fc2tpcCA9IHRydWU7XG4gICAgc3RhdGUucGxhY2VtZW50ID0gZmlyc3RGaXR0aW5nUGxhY2VtZW50O1xuICAgIHN0YXRlLnJlc2V0ID0gdHJ1ZTtcbiAgfVxufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnZmxpcCcsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIGZuOiBmbGlwLFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ29mZnNldCddLFxuICBkYXRhOiB7XG4gICAgX3NraXA6IGZhbHNlXG4gIH1cbn07IiwgImltcG9ydCB7IHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuXG5mdW5jdGlvbiBnZXRTaWRlT2Zmc2V0cyhvdmVyZmxvdywgcmVjdCwgcHJldmVudGVkT2Zmc2V0cykge1xuICBpZiAocHJldmVudGVkT2Zmc2V0cyA9PT0gdm9pZCAwKSB7XG4gICAgcHJldmVudGVkT2Zmc2V0cyA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdG9wOiBvdmVyZmxvdy50b3AgLSByZWN0LmhlaWdodCAtIHByZXZlbnRlZE9mZnNldHMueSxcbiAgICByaWdodDogb3ZlcmZsb3cucmlnaHQgLSByZWN0LndpZHRoICsgcHJldmVudGVkT2Zmc2V0cy54LFxuICAgIGJvdHRvbTogb3ZlcmZsb3cuYm90dG9tIC0gcmVjdC5oZWlnaHQgKyBwcmV2ZW50ZWRPZmZzZXRzLnksXG4gICAgbGVmdDogb3ZlcmZsb3cubGVmdCAtIHJlY3Qud2lkdGggLSBwcmV2ZW50ZWRPZmZzZXRzLnhcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKG92ZXJmbG93KSB7XG4gIHJldHVybiBbdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XS5zb21lKGZ1bmN0aW9uIChzaWRlKSB7XG4gICAgcmV0dXJuIG92ZXJmbG93W3NpZGVdID49IDA7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBoaWRlKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIHByZXZlbnRlZE9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnByZXZlbnRPdmVyZmxvdztcbiAgdmFyIHJlZmVyZW5jZU92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICBlbGVtZW50Q29udGV4dDogJ3JlZmVyZW5jZSdcbiAgfSk7XG4gIHZhciBwb3BwZXJBbHRPdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgYWx0Qm91bmRhcnk6IHRydWVcbiAgfSk7XG4gIHZhciByZWZlcmVuY2VDbGlwcGluZ09mZnNldHMgPSBnZXRTaWRlT2Zmc2V0cyhyZWZlcmVuY2VPdmVyZmxvdywgcmVmZXJlbmNlUmVjdCk7XG4gIHZhciBwb3BwZXJFc2NhcGVPZmZzZXRzID0gZ2V0U2lkZU9mZnNldHMocG9wcGVyQWx0T3ZlcmZsb3csIHBvcHBlclJlY3QsIHByZXZlbnRlZE9mZnNldHMpO1xuICB2YXIgaXNSZWZlcmVuY2VIaWRkZW4gPSBpc0FueVNpZGVGdWxseUNsaXBwZWQocmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzKTtcbiAgdmFyIGhhc1BvcHBlckVzY2FwZWQgPSBpc0FueVNpZGVGdWxseUNsaXBwZWQocG9wcGVyRXNjYXBlT2Zmc2V0cyk7XG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSB7XG4gICAgcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzOiByZWZlcmVuY2VDbGlwcGluZ09mZnNldHMsXG4gICAgcG9wcGVyRXNjYXBlT2Zmc2V0czogcG9wcGVyRXNjYXBlT2Zmc2V0cyxcbiAgICBpc1JlZmVyZW5jZUhpZGRlbjogaXNSZWZlcmVuY2VIaWRkZW4sXG4gICAgaGFzUG9wcGVyRXNjYXBlZDogaGFzUG9wcGVyRXNjYXBlZFxuICB9O1xuICBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyLCB7XG4gICAgJ2RhdGEtcG9wcGVyLXJlZmVyZW5jZS1oaWRkZW4nOiBpc1JlZmVyZW5jZUhpZGRlbixcbiAgICAnZGF0YS1wb3BwZXItZXNjYXBlZCc6IGhhc1BvcHBlckVzY2FwZWRcbiAgfSk7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdoaWRlJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydwcmV2ZW50T3ZlcmZsb3cnXSxcbiAgZm46IGhpZGVcbn07IiwgImltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBwbGFjZW1lbnRzIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlQW5kU2tpZGRpbmdUb1hZKHBsYWNlbWVudCwgcmVjdHMsIG9mZnNldCkge1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KTtcbiAgdmFyIGludmVydERpc3RhbmNlID0gW2xlZnQsIHRvcF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSA+PSAwID8gLTEgOiAxO1xuXG4gIHZhciBfcmVmID0gdHlwZW9mIG9mZnNldCA9PT0gJ2Z1bmN0aW9uJyA/IG9mZnNldChPYmplY3QuYXNzaWduKHt9LCByZWN0cywge1xuICAgIHBsYWNlbWVudDogcGxhY2VtZW50XG4gIH0pKSA6IG9mZnNldCxcbiAgICAgIHNraWRkaW5nID0gX3JlZlswXSxcbiAgICAgIGRpc3RhbmNlID0gX3JlZlsxXTtcblxuICBza2lkZGluZyA9IHNraWRkaW5nIHx8IDA7XG4gIGRpc3RhbmNlID0gKGRpc3RhbmNlIHx8IDApICogaW52ZXJ0RGlzdGFuY2U7XG4gIHJldHVybiBbbGVmdCwgcmlnaHRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMCA/IHtcbiAgICB4OiBkaXN0YW5jZSxcbiAgICB5OiBza2lkZGluZ1xuICB9IDoge1xuICAgIHg6IHNraWRkaW5nLFxuICAgIHk6IGRpc3RhbmNlXG4gIH07XG59XG5cbmZ1bmN0aW9uIG9mZnNldChfcmVmMikge1xuICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmMi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYyLm5hbWU7XG4gIHZhciBfb3B0aW9ucyRvZmZzZXQgPSBvcHRpb25zLm9mZnNldCxcbiAgICAgIG9mZnNldCA9IF9vcHRpb25zJG9mZnNldCA9PT0gdm9pZCAwID8gWzAsIDBdIDogX29wdGlvbnMkb2Zmc2V0O1xuICB2YXIgZGF0YSA9IHBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIGFjY1twbGFjZW1lbnRdID0gZGlzdGFuY2VBbmRTa2lkZGluZ1RvWFkocGxhY2VtZW50LCBzdGF0ZS5yZWN0cywgb2Zmc2V0KTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG4gIHZhciBfZGF0YSRzdGF0ZSRwbGFjZW1lbnQgPSBkYXRhW3N0YXRlLnBsYWNlbWVudF0sXG4gICAgICB4ID0gX2RhdGEkc3RhdGUkcGxhY2VtZW50LngsXG4gICAgICB5ID0gX2RhdGEkc3RhdGUkcGxhY2VtZW50Lnk7XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAhPSBudWxsKSB7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLnggKz0geDtcbiAgICBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMueSArPSB5O1xuICB9XG5cbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGRhdGE7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdvZmZzZXQnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICByZXF1aXJlczogWydwb3BwZXJPZmZzZXRzJ10sXG4gIGZuOiBvZmZzZXRcbn07IiwgImltcG9ydCBjb21wdXRlT2Zmc2V0cyBmcm9tIFwiLi4vdXRpbHMvY29tcHV0ZU9mZnNldHMuanNcIjtcblxuZnVuY3Rpb24gcG9wcGVyT2Zmc2V0cyhfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICAvLyBPZmZzZXRzIGFyZSB0aGUgYWN0dWFsIHBvc2l0aW9uIHRoZSBwb3BwZXIgbmVlZHMgdG8gaGF2ZSB0byBiZVxuICAvLyBwcm9wZXJseSBwb3NpdGlvbmVkIG5lYXIgaXRzIHJlZmVyZW5jZSBlbGVtZW50XG4gIC8vIFRoaXMgaXMgdGhlIG1vc3QgYmFzaWMgcGxhY2VtZW50LCBhbmQgd2lsbCBiZSBhZGp1c3RlZCBieVxuICAvLyB0aGUgbW9kaWZpZXJzIGluIHRoZSBuZXh0IHN0ZXBcbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGNvbXB1dGVPZmZzZXRzKHtcbiAgICByZWZlcmVuY2U6IHN0YXRlLnJlY3RzLnJlZmVyZW5jZSxcbiAgICBlbGVtZW50OiBzdGF0ZS5yZWN0cy5wb3BwZXIsXG4gICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgcGxhY2VtZW50OiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSk7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdwb3BwZXJPZmZzZXRzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdyZWFkJyxcbiAgZm46IHBvcHBlck9mZnNldHMsXG4gIGRhdGE6IHt9XG59OyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRBbHRBeGlzKGF4aXMpIHtcbiAgcmV0dXJuIGF4aXMgPT09ICd4JyA/ICd5JyA6ICd4Jztcbn0iLCAiaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgYm90dG9tLCBzdGFydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldEFsdEF4aXMgZnJvbSBcIi4uL3V0aWxzL2dldEFsdEF4aXMuanNcIjtcbmltcG9ydCB7IHdpdGhpbiwgd2l0aGluTWF4Q2xhbXAgfSBmcm9tIFwiLi4vdXRpbHMvd2l0aGluLmpzXCI7XG5pbXBvcnQgZ2V0TGF5b3V0UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IGdldEZyZXNoU2lkZU9iamVjdCBmcm9tIFwiLi4vdXRpbHMvZ2V0RnJlc2hTaWRlT2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBtaW4gYXMgbWF0aE1pbiwgbWF4IGFzIG1hdGhNYXggfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBwcmV2ZW50T3ZlcmZsb3coX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWU7XG4gIHZhciBfb3B0aW9ucyRtYWluQXhpcyA9IG9wdGlvbnMubWFpbkF4aXMsXG4gICAgICBjaGVja01haW5BeGlzID0gX29wdGlvbnMkbWFpbkF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRtYWluQXhpcyxcbiAgICAgIF9vcHRpb25zJGFsdEF4aXMgPSBvcHRpb25zLmFsdEF4aXMsXG4gICAgICBjaGVja0FsdEF4aXMgPSBfb3B0aW9ucyRhbHRBeGlzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9vcHRpb25zJGFsdEF4aXMsXG4gICAgICBib3VuZGFyeSA9IG9wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBvcHRpb25zLnJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcsXG4gICAgICBfb3B0aW9ucyR0ZXRoZXIgPSBvcHRpb25zLnRldGhlcixcbiAgICAgIHRldGhlciA9IF9vcHRpb25zJHRldGhlciA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHRldGhlcixcbiAgICAgIF9vcHRpb25zJHRldGhlck9mZnNldCA9IG9wdGlvbnMudGV0aGVyT2Zmc2V0LFxuICAgICAgdGV0aGVyT2Zmc2V0ID0gX29wdGlvbnMkdGV0aGVyT2Zmc2V0ID09PSB2b2lkIDAgPyAwIDogX29wdGlvbnMkdGV0aGVyT2Zmc2V0O1xuICB2YXIgb3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGJvdW5kYXJ5OiBib3VuZGFyeSxcbiAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICBwYWRkaW5nOiBwYWRkaW5nLFxuICAgIGFsdEJvdW5kYXJ5OiBhbHRCb3VuZGFyeVxuICB9KTtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciB2YXJpYXRpb24gPSBnZXRWYXJpYXRpb24oc3RhdGUucGxhY2VtZW50KTtcbiAgdmFyIGlzQmFzZVBsYWNlbWVudCA9ICF2YXJpYXRpb247XG4gIHZhciBtYWluQXhpcyA9IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KTtcbiAgdmFyIGFsdEF4aXMgPSBnZXRBbHRBeGlzKG1haW5BeGlzKTtcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHM7XG4gIHZhciByZWZlcmVuY2VSZWN0ID0gc3RhdGUucmVjdHMucmVmZXJlbmNlO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIHRldGhlck9mZnNldFZhbHVlID0gdHlwZW9mIHRldGhlck9mZnNldCA9PT0gJ2Z1bmN0aW9uJyA/IHRldGhlck9mZnNldChPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5yZWN0cywge1xuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pKSA6IHRldGhlck9mZnNldDtcbiAgdmFyIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZSA9IHR5cGVvZiB0ZXRoZXJPZmZzZXRWYWx1ZSA9PT0gJ251bWJlcicgPyB7XG4gICAgbWFpbkF4aXM6IHRldGhlck9mZnNldFZhbHVlLFxuICAgIGFsdEF4aXM6IHRldGhlck9mZnNldFZhbHVlXG4gIH0gOiBPYmplY3QuYXNzaWduKHtcbiAgICBtYWluQXhpczogMCxcbiAgICBhbHRBeGlzOiAwXG4gIH0sIHRldGhlck9mZnNldFZhbHVlKTtcbiAgdmFyIG9mZnNldE1vZGlmaWVyU3RhdGUgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldCA/IHN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0W3N0YXRlLnBsYWNlbWVudF0gOiBudWxsO1xuICB2YXIgZGF0YSA9IHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcblxuICBpZiAoIXBvcHBlck9mZnNldHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY2hlY2tNYWluQXhpcykge1xuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQ7XG5cbiAgICB2YXIgbWFpblNpZGUgPSBtYWluQXhpcyA9PT0gJ3knID8gdG9wIDogbGVmdDtcbiAgICB2YXIgYWx0U2lkZSA9IG1haW5BeGlzID09PSAneScgPyBib3R0b20gOiByaWdodDtcbiAgICB2YXIgbGVuID0gbWFpbkF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcbiAgICB2YXIgb2Zmc2V0ID0gcG9wcGVyT2Zmc2V0c1ttYWluQXhpc107XG4gICAgdmFyIG1pbiA9IG9mZnNldCArIG92ZXJmbG93W21haW5TaWRlXTtcbiAgICB2YXIgbWF4ID0gb2Zmc2V0IC0gb3ZlcmZsb3dbYWx0U2lkZV07XG4gICAgdmFyIGFkZGl0aXZlID0gdGV0aGVyID8gLXBvcHBlclJlY3RbbGVuXSAvIDIgOiAwO1xuICAgIHZhciBtaW5MZW4gPSB2YXJpYXRpb24gPT09IHN0YXJ0ID8gcmVmZXJlbmNlUmVjdFtsZW5dIDogcG9wcGVyUmVjdFtsZW5dO1xuICAgIHZhciBtYXhMZW4gPSB2YXJpYXRpb24gPT09IHN0YXJ0ID8gLXBvcHBlclJlY3RbbGVuXSA6IC1yZWZlcmVuY2VSZWN0W2xlbl07IC8vIFdlIG5lZWQgdG8gaW5jbHVkZSB0aGUgYXJyb3cgaW4gdGhlIGNhbGN1bGF0aW9uIHNvIHRoZSBhcnJvdyBkb2Vzbid0IGdvXG4gICAgLy8gb3V0c2lkZSB0aGUgcmVmZXJlbmNlIGJvdW5kc1xuXG4gICAgdmFyIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93O1xuICAgIHZhciBhcnJvd1JlY3QgPSB0ZXRoZXIgJiYgYXJyb3dFbGVtZW50ID8gZ2V0TGF5b3V0UmVjdChhcnJvd0VsZW1lbnQpIDoge1xuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9O1xuICAgIHZhciBhcnJvd1BhZGRpbmdPYmplY3QgPSBzdGF0ZS5tb2RpZmllcnNEYXRhWydhcnJvdyNwZXJzaXN0ZW50J10gPyBzdGF0ZS5tb2RpZmllcnNEYXRhWydhcnJvdyNwZXJzaXN0ZW50J10ucGFkZGluZyA6IGdldEZyZXNoU2lkZU9iamVjdCgpO1xuICAgIHZhciBhcnJvd1BhZGRpbmdNaW4gPSBhcnJvd1BhZGRpbmdPYmplY3RbbWFpblNpZGVdO1xuICAgIHZhciBhcnJvd1BhZGRpbmdNYXggPSBhcnJvd1BhZGRpbmdPYmplY3RbYWx0U2lkZV07IC8vIElmIHRoZSByZWZlcmVuY2UgbGVuZ3RoIGlzIHNtYWxsZXIgdGhhbiB0aGUgYXJyb3cgbGVuZ3RoLCB3ZSBkb24ndCB3YW50XG4gICAgLy8gdG8gaW5jbHVkZSBpdHMgZnVsbCBzaXplIGluIHRoZSBjYWxjdWxhdGlvbi4gSWYgdGhlIHJlZmVyZW5jZSBpcyBzbWFsbFxuICAgIC8vIGFuZCBuZWFyIHRoZSBlZGdlIG9mIGEgYm91bmRhcnksIHRoZSBwb3BwZXIgY2FuIG92ZXJmbG93IGV2ZW4gaWYgdGhlXG4gICAgLy8gcmVmZXJlbmNlIGlzIG5vdCBvdmVyZmxvd2luZyBhcyB3ZWxsIChlLmcuIHZpcnR1YWwgZWxlbWVudHMgd2l0aCBub1xuICAgIC8vIHdpZHRoIG9yIGhlaWdodClcblxuICAgIHZhciBhcnJvd0xlbiA9IHdpdGhpbigwLCByZWZlcmVuY2VSZWN0W2xlbl0sIGFycm93UmVjdFtsZW5dKTtcbiAgICB2YXIgbWluT2Zmc2V0ID0gaXNCYXNlUGxhY2VtZW50ID8gcmVmZXJlbmNlUmVjdFtsZW5dIC8gMiAtIGFkZGl0aXZlIC0gYXJyb3dMZW4gLSBhcnJvd1BhZGRpbmdNaW4gLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXMgOiBtaW5MZW4gLSBhcnJvd0xlbiAtIGFycm93UGFkZGluZ01pbiAtIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcztcbiAgICB2YXIgbWF4T2Zmc2V0ID0gaXNCYXNlUGxhY2VtZW50ID8gLXJlZmVyZW5jZVJlY3RbbGVuXSAvIDIgKyBhZGRpdGl2ZSArIGFycm93TGVuICsgYXJyb3dQYWRkaW5nTWF4ICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzIDogbWF4TGVuICsgYXJyb3dMZW4gKyBhcnJvd1BhZGRpbmdNYXggKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXM7XG4gICAgdmFyIGFycm93T2Zmc2V0UGFyZW50ID0gc3RhdGUuZWxlbWVudHMuYXJyb3cgJiYgZ2V0T2Zmc2V0UGFyZW50KHN0YXRlLmVsZW1lbnRzLmFycm93KTtcbiAgICB2YXIgY2xpZW50T2Zmc2V0ID0gYXJyb3dPZmZzZXRQYXJlbnQgPyBtYWluQXhpcyA9PT0gJ3knID8gYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50VG9wIHx8IDAgOiBhcnJvd09mZnNldFBhcmVudC5jbGllbnRMZWZ0IHx8IDAgOiAwO1xuICAgIHZhciBvZmZzZXRNb2RpZmllclZhbHVlID0gKF9vZmZzZXRNb2RpZmllclN0YXRlJCA9IG9mZnNldE1vZGlmaWVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG9mZnNldE1vZGlmaWVyU3RhdGVbbWFpbkF4aXNdKSAhPSBudWxsID8gX29mZnNldE1vZGlmaWVyU3RhdGUkIDogMDtcbiAgICB2YXIgdGV0aGVyTWluID0gb2Zmc2V0ICsgbWluT2Zmc2V0IC0gb2Zmc2V0TW9kaWZpZXJWYWx1ZSAtIGNsaWVudE9mZnNldDtcbiAgICB2YXIgdGV0aGVyTWF4ID0gb2Zmc2V0ICsgbWF4T2Zmc2V0IC0gb2Zmc2V0TW9kaWZpZXJWYWx1ZTtcbiAgICB2YXIgcHJldmVudGVkT2Zmc2V0ID0gd2l0aGluKHRldGhlciA/IG1hdGhNaW4obWluLCB0ZXRoZXJNaW4pIDogbWluLCBvZmZzZXQsIHRldGhlciA/IG1hdGhNYXgobWF4LCB0ZXRoZXJNYXgpIDogbWF4KTtcbiAgICBwb3BwZXJPZmZzZXRzW21haW5BeGlzXSA9IHByZXZlbnRlZE9mZnNldDtcbiAgICBkYXRhW21haW5BeGlzXSA9IHByZXZlbnRlZE9mZnNldCAtIG9mZnNldDtcbiAgfVxuXG4gIGlmIChjaGVja0FsdEF4aXMpIHtcbiAgICB2YXIgX29mZnNldE1vZGlmaWVyU3RhdGUkMjtcblxuICAgIHZhciBfbWFpblNpZGUgPSBtYWluQXhpcyA9PT0gJ3gnID8gdG9wIDogbGVmdDtcblxuICAgIHZhciBfYWx0U2lkZSA9IG1haW5BeGlzID09PSAneCcgPyBib3R0b20gOiByaWdodDtcblxuICAgIHZhciBfb2Zmc2V0ID0gcG9wcGVyT2Zmc2V0c1thbHRBeGlzXTtcblxuICAgIHZhciBfbGVuID0gYWx0QXhpcyA9PT0gJ3knID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gICAgdmFyIF9taW4gPSBfb2Zmc2V0ICsgb3ZlcmZsb3dbX21haW5TaWRlXTtcblxuICAgIHZhciBfbWF4ID0gX29mZnNldCAtIG92ZXJmbG93W19hbHRTaWRlXTtcblxuICAgIHZhciBpc09yaWdpblNpZGUgPSBbdG9wLCBsZWZ0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpICE9PSAtMTtcblxuICAgIHZhciBfb2Zmc2V0TW9kaWZpZXJWYWx1ZSA9IChfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyID0gb2Zmc2V0TW9kaWZpZXJTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogb2Zmc2V0TW9kaWZpZXJTdGF0ZVthbHRBeGlzXSkgIT0gbnVsbCA/IF9vZmZzZXRNb2RpZmllclN0YXRlJDIgOiAwO1xuXG4gICAgdmFyIF90ZXRoZXJNaW4gPSBpc09yaWdpblNpZGUgPyBfbWluIDogX29mZnNldCAtIHJlZmVyZW5jZVJlY3RbX2xlbl0gLSBwb3BwZXJSZWN0W19sZW5dIC0gX29mZnNldE1vZGlmaWVyVmFsdWUgKyBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUuYWx0QXhpcztcblxuICAgIHZhciBfdGV0aGVyTWF4ID0gaXNPcmlnaW5TaWRlID8gX29mZnNldCArIHJlZmVyZW5jZVJlY3RbX2xlbl0gKyBwb3BwZXJSZWN0W19sZW5dIC0gX29mZnNldE1vZGlmaWVyVmFsdWUgLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUuYWx0QXhpcyA6IF9tYXg7XG5cbiAgICB2YXIgX3ByZXZlbnRlZE9mZnNldCA9IHRldGhlciAmJiBpc09yaWdpblNpZGUgPyB3aXRoaW5NYXhDbGFtcChfdGV0aGVyTWluLCBfb2Zmc2V0LCBfdGV0aGVyTWF4KSA6IHdpdGhpbih0ZXRoZXIgPyBfdGV0aGVyTWluIDogX21pbiwgX29mZnNldCwgdGV0aGVyID8gX3RldGhlck1heCA6IF9tYXgpO1xuXG4gICAgcG9wcGVyT2Zmc2V0c1thbHRBeGlzXSA9IF9wcmV2ZW50ZWRPZmZzZXQ7XG4gICAgZGF0YVthbHRBeGlzXSA9IF9wcmV2ZW50ZWRPZmZzZXQgLSBfb2Zmc2V0O1xuICB9XG5cbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IGRhdGE7XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdwcmV2ZW50T3ZlcmZsb3cnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogcHJldmVudE92ZXJmbG93LFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ29mZnNldCddXG59OyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRIVE1MRWxlbWVudFNjcm9sbChlbGVtZW50KSB7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsTGVmdDogZWxlbWVudC5zY3JvbGxMZWZ0LFxuICAgIHNjcm9sbFRvcDogZWxlbWVudC5zY3JvbGxUb3BcbiAgfTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvd1Njcm9sbCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGwuanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldEhUTUxFbGVtZW50U2Nyb2xsIGZyb20gXCIuL2dldEhUTUxFbGVtZW50U2Nyb2xsLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXROb2RlU2Nyb2xsKG5vZGUpIHtcbiAgaWYgKG5vZGUgPT09IGdldFdpbmRvdyhub2RlKSB8fCAhaXNIVE1MRWxlbWVudChub2RlKSkge1xuICAgIHJldHVybiBnZXRXaW5kb3dTY3JvbGwobm9kZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGdldEhUTUxFbGVtZW50U2Nyb2xsKG5vZGUpO1xuICB9XG59IiwgImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZVNjcm9sbCBmcm9tIFwiLi9nZXROb2RlU2Nyb2xsLmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5cbmZ1bmN0aW9uIGlzRWxlbWVudFNjYWxlZChlbGVtZW50KSB7XG4gIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IHJvdW5kKHJlY3Qud2lkdGgpIC8gZWxlbWVudC5vZmZzZXRXaWR0aCB8fCAxO1xuICB2YXIgc2NhbGVZID0gcm91bmQocmVjdC5oZWlnaHQpIC8gZWxlbWVudC5vZmZzZXRIZWlnaHQgfHwgMTtcbiAgcmV0dXJuIHNjYWxlWCAhPT0gMSB8fCBzY2FsZVkgIT09IDE7XG59IC8vIFJldHVybnMgdGhlIGNvbXBvc2l0ZSByZWN0IG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gaXRzIG9mZnNldFBhcmVudC5cbi8vIENvbXBvc2l0ZSBtZWFucyBpdCB0YWtlcyBpbnRvIGFjY291bnQgdHJhbnNmb3JtcyBhcyB3ZWxsIGFzIGxheW91dC5cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRDb21wb3NpdGVSZWN0KGVsZW1lbnRPclZpcnR1YWxFbGVtZW50LCBvZmZzZXRQYXJlbnQsIGlzRml4ZWQpIHtcbiAgaWYgKGlzRml4ZWQgPT09IHZvaWQgMCkge1xuICAgIGlzRml4ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBpc09mZnNldFBhcmVudEFuRWxlbWVudCA9IGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIG9mZnNldFBhcmVudElzU2NhbGVkID0gaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGlzRWxlbWVudFNjYWxlZChvZmZzZXRQYXJlbnQpO1xuICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gZ2V0RG9jdW1lbnRFbGVtZW50KG9mZnNldFBhcmVudCk7XG4gIHZhciByZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnRPclZpcnR1YWxFbGVtZW50LCBvZmZzZXRQYXJlbnRJc1NjYWxlZCwgaXNGaXhlZCk7XG4gIHZhciBzY3JvbGwgPSB7XG4gICAgc2Nyb2xsTGVmdDogMCxcbiAgICBzY3JvbGxUb3A6IDBcbiAgfTtcbiAgdmFyIG9mZnNldHMgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgaWYgKGlzT2Zmc2V0UGFyZW50QW5FbGVtZW50IHx8ICFpc09mZnNldFBhcmVudEFuRWxlbWVudCAmJiAhaXNGaXhlZCkge1xuICAgIGlmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpICE9PSAnYm9keScgfHwgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy8xMDc4XG4gICAgaXNTY3JvbGxQYXJlbnQoZG9jdW1lbnRFbGVtZW50KSkge1xuICAgICAgc2Nyb2xsID0gZ2V0Tm9kZVNjcm9sbChvZmZzZXRQYXJlbnQpO1xuICAgIH1cblxuICAgIGlmIChpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCkpIHtcbiAgICAgIG9mZnNldHMgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3Qob2Zmc2V0UGFyZW50LCB0cnVlKTtcbiAgICAgIG9mZnNldHMueCArPSBvZmZzZXRQYXJlbnQuY2xpZW50TGVmdDtcbiAgICAgIG9mZnNldHMueSArPSBvZmZzZXRQYXJlbnQuY2xpZW50VG9wO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICBvZmZzZXRzLnggPSBnZXRXaW5kb3dTY3JvbGxCYXJYKGRvY3VtZW50RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiByZWN0LmxlZnQgKyBzY3JvbGwuc2Nyb2xsTGVmdCAtIG9mZnNldHMueCxcbiAgICB5OiByZWN0LnRvcCArIHNjcm9sbC5zY3JvbGxUb3AgLSBvZmZzZXRzLnksXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodFxuICB9O1xufSIsICJpbXBvcnQgeyBtb2RpZmllclBoYXNlcyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiOyAvLyBzb3VyY2U6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ5ODc1MjU1XG5cbmZ1bmN0aW9uIG9yZGVyKG1vZGlmaWVycykge1xuICB2YXIgbWFwID0gbmV3IE1hcCgpO1xuICB2YXIgdmlzaXRlZCA9IG5ldyBTZXQoKTtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBtb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICBtYXAuc2V0KG1vZGlmaWVyLm5hbWUsIG1vZGlmaWVyKTtcbiAgfSk7IC8vIE9uIHZpc2l0aW5nIG9iamVjdCwgY2hlY2sgZm9yIGl0cyBkZXBlbmRlbmNpZXMgYW5kIHZpc2l0IHRoZW0gcmVjdXJzaXZlbHlcblxuICBmdW5jdGlvbiBzb3J0KG1vZGlmaWVyKSB7XG4gICAgdmlzaXRlZC5hZGQobW9kaWZpZXIubmFtZSk7XG4gICAgdmFyIHJlcXVpcmVzID0gW10uY29uY2F0KG1vZGlmaWVyLnJlcXVpcmVzIHx8IFtdLCBtb2RpZmllci5yZXF1aXJlc0lmRXhpc3RzIHx8IFtdKTtcbiAgICByZXF1aXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChkZXApIHtcbiAgICAgIGlmICghdmlzaXRlZC5oYXMoZGVwKSkge1xuICAgICAgICB2YXIgZGVwTW9kaWZpZXIgPSBtYXAuZ2V0KGRlcCk7XG5cbiAgICAgICAgaWYgKGRlcE1vZGlmaWVyKSB7XG4gICAgICAgICAgc29ydChkZXBNb2RpZmllcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXN1bHQucHVzaChtb2RpZmllcik7XG4gIH1cblxuICBtb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICBpZiAoIXZpc2l0ZWQuaGFzKG1vZGlmaWVyLm5hbWUpKSB7XG4gICAgICAvLyBjaGVjayBmb3IgdmlzaXRlZCBvYmplY3RcbiAgICAgIHNvcnQobW9kaWZpZXIpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9yZGVyTW9kaWZpZXJzKG1vZGlmaWVycykge1xuICAvLyBvcmRlciBiYXNlZCBvbiBkZXBlbmRlbmNpZXNcbiAgdmFyIG9yZGVyZWRNb2RpZmllcnMgPSBvcmRlcihtb2RpZmllcnMpOyAvLyBvcmRlciBiYXNlZCBvbiBwaGFzZVxuXG4gIHJldHVybiBtb2RpZmllclBoYXNlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGhhc2UpIHtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChvcmRlcmVkTW9kaWZpZXJzLmZpbHRlcihmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICAgIHJldHVybiBtb2RpZmllci5waGFzZSA9PT0gcGhhc2U7XG4gICAgfSkpO1xuICB9LCBbXSk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlYm91bmNlKGZuKSB7XG4gIHZhciBwZW5kaW5nO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghcGVuZGluZykge1xuICAgICAgcGVuZGluZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHBlbmRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgcmVzb2x2ZShmbigpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGVuZGluZztcbiAgfTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVyZ2VCeU5hbWUobW9kaWZpZXJzKSB7XG4gIHZhciBtZXJnZWQgPSBtb2RpZmllcnMucmVkdWNlKGZ1bmN0aW9uIChtZXJnZWQsIGN1cnJlbnQpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBtZXJnZWRbY3VycmVudC5uYW1lXTtcbiAgICBtZXJnZWRbY3VycmVudC5uYW1lXSA9IGV4aXN0aW5nID8gT2JqZWN0LmFzc2lnbih7fSwgZXhpc3RpbmcsIGN1cnJlbnQsIHtcbiAgICAgIG9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLm9wdGlvbnMsIGN1cnJlbnQub3B0aW9ucyksXG4gICAgICBkYXRhOiBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZy5kYXRhLCBjdXJyZW50LmRhdGEpXG4gICAgfSkgOiBjdXJyZW50O1xuICAgIHJldHVybiBtZXJnZWQ7XG4gIH0sIHt9KTsgLy8gSUUxMSBkb2VzIG5vdCBzdXBwb3J0IE9iamVjdC52YWx1ZXNcblxuICByZXR1cm4gT2JqZWN0LmtleXMobWVyZ2VkKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBtZXJnZWRba2V5XTtcbiAgfSk7XG59IiwgImltcG9ydCBnZXRDb21wb3NpdGVSZWN0IGZyb20gXCIuL2RvbS11dGlscy9nZXRDb21wb3NpdGVSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0TGF5b3V0UmVjdCBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGxpc3RTY3JvbGxQYXJlbnRzIGZyb20gXCIuL2RvbS11dGlscy9saXN0U2Nyb2xsUGFyZW50cy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IG9yZGVyTW9kaWZpZXJzIGZyb20gXCIuL3V0aWxzL29yZGVyTW9kaWZpZXJzLmpzXCI7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSBcIi4vdXRpbHMvZGVib3VuY2UuanNcIjtcbmltcG9ydCB2YWxpZGF0ZU1vZGlmaWVycyBmcm9tIFwiLi91dGlscy92YWxpZGF0ZU1vZGlmaWVycy5qc1wiO1xuaW1wb3J0IHVuaXF1ZUJ5IGZyb20gXCIuL3V0aWxzL3VuaXF1ZUJ5LmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgbWVyZ2VCeU5hbWUgZnJvbSBcIi4vdXRpbHMvbWVyZ2VCeU5hbWUuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi91dGlscy9kZXRlY3RPdmVyZmxvdy5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCB7IGF1dG8gfSBmcm9tIFwiLi9lbnVtcy5qc1wiO1xudmFyIElOVkFMSURfRUxFTUVOVF9FUlJPUiA9ICdQb3BwZXI6IEludmFsaWQgcmVmZXJlbmNlIG9yIHBvcHBlciBhcmd1bWVudCBwcm92aWRlZC4gVGhleSBtdXN0IGJlIGVpdGhlciBhIERPTSBlbGVtZW50IG9yIHZpcnR1YWwgZWxlbWVudC4nO1xudmFyIElORklOSVRFX0xPT1BfRVJST1IgPSAnUG9wcGVyOiBBbiBpbmZpbml0ZSBsb29wIGluIHRoZSBtb2RpZmllcnMgY3ljbGUgaGFzIGJlZW4gZGV0ZWN0ZWQhIFRoZSBjeWNsZSBoYXMgYmVlbiBpbnRlcnJ1cHRlZCB0byBwcmV2ZW50IGEgYnJvd3NlciBjcmFzaC4nO1xudmFyIERFRkFVTFRfT1BUSU9OUyA9IHtcbiAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgbW9kaWZpZXJzOiBbXSxcbiAgc3RyYXRlZ3k6ICdhYnNvbHV0ZSdcbn07XG5cbmZ1bmN0aW9uIGFyZVZhbGlkRWxlbWVudHMoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gIWFyZ3Muc29tZShmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiAhKGVsZW1lbnQgJiYgdHlwZW9mIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID09PSAnZnVuY3Rpb24nKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3BwZXJHZW5lcmF0b3IoZ2VuZXJhdG9yT3B0aW9ucykge1xuICBpZiAoZ2VuZXJhdG9yT3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgZ2VuZXJhdG9yT3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9nZW5lcmF0b3JPcHRpb25zID0gZ2VuZXJhdG9yT3B0aW9ucyxcbiAgICAgIF9nZW5lcmF0b3JPcHRpb25zJGRlZiA9IF9nZW5lcmF0b3JPcHRpb25zLmRlZmF1bHRNb2RpZmllcnMsXG4gICAgICBkZWZhdWx0TW9kaWZpZXJzID0gX2dlbmVyYXRvck9wdGlvbnMkZGVmID09PSB2b2lkIDAgPyBbXSA6IF9nZW5lcmF0b3JPcHRpb25zJGRlZixcbiAgICAgIF9nZW5lcmF0b3JPcHRpb25zJGRlZjIgPSBfZ2VuZXJhdG9yT3B0aW9ucy5kZWZhdWx0T3B0aW9ucyxcbiAgICAgIGRlZmF1bHRPcHRpb25zID0gX2dlbmVyYXRvck9wdGlvbnMkZGVmMiA9PT0gdm9pZCAwID8gREVGQVVMVF9PUFRJT05TIDogX2dlbmVyYXRvck9wdGlvbnMkZGVmMjtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZVBvcHBlcihyZWZlcmVuY2UsIHBvcHBlciwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcbiAgICB9XG5cbiAgICB2YXIgc3RhdGUgPSB7XG4gICAgICBwbGFjZW1lbnQ6ICdib3R0b20nLFxuICAgICAgb3JkZXJlZE1vZGlmaWVyczogW10sXG4gICAgICBvcHRpb25zOiBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX09QVElPTlMsIGRlZmF1bHRPcHRpb25zKSxcbiAgICAgIG1vZGlmaWVyc0RhdGE6IHt9LFxuICAgICAgZWxlbWVudHM6IHtcbiAgICAgICAgcmVmZXJlbmNlOiByZWZlcmVuY2UsXG4gICAgICAgIHBvcHBlcjogcG9wcGVyXG4gICAgICB9LFxuICAgICAgYXR0cmlidXRlczoge30sXG4gICAgICBzdHlsZXM6IHt9XG4gICAgfTtcbiAgICB2YXIgZWZmZWN0Q2xlYW51cEZucyA9IFtdO1xuICAgIHZhciBpc0Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHZhciBpbnN0YW5jZSA9IHtcbiAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIHNldE9wdGlvbnMoc2V0T3B0aW9uc0FjdGlvbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzZXRPcHRpb25zQWN0aW9uID09PSAnZnVuY3Rpb24nID8gc2V0T3B0aW9uc0FjdGlvbihzdGF0ZS5vcHRpb25zKSA6IHNldE9wdGlvbnNBY3Rpb247XG4gICAgICAgIGNsZWFudXBNb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgc3RhdGUub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBzdGF0ZS5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgc3RhdGUuc2Nyb2xsUGFyZW50cyA9IHtcbiAgICAgICAgICByZWZlcmVuY2U6IGlzRWxlbWVudChyZWZlcmVuY2UpID8gbGlzdFNjcm9sbFBhcmVudHMocmVmZXJlbmNlKSA6IHJlZmVyZW5jZS5jb250ZXh0RWxlbWVudCA/IGxpc3RTY3JvbGxQYXJlbnRzKHJlZmVyZW5jZS5jb250ZXh0RWxlbWVudCkgOiBbXSxcbiAgICAgICAgICBwb3BwZXI6IGxpc3RTY3JvbGxQYXJlbnRzKHBvcHBlcilcbiAgICAgICAgfTsgLy8gT3JkZXJzIHRoZSBtb2RpZmllcnMgYmFzZWQgb24gdGhlaXIgZGVwZW5kZW5jaWVzIGFuZCBgcGhhc2VgXG4gICAgICAgIC8vIHByb3BlcnRpZXNcblxuICAgICAgICB2YXIgb3JkZXJlZE1vZGlmaWVycyA9IG9yZGVyTW9kaWZpZXJzKG1lcmdlQnlOYW1lKFtdLmNvbmNhdChkZWZhdWx0TW9kaWZpZXJzLCBzdGF0ZS5vcHRpb25zLm1vZGlmaWVycykpKTsgLy8gU3RyaXAgb3V0IGRpc2FibGVkIG1vZGlmaWVyc1xuXG4gICAgICAgIHN0YXRlLm9yZGVyZWRNb2RpZmllcnMgPSBvcmRlcmVkTW9kaWZpZXJzLmZpbHRlcihmdW5jdGlvbiAobSkge1xuICAgICAgICAgIHJldHVybiBtLmVuYWJsZWQ7XG4gICAgICAgIH0pOyAvLyBWYWxpZGF0ZSB0aGUgcHJvdmlkZWQgbW9kaWZpZXJzIHNvIHRoYXQgdGhlIGNvbnN1bWVyIHdpbGwgZ2V0IHdhcm5lZFxuICAgICAgICAvLyBpZiBvbmUgb2YgdGhlIG1vZGlmaWVycyBpcyBpbnZhbGlkIGZvciBhbnkgcmVhc29uXG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICAgIHZhciBtb2RpZmllcnMgPSB1bmlxdWVCeShbXS5jb25jYXQob3JkZXJlZE1vZGlmaWVycywgc3RhdGUub3B0aW9ucy5tb2RpZmllcnMpLCBmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBfcmVmLm5hbWU7XG4gICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YWxpZGF0ZU1vZGlmaWVycyhtb2RpZmllcnMpO1xuXG4gICAgICAgICAgaWYgKGdldEJhc2VQbGFjZW1lbnQoc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQpID09PSBhdXRvKSB7XG4gICAgICAgICAgICB2YXIgZmxpcE1vZGlmaWVyID0gc3RhdGUub3JkZXJlZE1vZGlmaWVycy5maW5kKGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgICAgICAgICB2YXIgbmFtZSA9IF9yZWYyLm5hbWU7XG4gICAgICAgICAgICAgIHJldHVybiBuYW1lID09PSAnZmxpcCc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFmbGlwTW9kaWZpZXIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihbJ1BvcHBlcjogXCJhdXRvXCIgcGxhY2VtZW50cyByZXF1aXJlIHRoZSBcImZsaXBcIiBtb2RpZmllciBiZScsICdwcmVzZW50IGFuZCBlbmFibGVkIHRvIHdvcmsuJ10uam9pbignICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHBvcHBlciksXG4gICAgICAgICAgICAgIG1hcmdpblRvcCA9IF9nZXRDb21wdXRlZFN0eWxlLm1hcmdpblRvcCxcbiAgICAgICAgICAgICAgbWFyZ2luUmlnaHQgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5tYXJnaW5SaWdodCxcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tID0gX2dldENvbXB1dGVkU3R5bGUubWFyZ2luQm90dG9tLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0ID0gX2dldENvbXB1dGVkU3R5bGUubWFyZ2luTGVmdDsgLy8gV2Ugbm8gbG9uZ2VyIHRha2UgaW50byBhY2NvdW50IGBtYXJnaW5zYCBvbiB0aGUgcG9wcGVyLCBhbmQgaXQgY2FuXG4gICAgICAgICAgLy8gY2F1c2UgYnVncyB3aXRoIHBvc2l0aW9uaW5nLCBzbyB3ZSdsbCB3YXJuIHRoZSBjb25zdW1lclxuXG5cbiAgICAgICAgICBpZiAoW21hcmdpblRvcCwgbWFyZ2luUmlnaHQsIG1hcmdpbkJvdHRvbSwgbWFyZ2luTGVmdF0uc29tZShmdW5jdGlvbiAobWFyZ2luKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChtYXJnaW4pO1xuICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oWydQb3BwZXI6IENTUyBcIm1hcmdpblwiIHN0eWxlcyBjYW5ub3QgYmUgdXNlZCB0byBhcHBseSBwYWRkaW5nJywgJ2JldHdlZW4gdGhlIHBvcHBlciBhbmQgaXRzIHJlZmVyZW5jZSBlbGVtZW50IG9yIGJvdW5kYXJ5LicsICdUbyByZXBsaWNhdGUgbWFyZ2luLCB1c2UgdGhlIGBvZmZzZXRgIG1vZGlmaWVyLCBhcyB3ZWxsIGFzJywgJ3RoZSBgcGFkZGluZ2Agb3B0aW9uIGluIHRoZSBgcHJldmVudE92ZXJmbG93YCBhbmQgYGZsaXBgJywgJ21vZGlmaWVycy4nXS5qb2luKCcgJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJ1bk1vZGlmaWVyRWZmZWN0cygpO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICB9LFxuICAgICAgLy8gU3luYyB1cGRhdGUgXHUyMDEzIGl0IHdpbGwgYWx3YXlzIGJlIGV4ZWN1dGVkLCBldmVuIGlmIG5vdCBuZWNlc3NhcnkuIFRoaXNcbiAgICAgIC8vIGlzIHVzZWZ1bCBmb3IgbG93IGZyZXF1ZW5jeSB1cGRhdGVzIHdoZXJlIHN5bmMgYmVoYXZpb3Igc2ltcGxpZmllcyB0aGVcbiAgICAgIC8vIGxvZ2ljLlxuICAgICAgLy8gRm9yIGhpZ2ggZnJlcXVlbmN5IHVwZGF0ZXMgKGUuZy4gYHJlc2l6ZWAgYW5kIGBzY3JvbGxgIGV2ZW50cyksIGFsd2F5c1xuICAgICAgLy8gcHJlZmVyIHRoZSBhc3luYyBQb3BwZXIjdXBkYXRlIG1ldGhvZFxuICAgICAgZm9yY2VVcGRhdGU6IGZ1bmN0aW9uIGZvcmNlVXBkYXRlKCkge1xuICAgICAgICBpZiAoaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX3N0YXRlJGVsZW1lbnRzID0gc3RhdGUuZWxlbWVudHMsXG4gICAgICAgICAgICByZWZlcmVuY2UgPSBfc3RhdGUkZWxlbWVudHMucmVmZXJlbmNlLFxuICAgICAgICAgICAgcG9wcGVyID0gX3N0YXRlJGVsZW1lbnRzLnBvcHBlcjsgLy8gRG9uJ3QgcHJvY2VlZCBpZiBgcmVmZXJlbmNlYCBvciBgcG9wcGVyYCBhcmUgbm90IHZhbGlkIGVsZW1lbnRzXG4gICAgICAgIC8vIGFueW1vcmVcblxuICAgICAgICBpZiAoIWFyZVZhbGlkRWxlbWVudHMocmVmZXJlbmNlLCBwb3BwZXIpKSB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihJTlZBTElEX0VMRU1FTlRfRVJST1IpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBTdG9yZSB0aGUgcmVmZXJlbmNlIGFuZCBwb3BwZXIgcmVjdHMgdG8gYmUgcmVhZCBieSBtb2RpZmllcnNcblxuXG4gICAgICAgIHN0YXRlLnJlY3RzID0ge1xuICAgICAgICAgIHJlZmVyZW5jZTogZ2V0Q29tcG9zaXRlUmVjdChyZWZlcmVuY2UsIGdldE9mZnNldFBhcmVudChwb3BwZXIpLCBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5ID09PSAnZml4ZWQnKSxcbiAgICAgICAgICBwb3BwZXI6IGdldExheW91dFJlY3QocG9wcGVyKVxuICAgICAgICB9OyAvLyBNb2RpZmllcnMgaGF2ZSB0aGUgYWJpbGl0eSB0byByZXNldCB0aGUgY3VycmVudCB1cGRhdGUgY3ljbGUuIFRoZVxuICAgICAgICAvLyBtb3N0IGNvbW1vbiB1c2UgY2FzZSBmb3IgdGhpcyBpcyB0aGUgYGZsaXBgIG1vZGlmaWVyIGNoYW5naW5nIHRoZVxuICAgICAgICAvLyBwbGFjZW1lbnQsIHdoaWNoIHRoZW4gbmVlZHMgdG8gcmUtcnVuIGFsbCB0aGUgbW9kaWZpZXJzLCBiZWNhdXNlIHRoZVxuICAgICAgICAvLyBsb2dpYyB3YXMgcHJldmlvdXNseSByYW4gZm9yIHRoZSBwcmV2aW91cyBwbGFjZW1lbnQgYW5kIGlzIHRoZXJlZm9yZVxuICAgICAgICAvLyBzdGFsZS9pbmNvcnJlY3RcblxuICAgICAgICBzdGF0ZS5yZXNldCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5wbGFjZW1lbnQgPSBzdGF0ZS5vcHRpb25zLnBsYWNlbWVudDsgLy8gT24gZWFjaCB1cGRhdGUgY3ljbGUsIHRoZSBgbW9kaWZpZXJzRGF0YWAgcHJvcGVydHkgZm9yIGVhY2ggbW9kaWZpZXJcbiAgICAgICAgLy8gaXMgZmlsbGVkIHdpdGggdGhlIGluaXRpYWwgZGF0YSBzcGVjaWZpZWQgYnkgdGhlIG1vZGlmaWVyLiBUaGlzIG1lYW5zXG4gICAgICAgIC8vIGl0IGRvZXNuJ3QgcGVyc2lzdCBhbmQgaXMgZnJlc2ggb24gZWFjaCB1cGRhdGUuXG4gICAgICAgIC8vIFRvIGVuc3VyZSBwZXJzaXN0ZW50IGRhdGEsIHVzZSBgJHtuYW1lfSNwZXJzaXN0ZW50YFxuXG4gICAgICAgIHN0YXRlLm9yZGVyZWRNb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGUubW9kaWZpZXJzRGF0YVttb2RpZmllci5uYW1lXSA9IE9iamVjdC5hc3NpZ24oe30sIG1vZGlmaWVyLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIF9fZGVidWdfbG9vcHNfXyA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0YXRlLm9yZGVyZWRNb2RpZmllcnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICAgICAgX19kZWJ1Z19sb29wc19fICs9IDE7XG5cbiAgICAgICAgICAgIGlmIChfX2RlYnVnX2xvb3BzX18gPiAxMDApIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihJTkZJTklURV9MT09QX0VSUk9SKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHN0YXRlLnJlc2V0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBzdGF0ZS5yZXNldCA9IGZhbHNlO1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBfc3RhdGUkb3JkZXJlZE1vZGlmaWUgPSBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzW2luZGV4XSxcbiAgICAgICAgICAgICAgZm4gPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUuZm4sXG4gICAgICAgICAgICAgIF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUub3B0aW9ucyxcbiAgICAgICAgICAgICAgX29wdGlvbnMgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyID09PSB2b2lkIDAgPyB7fSA6IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIsXG4gICAgICAgICAgICAgIG5hbWUgPSBfc3RhdGUkb3JkZXJlZE1vZGlmaWUubmFtZTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHN0YXRlID0gZm4oe1xuICAgICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IF9vcHRpb25zLFxuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2VcbiAgICAgICAgICAgIH0pIHx8IHN0YXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIEFzeW5jIGFuZCBvcHRpbWlzdGljYWxseSBvcHRpbWl6ZWQgdXBkYXRlIFx1MjAxMyBpdCB3aWxsIG5vdCBiZSBleGVjdXRlZCBpZlxuICAgICAgLy8gbm90IG5lY2Vzc2FyeSAoZGVib3VuY2VkIHRvIHJ1biBhdCBtb3N0IG9uY2UtcGVyLXRpY2spXG4gICAgICB1cGRhdGU6IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgaW5zdGFuY2UuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICByZXNvbHZlKHN0YXRlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFudXBNb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgaXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoIWFyZVZhbGlkRWxlbWVudHMocmVmZXJlbmNlLCBwb3BwZXIpKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoSU5WQUxJRF9FTEVNRU5UX0VSUk9SKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cblxuICAgIGluc3RhbmNlLnNldE9wdGlvbnMob3B0aW9ucykudGhlbihmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIGlmICghaXNEZXN0cm95ZWQgJiYgb3B0aW9ucy5vbkZpcnN0VXBkYXRlKSB7XG4gICAgICAgIG9wdGlvbnMub25GaXJzdFVwZGF0ZShzdGF0ZSk7XG4gICAgICB9XG4gICAgfSk7IC8vIE1vZGlmaWVycyBoYXZlIHRoZSBhYmlsaXR5IHRvIGV4ZWN1dGUgYXJiaXRyYXJ5IGNvZGUgYmVmb3JlIHRoZSBmaXJzdFxuICAgIC8vIHVwZGF0ZSBjeWNsZSBydW5zLiBUaGV5IHdpbGwgYmUgZXhlY3V0ZWQgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlIHVwZGF0ZVxuICAgIC8vIGN5Y2xlLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGEgbW9kaWZpZXIgYWRkcyBzb21lIHBlcnNpc3RlbnQgZGF0YSB0aGF0XG4gICAgLy8gb3RoZXIgbW9kaWZpZXJzIG5lZWQgdG8gdXNlLCBidXQgdGhlIG1vZGlmaWVyIGlzIHJ1biBhZnRlciB0aGUgZGVwZW5kZW50XG4gICAgLy8gb25lLlxuXG4gICAgZnVuY3Rpb24gcnVuTW9kaWZpZXJFZmZlY3RzKCkge1xuICAgICAgc3RhdGUub3JkZXJlZE1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICB2YXIgbmFtZSA9IF9yZWYzLm5hbWUsXG4gICAgICAgICAgICBfcmVmMyRvcHRpb25zID0gX3JlZjMub3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfcmVmMyRvcHRpb25zID09PSB2b2lkIDAgPyB7fSA6IF9yZWYzJG9wdGlvbnMsXG4gICAgICAgICAgICBlZmZlY3QgPSBfcmVmMy5lZmZlY3Q7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBlZmZlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgY2xlYW51cEZuID0gZWZmZWN0KHtcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2UsXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB2YXIgbm9vcEZuID0gZnVuY3Rpb24gbm9vcEZuKCkge307XG5cbiAgICAgICAgICBlZmZlY3RDbGVhbnVwRm5zLnB1c2goY2xlYW51cEZuIHx8IG5vb3BGbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBNb2RpZmllckVmZmVjdHMoKSB7XG4gICAgICBlZmZlY3RDbGVhbnVwRm5zLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfSk7XG4gICAgICBlZmZlY3RDbGVhbnVwRm5zID0gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9O1xufVxuZXhwb3J0IHZhciBjcmVhdGVQb3BwZXIgPSAvKiNfX1BVUkVfXyovcG9wcGVyR2VuZXJhdG9yKCk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IHsgZGV0ZWN0T3ZlcmZsb3cgfTsiLCAiaW1wb3J0IHsgcG9wcGVyR2VuZXJhdG9yLCBkZXRlY3RPdmVyZmxvdyB9IGZyb20gXCIuL2NyZWF0ZVBvcHBlci5qc1wiO1xuaW1wb3J0IGV2ZW50TGlzdGVuZXJzIGZyb20gXCIuL21vZGlmaWVycy9ldmVudExpc3RlbmVycy5qc1wiO1xuaW1wb3J0IHBvcHBlck9mZnNldHMgZnJvbSBcIi4vbW9kaWZpZXJzL3BvcHBlck9mZnNldHMuanNcIjtcbmltcG9ydCBjb21wdXRlU3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9jb21wdXRlU3R5bGVzLmpzXCI7XG5pbXBvcnQgYXBwbHlTdHlsZXMgZnJvbSBcIi4vbW9kaWZpZXJzL2FwcGx5U3R5bGVzLmpzXCI7XG5pbXBvcnQgb2Zmc2V0IGZyb20gXCIuL21vZGlmaWVycy9vZmZzZXQuanNcIjtcbmltcG9ydCBmbGlwIGZyb20gXCIuL21vZGlmaWVycy9mbGlwLmpzXCI7XG5pbXBvcnQgcHJldmVudE92ZXJmbG93IGZyb20gXCIuL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBhcnJvdyBmcm9tIFwiLi9tb2RpZmllcnMvYXJyb3cuanNcIjtcbmltcG9ydCBoaWRlIGZyb20gXCIuL21vZGlmaWVycy9oaWRlLmpzXCI7XG52YXIgZGVmYXVsdE1vZGlmaWVycyA9IFtldmVudExpc3RlbmVycywgcG9wcGVyT2Zmc2V0cywgY29tcHV0ZVN0eWxlcywgYXBwbHlTdHlsZXMsIG9mZnNldCwgZmxpcCwgcHJldmVudE92ZXJmbG93LCBhcnJvdywgaGlkZV07XG52YXIgY3JlYXRlUG9wcGVyID0gLyojX19QVVJFX18qL3BvcHBlckdlbmVyYXRvcih7XG4gIGRlZmF1bHRNb2RpZmllcnM6IGRlZmF1bHRNb2RpZmllcnNcbn0pOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGNyZWF0ZVBvcHBlciwgcG9wcGVyR2VuZXJhdG9yLCBkZWZhdWx0TW9kaWZpZXJzLCBkZXRlY3RPdmVyZmxvdyB9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGNyZWF0ZVBvcHBlciBhcyBjcmVhdGVQb3BwZXJMaXRlIH0gZnJvbSBcIi4vcG9wcGVyLWxpdGUuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgKiBmcm9tIFwiLi9tb2RpZmllcnMvaW5kZXguanNcIjsiLCAiZXhwb3J0IGNvbnN0IFJPVU5EX0FSUk9XID1cbiAgJzxzdmcgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjZcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0wIDZzMS43OTYtLjAxMyA0LjY3LTMuNjE1QzUuODUxLjkgNi45My4wMDYgOCAwYzEuMDctLjAwNiAyLjE0OC44ODcgMy4zNDMgMi4zODVDMTQuMjMzIDYuMDA1IDE2IDYgMTYgNkgwelwiPjwvc3ZnPic7XG5cbmV4cG9ydCBjb25zdCBCT1hfQ0xBU1MgPSBgX19OQU1FU1BBQ0VfUFJFRklYX18tYm94YDtcbmV4cG9ydCBjb25zdCBDT05URU5UX0NMQVNTID0gYF9fTkFNRVNQQUNFX1BSRUZJWF9fLWNvbnRlbnRgO1xuZXhwb3J0IGNvbnN0IEJBQ0tEUk9QX0NMQVNTID0gYF9fTkFNRVNQQUNFX1BSRUZJWF9fLWJhY2tkcm9wYDtcbmV4cG9ydCBjb25zdCBBUlJPV19DTEFTUyA9IGBfX05BTUVTUEFDRV9QUkVGSVhfXy1hcnJvd2A7XG5leHBvcnQgY29uc3QgU1ZHX0FSUk9XX0NMQVNTID0gYF9fTkFNRVNQQUNFX1BSRUZJWF9fLXN2Zy1hcnJvd2A7XG5cbmV4cG9ydCBjb25zdCBUT1VDSF9PUFRJT05TID0ge3Bhc3NpdmU6IHRydWUsIGNhcHR1cmU6IHRydWV9O1xuXG5leHBvcnQgY29uc3QgVElQUFlfREVGQVVMVF9BUFBFTkRfVE8gPSAoKSA9PiBkb2N1bWVudC5ib2R5O1xuIiwgImltcG9ydCB7QmFzZVBsYWNlbWVudCwgUGxhY2VtZW50fSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KFxuICBvYmo6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBrZXk6IHN0cmluZ1xuKTogYm9vbGVhbiB7XG4gIHJldHVybiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlQXRJbmRleE9yUmV0dXJuPFQ+KFxuICB2YWx1ZTogVCB8IFtUIHwgbnVsbCwgVCB8IG51bGxdLFxuICBpbmRleDogbnVtYmVyLFxuICBkZWZhdWx0VmFsdWU6IFQgfCBbVCwgVF1cbik6IFQge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBjb25zdCB2ID0gdmFsdWVbaW5kZXhdO1xuICAgIHJldHVybiB2ID09IG51bGxcbiAgICAgID8gQXJyYXkuaXNBcnJheShkZWZhdWx0VmFsdWUpXG4gICAgICAgID8gZGVmYXVsdFZhbHVlW2luZGV4XVxuICAgICAgICA6IGRlZmF1bHRWYWx1ZVxuICAgICAgOiB2O1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUeXBlKHZhbHVlOiBhbnksIHR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBzdHIgPSB7fS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgcmV0dXJuIHN0ci5pbmRleE9mKCdbb2JqZWN0JykgPT09IDAgJiYgc3RyLmluZGV4T2YoYCR7dHlwZX1dYCkgPiAtMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZVdpdGhBcmdzT3JSZXR1cm4odmFsdWU6IGFueSwgYXJnczogYW55W10pOiBhbnkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gdmFsdWUoLi4uYXJncykgOiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlPFQ+KFxuICBmbjogKGFyZzogVCkgPT4gdm9pZCxcbiAgbXM6IG51bWJlclxuKTogKGFyZzogVCkgPT4gdm9pZCB7XG4gIC8vIEF2b2lkIHdyYXBwaW5nIGluIGBzZXRUaW1lb3V0YCBpZiBtcyBpcyAwIGFueXdheVxuICBpZiAobXMgPT09IDApIHtcbiAgICByZXR1cm4gZm47XG4gIH1cblxuICBsZXQgdGltZW91dDogYW55O1xuXG4gIHJldHVybiAoYXJnKTogdm9pZCA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGZuKGFyZyk7XG4gICAgfSwgbXMpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvcGVydGllczxUPihvYmo6IFQsIGtleXM6IHN0cmluZ1tdKTogUGFydGlhbDxUPiB7XG4gIGNvbnN0IGNsb25lID0gey4uLm9ian07XG4gIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgZGVsZXRlIChjbG9uZSBhcyBhbnkpW2tleV07XG4gIH0pO1xuICByZXR1cm4gY2xvbmU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdEJ5U3BhY2VzKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIHJldHVybiB2YWx1ZS5zcGxpdCgvXFxzKy8pLmZpbHRlcihCb29sZWFuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVRvQXJyYXk8VD4odmFsdWU6IFQgfCBUW10pOiBUW10ge1xuICByZXR1cm4gKFtdIGFzIFRbXSkuY29uY2F0KHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHB1c2hJZlVuaXF1ZTxUPihhcnI6IFRbXSwgdmFsdWU6IFQpOiB2b2lkIHtcbiAgaWYgKGFyci5pbmRleE9mKHZhbHVlKSA9PT0gLTEpIHtcbiAgICBhcnIucHVzaCh2YWx1ZSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFB4SWZOdW1iZXIodmFsdWU6IHN0cmluZyB8IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInID8gYCR7dmFsdWV9cHhgIDogdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWU8VD4oYXJyOiBUW10pOiBUW10ge1xuICByZXR1cm4gYXJyLmZpbHRlcigoaXRlbSwgaW5kZXgpID0+IGFyci5pbmRleE9mKGl0ZW0pID09PSBpbmRleCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROdW1iZXIodmFsdWU6IHN0cmluZyB8IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInID8gdmFsdWUgOiBwYXJzZUZsb2F0KHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50OiBQbGFjZW1lbnQpOiBCYXNlUGxhY2VtZW50IHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzBdIGFzIEJhc2VQbGFjZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUZyb20odmFsdWU6IEFycmF5TGlrZTxhbnk+KTogYW55W10ge1xuICByZXR1cm4gW10uc2xpY2UuY2FsbCh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVVbmRlZmluZWRQcm9wcyhcbiAgb2JqOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuKTogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgaWYgKG9ialtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIChhY2MgYXMgYW55KVtrZXldID0gb2JqW2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuIiwgImltcG9ydCB7UmVmZXJlbmNlRWxlbWVudCwgVGFyZ2V0c30gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge1BvcHBlclRyZWVEYXRhfSBmcm9tICcuL3R5cGVzLWludGVybmFsJztcbmltcG9ydCB7YXJyYXlGcm9tLCBpc1R5cGUsIG5vcm1hbGl6ZVRvQXJyYXksIGdldEJhc2VQbGFjZW1lbnR9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZGl2KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50KHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgRWxlbWVudCB8IERvY3VtZW50RnJhZ21lbnQge1xuICByZXR1cm4gWydFbGVtZW50JywgJ0ZyYWdtZW50J10uc29tZSgodHlwZSkgPT4gaXNUeXBlKHZhbHVlLCB0eXBlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05vZGVMaXN0KHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgTm9kZUxpc3Qge1xuICByZXR1cm4gaXNUeXBlKHZhbHVlLCAnTm9kZUxpc3QnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTW91c2VFdmVudCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIE1vdXNlRXZlbnQge1xuICByZXR1cm4gaXNUeXBlKHZhbHVlLCAnTW91c2VFdmVudCcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWZlcmVuY2VFbGVtZW50KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZWZlcmVuY2VFbGVtZW50IHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl90aXBweSAmJiB2YWx1ZS5fdGlwcHkucmVmZXJlbmNlID09PSB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcnJheU9mRWxlbWVudHModmFsdWU6IFRhcmdldHMpOiBFbGVtZW50W10ge1xuICBpZiAoaXNFbGVtZW50KHZhbHVlKSkge1xuICAgIHJldHVybiBbdmFsdWVdO1xuICB9XG5cbiAgaWYgKGlzTm9kZUxpc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGFycmF5RnJvbSh2YWx1ZSk7XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gYXJyYXlGcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsdWUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFRyYW5zaXRpb25EdXJhdGlvbihcbiAgZWxzOiAoSFRNTERpdkVsZW1lbnQgfCBudWxsKVtdLFxuICB2YWx1ZTogbnVtYmVyXG4pOiB2b2lkIHtcbiAgZWxzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgaWYgKGVsKSB7XG4gICAgICBlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHt2YWx1ZX1tc2A7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFZpc2liaWxpdHlTdGF0ZShcbiAgZWxzOiAoSFRNTERpdkVsZW1lbnQgfCBudWxsKVtdLFxuICBzdGF0ZTogJ3Zpc2libGUnIHwgJ2hpZGRlbidcbik6IHZvaWQge1xuICBlbHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBpZiAoZWwpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScsIHN0YXRlKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3duZXJEb2N1bWVudChcbiAgZWxlbWVudE9yRWxlbWVudHM6IEVsZW1lbnQgfCBFbGVtZW50W11cbik6IERvY3VtZW50IHtcbiAgY29uc3QgW2VsZW1lbnRdID0gbm9ybWFsaXplVG9BcnJheShlbGVtZW50T3JFbGVtZW50cyk7XG5cbiAgLy8gRWxlbWVudHMgY3JlYXRlZCB2aWEgYSA8dGVtcGxhdGU+IGhhdmUgYW4gb3duZXJEb2N1bWVudCB3aXRoIG5vIHJlZmVyZW5jZSB0byB0aGUgYm9keVxuICByZXR1cm4gZWxlbWVudD8ub3duZXJEb2N1bWVudD8uYm9keSA/IGVsZW1lbnQub3duZXJEb2N1bWVudCA6IGRvY3VtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDdXJzb3JPdXRzaWRlSW50ZXJhY3RpdmVCb3JkZXIoXG4gIHBvcHBlclRyZWVEYXRhOiBQb3BwZXJUcmVlRGF0YVtdLFxuICBldmVudDogTW91c2VFdmVudFxuKTogYm9vbGVhbiB7XG4gIGNvbnN0IHtjbGllbnRYLCBjbGllbnRZfSA9IGV2ZW50O1xuXG4gIHJldHVybiBwb3BwZXJUcmVlRGF0YS5ldmVyeSgoe3BvcHBlclJlY3QsIHBvcHBlclN0YXRlLCBwcm9wc30pID0+IHtcbiAgICBjb25zdCB7aW50ZXJhY3RpdmVCb3JkZXJ9ID0gcHJvcHM7XG4gICAgY29uc3QgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQocG9wcGVyU3RhdGUucGxhY2VtZW50KTtcbiAgICBjb25zdCBvZmZzZXREYXRhID0gcG9wcGVyU3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQ7XG5cbiAgICBpZiAoIW9mZnNldERhdGEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHRvcERpc3RhbmNlID0gYmFzZVBsYWNlbWVudCA9PT0gJ2JvdHRvbScgPyBvZmZzZXREYXRhLnRvcCEueSA6IDA7XG4gICAgY29uc3QgYm90dG9tRGlzdGFuY2UgPSBiYXNlUGxhY2VtZW50ID09PSAndG9wJyA/IG9mZnNldERhdGEuYm90dG9tIS55IDogMDtcbiAgICBjb25zdCBsZWZ0RGlzdGFuY2UgPSBiYXNlUGxhY2VtZW50ID09PSAncmlnaHQnID8gb2Zmc2V0RGF0YS5sZWZ0IS54IDogMDtcbiAgICBjb25zdCByaWdodERpc3RhbmNlID0gYmFzZVBsYWNlbWVudCA9PT0gJ2xlZnQnID8gb2Zmc2V0RGF0YS5yaWdodCEueCA6IDA7XG5cbiAgICBjb25zdCBleGNlZWRzVG9wID1cbiAgICAgIHBvcHBlclJlY3QudG9wIC0gY2xpZW50WSArIHRvcERpc3RhbmNlID4gaW50ZXJhY3RpdmVCb3JkZXI7XG4gICAgY29uc3QgZXhjZWVkc0JvdHRvbSA9XG4gICAgICBjbGllbnRZIC0gcG9wcGVyUmVjdC5ib3R0b20gLSBib3R0b21EaXN0YW5jZSA+IGludGVyYWN0aXZlQm9yZGVyO1xuICAgIGNvbnN0IGV4Y2VlZHNMZWZ0ID1cbiAgICAgIHBvcHBlclJlY3QubGVmdCAtIGNsaWVudFggKyBsZWZ0RGlzdGFuY2UgPiBpbnRlcmFjdGl2ZUJvcmRlcjtcbiAgICBjb25zdCBleGNlZWRzUmlnaHQgPVxuICAgICAgY2xpZW50WCAtIHBvcHBlclJlY3QucmlnaHQgLSByaWdodERpc3RhbmNlID4gaW50ZXJhY3RpdmVCb3JkZXI7XG5cbiAgICByZXR1cm4gZXhjZWVkc1RvcCB8fCBleGNlZWRzQm90dG9tIHx8IGV4Y2VlZHNMZWZ0IHx8IGV4Y2VlZHNSaWdodDtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUcmFuc2l0aW9uRW5kTGlzdGVuZXIoXG4gIGJveDogSFRNTERpdkVsZW1lbnQsXG4gIGFjdGlvbjogJ2FkZCcgfCAncmVtb3ZlJyxcbiAgbGlzdGVuZXI6IChldmVudDogVHJhbnNpdGlvbkV2ZW50KSA9PiB2b2lkXG4pOiB2b2lkIHtcbiAgY29uc3QgbWV0aG9kID0gYCR7YWN0aW9ufUV2ZW50TGlzdGVuZXJgIGFzXG4gICAgfCAnYWRkRXZlbnRMaXN0ZW5lcidcbiAgICB8ICdyZW1vdmVFdmVudExpc3RlbmVyJztcblxuICAvLyBzb21lIGJyb3dzZXJzIGFwcGFyZW50bHkgc3VwcG9ydCBgdHJhbnNpdGlvbmAgKHVucHJlZml4ZWQpIGJ1dCBvbmx5IGZpcmVcbiAgLy8gYHdlYmtpdFRyYW5zaXRpb25FbmRgLi4uXG4gIFsndHJhbnNpdGlvbmVuZCcsICd3ZWJraXRUcmFuc2l0aW9uRW5kJ10uZm9yRWFjaCgoZXZlbnQpID0+IHtcbiAgICBib3hbbWV0aG9kXShldmVudCwgbGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcik7XG4gIH0pO1xufVxuXG4vKipcbiAqIENvbXBhcmVkIHRvIHh4eC5jb250YWlucywgdGhpcyBmdW5jdGlvbiB3b3JrcyBmb3IgZG9tIHN0cnVjdHVyZXMgd2l0aCBzaGFkb3dcbiAqIGRvbVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWN0dWFsQ29udGFpbnMocGFyZW50OiBFbGVtZW50LCBjaGlsZDogRWxlbWVudCk6IGJvb2xlYW4ge1xuICBsZXQgdGFyZ2V0ID0gY2hpbGQ7XG4gIHdoaWxlICh0YXJnZXQpIHtcbiAgICBpZiAocGFyZW50LmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0YXJnZXQgPSAodGFyZ2V0LmdldFJvb3ROb2RlPy4oKSBhcyBhbnkpPy5ob3N0O1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsICJpbXBvcnQge1RPVUNIX09QVElPTlN9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7aXNSZWZlcmVuY2VFbGVtZW50fSBmcm9tICcuL2RvbS11dGlscyc7XG5cbmV4cG9ydCBjb25zdCBjdXJyZW50SW5wdXQgPSB7aXNUb3VjaDogZmFsc2V9O1xubGV0IGxhc3RNb3VzZU1vdmVUaW1lID0gMDtcblxuLyoqXG4gKiBXaGVuIGEgYHRvdWNoc3RhcnRgIGV2ZW50IGlzIGZpcmVkLCBpdCdzIGFzc3VtZWQgdGhlIHVzZXIgaXMgdXNpbmcgdG91Y2hcbiAqIGlucHV0LiBXZSdsbCBiaW5kIGEgYG1vdXNlbW92ZWAgZXZlbnQgbGlzdGVuZXIgdG8gbGlzdGVuIGZvciBtb3VzZSBpbnB1dCBpblxuICogdGhlIGZ1dHVyZS4gVGhpcyB3YXksIHRoZSBgaXNUb3VjaGAgcHJvcGVydHkgaXMgZnVsbHkgZHluYW1pYyBhbmQgd2lsbCBoYW5kbGVcbiAqIGh5YnJpZCBkZXZpY2VzIHRoYXQgdXNlIGEgbWl4IG9mIHRvdWNoICsgbW91c2UgaW5wdXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvbkRvY3VtZW50VG91Y2hTdGFydCgpOiB2b2lkIHtcbiAgaWYgKGN1cnJlbnRJbnB1dC5pc1RvdWNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY3VycmVudElucHV0LmlzVG91Y2ggPSB0cnVlO1xuXG4gIGlmICh3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkRvY3VtZW50TW91c2VNb3ZlKTtcbiAgfVxufVxuXG4vKipcbiAqIFdoZW4gdHdvIGBtb3VzZW1vdmVgIGV2ZW50IGFyZSBmaXJlZCBjb25zZWN1dGl2ZWx5IHdpdGhpbiAyMG1zLCBpdCdzIGFzc3VtZWRcbiAqIHRoZSB1c2VyIGlzIHVzaW5nIG1vdXNlIGlucHV0IGFnYWluLiBgbW91c2Vtb3ZlYCBjYW4gZmlyZSBvbiB0b3VjaCBkZXZpY2VzIGFzXG4gKiB3ZWxsLCBidXQgdmVyeSByYXJlbHkgdGhhdCBxdWlja2x5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb25Eb2N1bWVudE1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgaWYgKG5vdyAtIGxhc3RNb3VzZU1vdmVUaW1lIDwgMjApIHtcbiAgICBjdXJyZW50SW5wdXQuaXNUb3VjaCA9IGZhbHNlO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Eb2N1bWVudE1vdXNlTW92ZSk7XG4gIH1cblxuICBsYXN0TW91c2VNb3ZlVGltZSA9IG5vdztcbn1cblxuLyoqXG4gKiBXaGVuIGFuIGVsZW1lbnQgaXMgaW4gZm9jdXMgYW5kIGhhcyBhIHRpcHB5LCBsZWF2aW5nIHRoZSB0YWIvd2luZG93IGFuZFxuICogcmV0dXJuaW5nIGNhdXNlcyBpdCB0byBzaG93IGFnYWluLiBGb3IgbW91c2UgdXNlcnMgdGhpcyBpcyB1bmV4cGVjdGVkLCBidXRcbiAqIGZvciBrZXlib2FyZCB1c2UgaXQgbWFrZXMgc2Vuc2UuXG4gKiBUT0RPOiBmaW5kIGEgYmV0dGVyIHRlY2huaXF1ZSB0byBzb2x2ZSB0aGlzIHByb2JsZW1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uV2luZG93Qmx1cigpOiB2b2lkIHtcbiAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuXG4gIGlmIChpc1JlZmVyZW5jZUVsZW1lbnQoYWN0aXZlRWxlbWVudCkpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGFjdGl2ZUVsZW1lbnQuX3RpcHB5ITtcblxuICAgIGlmIChhY3RpdmVFbGVtZW50LmJsdXIgJiYgIWluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSkge1xuICAgICAgYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJpbmRHbG9iYWxFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uRG9jdW1lbnRUb3VjaFN0YXJ0LCBUT1VDSF9PUFRJT05TKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbldpbmRvd0JsdXIpO1xufVxuIiwgImV4cG9ydCBjb25zdCBpc0Jyb3dzZXIgPVxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnO1xuXG5leHBvcnQgY29uc3QgaXNJRTExID0gaXNCcm93c2VyXG4gID8gLy8gQHRzLWlnbm9yZVxuICAgICEhd2luZG93Lm1zQ3J5cHRvXG4gIDogZmFsc2U7XG4iLCAiaW1wb3J0IHtUYXJnZXRzfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUxlYWtXYXJuaW5nKG1ldGhvZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdHh0ID0gbWV0aG9kID09PSAnZGVzdHJveScgPyAnbiBhbHJlYWR5LScgOiAnICc7XG5cbiAgcmV0dXJuIFtcbiAgICBgJHttZXRob2R9KCkgd2FzIGNhbGxlZCBvbiBhJHt0eHR9ZGVzdHJveWVkIGluc3RhbmNlLiBUaGlzIGlzIGEgbm8tb3AgYnV0YCxcbiAgICAnaW5kaWNhdGVzIGEgcG90ZW50aWFsIG1lbW9yeSBsZWFrLicsXG4gIF0uam9pbignICcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW4odmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHNwYWNlc0FuZFRhYnMgPSAvWyBcXHRdezIsfS9nO1xuICBjb25zdCBsaW5lU3RhcnRXaXRoU3BhY2VzID0gL15bIFxcdF0qL2dtO1xuXG4gIHJldHVybiB2YWx1ZVxuICAgIC5yZXBsYWNlKHNwYWNlc0FuZFRhYnMsICcgJylcbiAgICAucmVwbGFjZShsaW5lU3RhcnRXaXRoU3BhY2VzLCAnJylcbiAgICAudHJpbSgpO1xufVxuXG5mdW5jdGlvbiBnZXREZXZNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBjbGVhbihgXG4gICVjdGlwcHkuanNcblxuICAlYyR7Y2xlYW4obWVzc2FnZSl9XG5cbiAgJWNcdUQ4M0RcdURDNzdcdTIwMEQgVGhpcyBpcyBhIGRldmVsb3BtZW50LW9ubHkgbWVzc2FnZS4gSXQgd2lsbCBiZSByZW1vdmVkIGluIHByb2R1Y3Rpb24uXG4gIGApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBbXG4gICAgZ2V0RGV2TWVzc2FnZShtZXNzYWdlKSxcbiAgICAvLyB0aXRsZVxuICAgICdjb2xvcjogIzAwQzU4NDsgZm9udC1zaXplOiAxLjNlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7JyxcbiAgICAvLyBtZXNzYWdlXG4gICAgJ2xpbmUtaGVpZ2h0OiAxLjUnLFxuICAgIC8vIGZvb3RlclxuICAgICdjb2xvcjogI2E2YTA5NTsnLFxuICBdO1xufVxuXG4vLyBBc3N1bWUgd2FybmluZ3MgYW5kIGVycm9ycyBuZXZlciBoYXZlIHRoZSBzYW1lIG1lc3NhZ2VcbmxldCB2aXNpdGVkTWVzc2FnZXM6IFNldDxzdHJpbmc+O1xuaWYgKF9fREVWX18pIHtcbiAgcmVzZXRWaXNpdGVkTWVzc2FnZXMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0VmlzaXRlZE1lc3NhZ2VzKCk6IHZvaWQge1xuICB2aXNpdGVkTWVzc2FnZXMgPSBuZXcgU2V0KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3YXJuV2hlbihjb25kaXRpb246IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICBpZiAoY29uZGl0aW9uICYmICF2aXNpdGVkTWVzc2FnZXMuaGFzKG1lc3NhZ2UpKSB7XG4gICAgdmlzaXRlZE1lc3NhZ2VzLmFkZChtZXNzYWdlKTtcbiAgICBjb25zb2xlLndhcm4oLi4uZ2V0Rm9ybWF0dGVkTWVzc2FnZShtZXNzYWdlKSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yV2hlbihjb25kaXRpb246IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICBpZiAoY29uZGl0aW9uICYmICF2aXNpdGVkTWVzc2FnZXMuaGFzKG1lc3NhZ2UpKSB7XG4gICAgdmlzaXRlZE1lc3NhZ2VzLmFkZChtZXNzYWdlKTtcbiAgICBjb25zb2xlLmVycm9yKC4uLmdldEZvcm1hdHRlZE1lc3NhZ2UobWVzc2FnZSkpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVRhcmdldHModGFyZ2V0czogVGFyZ2V0cyk6IHZvaWQge1xuICBjb25zdCBkaWRQYXNzRmFsc3lWYWx1ZSA9ICF0YXJnZXRzO1xuICBjb25zdCBkaWRQYXNzUGxhaW5PYmplY3QgPVxuICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0YXJnZXRzKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScgJiZcbiAgICAhKHRhcmdldHMgYXMgYW55KS5hZGRFdmVudExpc3RlbmVyO1xuXG4gIGVycm9yV2hlbihcbiAgICBkaWRQYXNzRmFsc3lWYWx1ZSxcbiAgICBbXG4gICAgICAndGlwcHkoKSB3YXMgcGFzc2VkJyxcbiAgICAgICdgJyArIFN0cmluZyh0YXJnZXRzKSArICdgJyxcbiAgICAgICdhcyBpdHMgdGFyZ2V0cyAoZmlyc3QpIGFyZ3VtZW50LiBWYWxpZCB0eXBlcyBhcmU6IFN0cmluZywgRWxlbWVudCwnLFxuICAgICAgJ0VsZW1lbnRbXSwgb3IgTm9kZUxpc3QuJyxcbiAgICBdLmpvaW4oJyAnKVxuICApO1xuXG4gIGVycm9yV2hlbihcbiAgICBkaWRQYXNzUGxhaW5PYmplY3QsXG4gICAgW1xuICAgICAgJ3RpcHB5KCkgd2FzIHBhc3NlZCBhIHBsYWluIG9iamVjdCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFuIGFyZ3VtZW50JyxcbiAgICAgICdmb3IgdmlydHVhbCBwb3NpdGlvbmluZy4gVXNlIHByb3BzLmdldFJlZmVyZW5jZUNsaWVudFJlY3QgaW5zdGVhZC4nLFxuICAgIF0uam9pbignICcpXG4gICk7XG59XG4iLCAiaW1wb3J0IHtEZWZhdWx0UHJvcHMsIFBsdWdpbiwgUHJvcHMsIFJlZmVyZW5jZUVsZW1lbnQsIFRpcHB5fSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7XG4gIGhhc093blByb3BlcnR5LFxuICByZW1vdmVQcm9wZXJ0aWVzLFxuICBpbnZva2VXaXRoQXJnc09yUmV0dXJuLFxufSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7d2FybldoZW59IGZyb20gJy4vdmFsaWRhdGlvbic7XG5pbXBvcnQge1RJUFBZX0RFRkFVTFRfQVBQRU5EX1RPfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmNvbnN0IHBsdWdpblByb3BzID0ge1xuICBhbmltYXRlRmlsbDogZmFsc2UsXG4gIGZvbGxvd0N1cnNvcjogZmFsc2UsXG4gIGlubGluZVBvc2l0aW9uaW5nOiBmYWxzZSxcbiAgc3RpY2t5OiBmYWxzZSxcbn07XG5cbmNvbnN0IHJlbmRlclByb3BzID0ge1xuICBhbGxvd0hUTUw6IGZhbHNlLFxuICBhbmltYXRpb246ICdmYWRlJyxcbiAgYXJyb3c6IHRydWUsXG4gIGNvbnRlbnQ6ICcnLFxuICBpbmVydGlhOiBmYWxzZSxcbiAgbWF4V2lkdGg6IDM1MCxcbiAgcm9sZTogJ3Rvb2x0aXAnLFxuICB0aGVtZTogJycsXG4gIHpJbmRleDogOTk5OSxcbn07XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0UHJvcHM6IERlZmF1bHRQcm9wcyA9IHtcbiAgYXBwZW5kVG86IFRJUFBZX0RFRkFVTFRfQVBQRU5EX1RPLFxuICBhcmlhOiB7XG4gICAgY29udGVudDogJ2F1dG8nLFxuICAgIGV4cGFuZGVkOiAnYXV0bycsXG4gIH0sXG4gIGRlbGF5OiAwLFxuICBkdXJhdGlvbjogWzMwMCwgMjUwXSxcbiAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdDogbnVsbCxcbiAgaGlkZU9uQ2xpY2s6IHRydWUsXG4gIGlnbm9yZUF0dHJpYnV0ZXM6IGZhbHNlLFxuICBpbnRlcmFjdGl2ZTogZmFsc2UsXG4gIGludGVyYWN0aXZlQm9yZGVyOiAyLFxuICBpbnRlcmFjdGl2ZURlYm91bmNlOiAwLFxuICBtb3ZlVHJhbnNpdGlvbjogJycsXG4gIG9mZnNldDogWzAsIDEwXSxcbiAgb25BZnRlclVwZGF0ZSgpIHt9LFxuICBvbkJlZm9yZVVwZGF0ZSgpIHt9LFxuICBvbkNyZWF0ZSgpIHt9LFxuICBvbkRlc3Ryb3koKSB7fSxcbiAgb25IaWRkZW4oKSB7fSxcbiAgb25IaWRlKCkge30sXG4gIG9uTW91bnQoKSB7fSxcbiAgb25TaG93KCkge30sXG4gIG9uU2hvd24oKSB7fSxcbiAgb25UcmlnZ2VyKCkge30sXG4gIG9uVW50cmlnZ2VyKCkge30sXG4gIG9uQ2xpY2tPdXRzaWRlKCkge30sXG4gIHBsYWNlbWVudDogJ3RvcCcsXG4gIHBsdWdpbnM6IFtdLFxuICBwb3BwZXJPcHRpb25zOiB7fSxcbiAgcmVuZGVyOiBudWxsLFxuICBzaG93T25DcmVhdGU6IGZhbHNlLFxuICB0b3VjaDogdHJ1ZSxcbiAgdHJpZ2dlcjogJ21vdXNlZW50ZXIgZm9jdXMnLFxuICB0cmlnZ2VyVGFyZ2V0OiBudWxsLFxuICAuLi5wbHVnaW5Qcm9wcyxcbiAgLi4ucmVuZGVyUHJvcHMsXG59O1xuXG5jb25zdCBkZWZhdWx0S2V5cyA9IE9iamVjdC5rZXlzKGRlZmF1bHRQcm9wcyk7XG5cbmV4cG9ydCBjb25zdCBzZXREZWZhdWx0UHJvcHM6IFRpcHB5WydzZXREZWZhdWx0UHJvcHMnXSA9IChwYXJ0aWFsUHJvcHMpID0+IHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKF9fREVWX18pIHtcbiAgICB2YWxpZGF0ZVByb3BzKHBhcnRpYWxQcm9wcywgW10pO1xuICB9XG5cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHBhcnRpYWxQcm9wcykgYXMgQXJyYXk8a2V5b2YgRGVmYXVsdFByb3BzPjtcbiAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAoZGVmYXVsdFByb3BzIGFzIGFueSlba2V5XSA9IHBhcnRpYWxQcm9wc1trZXldO1xuICB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRlbmRlZFBhc3NlZFByb3BzKFxuICBwYXNzZWRQcm9wczogUGFydGlhbDxQcm9wcz4gJiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuKTogUGFydGlhbDxQcm9wcz4ge1xuICBjb25zdCBwbHVnaW5zID0gcGFzc2VkUHJvcHMucGx1Z2lucyB8fCBbXTtcbiAgY29uc3QgcGx1Z2luUHJvcHMgPSBwbHVnaW5zLnJlZHVjZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oKGFjYywgcGx1Z2luKSA9PiB7XG4gICAgY29uc3Qge25hbWUsIGRlZmF1bHRWYWx1ZX0gPSBwbHVnaW47XG5cbiAgICBpZiAobmFtZSkge1xuICAgICAgYWNjW25hbWVdID1cbiAgICAgICAgcGFzc2VkUHJvcHNbbmFtZV0gIT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gcGFzc2VkUHJvcHNbbmFtZV1cbiAgICAgICAgICA6IChkZWZhdWx0UHJvcHMgYXMgYW55KVtuYW1lXSA/PyBkZWZhdWx0VmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuXG4gIHJldHVybiB7XG4gICAgLi4ucGFzc2VkUHJvcHMsXG4gICAgLi4ucGx1Z2luUHJvcHMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhQXR0cmlidXRlUHJvcHMoXG4gIHJlZmVyZW5jZTogUmVmZXJlbmNlRWxlbWVudCxcbiAgcGx1Z2luczogUGx1Z2luW11cbik6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgY29uc3QgcHJvcEtleXMgPSBwbHVnaW5zXG4gICAgPyBPYmplY3Qua2V5cyhnZXRFeHRlbmRlZFBhc3NlZFByb3BzKHsuLi5kZWZhdWx0UHJvcHMsIHBsdWdpbnN9KSlcbiAgICA6IGRlZmF1bHRLZXlzO1xuXG4gIGNvbnN0IHByb3BzID0gcHJvcEtleXMucmVkdWNlKFxuICAgIChhY2M6IFBhcnRpYWw8UHJvcHM+ICYgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIGtleSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWVBc1N0cmluZyA9IChcbiAgICAgICAgcmVmZXJlbmNlLmdldEF0dHJpYnV0ZShgZGF0YS10aXBweS0ke2tleX1gKSB8fCAnJ1xuICAgICAgKS50cmltKCk7XG5cbiAgICAgIGlmICghdmFsdWVBc1N0cmluZykge1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5ID09PSAnY29udGVudCcpIHtcbiAgICAgICAgYWNjW2tleV0gPSB2YWx1ZUFzU3RyaW5nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhY2Nba2V5XSA9IEpTT04ucGFyc2UodmFsdWVBc1N0cmluZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlQXNTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LFxuICAgIHt9XG4gICk7XG5cbiAgcmV0dXJuIHByb3BzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXZhbHVhdGVQcm9wcyhcbiAgcmVmZXJlbmNlOiBSZWZlcmVuY2VFbGVtZW50LFxuICBwcm9wczogUHJvcHNcbik6IFByb3BzIHtcbiAgY29uc3Qgb3V0ID0ge1xuICAgIC4uLnByb3BzLFxuICAgIGNvbnRlbnQ6IGludm9rZVdpdGhBcmdzT3JSZXR1cm4ocHJvcHMuY29udGVudCwgW3JlZmVyZW5jZV0pLFxuICAgIC4uLihwcm9wcy5pZ25vcmVBdHRyaWJ1dGVzXG4gICAgICA/IHt9XG4gICAgICA6IGdldERhdGFBdHRyaWJ1dGVQcm9wcyhyZWZlcmVuY2UsIHByb3BzLnBsdWdpbnMpKSxcbiAgfTtcblxuICBvdXQuYXJpYSA9IHtcbiAgICAuLi5kZWZhdWx0UHJvcHMuYXJpYSxcbiAgICAuLi5vdXQuYXJpYSxcbiAgfTtcblxuICBvdXQuYXJpYSA9IHtcbiAgICBleHBhbmRlZDpcbiAgICAgIG91dC5hcmlhLmV4cGFuZGVkID09PSAnYXV0bycgPyBwcm9wcy5pbnRlcmFjdGl2ZSA6IG91dC5hcmlhLmV4cGFuZGVkLFxuICAgIGNvbnRlbnQ6XG4gICAgICBvdXQuYXJpYS5jb250ZW50ID09PSAnYXV0bydcbiAgICAgICAgPyBwcm9wcy5pbnRlcmFjdGl2ZVxuICAgICAgICAgID8gbnVsbFxuICAgICAgICAgIDogJ2Rlc2NyaWJlZGJ5J1xuICAgICAgICA6IG91dC5hcmlhLmNvbnRlbnQsXG4gIH07XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoXG4gIHBhcnRpYWxQcm9wczogUGFydGlhbDxQcm9wcz4gPSB7fSxcbiAgcGx1Z2luczogUGx1Z2luW10gPSBbXVxuKTogdm9pZCB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwYXJ0aWFsUHJvcHMpIGFzIEFycmF5PGtleW9mIFByb3BzPjtcbiAga2V5cy5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgY29uc3Qgbm9uUGx1Z2luUHJvcHMgPSByZW1vdmVQcm9wZXJ0aWVzKFxuICAgICAgZGVmYXVsdFByb3BzLFxuICAgICAgT2JqZWN0LmtleXMocGx1Z2luUHJvcHMpXG4gICAgKTtcblxuICAgIGxldCBkaWRQYXNzVW5rbm93blByb3AgPSAhaGFzT3duUHJvcGVydHkobm9uUGx1Z2luUHJvcHMsIHByb3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHByb3AgZXhpc3RzIGluIGBwbHVnaW5zYFxuICAgIGlmIChkaWRQYXNzVW5rbm93blByb3ApIHtcbiAgICAgIGRpZFBhc3NVbmtub3duUHJvcCA9XG4gICAgICAgIHBsdWdpbnMuZmlsdGVyKChwbHVnaW4pID0+IHBsdWdpbi5uYW1lID09PSBwcm9wKS5sZW5ndGggPT09IDA7XG4gICAgfVxuXG4gICAgd2FybldoZW4oXG4gICAgICBkaWRQYXNzVW5rbm93blByb3AsXG4gICAgICBbXG4gICAgICAgIGBcXGAke3Byb3B9XFxgYCxcbiAgICAgICAgXCJpcyBub3QgYSB2YWxpZCBwcm9wLiBZb3UgbWF5IGhhdmUgc3BlbGxlZCBpdCBpbmNvcnJlY3RseSwgb3IgaWYgaXQnc1wiLFxuICAgICAgICAnYSBwbHVnaW4sIGZvcmdvdCB0byBwYXNzIGl0IGluIGFuIGFycmF5IGFzIHByb3BzLnBsdWdpbnMuJyxcbiAgICAgICAgJ1xcblxcbicsXG4gICAgICAgICdBbGwgcHJvcHM6IGh0dHBzOi8vYXRvbWlrcy5naXRodWIuaW8vdGlwcHlqcy92Ni9hbGwtcHJvcHMvXFxuJyxcbiAgICAgICAgJ1BsdWdpbnM6IGh0dHBzOi8vYXRvbWlrcy5naXRodWIuaW8vdGlwcHlqcy92Ni9wbHVnaW5zLycsXG4gICAgICBdLmpvaW4oJyAnKVxuICAgICk7XG4gIH0pO1xufVxuIiwgImltcG9ydCB7XG4gIEFSUk9XX0NMQVNTLFxuICBCQUNLRFJPUF9DTEFTUyxcbiAgQk9YX0NMQVNTLFxuICBDT05URU5UX0NMQVNTLFxuICBTVkdfQVJST1dfQ0xBU1MsXG59IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7ZGl2LCBpc0VsZW1lbnR9IGZyb20gJy4vZG9tLXV0aWxzJztcbmltcG9ydCB7SW5zdGFuY2UsIFBvcHBlckVsZW1lbnQsIFByb3BzfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7UG9wcGVyQ2hpbGRyZW59IGZyb20gJy4vdHlwZXMtaW50ZXJuYWwnO1xuaW1wb3J0IHthcnJheUZyb219IGZyb20gJy4vdXRpbHMnO1xuXG4vLyBGaXJlZm94IGV4dGVuc2lvbnMgZG9uJ3QgYWxsb3cgLmlubmVySFRNTCA9IFwiLi4uXCIgcHJvcGVydHkuIFRoaXMgdHJpY2tzIGl0LlxuY29uc3QgaW5uZXJIVE1MID0gKCk6ICdpbm5lckhUTUwnID0+ICdpbm5lckhUTUwnO1xuXG5mdW5jdGlvbiBkYW5nZXJvdXNseVNldElubmVySFRNTChlbGVtZW50OiBFbGVtZW50LCBodG1sOiBzdHJpbmcpOiB2b2lkIHtcbiAgZWxlbWVudFtpbm5lckhUTUwoKV0gPSBodG1sO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJvd0VsZW1lbnQodmFsdWU6IFByb3BzWydhcnJvdyddKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBhcnJvdyA9IGRpdigpO1xuXG4gIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgIGFycm93LmNsYXNzTmFtZSA9IEFSUk9XX0NMQVNTO1xuICB9IGVsc2Uge1xuICAgIGFycm93LmNsYXNzTmFtZSA9IFNWR19BUlJPV19DTEFTUztcblxuICAgIGlmIChpc0VsZW1lbnQodmFsdWUpKSB7XG4gICAgICBhcnJvdy5hcHBlbmRDaGlsZCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MKGFycm93LCB2YWx1ZSBhcyBzdHJpbmcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhcnJvdztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldENvbnRlbnQoY29udGVudDogSFRNTERpdkVsZW1lbnQsIHByb3BzOiBQcm9wcyk6IHZvaWQge1xuICBpZiAoaXNFbGVtZW50KHByb3BzLmNvbnRlbnQpKSB7XG4gICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwoY29udGVudCwgJycpO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJvcHMuY29udGVudCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByb3BzLmNvbnRlbnQgIT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAocHJvcHMuYWxsb3dIVE1MKSB7XG4gICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTChjb250ZW50LCBwcm9wcy5jb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudC50ZXh0Q29udGVudCA9IHByb3BzLmNvbnRlbnQ7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGlsZHJlbihwb3BwZXI6IFBvcHBlckVsZW1lbnQpOiBQb3BwZXJDaGlsZHJlbiB7XG4gIGNvbnN0IGJveCA9IHBvcHBlci5maXJzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRGl2RWxlbWVudDtcbiAgY29uc3QgYm94Q2hpbGRyZW4gPSBhcnJheUZyb20oYm94LmNoaWxkcmVuKTtcblxuICByZXR1cm4ge1xuICAgIGJveCxcbiAgICBjb250ZW50OiBib3hDaGlsZHJlbi5maW5kKChub2RlKSA9PiBub2RlLmNsYXNzTGlzdC5jb250YWlucyhDT05URU5UX0NMQVNTKSksXG4gICAgYXJyb3c6IGJveENoaWxkcmVuLmZpbmQoXG4gICAgICAobm9kZSkgPT5cbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoQVJST1dfQ0xBU1MpIHx8XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFNWR19BUlJPV19DTEFTUylcbiAgICApLFxuICAgIGJhY2tkcm9wOiBib3hDaGlsZHJlbi5maW5kKChub2RlKSA9PlxuICAgICAgbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoQkFDS0RST1BfQ0xBU1MpXG4gICAgKSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihcbiAgaW5zdGFuY2U6IEluc3RhbmNlXG4pOiB7XG4gIHBvcHBlcjogUG9wcGVyRWxlbWVudDtcbiAgb25VcGRhdGU/OiAocHJldlByb3BzOiBQcm9wcywgbmV4dFByb3BzOiBQcm9wcykgPT4gdm9pZDtcbn0ge1xuICBjb25zdCBwb3BwZXIgPSBkaXYoKTtcblxuICBjb25zdCBib3ggPSBkaXYoKTtcbiAgYm94LmNsYXNzTmFtZSA9IEJPWF9DTEFTUztcbiAgYm94LnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScsICdoaWRkZW4nKTtcbiAgYm94LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcblxuICBjb25zdCBjb250ZW50ID0gZGl2KCk7XG4gIGNvbnRlbnQuY2xhc3NOYW1lID0gQ09OVEVOVF9DTEFTUztcbiAgY29udGVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCAnaGlkZGVuJyk7XG5cbiAgc2V0Q29udGVudChjb250ZW50LCBpbnN0YW5jZS5wcm9wcyk7XG5cbiAgcG9wcGVyLmFwcGVuZENoaWxkKGJveCk7XG4gIGJveC5hcHBlbmRDaGlsZChjb250ZW50KTtcblxuICBvblVwZGF0ZShpbnN0YW5jZS5wcm9wcywgaW5zdGFuY2UucHJvcHMpO1xuXG4gIGZ1bmN0aW9uIG9uVXBkYXRlKHByZXZQcm9wczogUHJvcHMsIG5leHRQcm9wczogUHJvcHMpOiB2b2lkIHtcbiAgICBjb25zdCB7Ym94LCBjb250ZW50LCBhcnJvd30gPSBnZXRDaGlsZHJlbihwb3BwZXIpO1xuXG4gICAgaWYgKG5leHRQcm9wcy50aGVtZSkge1xuICAgICAgYm94LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIG5leHRQcm9wcy50aGVtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJveC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG5leHRQcm9wcy5hbmltYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICBib3guc2V0QXR0cmlidXRlKCdkYXRhLWFuaW1hdGlvbicsIG5leHRQcm9wcy5hbmltYXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBib3gucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWFuaW1hdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChuZXh0UHJvcHMuaW5lcnRpYSkge1xuICAgICAgYm94LnNldEF0dHJpYnV0ZSgnZGF0YS1pbmVydGlhJywgJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBib3gucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWluZXJ0aWEnKTtcbiAgICB9XG5cbiAgICBib3guc3R5bGUubWF4V2lkdGggPVxuICAgICAgdHlwZW9mIG5leHRQcm9wcy5tYXhXaWR0aCA9PT0gJ251bWJlcidcbiAgICAgICAgPyBgJHtuZXh0UHJvcHMubWF4V2lkdGh9cHhgXG4gICAgICAgIDogbmV4dFByb3BzLm1heFdpZHRoO1xuXG4gICAgaWYgKG5leHRQcm9wcy5yb2xlKSB7XG4gICAgICBib3guc2V0QXR0cmlidXRlKCdyb2xlJywgbmV4dFByb3BzLnJvbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBib3gucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgcHJldlByb3BzLmNvbnRlbnQgIT09IG5leHRQcm9wcy5jb250ZW50IHx8XG4gICAgICBwcmV2UHJvcHMuYWxsb3dIVE1MICE9PSBuZXh0UHJvcHMuYWxsb3dIVE1MXG4gICAgKSB7XG4gICAgICBzZXRDb250ZW50KGNvbnRlbnQsIGluc3RhbmNlLnByb3BzKTtcbiAgICB9XG5cbiAgICBpZiAobmV4dFByb3BzLmFycm93KSB7XG4gICAgICBpZiAoIWFycm93KSB7XG4gICAgICAgIGJveC5hcHBlbmRDaGlsZChjcmVhdGVBcnJvd0VsZW1lbnQobmV4dFByb3BzLmFycm93KSk7XG4gICAgICB9IGVsc2UgaWYgKHByZXZQcm9wcy5hcnJvdyAhPT0gbmV4dFByb3BzLmFycm93KSB7XG4gICAgICAgIGJveC5yZW1vdmVDaGlsZChhcnJvdyk7XG4gICAgICAgIGJveC5hcHBlbmRDaGlsZChjcmVhdGVBcnJvd0VsZW1lbnQobmV4dFByb3BzLmFycm93KSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcnJvdykge1xuICAgICAgYm94LnJlbW92ZUNoaWxkKGFycm93ISk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwb3BwZXIsXG4gICAgb25VcGRhdGUsXG4gIH07XG59XG5cbi8vIFJ1bnRpbWUgY2hlY2sgdG8gaWRlbnRpZnkgaWYgdGhlIHJlbmRlciBmdW5jdGlvbiBpcyB0aGUgZGVmYXVsdCBvbmU7IHRoaXNcbi8vIHdheSB3ZSBjYW4gYXBwbHkgZGVmYXVsdCBDU1MgdHJhbnNpdGlvbnMgbG9naWMgYW5kIGl0IGNhbiBiZSB0cmVlLXNoYWtlbiBhd2F5XG5yZW5kZXIuJCR0aXBweSA9IHRydWU7XG4iLCAiaW1wb3J0IHtjcmVhdGVQb3BwZXIsIFN0cmljdE1vZGlmaWVycywgTW9kaWZpZXJ9IGZyb20gJ0Bwb3BwZXJqcy9jb3JlJztcbmltcG9ydCB7Y3VycmVudElucHV0fSBmcm9tICcuL2JpbmRHbG9iYWxFdmVudExpc3RlbmVycyc7XG5pbXBvcnQge2lzSUUxMX0gZnJvbSAnLi9icm93c2VyJztcbmltcG9ydCB7VElQUFlfREVGQVVMVF9BUFBFTkRfVE8sIFRPVUNIX09QVElPTlN9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7XG4gIGFjdHVhbENvbnRhaW5zLFxuICBkaXYsXG4gIGdldE93bmVyRG9jdW1lbnQsXG4gIGlzQ3Vyc29yT3V0c2lkZUludGVyYWN0aXZlQm9yZGVyLFxuICBpc01vdXNlRXZlbnQsXG4gIHNldFRyYW5zaXRpb25EdXJhdGlvbixcbiAgc2V0VmlzaWJpbGl0eVN0YXRlLFxuICB1cGRhdGVUcmFuc2l0aW9uRW5kTGlzdGVuZXIsXG59IGZyb20gJy4vZG9tLXV0aWxzJztcbmltcG9ydCB7ZGVmYXVsdFByb3BzLCBldmFsdWF0ZVByb3BzLCBnZXRFeHRlbmRlZFBhc3NlZFByb3BzfSBmcm9tICcuL3Byb3BzJztcbmltcG9ydCB7Z2V0Q2hpbGRyZW59IGZyb20gJy4vdGVtcGxhdGUnO1xuaW1wb3J0IHtcbiAgQ29udGVudCxcbiAgSW5zdGFuY2UsXG4gIExpZmVjeWNsZUhvb2tzLFxuICBQb3BwZXJFbGVtZW50LFxuICBQcm9wcyxcbiAgUmVmZXJlbmNlRWxlbWVudCxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge0xpc3RlbmVyT2JqZWN0LCBQb3BwZXJUcmVlRGF0YSwgUG9wcGVyQ2hpbGRyZW59IGZyb20gJy4vdHlwZXMtaW50ZXJuYWwnO1xuaW1wb3J0IHtcbiAgYXJyYXlGcm9tLFxuICBkZWJvdW5jZSxcbiAgZ2V0VmFsdWVBdEluZGV4T3JSZXR1cm4sXG4gIGludm9rZVdpdGhBcmdzT3JSZXR1cm4sXG4gIG5vcm1hbGl6ZVRvQXJyYXksXG4gIHB1c2hJZlVuaXF1ZSxcbiAgc3BsaXRCeVNwYWNlcyxcbiAgdW5pcXVlLFxuICByZW1vdmVVbmRlZmluZWRQcm9wcyxcbn0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQge2NyZWF0ZU1lbW9yeUxlYWtXYXJuaW5nLCBlcnJvcldoZW4sIHdhcm5XaGVufSBmcm9tICcuL3ZhbGlkYXRpb24nO1xuXG5sZXQgaWRDb3VudGVyID0gMTtcbmxldCBtb3VzZU1vdmVMaXN0ZW5lcnM6ICgoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQpW10gPSBbXTtcblxuLy8gVXNlZCBieSBgaGlkZUFsbCgpYFxuZXhwb3J0IGxldCBtb3VudGVkSW5zdGFuY2VzOiBJbnN0YW5jZVtdID0gW107XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVRpcHB5KFxuICByZWZlcmVuY2U6IFJlZmVyZW5jZUVsZW1lbnQsXG4gIHBhc3NlZFByb3BzOiBQYXJ0aWFsPFByb3BzPlxuKTogSW5zdGFuY2Uge1xuICBjb25zdCBwcm9wcyA9IGV2YWx1YXRlUHJvcHMocmVmZXJlbmNlLCB7XG4gICAgLi4uZGVmYXVsdFByb3BzLFxuICAgIC4uLmdldEV4dGVuZGVkUGFzc2VkUHJvcHMocmVtb3ZlVW5kZWZpbmVkUHJvcHMocGFzc2VkUHJvcHMpKSxcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFx1RDgzRFx1REQxMiBQcml2YXRlIG1lbWJlcnNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGxldCBzaG93VGltZW91dDogYW55O1xuICBsZXQgaGlkZVRpbWVvdXQ6IGFueTtcbiAgbGV0IHNjaGVkdWxlSGlkZUFuaW1hdGlvbkZyYW1lOiBudW1iZXI7XG4gIGxldCBpc1Zpc2libGVGcm9tQ2xpY2sgPSBmYWxzZTtcbiAgbGV0IGRpZEhpZGVEdWVUb0RvY3VtZW50TW91c2VEb3duID0gZmFsc2U7XG4gIGxldCBkaWRUb3VjaE1vdmUgPSBmYWxzZTtcbiAgbGV0IGlnbm9yZU9uRmlyc3RVcGRhdGUgPSBmYWxzZTtcbiAgbGV0IGxhc3RUcmlnZ2VyRXZlbnQ6IEV2ZW50IHwgdW5kZWZpbmVkO1xuICBsZXQgY3VycmVudFRyYW5zaXRpb25FbmRMaXN0ZW5lcjogKGV2ZW50OiBUcmFuc2l0aW9uRXZlbnQpID0+IHZvaWQ7XG4gIGxldCBvbkZpcnN0VXBkYXRlOiAoKSA9PiB2b2lkO1xuICBsZXQgbGlzdGVuZXJzOiBMaXN0ZW5lck9iamVjdFtdID0gW107XG4gIGxldCBkZWJvdW5jZWRPbk1vdXNlTW92ZSA9IGRlYm91bmNlKG9uTW91c2VNb3ZlLCBwcm9wcy5pbnRlcmFjdGl2ZURlYm91bmNlKTtcbiAgbGV0IGN1cnJlbnRUYXJnZXQ6IEVsZW1lbnQ7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFx1RDgzRFx1REQxMSBQdWJsaWMgbWVtYmVyc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgY29uc3QgaWQgPSBpZENvdW50ZXIrKztcbiAgY29uc3QgcG9wcGVySW5zdGFuY2UgPSBudWxsO1xuICBjb25zdCBwbHVnaW5zID0gdW5pcXVlKHByb3BzLnBsdWdpbnMpO1xuXG4gIGNvbnN0IHN0YXRlID0ge1xuICAgIC8vIElzIHRoZSBpbnN0YW5jZSBjdXJyZW50bHkgZW5hYmxlZD9cbiAgICBpc0VuYWJsZWQ6IHRydWUsXG4gICAgLy8gSXMgdGhlIHRpcHB5IGN1cnJlbnRseSBzaG93aW5nIGFuZCBub3QgdHJhbnNpdGlvbmluZyBvdXQ/XG4gICAgaXNWaXNpYmxlOiBmYWxzZSxcbiAgICAvLyBIYXMgdGhlIGluc3RhbmNlIGJlZW4gZGVzdHJveWVkP1xuICAgIGlzRGVzdHJveWVkOiBmYWxzZSxcbiAgICAvLyBJcyB0aGUgdGlwcHkgY3VycmVudGx5IG1vdW50ZWQgdG8gdGhlIERPTT9cbiAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgIC8vIEhhcyB0aGUgdGlwcHkgZmluaXNoZWQgdHJhbnNpdGlvbmluZyBpbj9cbiAgICBpc1Nob3duOiBmYWxzZSxcbiAgfTtcblxuICBjb25zdCBpbnN0YW5jZTogSW5zdGFuY2UgPSB7XG4gICAgLy8gcHJvcGVydGllc1xuICAgIGlkLFxuICAgIHJlZmVyZW5jZSxcbiAgICBwb3BwZXI6IGRpdigpLFxuICAgIHBvcHBlckluc3RhbmNlLFxuICAgIHByb3BzLFxuICAgIHN0YXRlLFxuICAgIHBsdWdpbnMsXG4gICAgLy8gbWV0aG9kc1xuICAgIGNsZWFyRGVsYXlUaW1lb3V0cyxcbiAgICBzZXRQcm9wcyxcbiAgICBzZXRDb250ZW50LFxuICAgIHNob3csXG4gICAgaGlkZSxcbiAgICBoaWRlV2l0aEludGVyYWN0aXZpdHksXG4gICAgZW5hYmxlLFxuICAgIGRpc2FibGUsXG4gICAgdW5tb3VudCxcbiAgICBkZXN0cm95LFxuICB9O1xuXG4gIC8vIFRPRE86IEludmVzdGlnYXRlIHdoeSB0aGlzIGVhcmx5IHJldHVybiBjYXVzZXMgYSBURFogZXJyb3IgaW4gdGhlIHRlc3RzIFx1MjAxNFxuICAvLyBpdCBkb2Vzbid0IHNlZW0gdG8gaGFwcGVuIGluIHRoZSBicm93c2VyXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIXByb3BzLnJlbmRlcikge1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBlcnJvcldoZW4odHJ1ZSwgJ3JlbmRlcigpIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiBzdXBwbGllZC4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gSW5pdGlhbCBtdXRhdGlvbnNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IHtwb3BwZXIsIG9uVXBkYXRlfSA9IHByb3BzLnJlbmRlcihpbnN0YW5jZSk7XG5cbiAgcG9wcGVyLnNldEF0dHJpYnV0ZSgnZGF0YS1fX05BTUVTUEFDRV9QUkVGSVhfXy1yb290JywgJycpO1xuICBwb3BwZXIuaWQgPSBgX19OQU1FU1BBQ0VfUFJFRklYX18tJHtpbnN0YW5jZS5pZH1gO1xuXG4gIGluc3RhbmNlLnBvcHBlciA9IHBvcHBlcjtcbiAgcmVmZXJlbmNlLl90aXBweSA9IGluc3RhbmNlO1xuICBwb3BwZXIuX3RpcHB5ID0gaW5zdGFuY2U7XG5cbiAgY29uc3QgcGx1Z2luc0hvb2tzID0gcGx1Z2lucy5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLmZuKGluc3RhbmNlKSk7XG4gIGNvbnN0IGhhc0FyaWFFeHBhbmRlZCA9IHJlZmVyZW5jZS5oYXNBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcblxuICBhZGRMaXN0ZW5lcnMoKTtcbiAgaGFuZGxlQXJpYUV4cGFuZGVkQXR0cmlidXRlKCk7XG4gIGhhbmRsZVN0eWxlcygpO1xuXG4gIGludm9rZUhvb2soJ29uQ3JlYXRlJywgW2luc3RhbmNlXSk7XG5cbiAgaWYgKHByb3BzLnNob3dPbkNyZWF0ZSkge1xuICAgIHNjaGVkdWxlU2hvdygpO1xuICB9XG5cbiAgLy8gUHJldmVudCBhIHRpcHB5IHdpdGggYSBkZWxheSBmcm9tIGhpZGluZyBpZiB0aGUgY3Vyc29yIGxlZnQgdGhlbiByZXR1cm5lZFxuICAvLyBiZWZvcmUgaXQgc3RhcnRlZCBoaWRpbmdcbiAgcG9wcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgaWYgKGluc3RhbmNlLnByb3BzLmludGVyYWN0aXZlICYmIGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSkge1xuICAgICAgaW5zdGFuY2UuY2xlYXJEZWxheVRpbWVvdXRzKCk7XG4gICAgfVxuICB9KTtcblxuICBwb3BwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICBpZiAoXG4gICAgICBpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSAmJlxuICAgICAgaW5zdGFuY2UucHJvcHMudHJpZ2dlci5pbmRleE9mKCdtb3VzZWVudGVyJykgPj0gMFxuICAgICkge1xuICAgICAgZ2V0RG9jdW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkZWJvdW5jZWRPbk1vdXNlTW92ZSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFx1RDgzRFx1REQxMiBQcml2YXRlIG1ldGhvZHNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGZ1bmN0aW9uIGdldE5vcm1hbGl6ZWRUb3VjaFNldHRpbmdzKCk6IFtzdHJpbmcgfCBib29sZWFuLCBudW1iZXJdIHtcbiAgICBjb25zdCB7dG91Y2h9ID0gaW5zdGFuY2UucHJvcHM7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodG91Y2gpID8gdG91Y2ggOiBbdG91Y2gsIDBdO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SXNDdXN0b21Ub3VjaEJlaGF2aW9yKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBnZXROb3JtYWxpemVkVG91Y2hTZXR0aW5ncygpWzBdID09PSAnaG9sZCc7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJc0RlZmF1bHRSZW5kZXJGbigpOiBib29sZWFuIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcmV0dXJuICEhaW5zdGFuY2UucHJvcHMucmVuZGVyPy4kJHRpcHB5O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudFRhcmdldCgpOiBFbGVtZW50IHtcbiAgICByZXR1cm4gY3VycmVudFRhcmdldCB8fCByZWZlcmVuY2U7XG4gIH1cblxuICBmdW5jdGlvbiBnZXREb2N1bWVudCgpOiBEb2N1bWVudCB7XG4gICAgY29uc3QgcGFyZW50ID0gZ2V0Q3VycmVudFRhcmdldCgpLnBhcmVudE5vZGUgYXMgRWxlbWVudDtcbiAgICByZXR1cm4gcGFyZW50ID8gZ2V0T3duZXJEb2N1bWVudChwYXJlbnQpIDogZG9jdW1lbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXREZWZhdWx0VGVtcGxhdGVDaGlsZHJlbigpOiBQb3BwZXJDaGlsZHJlbiB7XG4gICAgcmV0dXJuIGdldENoaWxkcmVuKHBvcHBlcik7XG4gIH1cblxuICBmdW5jdGlvbiBnZXREZWxheShpc1Nob3c6IGJvb2xlYW4pOiBudW1iZXIge1xuICAgIC8vIEZvciB0b3VjaCBvciBrZXlib2FyZCBpbnB1dCwgZm9yY2UgYDBgIGRlbGF5IGZvciBVWCByZWFzb25zXG4gICAgLy8gQWxzbyBpZiB0aGUgaW5zdGFuY2UgaXMgbW91bnRlZCBidXQgbm90IHZpc2libGUgKHRyYW5zaXRpb25pbmcgb3V0KSxcbiAgICAvLyBpZ25vcmUgZGVsYXlcbiAgICBpZiAoXG4gICAgICAoaW5zdGFuY2Uuc3RhdGUuaXNNb3VudGVkICYmICFpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGUpIHx8XG4gICAgICBjdXJyZW50SW5wdXQuaXNUb3VjaCB8fFxuICAgICAgKGxhc3RUcmlnZ2VyRXZlbnQgJiYgbGFzdFRyaWdnZXJFdmVudC50eXBlID09PSAnZm9jdXMnKVxuICAgICkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldFZhbHVlQXRJbmRleE9yUmV0dXJuKFxuICAgICAgaW5zdGFuY2UucHJvcHMuZGVsYXksXG4gICAgICBpc1Nob3cgPyAwIDogMSxcbiAgICAgIGRlZmF1bHRQcm9wcy5kZWxheVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVTdHlsZXMoZnJvbUhpZGUgPSBmYWxzZSk6IHZvaWQge1xuICAgIHBvcHBlci5zdHlsZS5wb2ludGVyRXZlbnRzID1cbiAgICAgIGluc3RhbmNlLnByb3BzLmludGVyYWN0aXZlICYmICFmcm9tSGlkZSA/ICcnIDogJ25vbmUnO1xuICAgIHBvcHBlci5zdHlsZS56SW5kZXggPSBgJHtpbnN0YW5jZS5wcm9wcy56SW5kZXh9YDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUhvb2soXG4gICAgaG9vazoga2V5b2YgTGlmZWN5Y2xlSG9va3MsXG4gICAgYXJnczogW0luc3RhbmNlLCBhbnk/XSxcbiAgICBzaG91bGRJbnZva2VQcm9wc0hvb2sgPSB0cnVlXG4gICk6IHZvaWQge1xuICAgIHBsdWdpbnNIb29rcy5mb3JFYWNoKChwbHVnaW5Ib29rcykgPT4ge1xuICAgICAgaWYgKHBsdWdpbkhvb2tzW2hvb2tdKSB7XG4gICAgICAgIHBsdWdpbkhvb2tzW2hvb2tdISguLi5hcmdzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChzaG91bGRJbnZva2VQcm9wc0hvb2spIHtcbiAgICAgIGluc3RhbmNlLnByb3BzW2hvb2tdKC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUFyaWFDb250ZW50QXR0cmlidXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IHthcmlhfSA9IGluc3RhbmNlLnByb3BzO1xuXG4gICAgaWYgKCFhcmlhLmNvbnRlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhdHRyID0gYGFyaWEtJHthcmlhLmNvbnRlbnR9YDtcbiAgICBjb25zdCBpZCA9IHBvcHBlci5pZDtcbiAgICBjb25zdCBub2RlcyA9IG5vcm1hbGl6ZVRvQXJyYXkoaW5zdGFuY2UucHJvcHMudHJpZ2dlclRhcmdldCB8fCByZWZlcmVuY2UpO1xuXG4gICAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoYXR0cik7XG5cbiAgICAgIGlmIChpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGUpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0ciwgY3VycmVudFZhbHVlID8gYCR7Y3VycmVudFZhbHVlfSAke2lkfWAgOiBpZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXh0VmFsdWUgPSBjdXJyZW50VmFsdWUgJiYgY3VycmVudFZhbHVlLnJlcGxhY2UoaWQsICcnKS50cmltKCk7XG5cbiAgICAgICAgaWYgKG5leHRWYWx1ZSkge1xuICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHIsIG5leHRWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUFyaWFFeHBhbmRlZEF0dHJpYnV0ZSgpOiB2b2lkIHtcbiAgICBpZiAoaGFzQXJpYUV4cGFuZGVkIHx8ICFpbnN0YW5jZS5wcm9wcy5hcmlhLmV4cGFuZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZXMgPSBub3JtYWxpemVUb0FycmF5KGluc3RhbmNlLnByb3BzLnRyaWdnZXJUYXJnZXQgfHwgcmVmZXJlbmNlKTtcblxuICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGlmIChpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcbiAgICAgICAgICAnYXJpYS1leHBhbmRlZCcsXG4gICAgICAgICAgaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlICYmIG5vZGUgPT09IGdldEN1cnJlbnRUYXJnZXQoKVxuICAgICAgICAgICAgPyAndHJ1ZSdcbiAgICAgICAgICAgIDogJ2ZhbHNlJ1xuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXBJbnRlcmFjdGl2ZU1vdXNlTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGdldERvY3VtZW50KCkucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZGVib3VuY2VkT25Nb3VzZU1vdmUpO1xuICAgIG1vdXNlTW92ZUxpc3RlbmVycyA9IG1vdXNlTW92ZUxpc3RlbmVycy5maWx0ZXIoXG4gICAgICAobGlzdGVuZXIpID0+IGxpc3RlbmVyICE9PSBkZWJvdW5jZWRPbk1vdXNlTW92ZVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRvY3VtZW50UHJlc3MoZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgLy8gTW92ZWQgZmluZ2VyIHRvIHNjcm9sbCBpbnN0ZWFkIG9mIGFuIGludGVudGlvbmFsIHRhcCBvdXRzaWRlXG4gICAgaWYgKGN1cnJlbnRJbnB1dC5pc1RvdWNoKSB7XG4gICAgICBpZiAoZGlkVG91Y2hNb3ZlIHx8IGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhY3R1YWxUYXJnZXQgPVxuICAgICAgKGV2ZW50LmNvbXBvc2VkUGF0aCAmJiBldmVudC5jb21wb3NlZFBhdGgoKVswXSkgfHwgZXZlbnQudGFyZ2V0O1xuXG4gICAgLy8gQ2xpY2tlZCBvbiBpbnRlcmFjdGl2ZSBwb3BwZXJcbiAgICBpZiAoXG4gICAgICBpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSAmJlxuICAgICAgYWN0dWFsQ29udGFpbnMocG9wcGVyLCBhY3R1YWxUYXJnZXQgYXMgRWxlbWVudClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDbGlja2VkIG9uIHRoZSBldmVudCBsaXN0ZW5lcnMgdGFyZ2V0XG4gICAgaWYgKFxuICAgICAgbm9ybWFsaXplVG9BcnJheShpbnN0YW5jZS5wcm9wcy50cmlnZ2VyVGFyZ2V0IHx8IHJlZmVyZW5jZSkuc29tZSgoZWwpID0+XG4gICAgICAgIGFjdHVhbENvbnRhaW5zKGVsLCBhY3R1YWxUYXJnZXQgYXMgRWxlbWVudClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGlmIChjdXJyZW50SW5wdXQuaXNUb3VjaCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlICYmXG4gICAgICAgIGluc3RhbmNlLnByb3BzLnRyaWdnZXIuaW5kZXhPZignY2xpY2snKSA+PSAwXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbnZva2VIb29rKCdvbkNsaWNrT3V0c2lkZScsIFtpbnN0YW5jZSwgZXZlbnRdKTtcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFuY2UucHJvcHMuaGlkZU9uQ2xpY2sgPT09IHRydWUpIHtcbiAgICAgIGluc3RhbmNlLmNsZWFyRGVsYXlUaW1lb3V0cygpO1xuICAgICAgaW5zdGFuY2UuaGlkZSgpO1xuXG4gICAgICAvLyBgbW91c2Vkb3duYCBldmVudCBpcyBmaXJlZCByaWdodCBiZWZvcmUgYGZvY3VzYCBpZiBwcmVzc2luZyB0aGVcbiAgICAgIC8vIGN1cnJlbnRUYXJnZXQuIFRoaXMgbGV0cyBhIHRpcHB5IHdpdGggYGZvY3VzYCB0cmlnZ2VyIGtub3cgdGhhdCBpdFxuICAgICAgLy8gc2hvdWxkIG5vdCBzaG93XG4gICAgICBkaWRIaWRlRHVlVG9Eb2N1bWVudE1vdXNlRG93biA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZGlkSGlkZUR1ZVRvRG9jdW1lbnRNb3VzZURvd24gPSBmYWxzZTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUaGUgbGlzdGVuZXIgZ2V0cyBhZGRlZCBpbiBgc2NoZWR1bGVTaG93KClgLCBidXQgdGhpcyBtYXkgYmUgaGlkaW5nIGl0XG4gICAgICAvLyBiZWZvcmUgaXQgc2hvd3MsIGFuZCBoaWRlKCkncyBlYXJseSBiYWlsLW91dCBiZWhhdmlvciBjYW4gcHJldmVudCBpdFxuICAgICAgLy8gZnJvbSBiZWluZyBjbGVhbmVkIHVwXG4gICAgICBpZiAoIWluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICByZW1vdmVEb2N1bWVudFByZXNzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaE1vdmUoKTogdm9pZCB7XG4gICAgZGlkVG91Y2hNb3ZlID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVG91Y2hTdGFydCgpOiB2b2lkIHtcbiAgICBkaWRUb3VjaE1vdmUgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZERvY3VtZW50UHJlc3MoKTogdm9pZCB7XG4gICAgY29uc3QgZG9jID0gZ2V0RG9jdW1lbnQoKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Eb2N1bWVudFByZXNzLCB0cnVlKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbkRvY3VtZW50UHJlc3MsIFRPVUNIX09QVElPTlMpO1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LCBUT1VDSF9PUFRJT05TKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUsIFRPVUNIX09QVElPTlMpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlRG9jdW1lbnRQcmVzcygpOiB2b2lkIHtcbiAgICBjb25zdCBkb2MgPSBnZXREb2N1bWVudCgpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvY3VtZW50UHJlc3MsIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uRG9jdW1lbnRQcmVzcywgVE9VQ0hfT1BUSU9OUyk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIFRPVUNIX09QVElPTlMpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSwgVE9VQ0hfT1BUSU9OUyk7XG4gIH1cblxuICBmdW5jdGlvbiBvblRyYW5zaXRpb25lZE91dChkdXJhdGlvbjogbnVtYmVyLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIG9uVHJhbnNpdGlvbkVuZChkdXJhdGlvbiwgKCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlICYmXG4gICAgICAgIHBvcHBlci5wYXJlbnROb2RlICYmXG4gICAgICAgIHBvcHBlci5wYXJlbnROb2RlLmNvbnRhaW5zKHBvcHBlcilcbiAgICAgICkge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25UcmFuc2l0aW9uZWRJbihkdXJhdGlvbjogbnVtYmVyLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIG9uVHJhbnNpdGlvbkVuZChkdXJhdGlvbiwgY2FsbGJhY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gb25UcmFuc2l0aW9uRW5kKGR1cmF0aW9uOiBudW1iZXIsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgYm94ID0gZ2V0RGVmYXVsdFRlbXBsYXRlQ2hpbGRyZW4oKS5ib3g7XG5cbiAgICBmdW5jdGlvbiBsaXN0ZW5lcihldmVudDogVHJhbnNpdGlvbkV2ZW50KTogdm9pZCB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBib3gpIHtcbiAgICAgICAgdXBkYXRlVHJhbnNpdGlvbkVuZExpc3RlbmVyKGJveCwgJ3JlbW92ZScsIGxpc3RlbmVyKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNYWtlIGNhbGxiYWNrIHN5bmNocm9ub3VzIGlmIGR1cmF0aW9uIGlzIDBcbiAgICAvLyBgdHJhbnNpdGlvbmVuZGAgd29uJ3QgZmlyZSBvdGhlcndpc2VcbiAgICBpZiAoZHVyYXRpb24gPT09IDApIHtcbiAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH1cblxuICAgIHVwZGF0ZVRyYW5zaXRpb25FbmRMaXN0ZW5lcihib3gsICdyZW1vdmUnLCBjdXJyZW50VHJhbnNpdGlvbkVuZExpc3RlbmVyKTtcbiAgICB1cGRhdGVUcmFuc2l0aW9uRW5kTGlzdGVuZXIoYm94LCAnYWRkJywgbGlzdGVuZXIpO1xuXG4gICAgY3VycmVudFRyYW5zaXRpb25FbmRMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICB9XG5cbiAgZnVuY3Rpb24gb24oXG4gICAgZXZlbnRUeXBlOiBzdHJpbmcsXG4gICAgaGFuZGxlcjogRXZlbnRMaXN0ZW5lcixcbiAgICBvcHRpb25zOiBib29sZWFuIHwgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSBmYWxzZVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBub2RlcyA9IG5vcm1hbGl6ZVRvQXJyYXkoaW5zdGFuY2UucHJvcHMudHJpZ2dlclRhcmdldCB8fCByZWZlcmVuY2UpO1xuICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgbGlzdGVuZXJzLnB1c2goe25vZGUsIGV2ZW50VHlwZSwgaGFuZGxlciwgb3B0aW9uc30pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGlmIChnZXRJc0N1c3RvbVRvdWNoQmVoYXZpb3IoKSkge1xuICAgICAgb24oJ3RvdWNoc3RhcnQnLCBvblRyaWdnZXIsIHtwYXNzaXZlOiB0cnVlfSk7XG4gICAgICBvbigndG91Y2hlbmQnLCBvbk1vdXNlTGVhdmUgYXMgRXZlbnRMaXN0ZW5lciwge3Bhc3NpdmU6IHRydWV9KTtcbiAgICB9XG5cbiAgICBzcGxpdEJ5U3BhY2VzKGluc3RhbmNlLnByb3BzLnRyaWdnZXIpLmZvckVhY2goKGV2ZW50VHlwZSkgPT4ge1xuICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gJ21hbnVhbCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvbihldmVudFR5cGUsIG9uVHJpZ2dlcik7XG5cbiAgICAgIHN3aXRjaCAoZXZlbnRUeXBlKSB7XG4gICAgICAgIGNhc2UgJ21vdXNlZW50ZXInOlxuICAgICAgICAgIG9uKCdtb3VzZWxlYXZlJywgb25Nb3VzZUxlYXZlIGFzIEV2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb2N1cyc6XG4gICAgICAgICAgb24oaXNJRTExID8gJ2ZvY3Vzb3V0JyA6ICdibHVyJywgb25CbHVyT3JGb2N1c091dCBhcyBFdmVudExpc3RlbmVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZm9jdXNpbic6XG4gICAgICAgICAgb24oJ2ZvY3Vzb3V0Jywgb25CbHVyT3JGb2N1c091dCBhcyBFdmVudExpc3RlbmVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycygpOiB2b2lkIHtcbiAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoe25vZGUsIGV2ZW50VHlwZSwgaGFuZGxlciwgb3B0aW9uc306IExpc3RlbmVyT2JqZWN0KSA9PiB7XG4gICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgICBsaXN0ZW5lcnMgPSBbXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVHJpZ2dlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBsZXQgc2hvdWxkU2NoZWR1bGVDbGlja0hpZGUgPSBmYWxzZTtcblxuICAgIGlmIChcbiAgICAgICFpbnN0YW5jZS5zdGF0ZS5pc0VuYWJsZWQgfHxcbiAgICAgIGlzRXZlbnRMaXN0ZW5lclN0b3BwZWQoZXZlbnQpIHx8XG4gICAgICBkaWRIaWRlRHVlVG9Eb2N1bWVudE1vdXNlRG93blxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHdhc0ZvY3VzZWQgPSBsYXN0VHJpZ2dlckV2ZW50Py50eXBlID09PSAnZm9jdXMnO1xuXG4gICAgbGFzdFRyaWdnZXJFdmVudCA9IGV2ZW50O1xuICAgIGN1cnJlbnRUYXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEVsZW1lbnQ7XG5cbiAgICBoYW5kbGVBcmlhRXhwYW5kZWRBdHRyaWJ1dGUoKTtcblxuICAgIGlmICghaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlICYmIGlzTW91c2VFdmVudChldmVudCkpIHtcbiAgICAgIC8vIElmIHNjcm9sbGluZywgYG1vdXNlZW50ZXJgIGV2ZW50cyBjYW4gYmUgZmlyZWQgaWYgdGhlIGN1cnNvciBsYW5kc1xuICAgICAgLy8gb3ZlciBhIG5ldyB0YXJnZXQsIGJ1dCBgbW91c2Vtb3ZlYCBldmVudHMgZG9uJ3QgZ2V0IGZpcmVkLiBUaGlzXG4gICAgICAvLyBjYXVzZXMgaW50ZXJhY3RpdmUgdG9vbHRpcHMgdG8gZ2V0IHN0dWNrIG9wZW4gdW50aWwgdGhlIGN1cnNvciBpc1xuICAgICAgLy8gbW92ZWRcbiAgICAgIG1vdXNlTW92ZUxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZXZlbnQpKTtcbiAgICB9XG5cbiAgICAvLyBUb2dnbGUgc2hvdy9oaWRlIHdoZW4gY2xpY2tpbmcgY2xpY2stdHJpZ2dlcmVkIHRvb2x0aXBzXG4gICAgaWYgKFxuICAgICAgZXZlbnQudHlwZSA9PT0gJ2NsaWNrJyAmJlxuICAgICAgKGluc3RhbmNlLnByb3BzLnRyaWdnZXIuaW5kZXhPZignbW91c2VlbnRlcicpIDwgMCB8fFxuICAgICAgICBpc1Zpc2libGVGcm9tQ2xpY2spICYmXG4gICAgICBpbnN0YW5jZS5wcm9wcy5oaWRlT25DbGljayAhPT0gZmFsc2UgJiZcbiAgICAgIGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZVxuICAgICkge1xuICAgICAgc2hvdWxkU2NoZWR1bGVDbGlja0hpZGUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZVNob3coZXZlbnQpO1xuICAgIH1cblxuICAgIGlmIChldmVudC50eXBlID09PSAnY2xpY2snKSB7XG4gICAgICBpc1Zpc2libGVGcm9tQ2xpY2sgPSAhc2hvdWxkU2NoZWR1bGVDbGlja0hpZGU7XG4gICAgfVxuXG4gICAgaWYgKHNob3VsZFNjaGVkdWxlQ2xpY2tIaWRlICYmICF3YXNGb2N1c2VkKSB7XG4gICAgICBzY2hlZHVsZUhpZGUoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIE5vZGU7XG4gICAgY29uc3QgaXNDdXJzb3JPdmVyUmVmZXJlbmNlT3JQb3BwZXIgPVxuICAgICAgZ2V0Q3VycmVudFRhcmdldCgpLmNvbnRhaW5zKHRhcmdldCkgfHwgcG9wcGVyLmNvbnRhaW5zKHRhcmdldCk7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlbW92ZScgJiYgaXNDdXJzb3JPdmVyUmVmZXJlbmNlT3JQb3BwZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwb3BwZXJUcmVlRGF0YSA9IGdldE5lc3RlZFBvcHBlclRyZWUoKVxuICAgICAgLmNvbmNhdChwb3BwZXIpXG4gICAgICAubWFwKChwb3BwZXIpID0+IHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBwb3BwZXIuX3RpcHB5ITtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBpbnN0YW5jZS5wb3BwZXJJbnN0YW5jZT8uc3RhdGU7XG5cbiAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvcHBlclJlY3Q6IHBvcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIHBvcHBlclN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgIHByb3BzLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIFBvcHBlclRyZWVEYXRhW107XG5cbiAgICBpZiAoaXNDdXJzb3JPdXRzaWRlSW50ZXJhY3RpdmVCb3JkZXIocG9wcGVyVHJlZURhdGEsIGV2ZW50KSkge1xuICAgICAgY2xlYW51cEludGVyYWN0aXZlTW91c2VMaXN0ZW5lcnMoKTtcbiAgICAgIHNjaGVkdWxlSGlkZShldmVudCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZUxlYXZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3Qgc2hvdWxkQmFpbCA9XG4gICAgICBpc0V2ZW50TGlzdGVuZXJTdG9wcGVkKGV2ZW50KSB8fFxuICAgICAgKGluc3RhbmNlLnByb3BzLnRyaWdnZXIuaW5kZXhPZignY2xpY2snKSA+PSAwICYmIGlzVmlzaWJsZUZyb21DbGljayk7XG5cbiAgICBpZiAoc2hvdWxkQmFpbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgaW5zdGFuY2UuaGlkZVdpdGhJbnRlcmFjdGl2aXR5KGV2ZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzY2hlZHVsZUhpZGUoZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25CbHVyT3JGb2N1c091dChldmVudDogRm9jdXNFdmVudCk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIGluc3RhbmNlLnByb3BzLnRyaWdnZXIuaW5kZXhPZignZm9jdXNpbicpIDwgMCAmJlxuICAgICAgZXZlbnQudGFyZ2V0ICE9PSBnZXRDdXJyZW50VGFyZ2V0KClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBmb2N1cyB3YXMgbW92ZWQgdG8gd2l0aGluIHRoZSBwb3BwZXJcbiAgICBpZiAoXG4gICAgICBpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSAmJlxuICAgICAgZXZlbnQucmVsYXRlZFRhcmdldCAmJlxuICAgICAgcG9wcGVyLmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQgYXMgRWxlbWVudClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzY2hlZHVsZUhpZGUoZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNFdmVudExpc3RlbmVyU3RvcHBlZChldmVudDogRXZlbnQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gY3VycmVudElucHV0LmlzVG91Y2hcbiAgICAgID8gZ2V0SXNDdXN0b21Ub3VjaEJlaGF2aW9yKCkgIT09IGV2ZW50LnR5cGUuaW5kZXhPZigndG91Y2gnKSA+PSAwXG4gICAgICA6IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlUG9wcGVySW5zdGFuY2UoKTogdm9pZCB7XG4gICAgZGVzdHJveVBvcHBlckluc3RhbmNlKCk7XG5cbiAgICBjb25zdCB7XG4gICAgICBwb3BwZXJPcHRpb25zLFxuICAgICAgcGxhY2VtZW50LFxuICAgICAgb2Zmc2V0LFxuICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdCxcbiAgICAgIG1vdmVUcmFuc2l0aW9uLFxuICAgIH0gPSBpbnN0YW5jZS5wcm9wcztcblxuICAgIGNvbnN0IGFycm93ID0gZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKSA/IGdldENoaWxkcmVuKHBvcHBlcikuYXJyb3cgOiBudWxsO1xuXG4gICAgY29uc3QgY29tcHV0ZWRSZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2VDbGllbnRSZWN0XG4gICAgICA/IHtcbiAgICAgICAgICBnZXRCb3VuZGluZ0NsaWVudFJlY3Q6IGdldFJlZmVyZW5jZUNsaWVudFJlY3QsXG4gICAgICAgICAgY29udGV4dEVsZW1lbnQ6XG4gICAgICAgICAgICBnZXRSZWZlcmVuY2VDbGllbnRSZWN0LmNvbnRleHRFbGVtZW50IHx8IGdldEN1cnJlbnRUYXJnZXQoKSxcbiAgICAgICAgfVxuICAgICAgOiByZWZlcmVuY2U7XG5cbiAgICBjb25zdCB0aXBweU1vZGlmaWVyOiBNb2RpZmllcjwnJCR0aXBweScsIFJlY29yZDxzdHJpbmcsIHVua25vd24+PiA9IHtcbiAgICAgIG5hbWU6ICckJHRpcHB5JyxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBwaGFzZTogJ2JlZm9yZVdyaXRlJyxcbiAgICAgIHJlcXVpcmVzOiBbJ2NvbXB1dGVTdHlsZXMnXSxcbiAgICAgIGZuKHtzdGF0ZX0pIHtcbiAgICAgICAgaWYgKGdldElzRGVmYXVsdFJlbmRlckZuKCkpIHtcbiAgICAgICAgICBjb25zdCB7Ym94fSA9IGdldERlZmF1bHRUZW1wbGF0ZUNoaWxkcmVuKCk7XG5cbiAgICAgICAgICBbJ3BsYWNlbWVudCcsICdyZWZlcmVuY2UtaGlkZGVuJywgJ2VzY2FwZWQnXS5mb3JFYWNoKChhdHRyKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXR0ciA9PT0gJ3BsYWNlbWVudCcpIHtcbiAgICAgICAgICAgICAgYm94LnNldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZW1lbnQnLCBzdGF0ZS5wbGFjZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyW2BkYXRhLXBvcHBlci0ke2F0dHJ9YF0pIHtcbiAgICAgICAgICAgICAgICBib3guc2V0QXR0cmlidXRlKGBkYXRhLSR7YXR0cn1gLCAnJyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYm94LnJlbW92ZUF0dHJpYnV0ZShgZGF0YS0ke2F0dHJ9YCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyID0ge307XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHR5cGUgVGlwcHlNb2RpZmllciA9IE1vZGlmaWVyPCckJHRpcHB5JywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+O1xuICAgIHR5cGUgRXh0ZW5kZWRNb2RpZmllcnMgPSBTdHJpY3RNb2RpZmllcnMgfCBQYXJ0aWFsPFRpcHB5TW9kaWZpZXI+O1xuXG4gICAgY29uc3QgbW9kaWZpZXJzOiBBcnJheTxFeHRlbmRlZE1vZGlmaWVycz4gPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdvZmZzZXQnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgb2Zmc2V0LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3ByZXZlbnRPdmVyZmxvdycsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBwYWRkaW5nOiB7XG4gICAgICAgICAgICB0b3A6IDIsXG4gICAgICAgICAgICBib3R0b206IDIsXG4gICAgICAgICAgICBsZWZ0OiA1LFxuICAgICAgICAgICAgcmlnaHQ6IDUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdmbGlwJyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHBhZGRpbmc6IDUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnY29tcHV0ZVN0eWxlcycsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBhZGFwdGl2ZTogIW1vdmVUcmFuc2l0aW9uLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHRpcHB5TW9kaWZpZXIsXG4gICAgXTtcblxuICAgIGlmIChnZXRJc0RlZmF1bHRSZW5kZXJGbigpICYmIGFycm93KSB7XG4gICAgICBtb2RpZmllcnMucHVzaCh7XG4gICAgICAgIG5hbWU6ICdhcnJvdycsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBlbGVtZW50OiBhcnJvdyxcbiAgICAgICAgICBwYWRkaW5nOiAzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbW9kaWZpZXJzLnB1c2goLi4uKHBvcHBlck9wdGlvbnM/Lm1vZGlmaWVycyB8fCBbXSkpO1xuXG4gICAgaW5zdGFuY2UucG9wcGVySW5zdGFuY2UgPSBjcmVhdGVQb3BwZXI8RXh0ZW5kZWRNb2RpZmllcnM+KFxuICAgICAgY29tcHV0ZWRSZWZlcmVuY2UsXG4gICAgICBwb3BwZXIsXG4gICAgICB7XG4gICAgICAgIC4uLnBvcHBlck9wdGlvbnMsXG4gICAgICAgIHBsYWNlbWVudCxcbiAgICAgICAgb25GaXJzdFVwZGF0ZSxcbiAgICAgICAgbW9kaWZpZXJzLFxuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95UG9wcGVySW5zdGFuY2UoKTogdm9pZCB7XG4gICAgaWYgKGluc3RhbmNlLnBvcHBlckluc3RhbmNlKSB7XG4gICAgICBpbnN0YW5jZS5wb3BwZXJJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICBpbnN0YW5jZS5wb3BwZXJJbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbW91bnQoKTogdm9pZCB7XG4gICAgY29uc3Qge2FwcGVuZFRvfSA9IGluc3RhbmNlLnByb3BzO1xuXG4gICAgbGV0IHBhcmVudE5vZGU6IGFueTtcblxuICAgIC8vIEJ5IGRlZmF1bHQsIHdlJ2xsIGFwcGVuZCB0aGUgcG9wcGVyIHRvIHRoZSB0cmlnZ2VyVGFyZ2V0cydzIHBhcmVudE5vZGUgc29cbiAgICAvLyBpdCdzIGRpcmVjdGx5IGFmdGVyIHRoZSByZWZlcmVuY2UgZWxlbWVudCBzbyB0aGUgZWxlbWVudHMgaW5zaWRlIHRoZVxuICAgIC8vIHRpcHB5IGNhbiBiZSB0YWJiZWQgdG9cbiAgICAvLyBJZiB0aGVyZSBhcmUgY2xpcHBpbmcgaXNzdWVzLCB0aGUgdXNlciBjYW4gc3BlY2lmeSBhIGRpZmZlcmVudCBhcHBlbmRUb1xuICAgIC8vIGFuZCBlbnN1cmUgZm9jdXMgbWFuYWdlbWVudCBpcyBoYW5kbGVkIGNvcnJlY3RseSBtYW51YWxseVxuICAgIGNvbnN0IG5vZGUgPSBnZXRDdXJyZW50VGFyZ2V0KCk7XG5cbiAgICBpZiAoXG4gICAgICAoaW5zdGFuY2UucHJvcHMuaW50ZXJhY3RpdmUgJiYgYXBwZW5kVG8gPT09IFRJUFBZX0RFRkFVTFRfQVBQRU5EX1RPKSB8fFxuICAgICAgYXBwZW5kVG8gPT09ICdwYXJlbnQnXG4gICAgKSB7XG4gICAgICBwYXJlbnROb2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJlbnROb2RlID0gaW52b2tlV2l0aEFyZ3NPclJldHVybihhcHBlbmRUbywgW25vZGVdKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgcG9wcGVyIGVsZW1lbnQgbmVlZHMgdG8gZXhpc3Qgb24gdGhlIERPTSBiZWZvcmUgaXRzIHBvc2l0aW9uIGNhbiBiZVxuICAgIC8vIHVwZGF0ZWQgYXMgUG9wcGVyIG5lZWRzIHRvIHJlYWQgaXRzIGRpbWVuc2lvbnNcbiAgICBpZiAoIXBhcmVudE5vZGUuY29udGFpbnMocG9wcGVyKSkge1xuICAgICAgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZChwb3BwZXIpO1xuICAgIH1cblxuICAgIGluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCA9IHRydWU7XG5cbiAgICBjcmVhdGVQb3BwZXJJbnN0YW5jZSgpO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgLy8gQWNjZXNzaWJpbGl0eSBjaGVja1xuICAgICAgd2FybldoZW4oXG4gICAgICAgIGluc3RhbmNlLnByb3BzLmludGVyYWN0aXZlICYmXG4gICAgICAgICAgYXBwZW5kVG8gPT09IGRlZmF1bHRQcm9wcy5hcHBlbmRUbyAmJlxuICAgICAgICAgIG5vZGUubmV4dEVsZW1lbnRTaWJsaW5nICE9PSBwb3BwZXIsXG4gICAgICAgIFtcbiAgICAgICAgICAnSW50ZXJhY3RpdmUgdGlwcHkgZWxlbWVudCBtYXkgbm90IGJlIGFjY2Vzc2libGUgdmlhIGtleWJvYXJkJyxcbiAgICAgICAgICAnbmF2aWdhdGlvbiBiZWNhdXNlIGl0IGlzIG5vdCBkaXJlY3RseSBhZnRlciB0aGUgcmVmZXJlbmNlIGVsZW1lbnQnLFxuICAgICAgICAgICdpbiB0aGUgRE9NIHNvdXJjZSBvcmRlci4nLFxuICAgICAgICAgICdcXG5cXG4nLFxuICAgICAgICAgICdVc2luZyBhIHdyYXBwZXIgPGRpdj4gb3IgPHNwYW4+IHRhZyBhcm91bmQgdGhlIHJlZmVyZW5jZSBlbGVtZW50JyxcbiAgICAgICAgICAnc29sdmVzIHRoaXMgYnkgY3JlYXRpbmcgYSBuZXcgcGFyZW50Tm9kZSBjb250ZXh0LicsXG4gICAgICAgICAgJ1xcblxcbicsXG4gICAgICAgICAgJ1NwZWNpZnlpbmcgYGFwcGVuZFRvOiBkb2N1bWVudC5ib2R5YCBzaWxlbmNlcyB0aGlzIHdhcm5pbmcsIGJ1dCBpdCcsXG4gICAgICAgICAgJ2Fzc3VtZXMgeW91IGFyZSB1c2luZyBhIGZvY3VzIG1hbmFnZW1lbnQgc29sdXRpb24gdG8gaGFuZGxlJyxcbiAgICAgICAgICAna2V5Ym9hcmQgbmF2aWdhdGlvbi4nLFxuICAgICAgICAgICdcXG5cXG4nLFxuICAgICAgICAgICdTZWU6IGh0dHBzOi8vYXRvbWlrcy5naXRodWIuaW8vdGlwcHlqcy92Ni9hY2Nlc3NpYmlsaXR5LyNpbnRlcmFjdGl2aXR5JyxcbiAgICAgICAgXS5qb2luKCcgJylcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TmVzdGVkUG9wcGVyVHJlZSgpOiBQb3BwZXJFbGVtZW50W10ge1xuICAgIHJldHVybiBhcnJheUZyb20oXG4gICAgICBwb3BwZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtX19OQU1FU1BBQ0VfUFJFRklYX18tcm9vdF0nKVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBzY2hlZHVsZVNob3coZXZlbnQ/OiBFdmVudCk6IHZvaWQge1xuICAgIGluc3RhbmNlLmNsZWFyRGVsYXlUaW1lb3V0cygpO1xuXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBpbnZva2VIb29rKCdvblRyaWdnZXInLCBbaW5zdGFuY2UsIGV2ZW50XSk7XG4gICAgfVxuXG4gICAgYWRkRG9jdW1lbnRQcmVzcygpO1xuXG4gICAgbGV0IGRlbGF5ID0gZ2V0RGVsYXkodHJ1ZSk7XG4gICAgY29uc3QgW3RvdWNoVmFsdWUsIHRvdWNoRGVsYXldID0gZ2V0Tm9ybWFsaXplZFRvdWNoU2V0dGluZ3MoKTtcblxuICAgIGlmIChjdXJyZW50SW5wdXQuaXNUb3VjaCAmJiB0b3VjaFZhbHVlID09PSAnaG9sZCcgJiYgdG91Y2hEZWxheSkge1xuICAgICAgZGVsYXkgPSB0b3VjaERlbGF5O1xuICAgIH1cblxuICAgIGlmIChkZWxheSkge1xuICAgICAgc2hvd1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaW5zdGFuY2Uuc2hvdygpO1xuICAgICAgfSwgZGVsYXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS5zaG93KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGVIaWRlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGluc3RhbmNlLmNsZWFyRGVsYXlUaW1lb3V0cygpO1xuXG4gICAgaW52b2tlSG9vaygnb25VbnRyaWdnZXInLCBbaW5zdGFuY2UsIGV2ZW50XSk7XG5cbiAgICBpZiAoIWluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSkge1xuICAgICAgcmVtb3ZlRG9jdW1lbnRQcmVzcygpO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRm9yIGludGVyYWN0aXZlIHRpcHBpZXMsIHNjaGVkdWxlSGlkZSBpcyBhZGRlZCB0byBhIGRvY3VtZW50LmJvZHkgaGFuZGxlclxuICAgIC8vIGZyb20gb25Nb3VzZUxlYXZlIHNvIG11c3QgaW50ZXJjZXB0IHNjaGVkdWxlZCBoaWRlcyBmcm9tIG1vdXNlbW92ZS9sZWF2ZVxuICAgIC8vIGV2ZW50cyB3aGVuIHRyaWdnZXIgY29udGFpbnMgbW91c2VlbnRlciBhbmQgY2xpY2ssIGFuZCB0aGUgdGlwIGlzXG4gICAgLy8gY3VycmVudGx5IHNob3duIGFzIGEgcmVzdWx0IG9mIGEgY2xpY2suXG4gICAgaWYgKFxuICAgICAgaW5zdGFuY2UucHJvcHMudHJpZ2dlci5pbmRleE9mKCdtb3VzZWVudGVyJykgPj0gMCAmJlxuICAgICAgaW5zdGFuY2UucHJvcHMudHJpZ2dlci5pbmRleE9mKCdjbGljaycpID49IDAgJiZcbiAgICAgIFsnbW91c2VsZWF2ZScsICdtb3VzZW1vdmUnXS5pbmRleE9mKGV2ZW50LnR5cGUpID49IDAgJiZcbiAgICAgIGlzVmlzaWJsZUZyb21DbGlja1xuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbGF5ID0gZ2V0RGVsYXkoZmFsc2UpO1xuXG4gICAgaWYgKGRlbGF5KSB7XG4gICAgICBoaWRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlKSB7XG4gICAgICAgICAgaW5zdGFuY2UuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCBkZWxheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZpeGVzIGEgYHRyYW5zaXRpb25lbmRgIHByb2JsZW0gd2hlbiBpdCBmaXJlcyAxIGZyYW1lIHRvb1xuICAgICAgLy8gbGF0ZSBzb21ldGltZXMsIHdlIGRvbid0IHdhbnQgaGlkZSgpIHRvIGJlIGNhbGxlZC5cbiAgICAgIHNjaGVkdWxlSGlkZUFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgaW5zdGFuY2UuaGlkZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFx1RDgzRFx1REQxMSBQdWJsaWMgbWV0aG9kc1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgZnVuY3Rpb24gZW5hYmxlKCk6IHZvaWQge1xuICAgIGluc3RhbmNlLnN0YXRlLmlzRW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNhYmxlKCk6IHZvaWQge1xuICAgIC8vIERpc2FibGluZyB0aGUgaW5zdGFuY2Ugc2hvdWxkIGFsc28gaGlkZSBpdFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9taWtzL3RpcHB5LmpzLXJlYWN0L2lzc3Vlcy8xMDZcbiAgICBpbnN0YW5jZS5oaWRlKCk7XG4gICAgaW5zdGFuY2Uuc3RhdGUuaXNFbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckRlbGF5VGltZW91dHMoKTogdm9pZCB7XG4gICAgY2xlYXJUaW1lb3V0KHNob3dUaW1lb3V0KTtcbiAgICBjbGVhclRpbWVvdXQoaGlkZVRpbWVvdXQpO1xuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHNjaGVkdWxlSGlkZUFuaW1hdGlvbkZyYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFByb3BzKHBhcnRpYWxQcm9wczogUGFydGlhbDxQcm9wcz4pOiB2b2lkIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICB3YXJuV2hlbihpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCwgY3JlYXRlTWVtb3J5TGVha1dhcm5pbmcoJ3NldFByb3BzJykpO1xuICAgIH1cblxuICAgIGlmIChpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludm9rZUhvb2soJ29uQmVmb3JlVXBkYXRlJywgW2luc3RhbmNlLCBwYXJ0aWFsUHJvcHNdKTtcblxuICAgIHJlbW92ZUxpc3RlbmVycygpO1xuXG4gICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2UucHJvcHM7XG4gICAgY29uc3QgbmV4dFByb3BzID0gZXZhbHVhdGVQcm9wcyhyZWZlcmVuY2UsIHtcbiAgICAgIC4uLnByZXZQcm9wcyxcbiAgICAgIC4uLnJlbW92ZVVuZGVmaW5lZFByb3BzKHBhcnRpYWxQcm9wcyksXG4gICAgICBpZ25vcmVBdHRyaWJ1dGVzOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgaW5zdGFuY2UucHJvcHMgPSBuZXh0UHJvcHM7XG5cbiAgICBhZGRMaXN0ZW5lcnMoKTtcblxuICAgIGlmIChwcmV2UHJvcHMuaW50ZXJhY3RpdmVEZWJvdW5jZSAhPT0gbmV4dFByb3BzLmludGVyYWN0aXZlRGVib3VuY2UpIHtcbiAgICAgIGNsZWFudXBJbnRlcmFjdGl2ZU1vdXNlTGlzdGVuZXJzKCk7XG4gICAgICBkZWJvdW5jZWRPbk1vdXNlTW92ZSA9IGRlYm91bmNlKFxuICAgICAgICBvbk1vdXNlTW92ZSxcbiAgICAgICAgbmV4dFByb3BzLmludGVyYWN0aXZlRGVib3VuY2VcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHN0YWxlIGFyaWEtZXhwYW5kZWQgYXR0cmlidXRlcyBhcmUgcmVtb3ZlZFxuICAgIGlmIChwcmV2UHJvcHMudHJpZ2dlclRhcmdldCAmJiAhbmV4dFByb3BzLnRyaWdnZXJUYXJnZXQpIHtcbiAgICAgIG5vcm1hbGl6ZVRvQXJyYXkocHJldlByb3BzLnRyaWdnZXJUYXJnZXQpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobmV4dFByb3BzLnRyaWdnZXJUYXJnZXQpIHtcbiAgICAgIHJlZmVyZW5jZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKTtcbiAgICB9XG5cbiAgICBoYW5kbGVBcmlhRXhwYW5kZWRBdHRyaWJ1dGUoKTtcbiAgICBoYW5kbGVTdHlsZXMoKTtcblxuICAgIGlmIChvblVwZGF0ZSkge1xuICAgICAgb25VcGRhdGUocHJldlByb3BzLCBuZXh0UHJvcHMpO1xuICAgIH1cblxuICAgIGlmIChpbnN0YW5jZS5wb3BwZXJJbnN0YW5jZSkge1xuICAgICAgY3JlYXRlUG9wcGVySW5zdGFuY2UoKTtcblxuICAgICAgLy8gRml4ZXMgYW4gaXNzdWUgd2l0aCBuZXN0ZWQgdGlwcGllcyBpZiB0aGV5IGFyZSBhbGwgZ2V0dGluZyByZS1yZW5kZXJlZCxcbiAgICAgIC8vIGFuZCB0aGUgbmVzdGVkIG9uZXMgZ2V0IHJlLXJlbmRlcmVkIGZpcnN0LlxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F0b21pa3MvdGlwcHlqcy1yZWFjdC9pc3N1ZXMvMTc3XG4gICAgICAvLyBUT0RPOiBmaW5kIGEgY2xlYW5lciAvIG1vcmUgZWZmaWNpZW50IHNvbHV0aW9uKCEpXG4gICAgICBnZXROZXN0ZWRQb3BwZXJUcmVlKCkuZm9yRWFjaCgobmVzdGVkUG9wcGVyKSA9PiB7XG4gICAgICAgIC8vIFJlYWN0IChhbmQgb3RoZXIgVUkgbGlicyBsaWtlbHkpIHJlcXVpcmVzIGEgckFGIHdyYXBwZXIgYXMgaXQgZmx1c2hlc1xuICAgICAgICAvLyBpdHMgd29yayBpbiBvbmVcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG5lc3RlZFBvcHBlci5fdGlwcHkhLnBvcHBlckluc3RhbmNlIS5mb3JjZVVwZGF0ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpbnZva2VIb29rKCdvbkFmdGVyVXBkYXRlJywgW2luc3RhbmNlLCBwYXJ0aWFsUHJvcHNdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldENvbnRlbnQoY29udGVudDogQ29udGVudCk6IHZvaWQge1xuICAgIGluc3RhbmNlLnNldFByb3BzKHtjb250ZW50fSk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93KCk6IHZvaWQge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIHdhcm5XaGVuKGluc3RhbmNlLnN0YXRlLmlzRGVzdHJveWVkLCBjcmVhdGVNZW1vcnlMZWFrV2FybmluZygnc2hvdycpKTtcbiAgICB9XG5cbiAgICAvLyBFYXJseSBiYWlsLW91dFxuICAgIGNvbnN0IGlzQWxyZWFkeVZpc2libGUgPSBpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGU7XG4gICAgY29uc3QgaXNEZXN0cm95ZWQgPSBpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZDtcbiAgICBjb25zdCBpc0Rpc2FibGVkID0gIWluc3RhbmNlLnN0YXRlLmlzRW5hYmxlZDtcbiAgICBjb25zdCBpc1RvdWNoQW5kVG91Y2hEaXNhYmxlZCA9XG4gICAgICBjdXJyZW50SW5wdXQuaXNUb3VjaCAmJiAhaW5zdGFuY2UucHJvcHMudG91Y2g7XG4gICAgY29uc3QgZHVyYXRpb24gPSBnZXRWYWx1ZUF0SW5kZXhPclJldHVybihcbiAgICAgIGluc3RhbmNlLnByb3BzLmR1cmF0aW9uLFxuICAgICAgMCxcbiAgICAgIGRlZmF1bHRQcm9wcy5kdXJhdGlvblxuICAgICk7XG5cbiAgICBpZiAoXG4gICAgICBpc0FscmVhZHlWaXNpYmxlIHx8XG4gICAgICBpc0Rlc3Ryb3llZCB8fFxuICAgICAgaXNEaXNhYmxlZCB8fFxuICAgICAgaXNUb3VjaEFuZFRvdWNoRGlzYWJsZWRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBOb3JtYWxpemUgYGRpc2FibGVkYCBiZWhhdmlvciBhY3Jvc3MgYnJvd3NlcnMuXG4gICAgLy8gRmlyZWZveCBhbGxvd3MgZXZlbnRzIG9uIGRpc2FibGVkIGVsZW1lbnRzLCBidXQgQ2hyb21lIGRvZXNuJ3QuXG4gICAgLy8gVXNpbmcgYSB3cmFwcGVyIGVsZW1lbnQgKGkuZS4gPHNwYW4+KSBpcyByZWNvbW1lbmRlZC5cbiAgICBpZiAoZ2V0Q3VycmVudFRhcmdldCgpLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludm9rZUhvb2soJ29uU2hvdycsIFtpbnN0YW5jZV0sIGZhbHNlKTtcbiAgICBpZiAoaW5zdGFuY2UucHJvcHMub25TaG93KGluc3RhbmNlKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGUgPSB0cnVlO1xuXG4gICAgaWYgKGdldElzRGVmYXVsdFJlbmRlckZuKCkpIHtcbiAgICAgIHBvcHBlci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgIH1cblxuICAgIGhhbmRsZVN0eWxlcygpO1xuICAgIGFkZERvY3VtZW50UHJlc3MoKTtcblxuICAgIGlmICghaW5zdGFuY2Uuc3RhdGUuaXNNb3VudGVkKSB7XG4gICAgICBwb3BwZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICB9XG5cbiAgICAvLyBJZiBmbGlwcGluZyB0byB0aGUgb3Bwb3NpdGUgc2lkZSBhZnRlciBoaWRpbmcgYXQgbGVhc3Qgb25jZSwgdGhlXG4gICAgLy8gYW5pbWF0aW9uIHdpbGwgdXNlIHRoZSB3cm9uZyBwbGFjZW1lbnQgd2l0aG91dCByZXNldHRpbmcgdGhlIGR1cmF0aW9uXG4gICAgaWYgKGdldElzRGVmYXVsdFJlbmRlckZuKCkpIHtcbiAgICAgIGNvbnN0IHtib3gsIGNvbnRlbnR9ID0gZ2V0RGVmYXVsdFRlbXBsYXRlQ2hpbGRyZW4oKTtcbiAgICAgIHNldFRyYW5zaXRpb25EdXJhdGlvbihbYm94LCBjb250ZW50XSwgMCk7XG4gICAgfVxuXG4gICAgb25GaXJzdFVwZGF0ZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgIGlmICghaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlIHx8IGlnbm9yZU9uRmlyc3RVcGRhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZ25vcmVPbkZpcnN0VXBkYXRlID0gdHJ1ZTtcblxuICAgICAgLy8gcmVmbG93XG4gICAgICB2b2lkIHBvcHBlci5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgIHBvcHBlci5zdHlsZS50cmFuc2l0aW9uID0gaW5zdGFuY2UucHJvcHMubW92ZVRyYW5zaXRpb247XG5cbiAgICAgIGlmIChnZXRJc0RlZmF1bHRSZW5kZXJGbigpICYmIGluc3RhbmNlLnByb3BzLmFuaW1hdGlvbikge1xuICAgICAgICBjb25zdCB7Ym94LCBjb250ZW50fSA9IGdldERlZmF1bHRUZW1wbGF0ZUNoaWxkcmVuKCk7XG4gICAgICAgIHNldFRyYW5zaXRpb25EdXJhdGlvbihbYm94LCBjb250ZW50XSwgZHVyYXRpb24pO1xuICAgICAgICBzZXRWaXNpYmlsaXR5U3RhdGUoW2JveCwgY29udGVudF0sICd2aXNpYmxlJyk7XG4gICAgICB9XG5cbiAgICAgIGhhbmRsZUFyaWFDb250ZW50QXR0cmlidXRlKCk7XG4gICAgICBoYW5kbGVBcmlhRXhwYW5kZWRBdHRyaWJ1dGUoKTtcblxuICAgICAgcHVzaElmVW5pcXVlKG1vdW50ZWRJbnN0YW5jZXMsIGluc3RhbmNlKTtcblxuICAgICAgLy8gY2VydGFpbiBtb2RpZmllcnMgKGUuZy4gYG1heFNpemVgKSByZXF1aXJlIGEgc2Vjb25kIHVwZGF0ZSBhZnRlciB0aGVcbiAgICAgIC8vIHBvcHBlciBoYXMgYmVlbiBwb3NpdGlvbmVkIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgaW5zdGFuY2UucG9wcGVySW5zdGFuY2U/LmZvcmNlVXBkYXRlKCk7XG5cbiAgICAgIGludm9rZUhvb2soJ29uTW91bnQnLCBbaW5zdGFuY2VdKTtcblxuICAgICAgaWYgKGluc3RhbmNlLnByb3BzLmFuaW1hdGlvbiAmJiBnZXRJc0RlZmF1bHRSZW5kZXJGbigpKSB7XG4gICAgICAgIG9uVHJhbnNpdGlvbmVkSW4oZHVyYXRpb24sICgpID0+IHtcbiAgICAgICAgICBpbnN0YW5jZS5zdGF0ZS5pc1Nob3duID0gdHJ1ZTtcbiAgICAgICAgICBpbnZva2VIb29rKCdvblNob3duJywgW2luc3RhbmNlXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBtb3VudCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGlkZSgpOiB2b2lkIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICB3YXJuV2hlbihpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCwgY3JlYXRlTWVtb3J5TGVha1dhcm5pbmcoJ2hpZGUnKSk7XG4gICAgfVxuXG4gICAgLy8gRWFybHkgYmFpbC1vdXRcbiAgICBjb25zdCBpc0FscmVhZHlIaWRkZW4gPSAhaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlO1xuICAgIGNvbnN0IGlzRGVzdHJveWVkID0gaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQ7XG4gICAgY29uc3QgaXNEaXNhYmxlZCA9ICFpbnN0YW5jZS5zdGF0ZS5pc0VuYWJsZWQ7XG4gICAgY29uc3QgZHVyYXRpb24gPSBnZXRWYWx1ZUF0SW5kZXhPclJldHVybihcbiAgICAgIGluc3RhbmNlLnByb3BzLmR1cmF0aW9uLFxuICAgICAgMSxcbiAgICAgIGRlZmF1bHRQcm9wcy5kdXJhdGlvblxuICAgICk7XG5cbiAgICBpZiAoaXNBbHJlYWR5SGlkZGVuIHx8IGlzRGVzdHJveWVkIHx8IGlzRGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnZva2VIb29rKCdvbkhpZGUnLCBbaW5zdGFuY2VdLCBmYWxzZSk7XG4gICAgaWYgKGluc3RhbmNlLnByb3BzLm9uSGlkZShpbnN0YW5jZSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgaW5zdGFuY2Uuc3RhdGUuaXNTaG93biA9IGZhbHNlO1xuICAgIGlnbm9yZU9uRmlyc3RVcGRhdGUgPSBmYWxzZTtcbiAgICBpc1Zpc2libGVGcm9tQ2xpY2sgPSBmYWxzZTtcblxuICAgIGlmIChnZXRJc0RlZmF1bHRSZW5kZXJGbigpKSB7XG4gICAgICBwb3BwZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIH1cblxuICAgIGNsZWFudXBJbnRlcmFjdGl2ZU1vdXNlTGlzdGVuZXJzKCk7XG4gICAgcmVtb3ZlRG9jdW1lbnRQcmVzcygpO1xuICAgIGhhbmRsZVN0eWxlcyh0cnVlKTtcblxuICAgIGlmIChnZXRJc0RlZmF1bHRSZW5kZXJGbigpKSB7XG4gICAgICBjb25zdCB7Ym94LCBjb250ZW50fSA9IGdldERlZmF1bHRUZW1wbGF0ZUNoaWxkcmVuKCk7XG5cbiAgICAgIGlmIChpbnN0YW5jZS5wcm9wcy5hbmltYXRpb24pIHtcbiAgICAgICAgc2V0VHJhbnNpdGlvbkR1cmF0aW9uKFtib3gsIGNvbnRlbnRdLCBkdXJhdGlvbik7XG4gICAgICAgIHNldFZpc2liaWxpdHlTdGF0ZShbYm94LCBjb250ZW50XSwgJ2hpZGRlbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUFyaWFDb250ZW50QXR0cmlidXRlKCk7XG4gICAgaGFuZGxlQXJpYUV4cGFuZGVkQXR0cmlidXRlKCk7XG5cbiAgICBpZiAoaW5zdGFuY2UucHJvcHMuYW5pbWF0aW9uKSB7XG4gICAgICBpZiAoZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKSkge1xuICAgICAgICBvblRyYW5zaXRpb25lZE91dChkdXJhdGlvbiwgaW5zdGFuY2UudW5tb3VudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlLnVubW91bnQoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlV2l0aEludGVyYWN0aXZpdHkoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICB3YXJuV2hlbihcbiAgICAgICAgaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQsXG4gICAgICAgIGNyZWF0ZU1lbW9yeUxlYWtXYXJuaW5nKCdoaWRlV2l0aEludGVyYWN0aXZpdHknKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXREb2N1bWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRlYm91bmNlZE9uTW91c2VNb3ZlKTtcbiAgICBwdXNoSWZVbmlxdWUobW91c2VNb3ZlTGlzdGVuZXJzLCBkZWJvdW5jZWRPbk1vdXNlTW92ZSk7XG4gICAgZGVib3VuY2VkT25Nb3VzZU1vdmUoZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5tb3VudCgpOiB2b2lkIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICB3YXJuV2hlbihpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCwgY3JlYXRlTWVtb3J5TGVha1dhcm5pbmcoJ3VubW91bnQnKSk7XG4gICAgfVxuXG4gICAgaWYgKGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSkge1xuICAgICAgaW5zdGFuY2UuaGlkZSgpO1xuICAgIH1cblxuICAgIGlmICghaW5zdGFuY2Uuc3RhdGUuaXNNb3VudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZGVzdHJveVBvcHBlckluc3RhbmNlKCk7XG5cbiAgICAvLyBJZiBhIHBvcHBlciBpcyBub3QgaW50ZXJhY3RpdmUsIGl0IHdpbGwgYmUgYXBwZW5kZWQgb3V0c2lkZSB0aGUgcG9wcGVyXG4gICAgLy8gdHJlZSBieSBkZWZhdWx0LiBUaGlzIHNlZW1zIG1haW5seSBmb3IgaW50ZXJhY3RpdmUgdGlwcGllcywgYnV0IHdlIHNob3VsZFxuICAgIC8vIGZpbmQgYSB3b3JrYXJvdW5kIGlmIHBvc3NpYmxlXG4gICAgZ2V0TmVzdGVkUG9wcGVyVHJlZSgpLmZvckVhY2goKG5lc3RlZFBvcHBlcikgPT4ge1xuICAgICAgbmVzdGVkUG9wcGVyLl90aXBweSEudW5tb3VudCgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHBvcHBlci5wYXJlbnROb2RlKSB7XG4gICAgICBwb3BwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwb3BwZXIpO1xuICAgIH1cblxuICAgIG1vdW50ZWRJbnN0YW5jZXMgPSBtb3VudGVkSW5zdGFuY2VzLmZpbHRlcigoaSkgPT4gaSAhPT0gaW5zdGFuY2UpO1xuXG4gICAgaW5zdGFuY2Uuc3RhdGUuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgaW52b2tlSG9vaygnb25IaWRkZW4nLCBbaW5zdGFuY2VdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgd2FybldoZW4oaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQsIGNyZWF0ZU1lbW9yeUxlYWtXYXJuaW5nKCdkZXN0cm95JykpO1xuICAgIH1cblxuICAgIGlmIChpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGluc3RhbmNlLmNsZWFyRGVsYXlUaW1lb3V0cygpO1xuICAgIGluc3RhbmNlLnVubW91bnQoKTtcblxuICAgIHJlbW92ZUxpc3RlbmVycygpO1xuXG4gICAgZGVsZXRlIHJlZmVyZW5jZS5fdGlwcHk7XG5cbiAgICBpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCA9IHRydWU7XG5cbiAgICBpbnZva2VIb29rKCdvbkRlc3Ryb3knLCBbaW5zdGFuY2VdKTtcbiAgfVxufVxuIiwgImltcG9ydCBiaW5kR2xvYmFsRXZlbnRMaXN0ZW5lcnMsIHtcbiAgY3VycmVudElucHV0LFxufSBmcm9tICcuL2JpbmRHbG9iYWxFdmVudExpc3RlbmVycyc7XG5pbXBvcnQgY3JlYXRlVGlwcHksIHttb3VudGVkSW5zdGFuY2VzfSBmcm9tICcuL2NyZWF0ZVRpcHB5JztcbmltcG9ydCB7Z2V0QXJyYXlPZkVsZW1lbnRzLCBpc0VsZW1lbnQsIGlzUmVmZXJlbmNlRWxlbWVudH0gZnJvbSAnLi9kb20tdXRpbHMnO1xuaW1wb3J0IHtkZWZhdWx0UHJvcHMsIHNldERlZmF1bHRQcm9wcywgdmFsaWRhdGVQcm9wc30gZnJvbSAnLi9wcm9wcyc7XG5pbXBvcnQge0hpZGVBbGwsIEhpZGVBbGxPcHRpb25zLCBJbnN0YW5jZSwgUHJvcHMsIFRhcmdldHN9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHt2YWxpZGF0ZVRhcmdldHMsIHdhcm5XaGVufSBmcm9tICcuL3ZhbGlkYXRpb24nO1xuXG5mdW5jdGlvbiB0aXBweShcbiAgdGFyZ2V0czogVGFyZ2V0cyxcbiAgb3B0aW9uYWxQcm9wczogUGFydGlhbDxQcm9wcz4gPSB7fVxuKTogSW5zdGFuY2UgfCBJbnN0YW5jZVtdIHtcbiAgY29uc3QgcGx1Z2lucyA9IGRlZmF1bHRQcm9wcy5wbHVnaW5zLmNvbmNhdChvcHRpb25hbFByb3BzLnBsdWdpbnMgfHwgW10pO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChfX0RFVl9fKSB7XG4gICAgdmFsaWRhdGVUYXJnZXRzKHRhcmdldHMpO1xuICAgIHZhbGlkYXRlUHJvcHMob3B0aW9uYWxQcm9wcywgcGx1Z2lucyk7XG4gIH1cblxuICBiaW5kR2xvYmFsRXZlbnRMaXN0ZW5lcnMoKTtcblxuICBjb25zdCBwYXNzZWRQcm9wczogUGFydGlhbDxQcm9wcz4gPSB7Li4ub3B0aW9uYWxQcm9wcywgcGx1Z2luc307XG5cbiAgY29uc3QgZWxlbWVudHMgPSBnZXRBcnJheU9mRWxlbWVudHModGFyZ2V0cyk7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKF9fREVWX18pIHtcbiAgICBjb25zdCBpc1NpbmdsZUNvbnRlbnRFbGVtZW50ID0gaXNFbGVtZW50KHBhc3NlZFByb3BzLmNvbnRlbnQpO1xuICAgIGNvbnN0IGlzTW9yZVRoYW5PbmVSZWZlcmVuY2VFbGVtZW50ID0gZWxlbWVudHMubGVuZ3RoID4gMTtcbiAgICB3YXJuV2hlbihcbiAgICAgIGlzU2luZ2xlQ29udGVudEVsZW1lbnQgJiYgaXNNb3JlVGhhbk9uZVJlZmVyZW5jZUVsZW1lbnQsXG4gICAgICBbXG4gICAgICAgICd0aXBweSgpIHdhcyBwYXNzZWQgYW4gRWxlbWVudCBhcyB0aGUgYGNvbnRlbnRgIHByb3AsIGJ1dCBtb3JlIHRoYW4nLFxuICAgICAgICAnb25lIHRpcHB5IGluc3RhbmNlIHdhcyBjcmVhdGVkIGJ5IHRoaXMgaW52b2NhdGlvbi4gVGhpcyBtZWFucyB0aGUnLFxuICAgICAgICAnY29udGVudCBlbGVtZW50IHdpbGwgb25seSBiZSBhcHBlbmRlZCB0byB0aGUgbGFzdCB0aXBweSBpbnN0YW5jZS4nLFxuICAgICAgICAnXFxuXFxuJyxcbiAgICAgICAgJ0luc3RlYWQsIHBhc3MgdGhlIC5pbm5lckhUTUwgb2YgdGhlIGVsZW1lbnQsIG9yIHVzZSBhIGZ1bmN0aW9uIHRoYXQnLFxuICAgICAgICAncmV0dXJucyBhIGNsb25lZCB2ZXJzaW9uIG9mIHRoZSBlbGVtZW50IGluc3RlYWQuJyxcbiAgICAgICAgJ1xcblxcbicsXG4gICAgICAgICcxKSBjb250ZW50OiBlbGVtZW50LmlubmVySFRNTFxcbicsXG4gICAgICAgICcyKSBjb250ZW50OiAoKSA9PiBlbGVtZW50LmNsb25lTm9kZSh0cnVlKScsXG4gICAgICBdLmpvaW4oJyAnKVxuICAgICk7XG4gIH1cblxuICBjb25zdCBpbnN0YW5jZXMgPSBlbGVtZW50cy5yZWR1Y2U8SW5zdGFuY2VbXT4oXG4gICAgKGFjYywgcmVmZXJlbmNlKTogSW5zdGFuY2VbXSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IHJlZmVyZW5jZSAmJiBjcmVhdGVUaXBweShyZWZlcmVuY2UsIHBhc3NlZFByb3BzKTtcblxuICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgIGFjYy5wdXNoKGluc3RhbmNlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LFxuICAgIFtdXG4gICk7XG5cbiAgcmV0dXJuIGlzRWxlbWVudCh0YXJnZXRzKSA/IGluc3RhbmNlc1swXSA6IGluc3RhbmNlcztcbn1cblxudGlwcHkuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xudGlwcHkuc2V0RGVmYXVsdFByb3BzID0gc2V0RGVmYXVsdFByb3BzO1xudGlwcHkuY3VycmVudElucHV0ID0gY3VycmVudElucHV0O1xuXG5leHBvcnQgZGVmYXVsdCB0aXBweTtcblxuZXhwb3J0IGNvbnN0IGhpZGVBbGw6IEhpZGVBbGwgPSAoe1xuICBleGNsdWRlOiBleGNsdWRlZFJlZmVyZW5jZU9ySW5zdGFuY2UsXG4gIGR1cmF0aW9uLFxufTogSGlkZUFsbE9wdGlvbnMgPSB7fSkgPT4ge1xuICBtb3VudGVkSW5zdGFuY2VzLmZvckVhY2goKGluc3RhbmNlKSA9PiB7XG4gICAgbGV0IGlzRXhjbHVkZWQgPSBmYWxzZTtcblxuICAgIGlmIChleGNsdWRlZFJlZmVyZW5jZU9ySW5zdGFuY2UpIHtcbiAgICAgIGlzRXhjbHVkZWQgPSBpc1JlZmVyZW5jZUVsZW1lbnQoZXhjbHVkZWRSZWZlcmVuY2VPckluc3RhbmNlKVxuICAgICAgICA/IGluc3RhbmNlLnJlZmVyZW5jZSA9PT0gZXhjbHVkZWRSZWZlcmVuY2VPckluc3RhbmNlXG4gICAgICAgIDogaW5zdGFuY2UucG9wcGVyID09PSAoZXhjbHVkZWRSZWZlcmVuY2VPckluc3RhbmNlIGFzIEluc3RhbmNlKS5wb3BwZXI7XG4gICAgfVxuXG4gICAgaWYgKCFpc0V4Y2x1ZGVkKSB7XG4gICAgICBjb25zdCBvcmlnaW5hbER1cmF0aW9uID0gaW5zdGFuY2UucHJvcHMuZHVyYXRpb247XG5cbiAgICAgIGluc3RhbmNlLnNldFByb3BzKHtkdXJhdGlvbn0pO1xuICAgICAgaW5zdGFuY2UuaGlkZSgpO1xuXG4gICAgICBpZiAoIWluc3RhbmNlLnN0YXRlLmlzRGVzdHJveWVkKSB7XG4gICAgICAgIGluc3RhbmNlLnNldFByb3BzKHtkdXJhdGlvbjogb3JpZ2luYWxEdXJhdGlvbn0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuIiwgImltcG9ydCB0aXBweSBmcm9tICcuLic7XG5pbXBvcnQge2Rpdn0gZnJvbSAnLi4vZG9tLXV0aWxzJztcbmltcG9ydCB7XG4gIENyZWF0ZVNpbmdsZXRvbixcbiAgUGx1Z2luLFxuICBDcmVhdGVTaW5nbGV0b25Qcm9wcyxcbiAgUmVmZXJlbmNlRWxlbWVudCxcbiAgQ3JlYXRlU2luZ2xldG9uSW5zdGFuY2UsXG4gIEluc3RhbmNlLFxuICBQcm9wcyxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtub3JtYWxpemVUb0FycmF5LCByZW1vdmVQcm9wZXJ0aWVzfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQge2Vycm9yV2hlbn0gZnJvbSAnLi4vdmFsaWRhdGlvbic7XG5pbXBvcnQge2FwcGx5U3R5bGVzLCBNb2RpZmllcn0gZnJvbSAnQHBvcHBlcmpzL2NvcmUnO1xuXG4vLyBUaGUgZGVmYXVsdCBgYXBwbHlTdHlsZXNgIG1vZGlmaWVyIGhhcyBhIGNsZWFudXAgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZFxuLy8gZXZlcnkgdGltZSB0aGUgcG9wcGVyIGlzIGRlc3Ryb3llZCAoaS5lLiBhIG5ldyB0YXJnZXQpLCByZW1vdmluZyB0aGUgc3R5bGVzXG4vLyBhbmQgY2F1c2luZyB0cmFuc2l0aW9ucyB0byBicmVhayBmb3Igc2luZ2xldG9ucyB3aGVuIHRoZSBjb25zb2xlIGlzIG9wZW4sIGJ1dFxuLy8gbW9zdCBub3RhYmx5IGZvciBub24tdHJhbnNmb3JtIHN0eWxlcyBiZWluZyB1c2VkLCBgZ3B1QWNjZWxlcmF0aW9uOiBmYWxzZWAuXG5jb25zdCBhcHBseVN0eWxlc01vZGlmaWVyOiBNb2RpZmllcjwnYXBwbHlTdHlsZXMnLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gPSB7XG4gIC4uLmFwcGx5U3R5bGVzLFxuICBlZmZlY3Qoe3N0YXRlfSkge1xuICAgIGNvbnN0IGluaXRpYWxTdHlsZXMgPSB7XG4gICAgICBwb3BwZXI6IHtcbiAgICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICAgIGxlZnQ6ICcwJyxcbiAgICAgICAgdG9wOiAnMCcsXG4gICAgICAgIG1hcmdpbjogJzAnLFxuICAgICAgfSxcbiAgICAgIGFycm93OiB7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgfSxcbiAgICAgIHJlZmVyZW5jZToge30sXG4gICAgfTtcblxuICAgIE9iamVjdC5hc3NpZ24oc3RhdGUuZWxlbWVudHMucG9wcGVyLnN0eWxlLCBpbml0aWFsU3R5bGVzLnBvcHBlcik7XG4gICAgc3RhdGUuc3R5bGVzID0gaW5pdGlhbFN0eWxlcztcblxuICAgIGlmIChzdGF0ZS5lbGVtZW50cy5hcnJvdykge1xuICAgICAgT2JqZWN0LmFzc2lnbihzdGF0ZS5lbGVtZW50cy5hcnJvdy5zdHlsZSwgaW5pdGlhbFN0eWxlcy5hcnJvdyk7XG4gICAgfVxuXG4gICAgLy8gaW50ZW50aW9uYWxseSByZXR1cm4gbm8gY2xlYW51cCBmdW5jdGlvblxuICAgIC8vIHJldHVybiAoKSA9PiB7IC4uLiB9XG4gIH0sXG59O1xuXG5jb25zdCBjcmVhdGVTaW5nbGV0b246IENyZWF0ZVNpbmdsZXRvbiA9IChcbiAgdGlwcHlJbnN0YW5jZXMsXG4gIG9wdGlvbmFsUHJvcHMgPSB7fVxuKSA9PiB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChfX0RFVl9fKSB7XG4gICAgZXJyb3JXaGVuKFxuICAgICAgIUFycmF5LmlzQXJyYXkodGlwcHlJbnN0YW5jZXMpLFxuICAgICAgW1xuICAgICAgICAnVGhlIGZpcnN0IGFyZ3VtZW50IHBhc3NlZCB0byBjcmVhdGVTaW5nbGV0b24oKSBtdXN0IGJlIGFuIGFycmF5IG9mJyxcbiAgICAgICAgJ3RpcHB5IGluc3RhbmNlcy4gVGhlIHBhc3NlZCB2YWx1ZSB3YXMnLFxuICAgICAgICBTdHJpbmcodGlwcHlJbnN0YW5jZXMpLFxuICAgICAgXS5qb2luKCcgJylcbiAgICApO1xuICB9XG5cbiAgbGV0IGluZGl2aWR1YWxJbnN0YW5jZXMgPSB0aXBweUluc3RhbmNlcztcbiAgbGV0IHJlZmVyZW5jZXM6IEFycmF5PFJlZmVyZW5jZUVsZW1lbnQ+ID0gW107XG4gIGxldCB0cmlnZ2VyVGFyZ2V0czogQXJyYXk8RWxlbWVudD4gPSBbXTtcbiAgbGV0IGN1cnJlbnRUYXJnZXQ6IEVsZW1lbnQgfCBudWxsO1xuICBsZXQgb3ZlcnJpZGVzID0gb3B0aW9uYWxQcm9wcy5vdmVycmlkZXM7XG4gIGxldCBpbnRlcmNlcHRTZXRQcm9wc0NsZWFudXBzOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuICBsZXQgc2hvd25PbkNyZWF0ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIHNldFRyaWdnZXJUYXJnZXRzKCk6IHZvaWQge1xuICAgIHRyaWdnZXJUYXJnZXRzID0gaW5kaXZpZHVhbEluc3RhbmNlc1xuICAgICAgLm1hcCgoaW5zdGFuY2UpID0+XG4gICAgICAgIG5vcm1hbGl6ZVRvQXJyYXkoaW5zdGFuY2UucHJvcHMudHJpZ2dlclRhcmdldCB8fCBpbnN0YW5jZS5yZWZlcmVuY2UpXG4gICAgICApXG4gICAgICAucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYy5jb25jYXQoaXRlbSksIFtdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFJlZmVyZW5jZXMoKTogdm9pZCB7XG4gICAgcmVmZXJlbmNlcyA9IGluZGl2aWR1YWxJbnN0YW5jZXMubWFwKChpbnN0YW5jZSkgPT4gaW5zdGFuY2UucmVmZXJlbmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuYWJsZUluc3RhbmNlcyhpc0VuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpbmRpdmlkdWFsSW5zdGFuY2VzLmZvckVhY2goKGluc3RhbmNlKSA9PiB7XG4gICAgICBpZiAoaXNFbmFibGVkKSB7XG4gICAgICAgIGluc3RhbmNlLmVuYWJsZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zdGFuY2UuZGlzYWJsZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW50ZXJjZXB0U2V0UHJvcHMoc2luZ2xldG9uOiBJbnN0YW5jZSk6IEFycmF5PCgpID0+IHZvaWQ+IHtcbiAgICByZXR1cm4gaW5kaXZpZHVhbEluc3RhbmNlcy5tYXAoKGluc3RhbmNlKSA9PiB7XG4gICAgICBjb25zdCBvcmlnaW5hbFNldFByb3BzID0gaW5zdGFuY2Uuc2V0UHJvcHM7XG5cbiAgICAgIGluc3RhbmNlLnNldFByb3BzID0gKHByb3BzKTogdm9pZCA9PiB7XG4gICAgICAgIG9yaWdpbmFsU2V0UHJvcHMocHJvcHMpO1xuXG4gICAgICAgIGlmIChpbnN0YW5jZS5yZWZlcmVuY2UgPT09IGN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICBzaW5nbGV0b24uc2V0UHJvcHMocHJvcHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gKCk6IHZvaWQgPT4ge1xuICAgICAgICBpbnN0YW5jZS5zZXRQcm9wcyA9IG9yaWdpbmFsU2V0UHJvcHM7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLy8gaGF2ZSB0byBwYXNzIHNpbmdsZXRvbiwgYXMgaXQgbWF5YmUgdW5kZWZpbmVkIG9uIGZpcnN0IGNhbGxcbiAgZnVuY3Rpb24gcHJlcGFyZUluc3RhbmNlKFxuICAgIHNpbmdsZXRvbjogSW5zdGFuY2UsXG4gICAgdGFyZ2V0OiBSZWZlcmVuY2VFbGVtZW50XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdHJpZ2dlclRhcmdldHMuaW5kZXhPZih0YXJnZXQpO1xuXG4gICAgLy8gYmFpbC1vdXRcbiAgICBpZiAodGFyZ2V0ID09PSBjdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY3VycmVudFRhcmdldCA9IHRhcmdldDtcblxuICAgIGNvbnN0IG92ZXJyaWRlUHJvcHM6IFBhcnRpYWw8UHJvcHM+ID0gKG92ZXJyaWRlcyB8fCBbXSlcbiAgICAgIC5jb25jYXQoJ2NvbnRlbnQnKVxuICAgICAgLnJlZHVjZSgoYWNjLCBwcm9wKSA9PiB7XG4gICAgICAgIChhY2MgYXMgYW55KVtwcm9wXSA9IGluZGl2aWR1YWxJbnN0YW5jZXNbaW5kZXhdLnByb3BzW3Byb3BdO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge30pO1xuXG4gICAgc2luZ2xldG9uLnNldFByb3BzKHtcbiAgICAgIC4uLm92ZXJyaWRlUHJvcHMsXG4gICAgICBnZXRSZWZlcmVuY2VDbGllbnRSZWN0OlxuICAgICAgICB0eXBlb2Ygb3ZlcnJpZGVQcm9wcy5nZXRSZWZlcmVuY2VDbGllbnRSZWN0ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgPyBvdmVycmlkZVByb3BzLmdldFJlZmVyZW5jZUNsaWVudFJlY3RcbiAgICAgICAgICA6ICgpOiBDbGllbnRSZWN0ID0+IHJlZmVyZW5jZXNbaW5kZXhdPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZUluc3RhbmNlcyhmYWxzZSk7XG4gIHNldFJlZmVyZW5jZXMoKTtcbiAgc2V0VHJpZ2dlclRhcmdldHMoKTtcblxuICBjb25zdCBwbHVnaW46IFBsdWdpbiA9IHtcbiAgICBmbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9uRGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgICBlbmFibGVJbnN0YW5jZXModHJ1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uSGlkZGVuKCk6IHZvaWQge1xuICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBvbkNsaWNrT3V0c2lkZShpbnN0YW5jZSk6IHZvaWQge1xuICAgICAgICAgIGlmIChpbnN0YW5jZS5wcm9wcy5zaG93T25DcmVhdGUgJiYgIXNob3duT25DcmVhdGUpIHtcbiAgICAgICAgICAgIHNob3duT25DcmVhdGUgPSB0cnVlO1xuICAgICAgICAgICAgY3VycmVudFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvblNob3coaW5zdGFuY2UpOiB2b2lkIHtcbiAgICAgICAgICBpZiAoaW5zdGFuY2UucHJvcHMuc2hvd09uQ3JlYXRlICYmICFzaG93bk9uQ3JlYXRlKSB7XG4gICAgICAgICAgICBzaG93bk9uQ3JlYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHByZXBhcmVJbnN0YW5jZShpbnN0YW5jZSwgcmVmZXJlbmNlc1swXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvblRyaWdnZXIoaW5zdGFuY2UsIGV2ZW50KTogdm9pZCB7XG4gICAgICAgICAgcHJlcGFyZUluc3RhbmNlKGluc3RhbmNlLCBldmVudC5jdXJyZW50VGFyZ2V0IGFzIEVsZW1lbnQpO1xuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IHNpbmdsZXRvbiA9IHRpcHB5KGRpdigpLCB7XG4gICAgLi4ucmVtb3ZlUHJvcGVydGllcyhvcHRpb25hbFByb3BzLCBbJ292ZXJyaWRlcyddKSxcbiAgICBwbHVnaW5zOiBbcGx1Z2luLCAuLi4ob3B0aW9uYWxQcm9wcy5wbHVnaW5zIHx8IFtdKV0sXG4gICAgdHJpZ2dlclRhcmdldDogdHJpZ2dlclRhcmdldHMsXG4gICAgcG9wcGVyT3B0aW9uczoge1xuICAgICAgLi4ub3B0aW9uYWxQcm9wcy5wb3BwZXJPcHRpb25zLFxuICAgICAgbW9kaWZpZXJzOiBbXG4gICAgICAgIC4uLihvcHRpb25hbFByb3BzLnBvcHBlck9wdGlvbnM/Lm1vZGlmaWVycyB8fCBbXSksXG4gICAgICAgIGFwcGx5U3R5bGVzTW9kaWZpZXIsXG4gICAgICBdLFxuICAgIH0sXG4gIH0pIGFzIENyZWF0ZVNpbmdsZXRvbkluc3RhbmNlPENyZWF0ZVNpbmdsZXRvblByb3BzPjtcblxuICBjb25zdCBvcmlnaW5hbFNob3cgPSBzaW5nbGV0b24uc2hvdztcblxuICBzaW5nbGV0b24uc2hvdyA9ICh0YXJnZXQ/OiBSZWZlcmVuY2VFbGVtZW50IHwgSW5zdGFuY2UgfCBudW1iZXIpOiB2b2lkID0+IHtcbiAgICBvcmlnaW5hbFNob3coKTtcblxuICAgIC8vIGZpcnN0IHRpbWUsIHNob3dPbkNyZWF0ZSBvciBwcm9ncmFtbWF0aWMgY2FsbCB3aXRoIG5vIHBhcmFtc1xuICAgIC8vIGRlZmF1bHQgdG8gc2hvd2luZyBmaXJzdCBpbnN0YW5jZVxuICAgIGlmICghY3VycmVudFRhcmdldCAmJiB0YXJnZXQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHByZXBhcmVJbnN0YW5jZShzaW5nbGV0b24sIHJlZmVyZW5jZXNbMF0pO1xuICAgIH1cblxuICAgIC8vIHRyaWdnZXJlZCBmcm9tIGV2ZW50IChkbyBub3RoaW5nIGFzIHByZXBhcmVJbnN0YW5jZSBhbHJlYWR5IGNhbGxlZCBieSBvblRyaWdnZXIpXG4gICAgLy8gcHJvZ3JhbW1hdGljIGNhbGwgd2l0aCBubyBwYXJhbXMgd2hlbiBhbHJlYWR5IHZpc2libGUgKGRvIG5vdGhpbmcgYWdhaW4pXG4gICAgaWYgKGN1cnJlbnRUYXJnZXQgJiYgdGFyZ2V0ID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyB0YXJnZXQgaXMgaW5kZXggb2YgaW5zdGFuY2VcbiAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHJlZmVyZW5jZXNbdGFyZ2V0XSAmJiBwcmVwYXJlSW5zdGFuY2Uoc2luZ2xldG9uLCByZWZlcmVuY2VzW3RhcmdldF0pXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIHRhcmdldCBpcyBhIGNoaWxkIHRpcHB5IGluc3RhbmNlXG4gICAgaWYgKGluZGl2aWR1YWxJbnN0YW5jZXMuaW5kZXhPZih0YXJnZXQgYXMgSW5zdGFuY2UpID49IDApIHtcbiAgICAgIGNvbnN0IHJlZiA9ICh0YXJnZXQgYXMgSW5zdGFuY2UpLnJlZmVyZW5jZTtcbiAgICAgIHJldHVybiBwcmVwYXJlSW5zdGFuY2Uoc2luZ2xldG9uLCByZWYpO1xuICAgIH1cblxuICAgIC8vIHRhcmdldCBpcyBhIFJlZmVyZW5jZUVsZW1lbnRcbiAgICBpZiAocmVmZXJlbmNlcy5pbmRleE9mKHRhcmdldCBhcyBSZWZlcmVuY2VFbGVtZW50KSA+PSAwKSB7XG4gICAgICByZXR1cm4gcHJlcGFyZUluc3RhbmNlKHNpbmdsZXRvbiwgdGFyZ2V0IGFzIFJlZmVyZW5jZUVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBzaW5nbGV0b24uc2hvd05leHQgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgZmlyc3QgPSByZWZlcmVuY2VzWzBdO1xuICAgIGlmICghY3VycmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuIHNpbmdsZXRvbi5zaG93KDApO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IHJlZmVyZW5jZXMuaW5kZXhPZihjdXJyZW50VGFyZ2V0KTtcbiAgICBzaW5nbGV0b24uc2hvdyhyZWZlcmVuY2VzW2luZGV4ICsgMV0gfHwgZmlyc3QpO1xuICB9O1xuXG4gIHNpbmdsZXRvbi5zaG93UHJldmlvdXMgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgbGFzdCA9IHJlZmVyZW5jZXNbcmVmZXJlbmNlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybiBzaW5nbGV0b24uc2hvdyhsYXN0KTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSByZWZlcmVuY2VzLmluZGV4T2YoY3VycmVudFRhcmdldCk7XG4gICAgY29uc3QgdGFyZ2V0ID0gcmVmZXJlbmNlc1tpbmRleCAtIDFdIHx8IGxhc3Q7XG4gICAgc2luZ2xldG9uLnNob3codGFyZ2V0KTtcbiAgfTtcblxuICBjb25zdCBvcmlnaW5hbFNldFByb3BzID0gc2luZ2xldG9uLnNldFByb3BzO1xuXG4gIHNpbmdsZXRvbi5zZXRQcm9wcyA9IChwcm9wcyk6IHZvaWQgPT4ge1xuICAgIG92ZXJyaWRlcyA9IHByb3BzLm92ZXJyaWRlcyB8fCBvdmVycmlkZXM7XG4gICAgb3JpZ2luYWxTZXRQcm9wcyhwcm9wcyk7XG4gIH07XG5cbiAgc2luZ2xldG9uLnNldEluc3RhbmNlcyA9IChuZXh0SW5zdGFuY2VzKTogdm9pZCA9PiB7XG4gICAgZW5hYmxlSW5zdGFuY2VzKHRydWUpO1xuICAgIGludGVyY2VwdFNldFByb3BzQ2xlYW51cHMuZm9yRWFjaCgoZm4pID0+IGZuKCkpO1xuXG4gICAgaW5kaXZpZHVhbEluc3RhbmNlcyA9IG5leHRJbnN0YW5jZXM7XG5cbiAgICBlbmFibGVJbnN0YW5jZXMoZmFsc2UpO1xuICAgIHNldFJlZmVyZW5jZXMoKTtcbiAgICBzZXRUcmlnZ2VyVGFyZ2V0cygpO1xuICAgIGludGVyY2VwdFNldFByb3BzQ2xlYW51cHMgPSBpbnRlcmNlcHRTZXRQcm9wcyhzaW5nbGV0b24pO1xuXG4gICAgc2luZ2xldG9uLnNldFByb3BzKHt0cmlnZ2VyVGFyZ2V0OiB0cmlnZ2VyVGFyZ2V0c30pO1xuICB9O1xuXG4gIGludGVyY2VwdFNldFByb3BzQ2xlYW51cHMgPSBpbnRlcmNlcHRTZXRQcm9wcyhzaW5nbGV0b24pO1xuXG4gIHJldHVybiBzaW5nbGV0b247XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVTaW5nbGV0b247XG4iLCAiaW1wb3J0IHRpcHB5IGZyb20gJy4uJztcbmltcG9ydCB7VE9VQ0hfT1BUSU9OU30gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7ZGVmYXVsdFByb3BzfSBmcm9tICcuLi9wcm9wcyc7XG5pbXBvcnQge0luc3RhbmNlLCBQcm9wcywgVGFyZ2V0c30gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtMaXN0ZW5lck9iamVjdH0gZnJvbSAnLi4vdHlwZXMtaW50ZXJuYWwnO1xuaW1wb3J0IHtub3JtYWxpemVUb0FycmF5LCByZW1vdmVQcm9wZXJ0aWVzfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQge2Vycm9yV2hlbn0gZnJvbSAnLi4vdmFsaWRhdGlvbic7XG5cbmNvbnN0IEJVQkJMSU5HX0VWRU5UU19NQVAgPSB7XG4gIG1vdXNlb3ZlcjogJ21vdXNlZW50ZXInLFxuICBmb2N1c2luOiAnZm9jdXMnLFxuICBjbGljazogJ2NsaWNrJyxcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlbGVnYXRlIGluc3RhbmNlIHRoYXQgY29udHJvbHMgdGhlIGNyZWF0aW9uIG9mIHRpcHB5IGluc3RhbmNlc1xuICogZm9yIGNoaWxkIGVsZW1lbnRzIChgdGFyZ2V0YCBDU1Mgc2VsZWN0b3IpLlxuICovXG5mdW5jdGlvbiBkZWxlZ2F0ZShcbiAgdGFyZ2V0czogVGFyZ2V0cyxcbiAgcHJvcHM6IFBhcnRpYWw8UHJvcHM+ICYge3RhcmdldDogc3RyaW5nfVxuKTogSW5zdGFuY2UgfCBJbnN0YW5jZVtdIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKF9fREVWX18pIHtcbiAgICBlcnJvcldoZW4oXG4gICAgICAhKHByb3BzICYmIHByb3BzLnRhcmdldCksXG4gICAgICBbXG4gICAgICAgICdZb3UgbXVzdCBzcGVjaXR5IGEgYHRhcmdldGAgcHJvcCBpbmRpY2F0aW5nIGEgQ1NTIHNlbGVjdG9yIHN0cmluZyBtYXRjaGluZycsXG4gICAgICAgICd0aGUgdGFyZ2V0IGVsZW1lbnRzIHRoYXQgc2hvdWxkIHJlY2VpdmUgYSB0aXBweS4nLFxuICAgICAgXS5qb2luKCcgJylcbiAgICApO1xuICB9XG5cbiAgbGV0IGxpc3RlbmVyczogTGlzdGVuZXJPYmplY3RbXSA9IFtdO1xuICBsZXQgY2hpbGRUaXBweUluc3RhbmNlczogSW5zdGFuY2VbXSA9IFtdO1xuICBsZXQgZGlzYWJsZWQgPSBmYWxzZTtcblxuICBjb25zdCB7dGFyZ2V0fSA9IHByb3BzO1xuXG4gIGNvbnN0IG5hdGl2ZVByb3BzID0gcmVtb3ZlUHJvcGVydGllcyhwcm9wcywgWyd0YXJnZXQnXSk7XG4gIGNvbnN0IHBhcmVudFByb3BzID0gey4uLm5hdGl2ZVByb3BzLCB0cmlnZ2VyOiAnbWFudWFsJywgdG91Y2g6IGZhbHNlfTtcbiAgY29uc3QgY2hpbGRQcm9wcyA9IHtcbiAgICB0b3VjaDogZGVmYXVsdFByb3BzLnRvdWNoLFxuICAgIC4uLm5hdGl2ZVByb3BzLFxuICAgIHNob3dPbkNyZWF0ZTogdHJ1ZSxcbiAgfTtcblxuICBjb25zdCByZXR1cm5WYWx1ZSA9IHRpcHB5KHRhcmdldHMsIHBhcmVudFByb3BzKTtcbiAgY29uc3Qgbm9ybWFsaXplZFJldHVyblZhbHVlID0gbm9ybWFsaXplVG9BcnJheShyZXR1cm5WYWx1ZSk7XG5cbiAgZnVuY3Rpb24gb25UcmlnZ2VyKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmICghZXZlbnQudGFyZ2V0IHx8IGRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0Tm9kZSA9IChldmVudC50YXJnZXQgYXMgRWxlbWVudCkuY2xvc2VzdCh0YXJnZXQpO1xuXG4gICAgaWYgKCF0YXJnZXROb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2V0IHJlbGV2YW50IHRyaWdnZXIgd2l0aCBmYWxsYmFja3M6XG4gICAgLy8gMS4gQ2hlY2sgYGRhdGEtdGlwcHktdHJpZ2dlcmAgYXR0cmlidXRlIG9uIHRhcmdldCBub2RlXG4gICAgLy8gMi4gRmFsbGJhY2sgdG8gYHRyaWdnZXJgIHBhc3NlZCB0byBgZGVsZWdhdGUoKWBcbiAgICAvLyAzLiBGYWxsYmFjayB0byBgZGVmYXVsdFByb3BzLnRyaWdnZXJgXG4gICAgY29uc3QgdHJpZ2dlciA9XG4gICAgICB0YXJnZXROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS10aXBweS10cmlnZ2VyJykgfHxcbiAgICAgIHByb3BzLnRyaWdnZXIgfHxcbiAgICAgIGRlZmF1bHRQcm9wcy50cmlnZ2VyO1xuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmICh0YXJnZXROb2RlLl90aXBweSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2hzdGFydCcgJiYgdHlwZW9mIGNoaWxkUHJvcHMudG91Y2ggPT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGV2ZW50LnR5cGUgIT09ICd0b3VjaHN0YXJ0JyAmJlxuICAgICAgdHJpZ2dlci5pbmRleE9mKChCVUJCTElOR19FVkVOVFNfTUFQIGFzIGFueSlbZXZlbnQudHlwZV0pIDwgMFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGluc3RhbmNlID0gdGlwcHkodGFyZ2V0Tm9kZSwgY2hpbGRQcm9wcyk7XG5cbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgIGNoaWxkVGlwcHlJbnN0YW5jZXMgPSBjaGlsZFRpcHB5SW5zdGFuY2VzLmNvbmNhdChpbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb24oXG4gICAgbm9kZTogRWxlbWVudCxcbiAgICBldmVudFR5cGU6IHN0cmluZyxcbiAgICBoYW5kbGVyOiBFdmVudExpc3RlbmVyLFxuICAgIG9wdGlvbnM6IGJvb2xlYW4gfCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IGZhbHNlXG4gICk6IHZvaWQge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIGxpc3RlbmVycy5wdXNoKHtub2RlLCBldmVudFR5cGUsIGhhbmRsZXIsIG9wdGlvbnN9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKGluc3RhbmNlOiBJbnN0YW5jZSk6IHZvaWQge1xuICAgIGNvbnN0IHtyZWZlcmVuY2V9ID0gaW5zdGFuY2U7XG5cbiAgICBvbihyZWZlcmVuY2UsICd0b3VjaHN0YXJ0Jywgb25UcmlnZ2VyLCBUT1VDSF9PUFRJT05TKTtcbiAgICBvbihyZWZlcmVuY2UsICdtb3VzZW92ZXInLCBvblRyaWdnZXIpO1xuICAgIG9uKHJlZmVyZW5jZSwgJ2ZvY3VzaW4nLCBvblRyaWdnZXIpO1xuICAgIG9uKHJlZmVyZW5jZSwgJ2NsaWNrJywgb25UcmlnZ2VyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGxpc3RlbmVycy5mb3JFYWNoKCh7bm9kZSwgZXZlbnRUeXBlLCBoYW5kbGVyLCBvcHRpb25zfTogTGlzdGVuZXJPYmplY3QpID0+IHtcbiAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIH0pO1xuICAgIGxpc3RlbmVycyA9IFtdO1xuICB9XG5cbiAgZnVuY3Rpb24gYXBwbHlNdXRhdGlvbnMoaW5zdGFuY2U6IEluc3RhbmNlKTogdm9pZCB7XG4gICAgY29uc3Qgb3JpZ2luYWxEZXN0cm95ID0gaW5zdGFuY2UuZGVzdHJveTtcbiAgICBjb25zdCBvcmlnaW5hbEVuYWJsZSA9IGluc3RhbmNlLmVuYWJsZTtcbiAgICBjb25zdCBvcmlnaW5hbERpc2FibGUgPSBpbnN0YW5jZS5kaXNhYmxlO1xuXG4gICAgaW5zdGFuY2UuZGVzdHJveSA9IChzaG91bGREZXN0cm95Q2hpbGRJbnN0YW5jZXMgPSB0cnVlKTogdm9pZCA9PiB7XG4gICAgICBpZiAoc2hvdWxkRGVzdHJveUNoaWxkSW5zdGFuY2VzKSB7XG4gICAgICAgIGNoaWxkVGlwcHlJbnN0YW5jZXMuZm9yRWFjaCgoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgICBpbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjaGlsZFRpcHB5SW5zdGFuY2VzID0gW107XG5cbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICBvcmlnaW5hbERlc3Ryb3koKTtcbiAgICB9O1xuXG4gICAgaW5zdGFuY2UuZW5hYmxlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgb3JpZ2luYWxFbmFibGUoKTtcbiAgICAgIGNoaWxkVGlwcHlJbnN0YW5jZXMuZm9yRWFjaCgoaW5zdGFuY2UpID0+IGluc3RhbmNlLmVuYWJsZSgpKTtcbiAgICAgIGRpc2FibGVkID0gZmFsc2U7XG4gICAgfTtcblxuICAgIGluc3RhbmNlLmRpc2FibGUgPSAoKTogdm9pZCA9PiB7XG4gICAgICBvcmlnaW5hbERpc2FibGUoKTtcbiAgICAgIGNoaWxkVGlwcHlJbnN0YW5jZXMuZm9yRWFjaCgoaW5zdGFuY2UpID0+IGluc3RhbmNlLmRpc2FibGUoKSk7XG4gICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKGluc3RhbmNlKTtcbiAgfVxuXG4gIG5vcm1hbGl6ZWRSZXR1cm5WYWx1ZS5mb3JFYWNoKGFwcGx5TXV0YXRpb25zKTtcblxuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRlbGVnYXRlO1xuIiwgImltcG9ydCB7QkFDS0RST1BfQ0xBU1N9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQge2Rpdiwgc2V0VmlzaWJpbGl0eVN0YXRlfSBmcm9tICcuLi9kb20tdXRpbHMnO1xuaW1wb3J0IHtnZXRDaGlsZHJlbn0gZnJvbSAnLi4vdGVtcGxhdGUnO1xuaW1wb3J0IHtBbmltYXRlRmlsbH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtlcnJvcldoZW59IGZyb20gJy4uL3ZhbGlkYXRpb24nO1xuXG5jb25zdCBhbmltYXRlRmlsbDogQW5pbWF0ZUZpbGwgPSB7XG4gIG5hbWU6ICdhbmltYXRlRmlsbCcsXG4gIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gIGZuKGluc3RhbmNlKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmICghaW5zdGFuY2UucHJvcHMucmVuZGVyPy4kJHRpcHB5KSB7XG4gICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICBlcnJvcldoZW4oXG4gICAgICAgICAgaW5zdGFuY2UucHJvcHMuYW5pbWF0ZUZpbGwsXG4gICAgICAgICAgJ1RoZSBgYW5pbWF0ZUZpbGxgIHBsdWdpbiByZXF1aXJlcyB0aGUgZGVmYXVsdCByZW5kZXIgZnVuY3Rpb24uJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgY29uc3Qge2JveCwgY29udGVudH0gPSBnZXRDaGlsZHJlbihpbnN0YW5jZS5wb3BwZXIpO1xuXG4gICAgY29uc3QgYmFja2Ryb3AgPSBpbnN0YW5jZS5wcm9wcy5hbmltYXRlRmlsbFxuICAgICAgPyBjcmVhdGVCYWNrZHJvcEVsZW1lbnQoKVxuICAgICAgOiBudWxsO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG9uQ3JlYXRlKCk6IHZvaWQge1xuICAgICAgICBpZiAoYmFja2Ryb3ApIHtcbiAgICAgICAgICBib3guaW5zZXJ0QmVmb3JlKGJhY2tkcm9wLCBib3guZmlyc3RFbGVtZW50Q2hpbGQhKTtcbiAgICAgICAgICBib3guc2V0QXR0cmlidXRlKCdkYXRhLWFuaW1hdGVmaWxsJywgJycpO1xuICAgICAgICAgIGJveC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG4gICAgICAgICAgaW5zdGFuY2Uuc2V0UHJvcHMoe2Fycm93OiBmYWxzZSwgYW5pbWF0aW9uOiAnc2hpZnQtYXdheSd9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uTW91bnQoKTogdm9pZCB7XG4gICAgICAgIGlmIChiYWNrZHJvcCkge1xuICAgICAgICAgIGNvbnN0IHt0cmFuc2l0aW9uRHVyYXRpb259ID0gYm94LnN0eWxlO1xuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gTnVtYmVyKHRyYW5zaXRpb25EdXJhdGlvbi5yZXBsYWNlKCdtcycsICcnKSk7XG5cbiAgICAgICAgICAvLyBUaGUgY29udGVudCBzaG91bGQgZmFkZSBpbiBhZnRlciB0aGUgYmFja2Ryb3AgaGFzIG1vc3RseSBmaWxsZWQgdGhlXG4gICAgICAgICAgLy8gdG9vbHRpcCBlbGVtZW50LiBgY2xpcC1wYXRoYCBpcyB0aGUgb3RoZXIgYWx0ZXJuYXRpdmUgYnV0IGlzIG5vdFxuICAgICAgICAgIC8vIHdlbGwtc3VwcG9ydGVkIGFuZCBpcyBidWdneSBvbiBzb21lIGRldmljZXMuXG4gICAgICAgICAgY29udGVudC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSBgJHtNYXRoLnJvdW5kKGR1cmF0aW9uIC8gMTApfW1zYDtcblxuICAgICAgICAgIGJhY2tkcm9wLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbjtcbiAgICAgICAgICBzZXRWaXNpYmlsaXR5U3RhdGUoW2JhY2tkcm9wXSwgJ3Zpc2libGUnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uU2hvdygpOiB2b2lkIHtcbiAgICAgICAgaWYgKGJhY2tkcm9wKSB7XG4gICAgICAgICAgYmFja2Ryb3Auc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gJzBtcyc7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkhpZGUoKTogdm9pZCB7XG4gICAgICAgIGlmIChiYWNrZHJvcCkge1xuICAgICAgICAgIHNldFZpc2liaWxpdHlTdGF0ZShbYmFja2Ryb3BdLCAnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFuaW1hdGVGaWxsO1xuXG5mdW5jdGlvbiBjcmVhdGVCYWNrZHJvcEVsZW1lbnQoKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBiYWNrZHJvcCA9IGRpdigpO1xuICBiYWNrZHJvcC5jbGFzc05hbWUgPSBCQUNLRFJPUF9DTEFTUztcbiAgc2V0VmlzaWJpbGl0eVN0YXRlKFtiYWNrZHJvcF0sICdoaWRkZW4nKTtcbiAgcmV0dXJuIGJhY2tkcm9wO1xufVxuIiwgImltcG9ydCB7Z2V0T3duZXJEb2N1bWVudCwgaXNNb3VzZUV2ZW50fSBmcm9tICcuLi9kb20tdXRpbHMnO1xuaW1wb3J0IHtGb2xsb3dDdXJzb3IsIEluc3RhbmNlfSBmcm9tICcuLi90eXBlcyc7XG5cbmxldCBtb3VzZUNvb3JkcyA9IHtjbGllbnRYOiAwLCBjbGllbnRZOiAwfTtcbmxldCBhY3RpdmVJbnN0YW5jZXM6IEFycmF5PHtpbnN0YW5jZTogSW5zdGFuY2U7IGRvYzogRG9jdW1lbnR9PiA9IFtdO1xuXG5mdW5jdGlvbiBzdG9yZU1vdXNlQ29vcmRzKHtjbGllbnRYLCBjbGllbnRZfTogTW91c2VFdmVudCk6IHZvaWQge1xuICBtb3VzZUNvb3JkcyA9IHtjbGllbnRYLCBjbGllbnRZfTtcbn1cblxuZnVuY3Rpb24gYWRkTW91c2VDb29yZHNMaXN0ZW5lcihkb2M6IERvY3VtZW50KTogdm9pZCB7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzdG9yZU1vdXNlQ29vcmRzKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTW91c2VDb29yZHNMaXN0ZW5lcihkb2M6IERvY3VtZW50KTogdm9pZCB7XG4gIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzdG9yZU1vdXNlQ29vcmRzKTtcbn1cblxuY29uc3QgZm9sbG93Q3Vyc29yOiBGb2xsb3dDdXJzb3IgPSB7XG4gIG5hbWU6ICdmb2xsb3dDdXJzb3InLFxuICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICBmbihpbnN0YW5jZSkge1xuICAgIGNvbnN0IHJlZmVyZW5jZSA9IGluc3RhbmNlLnJlZmVyZW5jZTtcbiAgICBjb25zdCBkb2MgPSBnZXRPd25lckRvY3VtZW50KGluc3RhbmNlLnByb3BzLnRyaWdnZXJUYXJnZXQgfHwgcmVmZXJlbmNlKTtcblxuICAgIGxldCBpc0ludGVybmFsVXBkYXRlID0gZmFsc2U7XG4gICAgbGV0IHdhc0ZvY3VzRXZlbnQgPSBmYWxzZTtcbiAgICBsZXQgaXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgIGxldCBwcmV2UHJvcHMgPSBpbnN0YW5jZS5wcm9wcztcblxuICAgIGZ1bmN0aW9uIGdldElzSW5pdGlhbEJlaGF2aW9yKCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaW5zdGFuY2UucHJvcHMuZm9sbG93Q3Vyc29yID09PSAnaW5pdGlhbCcgJiYgaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZExpc3RlbmVyKCk6IHZvaWQge1xuICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5zZXRHZXRSZWZlcmVuY2VDbGllbnRSZWN0KCk6IHZvaWQge1xuICAgICAgaXNJbnRlcm5hbFVwZGF0ZSA9IHRydWU7XG4gICAgICBpbnN0YW5jZS5zZXRQcm9wcyh7Z2V0UmVmZXJlbmNlQ2xpZW50UmVjdDogbnVsbH0pO1xuICAgICAgaXNJbnRlcm5hbFVwZGF0ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgICAvLyBJZiB0aGUgaW5zdGFuY2UgaXMgaW50ZXJhY3RpdmUsIGF2b2lkIHVwZGF0aW5nIHRoZSBwb3NpdGlvbiB1bmxlc3MgaXQnc1xuICAgICAgLy8gb3ZlciB0aGUgcmVmZXJlbmNlIGVsZW1lbnRcbiAgICAgIGNvbnN0IGlzQ3Vyc29yT3ZlclJlZmVyZW5jZSA9IGV2ZW50LnRhcmdldFxuICAgICAgICA/IHJlZmVyZW5jZS5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSlcbiAgICAgICAgOiB0cnVlO1xuICAgICAgY29uc3Qge2ZvbGxvd0N1cnNvcn0gPSBpbnN0YW5jZS5wcm9wcztcbiAgICAgIGNvbnN0IHtjbGllbnRYLCBjbGllbnRZfSA9IGV2ZW50O1xuXG4gICAgICBjb25zdCByZWN0ID0gcmVmZXJlbmNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgY29uc3QgcmVsYXRpdmVYID0gY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICAgIGNvbnN0IHJlbGF0aXZlWSA9IGNsaWVudFkgLSByZWN0LnRvcDtcblxuICAgICAgaWYgKGlzQ3Vyc29yT3ZlclJlZmVyZW5jZSB8fCAhaW5zdGFuY2UucHJvcHMuaW50ZXJhY3RpdmUpIHtcbiAgICAgICAgaW5zdGFuY2Uuc2V0UHJvcHMoe1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLSB1bm5lZWRlZCBET01SZWN0IHByb3BlcnRpZXNcbiAgICAgICAgICBnZXRSZWZlcmVuY2VDbGllbnRSZWN0KCkge1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHJlZmVyZW5jZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgbGV0IHggPSBjbGllbnRYO1xuICAgICAgICAgICAgbGV0IHkgPSBjbGllbnRZO1xuXG4gICAgICAgICAgICBpZiAoZm9sbG93Q3Vyc29yID09PSAnaW5pdGlhbCcpIHtcbiAgICAgICAgICAgICAgeCA9IHJlY3QubGVmdCArIHJlbGF0aXZlWDtcbiAgICAgICAgICAgICAgeSA9IHJlY3QudG9wICsgcmVsYXRpdmVZO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0b3AgPSBmb2xsb3dDdXJzb3IgPT09ICdob3Jpem9udGFsJyA/IHJlY3QudG9wIDogeTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gZm9sbG93Q3Vyc29yID09PSAndmVydGljYWwnID8gcmVjdC5yaWdodCA6IHg7XG4gICAgICAgICAgICBjb25zdCBib3R0b20gPSBmb2xsb3dDdXJzb3IgPT09ICdob3Jpem9udGFsJyA/IHJlY3QuYm90dG9tIDogeTtcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBmb2xsb3dDdXJzb3IgPT09ICd2ZXJ0aWNhbCcgPyByZWN0LmxlZnQgOiB4O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB3aWR0aDogcmlnaHQgLSBsZWZ0LFxuICAgICAgICAgICAgICBoZWlnaHQ6IGJvdHRvbSAtIHRvcCxcbiAgICAgICAgICAgICAgdG9wLFxuICAgICAgICAgICAgICByaWdodCxcbiAgICAgICAgICAgICAgYm90dG9tLFxuICAgICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGUoKTogdm9pZCB7XG4gICAgICBpZiAoaW5zdGFuY2UucHJvcHMuZm9sbG93Q3Vyc29yKSB7XG4gICAgICAgIGFjdGl2ZUluc3RhbmNlcy5wdXNoKHtpbnN0YW5jZSwgZG9jfSk7XG4gICAgICAgIGFkZE1vdXNlQ29vcmRzTGlzdGVuZXIoZG9jKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgYWN0aXZlSW5zdGFuY2VzID0gYWN0aXZlSW5zdGFuY2VzLmZpbHRlcihcbiAgICAgICAgKGRhdGEpID0+IGRhdGEuaW5zdGFuY2UgIT09IGluc3RhbmNlXG4gICAgICApO1xuXG4gICAgICBpZiAoYWN0aXZlSW5zdGFuY2VzLmZpbHRlcigoZGF0YSkgPT4gZGF0YS5kb2MgPT09IGRvYykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZU1vdXNlQ29vcmRzTGlzdGVuZXIoZG9jKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb25DcmVhdGU6IGNyZWF0ZSxcbiAgICAgIG9uRGVzdHJveTogZGVzdHJveSxcbiAgICAgIG9uQmVmb3JlVXBkYXRlKCk6IHZvaWQge1xuICAgICAgICBwcmV2UHJvcHMgPSBpbnN0YW5jZS5wcm9wcztcbiAgICAgIH0sXG4gICAgICBvbkFmdGVyVXBkYXRlKF8sIHtmb2xsb3dDdXJzb3J9KTogdm9pZCB7XG4gICAgICAgIGlmIChpc0ludGVybmFsVXBkYXRlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZvbGxvd0N1cnNvciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgcHJldlByb3BzLmZvbGxvd0N1cnNvciAhPT0gZm9sbG93Q3Vyc29yXG4gICAgICAgICkge1xuICAgICAgICAgIGRlc3Ryb3koKTtcblxuICAgICAgICAgIGlmIChmb2xsb3dDdXJzb3IpIHtcbiAgICAgICAgICAgIGNyZWF0ZSgpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCAmJlxuICAgICAgICAgICAgICAhd2FzRm9jdXNFdmVudCAmJlxuICAgICAgICAgICAgICAhZ2V0SXNJbml0aWFsQmVoYXZpb3IoKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGFkZExpc3RlbmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKCk7XG4gICAgICAgICAgICB1bnNldEdldFJlZmVyZW5jZUNsaWVudFJlY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbk1vdW50KCk6IHZvaWQge1xuICAgICAgICBpZiAoaW5zdGFuY2UucHJvcHMuZm9sbG93Q3Vyc29yICYmICF3YXNGb2N1c0V2ZW50KSB7XG4gICAgICAgICAgaWYgKGlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgICBvbk1vdXNlTW92ZShtb3VzZUNvb3JkcyBhcyBNb3VzZUV2ZW50KTtcbiAgICAgICAgICAgIGlzVW5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFnZXRJc0luaXRpYWxCZWhhdmlvcigpKSB7XG4gICAgICAgICAgICBhZGRMaXN0ZW5lcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uVHJpZ2dlcihfLCBldmVudCk6IHZvaWQge1xuICAgICAgICBpZiAoaXNNb3VzZUV2ZW50KGV2ZW50KSkge1xuICAgICAgICAgIG1vdXNlQ29vcmRzID0ge2NsaWVudFg6IGV2ZW50LmNsaWVudFgsIGNsaWVudFk6IGV2ZW50LmNsaWVudFl9O1xuICAgICAgICB9XG4gICAgICAgIHdhc0ZvY3VzRXZlbnQgPSBldmVudC50eXBlID09PSAnZm9jdXMnO1xuICAgICAgfSxcbiAgICAgIG9uSGlkZGVuKCk6IHZvaWQge1xuICAgICAgICBpZiAoaW5zdGFuY2UucHJvcHMuZm9sbG93Q3Vyc29yKSB7XG4gICAgICAgICAgdW5zZXRHZXRSZWZlcmVuY2VDbGllbnRSZWN0KCk7XG4gICAgICAgICAgcmVtb3ZlTGlzdGVuZXIoKTtcbiAgICAgICAgICBpc1VubW91bnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZvbGxvd0N1cnNvcjtcbiIsICJpbXBvcnQge01vZGlmaWVyLCBQbGFjZW1lbnR9IGZyb20gJ0Bwb3BwZXJqcy9jb3JlJztcbmltcG9ydCB7aXNNb3VzZUV2ZW50fSBmcm9tICcuLi9kb20tdXRpbHMnO1xuaW1wb3J0IHtCYXNlUGxhY2VtZW50LCBJbmxpbmVQb3NpdGlvbmluZywgUHJvcHN9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7YXJyYXlGcm9tLCBnZXRCYXNlUGxhY2VtZW50fSBmcm9tICcuLi91dGlscyc7XG5cbmZ1bmN0aW9uIGdldFByb3BzKHByb3BzOiBQcm9wcywgbW9kaWZpZXI6IE1vZGlmaWVyPGFueSwgYW55Pik6IFBhcnRpYWw8UHJvcHM+IHtcbiAgcmV0dXJuIHtcbiAgICBwb3BwZXJPcHRpb25zOiB7XG4gICAgICAuLi5wcm9wcy5wb3BwZXJPcHRpb25zLFxuICAgICAgbW9kaWZpZXJzOiBbXG4gICAgICAgIC4uLihwcm9wcy5wb3BwZXJPcHRpb25zPy5tb2RpZmllcnMgfHwgW10pLmZpbHRlcihcbiAgICAgICAgICAoe25hbWV9KSA9PiBuYW1lICE9PSBtb2RpZmllci5uYW1lXG4gICAgICAgICksXG4gICAgICAgIG1vZGlmaWVyLFxuICAgICAgXSxcbiAgICB9LFxuICB9O1xufVxuXG5jb25zdCBpbmxpbmVQb3NpdGlvbmluZzogSW5saW5lUG9zaXRpb25pbmcgPSB7XG4gIG5hbWU6ICdpbmxpbmVQb3NpdGlvbmluZycsXG4gIGRlZmF1bHRWYWx1ZTogZmFsc2UsXG4gIGZuKGluc3RhbmNlKSB7XG4gICAgY29uc3Qge3JlZmVyZW5jZX0gPSBpbnN0YW5jZTtcblxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiAhIWluc3RhbmNlLnByb3BzLmlubGluZVBvc2l0aW9uaW5nO1xuICAgIH1cblxuICAgIGxldCBwbGFjZW1lbnQ6IFBsYWNlbWVudDtcbiAgICBsZXQgY3Vyc29yUmVjdEluZGV4ID0gLTE7XG4gICAgbGV0IGlzSW50ZXJuYWxVcGRhdGUgPSBmYWxzZTtcbiAgICBsZXQgdHJpZWRQbGFjZW1lbnRzOiBBcnJheTxzdHJpbmc+ID0gW107XG5cbiAgICBjb25zdCBtb2RpZmllcjogTW9kaWZpZXI8XG4gICAgICAndGlwcHlJbmxpbmVQb3NpdGlvbmluZycsXG4gICAgICBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgID4gPSB7XG4gICAgICBuYW1lOiAndGlwcHlJbmxpbmVQb3NpdGlvbmluZycsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgcGhhc2U6ICdhZnRlcldyaXRlJyxcbiAgICAgIGZuKHtzdGF0ZX0pIHtcbiAgICAgICAgaWYgKGlzRW5hYmxlZCgpKSB7XG4gICAgICAgICAgaWYgKHRyaWVkUGxhY2VtZW50cy5pbmRleE9mKHN0YXRlLnBsYWNlbWVudCkgIT09IC0xKSB7XG4gICAgICAgICAgICB0cmllZFBsYWNlbWVudHMgPSBbXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGFjZW1lbnQgIT09IHN0YXRlLnBsYWNlbWVudCAmJlxuICAgICAgICAgICAgdHJpZWRQbGFjZW1lbnRzLmluZGV4T2Yoc3RhdGUucGxhY2VtZW50KSA9PT0gLTFcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRyaWVkUGxhY2VtZW50cy5wdXNoKHN0YXRlLnBsYWNlbWVudCk7XG4gICAgICAgICAgICBpbnN0YW5jZS5zZXRQcm9wcyh7XG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgLSB1bm5lZWRlZCBET01SZWN0IHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdDogKCkgPT5cbiAgICAgICAgICAgICAgICBnZXRSZWZlcmVuY2VDbGllbnRSZWN0KHN0YXRlLnBsYWNlbWVudCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwbGFjZW1lbnQgPSBzdGF0ZS5wbGFjZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFJlZmVyZW5jZUNsaWVudFJlY3QocGxhY2VtZW50OiBQbGFjZW1lbnQpOiBQYXJ0aWFsPERPTVJlY3Q+IHtcbiAgICAgIHJldHVybiBnZXRJbmxpbmVCb3VuZGluZ0NsaWVudFJlY3QoXG4gICAgICAgIGdldEJhc2VQbGFjZW1lbnQocGxhY2VtZW50KSxcbiAgICAgICAgcmVmZXJlbmNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICBhcnJheUZyb20ocmVmZXJlbmNlLmdldENsaWVudFJlY3RzKCkpLFxuICAgICAgICBjdXJzb3JSZWN0SW5kZXhcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0SW50ZXJuYWxQcm9wcyhwYXJ0aWFsUHJvcHM6IFBhcnRpYWw8UHJvcHM+KTogdm9pZCB7XG4gICAgICBpc0ludGVybmFsVXBkYXRlID0gdHJ1ZTtcbiAgICAgIGluc3RhbmNlLnNldFByb3BzKHBhcnRpYWxQcm9wcyk7XG4gICAgICBpc0ludGVybmFsVXBkYXRlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkTW9kaWZpZXIoKTogdm9pZCB7XG4gICAgICBpZiAoIWlzSW50ZXJuYWxVcGRhdGUpIHtcbiAgICAgICAgc2V0SW50ZXJuYWxQcm9wcyhnZXRQcm9wcyhpbnN0YW5jZS5wcm9wcywgbW9kaWZpZXIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb25DcmVhdGU6IGFkZE1vZGlmaWVyLFxuICAgICAgb25BZnRlclVwZGF0ZTogYWRkTW9kaWZpZXIsXG4gICAgICBvblRyaWdnZXIoXywgZXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTW91c2VFdmVudChldmVudCkpIHtcbiAgICAgICAgICBjb25zdCByZWN0cyA9IGFycmF5RnJvbShpbnN0YW5jZS5yZWZlcmVuY2UuZ2V0Q2xpZW50UmVjdHMoKSk7XG4gICAgICAgICAgY29uc3QgY3Vyc29yUmVjdCA9IHJlY3RzLmZpbmQoXG4gICAgICAgICAgICAocmVjdCkgPT5cbiAgICAgICAgICAgICAgcmVjdC5sZWZ0IC0gMiA8PSBldmVudC5jbGllbnRYICYmXG4gICAgICAgICAgICAgIHJlY3QucmlnaHQgKyAyID49IGV2ZW50LmNsaWVudFggJiZcbiAgICAgICAgICAgICAgcmVjdC50b3AgLSAyIDw9IGV2ZW50LmNsaWVudFkgJiZcbiAgICAgICAgICAgICAgcmVjdC5ib3R0b20gKyAyID49IGV2ZW50LmNsaWVudFlcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcmVjdHMuaW5kZXhPZihjdXJzb3JSZWN0KTtcbiAgICAgICAgICBjdXJzb3JSZWN0SW5kZXggPSBpbmRleCA+IC0xID8gaW5kZXggOiBjdXJzb3JSZWN0SW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkhpZGRlbigpOiB2b2lkIHtcbiAgICAgICAgY3Vyc29yUmVjdEluZGV4ID0gLTE7XG4gICAgICB9LFxuICAgIH07XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbmxpbmVQb3NpdGlvbmluZztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldElubGluZUJvdW5kaW5nQ2xpZW50UmVjdChcbiAgY3VycmVudEJhc2VQbGFjZW1lbnQ6IEJhc2VQbGFjZW1lbnQgfCBudWxsLFxuICBib3VuZGluZ1JlY3Q6IERPTVJlY3QsXG4gIGNsaWVudFJlY3RzOiBET01SZWN0W10sXG4gIGN1cnNvclJlY3RJbmRleDogbnVtYmVyXG4pOiB7XG4gIHRvcDogbnVtYmVyO1xuICBib3R0b206IG51bWJlcjtcbiAgbGVmdDogbnVtYmVyO1xuICByaWdodDogbnVtYmVyO1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn0ge1xuICAvLyBOb3QgYW4gaW5saW5lIGVsZW1lbnQsIG9yIHBsYWNlbWVudCBpcyBub3QgeWV0IGtub3duXG4gIGlmIChjbGllbnRSZWN0cy5sZW5ndGggPCAyIHx8IGN1cnJlbnRCYXNlUGxhY2VtZW50ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGJvdW5kaW5nUmVjdDtcbiAgfVxuXG4gIC8vIFRoZXJlIGFyZSB0d28gcmVjdHMgYW5kIHRoZXkgYXJlIGRpc2pvaW5lZFxuICBpZiAoXG4gICAgY2xpZW50UmVjdHMubGVuZ3RoID09PSAyICYmXG4gICAgY3Vyc29yUmVjdEluZGV4ID49IDAgJiZcbiAgICBjbGllbnRSZWN0c1swXS5sZWZ0ID4gY2xpZW50UmVjdHNbMV0ucmlnaHRcbiAgKSB7XG4gICAgcmV0dXJuIGNsaWVudFJlY3RzW2N1cnNvclJlY3RJbmRleF0gfHwgYm91bmRpbmdSZWN0O1xuICB9XG5cbiAgc3dpdGNoIChjdXJyZW50QmFzZVBsYWNlbWVudCkge1xuICAgIGNhc2UgJ3RvcCc6XG4gICAgY2FzZSAnYm90dG9tJzoge1xuICAgICAgY29uc3QgZmlyc3RSZWN0ID0gY2xpZW50UmVjdHNbMF07XG4gICAgICBjb25zdCBsYXN0UmVjdCA9IGNsaWVudFJlY3RzW2NsaWVudFJlY3RzLmxlbmd0aCAtIDFdO1xuICAgICAgY29uc3QgaXNUb3AgPSBjdXJyZW50QmFzZVBsYWNlbWVudCA9PT0gJ3RvcCc7XG5cbiAgICAgIGNvbnN0IHRvcCA9IGZpcnN0UmVjdC50b3A7XG4gICAgICBjb25zdCBib3R0b20gPSBsYXN0UmVjdC5ib3R0b207XG4gICAgICBjb25zdCBsZWZ0ID0gaXNUb3AgPyBmaXJzdFJlY3QubGVmdCA6IGxhc3RSZWN0LmxlZnQ7XG4gICAgICBjb25zdCByaWdodCA9IGlzVG9wID8gZmlyc3RSZWN0LnJpZ2h0IDogbGFzdFJlY3QucmlnaHQ7XG4gICAgICBjb25zdCB3aWR0aCA9IHJpZ2h0IC0gbGVmdDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGJvdHRvbSAtIHRvcDtcblxuICAgICAgcmV0dXJuIHt0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQsIHdpZHRoLCBoZWlnaHR9O1xuICAgIH1cbiAgICBjYXNlICdsZWZ0JzpcbiAgICBjYXNlICdyaWdodCc6IHtcbiAgICAgIGNvbnN0IG1pbkxlZnQgPSBNYXRoLm1pbiguLi5jbGllbnRSZWN0cy5tYXAoKHJlY3RzKSA9PiByZWN0cy5sZWZ0KSk7XG4gICAgICBjb25zdCBtYXhSaWdodCA9IE1hdGgubWF4KC4uLmNsaWVudFJlY3RzLm1hcCgocmVjdHMpID0+IHJlY3RzLnJpZ2h0KSk7XG4gICAgICBjb25zdCBtZWFzdXJlUmVjdHMgPSBjbGllbnRSZWN0cy5maWx0ZXIoKHJlY3QpID0+XG4gICAgICAgIGN1cnJlbnRCYXNlUGxhY2VtZW50ID09PSAnbGVmdCdcbiAgICAgICAgICA/IHJlY3QubGVmdCA9PT0gbWluTGVmdFxuICAgICAgICAgIDogcmVjdC5yaWdodCA9PT0gbWF4UmlnaHRcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHRvcCA9IG1lYXN1cmVSZWN0c1swXS50b3A7XG4gICAgICBjb25zdCBib3R0b20gPSBtZWFzdXJlUmVjdHNbbWVhc3VyZVJlY3RzLmxlbmd0aCAtIDFdLmJvdHRvbTtcbiAgICAgIGNvbnN0IGxlZnQgPSBtaW5MZWZ0O1xuICAgICAgY29uc3QgcmlnaHQgPSBtYXhSaWdodDtcbiAgICAgIGNvbnN0IHdpZHRoID0gcmlnaHQgLSBsZWZ0O1xuICAgICAgY29uc3QgaGVpZ2h0ID0gYm90dG9tIC0gdG9wO1xuXG4gICAgICByZXR1cm4ge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodCwgd2lkdGgsIGhlaWdodH07XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBib3VuZGluZ1JlY3Q7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHtWaXJ0dWFsRWxlbWVudH0gZnJvbSAnQHBvcHBlcmpzL2NvcmUnO1xuaW1wb3J0IHtSZWZlcmVuY2VFbGVtZW50LCBTdGlja3l9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3Qgc3RpY2t5OiBTdGlja3kgPSB7XG4gIG5hbWU6ICdzdGlja3knLFxuICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICBmbihpbnN0YW5jZSkge1xuICAgIGNvbnN0IHtyZWZlcmVuY2UsIHBvcHBlcn0gPSBpbnN0YW5jZTtcblxuICAgIGZ1bmN0aW9uIGdldFJlZmVyZW5jZSgpOiBSZWZlcmVuY2VFbGVtZW50IHwgVmlydHVhbEVsZW1lbnQge1xuICAgICAgcmV0dXJuIGluc3RhbmNlLnBvcHBlckluc3RhbmNlXG4gICAgICAgID8gaW5zdGFuY2UucG9wcGVySW5zdGFuY2Uuc3RhdGUuZWxlbWVudHMucmVmZXJlbmNlXG4gICAgICAgIDogcmVmZXJlbmNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3VsZENoZWNrKHZhbHVlOiAncmVmZXJlbmNlJyB8ICdwb3BwZXInKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gaW5zdGFuY2UucHJvcHMuc3RpY2t5ID09PSB0cnVlIHx8IGluc3RhbmNlLnByb3BzLnN0aWNreSA9PT0gdmFsdWU7XG4gICAgfVxuXG4gICAgbGV0IHByZXZSZWZSZWN0OiBDbGllbnRSZWN0IHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IHByZXZQb3BSZWN0OiBDbGllbnRSZWN0IHwgbnVsbCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbigpOiB2b2lkIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRSZWZSZWN0ID0gc2hvdWxkQ2hlY2soJ3JlZmVyZW5jZScpXG4gICAgICAgID8gZ2V0UmVmZXJlbmNlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgOiBudWxsO1xuICAgICAgY29uc3QgY3VycmVudFBvcFJlY3QgPSBzaG91bGRDaGVjaygncG9wcGVyJylcbiAgICAgICAgPyBwb3BwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgOiBudWxsO1xuXG4gICAgICBpZiAoXG4gICAgICAgIChjdXJyZW50UmVmUmVjdCAmJiBhcmVSZWN0c0RpZmZlcmVudChwcmV2UmVmUmVjdCwgY3VycmVudFJlZlJlY3QpKSB8fFxuICAgICAgICAoY3VycmVudFBvcFJlY3QgJiYgYXJlUmVjdHNEaWZmZXJlbnQocHJldlBvcFJlY3QsIGN1cnJlbnRQb3BSZWN0KSlcbiAgICAgICkge1xuICAgICAgICBpZiAoaW5zdGFuY2UucG9wcGVySW5zdGFuY2UpIHtcbiAgICAgICAgICBpbnN0YW5jZS5wb3BwZXJJbnN0YW5jZS51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcmV2UmVmUmVjdCA9IGN1cnJlbnRSZWZSZWN0O1xuICAgICAgcHJldlBvcFJlY3QgPSBjdXJyZW50UG9wUmVjdDtcblxuICAgICAgaWYgKGluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlUG9zaXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBvbk1vdW50KCk6IHZvaWQge1xuICAgICAgICBpZiAoaW5zdGFuY2UucHJvcHMuc3RpY2t5KSB7XG4gICAgICAgICAgdXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgc3RpY2t5O1xuXG5mdW5jdGlvbiBhcmVSZWN0c0RpZmZlcmVudChcbiAgcmVjdEE6IENsaWVudFJlY3QgfCBudWxsLFxuICByZWN0QjogQ2xpZW50UmVjdCB8IG51bGxcbik6IGJvb2xlYW4ge1xuICBpZiAocmVjdEEgJiYgcmVjdEIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgcmVjdEEudG9wICE9PSByZWN0Qi50b3AgfHxcbiAgICAgIHJlY3RBLnJpZ2h0ICE9PSByZWN0Qi5yaWdodCB8fFxuICAgICAgcmVjdEEuYm90dG9tICE9PSByZWN0Qi5ib3R0b20gfHxcbiAgICAgIHJlY3RBLmxlZnQgIT09IHJlY3RCLmxlZnRcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4iLCAiaW1wb3J0IHRpcHB5IGZyb20gJy4uL3NyYyc7XG5pbXBvcnQge3JlbmRlcn0gZnJvbSAnLi4vc3JjL3RlbXBsYXRlJztcblxudGlwcHkuc2V0RGVmYXVsdFByb3BzKHtyZW5kZXJ9KTtcblxuZXhwb3J0IHtkZWZhdWx0LCBoaWRlQWxsfSBmcm9tICcuLi9zcmMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGNyZWF0ZVNpbmdsZXRvbn0gZnJvbSAnLi4vc3JjL2FkZG9ucy9jcmVhdGVTaW5nbGV0b24nO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGRlbGVnYXRlfSBmcm9tICcuLi9zcmMvYWRkb25zL2RlbGVnYXRlJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBhbmltYXRlRmlsbH0gZnJvbSAnLi4vc3JjL3BsdWdpbnMvYW5pbWF0ZUZpbGwnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGZvbGxvd0N1cnNvcn0gZnJvbSAnLi4vc3JjL3BsdWdpbnMvZm9sbG93Q3Vyc29yJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbmxpbmVQb3NpdGlvbmluZ30gZnJvbSAnLi4vc3JjL3BsdWdpbnMvaW5saW5lUG9zaXRpb25pbmcnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHN0aWNreX0gZnJvbSAnLi4vc3JjL3BsdWdpbnMvc3RpY2t5JztcbmV4cG9ydCB7Uk9VTkRfQVJST1cgYXMgcm91bmRBcnJvd30gZnJvbSAnLi4vc3JjL2NvbnN0YW50cyc7XG4iLCAiaW1wb3J0IFwicGhvZW5peF9odG1sXCJcbmltcG9ydCB7U29ja2V0LCBMb25nUG9sbH0gZnJvbSBcInBob2VuaXhcIlxuaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuaW1wb3J0IHRpcHB5LCB7cm91bmRBcnJvd30gZnJvbSBcInRpcHB5LmpzXCJcbmltcG9ydCB0b3BiYXIgZnJvbSBcInRvcGJhclwiXG5cbi8vIFRvcGJhciAtLS1cblxubGV0IHRvcEJhclNjaGVkdWxlZCA9IHVuZGVmaW5lZFxuXG50b3BiYXIuY29uZmlnKHtiYXJDb2xvcnM6IHswOiBcIiMwMjg0YzdcIn0sIHNoYWRvd0NvbG9yOiBcInJnYmEoMCwgMCwgMCwgLjMpXCJ9KVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwgKGluZm8pID0+IHtcbiAgaWYoIXRvcEJhclNjaGVkdWxlZCkge1xuICAgIHRvcEJhclNjaGVkdWxlZCA9IHNldFRpbWVvdXQoKCkgPT4gdG9wYmFyLnNob3coKSwgNTAwKVxuICB9XG59KVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpwYWdlLWxvYWRpbmctc3RvcFwiLCAoaW5mbykgPT4ge1xuICBjbGVhclRpbWVvdXQodG9wQmFyU2NoZWR1bGVkKVxuICB0b3BCYXJTY2hlZHVsZWQgPSB1bmRlZmluZWRcbiAgdG9wYmFyLmhpZGUoKVxufSlcblxuLy8gSG9va3MgLS0tXG5cbmxldCBIb29rcyA9IHt9XG5cbkhvb2tzLlJlZnJlc2hlciA9IHtcbiAgbW91bnRlZCgpIHtcbiAgICBjb25zdCB0YXJnID0gXCIjcmVmcmVzaC1zZWxlY3RvclwiXG4gICAgY29uc3QgZWxlbSA9IHRoaXNcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsICgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICAgIGVsZW0ucHVzaEV2ZW50VG8odGFyZywgXCJyZXN1bWUtcmVmcmVzaFwiLCB7fSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0ucHVzaEV2ZW50VG8odGFyZywgXCJwYXVzZS1yZWZyZXNoXCIsIHt9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoXCJyZWZyZXNoXCIgaW4gbG9jYWxTdG9yYWdlKSB7XG4gICAgICBlbGVtLnB1c2hFdmVudFRvKHRhcmcsIFwic2VsZWN0LXJlZnJlc2hcIiwge3ZhbHVlOiBsb2NhbFN0b3JhZ2UucmVmcmVzaH0pXG4gICAgfVxuXG4gICAgdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiW3JvbGU9J29wdGlvbiddXCIpLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgIG9wdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVmcmVzaCA9IG9wdGlvbi5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxufVxuXG5Ib29rcy5SZXN0b3JlVGhlbWUgPSB7XG4gIG1vdW50ZWQoKSB7XG4gICAgdGhpcy5wdXNoRXZlbnRUbyhcIiN0aGVtZS1zZWxlY3RvclwiLCBcInJlc3RvcmVcIiwge3RoZW1lOiBsb2NhbFN0b3JhZ2UudGhlbWV9KVxuICB9XG59XG5cbkhvb2tzLkNoYW5nZVRoZW1lID0ge1xuICBhcHBseVRoZW1lKCkge1xuICAgIGNvbnN0IHdhbnRzRGFyayA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKVwiKS5tYXRjaGVzXG4gICAgY29uc3Qgbm9QcmVmZXJlbmNlID0gIShcInRoZW1lXCIgaW4gbG9jYWxTdG9yYWdlKVxuXG4gICAgaWYgKChsb2NhbFN0b3JhZ2UudGhlbWUgPT09IFwiZGFya1wiKSB8fCAobG9jYWxTdG9yYWdlLnRoZW1lID09PSBcInN5c3RlbVwiICYmIHdhbnRzRGFyaykgfHwgKG5vUHJlZmVyZW5jZSAmJiB3YW50c0RhcmspKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImRhcmtcIilcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkYXJrXCIpXG4gICAgfVxuICB9LFxuXG4gIG1vdW50ZWQoKSB7XG4gICAgbGV0IGVsZW0gPSB0aGlzO1xuXG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgdGhlbWUgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5cbiAgICAgIGxvY2FsU3RvcmFnZS50aGVtZSA9IHRoZW1lXG5cbiAgICAgIHRoaXMuYXBwbHlUaGVtZSgpXG5cbiAgICAgIGVsZW0ucHVzaEV2ZW50VG8oXCIjdGhlbWUtc2VsZWN0b3JcIiwgXCJyZXN0b3JlXCIsIHt0aGVtZTogdGhlbWV9KVxuICAgIH0pXG4gIH1cbn1cblxuSG9va3MuVGlwcHkgPSB7XG4gIG1vdW50ZWQoKSB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS10aXRsZVwiKTtcblxuICAgIHRpcHB5KHRoaXMuZWwsIHsgYXJyb3c6IHJvdW5kQXJyb3csIGNvbnRlbnQ6IGNvbnRlbnQsIGRlbGF5OiBbMjUwLCBudWxsXSB9KTtcbiAgfVxufVxuXG5Ib29rcy5DaGFydCA9IHtcbiAgbW91bnRlZCgpIHtcbiAgICBjb25zdCB0b29sWSA9IDE5MlxuICAgIGNvbnN0IHRvb2xQYWQgPSAxNlxuICAgIGNvbnN0IHRvb2xYT2Zmc2V0ID0gMjhcbiAgICBjb25zdCB0b29sQmxlZWQgPSAxMFxuICAgIGNvbnN0IHRleHRIZWlnaHQgPSAxNlxuICAgIGNvbnN0IHRleHRQYWRkaW5nID0gMlxuICAgIGNvbnN0IGJhc2VMYWJlbFggPSAxMlxuICAgIGNvbnN0IGJhc2VMYWJlbFkgPSA0MlxuICAgIGNvbnN0IGJhc2VUb29sV2lkdGggPSAxMjBcbiAgICBjb25zdCB0aW1lT3B0cyA9IHsgaG91cjEyOiBmYWxzZSwgdGltZVN0eWxlOiBcImxvbmdcIiB9XG5cbiAgICBjb25zdCBkYXRhY29sID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiI2NoYXJ0LWRcIilcbiAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiI2NoYXJ0LXRcIilcbiAgICBjb25zdCB0b29sdGlwID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiW3JlbD0nY2hhcnQtdG9vbHRpcCddXCIpLmNsb25lTm9kZSh0cnVlKVxuICAgIGNvbnN0IHRvb2xsYWIgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCJbcmVsPSdjaGFydC10b29sdGlwLWxhYmVsJ11cIilcbiAgICBjb25zdCB0aXBhcnJ3ID0gdG9vbHRpcC5xdWVyeVNlbGVjdG9yKFwiW3JlbD0nYXJydyddXCIpXG4gICAgY29uc3QgdGlwdGV4dCA9IHRvb2x0aXAucXVlcnlTZWxlY3RvcihcIltyZWw9J2RhdGUnXVwiKVxuICAgIGNvbnN0IHRpcHJlY3QgPSB0b29sdGlwLnF1ZXJ5U2VsZWN0b3IoXCJbcmVsPSdyZWN0J11cIilcbiAgICBjb25zdCB0aXBsYWJzID0gdG9vbHRpcC5xdWVyeVNlbGVjdG9yKFwiW3JlbD0nbGFicyddXCIpXG5cbiAgICB0b29sdGlwLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKC0xMDAwMDAsJHt0b29sWX0pYClcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRvb2x0aXApXG5cbiAgICBkYXRhY29sLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHtcbiAgICAgIHRvb2x0aXAuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoLTEwMDAwMCwke3Rvb2xZfSlgKVxuICAgIH0pXG5cbiAgICBkYXRhY29sLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgcGFyZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnRcblxuICAgICAgLy8gUmVwbGFjZSB0aW1lc3RhbXBcbiAgICAgIGNvbnN0IHRzdGFtcCA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRzdGFtcFwiKSAqIDEwMDBcbiAgICAgIGNvbnN0IHRldmVudCA9IG5ldyBEYXRlKHRzdGFtcClcblxuICAgICAgdGlwdGV4dC5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSA9IHRldmVudC50b0xvY2FsZVRpbWVTdHJpbmcoXCJlbi1VU1wiLCB0aW1lT3B0cylcblxuICAgICAgLy8gUmVwbGFjZSBsYWJlbHNcbiAgICAgIGNvbnN0IGVsZW1zID0gWy4uLnBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdmFsdWVdXCIpXVxuICAgICAgbGV0IHkgPSBiYXNlTGFiZWxZXG5cbiAgICAgIHRpcGxhYnMucmVwbGFjZUNoaWxkcmVuKClcblxuICAgICAgZWxlbXMucmV2ZXJzZSgpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtbGFiZWxcIilcbiAgICAgICAgY29uc3QgdmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXZhbHVlXCIpXG4gICAgICAgIGNvbnN0IGdyb3VwID0gdG9vbGxhYi5jbG9uZU5vZGUodHJ1ZSlcbiAgICAgICAgY29uc3QgZ2NpcmMgPSBncm91cC5xdWVyeVNlbGVjdG9yKFwiY2lyY2xlXCIpXG4gICAgICAgIGNvbnN0IGd0ZXh0ID0gZ3JvdXAucXVlcnlTZWxlY3RvcihcInRleHRcIikuY2hpbGROb2Rlc1swXVxuXG4gICAgICAgIGd0ZXh0Lm5vZGVWYWx1ZSA9IGAke2xhYmVsfSAke3ZhbHVlfWBcbiAgICAgICAgZ2NpcmMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikucmVwbGFjZShcInN0cm9rZVwiLCBcImZpbGxcIikpXG4gICAgICAgIGdyb3VwLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7YmFzZUxhYmVsWH0sICR7eX0pYClcblxuICAgICAgICB0aXBsYWJzLmFwcGVuZENoaWxkKGdyb3VwKVxuXG4gICAgICAgIHkgKz0gdGV4dEhlaWdodFxuICAgICAgfSlcblxuICAgICAgLy8gUmVzaXplIHRvb2x0aXAgZWxlbWVudHNcbiAgICAgIGNvbnN0IGxhYnNXaWR0aCA9IDIgKiBNYXRoLnJvdW5kKHRpcGxhYnMuZ2V0QkJveCgpLndpZHRoIC8gMilcbiAgICAgIGNvbnN0IHRvb2xXaWR0aCA9IE1hdGgubWF4KGJhc2VUb29sV2lkdGgsIGxhYnNXaWR0aCArIHRvb2xQYWQpXG4gICAgICBjb25zdCBibGVlZCA9IHdpbmRvdy52aXN1YWxWaWV3cG9ydC53aWR0aCAtIGV2ZW50LmNsaWVudFggLSB0b29sV2lkdGggLyAyIC0gdG9vbEJsZWVkXG5cbiAgICAgIHRpcGFycncuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHt0b29sV2lkdGggLyAyIC0gOH0pYClcbiAgICAgIHRpcHJlY3Quc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHkgLSB0ZXh0SGVpZ2h0ICsgdGV4dFBhZGRpbmcpO1xuICAgICAgdGlwcmVjdC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB0b29sV2lkdGgpXG5cbiAgICAgIGlmIChibGVlZCA8IDApIHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlID0gYHRyYW5zbGF0ZSgke2JsZWVkfSlgXG5cbiAgICAgICAgdGlwcmVjdC5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgdHJhbnNsYXRlKVxuICAgICAgICB0aXB0ZXh0LnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCB0cmFuc2xhdGUpXG4gICAgICAgIHRpcGxhYnMuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIHRyYW5zbGF0ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpcHJlY3QucmVtb3ZlQXR0cmlidXRlKFwidHJhbnNmb3JtXCIpXG4gICAgICAgIHRpcHRleHQucmVtb3ZlQXR0cmlidXRlKFwidHJhbnNmb3JtXCIpXG4gICAgICAgIHRpcGxhYnMucmVtb3ZlQXR0cmlidXRlKFwidHJhbnNmb3JtXCIpXG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2UgdG9vbHRpcCB2aXNpYmxlXG4gICAgICBjb25zdCBvZmZzZXQgPSBwYXJlbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1vZmZzZXRcIikgLSAodG9vbFdpZHRoIC8gMikgKyB0b29sWE9mZnNldFxuXG4gICAgICB0b29sdGlwLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7b2Zmc2V0fSwke3Rvb2xZfSlgKVxuICAgIH0pXG4gIH1cbn1cblxuLy8gTW91bnRpbmcgLS0tXG5cbmNvbnN0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9J2NzcmYtdG9rZW4nXVwiKS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpO1xuY29uc3QgbGl2ZVRyYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdsaXZlLXRyYW5zcG9ydCddXCIpLmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik7XG5jb25zdCBsaXZlUGF0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9J2xpdmUtcGF0aCddXCIpLmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik7XG5cbmNvbnN0IGxpdmVTb2NrZXQgPSBuZXcgTGl2ZVNvY2tldChsaXZlUGF0aCwgU29ja2V0LCB7XG4gIHRyYW5zcG9ydDogbGl2ZVRyYW4gPT09IFwibG9uZ3BvbGxcIiA/IExvbmdQb2xsIDogV2ViU29ja2V0LFxuICBwYXJhbXM6IHtfY3NyZl90b2tlbjogY3NyZlRva2VufSxcbiAgaG9va3M6IEhvb2tzXG59KTtcblxubGl2ZVNvY2tldC5jb25uZWN0KCk7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
