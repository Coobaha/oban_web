(()=>{var Qh=Object.create;var yr=Object.defineProperty;var td=Object.getOwnPropertyDescriptor;var ed=Object.getOwnPropertyNames;var id=Object.getPrototypeOf,nd=Object.prototype.hasOwnProperty;var sd=(e,t,i)=>t in e?yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var rd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var od=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ed(t))!nd.call(e,s)&&s!==i&&yr(e,s,{get:()=>t[s],enumerable:!(n=td(t,s))||n.enumerable});return e};var ad=(e,t,i)=>(i=e!=null?Qh(id(e)):{},od(t||!e||!e.__esModule?yr(i,"default",{value:e,enumerable:!0}):i,e));var D=(e,t,i)=>(sd(e,typeof t!="symbol"?t+"":t,i),i);var Xh=rd((Uh,pr)=>{(function(e,t){"use strict";(function(){for(var h=0,d=["ms","moz","webkit","o"],u=0;u<d.length&&!e.requestAnimationFrame;++u)e.requestAnimationFrame=e[d[u]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[d[u]+"CancelAnimationFrame"]||e[d[u]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(f,g){var m=new Date().getTime(),b=Math.max(0,16-(m-h)),v=e.setTimeout(function(){f(m+b)},b);return h=m+b,v}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(f){clearTimeout(f)})})();function i(){n.width=e.innerWidth,n.height=5*l.barThickness;var h=n.getContext("2d");h.shadowBlur=l.shadowBlur,h.shadowColor=l.shadowColor;var d,u=h.createLinearGradient(0,0,n.width,0);for(d in l.barColors)u.addColorStop(d,l.barColors[d]);h.lineWidth=l.barThickness,h.beginPath(),h.moveTo(0,l.barThickness/2),h.lineTo(Math.ceil(o*n.width),l.barThickness/2),h.strokeStyle=u,h.stroke()}var n,s,r,o,a,l={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},c={config:function(h){for(var d in h)l.hasOwnProperty(d)&&(l[d]=h[d])},show:function(){var h,d,u;a||(a=!0,r!==null&&e.cancelAnimationFrame(r),n||((u=(n=t.createElement("canvas")).style).position="fixed",u.top=u.left=u.right=u.margin=u.padding=0,u.zIndex=100001,u.display="none",l.className&&n.classList.add(l.className),t.body.appendChild(n),h="resize",d=i,(u=e).addEventListener?u.addEventListener(h,d,!1):u.attachEvent?u.attachEvent("on"+h,d):u["on"+h]=d),n.style.opacity=1,n.style.display="block",c.progress(0),l.autoRun&&function f(){s=e.requestAnimationFrame(f),c.progress("+"+.05*Math.pow(1-Math.sqrt(o),2))}())},progress:function(h){return h===void 0||(typeof h=="string"&&(h=(0<=h.indexOf("+")||0<=h.indexOf("-")?o:0)+parseFloat(h)),o=1<h?1:h,i()),o},hide:function(){a&&(a=!1,s!=null&&(e.cancelAnimationFrame(s),s=null),function h(){return 1<=c.progress("+.1")&&(n.style.opacity-=.05,n.style.opacity<=.05)?(n.style.display="none",void(r=null)):void(r=e.requestAnimationFrame(h))}())}};typeof pr=="object"&&typeof pr.exports=="object"?pr.exports=c:typeof define=="function"&&define.amd?define(function(){return c}):this.topbar=c}).call(Uh,window,document)});(function(){var e=t();function t(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function s(r,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(r,o.bubbles,o.cancelable,o.detail),a}return s.prototype=window.Event.prototype,s}function i(s,r){var o=document.createElement("input");return o.type="hidden",o.name=s,o.value=r,o}function n(s,r){var o=s.getAttribute("data-to"),a=i("_method",s.getAttribute("data-method")),l=i("_csrf_token",s.getAttribute("data-csrf")),c=document.createElement("form"),h=document.createElement("input"),d=s.getAttribute("target");c.method=s.getAttribute("data-method")==="get"?"get":"post",c.action=o,c.style.display="none",d?c.target=d:r&&(c.target="_blank"),c.appendChild(l),c.appendChild(a),document.body.appendChild(c),h.type="submit",c.appendChild(h),h.click()}window.addEventListener("click",function(s){var r=s.target;if(!s.defaultPrevented)for(;r&&r.getAttribute;){var o=new e("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!r.dispatchEvent(o))return s.preventDefault(),s.stopImmediatePropagation(),!1;if(r.getAttribute("data-method"))return n(r,s.metaKey||s.shiftKey),s.preventDefault(),!1;r=r.parentNode}},!1),window.addEventListener("phoenix.link.click",function(s){var r=s.target.getAttribute("data-confirm");r&&!window.confirm(r)&&s.preventDefault()},!1)})();function Qi(e){return e+.5|0}var Ee=(e,t,i)=>Math.max(Math.min(e,i),t);function Zi(e){return Ee(Qi(e*2.55),0,255)}function Pe(e){return Ee(Qi(e*255),0,255)}function fe(e){return Ee(Qi(e/2.55)/100,0,1)}function fa(e){return Ee(Qi(e*100),0,100)}var Nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_r=[..."0123456789ABCDEF"],ld=e=>_r[e&15],cd=e=>_r[(e&240)>>4]+_r[e&15],rs=e=>(e&240)>>4===(e&15),hd=e=>rs(e.r)&&rs(e.g)&&rs(e.b)&&rs(e.a);function dd(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&Nt[e[1]]*17,g:255&Nt[e[2]]*17,b:255&Nt[e[3]]*17,a:t===5?Nt[e[4]]*17:255}:(t===7||t===9)&&(i={r:Nt[e[1]]<<4|Nt[e[2]],g:Nt[e[3]]<<4|Nt[e[4]],b:Nt[e[5]]<<4|Nt[e[6]],a:t===9?Nt[e[7]]<<4|Nt[e[8]]:255})),i}var ud=(e,t)=>e<255?t(e):"";function fd(e){var t=hd(e)?ld:cd;return e?"#"+t(e.r)+t(e.g)+t(e.b)+ud(e.a,t):void 0}var pd=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ba(e,t,i){let n=t*Math.min(i,1-i),s=(r,o=(r+e/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function gd(e,t,i){let n=(s,r=(s+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function md(e,t,i){let n=ba(e,1,.5),s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function bd(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function wr(e){let i=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(i,n,s),o=Math.min(i,n,s),a=(r+o)/2,l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=bd(i,n,s,h,r),l=l*60+.5),[l|0,c||0,a]}function Sr(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Pe)}function kr(e,t,i){return Sr(ba,e,t,i)}function vd(e,t,i){return Sr(md,e,t,i)}function yd(e,t,i){return Sr(gd,e,t,i)}function va(e){return(e%360+360)%360}function xd(e){let t=pd.exec(e),i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?Zi(+t[5]):Pe(+t[5]));let s=va(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=vd(s,r,o):t[1]==="hsv"?n=yd(s,r,o):n=kr(s,r,o),{r:n[0],g:n[1],b:n[2],a:i}}function _d(e,t){var i=wr(e);i[0]=va(i[0]+t),i=kr(i),e.r=i[0],e.g=i[1],e.b=i[2]}function wd(e){if(!e)return;let t=wr(e),i=t[0],n=fa(t[1]),s=fa(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${fe(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}var pa={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ga={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Sd(){let e={},t=Object.keys(ga),i=Object.keys(pa),n,s,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],s=0;s<i.length;s++)r=i[s],a=a.replace(r,pa[r]);r=parseInt(ga[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}var os;function kd(e){os||(os=Sd(),os.transparent=[0,0,0,0]);let t=os[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var Ad=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Cd(e){let t=Ad.exec(e),i=255,n,s,r;if(!!t){if(t[7]!==n){let o=+t[7];i=t[8]?Zi(o):Ee(o*255,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?Zi(n):Ee(n,0,255)),s=255&(t[4]?Zi(s):Ee(s,0,255)),r=255&(t[6]?Zi(r):Ee(r,0,255)),{r:n,g:s,b:r,a:i}}}function Ed(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${fe(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}var xr=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,mi=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Pd(e,t,i){let n=mi(fe(e.r)),s=mi(fe(e.g)),r=mi(fe(e.b));return{r:Pe(xr(n+i*(mi(fe(t.r))-n))),g:Pe(xr(s+i*(mi(fe(t.g))-s))),b:Pe(xr(r+i*(mi(fe(t.b))-r))),a:e.a+i*(t.a-e.a)}}function as(e,t,i){if(e){let n=wr(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=kr(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function ya(e,t){return e&&Object.assign(t||{},e)}function ma(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Pe(e[3]))):(t=ya(e,{r:0,g:0,b:0,a:1}),t.a=Pe(t.a)),t}function Td(e){return e.charAt(0)==="r"?Cd(e):xd(e)}var Te=class{constructor(t){if(t instanceof Te)return t;let i=typeof t,n;i==="object"?n=ma(t):i==="string"&&(n=dd(t)||kd(t)||Td(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=ya(this._rgb);return t&&(t.a=fe(t.a)),t}set rgb(t){this._rgb=ma(t)}rgbString(){return this._valid?Ed(this._rgb):void 0}hexString(){return this._valid?fd(this._rgb):void 0}hslString(){return this._valid?wd(this._rgb):void 0}mix(t,i){if(t){let n=this.rgb,s=t.rgb,r,o=i===r?.5:i,a=2*o-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*s.r+.5,n.g=255&c*n.g+r*s.g+.5,n.b=255&c*n.b+r*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=Pd(this._rgb,t._rgb,i)),this}clone(){return new Te(this.rgb)}alpha(t){return this._rgb.a=Pe(t),this}clearer(t){let i=this._rgb;return i.a*=1-t,this}greyscale(){let t=this._rgb,i=Qi(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){let i=this._rgb;return i.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return as(this._rgb,2,t),this}darken(t){return as(this._rgb,2,-t),this}saturate(t){return as(this._rgb,1,t),this}desaturate(t){return as(this._rgb,1,-t),this}rotate(t){return _d(this._rgb,t),this}};function ie(){}var Ma=(()=>{let e=0;return()=>e++})();function $(e){return e===null||typeof e>"u"}function K(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function z(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function it(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Et(e,t){return it(e)?e:t}function V(e,t){return typeof e>"u"?t:e}var Oa=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Pr=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function J(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Y(e,t,i,n){let s,r,o;if(K(e))if(r=e.length,n)for(s=r-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<r;s++)t.call(i,e[s],s);else if(z(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(i,e[o[s]],o[s])}function nn(e,t){let i,n,s,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],r=t[i],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ds(e){if(K(e))return e.map(ds);if(z(e)){let t=Object.create(null),i=Object.keys(e),n=i.length,s=0;for(;s<n;++s)t[i[s]]=ds(e[i[s]]);return t}return e}function Da(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Md(e,t,i,n){if(!Da(e))return;let s=t[e],r=i[e];z(s)&&z(r)?vi(s,r,n):t[e]=ds(r)}function vi(e,t,i){let n=K(t)?t:[t],s=n.length;if(!z(e))return e;i=i||{};let r=i.merger||Md,o;for(let a=0;a<s;++a){if(o=n[a],!z(o))continue;let l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,i)}return e}function xi(e,t){return vi(e,t,{merger:Od})}function Od(e,t,i){if(!Da(e))return;let n=t[e],s=i[e];z(n)&&z(s)?xi(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=ds(s))}var xa={"":e=>e,x:e=>e.x,y:e=>e.y};function Dd(e){let t=e.split("."),i=[],n="";for(let s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function Ld(e){let t=Dd(e);return i=>{for(let n of t){if(n==="")break;i=i&&i[n]}return i}}function me(e,t){return(xa[t]||(xa[t]=Ld(t)))(e)}function gs(e){return e.charAt(0).toUpperCase()+e.slice(1)}var _i=e=>typeof e<"u",pe=e=>typeof e=="function",Tr=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0};function La(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}var Z=Math.PI,G=2*Z,Rd=G+Z,us=Number.POSITIVE_INFINITY,Id=Z/180,et=Z/2,Ue=Z/4,_a=Z*2/3,ge=Math.log10,Yt=Math.sign;function wi(e,t,i){return Math.abs(e-t)<i}function Mr(e){let t=Math.round(e);e=wi(e,t,e/1e3)?t:e;let i=Math.pow(10,Math.floor(ge(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function Ra(e){let t=[],i=Math.sqrt(e),n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,r)=>s-r).pop(),t}function qe(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Ia(e,t){let i=Math.round(e);return i-t<=e&&i+t>=e}function Or(e,t,i){let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Bt(e){return e*(Z/180)}function ms(e){return e*(180/Z)}function Dr(e){if(!it(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Lr(e,t){let i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*Z&&(r+=G),{angle:r,distance:s}}function fs(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Fd(e,t){return(e-t+Rd)%G-Z}function Ct(e){return(e%G+G)%G}function Si(e,t,i,n){let s=Ct(e),r=Ct(t),o=Ct(i),a=Ct(r-s),l=Ct(o-s),c=Ct(s-r),h=Ct(s-o);return s===r||s===o||n&&r===o||a>l&&c<h}function ut(e,t,i){return Math.max(t,Math.min(i,e))}function Fa(e){return ut(e,-32768,32767)}function ne(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function bs(e,t,i){i=i||(o=>e[o]<t);let n=e.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,i(r)?s=r:n=r;return{lo:s,hi:n}}var te=(e,t,i,n)=>bs(e,i,n?s=>{let r=e[s][t];return r<i||r===i&&e[s+1][t]===i}:s=>e[s][t]<i),Na=(e,t,i)=>bs(e,i,n=>e[n][t]>=i);function Ba(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}var Ha=["push","pop","shift","splice","unshift"];function ja(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ha.forEach(i=>{let n="_onData"+gs(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){let o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function Rr(e,t){let i=e._chartjs;if(!i)return;let n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(Ha.forEach(r=>{delete e[r]}),delete e._chartjs)}function Ir(e){let t=new Set(e);return t.size===e.length?e:Array.from(t)}var Fr=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Nr(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,Fr.call(window,()=>{n=!1,e.apply(t,i)}))}}function Va(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}var vs=e=>e==="start"?"left":e==="end"?"right":"center",vt=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,za=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function Br(e,t,i){let n=t.length,s=0,r=n;if(e._sorted){let{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:h,minDefined:d,maxDefined:u}=o.getUserBounds();d&&(s=ut(Math.min(te(a,o.axis,c).lo,i?n:te(t,l,o.getPixelForValue(c)).lo),0,n-1)),u?r=ut(Math.max(te(a,o.axis,h,!0).hi+1,i?0:te(t,l,o.getPixelForValue(h),!0).hi+1),s,n)-s:r=n-s}return{start:s,count:r}}function Hr(e){let{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;let r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),r}var ls=e=>e===0||e===1,wa=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*G/i)),Sa=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*G/i)+1,bi={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*et)+1,easeOutSine:e=>Math.sin(e*et),easeInOutSine:e=>-.5*(Math.cos(Z*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>ls(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ls(e)?e:wa(e,.075,.3),easeOutElastic:e=>ls(e)?e:Sa(e,.075,.3),easeInOutElastic(e){return ls(e)?e:e<.5?.5*wa(e*2,.1125,.45):.5+.5*Sa(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-bi.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?bi.easeInBounce(e*2)*.5:bi.easeOutBounce(e*2-1)*.5+.5};function jr(e){if(e&&typeof e=="object"){let t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Vr(e){return jr(e)?e:new Te(e)}function Ar(e){return jr(e)?e:new Te(e).saturate(.5).darken(.1).hexString()}var Nd=["x","y","borderWidth","radius","tension"],Bd=["color","borderColor","backgroundColor"];function Hd(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Bd},numbers:{type:"number",properties:Nd}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function jd(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var ka=new Map;function Vd(e,t){t=t||{};let i=e+JSON.stringify(t),n=ka.get(i);return n||(n=new Intl.NumberFormat(e,t),ka.set(i,n)),n}function ki(e,t,i){return Vd(t,i).format(e)}var Wa={values(e){return K(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";let n=this.chart.options.locale,s,r=e;if(i.length>1){let c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=zd(e,i)}let o=ge(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ki(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";let n=i[t].significand||e/Math.pow(10,Math.floor(ge(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?Wa.numeric.call(this,e,t,i):""}};function zd(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var sn={formatters:Wa};function Wd(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Oe=Object.create(null),ys=Object.create(null);function tn(e,t){if(!t)return e;let i=t.split(".");for(let n=0,s=i.length;n<s;++n){let r=i[n];e=e[r]||(e[r]=Object.create(null))}return e}function Cr(e,t,i){return typeof t=="string"?vi(tn(e,t),i):vi(tn(e,""),t)}var Er=class{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Ar(s.backgroundColor),this.hoverBorderColor=(n,s)=>Ar(s.borderColor),this.hoverColor=(n,s)=>Ar(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Cr(this,t,i)}get(t){return tn(this,t)}describe(t,i){return Cr(ys,t,i)}override(t,i){return Cr(Oe,t,i)}route(t,i,n,s){let r=tn(this,t),o=tn(this,n),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){let l=this[a],c=o[s];return z(l)?Object.assign({},c,l):V(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}},nt=new Er({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Hd,jd,Wd]);function $d(e){return!e||$(e.size)||$(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function en(e,t,i,n,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,i.push(s)),r>n&&(n=r),n}function $a(e,t,i,n){n=n||{};let s=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},r=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let o=0,a=i.length,l,c,h,d,u;for(l=0;l<a;l++)if(d=i[l],d!=null&&!K(d))o=en(e,s,r,o,d);else if(K(d))for(c=0,h=d.length;c<h;c++)u=d[c],u!=null&&!K(u)&&(o=en(e,s,r,o,u));e.restore();let f=r.length/2;if(f>i.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function De(e,t,i){let n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function zr(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function xs(e,t,i,n){Wr(e,t,i,n,null)}function Wr(e,t,i,n,s){let r,o,a,l,c,h,d,u,f=t.pointStyle,g=t.rotation,m=t.radius,b=(g||0)*Id;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(b),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:s?e.ellipse(i,n,s/2,m,0,0,G):e.arc(i,n,m,0,G),e.closePath();break;case"triangle":h=s?s/2:m,e.moveTo(i+Math.sin(b)*h,n-Math.cos(b)*m),b+=_a,e.lineTo(i+Math.sin(b)*h,n-Math.cos(b)*m),b+=_a,e.lineTo(i+Math.sin(b)*h,n-Math.cos(b)*m),e.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(b+Ue)*l,d=Math.cos(b+Ue)*(s?s/2-c:l),a=Math.sin(b+Ue)*l,u=Math.sin(b+Ue)*(s?s/2-c:l),e.arc(i-d,n-a,c,b-Z,b-et),e.arc(i+u,n-o,c,b-et,b),e.arc(i+d,n+a,c,b,b+et),e.arc(i-u,n+o,c,b+et,b+Z),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,h=s?s/2:l,e.rect(i-h,n-l,2*h,2*l);break}b+=Ue;case"rectRot":d=Math.cos(b)*(s?s/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,u=Math.sin(b)*(s?s/2:m),e.moveTo(i-d,n-a),e.lineTo(i+u,n-o),e.lineTo(i+d,n+a),e.lineTo(i-u,n+o),e.closePath();break;case"crossRot":b+=Ue;case"cross":d=Math.cos(b)*(s?s/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,u=Math.sin(b)*(s?s/2:m),e.moveTo(i-d,n-a),e.lineTo(i+d,n+a),e.moveTo(i+u,n-o),e.lineTo(i-u,n+o);break;case"star":d=Math.cos(b)*(s?s/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,u=Math.sin(b)*(s?s/2:m),e.moveTo(i-d,n-a),e.lineTo(i+d,n+a),e.moveTo(i+u,n-o),e.lineTo(i-u,n+o),b+=Ue,d=Math.cos(b)*(s?s/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,u=Math.sin(b)*(s?s/2:m),e.moveTo(i-d,n-a),e.lineTo(i+d,n+a),e.moveTo(i+u,n-o),e.lineTo(i-u,n+o);break;case"line":o=s?s/2:Math.cos(b)*m,a=Math.sin(b)*m,e.moveTo(i-o,n-a),e.lineTo(i+o,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(b)*(s?s/2:m),n+Math.sin(b)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ee(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function rn(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function on(e){e.restore()}function Ua(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){let r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Xa(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function Ud(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),$(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Xd(e,t,i,n,s){if(s.strikethrough||s.underline){let r=e.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function Yd(e,t){let i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Le(e,t,i,n,s,r={}){let o=K(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="",l,c;for(e.save(),e.font=s.string,Ud(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Yd(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),$(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,i,n,r.maxWidth)),e.fillText(c,i,n,r.maxWidth),Xd(e,i,n,c,r),n+=Number(s.lineHeight);e.restore()}function Ai(e,t){let{x:i,y:n,w:s,h:r,radius:o}=t;e.arc(i+o.topLeft,n+o.topLeft,o.topLeft,-et,Z,!0),e.lineTo(i,n+r-o.bottomLeft),e.arc(i+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,Z,et,!0),e.lineTo(i+s-o.bottomRight,n+r),e.arc(i+s-o.bottomRight,n+r-o.bottomRight,o.bottomRight,et,0,!0),e.lineTo(i+s,n+o.topRight),e.arc(i+s-o.topRight,n+o.topRight,o.topRight,0,-et,!0),e.lineTo(i+o.topLeft,n)}var qd=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Jd=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Kd(e,t){let i=(""+e).match(qd);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}var Gd=e=>+e||0;function _s(e,t){let i={},n=z(t),s=n?Object.keys(t):t,r=z(e)?n?o=>V(e[o],e[t[o]]):o=>e[o]:()=>e;for(let o of s)i[o]=Gd(r(o));return i}function $r(e){return _s(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Re(e){return _s(e,["topLeft","topRight","bottomLeft","bottomRight"])}function yt(e){let t=$r(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ht(e,t){e=e||{},t=t||nt.font;let i=V(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=V(e.style,t.style);n&&!(""+n).match(Jd)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let s={family:V(e.family,t.family),lineHeight:Kd(V(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:V(e.weight,t.weight),string:""};return s.string=$d(s),s}function Ci(e,t,i,n){let s=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),i!==void 0&&K(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function Ya(e,t,i){let{min:n,max:s}=e,r=Pr(t,(s-n)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(s,r)}}function be(e,t){return Object.assign(Object.create(e),t)}function ws(e,t=[""],i,n,s=()=>e[0]){let r=i||e;typeof n>"u"&&(n=Ka("_fallback",e));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:s,override:a=>ws([a,...e],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return qa(a,l,()=>ru(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return Ca(a).includes(l)},ownKeys(a){return Ca(a)},set(a,l,c){let h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Ye(e,t,i,n){let s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Ur(e,n),setContext:r=>Ye(e,r,i,n),override:r=>Ye(e.override(r),t,i,n)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return qa(r,o,()=>Qd(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Ur(e,t={scriptable:!0,indexable:!0}){let{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:pe(i)?i:()=>i,isIndexable:pe(n)?n:()=>n}}var Zd=(e,t)=>e?e+gs(t):t,Xr=(e,t)=>z(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function qa(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];let n=i();return e[t]=n,n}function Qd(e,t,i){let{_proxy:n,_context:s,_subProxy:r,_descriptors:o}=e,a=n[t];return pe(a)&&o.isScriptable(t)&&(a=tu(t,a,e,i)),K(a)&&a.length&&(a=eu(t,a,e,o.isIndexable)),Xr(t,a)&&(a=Ye(a,s,r&&r[t],o)),a}function tu(e,t,i,n){let{_proxy:s,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||n);return a.delete(e),Xr(e,l)&&(l=Yr(s._scopes,s,e,l)),l}function eu(e,t,i,n){let{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=i;if(typeof r.index<"u"&&n(e))return t[r.index%t.length];if(z(t[0])){let l=t,c=s._scopes.filter(h=>h!==l);t=[];for(let h of l){let d=Yr(c,s,e,h);t.push(Ye(d,r,o&&o[e],a))}}return t}function Ja(e,t,i){return pe(e)?e(t,i):e}var iu=(e,t)=>e===!0?t:typeof e=="string"?me(t,e):void 0;function nu(e,t,i,n,s){for(let r of t){let o=iu(i,r);if(o){e.add(o);let a=Ja(o._fallback,i,s);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(o===!1&&typeof n<"u"&&i!==n)return null}return!1}function Yr(e,t,i,n){let s=t._rootScopes,r=Ja(t._fallback,i,n),o=[...e,...s],a=new Set;a.add(n);let l=Aa(a,o,i,r||i,n);return l===null||typeof r<"u"&&r!==i&&(l=Aa(a,o,r,l,n),l===null)?!1:ws(Array.from(a),[""],s,r,()=>su(t,i,n))}function Aa(e,t,i,n,s){for(;i;)i=nu(e,t,i,n,s);return i}function su(e,t,i){let n=e._getTarget();t in n||(n[t]={});let s=n[t];return K(s)&&z(i)?i:s||{}}function ru(e,t,i,n){let s;for(let r of t)if(s=Ka(Zd(r,e),i),typeof s<"u")return Xr(e,s)?Yr(i,n,e,s):s}function Ka(e,t){for(let i of t){if(!i)continue;let n=i[e];if(typeof n<"u")return n}}function Ca(e){let t=e._keys;return t||(t=e._keys=ou(e._scopes)),t}function ou(e){let t=new Set;for(let i of e)for(let n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function qr(e,t,i,n){let{iScale:s}=e,{key:r="r"}=this._parsing,o=new Array(n),a,l,c,h;for(a=0,l=n;a<l;++a)c=a+i,h=t[c],o[a]={r:s.parse(me(h,r),c)};return o}var au=Number.EPSILON||1e-14,yi=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ga=e=>e==="x"?"y":"x";function lu(e,t,i,n){let s=e.skip?t:e,r=t,o=i.skip?t:i,a=fs(r,s),l=fs(o,r),c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;let d=n*c,u=n*h;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+u*(o.x-s.x),y:r.y+u*(o.y-s.y)}}}function cu(e,t,i){let n=e.length,s,r,o,a,l,c=yi(e,0);for(let h=0;h<n-1;++h)if(l=c,c=yi(e,h+1),!(!l||!c)){if(wi(t[h],0,au)){i[h]=i[h+1]=0;continue}s=i[h]/t[h],r=i[h+1]/t[h],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),i[h]=s*o*t[h],i[h+1]=r*o*t[h])}}function hu(e,t,i="x"){let n=Ga(i),s=e.length,r,o,a,l=yi(e,0);for(let c=0;c<s;++c){if(o=a,a=l,l=yi(e,c+1),!a)continue;let h=a[i],d=a[n];o&&(r=(h-o[i])/3,a[`cp1${i}`]=h-r,a[`cp1${n}`]=d-r*t[c]),l&&(r=(l[i]-h)/3,a[`cp2${i}`]=h+r,a[`cp2${n}`]=d+r*t[c])}}function du(e,t="x"){let i=Ga(t),n=e.length,s=Array(n).fill(0),r=Array(n),o,a,l,c=yi(e,0);for(o=0;o<n;++o)if(a=l,l=c,c=yi(e,o+1),!!l){if(c){let h=c[t]-l[t];s[o]=h!==0?(c[i]-l[i])/h:0}r[o]=a?c?Yt(s[o-1])!==Yt(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}cu(e,s,r),hu(e,r,t)}function cs(e,t,i){return Math.max(Math.min(e,i),t)}function uu(e,t){let i,n,s,r,o,a=ee(e[0],t);for(i=0,n=e.length;i<n;++i)o=r,r=a,a=i<n-1&&ee(e[i+1],t),r&&(s=e[i],o&&(s.cp1x=cs(s.cp1x,t.left,t.right),s.cp1y=cs(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=cs(s.cp2x,t.left,t.right),s.cp2y=cs(s.cp2y,t.top,t.bottom)))}function Za(e,t,i,n,s){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")du(e,s);else{let c=n?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=lu(c,a,e[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&uu(e,i)}function Jr(){return typeof window<"u"&&typeof document<"u"}function Ss(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ps(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}var ks=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function fu(e,t){return ks(e).getPropertyValue(t)}var pu=["top","right","bottom","left"];function Xe(e,t,i){let n={};i=i?"-"+i:"";for(let s=0;s<4;s++){let r=pu[s];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var gu=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function mu(e,t){let i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:r}=n,o=!1,a,l;if(gu(s,r,e.target))a=s,l=r;else{let c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ie(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:n}=t,s=ks(i),r=s.boxSizing==="border-box",o=Xe(s,"padding"),a=Xe(s,"border","width"),{x:l,y:c,box:h}=mu(e,i),d=o.left+(h&&a.left),u=o.top+(h&&a.top),{width:f,height:g}=t;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/f*i.width/n),y:Math.round((c-u)/g*i.height/n)}}function bu(e,t,i){let n,s;if(t===void 0||i===void 0){let r=Ss(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{let o=r.getBoundingClientRect(),a=ks(r),l=Xe(a,"border","width"),c=Xe(a,"padding");t=o.width-c.width-l.width,i=o.height-c.height-l.height,n=ps(a.maxWidth,r,"clientWidth"),s=ps(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:n||us,maxHeight:s||us}}var hs=e=>Math.round(e*10)/10;function Qa(e,t,i,n){let s=ks(e),r=Xe(s,"margin"),o=ps(s.maxWidth,e,"clientWidth")||us,a=ps(s.maxHeight,e,"clientHeight")||us,l=bu(e,t,i),{width:c,height:h}=l;if(s.boxSizing==="content-box"){let u=Xe(s,"border","width"),f=Xe(s,"padding");c-=f.width+u.width,h-=f.height+u.height}return c=Math.max(0,c-r.width),h=Math.max(0,n?c/n:h-r.height),c=hs(Math.min(c,o,l.maxWidth)),h=hs(Math.min(h,a,l.maxHeight)),c&&!h&&(h=hs(c/2)),(t!==void 0||i!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,c=hs(Math.floor(h*n))),{width:c,height:h}}function Kr(e,t,i){let n=t||1,s=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);let o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=n,o.height=s,o.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}var tl=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function Gr(e,t){let i=fu(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Me(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function el(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function il(e,t,i,n){let s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=Me(e,s,i),a=Me(s,r,i),l=Me(r,t,i),c=Me(o,a,i),h=Me(a,l,i);return Me(c,h,i)}var vu=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},yu=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Je(e,t,i){return e?vu(t,i):yu()}function Zr(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Qr(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function nl(e){return e==="angle"?{between:Si,compare:Fd,normalize:Ct}:{between:ne,compare:(t,i)=>t-i,normalize:t=>t}}function Ea({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function xu(e,t,i){let{property:n,start:s,end:r}=i,{between:o,normalize:a}=nl(n),l=t.length,{start:c,end:h,loop:d}=e,u,f;if(d){for(c+=l,h+=l,u=0,f=l;u<f&&o(a(t[c%l][n]),s,r);++u)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:e.style}}function to(e,t,i){if(!i)return[e];let{property:n,start:s,end:r}=i,o=t.length,{compare:a,between:l,normalize:c}=nl(n),{start:h,end:d,loop:u,style:f}=xu(e,t,i),g=[],m=!1,b=null,v,x,w,p=()=>l(s,w,v)&&a(s,w)!==0,y=()=>a(r,v)===0||l(r,w,v),_=()=>m||p(),A=()=>!m||y();for(let C=h,E=h;C<=d;++C)x=t[C%o],!x.skip&&(v=c(x[n]),v!==w&&(m=l(v,s,r),b===null&&_()&&(b=a(v,s)===0?C:E),b!==null&&A()&&(g.push(Ea({start:b,end:C,loop:u,count:o,style:f})),b=null),E=C,w=v));return b!==null&&g.push(Ea({start:b,end:d,loop:u,count:o,style:f})),g}function eo(e,t){let i=[],n=e.segments;for(let s=0;s<n.length;s++){let r=to(n[s],e.points,t);r.length&&i.push(...r)}return i}function _u(e,t,i,n){let s=0,r=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function wu(e,t,i,n){let s=e.length,r=[],o=t,a=e[t],l;for(l=t+1;l<=i;++l){let c=e[l%s];c.skip||c.stop?a.skip||(n=!1,r.push({start:t%s,end:(l-1)%s,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%s,end:o%s,loop:n}),r}function sl(e,t){let i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];let r=!!e._loop,{start:o,end:a}=_u(i,s,r,n);if(n===!0)return Pa(e,[{start:o,end:a,loop:r}],i,t);let l=a<o?a+s:a,c=!!e._fullLoop&&o===0&&a===s-1;return Pa(e,wu(i,o,l,c),i,t)}function Pa(e,t,i,n){return!n||!n.setContext||!i?t:Su(e,t,i,n)}function Su(e,t,i,n){let s=e._chart.getContext(),r=Ta(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=i.length,c=[],h=r,d=t[0].start,u=d;function f(g,m,b,v){let x=a?-1:1;if(g!==m){for(g+=l;i[g%l].skip;)g-=x;for(;i[m%l].skip;)m+=x;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:b,style:v}),h=v,d=m%l)}}for(let g of t){d=a?d:g.start;let m=i[d%l],b;for(u=d+1;u<=g.end;u++){let v=i[u%l];b=Ta(n.setContext(be(s,{type:"segment",p0:m,p1:v,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:o}))),ku(b,h)&&f(d,u-1,g.loop,h),m=v,h=b}d<u-1&&f(d,u-1,g.loop,h)}return c}function Ta(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ku(e,t){if(!t)return!1;let i=[],n=function(s,r){return jr(r)?(i.includes(r)||i.push(r),i.indexOf(r)):r};return JSON.stringify(e,n)!==JSON.stringify(t,n)}var uo=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){let r=i.listeners[s],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(n-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Fr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;let r=n.items,o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),r.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){let i=this._charts,n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){let i=this._charts.get(t);!i||(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;let i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){let i=this._charts.get(t);if(!i||!i.items.length)return;let n=i.items,s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},ve=new uo,rl="transparent",Au={boolean(e,t,i){return i>.5?t:e},color(e,t,i){let n=Vr(e||rl),s=n.valid&&Vr(t||rl);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}},fo=class{constructor(t,i,n,s){let r=i[n];s=Ci([t.to,s,r,t.from]);let o=Ci([t.from,r,s]);this._active=!0,this._fn=t.fn||Au[t.type||typeof o],this._easing=bi[t.easing]||bi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);let s=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ci([t.to,i,s,t.from]),this._from=Ci([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let i=t-this._start,n=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to,l;if(this._active=r!==a&&(o||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=r;return}l=i/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){let i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}},Ls=class{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!z(t))return;let i=Object.keys(nt.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{let r=t[s];if(!z(r))return;let o={};for(let a of i)o[a]=r[a];(K(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,i){let n=i.options,s=Eu(t,n);if(!s)return[];let r=this._createAnimations(s,n);return n.$shared&&Cu(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,i){let n=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,i));continue}let h=i[c],d=r[c],u=n.get(c);if(d)if(u&&d.active()){d.update(u,h,a);continue}else d.cancel();if(!u||!u.duration){t[c]=h;continue}r[c]=d=new fo(u,t,c,h),s.push(d)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}let n=this._createAnimations(t,i);if(n.length)return ve.add(this._chart,n),!0}};function Cu(e,t){let i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){let r=e[n[s]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function Eu(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function ol(e,t){let i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:n?r:s,end:n?s:r}}function Pu(e,t,i){if(i===!1)return!1;let n=ol(e,i),s=ol(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Tu(e){let t,i,n,s;return z(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function sc(e,t){let i=[],n=e._getSortedDatasetMetas(t),s,r;for(s=0,r=n.length;s<r;++s)i.push(n[s].index);return i}function al(e,t,i,n={}){let s=e.keys,r=n.mode==="single",o,a,l,c;if(t!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===i){if(n.all)continue;break}c=e.values[l],it(c)&&(r||t===0||Yt(t)===Yt(c))&&(t+=c)}return t}}function Mu(e){let t=Object.keys(e),i=new Array(t.length),n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],i[n]={x:r,y:e[r]};return i}function ll(e,t){let i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function Ou(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function Du(e){let{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function Lu(e,t,i){let n=e[t]||(e[t]={});return n[i]||(n[i]={})}function cl(e,t,i,n){for(let s of t.getMatchingVisibleMetas(n).reverse()){let r=e[s.index];if(i&&r>0||!i&&r<0)return s.index}return null}function hl(e,t){let{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,h=Ou(r,o,n),d=t.length,u;for(let f=0;f<d;++f){let g=t[f],{[l]:m,[c]:b}=g,v=g._stacks||(g._stacks={});u=v[c]=Lu(s,h,m),u[a]=b,u._top=cl(u,o,!0,n.type),u._bottom=cl(u,o,!1,n.type);let x=u._visualValues||(u._visualValues={});x[a]=b}}function io(e,t){let i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function Ru(e,t){return be(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Iu(e,t,i){return be(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function an(e,t){let i=e.controller.index,n=e.vScale&&e.vScale.axis;if(!!n){t=t||e._parsed;for(let s of t){let r=s._stacks;if(!r||r[n]===void 0||r[n][i]===void 0)return;delete r[n][i],r[n]._visualValues!==void 0&&r[n]._visualValues[i]!==void 0&&delete r[n]._visualValues[i]}}}var no=e=>e==="reset"||e==="none",dl=(e,t)=>t?e:Object.assign({},e),Fu=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:sc(i,!0),values:null},Ot=class{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ll(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&an(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(d,u,f,g)=>d==="x"?u:d==="r"?g:f,r=i.xAxisID=V(n.xAxisID,io(t,"x")),o=i.yAxisID=V(n.yAxisID,io(t,"y")),a=i.rAxisID=V(n.rAxisID,io(t,"r")),l=i.indexAxis,c=i.iAxisID=s(l,r,o,a),h=i.vAxisID=s(l,o,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Rr(this._data,this),t._stacked&&an(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(z(i))this._data=Mu(i);else if(n!==i){if(n){Rr(n,this);let s=this._cachedMeta;an(s),s._parsed=[]}i&&Object.isExtensible(i)&&ja(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,n=this.getDataset(),s=!1;this._dataCheck();let r=i._stacked;i._stacked=ll(i.vScale,i),i.stack!==n.stack&&(s=!0,an(i),i.stack=n.stack),this._resyncElements(t),(s||r!==i._stacked)&&hl(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:o}=n,a=r.axis,l=t===0&&i===s.length?!0:n._sorted,c=t>0&&n._parsed[t-1],h,d,u;if(this._parsing===!1)n._parsed=s,n._sorted=!0,u=s;else{K(s[t])?u=this.parseArrayData(n,s,t,i):z(s[t])?u=this.parseObjectData(n,s,t,i):u=this.parsePrimitiveData(n,s,t,i);let f=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<i;++h)n._parsed[h+t]=d=u[h],l&&(f()&&(l=!1),c=d);n._sorted=l}o&&hl(this,u)}parsePrimitiveData(t,i,n,s){let{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,d=new Array(s),u,f,g;for(u=0,f=s;u<f;++u)g=u+n,d[u]={[a]:h||r.parse(c[g],g),[l]:o.parse(i[g],g)};return d}parseArrayData(t,i,n,s){let{xScale:r,yScale:o}=t,a=new Array(s),l,c,h,d;for(l=0,c=s;l<c;++l)h=l+n,d=i[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,i,n,s){let{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s),h,d,u,f;for(h=0,d=s;h<d;++h)u=h+n,f=i[u],c[h]={x:r.parse(me(f,a),u),y:o.parse(me(f,l),u)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){let s=this.chart,r=this._cachedMeta,o=i[t.axis],a={keys:sc(s,!0),values:i._stacks[t.axis]._visualValues};return al(a,o,r.index,{mode:n})}updateRangeFromParsed(t,i,n,s){let r=n[i.axis],o=r===null?NaN:r,a=s&&n._stacks[i.axis];s&&a&&(s.values=a,o=al(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){let n=this._cachedMeta,s=n._parsed,r=n._sorted&&t===n.iScale,o=s.length,a=this._getOtherScale(t),l=Fu(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=Du(a),u,f;function g(){f=s[u];let m=f[a.axis];return!it(f[t.axis])||h>m||d<m}for(u=0;u<o&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),r));++u);if(r){for(u=o-1;u>=0;--u)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){let i=this._cachedMeta._parsed,n=[],s,r,o;for(s=0,r=i.length;s<r;++s)o=i[s][t.axis],it(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,n=i.iScale,s=i.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=Tu(V(this.options.clip,Pu(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],r=i.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop,h;for(n.dataset&&n.dataset.draw(t,r,a,l),h=a;h<a+l;++h){let d=s[h];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,i){let n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){let s=this.getDataset(),r;if(t>=0&&t<this._cachedMeta.data.length){let o=this._cachedMeta.data[t];r=o.$context||(o.$context=Iu(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Ru(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){let s=i==="active",r=this._cachedDataOpts,o=t+"-"+i,a=r[o],l=this.enableOptionSharing&&_i(n);if(a)return dl(a,l);let c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],u=c.getOptionScopes(this.getDataset(),h),f=Object.keys(nt.elements[t]),g=()=>this.getContext(n,s,i),m=c.resolveNamedOptions(u,f,g,d);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(dl(m,l))),m}_resolveAnimations(t,i,n){let s=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){let h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,i),u=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(u,this.getContext(t,n,i))}let c=new Ls(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||no(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(i,r)||r!==s;return this.updateSharedOptions(r,i,n),{sharedOptions:r,includeOptions:o}}updateElement(t,i,n,s){no(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!no(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;let r=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,n=this._cachedMeta.data;for(let[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];let s=n.length,r=i.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,i,n=!0){let s=this._cachedMeta,r=s.data,o=t+i,a,l=c=>{for(c.length+=i,a=c.length-1;a>=o;a--)c[a]=c[a-i]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),n&&this.updateElements(r,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){let n=this._cachedMeta;if(this._parsing){let s=n._parsed.splice(t,i);n._stacked&&an(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};D(Ot,"defaults",{}),D(Ot,"datasetElementType",null),D(Ot,"dataElementType",null);function Nu(e,t){if(!e._cache.$bar){let i=e.getMatchingVisibleMetas(t),n=[];for(let s=0,r=i.length;s<r;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=Ir(n.sort((s,r)=>s-r))}return e._cache.$bar}function Bu(e){let t=e.iScale,i=Nu(t,e.type),n=t._length,s,r,o,a,l=()=>{o===32767||o===-32768||(_i(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(s=0,r=i.length;s<r;++s)o=t.getPixelForValue(i[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return n}function Hu(e,t,i,n){let s=i.barThickness,r,o;return $(s)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=s*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[e]-r/2}}function ju(e,t,i,n){let s=t.pixels,r=s[e],o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null,l=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);let c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:i.barPercentage,start:c}}function Vu(e,t,i,n){let s=i.parse(e[0],n),r=i.parse(e[1],n),o=Math.min(s,r),a=Math.max(s,r),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function rc(e,t,i,n){return K(e)?Vu(e,t,i,n):t[i.axis]=i.parse(e,n),t}function ul(e,t,i,n){let s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,l=[],c,h,d,u;for(c=i,h=i+n;c<h;++c)u=t[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(rc(u,d,r,c));return l}function so(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function zu(e,t,i){return e!==0?Yt(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function Wu(e){let t,i,n,s,r;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",r="start"):(s="start",r="end"),{start:i,end:n,reverse:t,top:s,bottom:r}}function $u(e,t,i,n){let s=t.borderSkipped,r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:h}=Wu(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=h:(r[fl(h,o,a,l)]=!0,s=c)),r[fl(s,o,a,l)]=!0,e.borderSkipped=r}function fl(e,t,i,n){return n?(e=Uu(e,t,i),e=pl(e,i,t)):e=pl(e,t,i),e}function Uu(e,t,i){return e===t?i:e===i?t:e}function pl(e,t,i){return e==="start"?t:e==="end"?i:e}function Xu(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}var Pi=class extends Ot{parsePrimitiveData(t,i,n,s){return ul(t,i,n,s)}parseArrayData(t,i,n,s){return ul(t,i,n,s)}parseObjectData(t,i,n,s){let{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[],u,f,g,m;for(u=n,f=n+s;u<f;++u)m=i[u],g={},g[r.axis]=r.parse(me(m,c),u),d.push(rc(me(m,h),g,o,u));return d}updateRangeFromParsed(t,i,n,s){super.updateRangeFromParsed(t,i,n,s);let r=n._custom;r&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:n,vScale:s}=i,r=this.getParsed(t),o=r._custom,a=so(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,s){let r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(i,s);for(let f=i;f<i+n;f++){let g=this.getParsed(f),m=r||$(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),b=this._calculateBarIndexPixels(f,h),v=(g._stacks||{})[a.axis],x={horizontal:c,base:m.base,enableBorderRadius:!v||so(g._custom)||o===v._top||o===v._bottom,x:c?m.head:b.center,y:c?b.center:m.head,height:c?b.size:Math.abs(m.size),width:c?Math.abs(m.size):b.size};u&&(x.options=d||this.resolveDataElementOptions(f,t[f].active?"active":s));let w=x.options||t[f].options;$u(x,w,v,o),Xu(x,w,h.ratio),this.updateElement(t[f],f,x,s)}}_getStacks(t,i){let{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=n.options.stacked,o=[],a=l=>{let c=l.controller.getParsed(i),h=c&&c[l.vScale.axis];if($(h)||isNaN(h))return!0};for(let l of s)if(!(i!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){let s=this._getStacks(t,n),r=i!==void 0?s.indexOf(i):-1;return r===-1?s.length-1:r}_getRuler(){let t=this.options,i=this._cachedMeta,n=i.iScale,s=[],r,o;for(r=0,o=i.data.length;r<o;++r)s.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));let a=t.barThickness;return{min:a||Bu(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=so(c),d=l[i.axis],u=0,f=n?this.applyStack(i,l,n):d,g,m;f!==d&&(u=f-d,f=d),h&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&Yt(d)!==Yt(c.barEnd)&&(u=0),u+=d);let b=!$(r)&&!h?r:u,v=i.getPixelForValue(b);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(u+f):g=v,m=g-v,Math.abs(m)<o){m=zu(m,i,a)*o,d===a&&(v-=m/2);let x=i.getPixelForDecimal(0),w=i.getPixelForDecimal(1),p=Math.min(x,w),y=Math.max(x,w);v=Math.max(Math.min(v,y),p),g=v+m,n&&!h&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(g)-i.getValueForPixel(v))}if(v===i.getPixelForValue(a)){let x=Yt(m)*i.getLineWidthForValue(a)/2;v+=x,m-=x}return{size:m,base:v,head:g,center:g+m/2}}_calculateBarIndexPixels(t,i){let n=i.scale,s=this.options,r=s.skipNull,o=V(s.maxBarThickness,1/0),a,l;if(i.grouped){let c=r?this._getStackCount(t):i.stackCount,h=s.barThickness==="flex"?ju(t,i,s,c):Hu(t,i,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),l=Math.min(o,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,n=t.data,s=n.length,r=0;for(;r<s;++r)this.getParsed(r)[i.axis]!==null&&n[r].draw(this._ctx)}};D(Pi,"id","bar"),D(Pi,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),D(Pi,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var Ti=class extends Ot{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,n,s){let r=super.parsePrimitiveData(t,i,n,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+n).radius;return r}parseArrayData(t,i,n,s){let r=super.parseArrayData(t,i,n,s);for(let o=0;o<r.length;o++){let a=i[n+o];r[o]._custom=V(a[2],this.resolveDataElementOptions(o+n).radius)}return r}parseObjectData(t,i,n,s){let r=super.parseObjectData(t,i,n,s);for(let o=0;o<r.length;o++){let a=i[n+o];r[o]._custom=V(a&&a.r&&+a.r,this.resolveDataElementOptions(o+n).radius)}return r}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:r}=i,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:n[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,n,s){let r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(i,s),h=o.axis,d=a.axis;for(let u=i;u<i+n;u++){let f=t[u],g=!r&&this.getParsed(u),m={},b=m[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[h]),v=m[d]=r?a.getBasePixel():a.getPixelForValue(g[d]);m.skip=isNaN(b)||isNaN(v),c&&(m.options=l||this.resolveDataElementOptions(u,f.active?"active":s),r&&(m.options.radius=0)),this.updateElement(f,u,m,s)}}resolveDataElementOptions(t,i){let n=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let r=s.radius;return i!=="active"&&(s.radius=0),s.radius+=V(n&&n._custom,r),s}};D(Ti,"id","bubble"),D(Ti,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),D(Ti,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Yu(e,t,i){let n=1,s=1,r=0,o=0;if(t<G){let a=e,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),u=Math.sin(l),f=(w,p,y)=>Si(w,a,l,!0)?1:Math.max(p,p*i,y,y*i),g=(w,p,y)=>Si(w,a,l,!0)?-1:Math.min(p,p*i,y,y*i),m=f(0,c,d),b=f(et,h,u),v=g(Z,c,d),x=g(Z+et,h,u);n=(m-v)/2,s=(b-x)/2,r=-(m+v)/2,o=-(b+x)/2}return{ratioX:n,ratioY:s,offsetX:r,offsetY:o}}var xe=class extends Ot{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let r=l=>+n[l];if(z(n[t])){let{key:l="value"}=this._parsing;r=c=>+me(n[c],l)}let o,a;for(o=t,a=t+i;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Bt(this.options.rotation-90)}_getCircumference(){return Bt(this.options.circumference)}_getRotationExtents(){let t=G,i=-G;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){let s=this.chart.getDatasetMeta(n).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),i=Math.max(i,r+o)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:n}=i,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(Oa(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:u,ratioY:f,offsetX:g,offsetY:m}=Yu(d,h,l),b=(n.width-o)/u,v=(n.height-o)/f,x=Math.max(Math.min(b,v)/2,0),w=Pr(this.options.radius,x),p=Math.max(w*l,0),y=(w-p)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,s.total=this.calculateTotal(),this.outerRadius=w-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,i){let n=this.options,s=this._cachedMeta,r=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/G)}updateElements(t,i,n,s){let r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,u=r&&c.animateScale,f=u?0:this.innerRadius,g=u?0:this.outerRadius,{sharedOptions:m,includeOptions:b}=this._getSharedOptions(i,s),v=this._getRotation(),x;for(x=0;x<i;++x)v+=this._circumference(x,r);for(x=i;x<i+n;++x){let w=this._circumference(x,r),p=t[x],y={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:g,innerRadius:f};b&&(y.options=m||this.resolveDataElementOptions(x,p.active?"active":s)),v+=w,this.updateElement(p,x,y,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,n=0,s;for(s=0;s<i.length;s++){let r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?G*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=ki(i._parsed[t],n.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let i=0,n=this.chart,s,r,o,a,l;if(!t){for(s=0,r=n.data.datasets.length;s<r;++s)if(n.isDatasetVisible(s)){o=n.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let n=0,s=t.length;n<s;++n){let r=this.resolveDataElementOptions(n);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(t){return Math.max(V(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}};D(xe,"id","doughnut"),D(xe,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),D(xe,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),D(xe,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((r,o)=>{let l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});var Mi=class extends Ot{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:n,data:s=[],_dataset:r}=i,o=this.chart._animationsDisabled,{start:a,count:l}=Br(i,s,o);this._drawStart=a,this._drawCount=l,Hr(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=s;let c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,i,n,s){let r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(i,s),u=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,b=qe(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||s==="none",x=i+n,w=t.length,p=i>0&&this.getParsed(i-1);for(let y=0;y<w;++y){let _=t[y],A=v?_:{};if(y<i||y>=x){A.skip=!0;continue}let C=this.getParsed(y),E=$(C[f]),M=A[u]=o.getPixelForValue(C[u],y),P=A[f]=r||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[f],y);A.skip=isNaN(M)||isNaN(P)||E,A.stop=y>0&&Math.abs(C[u]-p[u])>b,m&&(A.parsed=C,A.raw=c.data[y]),d&&(A.options=h||this.resolveDataElementOptions(y,_.active?"active":s)),v||this.updateElement(_,y,A,s),p=C}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return n;let r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,r,o)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}};D(Mi,"id","line"),D(Mi,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),D(Mi,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var ti=class extends Ot{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=ki(i._parsed[t].r,n.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,i,n,s){return qr.bind(this)(t,i,n,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,s)=>{let r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<i.min&&(i.min=r),r>i.max&&(i.max=r))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,n=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),r=Math.max(s/2,0),o=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,n,s){let r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,u=c.getIndexAngle(0)-.5*Z,f=u,g,m=360/this.countVisibleElements();for(g=0;g<i;++g)f+=this._computeAngle(g,s,m);for(g=i;g<i+n;g++){let b=t[g],v=f,x=f+this._computeAngle(g,s,m),w=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=x,r&&(l.animateScale&&(w=0),l.animateRotate&&(v=x=u));let p={x:h,y:d,innerRadius:0,outerRadius:w,startAngle:v,endAngle:x,options:this.resolveDataElementOptions(g,b.active?"active":s)};this.updateElement(b,g,p,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,n){return this.chart.getDataVisibility(t)?Bt(this.resolveDataElementOptions(t,i).angle||n):0}};D(ti,"id","polarArea"),D(ti,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),D(ti,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((r,o)=>{let l=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var un=class extends xe{};D(un,"id","pie"),D(un,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var Oi=class extends Ot{getLabelAndValue(t){let i=this._cachedMeta.vScale,n=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(t,i,n,s){return qr.bind(this)(t,i,n,s)}update(t){let i=this._cachedMeta,n=i.dataset,s=i.data||[],r=i.iScale.getLabels();if(n.points=s,t!=="resize"){let o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);let a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(n,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,n,s){let r=this._cachedMeta.rScale,o=s==="reset";for(let a=i;a<i+n;a++){let l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":s),h=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:h.x,u=o?r.yCenter:h.y,f={x:d,y:u,angle:h.angle,skip:isNaN(d)||isNaN(u),options:c};this.updateElement(l,a,f,s)}}};D(Oi,"id","radar"),D(Oi,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),D(Oi,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var Di=class extends Ot{getLabelAndValue(t){let i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:r}=i,o=this.getParsed(t),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+l+")"}}update(t){let i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled,{start:r,count:o}=Br(i,n,s);if(this._drawStart=r,this._drawCount=o,Hr(i)&&(r=0,o=n.length),this.options.showLine){let{dataset:a,_dataset:l}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;let c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},t)}this.updateElements(n,r,o,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,n,s){let r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(i,s),d=this.getSharedOptions(h),u=this.includeOptions(s,d),f=o.axis,g=a.axis,{spanGaps:m,segment:b}=this.options,v=qe(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||s==="none",w=i>0&&this.getParsed(i-1);for(let p=i;p<i+n;++p){let y=t[p],_=this.getParsed(p),A=x?y:{},C=$(_[g]),E=A[f]=o.getPixelForValue(_[f],p),M=A[g]=r||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],p);A.skip=isNaN(E)||isNaN(M)||C,A.stop=p>0&&Math.abs(_[f]-w[f])>v,b&&(A.parsed=_,A.raw=c.data[p]),u&&(A.options=d||this.resolveDataElementOptions(p,y.active?"active":s)),x||this.updateElement(y,p,A,s),w=_}this.updateSharedOptions(d,s,h)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let l=i.length-1;l>=0;--l)a=Math.max(a,i[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}let n=t.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;let r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}};D(Di,"id","scatter"),D(Di,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),D(Di,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var qu=Object.freeze({__proto__:null,BarController:Pi,BubbleController:Ti,DoughnutController:xe,LineController:Mi,PieController:un,PolarAreaController:ti,RadarController:Oi,ScatterController:Di});function Ke(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var xn=class{static override(t){Object.assign(xn.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ke()}parse(){return Ke()}format(){return Ke()}add(){return Ke()}diff(){return Ke()}startOf(){return Ke()}endOf(){return Ke()}},Ju={_date:xn};function Ku(e,t,i,n){let{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){let l=a._reversePixels?Na:te;if(n){if(s._sharedOptions){let c=r[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){let d=l(r,t,i-h),u=l(r,t,i+h);return{lo:d.lo,hi:u.hi}}}}else return l(r,t,i)}return{lo:0,hi:r.length-1}}function kn(e,t,i,n,s){let r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=r.length;a<l;++a){let{index:c,data:h}=r[a],{lo:d,hi:u}=Ku(r[a],t,o,s);for(let f=d;f<=u;++f){let g=h[f];g.skip||n(g,c,f)}}}function Gu(e){let t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){let r=t?Math.abs(n.x-s.x):0,o=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ro(e,t,i,n,s){let r=[];return!s&&!e.isPointInArea(t)||kn(e,i,t,function(a,l,c){!s&&!ee(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function Zu(e,t,i,n){let s=[];function r(o,a,l){let{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],n),{angle:d}=Lr(o,{x:t.x,y:t.y});Si(d,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return kn(e,i,t,r),s}function Qu(e,t,i,n,s,r){let o=[],a=Gu(i),l=Number.POSITIVE_INFINITY;function c(h,d,u){let f=h.inRange(t.x,t.y,s);if(n&&!f)return;let g=h.getCenterPoint(s);if(!(!!r||e.isPointInArea(g))&&!f)return;let b=a(t,g);b<l?(o=[{element:h,datasetIndex:d,index:u}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:u})}return kn(e,i,t,c),o}function oo(e,t,i,n,s,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!n?Zu(e,t,i,s):Qu(e,t,i,n,s,r)}function gl(e,t,i,n,s){let r=[],o=i==="x"?"inXRange":"inYRange",a=!1;return kn(e,i,t,(l,c,h)=>{l[o](t[i],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:r}var tf={evaluateInteractionItems:kn,modes:{index(e,t,i,n){let s=Ie(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?ro(e,s,r,n,o):oo(e,s,r,!1,n,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{let h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,i,n){let s=Ie(t,e),r=i.axis||"xy",o=i.includeInvisible||!1,a=i.intersect?ro(e,s,r,n,o):oo(e,s,r,!1,n,o);if(a.length>0){let l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,i,n){let s=Ie(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return ro(e,s,r,n,o)},nearest(e,t,i,n){let s=Ie(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return oo(e,s,r,i.intersect,n,o)},x(e,t,i,n){let s=Ie(t,e);return gl(e,s,"x",i.intersect,n)},y(e,t,i,n){let s=Ie(t,e);return gl(e,s,"y",i.intersect,n)}}},oc=["left","top","right","bottom"];function ln(e,t){return e.filter(i=>i.pos===t)}function ml(e,t){return e.filter(i=>oc.indexOf(i.pos)===-1&&i.box.axis===t)}function cn(e,t){return e.sort((i,n)=>{let s=t?n:i,r=t?i:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function ef(e){let t=[],i,n,s,r,o,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function nf(e){let t={};for(let i of e){let{stack:n,pos:s,stackWeight:r}=i;if(!n||!oc.includes(s))continue;let o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function sf(e,t){let i=nf(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t,r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];let{fullSize:l}=a.box,c=i[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=h?h*s:l&&t.availableHeight)}return i}function rf(e){let t=ef(e),i=cn(t.filter(c=>c.box.fullSize),!0),n=cn(ln(t,"left"),!0),s=cn(ln(t,"right")),r=cn(ln(t,"top"),!0),o=cn(ln(t,"bottom")),a=ml(t,"x"),l=ml(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ln(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function bl(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function ac(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function of(e,t,i,n){let{pos:s,box:r}=i,o=e.maxPadding;if(!z(s)){i.size&&(e[s]-=i.size);let d=n[i.stack]||{size:0,count:1};d.size=Math.max(d.size,i.horizontal?r.height:r.width),i.size=d.size/d.count,e[s]+=i.size}r.getPadding&&ac(o,r.getPadding());let a=Math.max(0,t.outerWidth-bl(o,e,"left","right")),l=Math.max(0,t.outerHeight-bl(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function af(e){let t=e.maxPadding;function i(n){let s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function lf(e,t){let i=t.maxPadding;function n(s){let r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return n(e?["left","right"]:["top","bottom"])}function fn(e,t,i,n){let s=[],r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,lf(a.horizontal,t));let{same:d,other:u}=of(t,i,a,n);c|=d&&s.length,h=h||u,l.fullSize||s.push(a)}return c&&fn(s,t,i,n)||h}function As(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function vl(e,t,i,n){let s=i.padding,{x:r,y:o}=t;for(let a of e){let l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){let d=t.w*h,u=c.size||l.height;_i(c.start)&&(o=c.start),l.fullSize?As(l,s.left,o,i.outerWidth-s.right-s.left,u):As(l,t.left+c.placed,o,d,u),c.start=o,c.placed+=d,o=l.bottom}else{let d=t.h*h,u=c.size||l.width;_i(c.start)&&(r=c.start),l.fullSize?As(l,r,s.top,u,i.outerHeight-s.bottom-s.top):As(l,r,t.top+c.placed,u,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var _t={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;let s=yt(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(i-s.height,0),a=rf(e.boxes),l=a.vertical,c=a.horizontal;Y(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});let h=l.reduce((m,b)=>b.box.options&&b.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),u=Object.assign({},s);ac(u,yt(n));let f=Object.assign({maxPadding:u,w:r,h:o,x:s.left,y:s.top},s),g=sf(l.concat(c),d);fn(a.fullSize,f,d,g),fn(l,f,d,g),fn(c,f,d,g)&&fn(l,f,d,g),af(f),vl(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,vl(a.rightAndBottom,f,d,g),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Y(a.chartArea,m=>{let b=m.box;Object.assign(b,e.chartArea),b.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},Rs=class{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}},po=class extends Rs{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Os="$chartjs",cf={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yl=e=>e===null||e==="";function hf(e,t){let i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[Os]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",yl(s)){let r=Gr(e,"width");r!==void 0&&(e.width=r)}if(yl(n))if(e.style.height==="")e.height=e.width/(t||2);else{let r=Gr(e,"height");r!==void 0&&(e.height=r)}return e}var lc=tl?{passive:!0}:!1;function df(e,t,i){e.addEventListener(t,i,lc)}function uf(e,t,i){e.canvas.removeEventListener(t,i,lc)}function ff(e,t){let i=cf[e.type]||e.type,{x:n,y:s}=Ie(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Is(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function pf(e,t,i){let n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Is(a.addedNodes,n),o=o&&!Is(a.removedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function gf(e,t,i){let n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Is(a.removedNodes,n),o=o&&!Is(a.addedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}var _n=new Map,xl=0;function cc(){let e=window.devicePixelRatio;e!==xl&&(xl=e,_n.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function mf(e,t){_n.size||window.addEventListener("resize",cc),_n.set(e,t)}function bf(e){_n.delete(e),_n.size||window.removeEventListener("resize",cc)}function vf(e,t,i){let n=e.canvas,s=n&&Ss(n);if(!s)return;let r=Nr((a,l)=>{let c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),mf(e,r),o}function ao(e,t,i){i&&i.disconnect(),t==="resize"&&bf(e)}function yf(e,t,i){let n=e.canvas,s=Nr(r=>{e.ctx!==null&&i(ff(r,e))},e);return df(n,t,s),s}var go=class extends Rs{acquireContext(t,i){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(hf(t,i),n):null}releaseContext(t){let i=t.canvas;if(!i[Os])return!1;let n=i[Os].initial;["height","width"].forEach(r=>{let o=n[r];$(o)?i.removeAttribute(r):i.setAttribute(r,o)});let s=n.style||{};return Object.keys(s).forEach(r=>{i.style[r]=s[r]}),i.width=i.width,delete i[Os],!0}addEventListener(t,i,n){this.removeEventListener(t,i);let s=t.$proxies||(t.$proxies={}),o={attach:pf,detach:gf,resize:vf}[i]||yf;s[i]=o(t,i,n)}removeEventListener(t,i){let n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:ao,detach:ao,resize:ao}[i]||uf)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return Qa(t,i,n,s)}isAttached(t){let i=Ss(t);return!!(i&&i.isConnected)}};function xf(e){return!Jr()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?po:go}var Dt=class{x;y;active=!1;options;$animations;tooltipPosition(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return qe(this.x)&&qe(this.y)}getProps(t,i){let n=this.$animations;if(!i||!n)return this;let s={};return t.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}};D(Dt,"defaults",{}),D(Dt,"defaultRoutes");function _f(e,t){let i=e.options.ticks,n=wf(e),s=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?kf(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return Af(t,c,r,o/s),c;let h=Sf(r,t,s);if(o>0){let d,u,f=o>1?Math.round((l-a)/(o-1)):null;for(Cs(t,c,h,$(f)?0:a-f,a),d=0,u=o-1;d<u;d++)Cs(t,c,h,r[d],r[d+1]);return Cs(t,c,h,l,$(f)?t.length:l+f),c}return Cs(t,c,h),c}function wf(e){let t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function Sf(e,t,i){let n=Cf(e),s=t.length/i;if(!n)return Math.max(s,1);let r=Ra(n);for(let o=0,a=r.length-1;o<a;o++){let l=r[o];if(l>s)return l}return Math.max(s,1)}function kf(e){let t=[],i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function Af(e,t,i,n){let s=0,r=i[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=i[s*n])}function Cs(e,t,i,n,s){let r=V(n,0),o=Math.min(V(s,e.length),e.length),a=0,l,c,h;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),h=r;h<0;)a++,h=Math.round(r+a*i);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*i))}function Cf(e){let t=e.length,i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}var Ef=e=>e==="left"?"right":e==="right"?"left":e,_l=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,wl=(e,t)=>Math.min(t||e,e);function Sl(e,t){let i=[],n=e.length/t,s=e.length,r=0;for(;r<s;r+=n)i.push(e[Math.floor(r)]);return i}function Pf(e,t,i){let n=e.ticks.length,s=Math.min(t,n-1),r=e._startPixel,o=e._endPixel,a=1e-6,l=e.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function Tf(e,t){Y(e,i=>{let n=i.gc,s=n.length/2,r;if(s>t){for(r=0;r<s;++r)delete i.data[n[r]];n.splice(0,s)}})}function hn(e){return e.drawTicks?e.tickLength:0}function kl(e,t){if(!e.display)return 0;let i=ht(e.font,t),n=yt(e.padding);return(K(e.text)?e.text.length:1)*i.lineHeight+n.height}function Mf(e,t){return be(e,{scale:t,type:"scale"})}function Of(e,t,i){return be(e,{tick:i,index:t,type:"tick"})}function Df(e,t,i){let n=vs(e);return(i&&t!=="right"||!i&&t==="right")&&(n=Ef(n)),n}function Lf(e,t,i,n){let{top:s,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l,d=0,u,f,g,m=o-s,b=a-r;if(e.isHorizontal()){if(f=vt(n,r,a),z(i)){let v=Object.keys(i)[0],x=i[v];g=h[v].getPixelForValue(x)+m-t}else i==="center"?g=(c.bottom+c.top)/2+m-t:g=_l(e,i,t);u=a-r}else{if(z(i)){let v=Object.keys(i)[0],x=i[v];f=h[v].getPixelForValue(x)-b+t}else i==="center"?f=(c.left+c.right)/2-b+t:f=_l(e,i,t);g=vt(n,o,s),d=i==="left"?-et:et}return{titleX:f,titleY:g,maxWidth:u,rotation:d}}var _e=class extends Dt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=Et(t,Number.POSITIVE_INFINITY),i=Et(i,Number.NEGATIVE_INFINITY),n=Et(n,Number.POSITIVE_INFINITY),s=Et(s,Number.NEGATIVE_INFINITY),{min:Et(t,n),max:Et(i,s),minDefined:it(t),maxDefined:it(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:i,max:n};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(i=Math.min(i,o.min)),r||(n=Math.max(n,o.max));return i=r&&i>n?n:i,n=s&&i>n?i:n,{min:Et(i,Et(n,i)),max:Et(n,Et(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){J(this.options.beforeUpdate,[this])}update(t,i,n){let{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ya(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?Sl(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_f(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){J(this.options.afterUpdate,[this])}beforeSetDimensions(){J(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){J(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),J(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){J(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let i=this.options.ticks,n,s,r;for(n=0,s=t.length;n<s;n++)r=t[n],r.label=J(i.callback,[r.value,n,t],this)}afterTickToLabelConversion(){J(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){J(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,i=t.ticks,n=wl(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,r=i.maxRotation,o=s,a,l,c;if(!this._isVisible()||!i.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}let h=this._getLabelSizes(),d=h.widest.width,u=h.highest.height,f=ut(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:f/(n-1),d+6>a&&(a=f/(n-(t.offset?.5:1)),l=this.maxHeight-hn(t.grid)-i.padding-kl(t.title,this.chart.options.font),c=Math.sqrt(d*d+u*u),o=ms(Math.min(Math.asin(ut((h.highest.height+6)/a,-1,1)),Math.asin(ut(l/c,-1,1))-Math.asin(ut(u/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){J(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){J(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=kl(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=hn(r)+l):(t.height=this.maxHeight,t.width=hn(r)+l),n.display&&this.ticks.length){let{first:c,last:h,widest:d,highest:u}=this._getLabelSizes(),f=n.padding*2,g=Bt(this.labelRotation),m=Math.cos(g),b=Math.sin(g);if(a){let v=n.mirror?0:b*d.width+m*u.height;t.height=Math.min(this.maxHeight,t.height+v+f)}else{let v=n.mirror?0:m*d.width+b*u.height;t.width=Math.min(this.maxWidth,t.width+v+f)}this._calculatePadding(c,h,b,m)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){let{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),u=0,f=0;l?c?(u=s*t.width,f=n*i.height):(u=n*t.height,f=s*i.width):r==="start"?f=i.width:r==="end"?u=t.width:r!=="inner"&&(u=t.width/2,f=i.width/2),this.paddingLeft=Math.max((u-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let h=i.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=i.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){J(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)$(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let i=this.options.ticks.sampleSize,n=this.ticks;i<n.length&&(n=Sl(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){let{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(i/wl(i,n)),c=0,h=0,d,u,f,g,m,b,v,x,w,p,y;for(d=0;d<i;d+=l){if(g=t[d].label,m=this._resolveTickFontOptions(d),s.font=b=m.string,v=r[b]=r[b]||{data:{},gc:[]},x=m.lineHeight,w=p=0,!$(g)&&!K(g))w=en(s,v.data,v.gc,w,g),p=x;else if(K(g))for(u=0,f=g.length;u<f;++u)y=g[u],!$(y)&&!K(y)&&(w=en(s,v.data,v.gc,w,y),p+=x);o.push(w),a.push(p),c=Math.max(w,c),h=Math.max(p,h)}Tf(r,i);let _=o.indexOf(c),A=a.indexOf(h),C=E=>({width:o[E]||0,height:a[E]||0});return{first:C(0),last:C(i-1),widest:C(_),highest:C(A),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let i=this._startPixel+t*this._length;return Fa(this._alignToPixels?De(this.chart,i,0):i)}getDecimalForPixel(t){let i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){let i=this.ticks||[];if(t>=0&&t<i.length){let n=i[t];return n.$context||(n.$context=Of(this.getContext(),t,n))}return this.$context||(this.$context=Mf(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,i=Bt(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let i=this.axis,n=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),u=hn(r),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,b=m/2,v=function(B){return De(n,B,m)},x,w,p,y,_,A,C,E,M,P,L,H;if(o==="top")x=v(this.bottom),A=this.bottom-u,E=x-b,P=v(t.top)+b,H=t.bottom;else if(o==="bottom")x=v(this.top),P=t.top,H=v(t.bottom)-b,A=x+b,E=this.top+u;else if(o==="left")x=v(this.right),_=this.right-u,C=x-b,M=v(t.left)+b,L=t.right;else if(o==="right")x=v(this.left),M=t.left,L=v(t.right)-b,_=x+b,C=this.left+u;else if(i==="x"){if(o==="center")x=v((t.top+t.bottom)/2+.5);else if(z(o)){let B=Object.keys(o)[0],T=o[B];x=v(this.chart.scales[B].getPixelForValue(T))}P=t.top,H=t.bottom,A=x+b,E=A+u}else if(i==="y"){if(o==="center")x=v((t.left+t.right)/2);else if(z(o)){let B=Object.keys(o)[0],T=o[B];x=v(this.chart.scales[B].getPixelForValue(T))}_=x-b,C=_-u,M=t.left,L=t.right}let X=V(s.ticks.maxTicksLimit,d),j=Math.max(1,Math.ceil(d/X));for(w=0;w<d;w+=j){let B=this.getContext(w),T=r.setContext(B),O=a.setContext(B),F=T.lineWidth,I=T.color,W=O.dash||[],Q=O.dashOffset,rt=T.tickWidth,ot=T.tickColor,at=T.tickBorderDash||[],tt=T.tickBorderDashOffset;p=Pf(this,w,l),p!==void 0&&(y=De(n,p,F),c?_=C=M=L=y:A=E=P=H=y,f.push({tx1:_,ty1:A,tx2:C,ty2:E,x1:M,y1:P,x2:L,y2:H,width:F,color:I,borderDash:W,borderDashOffset:Q,tickWidth:rt,tickColor:ot,tickBorderDash:at,tickBorderDashOffset:tt}))}return this._ticksLength=d,this._borderValue=x,f}_computeLabelItems(t){let i=this.axis,n=this.options,{position:s,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=r,u=hn(n.grid),f=u+h,g=d?-h:f,m=-Bt(this.labelRotation),b=[],v,x,w,p,y,_,A,C,E,M,P,L,H="middle";if(s==="top")_=this.bottom-g,A=this._getXAxisLabelAlignment();else if(s==="bottom")_=this.top+g,A=this._getXAxisLabelAlignment();else if(s==="left"){let j=this._getYAxisLabelAlignment(u);A=j.textAlign,y=j.x}else if(s==="right"){let j=this._getYAxisLabelAlignment(u);A=j.textAlign,y=j.x}else if(i==="x"){if(s==="center")_=(t.top+t.bottom)/2+f;else if(z(s)){let j=Object.keys(s)[0],B=s[j];_=this.chart.scales[j].getPixelForValue(B)+f}A=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")y=(t.left+t.right)/2-f;else if(z(s)){let j=Object.keys(s)[0],B=s[j];y=this.chart.scales[j].getPixelForValue(B)}A=this._getYAxisLabelAlignment(u).textAlign}i==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));let X=this._getLabelSizes();for(v=0,x=a.length;v<x;++v){w=a[v],p=w.label;let j=r.setContext(this.getContext(v));C=this.getPixelForTick(v)+r.labelOffset,E=this._resolveTickFontOptions(v),M=E.lineHeight,P=K(p)?p.length:1;let B=P/2,T=j.color,O=j.textStrokeColor,F=j.textStrokeWidth,I=A;o?(y=C,A==="inner"&&(v===x-1?I=this.options.reverse?"left":"right":v===0?I=this.options.reverse?"right":"left":I="center"),s==="top"?c==="near"||m!==0?L=-P*M+M/2:c==="center"?L=-X.highest.height/2-B*M+M:L=-X.highest.height+M/2:c==="near"||m!==0?L=M/2:c==="center"?L=X.highest.height/2-B*M:L=X.highest.height-P*M,d&&(L*=-1),m!==0&&!j.showLabelBackdrop&&(y+=M/2*Math.sin(m))):(_=C,L=(1-P)*M/2);let W;if(j.showLabelBackdrop){let Q=yt(j.backdropPadding),rt=X.heights[v],ot=X.widths[v],at=L-Q.top,tt=0-Q.left;switch(H){case"middle":at-=rt/2;break;case"bottom":at-=rt;break}switch(A){case"center":tt-=ot/2;break;case"right":tt-=ot;break}W={left:tt,top:at,width:ot+Q.width,height:rt+Q.height,color:j.backdropColor}}b.push({label:p,font:E,textOffset:L,options:{rotation:m,color:T,strokeColor:O,strokeWidth:F,textAlign:I,textBaseline:H,translation:[y,_],backdrop:W}})}return b}_getXAxisLabelAlignment(){let{position:t,ticks:i}=this.options;if(-Bt(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:i,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width,c,h;return i==="left"?s?(h=this.right+r,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h=this.left)):i==="right"?s?(h=this.left+r,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:i},left:n,top:s,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,r,o),t.restore())}getLineWidthForValue(t){let i=this.options.grid;if(!this._isVisible()||!i.display)return 0;let s=this.ticks.findIndex(r=>r.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,a=(l,c,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(r=0,o=s.length;r<o;++r){let l=s[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:i,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;let a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,h,d,u;this.isHorizontal()?(c=De(t,this.left,o)-o/2,h=De(t,this.right,a)+a/2,d=u=l):(d=De(t,this.top,o)-o/2,u=De(t,this.bottom,a)+a/2,c=h=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(c,d),i.lineTo(h,u),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,s=this._computeLabelArea();s&&rn(n,s);let r=this.getLabelItems(t);for(let o of r){let a=o.options,l=o.font,c=o.label,h=o.textOffset;Le(n,c,0,h,l,a)}s&&on(n)}drawTitle(){let{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;let r=ht(n.font),o=yt(n.padding),a=n.align,l=r.lineHeight/2;i==="bottom"||i==="center"||z(i)?(l+=o.bottom,K(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;let{titleX:c,titleY:h,maxWidth:d,rotation:u}=Lf(this,l,i,a);Le(t,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:u,textAlign:Df(a,i,s),textBaseline:"middle",translation:[c,h]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,i=t.ticks&&t.ticks.z||0,n=V(t.grid&&t.grid.z,-1),s=V(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==_e.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[],r,o;for(r=0,o=i.length;r<o;++r){let a=i[r];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){let i=this.options.ticks.setContext(this.getContext(t));return ht(i.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Ii=class{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let i=Object.getPrototypeOf(t),n;Ff(i)&&(n=this.register(i));let s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,Rf(t,o,n),this.override&&nt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in nt[s]&&(delete nt[s][n],this.override&&delete Oe[n])}};function Rf(e,t,i){let n=vi(Object.create(null),[i?nt.get(i):{},nt.get(t),e.defaults]);nt.set(t,n),e.defaultRoutes&&If(t,e.defaultRoutes),e.descriptors&&nt.describe(t,e.descriptors)}function If(e,t){Object.keys(t).forEach(i=>{let n=i.split("."),s=n.pop(),r=[e].concat(n).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");nt.route(r,s,l,a)})}function Ff(e){return"id"in e&&"defaults"in e}var mo=class{constructor(){this.controllers=new Ii(Ot,"datasets",!0),this.elements=new Ii(Dt,"elements"),this.plugins=new Ii(Object,"plugins"),this.scales=new Ii(_e,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{let r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Y(s,o=>{let a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,n){let s=gs(t);J(n["before"+s],[],n),i[t](n),J(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){let n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){let s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}},re=new mo,bo=class{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,i,n);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,n,s){s=s||{};for(let r of t){let o=r.plugin,a=o[n],l=[i,s,r.options];if(J(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){$(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){let n=t&&t.config,s=V(n.options&&n.options.plugins,{}),r=Nf(n);return s===!1&&!i?[]:Hf(t,r,s,i)}_notifyStateChanges(t){let i=this._oldCache||[],n=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}};function Nf(e){let t={},i=[],n=Object.keys(re.plugins.items);for(let r=0;r<n.length;r++)i.push(re.getPlugin(n[r]));let s=e.plugins||[];for(let r=0;r<s.length;r++){let o=s[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function Bf(e,t){return!t&&e===!1?null:e===!0?{}:e}function Hf(e,{plugins:t,localIds:i},n,s){let r=[],o=e.getContext();for(let a of t){let l=a.id,c=Bf(n[l],s);c!==null&&r.push({plugin:a,options:jf(e.config,{plugin:a,local:i[l]},c,o)})}return r}function jf(e,{plugin:t,local:i},n,s){let r=e.pluginScopeKeys(t),o=e.getOptionScopes(n,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vo(e,t){let i=nt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Vf(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function zf(e,t){return e===t?"_index_":"_value_"}function Al(e){if(e==="x"||e==="y"||e==="r")return e}function Wf(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function yo(e,...t){if(Al(e))return e;for(let i of t){let n=i.axis||Wf(i.position)||e.length>1&&Al(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Cl(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function $f(e,t){if(t.data&&t.data.datasets){let i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return Cl(e,"x",i[0])||Cl(e,"y",i[0])}return{}}function Uf(e,t){let i=Oe[e.type]||{scales:{}},n=t.scales||{},s=vo(e.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{let a=n[o];if(!z(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=yo(o,a,$f(o,e),nt.scales[a.type]),c=zf(l,s),h=i.scales||{};r[o]=xi(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{let a=o.type||e.type,l=o.indexAxis||vo(a,t),h=(Oe[a]||{}).scales||{};Object.keys(h).forEach(d=>{let u=Vf(d,l),f=o[u+"AxisID"]||u;r[f]=r[f]||Object.create(null),xi(r[f],[{axis:u},n[f],h[d]])})}),Object.keys(r).forEach(o=>{let a=r[o];xi(a,[nt.scales[a.type],nt.scale])}),r}function hc(e){let t=e.options||(e.options={});t.plugins=V(t.plugins,{}),t.scales=Uf(e,t)}function dc(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Xf(e){return e=e||{},e.data=dc(e.data),hc(e),e}var El=new Map,uc=new Set;function Es(e,t){let i=El.get(e);return i||(i=t(),El.set(e,i),uc.add(i)),i}var dn=(e,t,i)=>{let n=me(t,i);n!==void 0&&e.add(n)},xo=class{constructor(t){this._config=Xf(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=dc(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),hc(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Es(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Es(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Es(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){let i=t.id,n=this.type;return Es(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){let n=this._scopeCache,s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){let{options:s,type:r}=this,o=this._cachedScopes(t,n),a=o.get(i);if(a)return a;let l=new Set;i.forEach(h=>{t&&(l.add(t),h.forEach(d=>dn(l,t,d))),h.forEach(d=>dn(l,s,d)),h.forEach(d=>dn(l,Oe[r]||{},d)),h.forEach(d=>dn(l,nt,d)),h.forEach(d=>dn(l,ys,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),uc.has(i)&&o.set(i,c),c}chartOptionScopes(){let{options:t,type:i}=this;return[t,Oe[i]||{},nt.datasets[i]||{},{type:i},nt,ys]}resolveNamedOptions(t,i,n,s=[""]){let r={$shared:!0},{resolver:o,subPrefixes:a}=Pl(this._resolverCache,t,s),l=o;if(qf(o,i)){r.$shared=!1,n=pe(n)?n():n;let c=this.createResolver(t,n,a);l=Ye(o,n,c)}for(let c of i)r[c]=l[c];return r}createResolver(t,i,n=[""],s){let{resolver:r}=Pl(this._resolverCache,t,n);return z(i)?Ye(r,i,void 0,s):r}};function Pl(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));let s=i.join(),r=n.get(s);return r||(r={resolver:ws(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,r)),r}var Yf=e=>z(e)&&Object.getOwnPropertyNames(e).reduce((t,i)=>t||pe(e[i]),!1);function qf(e,t){let{isScriptable:i,isIndexable:n}=Ur(e);for(let s of t){let r=i(s),o=n(s),a=(o||r)&&e[s];if(r&&(pe(a)||Yf(a))||o&&K(a))return!0}return!1}var Jf="4.3.0",Kf=["top","bottom","left","right","chartArea"];function Tl(e,t){return e==="top"||e==="bottom"||Kf.indexOf(e)===-1&&t==="x"}function Ml(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function Ol(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),J(i&&i.onComplete,[e],t)}function Gf(e){let t=e.chart,i=t.options.animation;J(i&&i.onProgress,[e],t)}function fc(e){return Jr()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var Ds={},Dl=e=>{let t=fc(e);return Object.values(Ds).filter(i=>i.canvas===t).pop()};function Zf(e,t,i){let n=Object.keys(e);for(let s of n){let r=+s;if(r>=t){let o=e[s];delete e[s],(i>0||r>t)&&(e[r+i]=o)}}}function Qf(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function tp(e){let{xScale:t,yScale:i}=e;if(t&&i)return{left:t.left,right:t.right,top:i.top,bottom:i.bottom}}var Ht=class{static register(...t){re.add(...t),Ll()}static unregister(...t){re.remove(...t),Ll()}constructor(t,i){let n=this.config=new xo(i),s=fc(t),r=Dl(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");let o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||xf(s)),this.platform.updateConfig(n);let a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Ma(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bo,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Va(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ds[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ve.listen(this,"complete",Ol),ve.listen(this,"progress",Gf),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:r}=this;return $(t)?i&&r?r:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return re}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zr(this.canvas,this.ctx),this}stop(){return ve.stop(this),this}resize(t,i){ve.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,i,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Kr(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),J(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Y(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{}),r=[];i&&(r=r.concat(Object.keys(i).map(o=>{let a=i[o],l=yo(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Y(r,o=>{let a=o.options,l=a.id,c=yo(l,a),h=V(a.type,o.dtype);(a.position===void 0||Tl(a.position,c)!==Tl(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in n&&n[l].type===h)d=n[l];else{let u=re.getScale(h);d=new u({id:l,type:h,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(a,t)}),Y(s,(o,a)=>{o||delete n[a]}),Y(n,o=>{_t.configure(this,o,o.options),_t.addBox(this,o)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,r)=>s.index-r.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(Ml("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){let r=i[n],o=this.getDatasetMeta(n),a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||vo(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{let l=re.getController(a),{datasetElementType:c,dataElementType:h}=nt.datasets[a];Object.assign(l,{dataElementType:re.getElement(h),datasetElementType:c&&re.getElement(c)}),o.controller=new l(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Y(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){let{controller:d}=this.getDatasetMeta(c),u=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(u),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),s||Y(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ml("z","_idx"));let{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Y(this.scales,t=>{_t.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Tr(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:n,start:s,count:r}of i){let o=n==="_removeElements"?-r:r;Zf(t,s,o)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=n(0);for(let r=1;r<i;r++)if(!Tr(s,n(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;_t.update(this,this.width,this.height,t);let i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Y(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,pe(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ve.has(this)?this.attached&&!ve.running(this)&&ve.start(this):(this.draw(),Ol({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,n=[],s,r;for(s=0,r=i.length;s<r;++s){let o=i[s];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,n=t._clip,s=!n.disabled,r=tp(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&rn(i,{left:n.left===!1?0:r.left-n.left,right:n.right===!1?this.width:r.right+n.right,top:n.top===!1?0:r.top-n.top,bottom:n.bottom===!1?this.height:r.bottom+n.bottom}),t.controller.draw(),s&&on(i),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ee(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){let r=tf.modes[i];return typeof r=="function"?r(this,t,n,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],n=this._metasets,s=n.filter(r=>r&&r._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=be(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){let n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){let s=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);_i(i)?(r.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ve.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),zr(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Ds[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,n=(r,o)=>{i.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Y(this.options.events,r=>n(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)},o,a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){Y(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Y(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){let s=n?"set":"remove",r,o,a,l;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];let c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{let a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!nn(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){let s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(i,t),a=n?t:r(t,i);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,i){let n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;let r=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(t,i,n){let{_active:s=[],options:r}=this,o=i,a=this._getActiveElements(t,s,n,o),l=La(t),c=Qf(t,this._lastEvent,n,l);n&&(this._lastEvent=null,J(r.onHover,[t,a,this],this),l&&J(r.onClick,[t,a,this],this));let h=!nn(a,s);return(h||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,h}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;let r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}};D(Ht,"defaults",nt),D(Ht,"instances",Ds),D(Ht,"overrides",Oe),D(Ht,"registry",re),D(Ht,"version",Jf),D(Ht,"getChart",Dl);function Ll(){return Y(Ht.instances,e=>e._plugins.invalidate())}function ep(e,t,i){let{startAngle:n,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t,c=s/a;e.beginPath(),e.arc(r,o,a,n-c,i+c),l>s?(c=s/l,e.arc(r,o,l,i+c,n-c,!0)):e.arc(r,o,s,i+et,n-et),e.closePath(),e.clip()}function ip(e){return _s(e,["outerStart","outerEnd","innerStart","innerEnd"])}function np(e,t,i,n){let s=ip(e.options.borderRadius),r=(i-t)/2,o=Math.min(r,n*t/2),a=l=>{let c=(i-Math.min(r,l))*n/2;return ut(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:ut(s.innerStart,0,o),innerEnd:ut(s.innerEnd,0,o)}}function Ei(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Fs(e,t,i,n,s,r){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,d=Math.max(t.outerRadius+n+i-c,0),u=h>0?h+n+i+c:0,f=0,g=s-l;if(n){let j=h>0?h-n:0,B=d>0?d-n:0,T=(j+B)/2,O=T!==0?g*T/(T+n):g;f=(g-O)/2}let m=Math.max(.001,g*d-i/Z)/d,b=(g-m)/2,v=l+b+f,x=s-b-f,{outerStart:w,outerEnd:p,innerStart:y,innerEnd:_}=np(t,u,d,x-v),A=d-w,C=d-p,E=v+w/A,M=x-p/C,P=u+y,L=u+_,H=v+y/P,X=x-_/L;if(e.beginPath(),r){let j=(E+M)/2;if(e.arc(o,a,d,E,j),e.arc(o,a,d,j,M),p>0){let F=Ei(C,M,o,a);e.arc(F.x,F.y,p,M,x+et)}let B=Ei(L,x,o,a);if(e.lineTo(B.x,B.y),_>0){let F=Ei(L,X,o,a);e.arc(F.x,F.y,_,x+et,X+Math.PI)}let T=(x-_/u+(v+y/u))/2;if(e.arc(o,a,u,x-_/u,T,!0),e.arc(o,a,u,T,v+y/u,!0),y>0){let F=Ei(P,H,o,a);e.arc(F.x,F.y,y,H+Math.PI,v-et)}let O=Ei(A,v,o,a);if(e.lineTo(O.x,O.y),w>0){let F=Ei(A,E,o,a);e.arc(F.x,F.y,w,v-et,E)}}else{e.moveTo(o,a);let j=Math.cos(E)*d+o,B=Math.sin(E)*d+a;e.lineTo(j,B);let T=Math.cos(M)*d+o,O=Math.sin(M)*d+a;e.lineTo(T,O)}e.closePath()}function sp(e,t,i,n,s){let{fullCircles:r,startAngle:o,circumference:a}=t,l=t.endAngle;if(r){Fs(e,t,i,n,l,s);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%G||G))}return Fs(e,t,i,n,l,s),e.fill(),l}function rp(e,t,i,n,s){let{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:u}=l,f=l.borderAlign==="inner";if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=u,f?(e.lineWidth=c*2,e.lineJoin=h||"round"):(e.lineWidth=c,e.lineJoin=h||"bevel");let g=t.endAngle;if(r){Fs(e,t,i,n,g,s);for(let m=0;m<r;++m)e.stroke();isNaN(a)||(g=o+(a%G||G))}f&&ep(e,t,g),r||(Fs(e,t,i,n,g,s),e.stroke())}var Ze=class extends Dt{circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,n){let s=this.getProps(["x","y"],n),{angle:r,distance:o}=Lr(s,{x:t,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,g=V(d,l-a)>=G||Si(r,a,l),m=ne(o,c+u,h+u);return g&&m}getCenterPoint(t){let{x:i,y:n,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,h=(s+r)/2,d=(o+a+c+l)/2;return{x:i+Math.cos(h)*d,y:n+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:i,circumference:n}=this,s=(i.offset||0)/4,r=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>G?Math.floor(n/G):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*s,Math.sin(a)*s);let l=1-Math.sin(Math.min(Z,n||0)),c=s*l;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,sp(t,this,c,r,o),rp(t,this,c,r,o),t.restore()}};D(Ze,"id","arc"),D(Ze,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),D(Ze,"defaultRoutes",{backgroundColor:"backgroundColor"}),D(Ze,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function pc(e,t,i=t){e.lineCap=V(i.borderCapStyle,t.borderCapStyle),e.setLineDash(V(i.borderDash,t.borderDash)),e.lineDashOffset=V(i.borderDashOffset,t.borderDashOffset),e.lineJoin=V(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=V(i.borderWidth,t.borderWidth),e.strokeStyle=V(i.borderColor,t.borderColor)}function op(e,t,i){e.lineTo(i.x,i.y)}function ap(e){return e.stepped?Ua:e.tension||e.cubicInterpolationMode==="monotone"?Xa:op}function gc(e,t,i={}){let n=e.length,{start:s=0,end:r=n-1}=i,{start:o,end:a}=t,l=Math.max(s,o),c=Math.min(r,a),h=s<o&&r<o||s>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!h?n+c-l:c-l}}function lp(e,t,i,n){let{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:c}=gc(s,i,n),h=ap(r),{move:d=!0,reverse:u}=n||{},f,g,m;for(f=0;f<=c;++f)g=s[(a+(u?c-f:f))%o],!g.skip&&(d?(e.moveTo(g.x,g.y),d=!1):h(e,m,g,u,r.stepped),m=g);return l&&(g=s[(a+(u?c:0))%o],h(e,m,g,u,r.stepped)),!!l}function cp(e,t,i,n){let s=t.points,{count:r,start:o,ilen:a}=gc(s,i,n),{move:l=!0,reverse:c}=n||{},h=0,d=0,u,f,g,m,b,v,x=p=>(o+(c?a-p:p))%r,w=()=>{m!==b&&(e.lineTo(h,b),e.lineTo(h,m),e.lineTo(h,v))};for(l&&(f=s[x(0)],e.moveTo(f.x,f.y)),u=0;u<=a;++u){if(f=s[x(u)],f.skip)continue;let p=f.x,y=f.y,_=p|0;_===g?(y<m?m=y:y>b&&(b=y),h=(d*h+p)/++d):(w(),e.lineTo(p,y),g=_,d=0,m=b=y),v=y}w()}function _o(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?cp:lp}function hp(e){return e.stepped?el:e.tension||e.cubicInterpolationMode==="monotone"?il:Me}function dp(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),pc(e,t.options),e.stroke(s)}function up(e,t,i,n){let{segments:s,options:r}=t,o=_o(t);for(let a of s)pc(e,r,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}var fp=typeof Path2D=="function";function pp(e,t,i,n){fp&&!t.options.segment?dp(e,t,i,n):up(e,t,i,n)}var oe=class extends Dt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let s=n.spanGaps?this._loop:this._fullLoop;Za(this._points,n,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=sl(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){let n=this.options,s=t[i],r=this.points,o=eo(this,{property:i,start:s,end:s});if(!o.length)return;let a=[],l=hp(n),c,h;for(c=0,h=o.length;c<h;++c){let{start:d,end:u}=o[c],f=r[d],g=r[u];if(f===g){a.push(f);continue}let m=Math.abs((s-f[i])/(g[i]-f[i])),b=l(f,g,m,n.stepped);b[i]=t[i],a.push(b)}return a.length===1?a[0]:a}pathSegment(t,i,n){return _o(this)(t,this,i,n)}path(t,i,n){let s=this.segments,r=_o(this),o=this._loop;i=i||0,n=n||this.points.length-i;for(let a of s)o&=r(t,this,a,{start:i,end:i+n-1});return!!o}draw(t,i,n,s){let r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),pp(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};D(oe,"id","line"),D(oe,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),D(oe,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),D(oe,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Rl(e,t,i,n){let s=e.options,{[i]:r}=e.getProps([i],n);return Math.abs(t-r)<s.radius+s.hitRadius}var Li=class extends Dt{parsed;skip;stop;constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,n){let s=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(i-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return Rl(this,t,"x",i)}inYRange(t,i){return Rl(this,t,"y",i)}getCenterPoint(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let n=i&&t.borderWidth||0;return(i+n)*2}draw(t,i){let n=this.options;this.skip||n.radius<.1||!ee(this,i,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,xs(t,n,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};D(Li,"id","point"),D(Li,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),D(Li,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function mc(e,t){let{x:i,y:n,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t),a,l,c,h,d;return e.horizontal?(d=o/2,a=Math.min(i,s),l=Math.max(i,s),c=n-d,h=n+d):(d=r/2,a=i-d,l=i+d,c=Math.min(n,s),h=Math.max(n,s)),{left:a,top:c,right:l,bottom:h}}function Fe(e,t,i,n){return e?0:ut(t,i,n)}function gp(e,t,i){let n=e.options.borderWidth,s=e.borderSkipped,r=$r(n);return{t:Fe(s.top,r.top,0,i),r:Fe(s.right,r.right,0,t),b:Fe(s.bottom,r.bottom,0,i),l:Fe(s.left,r.left,0,t)}}function mp(e,t,i){let{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=Re(s),o=Math.min(t,i),a=e.borderSkipped,l=n||z(s);return{topLeft:Fe(!l||a.top||a.left,r.topLeft,0,o),topRight:Fe(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Fe(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Fe(!l||a.bottom||a.right,r.bottomRight,0,o)}}function bp(e){let t=mc(e),i=t.right-t.left,n=t.bottom-t.top,s=gp(e,i/2,n/2),r=mp(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function lo(e,t,i,n){let s=t===null,r=i===null,a=e&&!(s&&r)&&mc(e,n);return a&&(s||ne(t,a.left,a.right))&&(r||ne(i,a.top,a.bottom))}function vp(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function yp(e,t){e.rect(t.x,t.y,t.w,t.h)}function co(e,t,i={}){let n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-n,o=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}var Ri=class extends Dt{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:o}=bp(this),a=vp(o.radius)?Ai:yp;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,co(o,i,r)),t.clip(),a(t,co(r,-i,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,co(r,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return lo(this,t,i,n)}inXRange(t,i){return lo(this,t,null,i)}inYRange(t,i){return lo(this,null,t,i)}getCenterPoint(t){let{x:i,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+s)/2:i,y:r?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}};D(Ri,"id","bar"),D(Ri,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),D(Ri,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var xp=Object.freeze({__proto__:null,ArcElement:Ze,BarElement:Ri,LineElement:oe,PointElement:Li}),wo=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Il=wo.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function bc(e){return wo[e%wo.length]}function vc(e){return Il[e%Il.length]}function _p(e,t){return e.borderColor=bc(t),e.backgroundColor=vc(t),++t}function wp(e,t){return e.backgroundColor=e.data.map(()=>bc(t++)),t}function Sp(e,t){return e.backgroundColor=e.data.map(()=>vc(t++)),t}function kp(e){let t=0;return(i,n)=>{let s=e.getDatasetMeta(n).controller;s instanceof xe?t=wp(i,t):s instanceof ti?t=Sp(i,t):s&&(t=_p(i,t))}}function Fl(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Ap(e){return e&&(e.borderColor||e.backgroundColor)}var Cp={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;let{data:{datasets:n},options:s}=e.config,{elements:r}=s;if(!i.forceOverride&&(Fl(n)||Ap(s)||r&&Fl(r)))return;let o=kp(e);n.forEach(o)}};function Ep(e,t,i,n,s){let r=s.samples||n;if(r>=i)return e.slice(t,t+i);let o=[],a=(i-2)/(r-2),l=0,c=t+i-1,h=t,d,u,f,g,m;for(o[l++]=e[h],d=0;d<r-2;d++){let b=0,v=0,x,w=Math.floor((d+1)*a)+1+t,p=Math.min(Math.floor((d+2)*a)+1,i)+t,y=p-w;for(x=w;x<p;x++)b+=e[x].x,v+=e[x].y;b/=y,v/=y;let _=Math.floor(d*a)+1+t,A=Math.min(Math.floor((d+1)*a)+1,i)+t,{x:C,y:E}=e[h];for(f=g=-1,x=_;x<A;x++)g=.5*Math.abs((C-b)*(e[x].y-E)-(C-e[x].x)*(v-E)),g>f&&(f=g,u=e[x],m=x);o[l++]=u,h=m}return o[l++]=e[c],o}function Pp(e,t,i,n){let s=0,r=0,o,a,l,c,h,d,u,f,g,m,b=[],v=t+i-1,x=e[t].x,p=e[v].x-x;for(o=t;o<t+i;++o){a=e[o],l=(a.x-x)/p*n,c=a.y;let y=l|0;if(y===h)c<g?(g=c,d=o):c>m&&(m=c,u=o),s=(r*s+a.x)/++r;else{let _=o-1;if(!$(d)&&!$(u)){let A=Math.min(d,u),C=Math.max(d,u);A!==f&&A!==_&&b.push({...e[A],x:s}),C!==f&&C!==_&&b.push({...e[C],x:s})}o>0&&_!==f&&b.push(e[_]),b.push(a),h=y,r=0,g=m=c,d=u=f=o}}return b}function yc(e){if(e._decimated){let t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Nl(e){e.data.datasets.forEach(t=>{yc(t)})}function Tp(e,t){let i=t.length,n=0,s,{iScale:r}=e,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(n=ut(te(t,r.axis,o).lo,0,i-1)),c?s=ut(te(t,r.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var Mp={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){Nl(e);return}let n=e.width;e.data.datasets.forEach((s,r)=>{let{_data:o,indexAxis:a}=s,l=e.getDatasetMeta(r),c=o||s.data;if(Ci([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let h=e.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||e.options.parsing)return;let{start:d,count:u}=Tp(l,c),f=i.threshold||4*n;if(u<=f){yc(s);return}$(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(i.algorithm){case"lttb":g=Ep(c,d,u,n,i);break;case"min-max":g=Pp(c,d,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=g})},destroy(e){Nl(e)}};function Op(e,t,i){let n=e.segments,s=e.points,r=t.points,o=[];for(let a of n){let{start:l,end:c}=a;c=Ao(l,c,s);let h=So(i,s[l],s[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:s[l],end:s[c]});continue}let d=eo(t,h);for(let u of d){let f=So(i,r[u.start],r[u.end],u.loop),g=to(a,s,f);for(let m of g)o.push({source:m,target:u,start:{[i]:Bl(h,f,"start",Math.max)},end:{[i]:Bl(h,f,"end",Math.min)}})}}return o}function So(e,t,i,n){if(n)return;let s=t[e],r=i[e];return e==="angle"&&(s=Ct(s),r=Ct(r)),{property:e,start:s,end:r}}function Dp(e,t){let{x:i=null,y:n=null}=e||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=Ao(o,a,s);let l=s[o],c=s[a];n!==null?(r.push({x:l.x,y:n}),r.push({x:c.x,y:n})):i!==null&&(r.push({x:i,y:l.y}),r.push({x:i,y:c.y}))}),r}function Ao(e,t,i){for(;t>e;t--){let n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Bl(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function xc(e,t){let i=[],n=!1;return K(e)?(n=!0,i=e):i=Dp(e,t),i.length?new oe({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Hl(e){return e&&e.fill!==!1}function Lp(e,t,i){let s=e[t].fill,r=[t],o;if(!i)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!it(s))return s;if(o=e[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function Rp(e,t,i){let n=Bp(e);if(z(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return it(s)&&Math.floor(s)===s?Ip(n[0],t,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Ip(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function Fp(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:z(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function Np(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:z(e)?n=e.value:n=t.getBaseValue(),n}function Bp(e){let t=e.options,i=t.fill,n=V(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Hp(e){let{scale:t,index:i,line:n}=e,s=[],r=n.segments,o=n.points,a=jp(t,i);a.push(xc({x:null,y:t.bottom},n));for(let l=0;l<r.length;l++){let c=r[l];for(let h=c.start;h<=c.end;h++)Vp(s,o[h],a)}return new oe({points:s,options:{}})}function jp(e,t){let i=[],n=e.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){let r=n[s];if(r.index===t)break;r.hidden||i.unshift(r.dataset)}return i}function Vp(e,t,i){let n=[];for(let s=0;s<i.length;s++){let r=i[s],{first:o,last:a,point:l}=zp(r,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function zp(e,t,i){let n=e.interpolate(t,i);if(!n)return{};let s=n[i],r=e.segments,o=e.points,a=!1,l=!1;for(let c=0;c<r.length;c++){let h=r[c],d=o[h.start][i],u=o[h.end][i];if(ne(s,d,u)){a=s===d,l=s===u;break}}return{first:a,last:l,point:n}}var Ns=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){let{x:s,y:r,radius:o}=this;return i=i||{start:0,end:G},t.arc(s,r,o,i.end,i.start,!0),!n.bounds}interpolate(t){let{x:i,y:n,radius:s}=this,r=t.angle;return{x:i+Math.cos(r)*s,y:n+Math.sin(r)*s,angle:r}}};function Wp(e){let{chart:t,fill:i,line:n}=e;if(it(i))return $p(t,i);if(i==="stack")return Hp(e);if(i==="shape")return!0;let s=Up(e);return s instanceof Ns?s:xc(s,n)}function $p(e,t){let i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function Up(e){return(e.scale||{}).getPointPositionForValue?Yp(e):Xp(e)}function Xp(e){let{scale:t={},fill:i}=e,n=Fp(i,t);if(it(n)){let s=t.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function Yp(e){let{scale:t,fill:i}=e,n=t.options,s=t.getLabels().length,r=n.reverse?t.max:t.min,o=Np(i,t,r),a=[];if(n.grid.circular){let l=t.getPointPositionForValue(0,r);return new Ns({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,o));return a}function ho(e,t,i){let n=Wp(t),{line:s,scale:r,axis:o}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:d=c}=l||{};n&&s.points.length&&(rn(e,i),qp(e,{line:s,target:n,above:h,below:d,area:i,scale:r,axis:o}),on(e))}function qp(e,t){let{line:i,target:n,above:s,below:r,area:o,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&r!==s&&(jl(e,n,o.top),Vl(e,{line:i,target:n,color:s,scale:a,property:l}),e.restore(),e.save(),jl(e,n,o.bottom)),Vl(e,{line:i,target:n,color:r,scale:a,property:l}),e.restore()}function jl(e,t,i){let{segments:n,points:s}=t,r=!0,o=!1;e.beginPath();for(let a of n){let{start:l,end:c}=a,h=s[l],d=s[Ao(l,c,s)];r?(e.moveTo(h.x,h.y),r=!1):(e.lineTo(h.x,i),e.lineTo(h.x,h.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(d.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Vl(e,t){let{line:i,target:n,property:s,color:r,scale:o}=t,a=Op(i,n,s);for(let{source:l,target:c,start:h,end:d}of a){let{style:{backgroundColor:u=r}={}}=l,f=n!==!0;e.save(),e.fillStyle=u,Jp(e,o,f&&So(s,h,d)),e.beginPath();let g=!!i.pathSegment(e,l),m;if(f){g?e.closePath():zl(e,n,d,s);let b=!!n.pathSegment(e,c,{move:g,reverse:!0});m=g&&b,m||zl(e,n,h,s)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function Jp(e,t,i){let{top:n,bottom:s}=t.chart.chartArea,{property:r,start:o,end:a}=i||{};r==="x"&&(e.beginPath(),e.rect(o,n,a-o,s-n),e.clip())}function zl(e,t,i,n){let s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}var Kp={id:"filler",afterDatasetsUpdate(e,t,i){let n=(e.data.datasets||[]).length,s=[],r,o,a,l;for(o=0;o<n;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof oe&&(l={visible:e.isDatasetVisible(o),index:o,fill:Rp(a,o,n),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<n;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=Lp(s,o,i.propagate))},beforeDraw(e,t,i){let n=i.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=s.length-1;o>=0;--o){let a=s[o].$filler;!a||(a.line.updateControlPoints(r,a.axis),n&&a.fill&&ho(e.ctx,a,r))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;let n=e.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){let r=n[s].$filler;Hl(r)&&ho(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,i){let n=t.meta.$filler;!Hl(n)||i.drawTime!=="beforeDatasetDraw"||ho(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Wl=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},Gp=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index,Bs=class extends Dt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},i=J(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){let{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}let n=t.labels,s=ht(n.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Wl(n,r),c,h;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){let{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a,d=t;r.textAlign="left",r.textBaseline="middle";let u=-1,f=-h;return this.legendItems.forEach((g,m)=>{let b=n+i/2+r.measureText(g.text).width;(m===0||c[c.length-1]+b+2*a>o)&&(d+=h,c[c.length-(m>0?0:1)]=0,f+=h,u++),l[m]={left:0,top:f,row:u,width:b,height:s},c[c.length-1]+=b+a}),d}_fitCols(t,i,n,s){let{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t,d=a,u=0,f=0,g=0,m=0;return this.legendItems.forEach((b,v)=>{let{itemWidth:x,itemHeight:w}=Zp(n,i,r,b,s);v>0&&f+w+2*a>h&&(d+=u+a,c.push({width:u,height:f}),g+=u+a,m++,u=f=0),l[v]={left:g,top:f,col:m,width:x,height:w},u=Math.max(u,x),f+=w+a}),d+=u,c.push({width:u,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:r}}=this,o=Je(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=vt(n,this.left+s,this.right-this.lineWidths[a]);for(let c of i)a!==c.row&&(a=c.row,l=vt(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=vt(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(let c of i)c.col!==a&&(a=c.col,l=vt(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;rn(t,this),this._draw(),on(t)}}_draw(){let{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:r,labels:o}=t,a=nt.color,l=Je(t.rtl,this.left,this.width),c=ht(o.font),{padding:h}=o,d=c.size,u=d/2,f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;let{boxWidth:g,boxHeight:m,itemHeight:b}=Wl(o,d),v=function(_,A,C){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;s.save();let E=V(C.lineWidth,1);if(s.fillStyle=V(C.fillStyle,a),s.lineCap=V(C.lineCap,"butt"),s.lineDashOffset=V(C.lineDashOffset,0),s.lineJoin=V(C.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=V(C.strokeStyle,a),s.setLineDash(V(C.lineDash,[])),o.usePointStyle){let M={radius:m*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:E},P=l.xPlus(_,g/2),L=A+u;Wr(s,M,P,L,o.pointStyleWidth&&g)}else{let M=A+Math.max((d-m)/2,0),P=l.leftForLtr(_,g),L=Re(C.borderRadius);s.beginPath(),Object.values(L).some(H=>H!==0)?Ai(s,{x:P,y:M,w:g,h:m,radius:L}):s.rect(P,M,g,m),s.fill(),E!==0&&s.stroke()}s.restore()},x=function(_,A,C){Le(s,C.text,_,A+b/2,c,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},w=this.isHorizontal(),p=this._computeTitleHeight();w?f={x:vt(r,this.left+h,this.right-n[0]),y:this.top+h+p,line:0}:f={x:this.left+h,y:vt(r,this.top+p+h,this.bottom-i[0].height),line:0},Zr(this.ctx,t.textDirection);let y=b+h;this.legendItems.forEach((_,A)=>{s.strokeStyle=_.fontColor,s.fillStyle=_.fontColor;let C=s.measureText(_.text).width,E=l.textAlign(_.textAlign||(_.textAlign=o.textAlign)),M=g+u+C,P=f.x,L=f.y;l.setWidth(this.width),w?A>0&&P+M+h>this.right&&(L=f.y+=y,f.line++,P=f.x=vt(r,this.left+h,this.right-n[f.line])):A>0&&L+y>this.bottom&&(P=f.x=P+i[f.line].width+h,f.line++,L=f.y=vt(r,this.top+p+h,this.bottom-i[f.line].height));let H=l.x(P);if(v(H,L,_),P=za(E,P+g+u,w?P+M:this.right,t.rtl),x(l.x(P),L,_),w)f.x+=M+h;else if(typeof _.text!="string"){let X=c.lineHeight;f.y+=_c(_,X)}else f.y+=y}),Qr(this.ctx,t.textDirection)}drawTitle(){let t=this.options,i=t.title,n=ht(i.font),s=yt(i.padding);if(!i.display)return;let r=Je(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=n.size/2,c=s.top+l,h,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),h=this.top+c,d=vt(t.align,d,this.right-u);else{let g=this.columnSizes.reduce((m,b)=>Math.max(m,b.height),0);h=c+vt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}let f=vt(a,d,d+u);o.textAlign=r.textAlign(vs(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=n.string,Le(o,i.text,f,h,n)}_computeTitleHeight(){let t=this.options.title,i=ht(t.font),n=yt(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,r;if(ne(t,this.left,this.right)&&ne(i,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],ne(t,s.left,s.left+s.width)&&ne(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){let i=this.options;if(!eg(t.type,i))return;let n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let s=this._hoveredItem,r=Gp(s,n);s&&!r&&J(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!r&&J(i.onHover,[t,n,this],this)}else n&&J(i.onClick,[t,n,this],this)}};function Zp(e,t,i,n,s){let r=Qp(n,e,t,i),o=tg(s,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Qp(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+n.measureText(s).width}function tg(e,t,i){let n=e;return typeof t.text!="string"&&(n=_c(t,i)),n}function _c(e,t){let i=e.text?e.text.length+.5:0;return t*i}function eg(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ig={id:"legend",_element:Bs,start(e,t,i){let n=e.legend=new Bs({ctx:e.ctx,options:i,chart:e});_t.configure(e,n,i),_t.addBox(e,n)},stop(e){_t.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let n=e.legend;_t.configure(e,n,i),n.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(i?0:void 0),h=yt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},wn=class extends Dt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;let s=K(n.text)?n.text.length:1;this._padding=yt(n.padding);let r=s*ht(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:i,left:n,bottom:s,right:r,options:o}=this,a=o.align,l=0,c,h,d;return this.isHorizontal()?(h=vt(a,n,r),d=i+t,c=r-n):(o.position==="left"?(h=n+t,d=vt(a,s,i),l=Z*-.5):(h=r-t,d=vt(a,i,s),l=Z*.5),c=s-i),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){let t=this.ctx,i=this.options;if(!i.display)return;let n=ht(i.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Le(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:vs(i.align),textBaseline:"middle",translation:[o,a]})}};function ng(e,t){let i=new wn({ctx:e.ctx,options:t,chart:e});_t.configure(e,i,t),_t.addBox(e,i),e.titleBlock=i}var sg={id:"title",_element:wn,start(e,t,i){ng(e,i)},stop(e){let t=e.titleBlock;_t.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){let n=e.titleBlock;_t.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ps=new WeakMap,rg={id:"subtitle",start(e,t,i){let n=new wn({ctx:e.ctx,options:i,chart:e});_t.configure(e,n,i),_t.addBox(e,n),Ps.set(e,n)},stop(e){_t.removeBox(e,Ps.get(e)),Ps.delete(e)},beforeUpdate(e,t,i){let n=Ps.get(e);_t.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},pn={average(e){if(!e.length)return!1;let t,i,n=0,s=0,r=0;for(t=0,i=e.length;t<i;++t){let o=e[t].element;if(o&&o.hasValue()){let a=o.tooltipPosition();n+=a.x,s+=a.y,++r}}return{x:n/r,y:s/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){let l=e[r].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),h=fs(t,c);h<s&&(s=h,a=l)}}if(a){let l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function se(e,t){return t&&(K(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ye(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function og(e,t){let{element:i,datasetIndex:n,index:s}=t,r=e.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function $l(e,t){let i=e.chart.ctx,{body:n,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=ht(t.bodyFont),c=ht(t.titleFont),h=ht(t.footerFont),d=r.length,u=s.length,f=n.length,g=yt(t.padding),m=g.height,b=0,v=n.reduce((p,y)=>p+y.before.length+y.lines.length+y.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){let p=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*p+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}u&&(m+=t.footerMarginTop+u*h.lineHeight+(u-1)*t.footerSpacing);let x=0,w=function(p){b=Math.max(b,i.measureText(p).width+x)};return i.save(),i.font=c.string,Y(e.title,w),i.font=l.string,Y(e.beforeBody.concat(e.afterBody),w),x=t.displayColors?o+2+t.boxPadding:0,Y(n,p=>{Y(p.before,w),Y(p.lines,w),Y(p.after,w)}),x=0,i.font=h.string,Y(e.footer,w),i.restore(),b+=g.width,{width:b,height:m}}function ag(e,t){let{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function lg(e,t,i,n){let{x:s,width:r}=n,o=i.caretSize+i.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function cg(e,t,i,n){let{x:s,width:r}=i,{width:o,chartArea:{left:a,right:l}}=e,c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),lg(c,e,t,i)&&(c="center"),c}function Ul(e,t,i){let n=i.yAlign||t.yAlign||ag(e,i);return{xAlign:i.xAlign||t.xAlign||cg(e,t,i,n),yAlign:n}}function hg(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function dg(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function Xl(e,t,i,n){let{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,c=s+r,{topLeft:h,topRight:d,bottomLeft:u,bottomRight:f}=Re(o),g=hg(t,a),m=dg(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,u)+s:a==="right"&&(g+=Math.max(d,f)+s),{x:ut(g,0,n.width-t.width),y:ut(m,0,n.height-t.height)}}function Ts(e,t,i){let n=yt(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Yl(e){return se([],ye(e))}function ug(e,t,i){return be(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function ql(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}var wc={beforeTitle:ie,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:ie,beforeBody:ie,beforeLabel:ie,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return $(i)||(t+=i),t},labelColor(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:ie,afterBody:ie,beforeFooter:ie,footer:ie,afterFooter:ie};function Pt(e,t,i,n){let s=e[t].call(i,n);return typeof s>"u"?wc[t].call(i,n):s}var yn=class extends Dt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,r=new Ls(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=ug(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:n}=i,s=Pt(n,"beforeTitle",this,t),r=Pt(n,"title",this,t),o=Pt(n,"afterTitle",this,t),a=[];return a=se(a,ye(s)),a=se(a,ye(r)),a=se(a,ye(o)),a}getBeforeBody(t,i){return Yl(Pt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:n}=i,s=[];return Y(t,r=>{let o={before:[],lines:[],after:[]},a=ql(n,r);se(o.before,ye(Pt(a,"beforeLabel",this,r))),se(o.lines,Pt(a,"label",this,r)),se(o.after,ye(Pt(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,i){return Yl(Pt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:n}=i,s=Pt(n,"beforeFooter",this,t),r=Pt(n,"footer",this,t),o=Pt(n,"afterFooter",this,t),a=[];return a=se(a,ye(s)),a=se(a,ye(r)),a=se(a,ye(o)),a}_createItems(t){let i=this._active,n=this.chart.data,s=[],r=[],o=[],a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(og(this.chart,i[l]));return t.filter&&(a=a.filter((h,d,u)=>t.filter(h,d,u,n))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,n))),Y(a,h=>{let d=ql(t.callbacks,h);s.push(Pt(d,"labelColor",this,h)),r.push(Pt(d,"labelPointStyle",this,h)),o.push(Pt(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){let n=this.options.setContext(this.getContext()),s=this._active,r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{let a=pn[n.position].call(this,s,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);let l=this._size=$l(this,n),c=Object.assign({},a,l),h=Ul(this.chart,n,c),d=Xl(n,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){let r=this.getCaretPosition(t,n,s);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,n){let{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Re(a),{x:u,y:f}=t,{width:g,height:m}=i,b,v,x,w,p,y;return r==="center"?(p=f+m/2,s==="left"?(b=u,v=b-o,w=p+o,y=p-o):(b=u+g,v=b+o,w=p-o,y=p+o),x=b):(s==="left"?v=u+Math.max(l,h)+o:s==="right"?v=u+g-Math.max(c,d)-o:v=this.caretX,r==="top"?(w=f,p=w-o,b=v-o,x=v+o):(w=f+m,p=w+o,b=v+o,x=v-o),y=w),{x1:b,x2:v,x3:x,y1:w,y2:p,y3:y}}drawTitle(t,i,n){let s=this.title,r=s.length,o,a,l;if(r){let c=Je(n.rtl,this.x,this.width);for(t.x=Ts(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",o=ht(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=o.string,l=0;l<r;++l)i.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,s,r){let o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,h=ht(r.bodyFont),d=Ts(this,"left",r),u=s.x(d),f=l<h.lineHeight?(h.lineHeight-l)/2:0,g=i.y+f;if(r.usePointStyle){let m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=s.leftForLtr(u,c)+c/2,v=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,xs(t,m,b,v),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,xs(t,m,b,v)}else{t.lineWidth=z(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;let m=s.leftForLtr(u,c),b=s.leftForLtr(s.xPlus(u,1),c-2),v=Re(o.borderRadius);Object.values(v).some(x=>x!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Ai(t,{x:m,y:g,w:c,h:l,radius:v}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ai(t,{x:b,y:g+1,w:c-2,h:l-2,radius:v}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(b,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){let{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=n,d=ht(n.bodyFont),u=d.lineHeight,f=0,g=Je(n.rtl,this.x,this.width),m=function(C){i.fillText(C,g.x(t.x+f),t.y+u/2),t.y+=u+r},b=g.textAlign(o),v,x,w,p,y,_,A;for(i.textAlign=o,i.textBaseline="middle",i.font=d.string,t.x=Ts(this,b,n),i.fillStyle=n.bodyColor,Y(this.beforeBody,m),f=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,p=0,_=s.length;p<_;++p){for(v=s[p],x=this.labelTextColors[p],i.fillStyle=x,Y(v.before,m),w=v.lines,a&&w.length&&(this._drawColorBox(i,t,p,g,n),u=Math.max(d.lineHeight,l)),y=0,A=w.length;y<A;++y)m(w[y]),u=d.lineHeight;Y(v.after,m)}f=0,u=d.lineHeight,Y(this.afterBody,m),t.y-=r}drawFooter(t,i,n){let s=this.footer,r=s.length,o,a;if(r){let l=Je(n.rtl,this.x,this.width);for(t.x=Ts(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",o=ht(n.footerFont),i.fillStyle=n.footerColor,i.font=o.string,a=0;a<r;++a)i.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){let{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=n,{topLeft:d,topRight:u,bottomLeft:f,bottomRight:g}=Re(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+d,l),o==="top"&&this.drawCaret(t,i,n,s),i.lineTo(a+c-u,l),i.quadraticCurveTo(a+c,l,a+c,l+u),o==="center"&&r==="right"&&this.drawCaret(t,i,n,s),i.lineTo(a+c,l+h-g),i.quadraticCurveTo(a+c,l+h,a+c-g,l+h),o==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(a+f,l+h),i.quadraticCurveTo(a,l+h,a,l+h-f),o==="center"&&r==="left"&&this.drawCaret(t,i,n,s),i.lineTo(a,l+d),i.quadraticCurveTo(a,l,a+d,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){let o=pn[t.position].call(this,this._active,this._eventPosition);if(!o)return;let a=this._size=$l(this,t),l=Object.assign({},o,this._size),c=Ul(i,t,l),h=Xl(t,l,c,i);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let o=yt(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,s,i),Zr(t,i.textDirection),r.y+=o.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),Qr(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let n=this._active,s=t.map(({datasetIndex:a,index:l})=>{let c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!nn(n,s),o=this._positionChanged(s,i);(r||o)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,r=this._active||[],o=this._getActiveElements(t,r,i,n),a=this._positionChanged(o,t),l=i||!nn(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,s){let r=this.options;if(t.type==="mouseout")return[];if(!s)return i;let o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,i){let{caretX:n,caretY:s,options:r}=this,o=pn[r.position].call(this,t,i);return o!==!1&&(n!==o.x||s!==o.y)}};D(yn,"positioners",pn);var fg={id:"tooltip",_element:yn,positioners:pn,afterInit(e,t,i){i&&(e.tooltip=new yn({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:wc},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},pg=Object.freeze({__proto__:null,Colors:Cp,Decimation:Mp,Filler:Kp,Legend:ig,SubTitle:rg,Title:sg,Tooltip:fg}),gg=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function mg(e,t,i,n){let s=e.indexOf(t);if(s===-1)return gg(e,t,i,n);let r=e.lastIndexOf(t);return s!==r?i:s}var bg=(e,t)=>e===null?null:ut(Math.round(e),0,t);function Jl(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}var gn=class extends _e{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let n=this.getLabels();for(let{index:s,label:r}of i)n[s]===r&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if($(t))return null;let n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:mg(n,t,V(i,t),this._addedLabels),bg(i,n.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){let t=this.min,i=this.max,n=this.options.offset,s=[],r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=i;o++)s.push({value:o});return s}getLabelForValue(t){return Jl.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};D(gn,"id","category"),D(gn,"defaults",{ticks:{callback:Jl}});function vg(e,t){let i=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:u}=e,f=r||1,g=h-1,{min:m,max:b}=t,v=!$(o),x=!$(a),w=!$(c),p=(b-m)/(d+1),y=Mr((b-m)/g/f)*f,_,A,C,E;if(y<1e-14&&!v&&!x)return[{value:m},{value:b}];E=Math.ceil(b/y)-Math.floor(m/y),E>g&&(y=Mr(E*y/g/f)*f),$(l)||(_=Math.pow(10,l),y=Math.ceil(y*_)/_),s==="ticks"?(A=Math.floor(m/y)*y,C=Math.ceil(b/y)*y):(A=m,C=b),v&&x&&r&&Ia((a-o)/r,y/1e3)?(E=Math.round(Math.min((a-o)/y,h)),y=(a-o)/E,A=o,C=a):w?(A=v?o:A,C=x?a:C,E=c-1,y=(C-A)/E):(E=(C-A)/y,wi(E,Math.round(E),y/1e3)?E=Math.round(E):E=Math.ceil(E));let M=Math.max(Dr(y),Dr(A));_=Math.pow(10,$(l)?M:l),A=Math.round(A*_)/_,C=Math.round(C*_)/_;let P=0;for(v&&(u&&A!==o?(i.push({value:o}),A<o&&P++,wi(Math.round((A+P*y)*_)/_,o,Kl(o,p,e))&&P++):A<o&&P++);P<E;++P){let L=Math.round((A+P*y)*_)/_;if(x&&L>a)break;i.push({value:L})}return x&&u&&C!==a?i.length&&wi(i[i.length-1].value,a,Kl(a,p,e))?i[i.length-1].value=a:i.push({value:a}):(!x||C===a)&&i.push({value:C}),i}function Kl(e,t,{horizontal:i,minRotation:n}){let s=Bt(n),r=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}var Fi=class extends _e{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return $(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds(),{min:s,max:r}=this,o=l=>s=i?s:l,a=l=>r=n?r:l;if(t){let l=Yt(s),c=Yt(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,i=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=vg(s,r);return t.bounds==="ticks"&&Or(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return ki(t,this.chart.options.locale,this.options.ticks.format)}},mn=class extends Fi{determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=it(t)?t:0,this.max=it(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),i=t?this.width:this.height,n=Bt(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}};D(mn,"id","linear"),D(mn,"defaults",{ticks:{callback:sn.formatters.numeric}});var Sn=e=>Math.floor(ge(e)),Ge=(e,t)=>Math.pow(10,Sn(e)+t);function Gl(e){return e/Math.pow(10,Sn(e))===1}function Zl(e,t,i){let n=Math.pow(10,i),s=Math.floor(e/n);return Math.ceil(t/n)-s}function yg(e,t){let i=t-e,n=Sn(i);for(;Zl(e,t,n)>10;)n++;for(;Zl(e,t,n)<10;)n--;return Math.min(n,Sn(e))}function xg(e,{min:t,max:i}){t=Et(e.min,t);let n=[],s=Sn(t),r=yg(t,i),o=r<0?Math.pow(10,Math.abs(r)):1,a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10,d=Math.floor((c-h)/Math.pow(10,r)),u=Et(e.min,Math.round((l+h+d*Math.pow(10,r))*o)/o);for(;u<i;)n.push({value:u,major:Gl(u),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),u=Math.round((l+h+d*Math.pow(10,r))*o)/o;let f=Et(e.max,u);return n.push({value:f,major:Gl(f),significand:d}),n}var bn=class extends _e{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){let n=Fi.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return it(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=it(t)?Math.max(0,t):null,this.max=it(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!it(this._userMin)&&(this.min=t===Ge(this.min,0)?Ge(this.min,-1):Ge(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),n=this.min,s=this.max,r=a=>n=t?n:a,o=a=>s=i?s:a;n===s&&(n<=0?(r(1),o(10)):(r(Ge(n,-1)),o(Ge(s,1)))),n<=0&&r(Ge(s,-1)),s<=0&&o(Ge(n,1)),this.min=n,this.max=s}buildTicks(){let t=this.options,i={min:this._userMin,max:this._userMax},n=xg(i,this);return t.bounds==="ticks"&&Or(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":ki(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=ge(t),this._valueRange=ge(this.max)-ge(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ge(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}};D(bn,"id","logarithmic"),D(bn,"defaults",{ticks:{callback:sn.formatters.logarithmic,major:{enabled:!0}}});function ko(e){let t=e.ticks;if(t.display&&e.display){let i=yt(t.backdropPadding);return V(t.font&&t.font.size,nt.font.size)+i.height}return 0}function _g(e,t,i){return i=K(i)?i:[i],{w:$a(e,t.string,i),h:i.length*t.lineHeight}}function Ql(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function wg(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],s=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Z/r:0;for(let l=0;l<r;l++){let c=o.setContext(e.getPointLabelContext(l));s[l]=c.padding;let h=e.getPointPosition(l,e.drawingArea+s[l],a),d=ht(c.font),u=_g(e.ctx,d,e._pointLabels[l]);n[l]=u;let f=Ct(e.getIndexAngle(l)+a),g=Math.round(ms(f)),m=Ql(g,h.x,u.w,0,180),b=Ql(g,h.y,u.h,90,270);Sg(i,t,f,m,b)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=Cg(e,n,s)}function Sg(e,t,i,n,s){let r=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i)),a=0,l=0;n.start<t.l?(a=(t.l-n.start)/r,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function kg(e,t,i){let n=e.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=i,l=e.getPointPosition(t,n+s+o,r),c=Math.round(ms(Ct(l.angle+et))),h=Tg(l.y,a.h,c),d=Eg(c),u=Pg(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:u,top:h,right:u+a.w,bottom:h+a.h}}function Ag(e,t){if(!t)return!0;let{left:i,top:n,right:s,bottom:r}=e;return!(ee({x:i,y:n},t)||ee({x:i,y:r},t)||ee({x:s,y:n},t)||ee({x:s,y:r},t))}function Cg(e,t,i){let n=[],s=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:ko(r)/2,additionalAngle:o?Z/s:0},c;for(let h=0;h<s;h++){l.padding=i[h],l.size=t[h];let d=kg(e,h,l);n.push(d),a==="auto"&&(d.visible=Ag(d,c),d.visible&&(c=d))}return n}function Eg(e){return e===0||e===180?"center":e<180?"left":"right"}function Pg(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function Tg(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function Mg(e,t,i){let{left:n,top:s,right:r,bottom:o}=i,{backdropColor:a}=t;if(!$(a)){let l=Re(t.borderRadius),c=yt(t.backdropPadding);e.fillStyle=a;let h=n-c.left,d=s-c.top,u=r-n+c.width,f=o-s+c.height;Object.values(l).some(g=>g!==0)?(e.beginPath(),Ai(e,{x:h,y:d,w:u,h:f,radius:l}),e.fill()):e.fillRect(h,d,u,f)}}function Og(e,t){let{ctx:i,options:{pointLabels:n}}=e;for(let s=t-1;s>=0;s--){let r=e._pointLabelItems[s];if(!r.visible)continue;let o=n.setContext(e.getPointLabelContext(s));Mg(i,o,r);let a=ht(o.font),{x:l,y:c,textAlign:h}=r;Le(i,e._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Sc(e,t,i,n){let{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,G);else{let r=e.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<n;o++)r=e.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function Dg(e,t,i,n,s){let r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!n||!a||!l||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),Sc(e,i,o,n),r.closePath(),r.stroke(),r.restore())}function Lg(e,t,i){return be(e,{label:i,index:t,type:"pointLabel"})}var Qe=class extends Fi{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=yt(ko(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!1);this.min=it(t)&&!isNaN(t)?t:0,this.max=it(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ko(this.options))}generateTickLabels(t){Fi.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{let s=J(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?wg(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,s){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,s))}getIndexAngle(t){let i=G/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ct(t*i+Bt(n))}getDistanceFromCenterForValue(t){if($(t))return NaN;let i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if($(t))return NaN;let i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){let i=this._pointLabels||[];if(t>=0&&t<i.length){let n=i[t];return Lg(this.getContext(),t,n)}}getPointPosition(t,i,n=0){let s=this.getIndexAngle(t)-et+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:i,top:n,right:s,bottom:r}=this._pointLabelItems[t];return{left:i,top:n,right:s,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:i}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),Sc(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,i=this.options,{angleLines:n,grid:s,border:r}=i,o=this._pointLabels.length,a,l,c;if(i.pointLabels.display&&Og(this,o),s.display&&this.ticks.forEach((h,d)=>{if(d!==0){l=this.getDistanceFromCenterForValue(h.value);let u=this.getContext(d),f=s.setContext(u),g=r.setContext(u);Dg(this,f,l,o,g)}}),n.display){for(t.save(),a=o-1;a>=0;a--){let h=n.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:u}=h;!u||!d||(t.lineWidth=u,t.strokeStyle=d,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;let s=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!i.reverse)return;let c=n.setContext(this.getContext(l)),h=ht(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let d=yt(c.backdropPadding);t.fillRect(-o/2-d.left,-r-h.size/2-d.top,o+d.width,h.size+d.height)}Le(t,a.label,0,-r,h,{color:c.color})}),t.restore()}drawTitle(){}};D(Qe,"id","radialLinear"),D(Qe,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:sn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),D(Qe,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),D(Qe,"descriptors",{angleLines:{_fallback:"grid"}});var Hs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Tt=Object.keys(Hs);function Rg(e,t){return e-t}function tc(e,t){if($(t))return null;let i=e._adapter,{parser:n,round:s,isoWeekday:r}=e._parseOpts,o=t;return typeof n=="function"&&(o=n(o)),it(o)||(o=typeof n=="string"?i.parse(o,n):i.parse(o)),o===null?null:(s&&(o=s==="week"&&(qe(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,s)),+o)}function ec(e,t,i,n){let s=Tt.length;for(let r=Tt.indexOf(e);r<s-1;++r){let o=Hs[Tt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=n)return Tt[r]}return Tt[s-1]}function Ig(e,t,i,n,s){for(let r=Tt.length-1;r>=Tt.indexOf(i);r--){let o=Tt[r];if(Hs[o].common&&e._adapter.diff(s,n,o)>=t-1)return o}return Tt[i?Tt.indexOf(i):0]}function Fg(e){for(let t=Tt.indexOf(e)+1,i=Tt.length;t<i;++t)if(Hs[Tt[t]].common)return Tt[t]}function ic(e,t,i){if(!i)e[t]=!0;else if(i.length){let{lo:n,hi:s}=bs(i,t),r=i[n]>=t?i[n]:i[s];e[r]=!0}}function Ng(e,t,i,n){let s=e._adapter,r=+s.startOf(t[0].value,n),o=t[t.length-1].value,a,l;for(a=r;a<=o;a=+s.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function nc(e,t,i){let n=[],s={},r=t.length,o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,n.push({value:a,major:!1});return r===0||!i?n:Ng(e,n,s,i)}var ei=class extends _e{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let n=t.time||(t.time={}),s=this._adapter=new Ju._date(t.adapters.date);s.init(i),xi(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:tc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,n=t.time.unit||"day",{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=it(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),r=it(r)&&!isNaN(r)?r:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){let t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let r=this.min,o=this.max,a=Ba(s,r,o);return this._unit=i.unit||(n.autoSkip?ec(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):Ig(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Fg(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),nc(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);let o=t.length<3?.5:.25;i=ut(i,0,o),n=ut(n,0,o),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){let t=this._adapter,i=this.min,n=this.max,s=this.options,r=s.time,o=r.unit||ec(r.minUnit,i,n,this._getLabelCapacity(i)),a=V(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=qe(l)||l===!0,h={},d=i,u,f;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(n,i,o)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+o);let g=s.ticks.source==="data"&&this.getDataTimestamps();for(u=d,f=0;u<n;u=+t.add(u,a,o),f++)ic(h,u,g);return(u===n||s.bounds==="ticks"||f===1)&&ic(h,u,g),Object.keys(h).sort((m,b)=>m-b).map(m=>+m)}getLabelForValue(t){let i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,r=this._unit,o=i||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,i,n,s){let r=this.options,o=r.ticks.callback;if(o)return J(o,[t,i,n],this);let a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],u=n[i],f=c&&d&&u&&u.major;return this._adapter.format(t,s||(f?d:h))}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,n=this.ctx.measureText(t).width,s=Bt(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){let i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,r=this._tickFormatFunction(t,0,nc(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,n;if(t.length)return t;let s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(tc(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Ir(t.sort(Rg))}};D(ei,"id","time"),D(ei,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ms(e,t,i){let n=0,s=e.length-1,r,o,a,l;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=te(e,"pos",t)),{pos:r,time:a}=e[n],{pos:o,time:l}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=te(e,"time",t)),{time:r,pos:a}=e[n],{time:o,pos:l}=e[s]);let c=o-r;return c?a+(l-a)*(t-r)/c:a}var vn=class extends ei{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Ms(i,this.min),this._tableRange=Ms(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:i,max:n}=this,s=[],r=[],o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ms(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return Ms(this._table,n*this._tableRange+this._minPos,!0)}};D(vn,"id","timeseries"),D(vn,"defaults",ei.defaults);var Bg=Object.freeze({__proto__:null,CategoryScale:gn,LinearScale:mn,LogarithmicScale:bn,RadialLinearScale:Qe,TimeScale:ei,TimeSeriesScale:vn}),kc=[qu,xp,pg,Bg];Ht.register(...kc);var js=Ht;var Cn=e=>typeof e=="function"?e:function(){return e},Hg=typeof self<"u"?self:null,An=typeof window<"u"?window:null,En=Hg||An||En,jg="2.0.0",ae={connecting:0,open:1,closing:2,closed:3},Vg=1e4,zg=1e3,Lt={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},we={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Co={longpoll:"longpoll",websocket:"websocket"},Wg={complete:4},Vs=class{constructor(e,t,i,n){this.channel=e,this.event=t,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=n,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:i}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}},Ac=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},$g=class{constructor(e,t,i){this.state=Lt.closed,this.topic=e,this.params=Cn(t||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new Vs(this,we.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Ac(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=Lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=Lt.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=Lt.closed,this.socket.remove(this)}),this.onError(n=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,n),this.isJoining()&&this.joinPush.reset(),this.state=Lt.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new Vs(this,we.leave,Cn({}),this.timeout).send(),this.state=Lt.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(we.reply,(n,s)=>{this.trigger(this.replyEventName(s),n)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(we.close,e)}onError(e){return this.on(we.error,t=>e(t))}on(e,t){let i=this.bindingRef++;return this.bindings.push({event:e,ref:i,callback:t}),i}off(e,t){this.bindings=this.bindings.filter(i=>!(i.event===e&&(typeof t>"u"||t===i.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,i=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let n=new Vs(this,e,function(){return t},i);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=Lt.leaving;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(we.close,"leave")},i=new Vs(this,we.leave,Cn({}),e);return i.receive("ok",()=>t()).receive("timeout",()=>t()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(e,t,i){return t}isMember(e,t,i,n){return this.topic!==e?!1:n&&n!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:i,joinRef:n}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=Lt.joining,this.joinPush.resend(e))}trigger(e,t,i,n){let s=this.onMessage(e,t,i,n);if(t&&!s)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let r=this.bindings.filter(o=>o.event===e);for(let o=0;o<r.length;o++)r[o].callback(s,i,n||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===Lt.closed}isErrored(){return this.state===Lt.errored}isJoined(){return this.state===Lt.joined}isJoining(){return this.state===Lt.joining}isLeaving(){return this.state===Lt.leaving}},Ws=class{static request(e,t,i,n,s,r,o){if(En.XDomainRequest){let a=new En.XDomainRequest;return this.xdomainRequest(a,e,t,n,s,r,o)}else{let a=new En.XMLHttpRequest;return this.xhrRequest(a,e,t,i,n,s,r,o)}}static xdomainRequest(e,t,i,n,s,r,o){return e.timeout=s,e.open(t,i),e.onload=()=>{let a=this.parseJSON(e.responseText);o&&o(a)},r&&(e.ontimeout=r),e.onprogress=()=>{},e.send(n),e}static xhrRequest(e,t,i,n,s,r,o,a){return e.open(t,i,!0),e.timeout=r,e.setRequestHeader("Content-Type",n),e.onerror=()=>a&&a(null),e.onreadystatechange=()=>{if(e.readyState===Wg.complete&&a){let l=this.parseJSON(e.responseText);a(l)}},o&&(e.ontimeout=o),e.send(s),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch{return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let i=[];for(var n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let s=t?`${t}[${n}]`:n,r=e[n];typeof r=="object"?i.push(this.serialize(r,s)):i.push(encodeURIComponent(s)+"="+encodeURIComponent(r))}return i.join("&")}static appendParams(e,t){if(Object.keys(t).length===0)return e;let i=e.match(/\?/)?"&":"?";return`${e}${i}${this.serialize(t)}`}},Pn=class{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=ae.connecting,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Co.websocket),"$1/"+Co.longpoll)}endpointURL(){return Ws.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,i){this.close(e,t,i),this.readyState=ae.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===ae.open||this.readyState===ae.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),e=>{if(e){var{status:t,token:i,messages:n}=e;this.token=i}else t=0;switch(t){case 200:n.forEach(s=>{setTimeout(()=>this.onmessage({data:s}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=ae.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${t}`)}})}send(e){this.currentBatch?this.currentBatch.push(e):this.awaitingBatchAck?this.batchBuffer.push(e):(this.currentBatch=[e],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(e){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",e.join(`
`),()=>this.onerror("timeout"),t=>{this.awaitingBatchAck=!1,!t||t.status!==200?(this.onerror(t&&t.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(e,t,i){for(let s of this.reqs)s.abort();this.readyState=ae.closed;let n=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:i});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent<"u"?this.onclose(new CloseEvent("close",n)):this.onclose(n)}ajax(e,t,i,n,s){let r,o=()=>{this.reqs.delete(r),n()};r=Ws.request(e,this.endpointURL(),t,i,this.timeout,o,a=>{this.reqs.delete(r),this.isActive()&&s(a)}),this.reqs.add(r)}};var zs={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[i,n,s,r,o]=JSON.parse(e);return t({join_ref:i,ref:n,topic:s,event:r,payload:o})}},binaryEncode(e){let{join_ref:t,ref:i,event:n,topic:s,payload:r}=e,o=this.META_LENGTH+t.length+i.length+s.length+n.length,a=new ArrayBuffer(this.HEADER_LENGTH+o),l=new DataView(a),c=0;l.setUint8(c++,this.KINDS.push),l.setUint8(c++,t.length),l.setUint8(c++,i.length),l.setUint8(c++,s.length),l.setUint8(c++,n.length),Array.from(t,d=>l.setUint8(c++,d.charCodeAt(0))),Array.from(i,d=>l.setUint8(c++,d.charCodeAt(0))),Array.from(s,d=>l.setUint8(c++,d.charCodeAt(0))),Array.from(n,d=>l.setUint8(c++,d.charCodeAt(0)));var h=new Uint8Array(a.byteLength+r.byteLength);return h.set(new Uint8Array(a),0),h.set(new Uint8Array(r),a.byteLength),h.buffer},binaryDecode(e){let t=new DataView(e),i=t.getUint8(0),n=new TextDecoder;switch(i){case this.KINDS.push:return this.decodePush(e,t,n);case this.KINDS.reply:return this.decodeReply(e,t,n);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,n)}},decodePush(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),r=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,a=i.decode(e.slice(o,o+n));o=o+n;let l=i.decode(e.slice(o,o+s));o=o+s;let c=i.decode(e.slice(o,o+r));o=o+r;let h=e.slice(o,e.byteLength);return{join_ref:a,ref:null,topic:l,event:c,payload:h}},decodeReply(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),r=t.getUint8(3),o=t.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=i.decode(e.slice(a,a+n));a=a+n;let c=i.decode(e.slice(a,a+s));a=a+s;let h=i.decode(e.slice(a,a+r));a=a+r;let d=i.decode(e.slice(a,a+o));a=a+o;let u=e.slice(a,e.byteLength),f={status:d,response:u};return{join_ref:l,ref:c,topic:h,event:we.reply,payload:f}},decodeBroadcast(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),r=this.HEADER_LENGTH+2,o=i.decode(e.slice(r,r+n));r=r+n;let a=i.decode(e.slice(r,r+s));r=r+s;let l=e.slice(r,e.byteLength);return{join_ref:null,ref:null,topic:o,event:a,payload:l}}},Cc=class{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||Vg,this.transport=t.transport||En.WebSocket||Pn,this.establishedConnections=0,this.defaultEncoder=zs.encode.bind(zs),this.defaultDecoder=zs.decode.bind(zs),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==Pn?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;An&&An.addEventListener&&(An.addEventListener("pagehide",n=>{this.conn&&(this.disconnect(),i=this.connectClock)}),An.addEventListener("pageshow",n=>{i===this.connectClock&&(i=null,this.connect())})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=n=>t.rejoinAfterMs?t.rejoinAfterMs(n):[1e3,2e3,5e3][n-1]||1e4,this.reconnectAfterMs=n=>t.reconnectAfterMs?t.reconnectAfterMs(n):[10,50,100,150,200,250,500,1e3,2e3][n-1]||5e3,this.logger=t.logger||null,this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=Cn(t.params||{}),this.endPoint=`${e}/${Co.websocket}`,this.vsn=t.vsn||jg,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Ac(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return Pn}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.sendBuffer=[],this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=Ws.appendParams(Ws.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,i){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,i)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=Cn(e)),!this.conn&&(this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=t=>this.onConnError(t),this.conn.onmessage=t=>this.onConnMessage(t),this.conn.onclose=t=>this.onConnClose(t))}log(e,t,i){this.logger(e,t,i)}hasLogger(){return this.logger!==null}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}ping(e){if(!this.isConnected())return!1;let t=this.makeRef(),i=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t});let n=this.onMessage(s=>{s.ref===t&&(this.off([n]),e(Date.now()-i))});return!0}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),zg,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,i){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(t?this.conn.close(t,i||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,t=1){if(t===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,t+1)},150*t)}waitForSocketClosed(e,t=1){if(t===5||!this.conn||this.conn.readyState===ae.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,t+1)},150*t)}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&t!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,i=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,n])=>{n(e,t,i)}),(t===this.transport||i>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(we.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case ae.connecting:return"connecting";case ae.open:return"open";case ae.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([i])=>e.indexOf(i)===-1)}channel(e,t={}){let i=new $g(e,t,this);return this.channels.push(i),i}push(e){if(this.hasLogger()){let{topic:t,event:i,payload:n,ref:s,join_ref:r}=e;this.log("push",`${t} ${i} (${r}, ${s})`,n)}this.isConnected()?this.encode(e,t=>this.conn.send(t)):this.sendBuffer.push(()=>this.encode(e,t=>this.conn.send(t)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:n,payload:s,ref:r,join_ref:o}=t;r&&r===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${s.status||""} ${i} ${n} ${r&&"("+r+")"||""}`,s);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];!l.isMember(i,n,s,o)||l.trigger(n,s,r,o)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(t)}})}leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i.isJoined()||i.isJoining()));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}};var Kc="consecutive-reloads",Ug=10,Xg=5e3,Yg=1e4,qg=3e4,Gc=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],It="data-phx-component",Eo="data-phx-link",Jg="track-static",Kg="data-phx-link-state",Vt="data-phx-ref",ii="data-phx-ref-src",Zc="track-uploads",ni="data-phx-upload-ref",zo="data-phx-preflighted-refs",Gg="data-phx-done-refs",Ec="drop-target",Bo="data-phx-active-refs",tr="phx:live-file:updated",Ho="data-phx-skip",Pc="data-phx-prune",Tc="page-loading",Mc="phx-connected",Tn="phx-loading",Po="phx-no-feedback",$s="phx-error",Oc="phx-client-error",To="phx-server-error",Ni="data-phx-parent-id",Wo="data-phx-main",Bn="data-phx-root-id",Qc="viewport-top",th="viewport-bottom",Zg="trigger-action",ir="feedback-for",jo="phx-has-focused",Qg=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],eh=["checkbox","radio"],nr="phx-has-submitted",je="data-phx-session",Hi=`[${je}]`,Dc="data-phx-sticky",Fn="data-phx-static",Mo="data-phx-readonly",Us="data-phx-disabled",Vo="disable-with",Xs="data-phx-disable-with-restore",Mn="hook",tm="debounce",em="throttle",sr="update",Oo="stream",On="data-phx-stream",im="key",le="phxPrivate",Lc="auto-recover",Ys="phx:live-socket:debug",Do="phx:live-socket:profiling",Lo="phx:live-socket:latency-sim",nm="progress",Rc="mounted",sm=1,rm=200,om="phx-",am=3e4,Dn="debounce-trigger",qs="throttled",Ic="debounce-prev-key",lm={debounce:300,throttle:300},Ro="d",ce="s",Rt="c",Fc="e",Nc="r",Bc="t",cm="p",Hc="stream",hm=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){clearTimeout(this.chunkTimer),this.uploadChannel.leave(),this.entry.error(e)}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return St("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))})}},St=(e,t)=>console.error&&console.error(e,t),Be=e=>{let t=typeof e;return t==="number"||t==="string"&&/^(0|[1-9]\d*)$/.test(e)};function dm(){let e=new Set,t=document.querySelectorAll("*[id]");for(let i=0,n=t.length;i<n;i++)e.has(t[i].id)?console.error(`Multiple IDs detected: ${t[i].id}. Ensure unique element ids.`):e.add(t[i].id)}var um=(e,t,i,n)=>{e.liveSocket.isDebugEnabled()&&console.log(`${e.id} ${t}: ${i} - `,n)},Io=e=>typeof e=="function"?e:function(){return e},er=e=>JSON.parse(JSON.stringify(e)),Nn=(e,t,i)=>{do{if(e.matches(`[${t}]`)&&!e.disabled)return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1&&!(i&&i.isSameNode(e)||e.matches(Hi)));return null},Ln=e=>e!==null&&typeof e=="object"&&!(e instanceof Array),fm=(e,t)=>JSON.stringify(e)===JSON.stringify(t),jc=e=>{for(let t in e)return!1;return!0},He=(e,t)=>e&&t(e),pm=function(e,t,i,n){e.forEach(s=>{new hm(s,i.config.chunk_size,n).upload()})},ih={canPushState(){return typeof history.pushState<"u"},dropLocal(e,t,i){return e.removeItem(this.localKey(t,i))},updateLocal(e,t,i,n,s){let r=this.getLocal(e,t,i),o=this.localKey(t,i),a=r===null?n:s(r);return e.setItem(o,JSON.stringify(a)),a},getLocal(e,t,i){return JSON.parse(e.getItem(this.localKey(t,i)))},updateCurrentState(e){!this.canPushState()||history.replaceState(e(history.state||{}),"",window.location.href)},pushState(e,t,i){if(this.canPushState()){if(i!==window.location.href){if(t.type=="redirect"&&t.scroll){let s=history.state||{};s.scroll=t.scroll,history.replaceState(s,"",window.location.href)}delete t.scroll,history[e+"State"](t,"",i||null);let n=this.getHashTargetEl(window.location.hash);n?n.scrollIntoView():t.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(e,t){document.cookie=`${e}=${t}`},getCookie(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${e}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(e,t){t&&ih.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e},localKey(e,t){return`${e}-${t}`},getHashTargetEl(e){let t=e.toString().substring(1);if(t!=="")return document.getElementById(t)||document.querySelector(`a[name="${t}"]`)}},he=ih,jt={byId(e){return document.getElementById(e)||St(`no id found for ${e}`)},removeClass(e,t){e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class")},all(e,t,i){if(!e)return[];let n=Array.from(e.querySelectorAll(t));return i?n.forEach(i):n},childNodeLength(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childElementCount},isUploadInput(e){return e.type==="file"&&e.getAttribute(ni)!==null},findUploadInputs(e){return this.all(e,`input[type="file"][${ni}]`)},findComponentNodeList(e,t){return this.filterWithinSameLiveView(this.all(e,`[${It}="${t}"]`),e)},isPhxDestroyed(e){return!!(e.id&&jt.private(e,"destroyed"))},wantsNewTab(e){let t=e.ctrlKey||e.shiftKey||e.metaKey||e.button&&e.button===1,i=e.target instanceof HTMLAnchorElement&&e.target.hasAttribute("download"),n=e.target.getAttribute("target")==="_blank";return t||n||i},isUnloadableFormSubmit(e){return!e.defaultPrevented&&!this.wantsNewTab(e)},isNewPageHref(e,t){if(e.startsWith("mailto:")||e.startsWith("tel:"))return!1;let i;try{i=new URL(e)}catch{try{i=new URL(e,t)}catch{return!0}}return i.host===t.host&&i.protocol===t.protocol&&i.pathname===t.pathname&&i.search===t.search?i.hash===""&&!i.href.endsWith("#"):!0},markPhxChildDestroyed(e){this.isPhxChild(e)&&e.setAttribute(je,""),this.putPrivate(e,"destroyed",!0)},findPhxChildrenInFragment(e,t){let i=document.createElement("template");return i.innerHTML=e,this.findPhxChildren(i.content,t)},isIgnored(e,t){return(e.getAttribute(t)||e.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(e,t,i){return e.getAttribute&&i.indexOf(e.getAttribute(t))>=0},findPhxSticky(e){return this.all(e,`[${Dc}]`)},findPhxChildren(e,t){return this.all(e,`${Hi}[${Ni}="${t}"]`)},findParentCIDs(e,t){let i=new Set(t),n=t.reduce((s,r)=>{let o=`[${It}="${r}"] [${It}]`;return this.filterWithinSameLiveView(this.all(e,o),e).map(a=>parseInt(a.getAttribute(It))).forEach(a=>s.delete(a)),s},i);return n.size===0?new Set(t):n},filterWithinSameLiveView(e,t){return t.querySelector(Hi)?e.filter(i=>this.withinSameLiveView(i,t)):e},withinSameLiveView(e,t){for(;e=e.parentNode;){if(e.isSameNode(t))return!0;if(e.getAttribute(je)!==null)return!1}},private(e,t){return e[le]&&e[le][t]},deletePrivate(e,t){e[le]&&delete e[le][t]},putPrivate(e,t,i){e[le]||(e[le]={}),e[le][t]=i},updatePrivate(e,t,i,n){let s=this.private(e,t);s===void 0?this.putPrivate(e,t,n(i)):this.putPrivate(e,t,n(s))},copyPrivates(e,t){t[le]&&(e[le]=t[le])},putTitle(e){let t=document.querySelector("title");if(t){let{prefix:i,suffix:n}=t.dataset;document.title=`${i||""}${e}${n||""}`}else document.title=e},debounce(e,t,i,n,s,r,o,a){let l=e.getAttribute(i),c=e.getAttribute(s);l===""&&(l=n),c===""&&(c=r);let h=l||c;switch(h){case null:return a();case"blur":this.once(e,"debounce-blur")&&e.addEventListener("blur",()=>a());return;default:let d=parseInt(h),u=()=>c?this.deletePrivate(e,qs):a(),f=this.incCycle(e,Dn,u);if(isNaN(d))return St(`invalid throttle/debounce value: ${h}`);if(c){let m=!1;if(t.type==="keydown"){let b=this.private(e,Ic);this.putPrivate(e,Ic,t.key),m=b!==t.key}if(!m&&this.private(e,qs))return!1;a(),this.putPrivate(e,qs,!0),setTimeout(()=>{o()&&this.triggerCycle(e,Dn)},d)}else setTimeout(()=>{o()&&this.triggerCycle(e,Dn,f)},d);let g=e.form;g&&this.once(g,"bind-debounce")&&g.addEventListener("submit",()=>{Array.from(new FormData(g).entries(),([m])=>{let b=g.querySelector(`[name="${m}"]`);this.incCycle(b,Dn),this.deletePrivate(b,qs)})}),this.once(e,"bind-debounce")&&e.addEventListener("blur",()=>this.triggerCycle(e,Dn))}},triggerCycle(e,t,i){let[n,s]=this.private(e,t);i||(i=n),i===n&&(this.incCycle(e,t),s())},once(e,t){return this.private(e,t)===!0?!1:(this.putPrivate(e,t,!0),!0)},incCycle(e,t,i=function(){}){let[n]=this.private(e,t)||[0,i];return n++,this.putPrivate(e,t,[n,i]),n},maybeAddPrivateHooks(e,t,i){e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute(i))&&e.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},maybeHideFeedback(e,t,i){if(!(this.private(t,jo)||this.private(t,nr))){let n=[t.name];t.name.endsWith("[]")&&n.push(t.name.slice(0,-2));let s=n.map(r=>`[${i}="${r}"]`).join(", ");jt.all(e,s,r=>r.classList.add(Po))}},resetForm(e,t){Array.from(e.elements).forEach(i=>{let n=`[${t}="${i.id}"],
                   [${t}="${i.name}"],
                   [${t}="${i.name.replace(/\[\]$/,"")}"]`;this.deletePrivate(i,jo),this.deletePrivate(i,nr),this.all(document,n,s=>{s.classList.add(Po)})})},showError(e,t){(e.id||e.name)&&this.all(e.form,`[${t}="${e.id}"], [${t}="${e.name}"]`,i=>{this.removeClass(i,Po)})},isPhxChild(e){return e.getAttribute&&e.getAttribute(Ni)},isPhxSticky(e){return e.getAttribute&&e.getAttribute(Dc)!==null},firstPhxChild(e){return this.isPhxChild(e)?e:this.all(e,`[${Ni}]`)[0]},dispatchEvent(e,t,i={}){let s={bubbles:i.bubbles===void 0?!0:!!i.bubbles,cancelable:!0,detail:i.detail||{}},r=t==="click"?new MouseEvent("click",s):new CustomEvent(t,s);e.dispatchEvent(r)},cloneNode(e,t){if(typeof t>"u")return e.cloneNode(!0);{let i=e.cloneNode(!1);return i.innerHTML=t,i}},mergeAttrs(e,t,i={}){let n=i.exclude||[],s=i.isIgnored,r=t.attributes;for(let a=r.length-1;a>=0;a--){let l=r[a].name;n.indexOf(l)<0&&e.setAttribute(l,t.getAttribute(l))}let o=e.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;s?l.startsWith("data-")&&!t.hasAttribute(l)&&e.removeAttribute(l):t.hasAttribute(l)||e.removeAttribute(l)}},mergeFocusedInput(e,t){e instanceof HTMLSelectElement||jt.mergeAttrs(e,t,{exclude:["value"]}),t.readOnly?e.setAttribute("readonly",!0):e.removeAttribute("readonly")},hasSelectionRange(e){return e.setSelectionRange&&(e.type==="text"||e.type==="textarea")},restoreFocus(e,t,i){if(!jt.isTextualInput(e))return;let n=e.matches(":focus");e.readOnly&&e.blur(),n||e.focus(),this.hasSelectionRange(e)&&e.setSelectionRange(t,i)},isFormInput(e){return/^(?:input|select|textarea)$/i.test(e.tagName)&&e.type!=="button"},syncAttrsToProps(e){e instanceof HTMLInputElement&&eh.indexOf(e.type.toLocaleLowerCase())>=0&&(e.checked=e.getAttribute("checked")!==null)},isTextualInput(e){return Qg.indexOf(e.type)>=0},isNowTriggerFormExternal(e,t){return e.getAttribute&&e.getAttribute(t)!==null},syncPendingRef(e,t,i){let n=e.getAttribute(Vt);if(n===null)return!0;let s=e.getAttribute(ii);return jt.isFormInput(e)||e.getAttribute(i)!==null?(jt.isUploadInput(e)&&jt.mergeAttrs(e,t,{isIgnored:!0}),jt.putPrivate(e,Vt,t),!1):(Gc.forEach(r=>{e.classList.contains(r)&&t.classList.add(r)}),t.setAttribute(Vt,n),t.setAttribute(ii,s),!0)},cleanChildNodes(e,t){if(jt.isPhxUpdate(e,t,["append","prepend"])){let i=[];e.childNodes.forEach(n=>{n.id||(n.nodeType===Node.TEXT_NODE&&n.nodeValue.trim()===""||St(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(n.outerHTML||n.nodeValue).trim()}"

`),i.push(n))}),i.forEach(n=>n.remove())}},replaceRootContainer(e,t,i){let n=new Set(["id",je,Fn,Wo,Bn]);if(e.tagName.toLowerCase()===t.toLowerCase())return Array.from(e.attributes).filter(s=>!n.has(s.name.toLowerCase())).forEach(s=>e.removeAttribute(s.name)),Object.keys(i).filter(s=>!n.has(s.toLowerCase())).forEach(s=>e.setAttribute(s,i[s])),e;{let s=document.createElement(t);return Object.keys(i).forEach(r=>s.setAttribute(r,i[r])),n.forEach(r=>s.setAttribute(r,e.getAttribute(r))),s.innerHTML=e.innerHTML,e.replaceWith(s),s}},getSticky(e,t,i){let n=(jt.private(e,"sticky")||[]).find(([s])=>t===s);if(n){let[s,r,o]=n;return o}else return typeof i=="function"?i():i},deleteSticky(e,t){this.updatePrivate(e,"sticky",[],i=>i.filter(([n,s])=>n!==t))},putSticky(e,t,i){let n=i(e);this.updatePrivate(e,"sticky",[],s=>{let r=s.findIndex(([o])=>t===o);return r>=0?s[r]=[t,i,n]:s.push([t,i,n]),s})},applyStickyOperations(e){let t=jt.private(e,"sticky");!t||t.forEach(([i,n,s])=>this.putSticky(e,i,n))}},S=jt,Fo=class{static isActive(e,t){let i=t._phxRef===void 0,s=e.getAttribute(Bo).split(",").indexOf(wt.genFileRef(t))>=0;return t.size>0&&(i||s)}static isPreflighted(e,t){return e.getAttribute(zo).split(",").indexOf(wt.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,i){this.ref=wt.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(tr,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{wt.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(tr,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),wt.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(tr,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(Bo).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||St(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:pm}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||St(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}},gm=0,wt=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(gm++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let n=this.activeFiles(e).find(s=>this.genFileRef(s)===t);i(URL.createObjectURL(n))}static hasUploadsInProgress(e){let t=0;return S.findUploadInputs(e).forEach(i=>{i.getAttribute(zo)!==i.getAttribute(Gg)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(n=>{let s={path:e.name},r=e.getAttribute(ni);i[r]=i[r]||[],s.ref=this.genFileRef(n),s.last_modified=n.lastModified,s.name=n.name||s.ref,s.relative_path=n.webkitRelativePath,s.type=n.type,s.size=n.size,i[r].push(s)}),i}static clearFiles(e){e.value=null,e.removeAttribute(ni),S.putPrivate(e,"files",[])}static untrackFile(e,t){S.putPrivate(e,"files",S.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t,i){if(e.getAttribute("multiple")!==null){let n=t.filter(s=>!this.activeFiles(e).find(r=>Object.is(r,s)));S.putPrivate(e,"files",this.activeFiles(e).concat(n)),e.value=null}else i&&i.files.length>0&&(e.files=i.files),S.putPrivate(e,"files",t)}static activeFileInputs(e){let t=S.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(S.private(e,"files")||[]).filter(t=>Fo.isActive(e,t))}static inputsAwaitingPreflight(e){let t=S.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!Fo.isPreflighted(e,t))}constructor(e,t,i){this.view=t,this.onComplete=i,this._entries=Array.from(wt.filesAwaitingPreflight(e)||[]).map(n=>new Fo(e,n,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(s=>(s.zipPostFlight(e),s.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),s));let n=this._entries.reduce((s,r)=>{let{name:o,callback:a}=r.uploader(i.uploaders);return s[o]=s[o]||{callback:a,entries:[]},s[o].entries.push(r),s},{});for(let s in n){let{callback:r,entries:o}=n[s];r(o,t,e,i)}}},mm={focusMain(){let e=document.querySelector("main h1, main, h1");if(e){let t=e.tabIndex;e.tabIndex=-1,e.focus(),e.tabIndex=t}},anyOf(e,t){return t.find(i=>e instanceof i)},isFocusable(e,t){return e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||!e.disabled&&this.anyOf(e,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true"},attemptFocus(e,t){if(this.isFocusable(e,t))try{e.focus()}catch{}return!!document.activeElement&&document.activeElement.isSameNode(e)},focusFirstInteractive(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t,!0)||this.focusFirstInteractive(t,!0))return!0;t=t.nextElementSibling}},focusFirst(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t)||this.focusFirst(t))return!0;t=t.nextElementSibling}},focusLast(e){let t=e.lastElementChild;for(;t;){if(this.attemptFocus(t)||this.focusLast(t))return!0;t=t.previousElementSibling}}},Bi=mm,nh={LiveFileUpload:{activeRefs(){return this.el.getAttribute(Bo)},preflightedRefs(){return this.el.getAttribute(zo)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let e=this.preflightedRefs();this.preflightedWas!==e&&(this.preflightedWas=e,e===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(tr))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(ni)),wt.getEntryDataURL(this.inputEl,this.ref,e=>{this.url=e,this.el.src=e})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>Bi.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>Bi.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&Bi.focusFirst(this.el)}}},Vc=()=>document.documentElement.scrollTop||document.body.scrollTop,$o=()=>window.innerHeight||document.documentElement.clientHeight,bm=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=$o()},vm=e=>{let t=e.getBoundingClientRect();return t.right>=0&&t.left>=0&&t.bottom<=$o()},zc=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=$o()};nh.InfiniteScroll={mounted(){let e=Vc(),t=!1,i=500,n=null,s=this.throttle(i,(a,l)=>{n=()=>!0,this.liveSocket.execJSHookPush(this.el,a,{id:l.id,_overran:!0},()=>{n=null})}),r=this.throttle(i,(a,l)=>{n=()=>l.scrollIntoView({block:"start"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{n=null,zc(l)||l.scrollIntoView({block:"start"})})}),o=this.throttle(i,(a,l)=>{n=()=>l.scrollIntoView({block:"end"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{n=null,zc(l)||l.scrollIntoView({block:"end"})})});this.onScroll=a=>{let l=Vc();if(n)return e=l,n();let c=this.el.getBoundingClientRect(),h=this.el.getAttribute(this.liveSocket.binding("viewport-top")),d=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),u=this.el.lastElementChild,f=this.el.firstElementChild,g=l<e,m=l>e;g&&h&&!t&&c.top>=0?(t=!0,s(h,f)):m&&t&&c.top<=0&&(t=!1),h&&g&&bm(f)?r(h,f):d&&m&&vm(u)&&o(d,u),e=l},window.addEventListener("scroll",this.onScroll)},destroyed(){window.removeEventListener("scroll",this.onScroll)},throttle(e,t){let i=0,n;return(...s)=>{let r=Date.now(),o=e-(r-i);o<=0||o>e?(n&&(clearTimeout(n),n=null),i=r,t(...s)):n||(n=setTimeout(()=>{i=Date.now(),n=null,t(...s)},o))}}};var ym=nh,xm=class{constructor(e,t,i){let n=new Set,s=new Set([...t.children].map(o=>o.id)),r=[];Array.from(e.children).forEach(o=>{if(o.id&&(n.add(o.id),s.has(o.id))){let a=o.previousElementSibling&&o.previousElementSibling.id;r.push({elementId:o.id,previousElementId:a})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=r,this.elementIdsToAdd=[...s].filter(o=>!n.has(o))}perform(){let e=S.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?He(document.getElementById(t.previousElementId),i=>{He(document.getElementById(t.elementId),n=>{n.previousElementSibling&&n.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",n)})}):He(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{He(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}},Wc=11;function _m(e,t){var i=t.attributes,n,s,r,o,a;if(!(t.nodeType===Wc||e.nodeType===Wc)){for(var l=i.length-1;l>=0;l--)n=i[l],s=n.name,r=n.namespaceURI,o=n.value,r?(s=n.localName||s,a=e.getAttributeNS(r,s),a!==o&&(n.prefix==="xmlns"&&(s=n.name),e.setAttributeNS(r,s,o))):(a=e.getAttribute(s),a!==o&&e.setAttribute(s,o));for(var c=e.attributes,h=c.length-1;h>=0;h--)n=c[h],s=n.name,r=n.namespaceURI,r?(s=n.localName||s,t.hasAttributeNS(r,s)||e.removeAttributeNS(r,s)):t.hasAttribute(s)||e.removeAttribute(s)}}var Js,wm="http://www.w3.org/1999/xhtml",Mt=typeof document>"u"?void 0:document,Sm=!!Mt&&"content"in Mt.createElement("template"),km=!!Mt&&Mt.createRange&&"createContextualFragment"in Mt.createRange();function Am(e){var t=Mt.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function Cm(e){Js||(Js=Mt.createRange(),Js.selectNode(Mt.body));var t=Js.createContextualFragment(e);return t.childNodes[0]}function Em(e){var t=Mt.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Pm(e){return e=e.trim(),Sm?Am(e):km?Cm(e):Em(e)}function Ks(e,t){var i=e.nodeName,n=t.nodeName,s,r;return i===n?!0:(s=i.charCodeAt(0),r=n.charCodeAt(0),s<=90&&r>=97?i===n.toUpperCase():r<=90&&s>=97?n===i.toUpperCase():!1)}function Tm(e,t){return!t||t===wm?Mt.createElement(e):Mt.createElementNS(t,e)}function Mm(e,t){for(var i=e.firstChild;i;){var n=i.nextSibling;t.appendChild(i),i=n}return t}function No(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var $c={OPTION:function(e,t){var i=e.parentNode;if(i){var n=i.nodeName.toUpperCase();n==="OPTGROUP"&&(i=i.parentNode,n=i&&i.nodeName.toUpperCase()),n==="SELECT"&&!i.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}No(e,t,"selected")},INPUT:function(e,t){No(e,t,"checked"),No(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var n=e.firstChild;if(n){var s=n.nodeValue;if(s==i||!i&&s==e.placeholder)return;n.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i=-1,n=0,s=e.firstChild,r,o;s;)if(o=s.nodeName&&s.nodeName.toUpperCase(),o==="OPTGROUP")r=s,s=r.firstChild;else{if(o==="OPTION"){if(s.hasAttribute("selected")){i=n;break}n++}s=s.nextSibling,!s&&r&&(s=r.nextSibling,r=null)}e.selectedIndex=i}}},Rn=1,Uc=11,Xc=3,Yc=8;function Ne(){}function Om(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Dm(e){return function(i,n,s){if(s||(s={}),typeof n=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var r=n;n=Mt.createElement("html"),n.innerHTML=r}else n=Pm(n);else n.nodeType===Uc&&(n=n.firstElementChild);var o=s.getNodeKey||Om,a=s.onBeforeNodeAdded||Ne,l=s.onNodeAdded||Ne,c=s.onBeforeElUpdated||Ne,h=s.onElUpdated||Ne,d=s.onBeforeNodeDiscarded||Ne,u=s.onNodeDiscarded||Ne,f=s.onBeforeElChildrenUpdated||Ne,g=s.skipFromChildren||Ne,m=s.addChild||function(T,O){return T.appendChild(O)},b=s.childrenOnly===!0,v=Object.create(null),x=[];function w(T){x.push(T)}function p(T,O){if(T.nodeType===Rn)for(var F=T.firstChild;F;){var I=void 0;O&&(I=o(F))?w(I):(u(F),F.firstChild&&p(F,O)),F=F.nextSibling}}function y(T,O,F){d(T)!==!1&&(O&&O.removeChild(T),u(T),p(T,F))}function _(T){if(T.nodeType===Rn||T.nodeType===Uc)for(var O=T.firstChild;O;){var F=o(O);F&&(v[F]=O),_(O),O=O.nextSibling}}_(i);function A(T){l(T);for(var O=T.firstChild;O;){var F=O.nextSibling,I=o(O);if(I){var W=v[I];W&&Ks(O,W)?(O.parentNode.replaceChild(W,O),E(W,O)):A(O)}else A(O);O=F}}function C(T,O,F){for(;O;){var I=O.nextSibling;(F=o(O))?w(F):y(O,T,!0),O=I}}function E(T,O,F){var I=o(O);I&&delete v[I],!(!F&&(c(T,O)===!1||(e(T,O),h(T),f(T,O)===!1)))&&(T.nodeName!=="TEXTAREA"?M(T,O):$c.TEXTAREA(T,O))}function M(T,O){var F=g(T),I=O.firstChild,W=T.firstChild,Q,rt,ot,at,tt;t:for(;I;){for(at=I.nextSibling,Q=o(I);!F&&W;){if(ot=W.nextSibling,I.isSameNode&&I.isSameNode(W)){I=at,W=ot;continue t}rt=o(W);var Ut=W.nodeType,gt=void 0;if(Ut===I.nodeType&&(Ut===Rn?(Q?Q!==rt&&((tt=v[Q])?ot===tt?gt=!1:(T.insertBefore(tt,W),rt?w(rt):y(W,T,!0),W=tt):gt=!1):rt&&(gt=!1),gt=gt!==!1&&Ks(W,I),gt&&E(W,I)):(Ut===Xc||Ut==Yc)&&(gt=!0,W.nodeValue!==I.nodeValue&&(W.nodeValue=I.nodeValue))),gt){I=at,W=ot;continue t}rt?w(rt):y(W,T,!0),W=ot}if(Q&&(tt=v[Q])&&Ks(tt,I))F||m(T,tt),E(tt,I);else{var Qt=a(I);Qt!==!1&&(Qt&&(I=Qt),I.actualize&&(I=I.actualize(T.ownerDocument||Mt)),m(T,I),A(I))}I=at,W=ot}C(T,W,rt);var Xt=$c[T.nodeName];Xt&&Xt(T,O)}var P=i,L=P.nodeType,H=n.nodeType;if(!b){if(L===Rn)H===Rn?Ks(i,n)||(u(i),P=Mm(i,Tm(n.nodeName,n.namespaceURI))):P=n;else if(L===Xc||L===Yc){if(H===L)return P.nodeValue!==n.nodeValue&&(P.nodeValue=n.nodeValue),P;P=n}}if(P===n)u(i);else{if(n.isSameNode&&n.isSameNode(P))return;if(E(P,n,b),x)for(var X=0,j=x.length;X<j;X++){var B=v[x[X]];B&&y(B,B.parentNode,!1)}}return!b&&P!==i&&i.parentNode&&(P.actualize&&(P=P.actualize(i.ownerDocument||Mt)),i.parentNode.replaceChild(P,i)),P}}var Lm=Dm(_m),qc=Lm,Gs=class{static patchEl(e,t,i){qc(e,t,{childrenOnly:!1,onBeforeElUpdated:(n,s)=>{if(i&&i.isSameNode(n)&&S.isFormInput(n))return S.mergeFocusedInput(n,s),!1}})}constructor(e,t,i,n,s,r){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=n,this.streams=s,this.streamInserts={},this.targetCID=r,this.cidPatch=Be(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){let e=this.liveSocket.binding(sr);S.all(this.container,`[${e}=${Oo}]`,t=>t.innerHTML=""),S.all(this.container,`[${e}=append] > *, [${e}=prepend] > *`,t=>{t.setAttribute(Pc,"")})}perform(){let{view:e,liveSocket:t,container:i,html:n}=this,s=this.isCIDPatch()?this.targetCIDContainer(n):i;if(this.isCIDPatch()&&!s)return;let r=t.getActiveElement(),{selectionStart:o,selectionEnd:a}=r&&S.hasSelectionRange(r)?r:{},l=t.binding(sr),c=t.binding(ir),h=t.binding(Vo),d=t.binding(Qc),u=t.binding(th),f=t.binding(Zg),g=[],m=[],b=[],v=[],x=null,w=t.time("premorph container prep",()=>this.buildDiffHTML(i,n,l,s));return this.trackBefore("added",i),this.trackBefore("updated",i,i),t.time("morphdom",()=>{this.streams.forEach(([p,y,_,A])=>{Object.entries(y).forEach(([C,[E,M]])=>{this.streamInserts[C]={ref:p,streamAt:E,limit:M}}),A!==void 0&&S.all(i,`[${On}="${p}"]`,C=>{this.removeStreamChildElement(C)}),_.forEach(C=>{let E=i.querySelector(`[id="${C}"]`);E&&this.removeStreamChildElement(E)})}),qc(s,w,{childrenOnly:s.getAttribute(It)===null,getNodeKey:p=>S.isPhxDestroyed(p)?null:p.id,skipFromChildren:p=>p.getAttribute(l)===Oo,addChild:(p,y)=>{let{ref:_,streamAt:A,limit:C}=this.getStreamInsert(y);if(_===void 0)return p.appendChild(y);if(S.putSticky(y,On,M=>M.setAttribute(On,_)),A===0)p.insertAdjacentElement("afterbegin",y);else if(A===-1)p.appendChild(y);else if(A>0){let M=Array.from(p.children)[A];p.insertBefore(y,M)}let E=C!==null&&Array.from(p.children);C&&C<0&&E.length>C*-1?E.slice(0,E.length+C).forEach(M=>this.removeStreamChildElement(M)):C&&C>=0&&E.length>C&&E.slice(C).forEach(M=>this.removeStreamChildElement(M))},onBeforeNodeAdded:p=>(S.maybeAddPrivateHooks(p,d,u),this.trackBefore("added",p),p),onNodeAdded:p=>{p.getAttribute&&this.maybeReOrderStream(p),p instanceof HTMLImageElement&&p.srcset?p.srcset=p.srcset:p instanceof HTMLVideoElement&&p.autoplay&&p.play(),S.isNowTriggerFormExternal(p,f)&&(x=p),p.getAttribute&&p.getAttribute("name")&&m.push(p),(S.isPhxChild(p)&&e.ownsElement(p)||S.isPhxSticky(p)&&e.ownsElement(p.parentNode))&&this.trackAfter("phxChildAdded",p),g.push(p)},onNodeDiscarded:p=>this.onNodeDiscarded(p),onBeforeNodeDiscarded:p=>p.getAttribute&&p.getAttribute(Pc)!==null?!0:!(p.parentElement!==null&&p.id&&S.isPhxUpdate(p.parentElement,l,[Oo,"append","prepend"])||this.maybePendingRemove(p)||this.skipCIDSibling(p)),onElUpdated:p=>{S.isNowTriggerFormExternal(p,f)&&(x=p),b.push(p),this.maybeReOrderStream(p)},onBeforeElUpdated:(p,y)=>{if(S.cleanChildNodes(y,l),this.skipCIDSibling(y)||S.isPhxSticky(p))return!1;if(S.isIgnored(p,l)||p.form&&p.form.isSameNode(x))return this.trackBefore("updated",p,y),S.mergeAttrs(p,y,{isIgnored:!0}),b.push(p),S.applyStickyOperations(p),!1;if(p.type==="number"&&p.validity&&p.validity.badInput)return!1;if(!S.syncPendingRef(p,y,h))return S.isUploadInput(p)&&(this.trackBefore("updated",p,y),b.push(p)),S.applyStickyOperations(p),!1;if(S.isPhxChild(y)){let A=p.getAttribute(je);return S.mergeAttrs(p,y,{exclude:[Fn]}),A!==""&&p.setAttribute(je,A),p.setAttribute(Bn,this.rootID),S.applyStickyOperations(p),!1}return S.copyPrivates(y,p),r&&p.isSameNode(r)&&S.isFormInput(p)&&p.type!=="hidden"?(this.trackBefore("updated",p,y),S.mergeFocusedInput(p,y),S.syncAttrsToProps(p),b.push(p),S.applyStickyOperations(p),m.push(p),!1):(S.isPhxUpdate(y,l,["append","prepend"])&&v.push(new xm(p,y,y.getAttribute(l))),S.maybeAddPrivateHooks(y,d,u),S.syncAttrsToProps(y),S.applyStickyOperations(y),y.getAttribute("name")&&m.push(y),this.trackBefore("updated",p,y),!0)}})}),t.isDebugEnabled()&&dm(),v.length>0&&t.time("post-morph append/prepend restoration",()=>{v.forEach(p=>p.perform())}),m.forEach(p=>{S.maybeHideFeedback(s,p,c)}),t.silenceEvents(()=>S.restoreFocus(r,o,a)),S.dispatchEvent(document,"phx:update"),g.forEach(p=>this.trackAfter("added",p)),b.forEach(p=>this.trackAfter("updated",p)),this.transitionPendingRemoves(),x&&(t.unload(),x.submit()),!0}onNodeDiscarded(e){(S.isPhxChild(e)||S.isPhxSticky(e))&&this.liveSocket.destroyViewByEl(e),this.trackAfter("discarded",e)}maybePendingRemove(e){return e.getAttribute&&e.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(e),!0):!1}removeStreamChildElement(e){this.maybePendingRemove(e)||(e.remove(),this.onNodeDiscarded(e))}getStreamInsert(e){return(e.id?this.streamInserts[e.id]:{})||{}}maybeReOrderStream(e){let{ref:t,streamAt:i,limit:n}=this.getStreamInsert(e);if(i!==void 0){if(S.putSticky(e,On,s=>s.setAttribute(On,t)),i===0)e.parentElement.insertBefore(e,e.parentElement.firstElementChild);else if(i>0){let s=Array.from(e.parentElement.children),r=s.indexOf(e);if(i>=s.length-1)e.parentElement.appendChild(e);else{let o=s[i];r>i?e.parentElement.insertBefore(e,o):e.parentElement.insertBefore(e,o.nextElementSibling)}}}}transitionPendingRemoves(){let{pendingRemoves:e,liveSocket:t}=this;e.length>0&&(t.transitionRemoves(e),t.requestDOMUpdate(()=>{e.forEach(i=>{let n=S.firstPhxChild(i);n&&t.destroyViewByEl(n),i.remove()}),this.trackAfter("transitionsDiscarded",e)}))}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(Ho)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=S.findComponentNodeList(this.container,this.targetCID);return i.length===0&&S.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,i,n){let s=this.isCIDPatch(),r=s&&n.getAttribute(It)===this.targetCID.toString();if(!s||r)return t;{let o=null,a=document.createElement("template");o=S.cloneNode(n);let[l,...c]=S.findComponentNodeList(o,this.targetCID);return a.innerHTML=t,c.forEach(h=>h.remove()),Array.from(o.childNodes).forEach(h=>{h.id&&h.nodeType===Node.ELEMENT_NODE&&h.getAttribute(It)!==this.targetCID.toString()&&(h.setAttribute(Ho,""),h.innerHTML="")}),Array.from(a.content.childNodes).forEach(h=>o.insertBefore(h,l)),l.remove(),o.outerHTML}}indexOf(e,t){return Array.from(e.children).indexOf(t)}},Jc=class{static extract(e){let{[Nc]:t,[Fc]:i,[Bc]:n}=e;return delete e[Nc],delete e[Fc],delete e[Bc],{diff:e,title:n,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){let[t,i]=this.recursiveToString(this.rendered,this.rendered[Rt],e);return[t,i]}recursiveToString(e,t=e[Rt],i){i=i?new Set(i):null;let n={buffer:"",components:t,onlyCids:i,streams:new Set};return this.toOutputBuffer(e,null,n),[n.buffer,n.streams]}componentCIDs(e){return Object.keys(e[Rt]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[Rt]?Object.keys(e).length===1:!1}getComponent(e,t){return e[Rt][t]}mergeDiff(e){let t=e[Rt],i={};if(delete e[Rt],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[Rt]=this.rendered[Rt]||{},t){let n=this.rendered[Rt];for(let s in t)t[s]=this.cachedFindComponent(s,t[s],n,t,i);for(let s in t)n[s]=t[s];e[Rt]=t}}cachedFindComponent(e,t,i,n,s){if(s[e])return s[e];{let r,o,a=t[ce];if(Be(a)){let l;a>0?l=this.cachedFindComponent(a,n[a],i,n,s):l=i[-a],o=l[ce],r=this.cloneMerge(l,t),r[ce]=o}else r=t[ce]!==void 0?t:this.cloneMerge(i[e]||{},t);return s[e]=r,r}}mutableMerge(e,t){return t[ce]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let n=t[i],s=e[i];Ln(n)&&n[ce]===void 0&&Ln(s)?this.doMutableMerge(s,n):e[i]=n}}cloneMerge(e,t){let i={...e,...t};for(let n in i){let s=t[n],r=e[n];Ln(s)&&s[ce]===void 0&&Ln(r)&&(i[n]=this.cloneMerge(r,s))}return i}componentToString(e){let[t,i]=this.recursiveCIDToString(this.rendered[Rt],e);return[t,i]}pruneCIDs(e){e.forEach(t=>delete this.rendered[Rt][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[ce]}templateStatic(e,t){return typeof e=="number"?t[e]:e}toOutputBuffer(e,t,i){if(e[Ro])return this.comprehensionToBuffer(e,t,i);let{[ce]:n}=e;n=this.templateStatic(n,t),i.buffer+=n[0];for(let s=1;s<n.length;s++)this.dynamicToBuffer(e[s-1],t,i),i.buffer+=n[s]}comprehensionToBuffer(e,t,i){let{[Ro]:n,[ce]:s,[Hc]:r}=e,[o,a,l,c]=r||[null,{},[],null];s=this.templateStatic(s,t);let h=t||e[cm];for(let d=0;d<n.length;d++){let u=n[d];i.buffer+=s[0];for(let f=1;f<s.length;f++)this.dynamicToBuffer(u[f-1],h,i),i.buffer+=s[f]}r!==void 0&&(e[Ro].length>0||l.length>0||c)&&(delete e[Hc],i.streams.add(r))}dynamicToBuffer(e,t,i){if(typeof e=="number"){let[n,s]=this.recursiveCIDToString(i.components,e,i.onlyCids);i.buffer+=n,i.streams=new Set([...i.streams,...s])}else Ln(e)?this.toOutputBuffer(e,t,i):i.buffer+=e}recursiveCIDToString(e,t,i){let n=e[t]||St(`no component for CID ${t}`,e),s=document.createElement("template"),[r,o]=this.recursiveToString(n,e,i);s.innerHTML=r;let a=s.content,l=i&&!i.has(t),[c,h]=Array.from(a.childNodes).reduce(([d,u],f,g)=>f.nodeType===Node.ELEMENT_NODE?f.getAttribute(It)?[d,!0]:(f.setAttribute(It,t),f.id||(f.id=`${this.parentViewId()}-${t}-${g}`),l&&(f.setAttribute(Ho,""),f.innerHTML=""),[!0,u]):f.nodeValue.trim()!==""?(St(`only HTML element tags are allowed at the root of components.

got: "${f.nodeValue.trim()}"

within:
`,s.innerHTML.trim()),f.replaceWith(this.createSpan(f.nodeValue,t)),[!0,u]):(f.remove(),[d,u]),[!1,!1]);return!c&&!h?(St(`expected at least one HTML element tag inside a component, but the component is empty:
`,s.innerHTML.trim()),[this.createSpan("",t).outerHTML,o]):!c&&h?(St("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",s.innerHTML.trim()),[s.innerHTML,o]):[s.innerHTML,o]}createSpan(e,t){let i=document.createElement("span");return i.innerText=e,i.setAttribute(It,t),i}},Rm=1,In=class{static makeID(){return Rm++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let n in this.__callbacks)this[n]=this.__callbacks[n]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(this.el,null,e,t,i)}pushEventTo(e,t,i={},n=function(){}){return this.__view.withinTargets(e,(s,r)=>s.pushHookEvent(this.el,r,t,i,n))}handleEvent(e,t){let i=(n,s)=>s?e:t(n.detail);return window.addEventListener(`phx:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,n=>n.dispatchUploads(t,i))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}},Zs=null,Im={exec(e,t,i,n,s){let[r,o]=s||[null,{callback:s&&s.callback}];(t.charAt(0)==="["?JSON.parse(t):[[r,o]]).forEach(([l,c])=>{l===r&&o.data&&(c.data=Object.assign(c.data||{},o.data),c.callback=c.callback||o.callback),this.filterToEls(n,c).forEach(h=>{this[`exec_${l}`](e,t,i,n,h,c)})})},isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length>0)},exec_exec(e,t,i,n,s,[r,o]){(o?S.all(document,o):[n]).forEach(l=>{let c=l.getAttribute(r);if(!c)throw new Error(`expected ${r} to contain JS command on "${o}"`);i.liveSocket.execJS(l,c,e)})},exec_dispatch(e,t,i,n,s,{to:r,event:o,detail:a,bubbles:l}){a=a||{},a.dispatcher=n,S.dispatchEvent(s,o,{detail:a,bubbles:l})},exec_push(e,t,i,n,s,r){if(!i.isConnected())return;let{event:o,data:a,target:l,page_loading:c,loading:h,value:d,dispatcher:u,callback:f}=r,g={loading:h,value:d,target:l,page_loading:!!c},m=e==="change"&&u?u:n,b=l||m.getAttribute(i.binding("target"))||m;i.withinTargets(b,(v,x)=>{if(e==="change"){let{newCid:w,_target:p}=r;p=p||(S.isFormInput(n)?n.name:void 0),p&&(g._target=p),v.pushInput(n,x,w,o||t,g,f)}else if(e==="submit"){let{submitter:w}=r;v.submitForm(n,x,o||t,w,g,f)}else v.pushEvent(e,n,x,o||t,a,g,f)})},exec_navigate(e,t,i,n,s,{href:r,replace:o}){i.liveSocket.historyRedirect(r,o?"replace":"push")},exec_patch(e,t,i,n,s,{href:r,replace:o}){i.liveSocket.pushHistoryPatch(r,o?"replace":"push",n)},exec_focus(e,t,i,n,s){window.requestAnimationFrame(()=>Bi.attemptFocus(s))},exec_focus_first(e,t,i,n,s){window.requestAnimationFrame(()=>Bi.focusFirstInteractive(s)||Bi.focusFirst(s))},exec_push_focus(e,t,i,n,s){window.requestAnimationFrame(()=>Zs=s||n)},exec_pop_focus(e,t,i,n,s){window.requestAnimationFrame(()=>{Zs&&Zs.focus(),Zs=null})},exec_add_class(e,t,i,n,s,{names:r,transition:o,time:a}){this.addOrRemoveClasses(s,r,[],o,a,i)},exec_remove_class(e,t,i,n,s,{names:r,transition:o,time:a}){this.addOrRemoveClasses(s,[],r,o,a,i)},exec_transition(e,t,i,n,s,{time:r,transition:o}){this.addOrRemoveClasses(s,[],[],o,r,i)},exec_toggle(e,t,i,n,s,{display:r,ins:o,outs:a,time:l}){this.toggle(e,i,s,r,o,a,l)},exec_show(e,t,i,n,s,{display:r,transition:o,time:a}){this.show(e,i,s,r,o,a)},exec_hide(e,t,i,n,s,{display:r,transition:o,time:a}){this.hide(e,i,s,r,o,a)},exec_set_attr(e,t,i,n,s,{attr:[r,o]}){this.setOrRemoveAttrs(s,[[r,o]],[])},exec_remove_attr(e,t,i,n,s,{attr:r}){this.setOrRemoveAttrs(s,[],[r])},show(e,t,i,n,s,r){this.isVisible(i)||this.toggle(e,t,i,n,s,null,r)},hide(e,t,i,n,s,r){this.isVisible(i)&&this.toggle(e,t,i,n,null,s,r)},toggle(e,t,i,n,s,r,o){let[a,l,c]=s||[[],[],[]],[h,d,u]=r||[[],[],[]];if(a.length>0||h.length>0)if(this.isVisible(i)){let f=()=>{this.addOrRemoveClasses(i,d,a.concat(l).concat(c)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,h,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,u,d))})};i.dispatchEvent(new Event("phx:hide-start")),t.transition(o,f,()=>{this.addOrRemoveClasses(i,[],h.concat(u)),S.putSticky(i,"toggle",g=>g.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))})}else{if(e==="remove")return;let f=()=>{this.addOrRemoveClasses(i,l,h.concat(d).concat(u));let g=n||this.defaultDisplay(i);S.putSticky(i,"toggle",m=>m.style.display=g),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,c,l))})};i.dispatchEvent(new Event("phx:show-start")),t.transition(o,f,()=>{this.addOrRemoveClasses(i,[],a.concat(c)),i.dispatchEvent(new Event("phx:show-end"))})}else this.isVisible(i)?window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:hide-start")),S.putSticky(i,"toggle",f=>f.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:show-start"));let f=n||this.defaultDisplay(i);S.putSticky(i,"toggle",g=>g.style.display=f),i.dispatchEvent(new Event("phx:show-end"))})},addOrRemoveClasses(e,t,i,n,s,r){let[o,a,l]=n||[[],[],[]];if(o.length>0){let c=()=>this.addOrRemoveClasses(e,a.concat(o),[]),h=()=>this.addOrRemoveClasses(e,t.concat(l),i.concat(o).concat(a));return r.transition(s,c,h)}window.requestAnimationFrame(()=>{let[c,h]=S.getSticky(e,"classes",[[],[]]),d=t.filter(m=>c.indexOf(m)<0&&!e.classList.contains(m)),u=i.filter(m=>h.indexOf(m)<0&&e.classList.contains(m)),f=c.filter(m=>i.indexOf(m)<0).concat(d),g=h.filter(m=>t.indexOf(m)<0).concat(u);S.putSticky(e,"classes",m=>(m.classList.remove(...g),m.classList.add(...f),[f,g]))})},setOrRemoveAttrs(e,t,i){let[n,s]=S.getSticky(e,"attrs",[[],[]]),r=t.map(([l,c])=>l).concat(i),o=n.filter(([l,c])=>!r.includes(l)).concat(t),a=s.filter(l=>!r.includes(l)).concat(i);S.putSticky(e,"attrs",l=>(a.forEach(c=>l.removeAttribute(c)),o.forEach(([c,h])=>l.setAttribute(c,h)),[o,a]))},hasAllClasses(e,t){return t.every(i=>e.classList.contains(i))},isToggledOut(e,t){return!this.isVisible(e)||this.hasAllClasses(e,t)},filterToEls(e,{to:t}){return t?S.all(document,t):[e]},defaultDisplay(e){return{tr:"table-row",td:"table-cell"}[e.tagName.toLowerCase()]||"block"}},qt=Im,Qs=(e,t,i=[])=>{let{submitter:n,...s}=t,r=new FormData(e);n&&n.hasAttribute("name")&&n.form&&n.form===e&&r.append(n.name,n.value);let o=[];r.forEach((l,c,h)=>{l instanceof File&&o.push(c)}),o.forEach(l=>r.delete(l));let a=new URLSearchParams;for(let[l,c]of r.entries())(i.length===0||i.indexOf(l)>=0)&&a.append(l,c);for(let l in s)a.append(l,s[l]);return a.toString()},sh=class{constructor(e,t,i,n,s){this.isDead=!1,this.liveSocket=t,this.flash=n,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(r){r&&r()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(s),session:this.getSession(),static:this.getStatic(),flash:this.flash}))}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.hasAttribute(Wo)}connectParams(e){let t=this.liveSocket.params(this.el),i=S.all(document,`[${this.binding(Jg)}]`).map(n=>n.src||n.href).filter(n=>typeof n=="string");return i.length>0&&(t._track_static=i),t._mounts=this.joinCount,t._live_referer=e,t}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(je)}getStatic(){let e=this.el.getAttribute(Fn);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};S.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(Mc,Tn,$s,Oc,To),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(Tn)}}execAll(e){S.all(this.el,`[${e}]`,t=>this.liveSocket.execJS(t,t.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(Mc),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}transition(e,t,i=function(){}){this.liveSocket.transition(e,t,i)}withinTargets(e,t){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,i=>t(i,e));if(Be(e))S.findComponentNodeList(this.el,e).length===0?St(`no component found matching phx-target of ${e}`):t(this,parseInt(e));else{let i=Array.from(document.querySelectorAll(e));i.length===0&&St(`nothing found matching the phx-target selector "${e}"`),i.forEach(n=>this.liveSocket.owner(n,s=>t(s,n)))}}applyDiff(e,t,i){this.log(e,()=>["",er(t)]);let{diff:n,reply:s,events:r,title:o}=Jc.extract(t);i({diff:n,reply:s,events:r}),o&&window.requestAnimationFrame(()=>S.putTitle(o))}onJoin(e){let{rendered:t,container:i}=e;if(i){let[n,s]=i;this.el=S.replaceRootContainer(this.el,n,s)}this.childJoins=0,this.joinPending=!0,this.flash=null,he.dropLocal(this.liveSocket.localStorage,window.location.pathname,Kc),this.applyDiff("mount",t,({diff:n,events:s})=>{this.rendered=new Jc(this.id,n);let[r,o]=this.renderContainer(null,"join");this.dropPendingRefs();let a=this.formsForRecovery(r);this.joinCount++,a.length>0?a.forEach(([l,c,h],d)=>{this.pushFormRecovery(l,h,u=>{d===a.length-1&&this.onJoinComplete(u,r,o,s)})}):this.onJoinComplete(e,r,o,s)})}dropPendingRefs(){S.all(document,`[${ii}="${this.id}"][${Vt}]`,e=>{e.removeAttribute(Vt),e.removeAttribute(ii)})}onJoinComplete({live_patch:e},t,i,n){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i,n);S.findPhxChildrenInFragment(t,this.id).filter(r=>{let o=r.id&&this.el.querySelector(`[id="${r.id}"]`),a=o&&o.getAttribute(Fn);return a&&r.setAttribute(Fn,a),this.joinChild(r)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,n)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i,n)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i,n)])}attachTrueDocEl(){this.el=S.byId(this.id),this.el.setAttribute(Bn,this.root.id)}execNewMounted(){let e=this.binding(Qc),t=this.binding(th);S.all(this.el,`[${e}], [${t}]`,i=>{S.maybeAddPrivateHooks(i,e,t),this.maybeAddNewHook(i)}),S.all(this.el,`[${this.binding(Mn)}], [data-phx-${Mn}]`,i=>{this.maybeAddNewHook(i)}),S.all(this.el,`[${this.binding(Rc)}]`,i=>this.maybeMounted(i))}applyJoinPatch(e,t,i,n){this.attachTrueDocEl();let s=new Gs(this,this.el,this.id,t,i,null);if(s.markPrunableContentForRemoval(),this.performPatch(s,!1),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(n),this.applyPendingUpdates(),e){let{kind:r,to:o}=e;this.liveSocket.historyPatch(o,r)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),n=i&&S.isIgnored(e,this.binding(sr));if(i&&!e.isEqualNode(t)&&!(n&&fm(e.dataset,t.dataset)))return i.__beforeUpdate(),i}maybeMounted(e){let t=e.getAttribute(this.binding(Rc)),i=t&&S.private(e,"mounted");t&&!i&&(this.liveSocket.execJS(e,t),S.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,t){let i=this.addHook(e);i&&i.__mounted()}performPatch(e,t){let i=[],n=!1,s=new Set;return e.after("added",r=>{this.liveSocket.triggerDOM("onNodeAdded",[r]),this.maybeAddNewHook(r),r.getAttribute&&this.maybeMounted(r)}),e.after("phxChildAdded",r=>{S.isPhxSticky(r)?this.liveSocket.joinRootViews():n=!0}),e.before("updated",(r,o)=>{this.triggerBeforeUpdateHook(r,o)&&s.add(r.id)}),e.after("updated",r=>{s.has(r.id)&&this.getHook(r).__updated()}),e.after("discarded",r=>{r.nodeType===Node.ELEMENT_NODE&&i.push(r)}),e.after("transitionsDiscarded",r=>this.afterElementsRemoved(r,t)),e.perform(),this.afterElementsRemoved(i,t),n}afterElementsRemoved(e,t){let i=[];e.forEach(n=>{let s=S.all(n,`[${It}]`),r=S.all(n,`[${this.binding(Mn)}]`);s.concat(n).forEach(o=>{let a=this.componentID(o);Be(a)&&i.indexOf(a)===-1&&i.push(a)}),r.concat(n).forEach(o=>{let a=this.getHook(o);a&&this.destroyHook(a)})}),t&&this.maybePushComponentsDestroyed(i)}joinNewChildren(){S.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(Ni)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new sh(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]})}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{S.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(s=>{this.componentPatch(this.rendered.getComponent(e,s),s)&&(i=!0)})}):jc(e)||this.liveSocket.time("full patch complete",()=>{let[n,s]=this.renderContainer(e,"update"),r=new Gs(this,this.el,this.id,n,s,null);i=this.performPatch(r,!0)}),this.liveSocket.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,n=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,[s,r]=this.rendered.toString(n);return[`<${i}>${s}</${i}>`,r]})}componentPatch(e,t){if(jc(e))return!1;let[i,n]=this.rendered.componentToString(t),s=new Gs(this,this.el,this.id,i,n,t);return this.performPatch(s,!0)}getHook(e){return this.viewHooks[In.elementID(e)]}addHook(e){if(In.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${Mn}`)||e.getAttribute(this.binding(Mn));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||St(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let n=new In(this,e,i);return this.viewHooks[In.elementID(n.el)]=n,n}else t!==null&&St(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[In.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[],this.eachChild(e=>e.applyPendingUpdates())}eachChild(e){let t=this.root.children[this.id]||{};for(let i in t)e(this.getChildById(i))}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):this.liveSocket.requestDOMUpdate(()=>t(i))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))})}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){this.eachChild(e=>e.destroy())}onLiveRedirect(e){let{to:t,kind:i,flash:n}=e,s=this.expandURL(t);this.liveSocket.historyRedirect(s,i,n)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=t=>{t=t||function(){},e?e(this.joinCount,t):t()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(t))}).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="reload")return this.log("error",()=>[`failed mount with ${e.status}. Falling back to page request`,e]),this.onRedirect({to:this.href});if(e.reason==="unauthorized"||e.reason==="stale")return this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href});if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.displayError([Tn,$s,To]),this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(rm)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([Tn,$s,To]):this.displayError([Tn,$s,Oc]))}displayError(e){this.isMain()&&S.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...e),this.execAll(this.binding("disconnected"))}pushWithReply(e,t,i,n=function(){}){if(!this.isConnected())return;let[s,[r],o]=e?e():[null,[],{}],a=function(){};return(o.page_loading||r&&r.getAttribute(this.binding(Tc))!==null)&&(a=this.liveSocket.withPageLoading({kind:"element",target:r})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,am).receive("ok",l=>{let c=h=>{l.redirect&&this.onRedirect(l.redirect),l.live_patch&&this.onLivePatch(l.live_patch),l.live_redirect&&this.onLiveRedirect(l.live_redirect),a(),n(l,h)};l.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",l.diff,({diff:h,reply:d,events:u})=>{s!==null&&this.undoRefs(s),this.update(h,u),c(d)})}):(s!==null&&this.undoRefs(s),c(null))}))}undoRefs(e){!this.isConnected()||S.all(document,`[${ii}="${this.id}"][${Vt}="${e}"]`,t=>{let i=t.getAttribute(Us);t.removeAttribute(Vt),t.removeAttribute(ii),t.getAttribute(Mo)!==null&&(t.readOnly=!1,t.removeAttribute(Mo)),i!==null&&(t.disabled=i==="true",t.removeAttribute(Us)),Gc.forEach(r=>S.removeClass(t,r));let n=t.getAttribute(Xs);n!==null&&(t.innerText=n,t.removeAttribute(Xs));let s=S.private(t,Vt);if(s){let r=this.triggerBeforeUpdateHook(t,s);Gs.patchEl(t,s,this.liveSocket.getActiveElement()),r&&r.__updated(),S.deletePrivate(t,Vt)}})}putRef(e,t,i={}){let n=this.ref++,s=this.binding(Vo);return i.loading&&(e=e.concat(S.all(document,i.loading))),e.forEach(r=>{r.classList.add(`phx-${t}-loading`),r.setAttribute(Vt,n),r.setAttribute(ii,this.el.id);let o=r.getAttribute(s);o!==null&&(r.getAttribute(Xs)||r.setAttribute(Xs,r.innerText),o!==""&&(r.innerText=o),r.setAttribute("disabled",""))}),[n,e,i]}componentID(e){let t=e.getAttribute&&e.getAttribute(It);return t?parseInt(t):null}targetComponentID(e,t,i={}){if(Be(t))return t;let n=e.getAttribute(this.binding("target"));return Be(n)?parseInt(n):t&&(n!==null||i.target)?this.closestComponentID(t):null}closestComponentID(e){return Be(e)?e:e?He(e.closest(`[${It}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,n,s){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",i,n]),!1;let[r,o,a]=this.putRef([e],"hook");return this.pushWithReply(()=>[r,o,a],"event",{type:"hook",event:i,value:n,cid:this.closestComponentID(t)},(l,c)=>s(c,r)),r}extractMeta(e,t,i){let n=this.binding("value-");for(let s=0;s<e.attributes.length;s++){t||(t={});let r=e.attributes[s].name;r.startsWith(n)&&(t[r.replace(n,"")]=e.getAttribute(r))}if(e.value!==void 0&&(t||(t={}),t.value=e.value,e.tagName==="INPUT"&&eh.indexOf(e.type)>=0&&!e.checked&&delete t.value),i){t||(t={});for(let s in i)t[s]=i[s]}return t}pushEvent(e,t,i,n,s,r={},o){this.pushWithReply(()=>this.putRef([t],e,r),"event",{type:e,event:n,value:this.extractMeta(t,s,r.value),cid:this.targetComponentID(t,i,r)},(a,l)=>o&&o(l))}pushFileProgress(e,t,i,n=function(){}){this.liveSocket.withinOwners(e.form,(s,r)=>{s.pushWithReply(null,"progress",{event:e.getAttribute(s.binding(nm)),ref:e.getAttribute(ni),entry_ref:t,progress:i,cid:s.targetComponentID(e.form,r)},n)})}pushInput(e,t,i,n,s,r){let o,a=Be(i)?i:this.targetComponentID(e.form,t),l=()=>this.putRef([e,e.form],"change",s),c,h=this.extractMeta(e.form);e.getAttribute(this.binding("change"))?c=Qs(e.form,{_target:s._target,...h},[e.name]):c=Qs(e.form,{_target:s._target,...h}),S.isUploadInput(e)&&e.files&&e.files.length>0&&wt.trackFiles(e,Array.from(e.files)),o=wt.serializeUploads(e);let d={type:"form",event:n,value:c,uploads:o,cid:a};this.pushWithReply(l,"event",d,u=>{if(S.showError(e,this.liveSocket.binding(ir)),S.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(wt.filesAwaitingPreflight(e).length>0){let[f,g]=l();this.uploadFiles(e.form,t,f,a,m=>{r&&r(u),this.triggerAwaitingSubmit(e.form)})}}else r&&r(u)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,n,s,r]=t;this.cancelSubmit(e),r()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i,n,s])=>t.isSameNode(e))}scheduleSubmit(e,t,i,n){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i,n])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,n])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}disableForm(e,t={}){let i=h=>!(Nn(h,`${this.binding(sr)}=ignore`,h.form)||Nn(h,"data-phx-update=ignore",h.form)),n=h=>h.hasAttribute(this.binding(Vo)),s=h=>h.tagName=="BUTTON",r=h=>["INPUT","TEXTAREA","SELECT"].includes(h.tagName),o=Array.from(e.elements),a=o.filter(n),l=o.filter(s).filter(i),c=o.filter(r).filter(i);return l.forEach(h=>{h.setAttribute(Us,h.disabled),h.disabled=!0}),c.forEach(h=>{h.setAttribute(Mo,h.readOnly),h.readOnly=!0,h.files&&(h.setAttribute(Us,h.disabled),h.disabled=!0)}),e.setAttribute(this.binding(Tc),""),this.putRef([e].concat(a).concat(l).concat(c),"submit",t)}pushFormSubmit(e,t,i,n,s,r){let o=()=>this.disableForm(e,s),a=this.targetComponentID(e,t);if(wt.hasUploadsInProgress(e)){let[l,c]=o(),h=()=>this.pushFormSubmit(e,n,t,i,s,r);return this.scheduleSubmit(e,l,s,h)}else if(wt.inputsAwaitingPreflight(e).length>0){let[l,c]=o(),h=()=>[l,c,s];this.uploadFiles(e,t,l,a,d=>{let u=this.extractMeta(e),f=Qs(e,{submitter:n,...u});this.pushWithReply(h,"event",{type:"form",event:i,value:f,cid:a},r)})}else if(!(e.hasAttribute(Vt)&&e.classList.contains("phx-submit-loading"))){let l=this.extractMeta(e),c=Qs(e,{submitter:n,...l});this.pushWithReply(o,"event",{type:"form",event:i,value:c,cid:a},r)}}uploadFiles(e,t,i,n,s){let r=this.joinCount,o=wt.activeFileInputs(e),a=o.length;o.forEach(l=>{let c=new wt(l,this,()=>{a--,a===0&&s()});this.uploaders[l]=c;let h=c.entries().map(u=>u.toPreflightPayload()),d={ref:l.getAttribute(ni),entries:h,cid:this.targetComponentID(l.form,t)};this.log("upload",()=>["sending preflight request",d]),this.pushWithReply(null,"allow_upload",d,u=>{if(this.log("upload",()=>["got preflight response",u]),u.error){this.undoRefs(i);let[f,g]=u.error;this.log("upload",()=>[`error for entry ${f}`,g])}else{let f=g=>{this.channel.onError(()=>{this.joinCount===r&&g()})};c.initAdapterUpload(u,f,this.liveSocket)}})})}dispatchUploads(e,t){let i=S.findUploadInputs(this.el).filter(n=>n.name===e);i.length===0?St(`no live file inputs found matching the name "${e}"`):i.length>1?St(`duplicate live file inputs found matching the name "${e}"`):S.dispatchEvent(i[0],Zc,{detail:{files:t}})}pushFormRecovery(e,t,i){this.liveSocket.withinOwners(e,(n,s)=>{let r=this.binding("change"),o=Array.from(e.elements).filter(c=>S.isFormInput(c)&&c.name&&!c.hasAttribute(r));if(o.length===0)return;let a=o.find(c=>c.type!=="hidden")||a[0],l=e.getAttribute(this.binding(Lc))||e.getAttribute(this.binding("change"));qt.exec("change",l,n,a,["push",{_target:a.name,newCid:t,callback:i}])})}pushLinkPatch(e,t,i){let n=this.liveSocket.setPendingLink(e),s=t?()=>this.putRef([t],"click"):null,r=()=>this.liveSocket.redirect(window.location.href),o=this.pushWithReply(s,"live_patch",{url:e},a=>{this.liveSocket.requestDOMUpdate(()=>{a.link_redirect?this.liveSocket.replaceMain(e,null,i,n):(this.liveSocket.commitPendingLink(n)&&(this.href=e),this.applyPendingUpdates(),i&&i(n))})});o?o.receive("timeout",r):r()}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),i=document.createElement("template");return i.innerHTML=e,S.all(this.el,`form[${t}]`).filter(n=>n.id&&this.ownsElement(n)).filter(n=>n.elements.length>0).filter(n=>n.getAttribute(this.binding(Lc))!=="ignore").map(n=>{let s=i.content.querySelector(`form[id="${n.id}"][${t}="${n.getAttribute(t)}"]`);return s?[n,s,this.targetComponentID(s)]:[n,n,this.targetComponentID(n)]}).filter(([n,s,r])=>s)}maybePushComponentsDestroyed(e){let t=e.filter(i=>S.findComponentNodeList(this.el,i).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(n=>t.indexOf(n)!==-1);let i=t.filter(n=>S.findComponentNodeList(this.el,n).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},n=>{this.rendered.pruneCIDs(n.cids)})}))}ownsElement(e){let t=e.closest(Hi);return e.getAttribute(Ni)===this.id||t&&t.id===this.id||!t&&this.isDead}submitForm(e,t,i,n,s={}){S.putPrivate(e,nr,!0);let r=this.liveSocket.binding(ir),o=Array.from(e.elements);o.forEach(a=>S.putPrivate(a,nr,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,n,s,()=>{o.forEach(a=>S.showError(a,r)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}},rh=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||om,this.opts=i,this.params=Io(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(er(lm),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=er(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||sm,this.reloadWithJitterTimer=null,this.maxReloads=i.maxReloads||Ug,this.reloadJitterMin=i.reloadJitterMin||Xg,this.reloadJitterMax=i.reloadJitterMax||Yg,this.failsafeJitter=i.failsafeJitter||qg,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:Io(),onBeforeElUpdated:Io()},i.dom||{}),this.transitions=new Fm,window.addEventListener("pagehide",n=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}isProfileEnabled(){return this.sessionStorage.getItem(Do)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(Ys)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(Ys)==="false"}enableDebug(){this.sessionStorage.setItem(Ys,"true")}enableProfiling(){this.sessionStorage.setItem(Do,"true")}disableDebug(){this.sessionStorage.setItem(Ys,"false")}disableProfiling(){this.sessionStorage.removeItem(Do)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(Lo,e)}disableLatencySim(){this.sessionStorage.removeItem(Lo)}getLatencySim(){let e=this.sessionStorage.getItem(Lo);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug();let e=()=>{this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.bindTopLevelEvents({dead:!0}),this.joinDeadView()};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){clearTimeout(this.reloadWithJitterTimer),this.socket.disconnect(e)}replaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,t,i=null){this.owner(e,n=>qt.exec(i,t,n,e))}execJSHookPush(e,t,i,n){this.withinOwners(e,s=>{qt.exec("hook",t,s,e,["push",{data:i,callback:n}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[n,s]=i();this.viewLogger(e,t,n,s)}else if(this.isDebugEnabled()){let[n,s]=i();um(e,t,n,s)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,t,i=function(){}){this.transitions.addTransition(e,t,i)}onChannel(e,t,i){e.on(t,n=>{let s=this.getLatencySim();s?setTimeout(()=>i(n),s):i(n)})}wrapPush(e,t,i){let n=this.getLatencySim(),s=e.joinCount;if(!n)return this.isConnected()&&t.timeout?i().receive("timeout",()=>{e.joinCount===s&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();let r={receives:[],receive(o,a){this.receives.push([o,a])}};return setTimeout(()=>{e.isDestroyed()||r.receives.reduce((o,[a,l])=>o.receive(a,l),i())},n),r}reloadWithJitter(e,t){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let i=this.reloadJitterMin,n=this.reloadJitterMax,s=Math.floor(Math.random()*(n-i+1))+i,r=he.updateLocal(this.localStorage,window.location.pathname,Kc,0,o=>o+1);r>this.maxReloads&&(s=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{e.isDestroyed()||e.isConnected()||(e.destroy(),t?t():this.log(e,"join",()=>[`encountered ${r} consecutive reloads`]),r>this.maxReloads&&this.log(e,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]),this.hasPendingLink()?window.location=this.pendingLink:window.location.reload())},s)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?ym[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinDeadView(){let e=document.body;if(e&&!this.isPhxView(e)&&!this.isPhxView(document.firstElementChild)){let t=this.newRootView(e);t.setHref(this.getHref()),t.joinDead(),this.main||(this.main=t),window.requestAnimationFrame(()=>t.execNewMounted())}}joinRootViews(){let e=!1;return S.all(document,`${Hi}:not([${Ni}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.hasAttribute(Wo)&&(this.main=i)}e=!0}),e}redirect(e,t){this.unload(),he.redirect(e,t)}replaceMain(e,t,i=null,n=this.setPendingLink(e)){let s=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let r=S.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(r,t,s),this.main.setRedirect(e),this.transitionRemoves(),this.main.join((o,a)=>{o===1&&this.commitPendingLink(n)&&this.requestDOMUpdate(()=>{S.findPhxSticky(document).forEach(l=>r.appendChild(l)),this.outgoingMainEl.replaceWith(r),this.outgoingMainEl=null,i&&requestAnimationFrame(i),a()})})}transitionRemoves(e){let t=this.binding("remove");e=e||S.all(document,`[${t}]`),e.forEach(i=>{this.execJS(i,i.getAttribute(t),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(je)!==null}newRootView(e,t,i){let n=new sh(e,this,null,t,i);return this.roots[n.id]=n,n}owner(e,t){let i=He(e.closest(Hi),n=>this.getViewByEl(n))||this.main;i&&t(i)}withinOwners(e,t){this.owner(e,i=>t(i,e))}getViewByEl(e){let t=e.getAttribute(Bn);return He(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(Bn));t&&t.id===e.id?(t.destroy(),delete this.roots[t.id]):t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.socket.onClose(t=>{if(t&&t.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",t=>{t.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),e||this.bindNav(),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(t,i,n,s,r,o)=>{let a=s.getAttribute(this.binding(im)),l=t.key&&t.key.toLowerCase();if(a&&a.toLowerCase()!==l)return;let c={key:t.key,...this.eventMeta(i,t,s)};qt.exec(i,r,n,s,["push",{data:c}])}),this.bind({blur:"focusout",focus:"focusin"},(t,i,n,s,r,o)=>{if(!o){let a={key:t.key,...this.eventMeta(i,t,s)};qt.exec(i,r,n,s,["push",{data:a}])}}),this.bind({blur:"blur",focus:"focus"},(t,i,n,s,r,o,a)=>{if(a==="window"){let l=this.eventMeta(i,t,s);qt.exec(i,o,n,s,["push",{data:l}])}}),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("drop",t=>{t.preventDefault();let i=He(Nn(t.target,this.binding(Ec)),r=>r.getAttribute(this.binding(Ec))),n=i&&document.getElementById(i),s=Array.from(t.dataTransfer.files||[]);!n||n.disabled||s.length===0||!(n.files instanceof FileList)||(wt.trackFiles(n,s,t.dataTransfer),n.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(Zc,t=>{let i=t.target;if(!S.isUploadInput(i))return;let n=Array.from(t.detail.files||[]).filter(s=>s instanceof File||s instanceof Blob);wt.trackFiles(i,n),i.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let n=this.metadataCallbacks[e];return n?n(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let n=e[i];this.on(n,s=>{let r=this.binding(i),o=this.binding(`window-${i}`),a=s.target.getAttribute&&s.target.getAttribute(r);a?this.debounce(s.target,s,n,()=>{this.withinOwners(s.target,l=>{t(s,i,l,s.target,a,null)})}):S.all(document,`[${o}]`,l=>{let c=l.getAttribute(o);this.debounce(l,s,n,()=>{this.withinOwners(l,h=>{t(s,i,h,l,c,"window")})})})})}}bindClicks(){window.addEventListener("click",e=>this.clickStartedAtTarget=e.target),this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,i){let n=this.binding(t);window.addEventListener(e,s=>{let r=null;if(i)r=s.target.matches(`[${n}]`)?s.target:s.target.querySelector(`[${n}]`);else{let a=this.clickStartedAtTarget||s.target;r=Nn(a,n),this.dispatchClickAway(s,a),this.clickStartedAtTarget=null}let o=r&&r.getAttribute(n);if(!o){let a=s.target instanceof HTMLAnchorElement?s.target.getAttribute("href"):null;!i&&a!==null&&!S.wantsNewTab(s)&&S.isNewPageHref(a,window.location)&&this.unload();return}r.getAttribute("href")==="#"&&s.preventDefault(),!r.hasAttribute(Vt)&&this.debounce(r,s,"click",()=>{this.withinOwners(r,a=>{qt.exec("click",o,a,r,["push",{data:this.eventMeta("click",s,r)}])})})},i)}dispatchClickAway(e,t){let i=this.binding("click-away");S.all(document,`[${i}]`,n=>{n.isSameNode(t)||n.contains(t)||this.withinOwners(e.target,s=>{let r=n.getAttribute(i);qt.isVisible(n)&&qt.exec("click",r,s,n,["push",{data:this.eventMeta("click",e,e.target)}])})})}bindNav(){if(!he.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{he.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:n,root:s,scroll:r}=t.state||{},o=window.location.href;this.requestDOMUpdate(()=>{this.main.isConnected()&&i==="patch"&&n===this.main.id?this.main.pushLinkPatch(o,null,()=>{this.maybeScroll(r)}):this.replaceMain(o,null,()=>{s&&this.replaceRootHistory(),this.maybeScroll(r)})})},!1),window.addEventListener("click",t=>{let i=Nn(t.target,Eo),n=i&&i.getAttribute(Eo);if(!n||!this.isConnected()||!this.main||S.wantsNewTab(t))return;let s=i.href,r=i.getAttribute(Kg);t.preventDefault(),t.stopImmediatePropagation(),this.pendingLink!==s&&this.requestDOMUpdate(()=>{if(n==="patch")this.pushHistoryPatch(s,r,i);else if(n==="redirect")this.historyRedirect(s,r);else throw new Error(`expected ${Eo} to be "patch" or "redirect", got: ${n}`);let o=i.getAttribute(this.binding("click"));o&&this.requestDOMUpdate(()=>this.execJS(i,o,"click"))})},!1)}maybeScroll(e){typeof e=="number"&&requestAnimationFrame(()=>{window.scrollTo(0,e)})}dispatchEvent(e,t={}){S.dispatchEvent(window,`phx:${e}`,{detail:t})}dispatchEvents(e){e.forEach(([t,i])=>this.dispatchEvent(t,i))}withPageLoading(e,t){S.dispatchEvent(window,"phx:page-loading-start",{detail:e});let i=()=>S.dispatchEvent(window,"phx:page-loading-stop",{detail:e});return t?t(i):i}pushHistoryPatch(e,t,i){if(!this.isConnected())return he.redirect(e);this.withPageLoading({to:e,kind:"patch"},n=>{this.main.pushLinkPatch(e,i,s=>{this.historyPatch(e,t,s),n()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(he.pushState(t,{type:"patch",id:this.main.id},e),this.registerNewLocation(window.location))}historyRedirect(e,t,i){if(!this.isConnected())return he.redirect(e,i);if(/^\/$|^\/[^\/]+.*$/.test(e)){let{protocol:s,host:r}=window.location;e=`${s}//${r}${e}`}let n=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},s=>{this.replaceMain(e,i,()=>{he.pushState(t,{type:"redirect",id:this.main.id,scroll:n},e),this.registerNewLocation(window.location),s()})})}replaceRootHistory(){he.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=er(e),!0)}bindForms(){let e=0,t=!1;this.on("submit",i=>{let n=i.target.getAttribute(this.binding("submit")),s=i.target.getAttribute(this.binding("change"));!t&&s&&!n&&(t=!0,i.preventDefault(),this.withinOwners(i.target,r=>{r.disableForm(i.target),window.requestAnimationFrame(()=>{S.isUnloadableFormSubmit(i)&&this.unload(),i.target.submit()})}))},!0),this.on("submit",i=>{let n=i.target.getAttribute(this.binding("submit"));if(!n){S.isUnloadableFormSubmit(i)&&this.unload();return}i.preventDefault(),i.target.disabled=!0,this.withinOwners(i.target,s=>{qt.exec("submit",n,s,i.target,["push",{submitter:i.submitter}])})},!1);for(let i of["change","input"])this.on(i,n=>{let s=this.binding("change"),r=n.target,o=r.getAttribute(s),a=r.form&&r.form.getAttribute(s),l=o||a;if(!l||r.type==="number"&&r.validity&&r.validity.badInput)return;let c=o?r:r.form,h=e;e++;let{at:d,type:u}=S.private(r,"prev-iteration")||{};d===h-1&&i!==u||(S.putPrivate(r,"prev-iteration",{at:h,type:i}),this.debounce(r,n,i,()=>{this.withinOwners(c,f=>{S.putPrivate(r,jo,!0),S.isTextualInput(r)||this.setActiveElement(r),qt.exec("change",l,f,r,["push",{_target:n.target.name,dispatcher:c}])})}))},!1);this.on("reset",i=>{let n=i.target;S.resetForm(n,this.binding(ir));let s=Array.from(n.elements).find(r=>r.type==="reset");window.requestAnimationFrame(()=>{s.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(e,t,i,n){if(i==="blur"||i==="focusout")return n();let s=this.binding(tm),r=this.binding(em),o=this.defaults.debounce.toString(),a=this.defaults.throttle.toString();this.withinOwners(e,l=>{let c=()=>!l.isDestroyed()&&document.body.contains(e);S.debounce(e,t,s,o,r,a,c,()=>{n()})})}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}},Fm=class{constructor(){this.transitions=new Set,this.pendingOps=[]}reset(){this.transitions.forEach(e=>{clearTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,t,i){t();let n=setTimeout(()=>{this.transitions.delete(n),i(),this.flushPendingOps()},e);this.transitions.add(n)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){if(this.size()>0)return;let e=this.pendingOps.shift();e&&(e(),this.flushPendingOps())}};var lt="top",ft="bottom",dt="right",ct="left",rr="auto",Ve=[lt,ft,dt,ct],Se="start",si="end",oh="clippingParents",or="viewport",ji="popper",ah="reference",Uo=Ve.reduce(function(e,t){return e.concat([t+"-"+Se,t+"-"+si])},[]),ar=[].concat(Ve,[rr]).reduce(function(e,t){return e.concat([t,t+"-"+Se,t+"-"+si])},[]),Nm="beforeRead",Bm="read",Hm="afterRead",jm="beforeMain",Vm="main",zm="afterMain",Wm="beforeWrite",$m="write",Um="afterWrite",lh=[Nm,Bm,Hm,jm,Vm,zm,Wm,$m,Um];function mt(e){return e?(e.nodeName||"").toLowerCase():null}function st(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function zt(e){var t=st(e).Element;return e instanceof t||e instanceof Element}function pt(e){var t=st(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Vi(e){if(typeof ShadowRoot>"u")return!1;var t=st(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Xm(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var n=t.styles[i]||{},s=t.attributes[i]||{},r=t.elements[i];!pt(r)||!mt(r)||(Object.assign(r.style,n),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Ym(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(n){var s=t.elements[n],r=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:i[n]),a=o.reduce(function(l,c){return l[c]="",l},{});!pt(s)||!mt(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var Hn={name:"applyStyles",enabled:!0,phase:"write",fn:Xm,effect:Ym,requires:["computeStyles"]};function bt(e){return e.split("-")[0]}var Jt=Math.max,ri=Math.min,ke=Math.round;function zi(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function jn(){return!/^((?!chrome|android).)*safari/i.test(zi())}function Wt(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var n=e.getBoundingClientRect(),s=1,r=1;t&&pt(e)&&(s=e.offsetWidth>0&&ke(n.width)/e.offsetWidth||1,r=e.offsetHeight>0&&ke(n.height)/e.offsetHeight||1);var o=zt(e)?st(e):window,a=o.visualViewport,l=!jn()&&i,c=(n.left+(l&&a?a.offsetLeft:0))/s,h=(n.top+(l&&a?a.offsetTop:0))/r,d=n.width/s,u=n.height/r;return{width:d,height:u,top:h,right:c+d,bottom:h+u,left:c,x:c,y:h}}function oi(e){var t=Wt(e),i=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function Vn(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Vi(i)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function At(e){return st(e).getComputedStyle(e)}function Xo(e){return["table","td","th"].indexOf(mt(e))>=0}function xt(e){return((zt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ae(e){return mt(e)==="html"?e:e.assignedSlot||e.parentNode||(Vi(e)?e.host:null)||xt(e)}function ch(e){return!pt(e)||At(e).position==="fixed"?null:e.offsetParent}function qm(e){var t=/firefox/i.test(zi()),i=/Trident/i.test(zi());if(i&&pt(e)){var n=At(e);if(n.position==="fixed")return null}var s=Ae(e);for(Vi(s)&&(s=s.host);pt(s)&&["html","body"].indexOf(mt(s))<0;){var r=At(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Kt(e){for(var t=st(e),i=ch(e);i&&Xo(i)&&At(i).position==="static";)i=ch(i);return i&&(mt(i)==="html"||mt(i)==="body"&&At(i).position==="static")?t:i||qm(e)||t}function ai(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function li(e,t,i){return Jt(e,ri(t,i))}function hh(e,t,i){var n=li(e,t,i);return n>i?i:n}function zn(){return{top:0,right:0,bottom:0,left:0}}function Wn(e){return Object.assign({},zn(),e)}function $n(e,t){return t.reduce(function(i,n){return i[n]=e,i},{})}var Jm=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,Wn(typeof t!="number"?t:$n(t,Ve))};function Km(e){var t,i=e.state,n=e.name,s=e.options,r=i.elements.arrow,o=i.modifiersData.popperOffsets,a=bt(i.placement),l=ai(a),c=[ct,dt].indexOf(a)>=0,h=c?"height":"width";if(!(!r||!o)){var d=Jm(s.padding,i),u=oi(r),f=l==="y"?lt:ct,g=l==="y"?ft:dt,m=i.rects.reference[h]+i.rects.reference[l]-o[l]-i.rects.popper[h],b=o[l]-i.rects.reference[l],v=Kt(r),x=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,w=m/2-b/2,p=d[f],y=x-u[h]-d[g],_=x/2-u[h]/2+w,A=li(p,_,y),C=l;i.modifiersData[n]=(t={},t[C]=A,t.centerOffset=A-_,t)}}function Gm(e){var t=e.state,i=e.options,n=i.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||!Vn(t.elements.popper,s)||(t.elements.arrow=s))}var dh={name:"arrow",enabled:!0,phase:"main",fn:Km,effect:Gm,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $t(e){return e.split("-")[1]}var Zm={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qm(e){var t=e.x,i=e.y,n=window,s=n.devicePixelRatio||1;return{x:ke(t*s)/s||0,y:ke(i*s)/s||0}}function uh(e){var t,i=e.popper,n=e.popperRect,s=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,h=e.roundOffsets,d=e.isFixed,u=o.x,f=u===void 0?0:u,g=o.y,m=g===void 0?0:g,b=typeof h=="function"?h({x:f,y:m}):{x:f,y:m};f=b.x,m=b.y;var v=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),w=ct,p=lt,y=window;if(c){var _=Kt(i),A="clientHeight",C="clientWidth";if(_===st(i)&&(_=xt(i),At(_).position!=="static"&&a==="absolute"&&(A="scrollHeight",C="scrollWidth")),_=_,s===lt||(s===ct||s===dt)&&r===si){p=ft;var E=d&&_===y&&y.visualViewport?y.visualViewport.height:_[A];m-=E-n.height,m*=l?1:-1}if(s===ct||(s===lt||s===ft)&&r===si){w=dt;var M=d&&_===y&&y.visualViewport?y.visualViewport.width:_[C];f-=M-n.width,f*=l?1:-1}}var P=Object.assign({position:a},c&&Zm),L=h===!0?Qm({x:f,y:m}):{x:f,y:m};if(f=L.x,m=L.y,l){var H;return Object.assign({},P,(H={},H[p]=x?"0":"",H[w]=v?"0":"",H.transform=(y.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",H))}return Object.assign({},P,(t={},t[p]=x?m+"px":"",t[w]=v?f+"px":"",t.transform="",t))}function tb(e){var t=e.state,i=e.options,n=i.gpuAcceleration,s=n===void 0?!0:n,r=i.adaptive,o=r===void 0?!0:r,a=i.roundOffsets,l=a===void 0?!0:a;if(!1)var c;var h={placement:bt(t.placement),variation:$t(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,uh(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,uh(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var fh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tb,data:{}};var lr={passive:!0};function eb(e){var t=e.state,i=e.instance,n=e.options,s=n.scroll,r=s===void 0?!0:s,o=n.resize,a=o===void 0?!0:o,l=st(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(h){h.addEventListener("scroll",i.update,lr)}),a&&l.addEventListener("resize",i.update,lr),function(){r&&c.forEach(function(h){h.removeEventListener("scroll",i.update,lr)}),a&&l.removeEventListener("resize",i.update,lr)}}var ph={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:eb,data:{}};var ib={left:"right",right:"left",bottom:"top",top:"bottom"};function Wi(e){return e.replace(/left|right|bottom|top/g,function(t){return ib[t]})}var nb={start:"end",end:"start"};function cr(e){return e.replace(/start|end/g,function(t){return nb[t]})}function ci(e){var t=st(e),i=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:i,scrollTop:n}}function hi(e){return Wt(xt(e)).left+ci(e).scrollLeft}function Yo(e,t){var i=st(e),n=xt(e),s=i.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=jn();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+hi(e),y:l}}function qo(e){var t,i=xt(e),n=ci(e),s=(t=e.ownerDocument)==null?void 0:t.body,r=Jt(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Jt(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+hi(e),l=-n.scrollTop;return At(s||i).direction==="rtl"&&(a+=Jt(i.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function di(e){var t=At(e),i=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function hr(e){return["html","body","#document"].indexOf(mt(e))>=0?e.ownerDocument.body:pt(e)&&di(e)?e:hr(Ae(e))}function ze(e,t){var i;t===void 0&&(t=[]);var n=hr(e),s=n===((i=e.ownerDocument)==null?void 0:i.body),r=st(n),o=s?[r].concat(r.visualViewport||[],di(n)?n:[]):n,a=t.concat(o);return s?a:a.concat(ze(Ae(o)))}function $i(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sb(e,t){var i=Wt(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function gh(e,t,i){return t===or?$i(Yo(e,i)):zt(t)?sb(t,i):$i(qo(xt(e)))}function rb(e){var t=ze(Ae(e)),i=["absolute","fixed"].indexOf(At(e).position)>=0,n=i&&pt(e)?Kt(e):e;return zt(n)?t.filter(function(s){return zt(s)&&Vn(s,n)&&mt(s)!=="body"}):[]}function Jo(e,t,i,n){var s=t==="clippingParents"?rb(e):[].concat(t),r=[].concat(s,[i]),o=r[0],a=r.reduce(function(l,c){var h=gh(e,c,n);return l.top=Jt(h.top,l.top),l.right=ri(h.right,l.right),l.bottom=ri(h.bottom,l.bottom),l.left=Jt(h.left,l.left),l},gh(e,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Un(e){var t=e.reference,i=e.element,n=e.placement,s=n?bt(n):null,r=n?$t(n):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(s){case lt:l={x:o,y:t.y-i.height};break;case ft:l={x:o,y:t.y+t.height};break;case dt:l={x:t.x+t.width,y:a};break;case ct:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?ai(s):null;if(c!=null){var h=c==="y"?"height":"width";switch(r){case Se:l[c]=l[c]-(t[h]/2-i[h]/2);break;case si:l[c]=l[c]+(t[h]/2-i[h]/2);break;default:}}return l}function Gt(e,t){t===void 0&&(t={});var i=t,n=i.placement,s=n===void 0?e.placement:n,r=i.strategy,o=r===void 0?e.strategy:r,a=i.boundary,l=a===void 0?oh:a,c=i.rootBoundary,h=c===void 0?or:c,d=i.elementContext,u=d===void 0?ji:d,f=i.altBoundary,g=f===void 0?!1:f,m=i.padding,b=m===void 0?0:m,v=Wn(typeof b!="number"?b:$n(b,Ve)),x=u===ji?ah:ji,w=e.rects.popper,p=e.elements[g?x:u],y=Jo(zt(p)?p:p.contextElement||xt(e.elements.popper),l,h,o),_=Wt(e.elements.reference),A=Un({reference:_,element:w,strategy:"absolute",placement:s}),C=$i(Object.assign({},w,A)),E=u===ji?C:_,M={top:y.top-E.top+v.top,bottom:E.bottom-y.bottom+v.bottom,left:y.left-E.left+v.left,right:E.right-y.right+v.right},P=e.modifiersData.offset;if(u===ji&&P){var L=P[s];Object.keys(M).forEach(function(H){var X=[dt,ft].indexOf(H)>=0?1:-1,j=[lt,ft].indexOf(H)>=0?"y":"x";M[H]+=L[j]*X})}return M}function Ko(e,t){t===void 0&&(t={});var i=t,n=i.placement,s=i.boundary,r=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?ar:l,h=$t(n),d=h?a?Uo:Uo.filter(function(g){return $t(g)===h}):Ve,u=d.filter(function(g){return c.indexOf(g)>=0});u.length===0&&(u=d);var f=u.reduce(function(g,m){return g[m]=Gt(e,{placement:m,boundary:s,rootBoundary:r,padding:o})[bt(m)],g},{});return Object.keys(f).sort(function(g,m){return f[g]-f[m]})}function ob(e){if(bt(e)===rr)return[];var t=Wi(e);return[cr(e),t,cr(t)]}function ab(e){var t=e.state,i=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var s=i.mainAxis,r=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,c=i.padding,h=i.boundary,d=i.rootBoundary,u=i.altBoundary,f=i.flipVariations,g=f===void 0?!0:f,m=i.allowedAutoPlacements,b=t.options.placement,v=bt(b),x=v===b,w=l||(x||!g?[Wi(b)]:ob(b)),p=[b].concat(w).reduce(function(ot,at){return ot.concat(bt(at)===rr?Ko(t,{placement:at,boundary:h,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:m}):at)},[]),y=t.rects.reference,_=t.rects.popper,A=new Map,C=!0,E=p[0],M=0;M<p.length;M++){var P=p[M],L=bt(P),H=$t(P)===Se,X=[lt,ft].indexOf(L)>=0,j=X?"width":"height",B=Gt(t,{placement:P,boundary:h,rootBoundary:d,altBoundary:u,padding:c}),T=X?H?dt:ct:H?ft:lt;y[j]>_[j]&&(T=Wi(T));var O=Wi(T),F=[];if(r&&F.push(B[L]<=0),a&&F.push(B[T]<=0,B[O]<=0),F.every(function(ot){return ot})){E=P,C=!1;break}A.set(P,F)}if(C)for(var I=g?3:1,W=function(at){var tt=p.find(function(Ut){var gt=A.get(Ut);if(gt)return gt.slice(0,at).every(function(Qt){return Qt})});if(tt)return E=tt,"break"},Q=I;Q>0;Q--){var rt=W(Q);if(rt==="break")break}t.placement!==E&&(t.modifiersData[n]._skip=!0,t.placement=E,t.reset=!0)}}var mh={name:"flip",enabled:!0,phase:"main",fn:ab,requiresIfExists:["offset"],data:{_skip:!1}};function bh(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function vh(e){return[lt,dt,ft,ct].some(function(t){return e[t]>=0})}function lb(e){var t=e.state,i=e.name,n=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=Gt(t,{elementContext:"reference"}),a=Gt(t,{altBoundary:!0}),l=bh(o,n),c=bh(a,s,r),h=vh(l),d=vh(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}var yh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:lb};function cb(e,t,i){var n=bt(e),s=[ct,lt].indexOf(n)>=0?-1:1,r=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[ct,dt].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function hb(e){var t=e.state,i=e.options,n=e.name,s=i.offset,r=s===void 0?[0,0]:s,o=ar.reduce(function(h,d){return h[d]=cb(d,t.rects,r),h},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}var xh={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:hb};function db(e){var t=e.state,i=e.name;t.modifiersData[i]=Un({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var _h={name:"popperOffsets",enabled:!0,phase:"read",fn:db,data:{}};function Go(e){return e==="x"?"y":"x"}function ub(e){var t=e.state,i=e.options,n=e.name,s=i.mainAxis,r=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,d=i.padding,u=i.tether,f=u===void 0?!0:u,g=i.tetherOffset,m=g===void 0?0:g,b=Gt(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),v=bt(t.placement),x=$t(t.placement),w=!x,p=ai(v),y=Go(p),_=t.modifiersData.popperOffsets,A=t.rects.reference,C=t.rects.popper,E=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,M=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),P=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(!!_){if(r){var H,X=p==="y"?lt:ct,j=p==="y"?ft:dt,B=p==="y"?"height":"width",T=_[p],O=T+b[X],F=T-b[j],I=f?-C[B]/2:0,W=x===Se?A[B]:C[B],Q=x===Se?-C[B]:-A[B],rt=t.elements.arrow,ot=f&&rt?oi(rt):{width:0,height:0},at=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:zn(),tt=at[X],Ut=at[j],gt=li(0,A[B],ot[B]),Qt=w?A[B]/2-I-gt-tt-M.mainAxis:W-gt-tt-M.mainAxis,Xt=w?-A[B]/2+I+gt+Ut+M.mainAxis:Q+gt+Ut+M.mainAxis,fi=t.elements.arrow&&Kt(t.elements.arrow),qn=fi?p==="y"?fi.clientTop||0:fi.clientLeft||0:0,Yi=(H=P?.[p])!=null?H:0,Jn=T+Qt-Yi-qn,Kn=T+Xt-Yi,qi=li(f?ri(O,Jn):O,T,f?Jt(F,Kn):F);_[p]=qi,L[p]=qi-T}if(a){var Ji,Gn=p==="x"?lt:ct,Zn=p==="x"?ft:dt,ue=_[y],Ce=y==="y"?"height":"width",Ki=ue+b[Gn],We=ue-b[Zn],Gi=[lt,ct].indexOf(v)!==-1,Qn=(Ji=P?.[y])!=null?Ji:0,ts=Gi?Ki:ue-A[Ce]-C[Ce]-Qn+M.altAxis,es=Gi?ue+A[Ce]+C[Ce]-Qn-M.altAxis:We,is=f&&Gi?hh(ts,ue,es):li(f?ts:Ki,ue,f?es:We);_[y]=is,L[y]=is-ue}t.modifiersData[n]=L}}var wh={name:"preventOverflow",enabled:!0,phase:"main",fn:ub,requiresIfExists:["offset"]};function Zo(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Qo(e){return e===st(e)||!pt(e)?ci(e):Zo(e)}function fb(e){var t=e.getBoundingClientRect(),i=ke(t.width)/e.offsetWidth||1,n=ke(t.height)/e.offsetHeight||1;return i!==1||n!==1}function ta(e,t,i){i===void 0&&(i=!1);var n=pt(t),s=pt(t)&&fb(t),r=xt(t),o=Wt(e,s,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!i)&&((mt(t)!=="body"||di(r))&&(a=Qo(t)),pt(t)?(l=Wt(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=hi(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function pb(e){var t=new Map,i=new Set,n=[];e.forEach(function(r){t.set(r.name,r)});function s(r){i.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&s(l)}}),n.push(r)}return e.forEach(function(r){i.has(r.name)||s(r)}),n}function ea(e){var t=pb(e);return lh.reduce(function(i,n){return i.concat(t.filter(function(s){return s.phase===n}))},[])}function ia(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function na(e){var t=e.reduce(function(i,n){var s=i[n.name];return i[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,i},{});return Object.keys(t).map(function(i){return t[i]})}var Sh={placement:"bottom",modifiers:[],strategy:"absolute"};function kh(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Ah(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,n=i===void 0?[]:i,s=t.defaultOptions,r=s===void 0?Sh:s;return function(a,l,c){c===void 0&&(c=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Sh,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],u=!1,f={state:h,setOptions:function(v){var x=typeof v=="function"?v(h.options):v;m(),h.options=Object.assign({},r,h.options,x),h.scrollParents={reference:zt(a)?ze(a):a.contextElement?ze(a.contextElement):[],popper:ze(l)};var w=ea(na([].concat(n,h.options.modifiers)));if(h.orderedModifiers=w.filter(function(P){return P.enabled}),!1){var p;if(getBasePlacement(h.options.placement)===auto)var y;var _,A,C,E,M}return g(),f.update()},forceUpdate:function(){if(!u){var v=h.elements,x=v.reference,w=v.popper;if(!!kh(x,w)){h.rects={reference:ta(x,Kt(w),h.options.strategy==="fixed"),popper:oi(w)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(P){return h.modifiersData[P.name]=Object.assign({},P.data)});for(var p=0,y=0;y<h.orderedModifiers.length;y++){if(h.reset===!0){h.reset=!1,y=-1;continue}var _=h.orderedModifiers[y],A=_.fn,C=_.options,E=C===void 0?{}:C,M=_.name;typeof A=="function"&&(h=A({state:h,options:E,name:M,instance:f})||h)}}}},update:ia(function(){return new Promise(function(b){f.forceUpdate(),b(h)})}),destroy:function(){m(),u=!0}};if(!kh(a,l))return f;f.setOptions(c).then(function(b){!u&&c.onFirstUpdate&&c.onFirstUpdate(b)});function g(){h.orderedModifiers.forEach(function(b){var v=b.name,x=b.options,w=x===void 0?{}:x,p=b.effect;if(typeof p=="function"){var y=p({state:h,name:v,instance:f,options:w}),_=function(){};d.push(y||_)}})}function m(){d.forEach(function(b){return b()}),d=[]}return f}}var gb=[ph,_h,fh,Hn,xh,mh,wh,dh,yh],sa=Ah({defaultModifiers:gb});var Ih='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',mb="tippy-box",Fh="tippy-content",bb="tippy-backdrop",Nh="tippy-arrow",Bh="tippy-svg-arrow",ui={passive:!0,capture:!0},Hh=function(){return document.body};function ra(e,t,i){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(i)?i[t]:i)}return e}function da(e,t){var i={}.toString.call(e);return i.indexOf("[object")===0&&i.indexOf(t+"]")>-1}function jh(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Ch(e,t){if(t===0)return e;var i;return function(n){clearTimeout(i),i=setTimeout(function(){e(n)},t)}}function vb(e){return e.split(/\s+/).filter(Boolean)}function Ui(e){return[].concat(e)}function Eh(e,t){e.indexOf(t)===-1&&e.push(t)}function yb(e){return e.filter(function(t,i){return e.indexOf(t)===i})}function xb(e){return e.split("-")[0]}function ur(e){return[].slice.call(e)}function Ph(e){return Object.keys(e).reduce(function(t,i){return e[i]!==void 0&&(t[i]=e[i]),t},{})}function Xn(){return document.createElement("div")}function fr(e){return["Element","Fragment"].some(function(t){return da(e,t)})}function _b(e){return da(e,"NodeList")}function wb(e){return da(e,"MouseEvent")}function Sb(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function kb(e){return fr(e)?[e]:_b(e)?ur(e):Array.isArray(e)?e:ur(document.querySelectorAll(e))}function oa(e,t){e.forEach(function(i){i&&(i.style.transitionDuration=t+"ms")})}function Th(e,t){e.forEach(function(i){i&&i.setAttribute("data-state",t)})}function Ab(e){var t,i=Ui(e),n=i[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function Cb(e,t){var i=t.clientX,n=t.clientY;return e.every(function(s){var r=s.popperRect,o=s.popperState,a=s.props,l=a.interactiveBorder,c=xb(o.placement),h=o.modifiersData.offset;if(!h)return!0;var d=c==="bottom"?h.top.y:0,u=c==="top"?h.bottom.y:0,f=c==="right"?h.left.x:0,g=c==="left"?h.right.x:0,m=r.top-n+d>l,b=n-r.bottom-u>l,v=r.left-i+f>l,x=i-r.right-g>l;return m||b||v||x})}function aa(e,t,i){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){e[n](s,i)})}function Mh(e,t){for(var i=t;i;){var n;if(e.contains(i))return!0;i=i.getRootNode==null||(n=i.getRootNode())==null?void 0:n.host}return!1}var de={isTouch:!1},Oh=0;function Eb(){de.isTouch||(de.isTouch=!0,window.performance&&document.addEventListener("mousemove",Vh))}function Vh(){var e=performance.now();e-Oh<20&&(de.isTouch=!1,document.removeEventListener("mousemove",Vh)),Oh=e}function Pb(){var e=document.activeElement;if(Sb(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Tb(){document.addEventListener("touchstart",Eb,ui),window.addEventListener("blur",Pb)}var Mb=typeof window<"u"&&typeof document<"u",Ob=Mb?!!window.msCrypto:!1;var Db={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Lb={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Zt=Object.assign({appendTo:Hh,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Db,Lb),Rb=Object.keys(Zt),Ib=function(t){var i=Object.keys(t);i.forEach(function(n){Zt[n]=t[n]})};function zh(e){var t=e.plugins||[],i=t.reduce(function(n,s){var r=s.name,o=s.defaultValue;if(r){var a;n[r]=e[r]!==void 0?e[r]:(a=Zt[r])!=null?a:o}return n},{});return Object.assign({},e,i)}function Fb(e,t){var i=t?Object.keys(zh(Object.assign({},Zt,{plugins:t}))):Rb,n=i.reduce(function(s,r){var o=(e.getAttribute("data-tippy-"+r)||"").trim();if(!o)return s;if(r==="content")s[r]=o;else try{s[r]=JSON.parse(o)}catch{s[r]=o}return s},{});return n}function Dh(e,t){var i=Object.assign({},t,{content:jh(t.content,[e])},t.ignoreAttributes?{}:Fb(e,t.plugins));return i.aria=Object.assign({},Zt.aria,i.aria),i.aria={expanded:i.aria.expanded==="auto"?t.interactive:i.aria.expanded,content:i.aria.content==="auto"?t.interactive?null:"describedby":i.aria.content},i}var Nb=function(){return"innerHTML"};function ca(e,t){e[Nb()]=t}function Lh(e){var t=Xn();return e===!0?t.className=Nh:(t.className=Bh,fr(e)?t.appendChild(e):ca(t,e)),t}function Rh(e,t){fr(t.content)?(ca(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?ca(e,t.content):e.textContent=t.content)}function ha(e){var t=e.firstElementChild,i=ur(t.children);return{box:t,content:i.find(function(n){return n.classList.contains(Fh)}),arrow:i.find(function(n){return n.classList.contains(Nh)||n.classList.contains(Bh)}),backdrop:i.find(function(n){return n.classList.contains(bb)})}}function Wh(e){var t=Xn(),i=Xn();i.className=mb,i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var n=Xn();n.className=Fh,n.setAttribute("data-state","hidden"),Rh(n,e.props),t.appendChild(i),i.appendChild(n),s(e.props,e.props);function s(r,o){var a=ha(t),l=a.box,c=a.content,h=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(r.content!==o.content||r.allowHTML!==o.allowHTML)&&Rh(c,e.props),o.arrow?h?r.arrow!==o.arrow&&(l.removeChild(h),l.appendChild(Lh(o.arrow))):l.appendChild(Lh(o.arrow)):h&&l.removeChild(h)}return{popper:t,onUpdate:s}}Wh.$$tippy=!0;var Bb=1,dr=[],la=[];function Hb(e,t){var i=Dh(e,Object.assign({},Zt,zh(Ph(t)))),n,s,r,o=!1,a=!1,l=!1,c=!1,h,d,u,f=[],g=Ch(Jn,i.interactiveDebounce),m,b=Bb++,v=null,x=yb(i.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:b,reference:e,popper:Xn(),popperInstance:v,props:i,state:w,plugins:x,clearDelayTimeouts:ts,setProps:es,setContent:is,show:Yh,hide:qh,hideWithInteractivity:Jh,enable:Gi,disable:Qn,unmount:Kh,destroy:Gh};if(!i.render)return p;var y=i.render(p),_=y.popper,A=y.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+p.id,p.popper=_,e._tippy=p,_._tippy=p;var C=x.map(function(k){return k.fn(p)}),E=e.hasAttribute("aria-expanded");return fi(),I(),T(),O("onCreate",[p]),i.showOnCreate&&Ki(),_.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),_.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&X().addEventListener("mousemove",g)}),p;function M(){var k=p.props.touch;return Array.isArray(k)?k:[k,0]}function P(){return M()[0]==="hold"}function L(){var k;return!!((k=p.props.render)!=null&&k.$$tippy)}function H(){return m||e}function X(){var k=H().parentNode;return k?Ab(k):document}function j(){return ha(_)}function B(k){return p.state.isMounted&&!p.state.isVisible||de.isTouch||h&&h.type==="focus"?0:ra(p.props.delay,k?0:1,Zt.delay)}function T(k){k===void 0&&(k=!1),_.style.pointerEvents=p.props.interactive&&!k?"":"none",_.style.zIndex=""+p.props.zIndex}function O(k,R,N){if(N===void 0&&(N=!0),C.forEach(function(U){U[k]&&U[k].apply(U,R)}),N){var q;(q=p.props)[k].apply(q,R)}}function F(){var k=p.props.aria;if(!!k.content){var R="aria-"+k.content,N=_.id,q=Ui(p.props.triggerTarget||e);q.forEach(function(U){var kt=U.getAttribute(R);if(p.state.isVisible)U.setAttribute(R,kt?kt+" "+N:N);else{var Ft=kt&&kt.replace(N,"").trim();Ft?U.setAttribute(R,Ft):U.removeAttribute(R)}})}}function I(){if(!(E||!p.props.aria.expanded)){var k=Ui(p.props.triggerTarget||e);k.forEach(function(R){p.props.interactive?R.setAttribute("aria-expanded",p.state.isVisible&&R===H()?"true":"false"):R.removeAttribute("aria-expanded")})}}function W(){X().removeEventListener("mousemove",g),dr=dr.filter(function(k){return k!==g})}function Q(k){if(!(de.isTouch&&(l||k.type==="mousedown"))){var R=k.composedPath&&k.composedPath()[0]||k.target;if(!(p.props.interactive&&Mh(_,R))){if(Ui(p.props.triggerTarget||e).some(function(N){return Mh(N,R)})){if(de.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else O("onClickOutside",[p,k]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),a=!0,setTimeout(function(){a=!1}),p.state.isMounted||tt())}}}function rt(){l=!0}function ot(){l=!1}function at(){var k=X();k.addEventListener("mousedown",Q,!0),k.addEventListener("touchend",Q,ui),k.addEventListener("touchstart",ot,ui),k.addEventListener("touchmove",rt,ui)}function tt(){var k=X();k.removeEventListener("mousedown",Q,!0),k.removeEventListener("touchend",Q,ui),k.removeEventListener("touchstart",ot,ui),k.removeEventListener("touchmove",rt,ui)}function Ut(k,R){Qt(k,function(){!p.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&R()})}function gt(k,R){Qt(k,R)}function Qt(k,R){var N=j().box;function q(U){U.target===N&&(aa(N,"remove",q),R())}if(k===0)return R();aa(N,"remove",d),aa(N,"add",q),d=q}function Xt(k,R,N){N===void 0&&(N=!1);var q=Ui(p.props.triggerTarget||e);q.forEach(function(U){U.addEventListener(k,R,N),f.push({node:U,eventType:k,handler:R,options:N})})}function fi(){P()&&(Xt("touchstart",Yi,{passive:!0}),Xt("touchend",Kn,{passive:!0})),vb(p.props.trigger).forEach(function(k){if(k!=="manual")switch(Xt(k,Yi),k){case"mouseenter":Xt("mouseleave",Kn);break;case"focus":Xt(Ob?"focusout":"blur",qi);break;case"focusin":Xt("focusout",qi);break}})}function qn(){f.forEach(function(k){var R=k.node,N=k.eventType,q=k.handler,U=k.options;R.removeEventListener(N,q,U)}),f=[]}function Yi(k){var R,N=!1;if(!(!p.state.isEnabled||Ji(k)||a)){var q=((R=h)==null?void 0:R.type)==="focus";h=k,m=k.currentTarget,I(),!p.state.isVisible&&wb(k)&&dr.forEach(function(U){return U(k)}),k.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||o)&&p.props.hideOnClick!==!1&&p.state.isVisible?N=!0:Ki(k),k.type==="click"&&(o=!N),N&&!q&&We(k)}}function Jn(k){var R=k.target,N=H().contains(R)||_.contains(R);if(!(k.type==="mousemove"&&N)){var q=Ce().concat(_).map(function(U){var kt,Ft=U._tippy,pi=(kt=Ft.popperInstance)==null?void 0:kt.state;return pi?{popperRect:U.getBoundingClientRect(),popperState:pi,props:i}:null}).filter(Boolean);Cb(q,k)&&(W(),We(k))}}function Kn(k){var R=Ji(k)||p.props.trigger.indexOf("click")>=0&&o;if(!R){if(p.props.interactive){p.hideWithInteractivity(k);return}We(k)}}function qi(k){p.props.trigger.indexOf("focusin")<0&&k.target!==H()||p.props.interactive&&k.relatedTarget&&_.contains(k.relatedTarget)||We(k)}function Ji(k){return de.isTouch?P()!==k.type.indexOf("touch")>=0:!1}function Gn(){Zn();var k=p.props,R=k.popperOptions,N=k.placement,q=k.offset,U=k.getReferenceClientRect,kt=k.moveTransition,Ft=L()?ha(_).arrow:null,pi=U?{getBoundingClientRect:U,contextElement:U.contextElement||H()}:e,ua={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ns){var gi=ns.state;if(L()){var Zh=j(),vr=Zh.box;["placement","reference-hidden","escaped"].forEach(function(ss){ss==="placement"?vr.setAttribute("data-placement",gi.placement):gi.attributes.popper["data-popper-"+ss]?vr.setAttribute("data-"+ss,""):vr.removeAttribute("data-"+ss)}),gi.attributes.popper={}}}},$e=[{name:"offset",options:{offset:q}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!kt}},ua];L()&&Ft&&$e.push({name:"arrow",options:{element:Ft,padding:3}}),$e.push.apply($e,R?.modifiers||[]),p.popperInstance=sa(pi,_,Object.assign({},R,{placement:N,onFirstUpdate:u,modifiers:$e}))}function Zn(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function ue(){var k=p.props.appendTo,R,N=H();p.props.interactive&&k===Hh||k==="parent"?R=N.parentNode:R=jh(k,[N]),R.contains(_)||R.appendChild(_),p.state.isMounted=!0,Gn()}function Ce(){return ur(_.querySelectorAll("[data-tippy-root]"))}function Ki(k){p.clearDelayTimeouts(),k&&O("onTrigger",[p,k]),at();var R=B(!0),N=M(),q=N[0],U=N[1];de.isTouch&&q==="hold"&&U&&(R=U),R?n=setTimeout(function(){p.show()},R):p.show()}function We(k){if(p.clearDelayTimeouts(),O("onUntrigger",[p,k]),!p.state.isVisible){tt();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(k.type)>=0&&o)){var R=B(!1);R?s=setTimeout(function(){p.state.isVisible&&p.hide()},R):r=requestAnimationFrame(function(){p.hide()})}}function Gi(){p.state.isEnabled=!0}function Qn(){p.hide(),p.state.isEnabled=!1}function ts(){clearTimeout(n),clearTimeout(s),cancelAnimationFrame(r)}function es(k){if(!p.state.isDestroyed){O("onBeforeUpdate",[p,k]),qn();var R=p.props,N=Dh(e,Object.assign({},R,Ph(k),{ignoreAttributes:!0}));p.props=N,fi(),R.interactiveDebounce!==N.interactiveDebounce&&(W(),g=Ch(Jn,N.interactiveDebounce)),R.triggerTarget&&!N.triggerTarget?Ui(R.triggerTarget).forEach(function(q){q.removeAttribute("aria-expanded")}):N.triggerTarget&&e.removeAttribute("aria-expanded"),I(),T(),A&&A(R,N),p.popperInstance&&(Gn(),Ce().forEach(function(q){requestAnimationFrame(q._tippy.popperInstance.forceUpdate)})),O("onAfterUpdate",[p,k])}}function is(k){p.setProps({content:k})}function Yh(){var k=p.state.isVisible,R=p.state.isDestroyed,N=!p.state.isEnabled,q=de.isTouch&&!p.props.touch,U=ra(p.props.duration,0,Zt.duration);if(!(k||R||N||q)&&!H().hasAttribute("disabled")&&(O("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,L()&&(_.style.visibility="visible"),T(),at(),p.state.isMounted||(_.style.transition="none"),L()){var kt=j(),Ft=kt.box,pi=kt.content;oa([Ft,pi],0)}u=function(){var $e;if(!(!p.state.isVisible||c)){if(c=!0,_.offsetHeight,_.style.transition=p.props.moveTransition,L()&&p.props.animation){var br=j(),ns=br.box,gi=br.content;oa([ns,gi],U),Th([ns,gi],"visible")}F(),I(),Eh(la,p),($e=p.popperInstance)==null||$e.forceUpdate(),O("onMount",[p]),p.props.animation&&L()&&gt(U,function(){p.state.isShown=!0,O("onShown",[p])})}},ue()}}function qh(){var k=!p.state.isVisible,R=p.state.isDestroyed,N=!p.state.isEnabled,q=ra(p.props.duration,1,Zt.duration);if(!(k||R||N)&&(O("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,c=!1,o=!1,L()&&(_.style.visibility="hidden"),W(),tt(),T(!0),L()){var U=j(),kt=U.box,Ft=U.content;p.props.animation&&(oa([kt,Ft],q),Th([kt,Ft],"hidden"))}F(),I(),p.props.animation?L()&&Ut(q,p.unmount):p.unmount()}}function Jh(k){X().addEventListener("mousemove",g),Eh(dr,g),g(k)}function Kh(){p.state.isVisible&&p.hide(),p.state.isMounted&&(Zn(),Ce().forEach(function(k){k._tippy.unmount()}),_.parentNode&&_.parentNode.removeChild(_),la=la.filter(function(k){return k!==p}),p.state.isMounted=!1,O("onHidden",[p]))}function Gh(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),qn(),delete e._tippy,p.state.isDestroyed=!0,O("onDestroy",[p]))}}function Yn(e,t){t===void 0&&(t={});var i=Zt.plugins.concat(t.plugins||[]);Tb();var n=Object.assign({},t,{plugins:i}),s=kb(e);if(!1)var r,o;var a=s.reduce(function(l,c){var h=c&&Hb(c,n);return h&&l.push(h),l},[]);return fr(e)?a[0]:a}Yn.defaultProps=Zt;Yn.setDefaultProps=Ib;Yn.currentInput=de;var p0=Object.assign({},Hn,{effect:function(t){var i=t.state,n={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,n.popper),i.styles=n,i.elements.arrow&&Object.assign(i.elements.arrow.style,n.arrow)}});Yn.setDefaultProps({render:Wh});var $h=Yn;var mr=ad(Xh());js.defaults.font.size=12;js.defaults.font.family="Inter var";var gr;mr.default.config({barColors:{0:"#0284c7"},shadowColor:"rgba(0, 0, 0, .3)"});window.addEventListener("phx:page-loading-start",e=>{gr||(gr=setTimeout(()=>mr.default.show(),500))});window.addEventListener("phx:page-loading-stop",e=>{clearTimeout(gr),gr=void 0,mr.default.hide()});var Xi={};Xi.Refresher={mounted(){let e="#refresh-selector",t=this;document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?t.pushEventTo(e,"resume-refresh",{}):t.pushEventTo(e,"pause-refresh",{})}),"refresh"in localStorage&&t.pushEventTo(e,"select-refresh",{value:localStorage.refresh}),this.el.querySelectorAll("[role='option']").forEach(i=>{i.addEventListener("click",()=>{localStorage.refresh=i.getAttribute("value")})})}};Xi.RestoreTheme={mounted(){this.pushEventTo("#theme-selector","restore",{theme:localStorage.theme})}};Xi.ChangeTheme={applyTheme(){let e=window.matchMedia("(prefers-color-scheme: dark)").matches,t=!("theme"in localStorage);localStorage.theme==="dark"||localStorage.theme==="system"&&e||t&&e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},mounted(){let e=this;this.el.addEventListener("click",()=>{let t=this.el.getAttribute("value");localStorage.theme=t,this.applyTheme(),e.pushEventTo("#theme-selector","restore",{theme:t})})}};Xi.Tippy={mounted(){let e=this.el.getAttribute("data-title");$h(this.el,{arrow:Ih,content:e,delay:[250,null]})}};var jb={maintainAspectRatio:!1,interaction:{mode:"index"},plugins:{legend:{display:!1}},scales:{x:{stacked:!0,grid:{display:!1}},y:{stacked:!0}}};Xi.Chart={mounted(){let e=new Date,t={labels:[...Array(100).keys()].map(n=>(e=new Date(e.getTime()-n*1e3),e.toLocaleTimeString("en-US",{hour12:!1,timeStyle:"short"}))),datasets:[{label:"completed",data:[],barThickness:9,borderColor:"#22d3ee",backgroundColor:"#22d3ee"},{label:"cancelled",data:[],barThickness:9,borderColor:"#a78bfa",backgroundColor:"#a78bfa"},{label:"discarded",data:[],barThickness:9,borderColor:"#fb7185",backgroundColor:"#fb7185"},{label:"retryable",data:[],barThickness:9,borderColor:"#facc15",backgroundColor:"#facc15"},{label:"scheduled",data:[],barThickness:9,borderColor:"#4ade80",backgroundColor:"#4ade80"}]},i=new js(this.el,{type:"bar",options:jb,data:t});this.handleEvent("chart-update",({points:n})=>{i.data.datasets.forEach(s=>{let r=[n[s.label]].flat();s.data.splice(0,r.length),s.data.push(...r)}),i.update()})}};var Vb=document.querySelector("meta[name='csrf-token']").getAttribute("content"),zb=document.querySelector("meta[name='live-transport']").getAttribute("content"),Wb=document.querySelector("meta[name='live-path']").getAttribute("content"),$b=new rh(Wb,Cc,{transport:zb==="longpoll"?Pn:WebSocket,params:{_csrf_token:Vb},hooks:Xi});$b.connect();})();
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */
/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
/**
 * @license MIT
 * topbar 1.0.0, 2021-01-06
 * http://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90b3BiYXIvdG9wYmFyLm1pbi5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfaHRtbC9wcml2L3N0YXRpYy9waG9lbml4X2h0bWwuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9Aa3Vya2xlL2NvbG9yL2Rpc3QvY29sb3IuZXNtLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2hlbHBlcnMvaGVscGVycy5jb3JlLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2hlbHBlcnMvaGVscGVycy5tYXRoLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2hlbHBlcnMvaGVscGVycy5jb2xsZWN0aW9uLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2hlbHBlcnMvaGVscGVycy5leHRyYXMudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvaGVscGVycy9oZWxwZXJzLmVhc2luZy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9oZWxwZXJzL2hlbHBlcnMuY29sb3IudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmFuaW1hdGlvbnMuZGVmYXVsdHMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmxheW91dHMuZGVmYXVsdHMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvaGVscGVycy9oZWxwZXJzLmludGwudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLnRpY2tzLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvcmUvY29yZS5zY2FsZS5kZWZhdWx0cy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9jb3JlL2NvcmUuZGVmYXVsdHMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvaGVscGVycy9oZWxwZXJzLmNhbnZhcy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9oZWxwZXJzL2hlbHBlcnMub3B0aW9ucy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9oZWxwZXJzL2hlbHBlcnMuY29uZmlnLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2hlbHBlcnMvaGVscGVycy5jdXJ2ZS50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9oZWxwZXJzL2hlbHBlcnMuZG9tLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2hlbHBlcnMvaGVscGVycy5pbnRlcnBvbGF0aW9uLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2hlbHBlcnMvaGVscGVycy5ydGwudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvaGVscGVycy9oZWxwZXJzLnNlZ21lbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmFuaW1hdG9yLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvcmUvY29yZS5hbmltYXRpb24uanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmFuaW1hdGlvbnMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmRhdGFzZXRDb250cm9sbGVyLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXIuYmFyLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXIuYnViYmxlLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXIuZG91Z2hudXQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29udHJvbGxlcnMvY29udHJvbGxlci5saW5lLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXIucG9sYXJBcmVhLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXIucGllLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvbnRyb2xsZXJzL2NvbnRyb2xsZXIucmFkYXIuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29udHJvbGxlcnMvY29udHJvbGxlci5zY2F0dGVyLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvcmUvY29yZS5hZGFwdGVycy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9jb3JlL2NvcmUuaW50ZXJhY3Rpb24uanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmxheW91dHMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGxhdGZvcm0vcGxhdGZvcm0uYmFzZS5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9wbGF0Zm9ybS9wbGF0Zm9ybS5iYXNpYy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9wbGF0Zm9ybS9wbGF0Zm9ybS5kb20uanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGxhdGZvcm0vaW5kZXguanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmVsZW1lbnQudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLnNjYWxlLmF1dG9za2lwLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL2NvcmUvY29yZS5zY2FsZS5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9jb3JlL2NvcmUudHlwZWRSZWdpc3RyeS5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9jb3JlL2NvcmUucmVnaXN0cnkuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLnBsdWdpbnMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvY29yZS9jb3JlLmNvbmZpZy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9jb3JlL2NvcmUuY29udHJvbGxlci5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9lbGVtZW50cy9lbGVtZW50LmFyYy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9lbGVtZW50cy9lbGVtZW50LmxpbmUuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvZWxlbWVudHMvZWxlbWVudC5wb2ludC50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9lbGVtZW50cy9lbGVtZW50LmJhci5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9wbHVnaW5zL3BsdWdpbi5jb2xvcnMudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4uZGVjaW1hdGlvbi5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9wbHVnaW5zL3BsdWdpbi5maWxsZXIvZmlsbGVyLnNlZ21lbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4uZmlsbGVyL2ZpbGxlci5oZWxwZXIuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4uZmlsbGVyL2ZpbGxlci5vcHRpb25zLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL3BsdWdpbnMvcGx1Z2luLmZpbGxlci9maWxsZXIudGFyZ2V0LnN0YWNrLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL3BsdWdpbnMvcGx1Z2luLmZpbGxlci9zaW1wbGVBcmMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4uZmlsbGVyL2ZpbGxlci50YXJnZXQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4uZmlsbGVyL2ZpbGxlci5kcmF3aW5nLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvY2hhcnQuanMvc3JjL3BsdWdpbnMvcGx1Z2luLmZpbGxlci9pbmRleC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9wbHVnaW5zL3BsdWdpbi5sZWdlbmQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4udGl0bGUuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4uc3VidGl0bGUuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvcGx1Z2lucy9wbHVnaW4udG9vbHRpcC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9zY2FsZXMvc2NhbGUuY2F0ZWdvcnkuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvc2NhbGVzL3NjYWxlLmxpbmVhcmJhc2UuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvc2NhbGVzL3NjYWxlLmxpbmVhci5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9zY2FsZXMvc2NhbGUubG9nYXJpdGhtaWMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9jaGFydC5qcy9zcmMvc2NhbGVzL3NjYWxlLnJhZGlhbExpbmVhci5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9zY2FsZXMvc2NhbGUudGltZS5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9zY2FsZXMvc2NhbGUudGltZXNlcmllcy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL3NyYy9pbmRleC50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL2NoYXJ0LmpzL2F1dG8vYXV0by5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvdXRpbHMuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2NvbnN0YW50cy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvcHVzaC5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvdGltZXIuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2NoYW5uZWwuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2FqYXguanMiLCAiLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L2xvbmdwb2xsLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9wcmVzZW5jZS5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvc2VyaWFsaXplci5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvc29ja2V0LmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2NvbnN0YW50cy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9lbnRyeV91cGxvYWRlci5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy91dGlscy5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9icm93c2VyLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbS5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy91cGxvYWRfZW50cnkuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvbGl2ZV91cGxvYWRlci5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9hcmlhLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2hvb2tzLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbV9wb3N0X21vcnBoX3Jlc3RvcmVyLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL25vZGVfbW9kdWxlcy9tb3JwaGRvbS9kaXN0L21vcnBoZG9tLWVzbS5qcyIsICIuLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9kb21fcGF0Y2guanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvcmVuZGVyZWQuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdmlld19ob29rLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2pzLmpzIiwgIi4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3ZpZXcuanMiLCAiLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvbGl2ZV9zb2NrZXQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZW51bXMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldE5vZGVOYW1lLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3cuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2luc3RhbmNlT2YuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2FwcGx5U3R5bGVzLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWF0aC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy91c2VyQWdlbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2lzTGF5b3V0Vmlld3BvcnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvY29udGFpbnMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2lzVGFibGVFbGVtZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXREb2N1bWVudEVsZW1lbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFBhcmVudE5vZGUuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvd2l0aGluLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldEZyZXNoU2lkZU9iamVjdC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9tZXJnZVBhZGRpbmdPYmplY3QuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZXhwYW5kVG9IYXNoTWFwLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9hcnJvdy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRWYXJpYXRpb24uanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2NvbXB1dGVTdHlsZXMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2V2ZW50TGlzdGVuZXJzLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldE9wcG9zaXRlUGxhY2VtZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3dTY3JvbGwuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFdpbmRvd1Njcm9sbEJhclguanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFZpZXdwb3J0UmVjdC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRSZWN0LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc1Njcm9sbFBhcmVudC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0U2Nyb2xsUGFyZW50LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9saXN0U2Nyb2xsUGFyZW50cy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9yZWN0VG9DbGllbnRSZWN0LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDbGlwcGluZ1JlY3QuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvY29tcHV0ZU9mZnNldHMuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2ZsaXAuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2hpZGUuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL29mZnNldC5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvcG9wcGVyT2Zmc2V0cy5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRBbHRBeGlzLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldEhUTUxFbGVtZW50U2Nyb2xsLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXROb2RlU2Nyb2xsLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDb21wb3NpdGVSZWN0LmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL29yZGVyTW9kaWZpZXJzLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RlYm91bmNlLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL21lcmdlQnlOYW1lLmpzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2NyZWF0ZVBvcHBlci5qcyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9wb3BwZXIuanMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvY29uc3RhbnRzLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL3V0aWxzLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL2RvbS11dGlscy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9iaW5kR2xvYmFsRXZlbnRMaXN0ZW5lcnMudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvYnJvd3Nlci50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy92YWxpZGF0aW9uLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL3Byb3BzLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL3RlbXBsYXRlLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL2NyZWF0ZVRpcHB5LnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL2luZGV4LnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL2FkZG9ucy9jcmVhdGVTaW5nbGV0b24udHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvYWRkb25zL2RlbGVnYXRlLnRzIiwgIi4uLy4uL2Fzc2V0cy9ub2RlX21vZHVsZXMvdGlwcHkuanMvc3JjL3BsdWdpbnMvYW5pbWF0ZUZpbGwudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvcGx1Z2lucy9mb2xsb3dDdXJzb3IudHMiLCAiLi4vLi4vYXNzZXRzL25vZGVfbW9kdWxlcy90aXBweS5qcy9zcmMvcGx1Z2lucy9pbmxpbmVQb3NpdGlvbmluZy50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL3NyYy9wbHVnaW5zL3N0aWNreS50cyIsICIuLi8uLi9hc3NldHMvbm9kZV9tb2R1bGVzL3RpcHB5LmpzL2J1aWxkL2Jhc2UuanMiLCAiLi4vLi4vYXNzZXRzL2pzL2FwcC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBAbGljZW5zZSBNSVRcbiAqIHRvcGJhciAxLjAuMCwgMjAyMS0wMS0wNlxuICogaHR0cDovL2J1dW5ndXllbi5naXRodWIuaW8vdG9wYmFyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgQnV1IE5ndXllblxuICovXG4oZnVuY3Rpb24od2luZG93LGRvY3VtZW50KXtcInVzZSBzdHJpY3RcIjshZnVuY3Rpb24oKXtmb3IodmFyIGxhc3RUaW1lPTAsdmVuZG9ycz1bXCJtc1wiLFwibW96XCIsXCJ3ZWJraXRcIixcIm9cIl0seD0wO3g8dmVuZG9ycy5sZW5ndGgmJiF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOysreCl3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPXdpbmRvd1t2ZW5kb3JzW3hdK1wiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT13aW5kb3dbdmVuZG9yc1t4XStcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdfHx3aW5kb3dbdmVuZG9yc1t4XStcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiXTt3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbihjYWxsYmFjayxlbGVtZW50KXt2YXIgY3VyclRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCksdGltZVRvQ2FsbD1NYXRoLm1heCgwLDE2LShjdXJyVGltZS1sYXN0VGltZSkpLGlkPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2FsbGJhY2soY3VyclRpbWUrdGltZVRvQ2FsbCl9LHRpbWVUb0NhbGwpO3JldHVybiBsYXN0VGltZT1jdXJyVGltZSt0aW1lVG9DYWxsLGlkfSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGlkKXtjbGVhclRpbWVvdXQoaWQpfSl9KCk7ZnVuY3Rpb24gcmVwYWludCgpe2NhbnZhcy53aWR0aD13aW5kb3cuaW5uZXJXaWR0aCxjYW52YXMuaGVpZ2h0PTUqb3B0aW9ucy5iYXJUaGlja25lc3M7dmFyIGN0eD1jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO2N0eC5zaGFkb3dCbHVyPW9wdGlvbnMuc2hhZG93Qmx1cixjdHguc2hhZG93Q29sb3I9b3B0aW9ucy5zaGFkb3dDb2xvcjt2YXIgc3RvcCxsaW5lR3JhZGllbnQ9Y3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsMCxjYW52YXMud2lkdGgsMCk7Zm9yKHN0b3AgaW4gb3B0aW9ucy5iYXJDb2xvcnMpbGluZUdyYWRpZW50LmFkZENvbG9yU3RvcChzdG9wLG9wdGlvbnMuYmFyQ29sb3JzW3N0b3BdKTtjdHgubGluZVdpZHRoPW9wdGlvbnMuYmFyVGhpY2tuZXNzLGN0eC5iZWdpblBhdGgoKSxjdHgubW92ZVRvKDAsb3B0aW9ucy5iYXJUaGlja25lc3MvMiksY3R4LmxpbmVUbyhNYXRoLmNlaWwoY3VycmVudFByb2dyZXNzKmNhbnZhcy53aWR0aCksb3B0aW9ucy5iYXJUaGlja25lc3MvMiksY3R4LnN0cm9rZVN0eWxlPWxpbmVHcmFkaWVudCxjdHguc3Ryb2tlKCl9dmFyIGNhbnZhcyxwcm9ncmVzc1RpbWVySWQsZmFkZVRpbWVySWQsY3VycmVudFByb2dyZXNzLHNob3dpbmcsb3B0aW9ucz17YXV0b1J1bjohMCxiYXJUaGlja25lc3M6MyxiYXJDb2xvcnM6ezA6XCJyZ2JhKDI2LCAgMTg4LCAxNTYsIC45KVwiLFwiLjI1XCI6XCJyZ2JhKDUyLCAgMTUyLCAyMTksIC45KVwiLFwiLjUwXCI6XCJyZ2JhKDI0MSwgMTk2LCAxNSwgIC45KVwiLFwiLjc1XCI6XCJyZ2JhKDIzMCwgMTI2LCAzNCwgIC45KVwiLFwiMS4wXCI6XCJyZ2JhKDIxMSwgODQsICAwLCAgIC45KVwifSxzaGFkb3dCbHVyOjEwLHNoYWRvd0NvbG9yOlwicmdiYSgwLCAgIDAsICAgMCwgICAuNilcIixjbGFzc05hbWU6bnVsbH0sdG9wYmFyPXtjb25maWc6ZnVuY3Rpb24ob3B0cyl7Zm9yKHZhciBrZXkgaW4gb3B0cylvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkmJihvcHRpb25zW2tleV09b3B0c1trZXldKX0sc2hvdzpmdW5jdGlvbigpe3ZhciB0eXBlLGhhbmRsZXIsZWxlbTtzaG93aW5nfHwoc2hvd2luZz0hMCxudWxsIT09ZmFkZVRpbWVySWQmJndpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShmYWRlVGltZXJJZCksY2FudmFzfHwoKGVsZW09KGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKS5zdHlsZSkucG9zaXRpb249XCJmaXhlZFwiLGVsZW0udG9wPWVsZW0ubGVmdD1lbGVtLnJpZ2h0PWVsZW0ubWFyZ2luPWVsZW0ucGFkZGluZz0wLGVsZW0uekluZGV4PTEwMDAwMSxlbGVtLmRpc3BsYXk9XCJub25lXCIsb3B0aW9ucy5jbGFzc05hbWUmJmNhbnZhcy5jbGFzc0xpc3QuYWRkKG9wdGlvbnMuY2xhc3NOYW1lKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyksdHlwZT1cInJlc2l6ZVwiLGhhbmRsZXI9cmVwYWludCwoZWxlbT13aW5kb3cpLmFkZEV2ZW50TGlzdGVuZXI/ZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsaGFuZGxlciwhMSk6ZWxlbS5hdHRhY2hFdmVudD9lbGVtLmF0dGFjaEV2ZW50KFwib25cIit0eXBlLGhhbmRsZXIpOmVsZW1bXCJvblwiK3R5cGVdPWhhbmRsZXIpLGNhbnZhcy5zdHlsZS5vcGFjaXR5PTEsY2FudmFzLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRvcGJhci5wcm9ncmVzcygwKSxvcHRpb25zLmF1dG9SdW4mJmZ1bmN0aW9uIGxvb3AoKXtwcm9ncmVzc1RpbWVySWQ9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKSx0b3BiYXIucHJvZ3Jlc3MoXCIrXCIrLjA1Kk1hdGgucG93KDEtTWF0aC5zcXJ0KGN1cnJlbnRQcm9ncmVzcyksMikpfSgpKX0scHJvZ3Jlc3M6ZnVuY3Rpb24odG8pe3JldHVybiB2b2lkIDA9PT10b3x8KFwic3RyaW5nXCI9PXR5cGVvZiB0byYmKHRvPSgwPD10by5pbmRleE9mKFwiK1wiKXx8MDw9dG8uaW5kZXhPZihcIi1cIik/Y3VycmVudFByb2dyZXNzOjApK3BhcnNlRmxvYXQodG8pKSxjdXJyZW50UHJvZ3Jlc3M9MTx0bz8xOnRvLHJlcGFpbnQoKSksY3VycmVudFByb2dyZXNzfSxoaWRlOmZ1bmN0aW9uKCl7c2hvd2luZyYmKHNob3dpbmc9ITEsbnVsbCE9cHJvZ3Jlc3NUaW1lcklkJiYod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHByb2dyZXNzVGltZXJJZCkscHJvZ3Jlc3NUaW1lcklkPW51bGwpLGZ1bmN0aW9uIGxvb3AoKXtyZXR1cm4gMTw9dG9wYmFyLnByb2dyZXNzKFwiKy4xXCIpJiYoY2FudmFzLnN0eWxlLm9wYWNpdHktPS4wNSxjYW52YXMuc3R5bGUub3BhY2l0eTw9LjA1KT8oY2FudmFzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdm9pZChmYWRlVGltZXJJZD1udWxsKSk6dm9pZChmYWRlVGltZXJJZD13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApKX0oKSl9fTtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dG9wYmFyOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gdG9wYmFyfSk6dGhpcy50b3BiYXI9dG9wYmFyfSkuY2FsbCh0aGlzLHdpbmRvdyxkb2N1bWVudCk7IiwgIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBQb2x5ZmlsbEV2ZW50ID0gZXZlbnRDb25zdHJ1Y3RvcigpO1xuXG4gIGZ1bmN0aW9uIGV2ZW50Q29uc3RydWN0b3IoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHdpbmRvdy5DdXN0b21FdmVudDtcbiAgICAvLyBJRTw9OSBTdXBwb3J0XG4gICAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcykge1xuICAgICAgcGFyYW1zID0gcGFyYW1zIHx8IHtidWJibGVzOiBmYWxzZSwgY2FuY2VsYWJsZTogZmFsc2UsIGRldGFpbDogdW5kZWZpbmVkfTtcbiAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gICAgICByZXR1cm4gZXZ0O1xuICAgIH1cbiAgICBDdXN0b21FdmVudC5wcm90b3R5cGUgPSB3aW5kb3cuRXZlbnQucHJvdG90eXBlO1xuICAgIHJldHVybiBDdXN0b21FdmVudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkSGlkZGVuSW5wdXQobmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgaW5wdXQubmFtZSA9IG5hbWU7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVDbGljayhlbGVtZW50LCB0YXJnZXRNb2RpZmllcktleSkge1xuICAgIHZhciB0byA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b1wiKSxcbiAgICAgICAgbWV0aG9kID0gYnVpbGRIaWRkZW5JbnB1dChcIl9tZXRob2RcIiwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSksXG4gICAgICAgIGNzcmYgPSBidWlsZEhpZGRlbklucHV0KFwiX2NzcmZfdG9rZW5cIiwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNzcmZcIikpLFxuICAgICAgICBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIiksXG4gICAgICAgIHN1Ym1pdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcbiAgICAgICAgdGFyZ2V0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIik7XG5cbiAgICBmb3JtLm1ldGhvZCA9IChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpID09PSBcImdldFwiKSA/IFwiZ2V0XCIgOiBcInBvc3RcIjtcbiAgICBmb3JtLmFjdGlvbiA9IHRvO1xuICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgaWYgKHRhcmdldCkgZm9ybS50YXJnZXQgPSB0YXJnZXQ7XG4gICAgZWxzZSBpZiAodGFyZ2V0TW9kaWZpZXJLZXkpIGZvcm0udGFyZ2V0ID0gXCJfYmxhbmtcIjtcblxuICAgIGZvcm0uYXBwZW5kQ2hpbGQoY3NyZik7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChtZXRob2QpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAvLyBJbnNlcnQgYSBidXR0b24gYW5kIGNsaWNrIGl0IGluc3RlYWQgb2YgdXNpbmcgYGZvcm0uc3VibWl0YFxuICAgIC8vIGJlY2F1c2UgdGhlIGBzdWJtaXRgIGZ1bmN0aW9uIGRvZXMgbm90IGVtaXQgYSBgc3VibWl0YCBldmVudC5cbiAgICBzdWJtaXQudHlwZSA9IFwic3VibWl0XCI7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xuICAgIHN1Ym1pdC5jbGljaygpO1xuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cbiAgICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuICAgICAgdmFyIHBob2VuaXhMaW5rRXZlbnQgPSBuZXcgUG9seWZpbGxFdmVudCgncGhvZW5peC5saW5rLmNsaWNrJywge1xuICAgICAgICBcImJ1YmJsZXNcIjogdHJ1ZSwgXCJjYW5jZWxhYmxlXCI6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWVsZW1lbnQuZGlzcGF0Y2hFdmVudChwaG9lbml4TGlua0V2ZW50KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikpIHtcbiAgICAgICAgaGFuZGxlQ2xpY2soZWxlbWVudCwgZS5tZXRhS2V5IHx8IGUuc2hpZnRLZXkpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9LCBmYWxzZSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Bob2VuaXgubGluay5jbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIG1lc3NhZ2UgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbmZpcm1cIik7XG4gICAgaWYobWVzc2FnZSAmJiAhd2luZG93LmNvbmZpcm0obWVzc2FnZSkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sIGZhbHNlKTtcbn0pKCk7XG4iLCAiLyohXG4gKiBAa3Vya2xlL2NvbG9yIHYwLjMuMlxuICogaHR0cHM6Ly9naXRodWIuY29tL2t1cmtsZS9jb2xvciNyZWFkbWVcbiAqIChjKSAyMDIzIEp1a2thIEt1cmtlbGFcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuICovXG5mdW5jdGlvbiByb3VuZCh2KSB7XG4gIHJldHVybiB2ICsgMC41IHwgMDtcbn1cbmNvbnN0IGxpbSA9ICh2LCBsLCBoKSA9PiBNYXRoLm1heChNYXRoLm1pbih2LCBoKSwgbCk7XG5mdW5jdGlvbiBwMmIodikge1xuICByZXR1cm4gbGltKHJvdW5kKHYgKiAyLjU1KSwgMCwgMjU1KTtcbn1cbmZ1bmN0aW9uIGIycCh2KSB7XG4gIHJldHVybiBsaW0ocm91bmQodiAvIDIuNTUpLCAwLCAxMDApO1xufVxuZnVuY3Rpb24gbjJiKHYpIHtcbiAgcmV0dXJuIGxpbShyb3VuZCh2ICogMjU1KSwgMCwgMjU1KTtcbn1cbmZ1bmN0aW9uIGIybih2KSB7XG4gIHJldHVybiBsaW0ocm91bmQodiAvIDIuNTUpIC8gMTAwLCAwLCAxKTtcbn1cbmZ1bmN0aW9uIG4ycCh2KSB7XG4gIHJldHVybiBsaW0ocm91bmQodiAqIDEwMCksIDAsIDEwMCk7XG59XG5cbmNvbnN0IG1hcCQxID0gezA6IDAsIDE6IDEsIDI6IDIsIDM6IDMsIDQ6IDQsIDU6IDUsIDY6IDYsIDc6IDcsIDg6IDgsIDk6IDksIEE6IDEwLCBCOiAxMSwgQzogMTIsIEQ6IDEzLCBFOiAxNCwgRjogMTUsIGE6IDEwLCBiOiAxMSwgYzogMTIsIGQ6IDEzLCBlOiAxNCwgZjogMTV9O1xuY29uc3QgaGV4ID0gWy4uLicwMTIzNDU2Nzg5QUJDREVGJ107XG5jb25zdCBoMSA9IGIgPT4gaGV4W2IgJiAweEZdO1xuY29uc3QgaDIgPSBiID0+IGhleFsoYiAmIDB4RjApID4+IDRdICsgaGV4W2IgJiAweEZdO1xuY29uc3QgZXEgPSBiID0+ICgoYiAmIDB4RjApID4+IDQpID09PSAoYiAmIDB4Rik7XG5jb25zdCBpc1Nob3J0ID0gdiA9PiBlcSh2LnIpICYmIGVxKHYuZykgJiYgZXEodi5iKSAmJiBlcSh2LmEpO1xuZnVuY3Rpb24gaGV4UGFyc2Uoc3RyKSB7XG4gIHZhciBsZW4gPSBzdHIubGVuZ3RoO1xuICB2YXIgcmV0O1xuICBpZiAoc3RyWzBdID09PSAnIycpIHtcbiAgICBpZiAobGVuID09PSA0IHx8IGxlbiA9PT0gNSkge1xuICAgICAgcmV0ID0ge1xuICAgICAgICByOiAyNTUgJiBtYXAkMVtzdHJbMV1dICogMTcsXG4gICAgICAgIGc6IDI1NSAmIG1hcCQxW3N0clsyXV0gKiAxNyxcbiAgICAgICAgYjogMjU1ICYgbWFwJDFbc3RyWzNdXSAqIDE3LFxuICAgICAgICBhOiBsZW4gPT09IDUgPyBtYXAkMVtzdHJbNF1dICogMTcgOiAyNTVcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChsZW4gPT09IDcgfHwgbGVuID09PSA5KSB7XG4gICAgICByZXQgPSB7XG4gICAgICAgIHI6IG1hcCQxW3N0clsxXV0gPDwgNCB8IG1hcCQxW3N0clsyXV0sXG4gICAgICAgIGc6IG1hcCQxW3N0clszXV0gPDwgNCB8IG1hcCQxW3N0cls0XV0sXG4gICAgICAgIGI6IG1hcCQxW3N0cls1XV0gPDwgNCB8IG1hcCQxW3N0cls2XV0sXG4gICAgICAgIGE6IGxlbiA9PT0gOSA/IChtYXAkMVtzdHJbN11dIDw8IDQgfCBtYXAkMVtzdHJbOF1dKSA6IDI1NVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbmNvbnN0IGFscGhhID0gKGEsIGYpID0+IGEgPCAyNTUgPyBmKGEpIDogJyc7XG5mdW5jdGlvbiBoZXhTdHJpbmcodikge1xuICB2YXIgZiA9IGlzU2hvcnQodikgPyBoMSA6IGgyO1xuICByZXR1cm4gdlxuICAgID8gJyMnICsgZih2LnIpICsgZih2LmcpICsgZih2LmIpICsgYWxwaGEodi5hLCBmKVxuICAgIDogdW5kZWZpbmVkO1xufVxuXG5jb25zdCBIVUVfUkUgPSAvXihoc2xhP3xod2J8aHN2KVxcKFxccyooWy0rLmVcXGRdKykoPzpkZWcpP1tcXHMsXSsoWy0rLmVcXGRdKyklW1xccyxdKyhbLSsuZVxcZF0rKSUoPzpbXFxzLF0rKFstKy5lXFxkXSspKCUpPyk/XFxzKlxcKSQvO1xuZnVuY3Rpb24gaHNsMnJnYm4oaCwgcywgbCkge1xuICBjb25zdCBhID0gcyAqIE1hdGgubWluKGwsIDEgLSBsKTtcbiAgY29uc3QgZiA9IChuLCBrID0gKG4gKyBoIC8gMzApICUgMTIpID0+IGwgLSBhICogTWF0aC5tYXgoTWF0aC5taW4oayAtIDMsIDkgLSBrLCAxKSwgLTEpO1xuICByZXR1cm4gW2YoMCksIGYoOCksIGYoNCldO1xufVxuZnVuY3Rpb24gaHN2MnJnYm4oaCwgcywgdikge1xuICBjb25zdCBmID0gKG4sIGsgPSAobiArIGggLyA2MCkgJSA2KSA9PiB2IC0gdiAqIHMgKiBNYXRoLm1heChNYXRoLm1pbihrLCA0IC0gaywgMSksIDApO1xuICByZXR1cm4gW2YoNSksIGYoMyksIGYoMSldO1xufVxuZnVuY3Rpb24gaHdiMnJnYm4oaCwgdywgYikge1xuICBjb25zdCByZ2IgPSBoc2wycmdibihoLCAxLCAwLjUpO1xuICBsZXQgaTtcbiAgaWYgKHcgKyBiID4gMSkge1xuICAgIGkgPSAxIC8gKHcgKyBiKTtcbiAgICB3ICo9IGk7XG4gICAgYiAqPSBpO1xuICB9XG4gIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICByZ2JbaV0gKj0gMSAtIHcgLSBiO1xuICAgIHJnYltpXSArPSB3O1xuICB9XG4gIHJldHVybiByZ2I7XG59XG5mdW5jdGlvbiBodWVWYWx1ZShyLCBnLCBiLCBkLCBtYXgpIHtcbiAgaWYgKHIgPT09IG1heCkge1xuICAgIHJldHVybiAoKGcgLSBiKSAvIGQpICsgKGcgPCBiID8gNiA6IDApO1xuICB9XG4gIGlmIChnID09PSBtYXgpIHtcbiAgICByZXR1cm4gKGIgLSByKSAvIGQgKyAyO1xuICB9XG4gIHJldHVybiAociAtIGcpIC8gZCArIDQ7XG59XG5mdW5jdGlvbiByZ2IyaHNsKHYpIHtcbiAgY29uc3QgcmFuZ2UgPSAyNTU7XG4gIGNvbnN0IHIgPSB2LnIgLyByYW5nZTtcbiAgY29uc3QgZyA9IHYuZyAvIHJhbmdlO1xuICBjb25zdCBiID0gdi5iIC8gcmFuZ2U7XG4gIGNvbnN0IG1heCA9IE1hdGgubWF4KHIsIGcsIGIpO1xuICBjb25zdCBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcbiAgY29uc3QgbCA9IChtYXggKyBtaW4pIC8gMjtcbiAgbGV0IGgsIHMsIGQ7XG4gIGlmIChtYXggIT09IG1pbikge1xuICAgIGQgPSBtYXggLSBtaW47XG4gICAgcyA9IGwgPiAwLjUgPyBkIC8gKDIgLSBtYXggLSBtaW4pIDogZCAvIChtYXggKyBtaW4pO1xuICAgIGggPSBodWVWYWx1ZShyLCBnLCBiLCBkLCBtYXgpO1xuICAgIGggPSBoICogNjAgKyAwLjU7XG4gIH1cbiAgcmV0dXJuIFtoIHwgMCwgcyB8fCAwLCBsXTtcbn1cbmZ1bmN0aW9uIGNhbGxuKGYsIGEsIGIsIGMpIHtcbiAgcmV0dXJuIChcbiAgICBBcnJheS5pc0FycmF5KGEpXG4gICAgICA/IGYoYVswXSwgYVsxXSwgYVsyXSlcbiAgICAgIDogZihhLCBiLCBjKVxuICApLm1hcChuMmIpO1xufVxuZnVuY3Rpb24gaHNsMnJnYihoLCBzLCBsKSB7XG4gIHJldHVybiBjYWxsbihoc2wycmdibiwgaCwgcywgbCk7XG59XG5mdW5jdGlvbiBod2IycmdiKGgsIHcsIGIpIHtcbiAgcmV0dXJuIGNhbGxuKGh3YjJyZ2JuLCBoLCB3LCBiKTtcbn1cbmZ1bmN0aW9uIGhzdjJyZ2IoaCwgcywgdikge1xuICByZXR1cm4gY2FsbG4oaHN2MnJnYm4sIGgsIHMsIHYpO1xufVxuZnVuY3Rpb24gaHVlKGgpIHtcbiAgcmV0dXJuIChoICUgMzYwICsgMzYwKSAlIDM2MDtcbn1cbmZ1bmN0aW9uIGh1ZVBhcnNlKHN0cikge1xuICBjb25zdCBtID0gSFVFX1JFLmV4ZWMoc3RyKTtcbiAgbGV0IGEgPSAyNTU7XG4gIGxldCB2O1xuICBpZiAoIW0pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG1bNV0gIT09IHYpIHtcbiAgICBhID0gbVs2XSA/IHAyYigrbVs1XSkgOiBuMmIoK21bNV0pO1xuICB9XG4gIGNvbnN0IGggPSBodWUoK21bMl0pO1xuICBjb25zdCBwMSA9ICttWzNdIC8gMTAwO1xuICBjb25zdCBwMiA9ICttWzRdIC8gMTAwO1xuICBpZiAobVsxXSA9PT0gJ2h3YicpIHtcbiAgICB2ID0gaHdiMnJnYihoLCBwMSwgcDIpO1xuICB9IGVsc2UgaWYgKG1bMV0gPT09ICdoc3YnKSB7XG4gICAgdiA9IGhzdjJyZ2IoaCwgcDEsIHAyKTtcbiAgfSBlbHNlIHtcbiAgICB2ID0gaHNsMnJnYihoLCBwMSwgcDIpO1xuICB9XG4gIHJldHVybiB7XG4gICAgcjogdlswXSxcbiAgICBnOiB2WzFdLFxuICAgIGI6IHZbMl0sXG4gICAgYTogYVxuICB9O1xufVxuZnVuY3Rpb24gcm90YXRlKHYsIGRlZykge1xuICB2YXIgaCA9IHJnYjJoc2wodik7XG4gIGhbMF0gPSBodWUoaFswXSArIGRlZyk7XG4gIGggPSBoc2wycmdiKGgpO1xuICB2LnIgPSBoWzBdO1xuICB2LmcgPSBoWzFdO1xuICB2LmIgPSBoWzJdO1xufVxuZnVuY3Rpb24gaHNsU3RyaW5nKHYpIHtcbiAgaWYgKCF2KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGEgPSByZ2IyaHNsKHYpO1xuICBjb25zdCBoID0gYVswXTtcbiAgY29uc3QgcyA9IG4ycChhWzFdKTtcbiAgY29uc3QgbCA9IG4ycChhWzJdKTtcbiAgcmV0dXJuIHYuYSA8IDI1NVxuICAgID8gYGhzbGEoJHtofSwgJHtzfSUsICR7bH0lLCAke2Iybih2LmEpfSlgXG4gICAgOiBgaHNsKCR7aH0sICR7c30lLCAke2x9JSlgO1xufVxuXG5jb25zdCBtYXAgPSB7XG4gIHg6ICdkYXJrJyxcbiAgWjogJ2xpZ2h0JyxcbiAgWTogJ3JlJyxcbiAgWDogJ2JsdScsXG4gIFc6ICdncicsXG4gIFY6ICdtZWRpdW0nLFxuICBVOiAnc2xhdGUnLFxuICBBOiAnZWUnLFxuICBUOiAnb2wnLFxuICBTOiAnb3InLFxuICBCOiAncmEnLFxuICBDOiAnbGF0ZWcnLFxuICBEOiAnaWdodHMnLFxuICBSOiAnaW4nLFxuICBROiAndHVycXVvaXMnLFxuICBFOiAnaGknLFxuICBQOiAncm8nLFxuICBPOiAnYWwnLFxuICBOOiAnbGUnLFxuICBNOiAnZGUnLFxuICBMOiAneWVsbG8nLFxuICBGOiAnZW4nLFxuICBLOiAnY2gnLFxuICBHOiAnYXJrcycsXG4gIEg6ICdlYScsXG4gIEk6ICdpZ2h0ZycsXG4gIEo6ICd3aCdcbn07XG5jb25zdCBuYW1lcyQxID0ge1xuICBPaWNlWGU6ICdmMGY4ZmYnLFxuICBhbnRpcXVld0V0ZTogJ2ZhZWJkNycsXG4gIGFxdWE6ICdmZmZmJyxcbiAgYXF1YW1hclJlOiAnN2ZmZmQ0JyxcbiAgYXp1WTogJ2YwZmZmZicsXG4gIGJlaWdlOiAnZjVmNWRjJyxcbiAgYmlzcXVlOiAnZmZlNGM0JyxcbiAgYmxhY2s6ICcwJyxcbiAgYmxhbktlZE9tb25kOiAnZmZlYmNkJyxcbiAgWGU6ICdmZicsXG4gIFhldmlUZXQ6ICc4YTJiZTInLFxuICBiUHduOiAnYTUyYTJhJyxcbiAgYnVybHl3b29kOiAnZGViODg3JyxcbiAgY2FNdFhlOiAnNWY5ZWEwJyxcbiAgS2FydFl1c2U6ICc3ZmZmMDAnLFxuICBLb2NUYXRlOiAnZDI2OTFlJyxcbiAgY1NPOiAnZmY3ZjUwJyxcbiAgY1NuZmxvd2VyWGU6ICc2NDk1ZWQnLFxuICBjU25zaWxrOiAnZmZmOGRjJyxcbiAgY3JpbXNvbjogJ2RjMTQzYycsXG4gIGN5YW46ICdmZmZmJyxcbiAgeFhlOiAnOGInLFxuICB4Y3lhbjogJzhiOGInLFxuICB4Z1RNblBkOiAnYjg4NjBiJyxcbiAgeFdheTogJ2E5YTlhOScsXG4gIHhnWUY6ICc2NDAwJyxcbiAgeGdZeTogJ2E5YTlhOScsXG4gIHhraGFraTogJ2JkYjc2YicsXG4gIHhtYWdGdGE6ICc4YjAwOGInLFxuICB4VGl2ZWdZRjogJzU1NmIyZicsXG4gIHhTYW5nZTogJ2ZmOGMwMCcsXG4gIHhTY0VkOiAnOTkzMmNjJyxcbiAgeFlkOiAnOGIwMDAwJyxcbiAgeHNPbW9uOiAnZTk5NjdhJyxcbiAgeHNIZ1lGOiAnOGZiYzhmJyxcbiAgeFVYZTogJzQ4M2Q4YicsXG4gIHhVV2F5OiAnMmY0ZjRmJyxcbiAgeFVnWXk6ICcyZjRmNGYnLFxuICB4UWU6ICdjZWQxJyxcbiAgeHZpVGV0OiAnOTQwMGQzJyxcbiAgZEFwcFJrOiAnZmYxNDkzJyxcbiAgZEFwc2t5WGU6ICdiZmZmJyxcbiAgZGltV2F5OiAnNjk2OTY5JyxcbiAgZGltZ1l5OiAnNjk2OTY5JyxcbiAgZG9kZ2VyWGU6ICcxZTkwZmYnLFxuICBmaVlicmljazogJ2IyMjIyMicsXG4gIGZsU093RXRlOiAnZmZmYWYwJyxcbiAgZm9Zc3RXQW46ICcyMjhiMjInLFxuICBmdUtzaWE6ICdmZjAwZmYnLFxuICBnYVJzYlNvOiAnZGNkY2RjJyxcbiAgZ2hvc3R3RXRlOiAnZjhmOGZmJyxcbiAgZ1RkOiAnZmZkNzAwJyxcbiAgZ1RNblBkOiAnZGFhNTIwJyxcbiAgV2F5OiAnODA4MDgwJyxcbiAgZ1lGOiAnODAwMCcsXG4gIGdZRkx3OiAnYWRmZjJmJyxcbiAgZ1l5OiAnODA4MDgwJyxcbiAgaG9uZXlNdzogJ2YwZmZmMCcsXG4gIGhvdHBSazogJ2ZmNjliNCcsXG4gIFJkaWFuWWQ6ICdjZDVjNWMnLFxuICBSZGlnbzogJzRiMDA4MicsXG4gIGl2U3k6ICdmZmZmZjAnLFxuICBraGFraTogJ2YwZTY4YycsXG4gIGxhdkZNcjogJ2U2ZTZmYScsXG4gIGxhdkZNclhzaDogJ2ZmZjBmNScsXG4gIGxhd25nWUY6ICc3Y2ZjMDAnLFxuICBObW9uY0VmZm9uOiAnZmZmYWNkJyxcbiAgWlhlOiAnYWRkOGU2JyxcbiAgWmNTTzogJ2YwODA4MCcsXG4gIFpjeWFuOiAnZTBmZmZmJyxcbiAgWmdUTW5QZEx3OiAnZmFmYWQyJyxcbiAgWldheTogJ2QzZDNkMycsXG4gIFpnWUY6ICc5MGVlOTAnLFxuICBaZ1l5OiAnZDNkM2QzJyxcbiAgWnBSazogJ2ZmYjZjMScsXG4gIFpzT21vbjogJ2ZmYTA3YScsXG4gIFpzSGdZRjogJzIwYjJhYScsXG4gIFpza3lYZTogJzg3Y2VmYScsXG4gIFpVV2F5OiAnNzc4ODk5JyxcbiAgWlVnWXk6ICc3Nzg4OTknLFxuICBac3RBbFhlOiAnYjBjNGRlJyxcbiAgWkx3OiAnZmZmZmUwJyxcbiAgbGltZTogJ2ZmMDAnLFxuICBsaW1lZ1lGOiAnMzJjZDMyJyxcbiAgbFJGOiAnZmFmMGU2JyxcbiAgbWFnRnRhOiAnZmYwMGZmJyxcbiAgbWFQb246ICc4MDAwMDAnLFxuICBWYXF1YW1hclJlOiAnNjZjZGFhJyxcbiAgVlhlOiAnY2QnLFxuICBWU2NFZDogJ2JhNTVkMycsXG4gIFZwdXJwTjogJzkzNzBkYicsXG4gIFZzSGdZRjogJzNjYjM3MScsXG4gIFZVWGU6ICc3YjY4ZWUnLFxuICBWc3ByUmdnWUY6ICdmYTlhJyxcbiAgVlFlOiAnNDhkMWNjJyxcbiAgVnZpVGV0WWQ6ICdjNzE1ODUnLFxuICBtaWRuaWdodFhlOiAnMTkxOTcwJyxcbiAgbVJ0Y1lhbTogJ2Y1ZmZmYScsXG4gIG1pc3R5UHNlOiAnZmZlNGUxJyxcbiAgbW9jY2FzUjogJ2ZmZTRiNScsXG4gIG5hdmFqb3dFdGU6ICdmZmRlYWQnLFxuICBuYXZ5OiAnODAnLFxuICBUZGxhY2U6ICdmZGY1ZTYnLFxuICBUaXZlOiAnODA4MDAwJyxcbiAgVGl2ZWRCYjogJzZiOGUyMycsXG4gIFNhbmdlOiAnZmZhNTAwJyxcbiAgU2FuZ2VZZDogJ2ZmNDUwMCcsXG4gIFNjRWQ6ICdkYTcwZDYnLFxuICBwT2VnVE1uUGQ6ICdlZWU4YWEnLFxuICBwT2VnWUY6ICc5OGZiOTgnLFxuICBwT2VRZTogJ2FmZWVlZScsXG4gIHBPZXZpVGV0WWQ6ICdkYjcwOTMnLFxuICBwYXBheWF3RXA6ICdmZmVmZDUnLFxuICBwSEtwdWZmOiAnZmZkYWI5JyxcbiAgcGVydTogJ2NkODUzZicsXG4gIHBSazogJ2ZmYzBjYicsXG4gIHBsdW06ICdkZGEwZGQnLFxuICBwb3dNclhlOiAnYjBlMGU2JyxcbiAgcHVycE46ICc4MDAwODAnLFxuICBZYmVjY2FwdXJwTjogJzY2MzM5OScsXG4gIFlkOiAnZmYwMDAwJyxcbiAgUHN5YnJvd246ICdiYzhmOGYnLFxuICBQeU9YZTogJzQxNjllMScsXG4gIHNhZGROYlB3bjogJzhiNDUxMycsXG4gIHNPbW9uOiAnZmE4MDcyJyxcbiAgc2FuZHliUHduOiAnZjRhNDYwJyxcbiAgc0hnWUY6ICcyZThiNTcnLFxuICBzSHNoZWxsOiAnZmZmNWVlJyxcbiAgc2lGbmE6ICdhMDUyMmQnLFxuICBzaWx2ZXI6ICdjMGMwYzAnLFxuICBza3lYZTogJzg3Y2VlYicsXG4gIFVYZTogJzZhNWFjZCcsXG4gIFVXYXk6ICc3MDgwOTAnLFxuICBVZ1l5OiAnNzA4MDkwJyxcbiAgc25vdzogJ2ZmZmFmYScsXG4gIHNwclJnZ1lGOiAnZmY3ZicsXG4gIHN0QWxYZTogJzQ2ODJiNCcsXG4gIHRhbjogJ2QyYjQ4YycsXG4gIHRlTzogJzgwODAnLFxuICB0RXN0TjogJ2Q4YmZkOCcsXG4gIHRvbWF0bzogJ2ZmNjM0NycsXG4gIFFlOiAnNDBlMGQwJyxcbiAgdmlUZXQ6ICdlZTgyZWUnLFxuICBKSHQ6ICdmNWRlYjMnLFxuICB3RXRlOiAnZmZmZmZmJyxcbiAgd0V0ZXNtb2tlOiAnZjVmNWY1JyxcbiAgTHc6ICdmZmZmMDAnLFxuICBMd2dZRjogJzlhY2QzMidcbn07XG5mdW5jdGlvbiB1bnBhY2soKSB7XG4gIGNvbnN0IHVucGFja2VkID0ge307XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhuYW1lcyQxKTtcbiAgY29uc3QgdGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuICBsZXQgaSwgaiwgaywgb2ssIG5rO1xuICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIG9rID0gbmsgPSBrZXlzW2ldO1xuICAgIGZvciAoaiA9IDA7IGogPCB0a2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgayA9IHRrZXlzW2pdO1xuICAgICAgbmsgPSBuay5yZXBsYWNlKGssIG1hcFtrXSk7XG4gICAgfVxuICAgIGsgPSBwYXJzZUludChuYW1lcyQxW29rXSwgMTYpO1xuICAgIHVucGFja2VkW25rXSA9IFtrID4+IDE2ICYgMHhGRiwgayA+PiA4ICYgMHhGRiwgayAmIDB4RkZdO1xuICB9XG4gIHJldHVybiB1bnBhY2tlZDtcbn1cblxubGV0IG5hbWVzO1xuZnVuY3Rpb24gbmFtZVBhcnNlKHN0cikge1xuICBpZiAoIW5hbWVzKSB7XG4gICAgbmFtZXMgPSB1bnBhY2soKTtcbiAgICBuYW1lcy50cmFuc3BhcmVudCA9IFswLCAwLCAwLCAwXTtcbiAgfVxuICBjb25zdCBhID0gbmFtZXNbc3RyLnRvTG93ZXJDYXNlKCldO1xuICByZXR1cm4gYSAmJiB7XG4gICAgcjogYVswXSxcbiAgICBnOiBhWzFdLFxuICAgIGI6IGFbMl0sXG4gICAgYTogYS5sZW5ndGggPT09IDQgPyBhWzNdIDogMjU1XG4gIH07XG59XG5cbmNvbnN0IFJHQl9SRSA9IC9ecmdiYT9cXChcXHMqKFstKy5cXGRdKykoJSk/W1xccyxdKyhbLSsuZVxcZF0rKSglKT9bXFxzLF0rKFstKy5lXFxkXSspKCUpPyg/OltcXHMsL10rKFstKy5lXFxkXSspKCUpPyk/XFxzKlxcKSQvO1xuZnVuY3Rpb24gcmdiUGFyc2Uoc3RyKSB7XG4gIGNvbnN0IG0gPSBSR0JfUkUuZXhlYyhzdHIpO1xuICBsZXQgYSA9IDI1NTtcbiAgbGV0IHIsIGcsIGI7XG4gIGlmICghbSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobVs3XSAhPT0gcikge1xuICAgIGNvbnN0IHYgPSArbVs3XTtcbiAgICBhID0gbVs4XSA/IHAyYih2KSA6IGxpbSh2ICogMjU1LCAwLCAyNTUpO1xuICB9XG4gIHIgPSArbVsxXTtcbiAgZyA9ICttWzNdO1xuICBiID0gK21bNV07XG4gIHIgPSAyNTUgJiAobVsyXSA/IHAyYihyKSA6IGxpbShyLCAwLCAyNTUpKTtcbiAgZyA9IDI1NSAmIChtWzRdID8gcDJiKGcpIDogbGltKGcsIDAsIDI1NSkpO1xuICBiID0gMjU1ICYgKG1bNl0gPyBwMmIoYikgOiBsaW0oYiwgMCwgMjU1KSk7XG4gIHJldHVybiB7XG4gICAgcjogcixcbiAgICBnOiBnLFxuICAgIGI6IGIsXG4gICAgYTogYVxuICB9O1xufVxuZnVuY3Rpb24gcmdiU3RyaW5nKHYpIHtcbiAgcmV0dXJuIHYgJiYgKFxuICAgIHYuYSA8IDI1NVxuICAgICAgPyBgcmdiYSgke3Yucn0sICR7di5nfSwgJHt2LmJ9LCAke2Iybih2LmEpfSlgXG4gICAgICA6IGByZ2IoJHt2LnJ9LCAke3YuZ30sICR7di5ifSlgXG4gICk7XG59XG5cbmNvbnN0IHRvID0gdiA9PiB2IDw9IDAuMDAzMTMwOCA/IHYgKiAxMi45MiA6IE1hdGgucG93KHYsIDEuMCAvIDIuNCkgKiAxLjA1NSAtIDAuMDU1O1xuY29uc3QgZnJvbSA9IHYgPT4gdiA8PSAwLjA0MDQ1ID8gdiAvIDEyLjkyIDogTWF0aC5wb3coKHYgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcbmZ1bmN0aW9uIGludGVycG9sYXRlKHJnYjEsIHJnYjIsIHQpIHtcbiAgY29uc3QgciA9IGZyb20oYjJuKHJnYjEucikpO1xuICBjb25zdCBnID0gZnJvbShiMm4ocmdiMS5nKSk7XG4gIGNvbnN0IGIgPSBmcm9tKGIybihyZ2IxLmIpKTtcbiAgcmV0dXJuIHtcbiAgICByOiBuMmIodG8ociArIHQgKiAoZnJvbShiMm4ocmdiMi5yKSkgLSByKSkpLFxuICAgIGc6IG4yYih0byhnICsgdCAqIChmcm9tKGIybihyZ2IyLmcpKSAtIGcpKSksXG4gICAgYjogbjJiKHRvKGIgKyB0ICogKGZyb20oYjJuKHJnYjIuYikpIC0gYikpKSxcbiAgICBhOiByZ2IxLmEgKyB0ICogKHJnYjIuYSAtIHJnYjEuYSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gbW9kSFNMKHYsIGksIHJhdGlvKSB7XG4gIGlmICh2KSB7XG4gICAgbGV0IHRtcCA9IHJnYjJoc2wodik7XG4gICAgdG1wW2ldID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odG1wW2ldICsgdG1wW2ldICogcmF0aW8sIGkgPT09IDAgPyAzNjAgOiAxKSk7XG4gICAgdG1wID0gaHNsMnJnYih0bXApO1xuICAgIHYuciA9IHRtcFswXTtcbiAgICB2LmcgPSB0bXBbMV07XG4gICAgdi5iID0gdG1wWzJdO1xuICB9XG59XG5mdW5jdGlvbiBjbG9uZSh2LCBwcm90bykge1xuICByZXR1cm4gdiA/IE9iamVjdC5hc3NpZ24ocHJvdG8gfHwge30sIHYpIDogdjtcbn1cbmZ1bmN0aW9uIGZyb21PYmplY3QoaW5wdXQpIHtcbiAgdmFyIHYgPSB7cjogMCwgZzogMCwgYjogMCwgYTogMjU1fTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgaWYgKGlucHV0Lmxlbmd0aCA+PSAzKSB7XG4gICAgICB2ID0ge3I6IGlucHV0WzBdLCBnOiBpbnB1dFsxXSwgYjogaW5wdXRbMl0sIGE6IDI1NX07XG4gICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMykge1xuICAgICAgICB2LmEgPSBuMmIoaW5wdXRbM10pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2ID0gY2xvbmUoaW5wdXQsIHtyOiAwLCBnOiAwLCBiOiAwLCBhOiAxfSk7XG4gICAgdi5hID0gbjJiKHYuYSk7XG4gIH1cbiAgcmV0dXJuIHY7XG59XG5mdW5jdGlvbiBmdW5jdGlvblBhcnNlKHN0cikge1xuICBpZiAoc3RyLmNoYXJBdCgwKSA9PT0gJ3InKSB7XG4gICAgcmV0dXJuIHJnYlBhcnNlKHN0cik7XG4gIH1cbiAgcmV0dXJuIGh1ZVBhcnNlKHN0cik7XG59XG5jbGFzcyBDb2xvciB7XG4gIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgQ29sb3IpIHtcbiAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBpbnB1dDtcbiAgICBsZXQgdjtcbiAgICBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHYgPSBmcm9tT2JqZWN0KGlucHV0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2ID0gaGV4UGFyc2UoaW5wdXQpIHx8IG5hbWVQYXJzZShpbnB1dCkgfHwgZnVuY3Rpb25QYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHRoaXMuX3JnYiA9IHY7XG4gICAgdGhpcy5fdmFsaWQgPSAhIXY7XG4gIH1cbiAgZ2V0IHZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLl92YWxpZDtcbiAgfVxuICBnZXQgcmdiKCkge1xuICAgIHZhciB2ID0gY2xvbmUodGhpcy5fcmdiKTtcbiAgICBpZiAodikge1xuICAgICAgdi5hID0gYjJuKHYuYSk7XG4gICAgfVxuICAgIHJldHVybiB2O1xuICB9XG4gIHNldCByZ2Iob2JqKSB7XG4gICAgdGhpcy5fcmdiID0gZnJvbU9iamVjdChvYmopO1xuICB9XG4gIHJnYlN0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsaWQgPyByZ2JTdHJpbmcodGhpcy5fcmdiKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBoZXhTdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbGlkID8gaGV4U3RyaW5nKHRoaXMuX3JnYikgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaHNsU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl92YWxpZCA/IGhzbFN0cmluZyh0aGlzLl9yZ2IpIDogdW5kZWZpbmVkO1xuICB9XG4gIG1peChjb2xvciwgd2VpZ2h0KSB7XG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICBjb25zdCBjMSA9IHRoaXMucmdiO1xuICAgICAgY29uc3QgYzIgPSBjb2xvci5yZ2I7XG4gICAgICBsZXQgdzI7XG4gICAgICBjb25zdCBwID0gd2VpZ2h0ID09PSB3MiA/IDAuNSA6IHdlaWdodDtcbiAgICAgIGNvbnN0IHcgPSAyICogcCAtIDE7XG4gICAgICBjb25zdCBhID0gYzEuYSAtIGMyLmE7XG4gICAgICBjb25zdCB3MSA9ICgodyAqIGEgPT09IC0xID8gdyA6ICh3ICsgYSkgLyAoMSArIHcgKiBhKSkgKyAxKSAvIDIuMDtcbiAgICAgIHcyID0gMSAtIHcxO1xuICAgICAgYzEuciA9IDB4RkYgJiB3MSAqIGMxLnIgKyB3MiAqIGMyLnIgKyAwLjU7XG4gICAgICBjMS5nID0gMHhGRiAmIHcxICogYzEuZyArIHcyICogYzIuZyArIDAuNTtcbiAgICAgIGMxLmIgPSAweEZGICYgdzEgKiBjMS5iICsgdzIgKiBjMi5iICsgMC41O1xuICAgICAgYzEuYSA9IHAgKiBjMS5hICsgKDEgLSBwKSAqIGMyLmE7XG4gICAgICB0aGlzLnJnYiA9IGMxO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpbnRlcnBvbGF0ZShjb2xvciwgdCkge1xuICAgIGlmIChjb2xvcikge1xuICAgICAgdGhpcy5fcmdiID0gaW50ZXJwb2xhdGUodGhpcy5fcmdiLCBjb2xvci5fcmdiLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBDb2xvcih0aGlzLnJnYik7XG4gIH1cbiAgYWxwaGEoYSkge1xuICAgIHRoaXMuX3JnYi5hID0gbjJiKGEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGNsZWFyZXIocmF0aW8pIHtcbiAgICBjb25zdCByZ2IgPSB0aGlzLl9yZ2I7XG4gICAgcmdiLmEgKj0gMSAtIHJhdGlvO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGdyZXlzY2FsZSgpIHtcbiAgICBjb25zdCByZ2IgPSB0aGlzLl9yZ2I7XG4gICAgY29uc3QgdmFsID0gcm91bmQocmdiLnIgKiAwLjMgKyByZ2IuZyAqIDAuNTkgKyByZ2IuYiAqIDAuMTEpO1xuICAgIHJnYi5yID0gcmdiLmcgPSByZ2IuYiA9IHZhbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvcGFxdWVyKHJhdGlvKSB7XG4gICAgY29uc3QgcmdiID0gdGhpcy5fcmdiO1xuICAgIHJnYi5hICo9IDEgKyByYXRpbztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBuZWdhdGUoKSB7XG4gICAgY29uc3QgdiA9IHRoaXMuX3JnYjtcbiAgICB2LnIgPSAyNTUgLSB2LnI7XG4gICAgdi5nID0gMjU1IC0gdi5nO1xuICAgIHYuYiA9IDI1NSAtIHYuYjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBsaWdodGVuKHJhdGlvKSB7XG4gICAgbW9kSFNMKHRoaXMuX3JnYiwgMiwgcmF0aW8pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGRhcmtlbihyYXRpbykge1xuICAgIG1vZEhTTCh0aGlzLl9yZ2IsIDIsIC1yYXRpbyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2F0dXJhdGUocmF0aW8pIHtcbiAgICBtb2RIU0wodGhpcy5fcmdiLCAxLCByYXRpbyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVzYXR1cmF0ZShyYXRpbykge1xuICAgIG1vZEhTTCh0aGlzLl9yZ2IsIDEsIC1yYXRpbyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcm90YXRlKGRlZykge1xuICAgIHJvdGF0ZSh0aGlzLl9yZ2IsIGRlZyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5kZXhfZXNtKGlucHV0KSB7XG4gIHJldHVybiBuZXcgQ29sb3IoaW5wdXQpO1xufVxuXG5leHBvcnQgeyBDb2xvciwgYjJuLCBiMnAsIGluZGV4X2VzbSBhcyBkZWZhdWx0LCBoZXhQYXJzZSwgaGV4U3RyaW5nLCBoc2wycmdiLCBoc2xTdHJpbmcsIGhzdjJyZ2IsIGh1ZVBhcnNlLCBod2IycmdiLCBsaW0sIG4yYiwgbjJwLCBuYW1lUGFyc2UsIHAyYiwgcmdiMmhzbCwgcmdiUGFyc2UsIHJnYlN0cmluZywgcm90YXRlLCByb3VuZCB9O1xuIiwgIi8qKlxuICogQG5hbWVzcGFjZSBDaGFydC5oZWxwZXJzXG4gKi9cblxuaW1wb3J0IHR5cGUge0FueU9iamVjdH0gZnJvbSAnLi4vdHlwZXMvYmFzaWMuanMnO1xuaW1wb3J0IHR5cGUge0FjdGl2ZURhdGFQb2ludCwgQ2hhcnRFdmVudH0gZnJvbSAnLi4vdHlwZXMvaW5kZXguanMnO1xuXG4vKipcbiAqIEFuIGVtcHR5IGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQsIGZvciBleGFtcGxlLCBmb3Igb3B0aW9uYWwgY2FsbGJhY2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkge1xuICAvKiBub29wICovXG59XG5cbi8qKlxuICogUmV0dXJucyBhIHVuaXF1ZSBpZCwgc2VxdWVudGlhbGx5IGdlbmVyYXRlZCBmcm9tIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICovXG5leHBvcnQgY29uc3QgdWlkID0gKCgpID0+IHtcbiAgbGV0IGlkID0gMDtcbiAgcmV0dXJuICgpID0+IGlkKys7XG59KSgpO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIG5laXRoZXIgbnVsbCBub3IgdW5kZWZpbmVkLCBlbHNlIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdC5cbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsT3JVbmRlZih2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIG51bGwgfCB1bmRlZmluZWQge1xuICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSAoaW5jbHVkaW5nIHR5cGVkIGFycmF5cyksIGVsc2UgcmV0dXJucyBmYWxzZS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byB0ZXN0LlxuICogQGZ1bmN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5PFQgPSB1bmtub3duPih2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFRbXSB7XG4gIGlmIChBcnJheS5pc0FycmF5ICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIGlmICh0eXBlLnNsaWNlKDAsIDcpID09PSAnW29iamVjdCcgJiYgdHlwZS5zbGljZSgtNikgPT09ICdBcnJheV0nKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCAoZXhjbHVkaW5nIG51bGwpLCBlbHNlIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdC5cbiAqIEBzaW5jZSAyLjcuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBBbnlPYmplY3Qge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBmaW5pdGUgbnVtYmVyLCBlbHNlIHJldHVybnMgZmFsc2VcbiAqIEBwYXJhbSB2YWx1ZSAgLSBUaGUgdmFsdWUgdG8gdGVzdC5cbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXJGaW5pdGUodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBudW1iZXIge1xuICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdmFsdWUgaW5zdGFuY2VvZiBOdW1iZXIpICYmIGlzRmluaXRlKCt2YWx1ZSk7XG59XG5leHBvcnQge1xuICBpc051bWJlckZpbml0ZSBhcyBpc0Zpbml0ZSxcbn07XG5cbi8qKlxuICogUmV0dXJucyBgdmFsdWVgIGlmIGZpbml0ZSwgZWxzZSByZXR1cm5zIGBkZWZhdWx0VmFsdWVgLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHJldHVybiBpZiBkZWZpbmVkLlxuICogQHBhcmFtIGRlZmF1bHRWYWx1ZSAtIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgYHZhbHVlYCBpcyBub3QgZmluaXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluaXRlT3JEZWZhdWx0KHZhbHVlOiB1bmtub3duLCBkZWZhdWx0VmFsdWU6IG51bWJlcikge1xuICByZXR1cm4gaXNOdW1iZXJGaW5pdGUodmFsdWUpID8gdmFsdWUgOiBkZWZhdWx0VmFsdWU7XG59XG5cbi8qKlxuICogUmV0dXJucyBgdmFsdWVgIGlmIGRlZmluZWQsIGVsc2UgcmV0dXJucyBgZGVmYXVsdFZhbHVlYC5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgZGVmaW5lZC5cbiAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgLSBUaGUgdmFsdWUgdG8gcmV0dXJuIGlmIGB2YWx1ZWAgaXMgdW5kZWZpbmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsdWVPckRlZmF1bHQ8VD4odmFsdWU6IFQgfCB1bmRlZmluZWQsIGRlZmF1bHRWYWx1ZTogVCkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IGRlZmF1bHRWYWx1ZSA6IHZhbHVlO1xufVxuXG5leHBvcnQgY29uc3QgdG9QZXJjZW50YWdlID0gKHZhbHVlOiBudW1iZXIgfCBzdHJpbmcsIGRpbWVuc2lvbjogbnVtYmVyKSA9PlxuICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmVuZHNXaXRoKCclJykgP1xuICAgIHBhcnNlRmxvYXQodmFsdWUpIC8gMTAwXG4gICAgOiArdmFsdWUgLyBkaW1lbnNpb247XG5cbmV4cG9ydCBjb25zdCB0b0RpbWVuc2lvbiA9ICh2YWx1ZTogbnVtYmVyIHwgc3RyaW5nLCBkaW1lbnNpb246IG51bWJlcikgPT5cbiAgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5lbmRzV2l0aCgnJScpID9cbiAgICBwYXJzZUZsb2F0KHZhbHVlKSAvIDEwMCAqIGRpbWVuc2lvblxuICAgIDogK3ZhbHVlO1xuXG4vKipcbiAqIENhbGxzIGBmbmAgd2l0aCB0aGUgZ2l2ZW4gYGFyZ3NgIGluIHRoZSBzY29wZSBkZWZpbmVkIGJ5IGB0aGlzQXJnYCBhbmQgcmV0dXJucyB0aGVcbiAqIHZhbHVlIHJldHVybmVkIGJ5IGBmbmAuIElmIGBmbmAgaXMgbm90IGEgZnVuY3Rpb24sIHRoaXMgbWV0aG9kIHJldHVybnMgdW5kZWZpbmVkLlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNhbGwuXG4gKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgd2l0aCB3aGljaCBgZm5gIHNob3VsZCBiZSBjYWxsZWQuXG4gKiBAcGFyYW0gW3RoaXNBcmddIC0gVGhlIHZhbHVlIG9mIGB0aGlzYCBwcm92aWRlZCBmb3IgdGhlIGNhbGwgdG8gYGZuYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGxiYWNrPFQgZXh0ZW5kcyAodGhpczogVEEsIC4uLnJlc3RBcmdzOiB1bmtub3duW10pID0+IFIsIFRBLCBSPihcbiAgZm46IFQgfCB1bmRlZmluZWQsXG4gIGFyZ3M6IHVua25vd25bXSxcbiAgdGhpc0FyZz86IFRBXG4pOiBSIHwgdW5kZWZpbmVkIHtcbiAgaWYgKGZuICYmIHR5cGVvZiBmbi5jYWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9XG59XG5cbi8qKlxuICogTm90ZShTQikgZm9yIHBlcmZvcm1hbmNlIHNha2UsIHRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIHVzZWQgd2hlbiBsb29wYWJsZSB0eXBlXG4gKiBpcyB1bmtub3duIG9yIGluIG5vbmUgaW50ZW5zaXZlIGNvZGUgKG5vdCBjYWxsZWQgb2Z0ZW4gYW5kIHNtYWxsIGxvb3BhYmxlKS4gRWxzZVxuICogaXQncyBwcmVmZXJhYmxlIHRvIHVzZSBhIHJlZ3VsYXIgZm9yKCkgbG9vcCBhbmQgc2F2ZSBleHRyYSBmdW5jdGlvbiBjYWxscy5cbiAqIEBwYXJhbSBsb29wYWJsZSAtIFRoZSBvYmplY3Qgb3IgYXJyYXkgdG8gYmUgaXRlcmF0ZWQuXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpdGVtLlxuICogQHBhcmFtIFt0aGlzQXJnXSAtIFRoZSB2YWx1ZSBvZiBgdGhpc2AgcHJvdmlkZWQgZm9yIHRoZSBjYWxsIHRvIGBmbmAuXG4gKiBAcGFyYW0gW3JldmVyc2VdIC0gSWYgdHJ1ZSwgaXRlcmF0ZXMgYmFja3dhcmQgb24gdGhlIGxvb3BhYmxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFjaDxULCBUQT4oXG4gIGxvb3BhYmxlOiBSZWNvcmQ8c3RyaW5nLCBUPixcbiAgZm46ICh0aGlzOiBUQSwgdjogVCwgaTogc3RyaW5nKSA9PiB2b2lkLFxuICB0aGlzQXJnPzogVEEsXG4gIHJldmVyc2U/OiBib29sZWFuXG4pOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIGVhY2g8VCwgVEE+KFxuICBsb29wYWJsZTogVFtdLFxuICBmbjogKHRoaXM6IFRBLCB2OiBULCBpOiBudW1iZXIpID0+IHZvaWQsXG4gIHRoaXNBcmc/OiBUQSxcbiAgcmV2ZXJzZT86IGJvb2xlYW5cbik6IHZvaWQ7XG5leHBvcnQgZnVuY3Rpb24gZWFjaDxULCBUQT4oXG4gIGxvb3BhYmxlOiBUW10gfCBSZWNvcmQ8c3RyaW5nLCBUPixcbiAgZm46ICh0aGlzOiBUQSwgdjogVCwgaTogYW55KSA9PiB2b2lkLFxuICB0aGlzQXJnPzogVEEsXG4gIHJldmVyc2U/OiBib29sZWFuXG4pIHtcbiAgbGV0IGk6IG51bWJlciwgbGVuOiBudW1iZXIsIGtleXM6IHN0cmluZ1tdO1xuICBpZiAoaXNBcnJheShsb29wYWJsZSkpIHtcbiAgICBsZW4gPSBsb29wYWJsZS5sZW5ndGg7XG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGZuLmNhbGwodGhpc0FyZywgbG9vcGFibGVbaV0sIGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm4uY2FsbCh0aGlzQXJnLCBsb29wYWJsZVtpXSwgaSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxvb3BhYmxlKSkge1xuICAgIGtleXMgPSBPYmplY3Qua2V5cyhsb29wYWJsZSk7XG4gICAgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBmbi5jYWxsKHRoaXNBcmcsIGxvb3BhYmxlW2tleXNbaV1dLCBrZXlzW2ldKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGBhMGAgYW5kIGBhMWAgYXJyYXlzIGhhdmUgdGhlIHNhbWUgY29udGVudCwgZWxzZSByZXR1cm5zIGZhbHNlLlxuICogQHBhcmFtIGEwIC0gVGhlIGFycmF5IHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBhMSAtIFRoZSBhcnJheSB0byBjb21wYXJlXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2VsZW1lbnRzRXF1YWwoYTA6IEFjdGl2ZURhdGFQb2ludFtdLCBhMTogQWN0aXZlRGF0YVBvaW50W10pIHtcbiAgbGV0IGk6IG51bWJlciwgaWxlbjogbnVtYmVyLCB2MDogQWN0aXZlRGF0YVBvaW50LCB2MTogQWN0aXZlRGF0YVBvaW50O1xuXG4gIGlmICghYTAgfHwgIWExIHx8IGEwLmxlbmd0aCAhPT0gYTEubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChpID0gMCwgaWxlbiA9IGEwLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgIHYwID0gYTBbaV07XG4gICAgdjEgPSBhMVtpXTtcblxuICAgIGlmICh2MC5kYXRhc2V0SW5kZXggIT09IHYxLmRhdGFzZXRJbmRleCB8fCB2MC5pbmRleCAhPT0gdjEuaW5kZXgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgIHdpdGhvdXQga2VlcGluZyByZWZlcmVuY2VzIG9uIG9iamVjdHMgYW5kIGFycmF5cy5cbiAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgdmFsdWUgdG8gY2xvbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZTxUPihzb3VyY2U6IFQpOiBUIHtcbiAgaWYgKGlzQXJyYXkoc291cmNlKSkge1xuICAgIHJldHVybiBzb3VyY2UubWFwKGNsb25lKSBhcyB1bmtub3duIGFzIFQ7XG4gIH1cblxuICBpZiAoaXNPYmplY3Qoc291cmNlKSkge1xuICAgIGNvbnN0IHRhcmdldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gICAgY29uc3Qga2xlbiA9IGtleXMubGVuZ3RoO1xuICAgIGxldCBrID0gMDtcblxuICAgIGZvciAoOyBrIDwga2xlbjsgKytrKSB7XG4gICAgICB0YXJnZXRba2V5c1trXV0gPSBjbG9uZShzb3VyY2Vba2V5c1trXV0pO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICByZXR1cm4gc291cmNlO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleTogc3RyaW5nKSB7XG4gIHJldHVybiBbJ19fcHJvdG9fXycsICdwcm90b3R5cGUnLCAnY29uc3RydWN0b3InXS5pbmRleE9mKGtleSkgPT09IC0xO1xufVxuXG4vKipcbiAqIFRoZSBkZWZhdWx0IG1lcmdlciB3aGVuIENoYXJ0LmhlbHBlcnMubWVyZ2UgaXMgY2FsbGVkIHdpdGhvdXQgbWVyZ2VyIG9wdGlvbi5cbiAqIE5vdGUoU0IpOiBhbHNvIHVzZWQgYnkgbWVyZ2VDb25maWcgYW5kIG1lcmdlU2NhbGVDb25maWcgYXMgZmFsbGJhY2suXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX21lcmdlcihrZXk6IHN0cmluZywgdGFyZ2V0OiBBbnlPYmplY3QsIHNvdXJjZTogQW55T2JqZWN0LCBvcHRpb25zOiBBbnlPYmplY3QpIHtcbiAgaWYgKCFpc1ZhbGlkS2V5KGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB0dmFsID0gdGFyZ2V0W2tleV07XG4gIGNvbnN0IHN2YWwgPSBzb3VyY2Vba2V5XTtcblxuICBpZiAoaXNPYmplY3QodHZhbCkgJiYgaXNPYmplY3Qoc3ZhbCkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgbWVyZ2UodHZhbCwgc3ZhbCwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0W2tleV0gPSBjbG9uZShzdmFsKTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lcmdlT3B0aW9ucyB7XG4gIG1lcmdlcj86IChrZXk6IHN0cmluZywgdGFyZ2V0OiBBbnlPYmplY3QsIHNvdXJjZTogQW55T2JqZWN0LCBvcHRpb25zPzogQW55T2JqZWN0KSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGRlZXAgY29waWVzIGBzb3VyY2VgIHByb3BlcnRpZXMgaW50byBgdGFyZ2V0YCB3aXRoIHRoZSBnaXZlbiBgb3B0aW9uc2AuXG4gKiBJTVBPUlRBTlQ6IGB0YXJnZXRgIGlzIG5vdCBjbG9uZWQgYW5kIHdpbGwgYmUgdXBkYXRlZCB3aXRoIGBzb3VyY2VgIHByb3BlcnRpZXMuXG4gKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHRhcmdldCBvYmplY3QgaW4gd2hpY2ggYWxsIHNvdXJjZXMgYXJlIG1lcmdlZCBpbnRvLlxuICogQHBhcmFtIHNvdXJjZSAtIE9iamVjdChzKSB0byBtZXJnZSBpbnRvIGB0YXJnZXRgLlxuICogQHBhcmFtIFtvcHRpb25zXSAtIE1lcmdpbmcgb3B0aW9uczpcbiAqIEBwYXJhbSBbb3B0aW9ucy5tZXJnZXJdIC0gVGhlIG1lcmdlIG1ldGhvZCAoa2V5LCB0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucylcbiAqIEByZXR1cm5zIFRoZSBgdGFyZ2V0YCBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZTxUPih0YXJnZXQ6IFQsIHNvdXJjZTogW10sIG9wdGlvbnM/OiBNZXJnZU9wdGlvbnMpOiBUO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlPFQsIFMxPih0YXJnZXQ6IFQsIHNvdXJjZTogUzEsIG9wdGlvbnM/OiBNZXJnZU9wdGlvbnMpOiBUICYgUzE7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2U8VCwgUzE+KHRhcmdldDogVCwgc291cmNlOiBbUzFdLCBvcHRpb25zPzogTWVyZ2VPcHRpb25zKTogVCAmIFMxO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlPFQsIFMxLCBTMj4odGFyZ2V0OiBULCBzb3VyY2U6IFtTMSwgUzJdLCBvcHRpb25zPzogTWVyZ2VPcHRpb25zKTogVCAmIFMxICYgUzI7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2U8VCwgUzEsIFMyLCBTMz4odGFyZ2V0OiBULCBzb3VyY2U6IFtTMSwgUzIsIFMzXSwgb3B0aW9ucz86IE1lcmdlT3B0aW9ucyk6IFQgJiBTMSAmIFMyICYgUzM7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2U8VCwgUzEsIFMyLCBTMywgUzQ+KFxuICB0YXJnZXQ6IFQsXG4gIHNvdXJjZTogW1MxLCBTMiwgUzMsIFM0XSxcbiAgb3B0aW9ucz86IE1lcmdlT3B0aW9uc1xuKTogVCAmIFMxICYgUzIgJiBTMyAmIFM0O1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlPFQ+KHRhcmdldDogVCwgc291cmNlOiBBbnlPYmplY3RbXSwgb3B0aW9ucz86IE1lcmdlT3B0aW9ucyk6IEFueU9iamVjdDtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZTxUPih0YXJnZXQ6IFQsIHNvdXJjZTogQW55T2JqZWN0W10sIG9wdGlvbnM/OiBNZXJnZU9wdGlvbnMpOiBBbnlPYmplY3Qge1xuICBjb25zdCBzb3VyY2VzID0gaXNBcnJheShzb3VyY2UpID8gc291cmNlIDogW3NvdXJjZV07XG4gIGNvbnN0IGlsZW4gPSBzb3VyY2VzLmxlbmd0aDtcblxuICBpZiAoIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICByZXR1cm4gdGFyZ2V0IGFzIEFueU9iamVjdDtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCBtZXJnZXIgPSBvcHRpb25zLm1lcmdlciB8fCBfbWVyZ2VyO1xuICBsZXQgY3VycmVudDogQW55T2JqZWN0O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgY3VycmVudCA9IHNvdXJjZXNbaV07XG4gICAgaWYgKCFpc09iamVjdChjdXJyZW50KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGN1cnJlbnQpO1xuICAgIGZvciAobGV0IGsgPSAwLCBrbGVuID0ga2V5cy5sZW5ndGg7IGsgPCBrbGVuOyArK2spIHtcbiAgICAgIG1lcmdlcihrZXlzW2tdLCB0YXJnZXQsIGN1cnJlbnQsIG9wdGlvbnMgYXMgQW55T2JqZWN0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGRlZXAgY29waWVzIGBzb3VyY2VgIHByb3BlcnRpZXMgaW50byBgdGFyZ2V0YCAqb25seSogaWYgbm90IGRlZmluZWQgaW4gdGFyZ2V0LlxuICogSU1QT1JUQU5UOiBgdGFyZ2V0YCBpcyBub3QgY2xvbmVkIGFuZCB3aWxsIGJlIHVwZGF0ZWQgd2l0aCBgc291cmNlYCBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHRhcmdldCAtIFRoZSB0YXJnZXQgb2JqZWN0IGluIHdoaWNoIGFsbCBzb3VyY2VzIGFyZSBtZXJnZWQgaW50by5cbiAqIEBwYXJhbSBzb3VyY2UgLSBPYmplY3QocykgdG8gbWVyZ2UgaW50byBgdGFyZ2V0YC5cbiAqIEByZXR1cm5zIFRoZSBgdGFyZ2V0YCBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUlmPFQ+KHRhcmdldDogVCwgc291cmNlOiBbXSk6IFQ7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VJZjxULCBTMT4odGFyZ2V0OiBULCBzb3VyY2U6IFMxKTogVCAmIFMxO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSWY8VCwgUzE+KHRhcmdldDogVCwgc291cmNlOiBbUzFdKTogVCAmIFMxO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSWY8VCwgUzEsIFMyPih0YXJnZXQ6IFQsIHNvdXJjZTogW1MxLCBTMl0pOiBUICYgUzEgJiBTMjtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUlmPFQsIFMxLCBTMiwgUzM+KHRhcmdldDogVCwgc291cmNlOiBbUzEsIFMyLCBTM10pOiBUICYgUzEgJiBTMiAmIFMzO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSWY8VCwgUzEsIFMyLCBTMywgUzQ+KHRhcmdldDogVCwgc291cmNlOiBbUzEsIFMyLCBTMywgUzRdKTogVCAmIFMxICYgUzIgJiBTMyAmIFM0O1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSWY8VD4odGFyZ2V0OiBULCBzb3VyY2U6IEFueU9iamVjdFtdKTogQW55T2JqZWN0O1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSWY8VD4odGFyZ2V0OiBULCBzb3VyY2U6IEFueU9iamVjdFtdKTogQW55T2JqZWN0IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICByZXR1cm4gbWVyZ2U8VD4odGFyZ2V0LCBzb3VyY2UsIHttZXJnZXI6IF9tZXJnZXJJZn0pO1xufVxuXG4vKipcbiAqIE1lcmdlcyBzb3VyY2Vba2V5XSBpbiB0YXJnZXRba2V5XSBvbmx5IGlmIHRhcmdldFtrZXldIGlzIHVuZGVmaW5lZC5cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VySWYoa2V5OiBzdHJpbmcsIHRhcmdldDogQW55T2JqZWN0LCBzb3VyY2U6IEFueU9iamVjdCkge1xuICBpZiAoIWlzVmFsaWRLZXkoa2V5KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHR2YWwgPSB0YXJnZXRba2V5XTtcbiAgY29uc3Qgc3ZhbCA9IHNvdXJjZVtrZXldO1xuXG4gIGlmIChpc09iamVjdCh0dmFsKSAmJiBpc09iamVjdChzdmFsKSkge1xuICAgIG1lcmdlSWYodHZhbCwgc3ZhbCk7XG4gIH0gZWxzZSBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0YXJnZXQsIGtleSkpIHtcbiAgICB0YXJnZXRba2V5XSA9IGNsb25lKHN2YWwpO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9kZXByZWNhdGVkKHNjb3BlOiBzdHJpbmcsIHZhbHVlOiB1bmtub3duLCBwcmV2aW91czogc3RyaW5nLCBjdXJyZW50OiBzdHJpbmcpIHtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zb2xlLndhcm4oc2NvcGUgKyAnOiBcIicgKyBwcmV2aW91cyArXG4gICAgICAnXCIgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBcIicgKyBjdXJyZW50ICsgJ1wiIGluc3RlYWQnKTtcbiAgfVxufVxuXG4vLyByZXNvbHZlT2JqZWN0S2V5IHJlc29sdmVyIGNhY2hlXG5jb25zdCBrZXlSZXNvbHZlcnMgPSB7XG4gIC8vIENoYXJ0LmhlbHBlcnMuY29yZSByZXNvbHZlT2JqZWN0S2V5IHNob3VsZCByZXNvbHZlIGVtcHR5IGtleSB0byByb290IG9iamVjdFxuICAnJzogdiA9PiB2LFxuICAvLyBkZWZhdWx0IHJlc29sdmVyc1xuICB4OiBvID0+IG8ueCxcbiAgeTogbyA9PiBvLnlcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9zcGxpdEtleShrZXk6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGtleS5zcGxpdCgnLicpO1xuICBjb25zdCBrZXlzOiBzdHJpbmdbXSA9IFtdO1xuICBsZXQgdG1wID0gJyc7XG4gIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgIHRtcCArPSBwYXJ0O1xuICAgIGlmICh0bXAuZW5kc1dpdGgoJ1xcXFwnKSkge1xuICAgICAgdG1wID0gdG1wLnNsaWNlKDAsIC0xKSArICcuJztcbiAgICB9IGVsc2Uge1xuICAgICAga2V5cy5wdXNoKHRtcCk7XG4gICAgICB0bXAgPSAnJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59XG5cbmZ1bmN0aW9uIF9nZXRLZXlSZXNvbHZlcihrZXk6IHN0cmluZykge1xuICBjb25zdCBrZXlzID0gX3NwbGl0S2V5KGtleSk7XG4gIHJldHVybiBvYmogPT4ge1xuICAgIGZvciAoY29uc3QgayBvZiBrZXlzKSB7XG4gICAgICBpZiAoayA9PT0gJycpIHtcbiAgICAgICAgLy8gRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHk6XG4gICAgICAgIC8vIENoYXJ0LmhlbHBlcnMuY29yZSByZXNvbHZlT2JqZWN0S2V5IHNob3VsZCBicmVhayBhdCBlbXB0eSBrZXlcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBvYmogPSBvYmogJiYgb2JqW2tdO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZU9iamVjdEtleShvYmo6IEFueU9iamVjdCwga2V5OiBzdHJpbmcpOiBhbnkge1xuICBjb25zdCByZXNvbHZlciA9IGtleVJlc29sdmVyc1trZXldIHx8IChrZXlSZXNvbHZlcnNba2V5XSA9IF9nZXRLZXlSZXNvbHZlcihrZXkpKTtcbiAgcmV0dXJuIHJlc29sdmVyKG9iaik7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9jYXBpdGFsaXplKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cblxuZXhwb3J0IGNvbnN0IGRlZmluZWQgPSAodmFsdWU6IHVua25vd24pID0+IHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCc7XG5cbmV4cG9ydCBjb25zdCBpc0Z1bmN0aW9uID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkgPT4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xuXG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzExMjg4NTUvY29tcGFyaW5nLWVjbWE2LXNldHMtZm9yLWVxdWFsaXR5IzMxMTI5Mzg0XG5leHBvcnQgY29uc3Qgc2V0c0VxdWFsID0gPFQ+KGE6IFNldDxUPiwgYjogU2V0PFQ+KSA9PiB7XG4gIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAoY29uc3QgaXRlbSBvZiBhKSB7XG4gICAgaWYgKCFiLmhhcyhpdGVtKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gZSAtIFRoZSBldmVudFxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9pc0NsaWNrRXZlbnQoZTogQ2hhcnRFdmVudCkge1xuICByZXR1cm4gZS50eXBlID09PSAnbW91c2V1cCcgfHwgZS50eXBlID09PSAnY2xpY2snIHx8IGUudHlwZSA9PT0gJ2NvbnRleHRtZW51Jztcbn1cbiIsICJpbXBvcnQgdHlwZSB7UG9pbnR9IGZyb20gJy4uL3R5cGVzL2dlb21ldHJpYy5qcyc7XG5pbXBvcnQge2lzRmluaXRlIGFzIGlzRmluaXRlTnVtYmVyfSBmcm9tICcuL2hlbHBlcnMuY29yZS5qcyc7XG5cbi8qKlxuICogQGFsaWFzIENoYXJ0LmhlbHBlcnMubWF0aFxuICogQG5hbWVzcGFjZVxuICovXG5cbmV4cG9ydCBjb25zdCBQSSA9IE1hdGguUEk7XG5leHBvcnQgY29uc3QgVEFVID0gMiAqIFBJO1xuZXhwb3J0IGNvbnN0IFBJVEFVID0gVEFVICsgUEk7XG5leHBvcnQgY29uc3QgSU5GSU5JVFkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG5leHBvcnQgY29uc3QgUkFEX1BFUl9ERUcgPSBQSSAvIDE4MDtcbmV4cG9ydCBjb25zdCBIQUxGX1BJID0gUEkgLyAyO1xuZXhwb3J0IGNvbnN0IFFVQVJURVJfUEkgPSBQSSAvIDQ7XG5leHBvcnQgY29uc3QgVFdPX1RISVJEU19QSSA9IFBJICogMiAvIDM7XG5cbmV4cG9ydCBjb25zdCBsb2cxMCA9IE1hdGgubG9nMTA7XG5leHBvcnQgY29uc3Qgc2lnbiA9IE1hdGguc2lnbjtcblxuZXhwb3J0IGZ1bmN0aW9uIGFsbW9zdEVxdWFscyh4OiBudW1iZXIsIHk6IG51bWJlciwgZXBzaWxvbjogbnVtYmVyKSB7XG4gIHJldHVybiBNYXRoLmFicyh4IC0geSkgPCBlcHNpbG9uO1xufVxuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBuaWNlIG51bWJlciBhbGdvcml0aG0gdXNlZCBpbiBkZXRlcm1pbmluZyB3aGVyZSBheGlzIGxhYmVscyB3aWxsIGdvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuaWNlTnVtKHJhbmdlOiBudW1iZXIpIHtcbiAgY29uc3Qgcm91bmRlZFJhbmdlID0gTWF0aC5yb3VuZChyYW5nZSk7XG4gIHJhbmdlID0gYWxtb3N0RXF1YWxzKHJhbmdlLCByb3VuZGVkUmFuZ2UsIHJhbmdlIC8gMTAwMCkgPyByb3VuZGVkUmFuZ2UgOiByYW5nZTtcbiAgY29uc3QgbmljZVJhbmdlID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IobG9nMTAocmFuZ2UpKSk7XG4gIGNvbnN0IGZyYWN0aW9uID0gcmFuZ2UgLyBuaWNlUmFuZ2U7XG4gIGNvbnN0IG5pY2VGcmFjdGlvbiA9IGZyYWN0aW9uIDw9IDEgPyAxIDogZnJhY3Rpb24gPD0gMiA/IDIgOiBmcmFjdGlvbiA8PSA1ID8gNSA6IDEwO1xuICByZXR1cm4gbmljZUZyYWN0aW9uICogbmljZVJhbmdlO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgZmFjdG9ycyBzb3J0ZWQgZnJvbSAxIHRvIHNxcnQodmFsdWUpXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2ZhY3Rvcml6ZSh2YWx1ZTogbnVtYmVyKSB7XG4gIGNvbnN0IHJlc3VsdDogbnVtYmVyW10gPSBbXTtcbiAgY29uc3Qgc3FydCA9IE1hdGguc3FydCh2YWx1ZSk7XG4gIGxldCBpOiBudW1iZXI7XG5cbiAgZm9yIChpID0gMTsgaSA8IHNxcnQ7IGkrKykge1xuICAgIGlmICh2YWx1ZSAlIGkgPT09IDApIHtcbiAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgICAgcmVzdWx0LnB1c2godmFsdWUgLyBpKTtcbiAgICB9XG4gIH1cbiAgaWYgKHNxcnQgPT09IChzcXJ0IHwgMCkpIHsgLy8gaWYgdmFsdWUgaXMgYSBzcXVhcmUgbnVtYmVyXG4gICAgcmVzdWx0LnB1c2goc3FydCk7XG4gIH1cblxuICByZXN1bHQuc29ydCgoYSwgYikgPT4gYSAtIGIpLnBvcCgpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIobjogdW5rbm93bik6IG4gaXMgbnVtYmVyIHtcbiAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4gYXMgc3RyaW5nKSkgJiYgaXNGaW5pdGUobiBhcyBudW1iZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxtb3N0V2hvbGUoeDogbnVtYmVyLCBlcHNpbG9uOiBudW1iZXIpIHtcbiAgY29uc3Qgcm91bmRlZCA9IE1hdGgucm91bmQoeCk7XG4gIHJldHVybiAoKHJvdW5kZWQgLSBlcHNpbG9uKSA8PSB4KSAmJiAoKHJvdW5kZWQgKyBlcHNpbG9uKSA+PSB4KTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX3NldE1pbkFuZE1heEJ5S2V5KFxuICBhcnJheTogUmVjb3JkPHN0cmluZywgbnVtYmVyPltdLFxuICB0YXJnZXQ6IHsgbWluOiBudW1iZXIsIG1heDogbnVtYmVyIH0sXG4gIHByb3BlcnR5OiBzdHJpbmdcbikge1xuICBsZXQgaTogbnVtYmVyLCBpbGVuOiBudW1iZXIsIHZhbHVlOiBudW1iZXI7XG5cbiAgZm9yIChpID0gMCwgaWxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGlsZW47IGkrKykge1xuICAgIHZhbHVlID0gYXJyYXlbaV1bcHJvcGVydHldO1xuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICB0YXJnZXQubWluID0gTWF0aC5taW4odGFyZ2V0Lm1pbiwgdmFsdWUpO1xuICAgICAgdGFyZ2V0Lm1heCA9IE1hdGgubWF4KHRhcmdldC5tYXgsIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFucyhkZWdyZWVzOiBudW1iZXIpIHtcbiAgcmV0dXJuIGRlZ3JlZXMgKiAoUEkgLyAxODApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9EZWdyZWVzKHJhZGlhbnM6IG51bWJlcikge1xuICByZXR1cm4gcmFkaWFucyAqICgxODAgLyBQSSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzXG4gKiBpLmUuIHRoZSBudW1iZXIgb2YgZGlnaXRzIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LCBvZiB0aGUgdmFsdWUgb2YgdGhpcyBOdW1iZXIuXG4gKiBAcGFyYW0geCAtIEEgbnVtYmVyLlxuICogQHJldHVybnMgVGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcy5cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZGVjaW1hbFBsYWNlcyh4OiBudW1iZXIpIHtcbiAgaWYgKCFpc0Zpbml0ZU51bWJlcih4KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgZSA9IDE7XG4gIGxldCBwID0gMDtcbiAgd2hpbGUgKE1hdGgucm91bmQoeCAqIGUpIC8gZSAhPT0geCkge1xuICAgIGUgKj0gMTA7XG4gICAgcCsrO1xuICB9XG4gIHJldHVybiBwO1xufVxuXG4vLyBHZXRzIHRoZSBhbmdsZSBmcm9tIHZlcnRpY2FsIHVwcmlnaHQgdG8gdGhlIHBvaW50IGFib3V0IGEgY2VudHJlLlxuZXhwb3J0IGZ1bmN0aW9uIGdldEFuZ2xlRnJvbVBvaW50KFxuICBjZW50cmVQb2ludDogUG9pbnQsXG4gIGFuZ2xlUG9pbnQ6IFBvaW50XG4pIHtcbiAgY29uc3QgZGlzdGFuY2VGcm9tWENlbnRlciA9IGFuZ2xlUG9pbnQueCAtIGNlbnRyZVBvaW50Lng7XG4gIGNvbnN0IGRpc3RhbmNlRnJvbVlDZW50ZXIgPSBhbmdsZVBvaW50LnkgLSBjZW50cmVQb2ludC55O1xuICBjb25zdCByYWRpYWxEaXN0YW5jZUZyb21DZW50ZXIgPSBNYXRoLnNxcnQoZGlzdGFuY2VGcm9tWENlbnRlciAqIGRpc3RhbmNlRnJvbVhDZW50ZXIgKyBkaXN0YW5jZUZyb21ZQ2VudGVyICogZGlzdGFuY2VGcm9tWUNlbnRlcik7XG5cbiAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMihkaXN0YW5jZUZyb21ZQ2VudGVyLCBkaXN0YW5jZUZyb21YQ2VudGVyKTtcblxuICBpZiAoYW5nbGUgPCAoLTAuNSAqIFBJKSkge1xuICAgIGFuZ2xlICs9IFRBVTsgLy8gbWFrZSBzdXJlIHRoZSByZXR1cm5lZCBhbmdsZSBpcyBpbiB0aGUgcmFuZ2Ugb2YgKC1QSS8yLCAzUEkvMl1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYW5nbGUsXG4gICAgZGlzdGFuY2U6IHJhZGlhbERpc3RhbmNlRnJvbUNlbnRlclxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VCZXR3ZWVuUG9pbnRzKHB0MTogUG9pbnQsIHB0MjogUG9pbnQpIHtcbiAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhwdDIueCAtIHB0MS54LCAyKSArIE1hdGgucG93KHB0Mi55IC0gcHQxLnksIDIpKTtcbn1cblxuLyoqXG4gKiBTaG9ydGVzdCBkaXN0YW5jZSBiZXR3ZWVuIGFuZ2xlcywgaW4gZWl0aGVyIGRpcmVjdGlvbi5cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfYW5nbGVEaWZmKGE6IG51bWJlciwgYjogbnVtYmVyKSB7XG4gIHJldHVybiAoYSAtIGIgKyBQSVRBVSkgJSBUQVUgLSBQSTtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgYW5nbGUgdG8gYmUgYmV0d2VlbiAwIGFuZCAyKlBJXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX25vcm1hbGl6ZUFuZ2xlKGE6IG51bWJlcikge1xuICByZXR1cm4gKGEgJSBUQVUgKyBUQVUpICUgVEFVO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfYW5nbGVCZXR3ZWVuKGFuZ2xlOiBudW1iZXIsIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBzYW1lQW5nbGVJc0Z1bGxDaXJjbGU/OiBib29sZWFuKSB7XG4gIGNvbnN0IGEgPSBfbm9ybWFsaXplQW5nbGUoYW5nbGUpO1xuICBjb25zdCBzID0gX25vcm1hbGl6ZUFuZ2xlKHN0YXJ0KTtcbiAgY29uc3QgZSA9IF9ub3JtYWxpemVBbmdsZShlbmQpO1xuICBjb25zdCBhbmdsZVRvU3RhcnQgPSBfbm9ybWFsaXplQW5nbGUocyAtIGEpO1xuICBjb25zdCBhbmdsZVRvRW5kID0gX25vcm1hbGl6ZUFuZ2xlKGUgLSBhKTtcbiAgY29uc3Qgc3RhcnRUb0FuZ2xlID0gX25vcm1hbGl6ZUFuZ2xlKGEgLSBzKTtcbiAgY29uc3QgZW5kVG9BbmdsZSA9IF9ub3JtYWxpemVBbmdsZShhIC0gZSk7XG4gIHJldHVybiBhID09PSBzIHx8IGEgPT09IGUgfHwgKHNhbWVBbmdsZUlzRnVsbENpcmNsZSAmJiBzID09PSBlKVxuICAgIHx8IChhbmdsZVRvU3RhcnQgPiBhbmdsZVRvRW5kICYmIHN0YXJ0VG9BbmdsZSA8IGVuZFRvQW5nbGUpO1xufVxuXG4vKipcbiAqIExpbWl0IGB2YWx1ZWAgYmV0d2VlbiBgbWluYCBhbmQgYG1heGBcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIG1pblxuICogQHBhcmFtIG1heFxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9saW1pdFZhbHVlKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuICByZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2ludDE2UmFuZ2UodmFsdWU6IG51bWJlcikge1xuICByZXR1cm4gX2xpbWl0VmFsdWUodmFsdWUsIC0zMjc2OCwgMzI3NjcpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIHN0YXJ0XG4gKiBAcGFyYW0gZW5kXG4gKiBAcGFyYW0gW2Vwc2lsb25dXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2lzQmV0d2Vlbih2YWx1ZTogbnVtYmVyLCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgZXBzaWxvbiA9IDFlLTYpIHtcbiAgcmV0dXJuIHZhbHVlID49IE1hdGgubWluKHN0YXJ0LCBlbmQpIC0gZXBzaWxvbiAmJiB2YWx1ZSA8PSBNYXRoLm1heChzdGFydCwgZW5kKSArIGVwc2lsb247XG59XG4iLCAiaW1wb3J0IHtfY2FwaXRhbGl6ZX0gZnJvbSAnLi9oZWxwZXJzLmNvcmUuanMnO1xuXG4vKipcbiAqIEJpbmFyeSBzZWFyY2hcbiAqIEBwYXJhbSB0YWJsZSAtIHRoZSB0YWJsZSBzZWFyY2guIG11c3QgYmUgc29ydGVkIVxuICogQHBhcmFtIHZhbHVlIC0gdmFsdWUgdG8gZmluZFxuICogQHBhcmFtIGNtcFxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9sb29rdXAoXG4gIHRhYmxlOiBudW1iZXJbXSxcbiAgdmFsdWU6IG51bWJlcixcbiAgY21wPzogKHZhbHVlOiBudW1iZXIpID0+IGJvb2xlYW5cbik6IHtsbzogbnVtYmVyLCBoaTogbnVtYmVyfTtcbmV4cG9ydCBmdW5jdGlvbiBfbG9va3VwPFQ+KFxuICB0YWJsZTogVFtdLFxuICB2YWx1ZTogbnVtYmVyLFxuICBjbXA6ICh2YWx1ZTogbnVtYmVyKSA9PiBib29sZWFuXG4pOiB7bG86IG51bWJlciwgaGk6IG51bWJlcn07XG5leHBvcnQgZnVuY3Rpb24gX2xvb2t1cChcbiAgdGFibGU6IHVua25vd25bXSxcbiAgdmFsdWU6IG51bWJlcixcbiAgY21wPzogKHZhbHVlOiBudW1iZXIpID0+IGJvb2xlYW5cbikge1xuICBjbXAgPSBjbXAgfHwgKChpbmRleCkgPT4gdGFibGVbaW5kZXhdIDwgdmFsdWUpO1xuICBsZXQgaGkgPSB0YWJsZS5sZW5ndGggLSAxO1xuICBsZXQgbG8gPSAwO1xuICBsZXQgbWlkOiBudW1iZXI7XG5cbiAgd2hpbGUgKGhpIC0gbG8gPiAxKSB7XG4gICAgbWlkID0gKGxvICsgaGkpID4+IDE7XG4gICAgaWYgKGNtcChtaWQpKSB7XG4gICAgICBsbyA9IG1pZDtcbiAgICB9IGVsc2Uge1xuICAgICAgaGkgPSBtaWQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtsbywgaGl9O1xufVxuXG4vKipcbiAqIEJpbmFyeSBzZWFyY2hcbiAqIEBwYXJhbSB0YWJsZSAtIHRoZSB0YWJsZSBzZWFyY2guIG11c3QgYmUgc29ydGVkIVxuICogQHBhcmFtIGtleSAtIHByb3BlcnR5IG5hbWUgZm9yIHRoZSB2YWx1ZSBpbiBlYWNoIGVudHJ5XG4gKiBAcGFyYW0gdmFsdWUgLSB2YWx1ZSB0byBmaW5kXG4gKiBAcGFyYW0gbGFzdCAtIGxvb2t1cCBsYXN0IGluZGV4XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgX2xvb2t1cEJ5S2V5ID0gKFxuICB0YWJsZTogUmVjb3JkPHN0cmluZywgbnVtYmVyPltdLFxuICBrZXk6IHN0cmluZyxcbiAgdmFsdWU6IG51bWJlcixcbiAgbGFzdD86IGJvb2xlYW5cbikgPT5cbiAgX2xvb2t1cCh0YWJsZSwgdmFsdWUsIGxhc3RcbiAgICA/IGluZGV4ID0+IHtcbiAgICAgIGNvbnN0IHRpID0gdGFibGVbaW5kZXhdW2tleV07XG4gICAgICByZXR1cm4gdGkgPCB2YWx1ZSB8fCB0aSA9PT0gdmFsdWUgJiYgdGFibGVbaW5kZXggKyAxXVtrZXldID09PSB2YWx1ZTtcbiAgICB9XG4gICAgOiBpbmRleCA9PiB0YWJsZVtpbmRleF1ba2V5XSA8IHZhbHVlKTtcblxuLyoqXG4gKiBSZXZlcnNlIGJpbmFyeSBzZWFyY2hcbiAqIEBwYXJhbSB0YWJsZSAtIHRoZSB0YWJsZSBzZWFyY2guIG11c3QgYmUgc29ydGVkIVxuICogQHBhcmFtIGtleSAtIHByb3BlcnR5IG5hbWUgZm9yIHRoZSB2YWx1ZSBpbiBlYWNoIGVudHJ5XG4gKiBAcGFyYW0gdmFsdWUgLSB2YWx1ZSB0byBmaW5kXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgX3Jsb29rdXBCeUtleSA9IChcbiAgdGFibGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj5bXSxcbiAga2V5OiBzdHJpbmcsXG4gIHZhbHVlOiBudW1iZXJcbikgPT5cbiAgX2xvb2t1cCh0YWJsZSwgdmFsdWUsIGluZGV4ID0+IHRhYmxlW2luZGV4XVtrZXldID49IHZhbHVlKTtcblxuLyoqXG4gKiBSZXR1cm4gc3Vic2V0IG9mIGB2YWx1ZXNgIGJldHdlZW4gYG1pbmAgYW5kIGBtYXhgIGluY2x1c2l2ZS5cbiAqIFZhbHVlcyBhcmUgYXNzdW1lZCB0byBiZSBpbiBzb3J0ZWQgb3JkZXIuXG4gKiBAcGFyYW0gdmFsdWVzIC0gc29ydGVkIGFycmF5IG9mIHZhbHVlc1xuICogQHBhcmFtIG1pbiAtIG1pbiB2YWx1ZVxuICogQHBhcmFtIG1heCAtIG1heCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2ZpbHRlckJldHdlZW4odmFsdWVzOiBudW1iZXJbXSwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gIGxldCBzdGFydCA9IDA7XG4gIGxldCBlbmQgPSB2YWx1ZXMubGVuZ3RoO1xuXG4gIHdoaWxlIChzdGFydCA8IGVuZCAmJiB2YWx1ZXNbc3RhcnRdIDwgbWluKSB7XG4gICAgc3RhcnQrKztcbiAgfVxuICB3aGlsZSAoZW5kID4gc3RhcnQgJiYgdmFsdWVzW2VuZCAtIDFdID4gbWF4KSB7XG4gICAgZW5kLS07XG4gIH1cblxuICByZXR1cm4gc3RhcnQgPiAwIHx8IGVuZCA8IHZhbHVlcy5sZW5ndGhcbiAgICA/IHZhbHVlcy5zbGljZShzdGFydCwgZW5kKVxuICAgIDogdmFsdWVzO1xufVxuXG5jb25zdCBhcnJheUV2ZW50cyA9IFsncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSBhcyBjb25zdDtcblxuZXhwb3J0IGludGVyZmFjZSBBcnJheUxpc3RlbmVyPFQ+IHtcbiAgX29uRGF0YVB1c2g/KC4uLml0ZW06IFRbXSk6IHZvaWQ7XG4gIF9vbkRhdGFQb3A/KCk6IHZvaWQ7XG4gIF9vbkRhdGFTaGlmdD8oKTogdm9pZDtcbiAgX29uRGF0YVNwbGljZT8oaW5kZXg6IG51bWJlciwgZGVsZXRlQ291bnQ6IG51bWJlciwgLi4uaXRlbXM6IFRbXSk6IHZvaWQ7XG4gIF9vbkRhdGFVbnNoaWZ0PyguLi5pdGVtOiBUW10pOiB2b2lkO1xufVxuXG4vKipcbiAqIEhvb2tzIHRoZSBhcnJheSBtZXRob2RzIHRoYXQgYWRkIG9yIHJlbW92ZSB2YWx1ZXMgKCdwdXNoJywgcG9wJywgJ3NoaWZ0JywgJ3NwbGljZScsXG4gKiAndW5zaGlmdCcpIGFuZCBub3RpZnkgdGhlIGxpc3RlbmVyIEFGVEVSIHRoZSBhcnJheSBoYXMgYmVlbiBhbHRlcmVkLiBMaXN0ZW5lcnMgYXJlXG4gKiBjYWxsZWQgb24gdGhlICdfb25EYXRhKicgY2FsbGJhY2tzIChlLmcuIF9vbkRhdGFQdXNoLCBldGMuKSB3aXRoIHNhbWUgYXJndW1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuQXJyYXlFdmVudHM8VD4oYXJyYXk6IFRbXSwgbGlzdGVuZXI6IEFycmF5TGlzdGVuZXI8VD4pOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbkFycmF5RXZlbnRzKGFycmF5LCBsaXN0ZW5lcikge1xuICBpZiAoYXJyYXkuX2NoYXJ0anMpIHtcbiAgICBhcnJheS5fY2hhcnRqcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFycmF5LCAnX2NoYXJ0anMnLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIHZhbHVlOiB7XG4gICAgICBsaXN0ZW5lcnM6IFtsaXN0ZW5lcl1cbiAgICB9XG4gIH0pO1xuXG4gIGFycmF5RXZlbnRzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9ICdfb25EYXRhJyArIF9jYXBpdGFsaXplKGtleSk7XG4gICAgY29uc3QgYmFzZSA9IGFycmF5W2tleV07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXJyYXksIGtleSwge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB2YWx1ZSguLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGJhc2UuYXBwbHkodGhpcywgYXJncyk7XG5cbiAgICAgICAgYXJyYXkuX2NoYXJ0anMubGlzdGVuZXJzLmZvckVhY2goKG9iamVjdCkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9iamVjdFttZXRob2RdKC4uLmFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBnaXZlbiBhcnJheSBldmVudCBsaXN0ZW5lciBhbmQgY2xlYW51cCBleHRyYSBhdHRhY2hlZCBwcm9wZXJ0aWVzIChzdWNoIGFzXG4gKiB0aGUgX2NoYXJ0anMgc3R1YiBhbmQgb3ZlcnJpZGRlbiBtZXRob2RzKSBpZiBhcnJheSBkb2Vzbid0IGhhdmUgYW55IG1vcmUgbGlzdGVuZXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5BcnJheUV2ZW50czxUPihhcnJheTogVFtdLCBsaXN0ZW5lcjogQXJyYXlMaXN0ZW5lcjxUPik6IHZvaWQ7XG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5BcnJheUV2ZW50cyhhcnJheSwgbGlzdGVuZXIpIHtcbiAgY29uc3Qgc3R1YiA9IGFycmF5Ll9jaGFydGpzO1xuICBpZiAoIXN0dWIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBsaXN0ZW5lcnMgPSBzdHViLmxpc3RlbmVycztcbiAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIGlmIChsaXN0ZW5lcnMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGFycmF5RXZlbnRzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGRlbGV0ZSBhcnJheVtrZXldO1xuICB9KTtcblxuICBkZWxldGUgYXJyYXkuX2NoYXJ0anM7XG59XG5cbi8qKlxuICogQHBhcmFtIGl0ZW1zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfYXJyYXlVbmlxdWU8VD4oaXRlbXM6IFRbXSkge1xuICBjb25zdCBzZXQgPSBuZXcgU2V0PFQ+KGl0ZW1zKTtcblxuICBpZiAoc2V0LnNpemUgPT09IGl0ZW1zLmxlbmd0aCkge1xuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIHJldHVybiBBcnJheS5mcm9tKHNldCk7XG59XG4iLCAiaW1wb3J0IHR5cGUge0NoYXJ0TWV0YSwgUG9pbnRFbGVtZW50fSBmcm9tICcuLi90eXBlcy9pbmRleC5qcyc7XG5cbmltcG9ydCB7X2xpbWl0VmFsdWV9IGZyb20gJy4vaGVscGVycy5tYXRoLmpzJztcbmltcG9ydCB7X2xvb2t1cEJ5S2V5fSBmcm9tICcuL2hlbHBlcnMuY29sbGVjdGlvbi5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmb250U3RyaW5nKHBpeGVsU2l6ZTogbnVtYmVyLCBmb250U3R5bGU6IHN0cmluZywgZm9udEZhbWlseTogc3RyaW5nKSB7XG4gIHJldHVybiBmb250U3R5bGUgKyAnICcgKyBwaXhlbFNpemUgKyAncHggJyArIGZvbnRGYW1pbHk7XG59XG5cbi8qKlxuKiBSZXF1ZXN0IGFuaW1hdGlvbiBwb2x5ZmlsbFxuKi9cbmV4cG9ydCBjb25zdCByZXF1ZXN0QW5pbUZyYW1lID0gKGZ1bmN0aW9uKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG59KCkpO1xuXG4vKipcbiAqIFRocm90dGxlcyBjYWxsaW5nIGBmbmAgb25jZSBwZXIgYW5pbWF0aW9uIGZyYW1lXG4gKiBMYXRlc3QgYXJndW1lbnRzIGFyZSB1c2VkIG9uIHRoZSBhY3R1YWwgY2FsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGVkPFRBcmdzIGV4dGVuZHMgQXJyYXk8YW55Pj4oXG4gIGZuOiAoLi4uYXJnczogVEFyZ3MpID0+IHZvaWQsXG4gIHRoaXNBcmc6IGFueSxcbikge1xuICBsZXQgYXJnc1RvVXNlID0gW10gYXMgVEFyZ3M7XG4gIGxldCB0aWNraW5nID0gZmFsc2U7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3M6IFRBcmdzKSB7XG4gICAgLy8gU2F2ZSB0aGUgYXJncyBmb3IgdXNlIGxhdGVyXG4gICAgYXJnc1RvVXNlID0gYXJncztcbiAgICBpZiAoIXRpY2tpbmcpIHtcbiAgICAgIHRpY2tpbmcgPSB0cnVlO1xuICAgICAgcmVxdWVzdEFuaW1GcmFtZS5jYWxsKHdpbmRvdywgKCkgPT4ge1xuICAgICAgICB0aWNraW5nID0gZmFsc2U7XG4gICAgICAgIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3NUb1VzZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogRGVib3VuY2VzIGNhbGxpbmcgYGZuYCBmb3IgYGRlbGF5YCBtc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2U8VEFyZ3MgZXh0ZW5kcyBBcnJheTxhbnk+PihmbjogKC4uLmFyZ3M6IFRBcmdzKSA9PiB2b2lkLCBkZWxheTogbnVtYmVyKSB7XG4gIGxldCB0aW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJnczogVEFyZ3MpIHtcbiAgICBpZiAoZGVsYXkpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZuLCBkZWxheSwgYXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gZGVsYXk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgJ3N0YXJ0JyB0byAnbGVmdCcsICdlbmQnIHRvICdyaWdodCcgYW5kIG90aGVycyB0byAnY2VudGVyJ1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IF90b0xlZnRSaWdodENlbnRlciA9IChhbGlnbjogJ3N0YXJ0JyB8ICdlbmQnIHwgJ2NlbnRlcicpID0+IGFsaWduID09PSAnc3RhcnQnID8gJ2xlZnQnIDogYWxpZ24gPT09ICdlbmQnID8gJ3JpZ2h0JyA6ICdjZW50ZXInO1xuXG4vKipcbiAqIFJldHVybnMgYHN0YXJ0YCwgYGVuZGAgb3IgYChzdGFydCArIGVuZCkgLyAyYCBkZXBlbmRpbmcgb24gYGFsaWduYC4gRGVmYXVsdHMgdG8gYGNlbnRlcmBcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjb25zdCBfYWxpZ25TdGFydEVuZCA9IChhbGlnbjogJ3N0YXJ0JyB8ICdlbmQnIHwgJ2NlbnRlcicsIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKSA9PiBhbGlnbiA9PT0gJ3N0YXJ0JyA/IHN0YXJ0IDogYWxpZ24gPT09ICdlbmQnID8gZW5kIDogKHN0YXJ0ICsgZW5kKSAvIDI7XG5cbi8qKlxuICogUmV0dXJucyBgbGVmdGAsIGByaWdodGAgb3IgYChsZWZ0ICsgcmlnaHQpIC8gMmAgZGVwZW5kaW5nIG9uIGBhbGlnbmAuIERlZmF1bHRzIHRvIGBsZWZ0YFxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IF90ZXh0WCA9IChhbGlnbjogJ2xlZnQnIHwgJ3JpZ2h0JyB8ICdjZW50ZXInLCBsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIsIHJ0bDogYm9vbGVhbikgPT4ge1xuICBjb25zdCBjaGVjayA9IHJ0bCA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gIHJldHVybiBhbGlnbiA9PT0gY2hlY2sgPyByaWdodCA6IGFsaWduID09PSAnY2VudGVyJyA/IChsZWZ0ICsgcmlnaHQpIC8gMiA6IGxlZnQ7XG59O1xuXG4vKipcbiAqIFJldHVybiBzdGFydCBhbmQgY291bnQgb2YgdmlzaWJsZSBwb2ludHMuXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2dldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHMobWV0YTogQ2hhcnRNZXRhPCdsaW5lJyB8ICdzY2F0dGVyJz4sIHBvaW50czogUG9pbnRFbGVtZW50W10sIGFuaW1hdGlvbnNEaXNhYmxlZDogYm9vbGVhbikge1xuICBjb25zdCBwb2ludENvdW50ID0gcG9pbnRzLmxlbmd0aDtcblxuICBsZXQgc3RhcnQgPSAwO1xuICBsZXQgY291bnQgPSBwb2ludENvdW50O1xuXG4gIGlmIChtZXRhLl9zb3J0ZWQpIHtcbiAgICBjb25zdCB7aVNjYWxlLCBfcGFyc2VkfSA9IG1ldGE7XG4gICAgY29uc3QgYXhpcyA9IGlTY2FsZS5heGlzO1xuICAgIGNvbnN0IHttaW4sIG1heCwgbWluRGVmaW5lZCwgbWF4RGVmaW5lZH0gPSBpU2NhbGUuZ2V0VXNlckJvdW5kcygpO1xuXG4gICAgaWYgKG1pbkRlZmluZWQpIHtcbiAgICAgIHN0YXJ0ID0gX2xpbWl0VmFsdWUoTWF0aC5taW4oXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgTmVlZCB0byB0eXBlIF9wYXJzZWRcbiAgICAgICAgX2xvb2t1cEJ5S2V5KF9wYXJzZWQsIGlTY2FsZS5heGlzLCBtaW4pLmxvLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIE5lZWQgdG8gZml4IHR5cGVzIG9uIF9sb29rdXBCeUtleVxuICAgICAgICBhbmltYXRpb25zRGlzYWJsZWQgPyBwb2ludENvdW50IDogX2xvb2t1cEJ5S2V5KHBvaW50cywgYXhpcywgaVNjYWxlLmdldFBpeGVsRm9yVmFsdWUobWluKSkubG8pLFxuICAgICAgMCwgcG9pbnRDb3VudCAtIDEpO1xuICAgIH1cbiAgICBpZiAobWF4RGVmaW5lZCkge1xuICAgICAgY291bnQgPSBfbGltaXRWYWx1ZShNYXRoLm1heChcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBOZWVkIHRvIHR5cGUgX3BhcnNlZFxuICAgICAgICBfbG9va3VwQnlLZXkoX3BhcnNlZCwgaVNjYWxlLmF4aXMsIG1heCwgdHJ1ZSkuaGkgKyAxLFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIE5lZWQgdG8gZml4IHR5cGVzIG9uIF9sb29rdXBCeUtleVxuICAgICAgICBhbmltYXRpb25zRGlzYWJsZWQgPyAwIDogX2xvb2t1cEJ5S2V5KHBvaW50cywgYXhpcywgaVNjYWxlLmdldFBpeGVsRm9yVmFsdWUobWF4KSwgdHJ1ZSkuaGkgKyAxKSxcbiAgICAgIHN0YXJ0LCBwb2ludENvdW50KSAtIHN0YXJ0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb3VudCA9IHBvaW50Q291bnQgLSBzdGFydDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge3N0YXJ0LCBjb3VudH07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBzY2FsZSByYW5nZXMgaGF2ZSBjaGFuZ2VkLlxuICogQHBhcmFtIHtvYmplY3R9IG1ldGEgLSBkYXRhc2V0IG1ldGEuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfc2NhbGVSYW5nZXNDaGFuZ2VkKG1ldGEpIHtcbiAgY29uc3Qge3hTY2FsZSwgeVNjYWxlLCBfc2NhbGVSYW5nZXN9ID0gbWV0YTtcbiAgY29uc3QgbmV3UmFuZ2VzID0ge1xuICAgIHhtaW46IHhTY2FsZS5taW4sXG4gICAgeG1heDogeFNjYWxlLm1heCxcbiAgICB5bWluOiB5U2NhbGUubWluLFxuICAgIHltYXg6IHlTY2FsZS5tYXhcbiAgfTtcbiAgaWYgKCFfc2NhbGVSYW5nZXMpIHtcbiAgICBtZXRhLl9zY2FsZVJhbmdlcyA9IG5ld1JhbmdlcztcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBjb25zdCBjaGFuZ2VkID0gX3NjYWxlUmFuZ2VzLnhtaW4gIT09IHhTY2FsZS5taW5cblx0XHR8fCBfc2NhbGVSYW5nZXMueG1heCAhPT0geFNjYWxlLm1heFxuXHRcdHx8IF9zY2FsZVJhbmdlcy55bWluICE9PSB5U2NhbGUubWluXG5cdFx0fHwgX3NjYWxlUmFuZ2VzLnltYXggIT09IHlTY2FsZS5tYXg7XG5cbiAgT2JqZWN0LmFzc2lnbihfc2NhbGVSYW5nZXMsIG5ld1Jhbmdlcyk7XG4gIHJldHVybiBjaGFuZ2VkO1xufVxuIiwgImltcG9ydCB7UEksIFRBVSwgSEFMRl9QSX0gZnJvbSAnLi9oZWxwZXJzLm1hdGguanMnO1xuXG5jb25zdCBhdEVkZ2UgPSAodDogbnVtYmVyKSA9PiB0ID09PSAwIHx8IHQgPT09IDE7XG5jb25zdCBlbGFzdGljSW4gPSAodDogbnVtYmVyLCBzOiBudW1iZXIsIHA6IG51bWJlcikgPT4gLShNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0IC0gcykgKiBUQVUgLyBwKSk7XG5jb25zdCBlbGFzdGljT3V0ID0gKHQ6IG51bWJlciwgczogbnVtYmVyLCBwOiBudW1iZXIpID0+IE1hdGgucG93KDIsIC0xMCAqIHQpICogTWF0aC5zaW4oKHQgLSBzKSAqIFRBVSAvIHApICsgMTtcblxuLyoqXG4gKiBFYXNpbmcgZnVuY3Rpb25zIGFkYXB0ZWQgZnJvbSBSb2JlcnQgUGVubmVyJ3MgZWFzaW5nIGVxdWF0aW9ucy5cbiAqIEBuYW1lc3BhY2UgQ2hhcnQuaGVscGVycy5lYXNpbmcuZWZmZWN0c1xuICogQHNlZSBodHRwOi8vd3d3LnJvYmVydHBlbm5lci5jb20vZWFzaW5nL1xuICovXG5jb25zdCBlZmZlY3RzID0ge1xuICBsaW5lYXI6ICh0OiBudW1iZXIpID0+IHQsXG5cbiAgZWFzZUluUXVhZDogKHQ6IG51bWJlcikgPT4gdCAqIHQsXG5cbiAgZWFzZU91dFF1YWQ6ICh0OiBudW1iZXIpID0+IC10ICogKHQgLSAyKSxcblxuICBlYXNlSW5PdXRRdWFkOiAodDogbnVtYmVyKSA9PiAoKHQgLz0gMC41KSA8IDEpXG4gICAgPyAwLjUgKiB0ICogdFxuICAgIDogLTAuNSAqICgoLS10KSAqICh0IC0gMikgLSAxKSxcblxuICBlYXNlSW5DdWJpYzogKHQ6IG51bWJlcikgPT4gdCAqIHQgKiB0LFxuXG4gIGVhc2VPdXRDdWJpYzogKHQ6IG51bWJlcikgPT4gKHQgLT0gMSkgKiB0ICogdCArIDEsXG5cbiAgZWFzZUluT3V0Q3ViaWM6ICh0OiBudW1iZXIpID0+ICgodCAvPSAwLjUpIDwgMSlcbiAgICA/IDAuNSAqIHQgKiB0ICogdFxuICAgIDogMC41ICogKCh0IC09IDIpICogdCAqIHQgKyAyKSxcblxuICBlYXNlSW5RdWFydDogKHQ6IG51bWJlcikgPT4gdCAqIHQgKiB0ICogdCxcblxuICBlYXNlT3V0UXVhcnQ6ICh0OiBudW1iZXIpID0+IC0oKHQgLT0gMSkgKiB0ICogdCAqIHQgLSAxKSxcblxuICBlYXNlSW5PdXRRdWFydDogKHQ6IG51bWJlcikgPT4gKCh0IC89IDAuNSkgPCAxKVxuICAgID8gMC41ICogdCAqIHQgKiB0ICogdFxuICAgIDogLTAuNSAqICgodCAtPSAyKSAqIHQgKiB0ICogdCAtIDIpLFxuXG4gIGVhc2VJblF1aW50OiAodDogbnVtYmVyKSA9PiB0ICogdCAqIHQgKiB0ICogdCxcblxuICBlYXNlT3V0UXVpbnQ6ICh0OiBudW1iZXIpID0+ICh0IC09IDEpICogdCAqIHQgKiB0ICogdCArIDEsXG5cbiAgZWFzZUluT3V0UXVpbnQ6ICh0OiBudW1iZXIpID0+ICgodCAvPSAwLjUpIDwgMSlcbiAgICA/IDAuNSAqIHQgKiB0ICogdCAqIHQgKiB0XG4gICAgOiAwLjUgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgKiB0ICsgMiksXG5cbiAgZWFzZUluU2luZTogKHQ6IG51bWJlcikgPT4gLU1hdGguY29zKHQgKiBIQUxGX1BJKSArIDEsXG5cbiAgZWFzZU91dFNpbmU6ICh0OiBudW1iZXIpID0+IE1hdGguc2luKHQgKiBIQUxGX1BJKSxcblxuICBlYXNlSW5PdXRTaW5lOiAodDogbnVtYmVyKSA9PiAtMC41ICogKE1hdGguY29zKFBJICogdCkgLSAxKSxcblxuICBlYXNlSW5FeHBvOiAodDogbnVtYmVyKSA9PiAodCA9PT0gMCkgPyAwIDogTWF0aC5wb3coMiwgMTAgKiAodCAtIDEpKSxcblxuICBlYXNlT3V0RXhwbzogKHQ6IG51bWJlcikgPT4gKHQgPT09IDEpID8gMSA6IC1NYXRoLnBvdygyLCAtMTAgKiB0KSArIDEsXG5cbiAgZWFzZUluT3V0RXhwbzogKHQ6IG51bWJlcikgPT4gYXRFZGdlKHQpID8gdCA6IHQgPCAwLjVcbiAgICA/IDAuNSAqIE1hdGgucG93KDIsIDEwICogKHQgKiAyIC0gMSkpXG4gICAgOiAwLjUgKiAoLU1hdGgucG93KDIsIC0xMCAqICh0ICogMiAtIDEpKSArIDIpLFxuXG4gIGVhc2VJbkNpcmM6ICh0OiBudW1iZXIpID0+ICh0ID49IDEpID8gdCA6IC0oTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSxcblxuICBlYXNlT3V0Q2lyYzogKHQ6IG51bWJlcikgPT4gTWF0aC5zcXJ0KDEgLSAodCAtPSAxKSAqIHQpLFxuXG4gIGVhc2VJbk91dENpcmM6ICh0OiBudW1iZXIpID0+ICgodCAvPSAwLjUpIDwgMSlcbiAgICA/IC0wLjUgKiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKVxuICAgIDogMC41ICogKE1hdGguc3FydCgxIC0gKHQgLT0gMikgKiB0KSArIDEpLFxuXG4gIGVhc2VJbkVsYXN0aWM6ICh0OiBudW1iZXIpID0+IGF0RWRnZSh0KSA/IHQgOiBlbGFzdGljSW4odCwgMC4wNzUsIDAuMyksXG5cbiAgZWFzZU91dEVsYXN0aWM6ICh0OiBudW1iZXIpID0+IGF0RWRnZSh0KSA/IHQgOiBlbGFzdGljT3V0KHQsIDAuMDc1LCAwLjMpLFxuXG4gIGVhc2VJbk91dEVsYXN0aWModDogbnVtYmVyKSB7XG4gICAgY29uc3QgcyA9IDAuMTEyNTtcbiAgICBjb25zdCBwID0gMC40NTtcbiAgICByZXR1cm4gYXRFZGdlKHQpID8gdCA6XG4gICAgICB0IDwgMC41XG4gICAgICAgID8gMC41ICogZWxhc3RpY0luKHQgKiAyLCBzLCBwKVxuICAgICAgICA6IDAuNSArIDAuNSAqIGVsYXN0aWNPdXQodCAqIDIgLSAxLCBzLCBwKTtcbiAgfSxcblxuICBlYXNlSW5CYWNrKHQ6IG51bWJlcikge1xuICAgIGNvbnN0IHMgPSAxLjcwMTU4O1xuICAgIHJldHVybiB0ICogdCAqICgocyArIDEpICogdCAtIHMpO1xuICB9LFxuXG4gIGVhc2VPdXRCYWNrKHQ6IG51bWJlcikge1xuICAgIGNvbnN0IHMgPSAxLjcwMTU4O1xuICAgIHJldHVybiAodCAtPSAxKSAqIHQgKiAoKHMgKyAxKSAqIHQgKyBzKSArIDE7XG4gIH0sXG5cbiAgZWFzZUluT3V0QmFjayh0OiBudW1iZXIpIHtcbiAgICBsZXQgcyA9IDEuNzAxNTg7XG4gICAgaWYgKCh0IC89IDAuNSkgPCAxKSB7XG4gICAgICByZXR1cm4gMC41ICogKHQgKiB0ICogKCgocyAqPSAoMS41MjUpKSArIDEpICogdCAtIHMpKTtcbiAgICB9XG4gICAgcmV0dXJuIDAuNSAqICgodCAtPSAyKSAqIHQgKiAoKChzICo9ICgxLjUyNSkpICsgMSkgKiB0ICsgcykgKyAyKTtcbiAgfSxcblxuICBlYXNlSW5Cb3VuY2U6ICh0OiBudW1iZXIpID0+IDEgLSBlZmZlY3RzLmVhc2VPdXRCb3VuY2UoMSAtIHQpLFxuXG4gIGVhc2VPdXRCb3VuY2UodDogbnVtYmVyKSB7XG4gICAgY29uc3QgbSA9IDcuNTYyNTtcbiAgICBjb25zdCBkID0gMi43NTtcbiAgICBpZiAodCA8ICgxIC8gZCkpIHtcbiAgICAgIHJldHVybiBtICogdCAqIHQ7XG4gICAgfVxuICAgIGlmICh0IDwgKDIgLyBkKSkge1xuICAgICAgcmV0dXJuIG0gKiAodCAtPSAoMS41IC8gZCkpICogdCArIDAuNzU7XG4gICAgfVxuICAgIGlmICh0IDwgKDIuNSAvIGQpKSB7XG4gICAgICByZXR1cm4gbSAqICh0IC09ICgyLjI1IC8gZCkpICogdCArIDAuOTM3NTtcbiAgICB9XG4gICAgcmV0dXJuIG0gKiAodCAtPSAoMi42MjUgLyBkKSkgKiB0ICsgMC45ODQzNzU7XG4gIH0sXG5cbiAgZWFzZUluT3V0Qm91bmNlOiAodDogbnVtYmVyKSA9PiAodCA8IDAuNSlcbiAgICA/IGVmZmVjdHMuZWFzZUluQm91bmNlKHQgKiAyKSAqIDAuNVxuICAgIDogZWZmZWN0cy5lYXNlT3V0Qm91bmNlKHQgKiAyIC0gMSkgKiAwLjUgKyAwLjUsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBFYXNpbmdGdW5jdGlvbiA9IGtleW9mIHR5cGVvZiBlZmZlY3RzXG5cbmV4cG9ydCBkZWZhdWx0IGVmZmVjdHM7XG4iLCAiaW1wb3J0IHtDb2xvcn0gZnJvbSAnQGt1cmtsZS9jb2xvcic7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdHRlcm5PckdyYWRpZW50KHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgQ2FudmFzUGF0dGVybiB8IENhbnZhc0dyYWRpZW50IHtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCB0eXBlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ1tvYmplY3QgQ2FudmFzUGF0dGVybl0nIHx8IHR5cGUgPT09ICdbb2JqZWN0IENhbnZhc0dyYWRpZW50XSc7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb2xvcih2YWx1ZTogQ2FudmFzR3JhZGllbnQpOiBDYW52YXNHcmFkaWVudDtcbmV4cG9ydCBmdW5jdGlvbiBjb2xvcih2YWx1ZTogQ2FudmFzUGF0dGVybik6IENhbnZhc1BhdHRlcm47XG5leHBvcnQgZnVuY3Rpb24gY29sb3IoXG4gIHZhbHVlOlxuICB8IHN0cmluZ1xuICB8IHsgcjogbnVtYmVyOyBnOiBudW1iZXI7IGI6IG51bWJlcjsgYTogbnVtYmVyIH1cbiAgfCBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1cbiAgfCBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVxuKTogQ29sb3I7XG5leHBvcnQgZnVuY3Rpb24gY29sb3IodmFsdWUpIHtcbiAgcmV0dXJuIGlzUGF0dGVybk9yR3JhZGllbnQodmFsdWUpID8gdmFsdWUgOiBuZXcgQ29sb3IodmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG92ZXJDb2xvcih2YWx1ZTogQ2FudmFzR3JhZGllbnQpOiBDYW52YXNHcmFkaWVudDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRIb3ZlckNvbG9yKHZhbHVlOiBDYW52YXNQYXR0ZXJuKTogQ2FudmFzUGF0dGVybjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRIb3ZlckNvbG9yKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0SG92ZXJDb2xvcih2YWx1ZSkge1xuICByZXR1cm4gaXNQYXR0ZXJuT3JHcmFkaWVudCh2YWx1ZSlcbiAgICA/IHZhbHVlXG4gICAgOiBuZXcgQ29sb3IodmFsdWUpLnNhdHVyYXRlKDAuNSkuZGFya2VuKDAuMSkuaGV4U3RyaW5nKCk7XG59XG4iLCAiY29uc3QgbnVtYmVycyA9IFsneCcsICd5JywgJ2JvcmRlcldpZHRoJywgJ3JhZGl1cycsICd0ZW5zaW9uJ107XG5jb25zdCBjb2xvcnMgPSBbJ2NvbG9yJywgJ2JvcmRlckNvbG9yJywgJ2JhY2tncm91bmRDb2xvciddO1xuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlBbmltYXRpb25zRGVmYXVsdHMoZGVmYXVsdHMpIHtcbiAgZGVmYXVsdHMuc2V0KCdhbmltYXRpb24nLCB7XG4gICAgZGVsYXk6IHVuZGVmaW5lZCxcbiAgICBkdXJhdGlvbjogMTAwMCxcbiAgICBlYXNpbmc6ICdlYXNlT3V0UXVhcnQnLFxuICAgIGZuOiB1bmRlZmluZWQsXG4gICAgZnJvbTogdW5kZWZpbmVkLFxuICAgIGxvb3A6IHVuZGVmaW5lZCxcbiAgICB0bzogdW5kZWZpbmVkLFxuICAgIHR5cGU6IHVuZGVmaW5lZCxcbiAgfSk7XG5cbiAgZGVmYXVsdHMuZGVzY3JpYmUoJ2FuaW1hdGlvbicsIHtcbiAgICBfZmFsbGJhY2s6IGZhbHNlLFxuICAgIF9pbmRleGFibGU6IGZhbHNlLFxuICAgIF9zY3JpcHRhYmxlOiAobmFtZSkgPT4gbmFtZSAhPT0gJ29uUHJvZ3Jlc3MnICYmIG5hbWUgIT09ICdvbkNvbXBsZXRlJyAmJiBuYW1lICE9PSAnZm4nLFxuICB9KTtcblxuICBkZWZhdWx0cy5zZXQoJ2FuaW1hdGlvbnMnLCB7XG4gICAgY29sb3JzOiB7XG4gICAgICB0eXBlOiAnY29sb3InLFxuICAgICAgcHJvcGVydGllczogY29sb3JzXG4gICAgfSxcbiAgICBudW1iZXJzOiB7XG4gICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgIHByb3BlcnRpZXM6IG51bWJlcnNcbiAgICB9LFxuICB9KTtcblxuICBkZWZhdWx0cy5kZXNjcmliZSgnYW5pbWF0aW9ucycsIHtcbiAgICBfZmFsbGJhY2s6ICdhbmltYXRpb24nLFxuICB9KTtcblxuICBkZWZhdWx0cy5zZXQoJ3RyYW5zaXRpb25zJywge1xuICAgIGFjdGl2ZToge1xuICAgICAgYW5pbWF0aW9uOiB7XG4gICAgICAgIGR1cmF0aW9uOiA0MDBcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlc2l6ZToge1xuICAgICAgYW5pbWF0aW9uOiB7XG4gICAgICAgIGR1cmF0aW9uOiAwXG4gICAgICB9XG4gICAgfSxcbiAgICBzaG93OiB7XG4gICAgICBhbmltYXRpb25zOiB7XG4gICAgICAgIGNvbG9yczoge1xuICAgICAgICAgIGZyb206ICd0cmFuc3BhcmVudCdcbiAgICAgICAgfSxcbiAgICAgICAgdmlzaWJsZToge1xuICAgICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgICBkdXJhdGlvbjogMCAvLyBzaG93IGltbWVkaWF0ZWx5XG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfSxcbiAgICBoaWRlOiB7XG4gICAgICBhbmltYXRpb25zOiB7XG4gICAgICAgIGNvbG9yczoge1xuICAgICAgICAgIHRvOiAndHJhbnNwYXJlbnQnXG4gICAgICAgIH0sXG4gICAgICAgIHZpc2libGU6IHtcbiAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICAgICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICAgICAgICBmbjogdiA9PiB2IHwgMCAvLyBmb3Iga2VlcGluZyB0aGUgZGF0YXNldCB2aXNpYmxlIGFsbCB0aGUgd2F5IHRocm91Z2ggdGhlIGFuaW1hdGlvblxuICAgICAgICB9LFxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TGF5b3V0c0RlZmF1bHRzKGRlZmF1bHRzKSB7XG4gIGRlZmF1bHRzLnNldCgnbGF5b3V0Jywge1xuICAgIGF1dG9QYWRkaW5nOiB0cnVlLFxuICAgIHBhZGRpbmc6IHtcbiAgICAgIHRvcDogMCxcbiAgICAgIHJpZ2h0OiAwLFxuICAgICAgYm90dG9tOiAwLFxuICAgICAgbGVmdDogMFxuICAgIH1cbiAgfSk7XG59XG4iLCAiXG5jb25zdCBpbnRsQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgSW50bC5OdW1iZXJGb3JtYXQ+KCk7XG5cbmZ1bmN0aW9uIGdldE51bWJlckZvcm1hdChsb2NhbGU6IHN0cmluZywgb3B0aW9ucz86IEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3QgY2FjaGVLZXkgPSBsb2NhbGUgKyBKU09OLnN0cmluZ2lmeShvcHRpb25zKTtcbiAgbGV0IGZvcm1hdHRlciA9IGludGxDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICBpZiAoIWZvcm1hdHRlcikge1xuICAgIGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIG9wdGlvbnMpO1xuICAgIGludGxDYWNoZS5zZXQoY2FjaGVLZXksIGZvcm1hdHRlcik7XG4gIH1cbiAgcmV0dXJuIGZvcm1hdHRlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW06IG51bWJlciwgbG9jYWxlOiBzdHJpbmcsIG9wdGlvbnM/OiBJbnRsLk51bWJlckZvcm1hdE9wdGlvbnMpIHtcbiAgcmV0dXJuIGdldE51bWJlckZvcm1hdChsb2NhbGUsIG9wdGlvbnMpLmZvcm1hdChudW0pO1xufVxuIiwgImltcG9ydCB7aXNBcnJheX0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvcmUuanMnO1xuaW1wb3J0IHtmb3JtYXROdW1iZXJ9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5pbnRsLmpzJztcbmltcG9ydCB7bG9nMTB9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5tYXRoLmpzJztcblxuLyoqXG4gKiBOYW1lc3BhY2UgdG8gaG9sZCBmb3JtYXR0ZXJzIGZvciBkaWZmZXJlbnQgdHlwZXMgb2YgdGlja3NcbiAqIEBuYW1lc3BhY2UgQ2hhcnQuVGlja3MuZm9ybWF0dGVyc1xuICovXG5jb25zdCBmb3JtYXR0ZXJzID0ge1xuICAvKipcbiAgICogRm9ybWF0dGVyIGZvciB2YWx1ZSBsYWJlbHNcbiAgICogQG1ldGhvZCBDaGFydC5UaWNrcy5mb3JtYXR0ZXJzLnZhbHVlc1xuICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRvIGRpc3BsYXlcbiAgICogQHJldHVybiB7c3RyaW5nfHN0cmluZ1tdfSB0aGUgbGFiZWwgdG8gZGlzcGxheVxuICAgKi9cbiAgdmFsdWVzKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gLyoqIEB0eXBlIHtzdHJpbmdbXX0gKi8gKHZhbHVlKSA6ICcnICsgdmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvcm1hdHRlciBmb3IgbnVtZXJpYyB0aWNrc1xuICAgKiBAbWV0aG9kIENoYXJ0LlRpY2tzLmZvcm1hdHRlcnMubnVtZXJpY1xuICAgKiBAcGFyYW0gdGlja1ZhbHVlIHtudW1iZXJ9IHRoZSB2YWx1ZSB0byBiZSBmb3JtYXR0ZWRcbiAgICogQHBhcmFtIGluZGV4IHtudW1iZXJ9IHRoZSBwb3NpdGlvbiBvZiB0aGUgdGlja1ZhbHVlIHBhcmFtZXRlciBpbiB0aGUgdGlja3MgYXJyYXlcbiAgICogQHBhcmFtIHRpY2tzIHtvYmplY3RbXX0gdGhlIGxpc3Qgb2YgdGlja3MgYmVpbmcgY29udmVydGVkXG4gICAqIEByZXR1cm4ge3N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0aWNrVmFsdWUgcGFyYW1ldGVyXG4gICAqL1xuICBudW1lcmljKHRpY2tWYWx1ZSwgaW5kZXgsIHRpY2tzKSB7XG4gICAgaWYgKHRpY2tWYWx1ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuICcwJzsgLy8gbmV2ZXIgc2hvdyBkZWNpbWFsIHBsYWNlcyBmb3IgMFxuICAgIH1cblxuICAgIGNvbnN0IGxvY2FsZSA9IHRoaXMuY2hhcnQub3B0aW9ucy5sb2NhbGU7XG4gICAgbGV0IG5vdGF0aW9uO1xuICAgIGxldCBkZWx0YSA9IHRpY2tWYWx1ZTsgLy8gVGhpcyBpcyB1c2VkIHdoZW4gdGhlcmUgYXJlIGxlc3MgdGhhbiAyIHRpY2tzIGFzIHRoZSB0aWNrIGludGVydmFsLlxuXG4gICAgaWYgKHRpY2tzLmxlbmd0aCA+IDEpIHtcbiAgICAgIC8vIGFsbCB0aWNrcyBhcmUgc21hbGwgb3IgdGhlcmUgaHVnZSBudW1iZXJzOyB1c2Ugc2NpZW50aWZpYyBub3RhdGlvblxuICAgICAgY29uc3QgbWF4VGljayA9IE1hdGgubWF4KE1hdGguYWJzKHRpY2tzWzBdLnZhbHVlKSwgTWF0aC5hYnModGlja3NbdGlja3MubGVuZ3RoIC0gMV0udmFsdWUpKTtcbiAgICAgIGlmIChtYXhUaWNrIDwgMWUtNCB8fCBtYXhUaWNrID4gMWUrMTUpIHtcbiAgICAgICAgbm90YXRpb24gPSAnc2NpZW50aWZpYyc7XG4gICAgICB9XG5cbiAgICAgIGRlbHRhID0gY2FsY3VsYXRlRGVsdGEodGlja1ZhbHVlLCB0aWNrcyk7XG4gICAgfVxuXG4gICAgY29uc3QgbG9nRGVsdGEgPSBsb2cxMChNYXRoLmFicyhkZWx0YSkpO1xuXG4gICAgLy8gV2hlbiBkYXRhc2V0cyBoYXZlIHZhbHVlcyBhcHByb2FjaGluZyBOdW1iZXIuTUFYX1ZBTFVFLCB0aGUgdGljayBjYWxjdWxhdGlvbnMgbWlnaHQgcmVzdWx0IGluXG4gICAgLy8gaW5maW5pdHkgYW5kIGV2ZW50dWFsbHkgTmFOLiBQYXNzaW5nIE5hTiBmb3IgbWluaW11bUZyYWN0aW9uRGlnaXRzIG9yIG1heGltdW1GcmFjdGlvbkRpZ2l0c1xuICAgIC8vIHdpbGwgbWFrZSB0aGUgbnVtYmVyIGZvcm1hdHRlciB0aHJvdy4gU28gaW5zdGVhZCB3ZSBjaGVjayBmb3IgaXNOYU4gYW5kIHVzZSBhIGZhbGxiYWNrIHZhbHVlLlxuICAgIC8vXG4gICAgLy8gdG9GaXhlZCBoYXMgYSBtYXggb2YgMjAgZGVjaW1hbCBwbGFjZXNcbiAgICBjb25zdCBudW1EZWNpbWFsID0gaXNOYU4obG9nRGVsdGEpID8gMSA6IE1hdGgubWF4KE1hdGgubWluKC0xICogTWF0aC5mbG9vcihsb2dEZWx0YSksIDIwKSwgMCk7XG5cbiAgICBjb25zdCBvcHRpb25zID0ge25vdGF0aW9uLCBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IG51bURlY2ltYWwsIG1heGltdW1GcmFjdGlvbkRpZ2l0czogbnVtRGVjaW1hbH07XG4gICAgT2JqZWN0LmFzc2lnbihvcHRpb25zLCB0aGlzLm9wdGlvbnMudGlja3MuZm9ybWF0KTtcblxuICAgIHJldHVybiBmb3JtYXROdW1iZXIodGlja1ZhbHVlLCBsb2NhbGUsIG9wdGlvbnMpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEZvcm1hdHRlciBmb3IgbG9nYXJpdGhtaWMgdGlja3NcbiAgICogQG1ldGhvZCBDaGFydC5UaWNrcy5mb3JtYXR0ZXJzLmxvZ2FyaXRobWljXG4gICAqIEBwYXJhbSB0aWNrVmFsdWUge251bWJlcn0gdGhlIHZhbHVlIHRvIGJlIGZvcm1hdHRlZFxuICAgKiBAcGFyYW0gaW5kZXgge251bWJlcn0gdGhlIHBvc2l0aW9uIG9mIHRoZSB0aWNrVmFsdWUgcGFyYW1ldGVyIGluIHRoZSB0aWNrcyBhcnJheVxuICAgKiBAcGFyYW0gdGlja3Mge29iamVjdFtdfSB0aGUgbGlzdCBvZiB0aWNrcyBiZWluZyBjb252ZXJ0ZWRcbiAgICogQHJldHVybiB7c3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRpY2tWYWx1ZSBwYXJhbWV0ZXJcbiAgICovXG4gIGxvZ2FyaXRobWljKHRpY2tWYWx1ZSwgaW5kZXgsIHRpY2tzKSB7XG4gICAgaWYgKHRpY2tWYWx1ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuICcwJztcbiAgICB9XG4gICAgY29uc3QgcmVtYWluID0gdGlja3NbaW5kZXhdLnNpZ25pZmljYW5kIHx8ICh0aWNrVmFsdWUgLyAoTWF0aC5wb3coMTAsIE1hdGguZmxvb3IobG9nMTAodGlja1ZhbHVlKSkpKSk7XG4gICAgaWYgKFsxLCAyLCAzLCA1LCAxMCwgMTVdLmluY2x1ZGVzKHJlbWFpbikgfHwgaW5kZXggPiAwLjggKiB0aWNrcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmb3JtYXR0ZXJzLm51bWVyaWMuY2FsbCh0aGlzLCB0aWNrVmFsdWUsIGluZGV4LCB0aWNrcyk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG59O1xuXG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZURlbHRhKHRpY2tWYWx1ZSwgdGlja3MpIHtcbiAgLy8gRmlndXJlIG91dCBob3cgbWFueSBkaWdpdHMgdG8gc2hvd1xuICAvLyBUaGUgc3BhY2UgYmV0d2VlbiB0aGUgZmlyc3QgdHdvIHRpY2tzIG1pZ2h0IGJlIHNtYWxsZXIgdGhhbiBub3JtYWwgc3BhY2luZ1xuICBsZXQgZGVsdGEgPSB0aWNrcy5sZW5ndGggPiAzID8gdGlja3NbMl0udmFsdWUgLSB0aWNrc1sxXS52YWx1ZSA6IHRpY2tzWzFdLnZhbHVlIC0gdGlja3NbMF0udmFsdWU7XG5cbiAgLy8gSWYgd2UgaGF2ZSBhIG51bWJlciBsaWtlIDIuNSBhcyB0aGUgZGVsdGEsIGZpZ3VyZSBvdXQgaG93IG1hbnkgZGVjaW1hbCBwbGFjZXMgd2UgbmVlZFxuICBpZiAoTWF0aC5hYnMoZGVsdGEpID49IDEgJiYgdGlja1ZhbHVlICE9PSBNYXRoLmZsb29yKHRpY2tWYWx1ZSkpIHtcbiAgICAvLyBub3QgYW4gaW50ZWdlclxuICAgIGRlbHRhID0gdGlja1ZhbHVlIC0gTWF0aC5mbG9vcih0aWNrVmFsdWUpO1xuICB9XG4gIHJldHVybiBkZWx0YTtcbn1cblxuLyoqXG4gKiBOYW1lc3BhY2UgdG8gaG9sZCBzdGF0aWMgdGljayBnZW5lcmF0aW9uIGZ1bmN0aW9uc1xuICogQG5hbWVzcGFjZSBDaGFydC5UaWNrc1xuICovXG5leHBvcnQgZGVmYXVsdCB7Zm9ybWF0dGVyc307XG4iLCAiaW1wb3J0IFRpY2tzIGZyb20gJy4vY29yZS50aWNrcy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVNjYWxlRGVmYXVsdHMoZGVmYXVsdHMpIHtcbiAgZGVmYXVsdHMuc2V0KCdzY2FsZScsIHtcbiAgICBkaXNwbGF5OiB0cnVlLFxuICAgIG9mZnNldDogZmFsc2UsXG4gICAgcmV2ZXJzZTogZmFsc2UsXG4gICAgYmVnaW5BdFplcm86IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgYm91bmRhcnkgc3RyYXRlZ3kgKGJ5cGFzc2VkIGJ5IG1pbi9tYXggdGltZSBvcHRpb25zKVxuICAgICAqIC0gYGRhdGFgOiBtYWtlIHN1cmUgZGF0YSBhcmUgZnVsbHkgdmlzaWJsZSwgdGlja3Mgb3V0c2lkZSBhcmUgcmVtb3ZlZFxuICAgICAqIC0gYHRpY2tzYDogbWFrZSBzdXJlIHRpY2tzIGFyZSBmdWxseSB2aXNpYmxlLCBkYXRhIG91dHNpZGUgYXJlIHRydW5jYXRlZFxuICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvcHVsbC80NTU2XG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICovXG4gICAgYm91bmRzOiAndGlja3MnLFxuXG4gICAgLyoqXG4gICAgICogQWRkaXRpb24gZ3JhY2UgYWRkZWQgdG8gbWF4IGFuZCByZWR1Y2VkIGZyb20gbWluIGRhdGEgdmFsdWUuXG4gICAgICogQHNpbmNlIDMuMC4wXG4gICAgICovXG4gICAgZ3JhY2U6IDAsXG5cbiAgICAvLyBncmlkIGxpbmUgc2V0dGluZ3NcbiAgICBncmlkOiB7XG4gICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgbGluZVdpZHRoOiAxLFxuICAgICAgZHJhd09uQ2hhcnRBcmVhOiB0cnVlLFxuICAgICAgZHJhd1RpY2tzOiB0cnVlLFxuICAgICAgdGlja0xlbmd0aDogOCxcbiAgICAgIHRpY2tXaWR0aDogKF9jdHgsIG9wdGlvbnMpID0+IG9wdGlvbnMubGluZVdpZHRoLFxuICAgICAgdGlja0NvbG9yOiAoX2N0eCwgb3B0aW9ucykgPT4gb3B0aW9ucy5jb2xvcixcbiAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgfSxcblxuICAgIGJvcmRlcjoge1xuICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgIGRhc2g6IFtdLFxuICAgICAgZGFzaE9mZnNldDogMC4wLFxuICAgICAgd2lkdGg6IDFcbiAgICB9LFxuXG4gICAgLy8gc2NhbGUgdGl0bGVcbiAgICB0aXRsZToge1xuICAgICAgLy8gZGlzcGxheSBwcm9wZXJ0eVxuICAgICAgZGlzcGxheTogZmFsc2UsXG5cbiAgICAgIC8vIGFjdHVhbCBsYWJlbFxuICAgICAgdGV4dDogJycsXG5cbiAgICAgIC8vIHRvcC9ib3R0b20gcGFkZGluZ1xuICAgICAgcGFkZGluZzoge1xuICAgICAgICB0b3A6IDQsXG4gICAgICAgIGJvdHRvbTogNFxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBsYWJlbCBzZXR0aW5nc1xuICAgIHRpY2tzOiB7XG4gICAgICBtaW5Sb3RhdGlvbjogMCxcbiAgICAgIG1heFJvdGF0aW9uOiA1MCxcbiAgICAgIG1pcnJvcjogZmFsc2UsXG4gICAgICB0ZXh0U3Ryb2tlV2lkdGg6IDAsXG4gICAgICB0ZXh0U3Ryb2tlQ29sb3I6ICcnLFxuICAgICAgcGFkZGluZzogMyxcbiAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICBhdXRvU2tpcDogdHJ1ZSxcbiAgICAgIGF1dG9Ta2lwUGFkZGluZzogMyxcbiAgICAgIGxhYmVsT2Zmc2V0OiAwLFxuICAgICAgLy8gV2UgcGFzcyB0aHJvdWdoIGFycmF5cyB0byBiZSByZW5kZXJlZCBhcyBtdWx0aWxpbmUgbGFiZWxzLCB3ZSBjb252ZXJ0IE90aGVycyB0byBzdHJpbmdzIGhlcmUuXG4gICAgICBjYWxsYmFjazogVGlja3MuZm9ybWF0dGVycy52YWx1ZXMsXG4gICAgICBtaW5vcjoge30sXG4gICAgICBtYWpvcjoge30sXG4gICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICBjcm9zc0FsaWduOiAnbmVhcicsXG5cbiAgICAgIHNob3dMYWJlbEJhY2tkcm9wOiBmYWxzZSxcbiAgICAgIGJhY2tkcm9wQ29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpJyxcbiAgICAgIGJhY2tkcm9wUGFkZGluZzogMixcbiAgICB9XG4gIH0pO1xuXG4gIGRlZmF1bHRzLnJvdXRlKCdzY2FsZS50aWNrcycsICdjb2xvcicsICcnLCAnY29sb3InKTtcbiAgZGVmYXVsdHMucm91dGUoJ3NjYWxlLmdyaWQnLCAnY29sb3InLCAnJywgJ2JvcmRlckNvbG9yJyk7XG4gIGRlZmF1bHRzLnJvdXRlKCdzY2FsZS5ib3JkZXInLCAnY29sb3InLCAnJywgJ2JvcmRlckNvbG9yJyk7XG4gIGRlZmF1bHRzLnJvdXRlKCdzY2FsZS50aXRsZScsICdjb2xvcicsICcnLCAnY29sb3InKTtcblxuICBkZWZhdWx0cy5kZXNjcmliZSgnc2NhbGUnLCB7XG4gICAgX2ZhbGxiYWNrOiBmYWxzZSxcbiAgICBfc2NyaXB0YWJsZTogKG5hbWUpID0+ICFuYW1lLnN0YXJ0c1dpdGgoJ2JlZm9yZScpICYmICFuYW1lLnN0YXJ0c1dpdGgoJ2FmdGVyJykgJiYgbmFtZSAhPT0gJ2NhbGxiYWNrJyAmJiBuYW1lICE9PSAncGFyc2VyJyxcbiAgICBfaW5kZXhhYmxlOiAobmFtZSkgPT4gbmFtZSAhPT0gJ2JvcmRlckRhc2gnICYmIG5hbWUgIT09ICd0aWNrQm9yZGVyRGFzaCcgJiYgbmFtZSAhPT0gJ2Rhc2gnLFxuICB9KTtcblxuICBkZWZhdWx0cy5kZXNjcmliZSgnc2NhbGVzJywge1xuICAgIF9mYWxsYmFjazogJ3NjYWxlJyxcbiAgfSk7XG5cbiAgZGVmYXVsdHMuZGVzY3JpYmUoJ3NjYWxlLnRpY2tzJywge1xuICAgIF9zY3JpcHRhYmxlOiAobmFtZSkgPT4gbmFtZSAhPT0gJ2JhY2tkcm9wUGFkZGluZycgJiYgbmFtZSAhPT0gJ2NhbGxiYWNrJyxcbiAgICBfaW5kZXhhYmxlOiAobmFtZSkgPT4gbmFtZSAhPT0gJ2JhY2tkcm9wUGFkZGluZycsXG4gIH0pO1xufVxuIiwgImltcG9ydCB7Z2V0SG92ZXJDb2xvcn0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvbG9yLmpzJztcbmltcG9ydCB7aXNPYmplY3QsIG1lcmdlLCB2YWx1ZU9yRGVmYXVsdH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvcmUuanMnO1xuaW1wb3J0IHthcHBseUFuaW1hdGlvbnNEZWZhdWx0c30gZnJvbSAnLi9jb3JlLmFuaW1hdGlvbnMuZGVmYXVsdHMuanMnO1xuaW1wb3J0IHthcHBseUxheW91dHNEZWZhdWx0c30gZnJvbSAnLi9jb3JlLmxheW91dHMuZGVmYXVsdHMuanMnO1xuaW1wb3J0IHthcHBseVNjYWxlRGVmYXVsdHN9IGZyb20gJy4vY29yZS5zY2FsZS5kZWZhdWx0cy5qcyc7XG5cbmV4cG9ydCBjb25zdCBvdmVycmlkZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuZXhwb3J0IGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gbm9kZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRTY29wZShub2RlLCBrZXkpIHtcbiAgaWYgKCFrZXkpIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuICBjb25zdCBrZXlzID0ga2V5LnNwbGl0KCcuJyk7XG4gIGZvciAobGV0IGkgPSAwLCBuID0ga2V5cy5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICBjb25zdCBrID0ga2V5c1tpXTtcbiAgICBub2RlID0gbm9kZVtrXSB8fCAobm9kZVtrXSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBzZXQocm9vdCwgc2NvcGUsIHZhbHVlcykge1xuICBpZiAodHlwZW9mIHNjb3BlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBtZXJnZShnZXRTY29wZShyb290LCBzY29wZSksIHZhbHVlcyk7XG4gIH1cbiAgcmV0dXJuIG1lcmdlKGdldFNjb3BlKHJvb3QsICcnKSwgc2NvcGUpO1xufVxuXG4vKipcbiAqIFBsZWFzZSB1c2UgdGhlIG1vZHVsZSdzIGRlZmF1bHQgZXhwb3J0IHdoaWNoIHByb3ZpZGVzIGEgc2luZ2xldG9uIGluc3RhbmNlXG4gKiBOb3RlOiBjbGFzcyBpcyBleHBvcnRlZCBmb3IgdHlwZWRvY1xuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdHMge1xuICBjb25zdHJ1Y3RvcihfZGVzY3JpcHRvcnMsIF9hcHBsaWVycykge1xuICAgIHRoaXMuYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwwLDAsMC4xKSc7XG4gICAgdGhpcy5ib3JkZXJDb2xvciA9ICdyZ2JhKDAsMCwwLDAuMSknO1xuICAgIHRoaXMuY29sb3IgPSAnIzY2Nic7XG4gICAgdGhpcy5kYXRhc2V0cyA9IHt9O1xuICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyA9IChjb250ZXh0KSA9PiBjb250ZXh0LmNoYXJ0LnBsYXRmb3JtLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICB0aGlzLmVsZW1lbnRzID0ge307XG4gICAgdGhpcy5ldmVudHMgPSBbXG4gICAgICAnbW91c2Vtb3ZlJyxcbiAgICAgICdtb3VzZW91dCcsXG4gICAgICAnY2xpY2snLFxuICAgICAgJ3RvdWNoc3RhcnQnLFxuICAgICAgJ3RvdWNobW92ZSdcbiAgICBdO1xuICAgIHRoaXMuZm9udCA9IHtcbiAgICAgIGZhbWlseTogXCInSGVsdmV0aWNhIE5ldWUnLCAnSGVsdmV0aWNhJywgJ0FyaWFsJywgc2Fucy1zZXJpZlwiLFxuICAgICAgc2l6ZTogMTIsXG4gICAgICBzdHlsZTogJ25vcm1hbCcsXG4gICAgICBsaW5lSGVpZ2h0OiAxLjIsXG4gICAgICB3ZWlnaHQ6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuaG92ZXIgPSB7fTtcbiAgICB0aGlzLmhvdmVyQmFja2dyb3VuZENvbG9yID0gKGN0eCwgb3B0aW9ucykgPT4gZ2V0SG92ZXJDb2xvcihvcHRpb25zLmJhY2tncm91bmRDb2xvcik7XG4gICAgdGhpcy5ob3ZlckJvcmRlckNvbG9yID0gKGN0eCwgb3B0aW9ucykgPT4gZ2V0SG92ZXJDb2xvcihvcHRpb25zLmJvcmRlckNvbG9yKTtcbiAgICB0aGlzLmhvdmVyQ29sb3IgPSAoY3R4LCBvcHRpb25zKSA9PiBnZXRIb3ZlckNvbG9yKG9wdGlvbnMuY29sb3IpO1xuICAgIHRoaXMuaW5kZXhBeGlzID0gJ3gnO1xuICAgIHRoaXMuaW50ZXJhY3Rpb24gPSB7XG4gICAgICBtb2RlOiAnbmVhcmVzdCcsXG4gICAgICBpbnRlcnNlY3Q6IHRydWUsXG4gICAgICBpbmNsdWRlSW52aXNpYmxlOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5tYWludGFpbkFzcGVjdFJhdGlvID0gdHJ1ZTtcbiAgICB0aGlzLm9uSG92ZXIgPSBudWxsO1xuICAgIHRoaXMub25DbGljayA9IG51bGw7XG4gICAgdGhpcy5wYXJzaW5nID0gdHJ1ZTtcbiAgICB0aGlzLnBsdWdpbnMgPSB7fTtcbiAgICB0aGlzLnJlc3BvbnNpdmUgPSB0cnVlO1xuICAgIHRoaXMuc2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zY2FsZXMgPSB7fTtcbiAgICB0aGlzLnNob3dMaW5lID0gdHJ1ZTtcbiAgICB0aGlzLmRyYXdBY3RpdmVFbGVtZW50c09uVG9wID0gdHJ1ZTtcblxuICAgIHRoaXMuZGVzY3JpYmUoX2Rlc2NyaXB0b3JzKTtcbiAgICB0aGlzLmFwcGx5KF9hcHBsaWVycyk7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBzY29wZVxuXHQgKiBAcGFyYW0ge29iamVjdH0gW3ZhbHVlc11cblx0ICovXG4gIHNldChzY29wZSwgdmFsdWVzKSB7XG4gICAgcmV0dXJuIHNldCh0aGlzLCBzY29wZSwgdmFsdWVzKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc2NvcGVcblx0ICovXG4gIGdldChzY29wZSkge1xuICAgIHJldHVybiBnZXRTY29wZSh0aGlzLCBzY29wZSk7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBzY29wZVxuXHQgKiBAcGFyYW0ge29iamVjdH0gW3ZhbHVlc11cblx0ICovXG4gIGRlc2NyaWJlKHNjb3BlLCB2YWx1ZXMpIHtcbiAgICByZXR1cm4gc2V0KGRlc2NyaXB0b3JzLCBzY29wZSwgdmFsdWVzKTtcbiAgfVxuXG4gIG92ZXJyaWRlKHNjb3BlLCB2YWx1ZXMpIHtcbiAgICByZXR1cm4gc2V0KG92ZXJyaWRlcywgc2NvcGUsIHZhbHVlcyk7XG4gIH1cblxuICAvKipcblx0ICogUm91dGVzIHRoZSBuYW1lZCBkZWZhdWx0cyB0byBmYWxsYmFjayB0byBhbm90aGVyIHNjb3BlL25hbWUuXG5cdCAqIFRoaXMgcm91dGluZyBpcyB1c2VmdWwgd2hlbiB0aG9zZSB0YXJnZXQgdmFsdWVzLCBsaWtlIGRlZmF1bHRzLmNvbG9yLCBhcmUgY2hhbmdlZCBydW50aW1lLlxuXHQgKiBJZiB0aGUgdmFsdWVzIHdvdWxkIGJlIGNvcGllZCwgdGhlIHJ1bnRpbWUgY2hhbmdlIHdvdWxkIG5vdCB0YWtlIGVmZmVjdC4gQnkgcm91dGluZywgdGhlXG5cdCAqIGZhbGxiYWNrIGlzIGV2YWx1YXRlZCBhdCBlYWNoIGFjY2Vzcywgc28gaXRzIGFsd2F5cyB1cCB0byBkYXRlLlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKlxuXHQgKiBcdGRlZmF1bHRzLnJvdXRlKCdlbGVtZW50cy5hcmMnLCAnYmFja2dyb3VuZENvbG9yJywgJycsICdjb2xvcicpXG5cdCAqICAgLSByZWFkcyB0aGUgYmFja2dyb3VuZENvbG9yIGZyb20gZGVmYXVsdHMuY29sb3Igd2hlbiB1bmRlZmluZWQgbG9jYWxseVxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc2NvcGUgU2NvcGUgdGhpcyByb3V0ZSBhcHBsaWVzIHRvLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBQcm9wZXJ0eSBuYW1lIHRoYXQgc2hvdWxkIGJlIHJvdXRlZCB0byBkaWZmZXJlbnQgbmFtZXNwYWNlIHdoZW4gbm90IGRlZmluZWQgaGVyZS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFNjb3BlIFRoZSBuYW1lc3BhY2Ugd2hlcmUgdGhvc2UgcHJvcGVydGllcyBzaG91bGQgYmUgcm91dGVkIHRvLlxuXHQgKiBFbXB0eSBzdHJpbmcgKCcnKSBpcyB0aGUgcm9vdCBvZiBkZWZhdWx0cy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldE5hbWUgVGhlIHRhcmdldCBuYW1lIGluIHRoZSB0YXJnZXQgc2NvcGUgdGhlIHByb3BlcnR5IHNob3VsZCBiZSByb3V0ZWQgdG8uXG5cdCAqL1xuICByb3V0ZShzY29wZSwgbmFtZSwgdGFyZ2V0U2NvcGUsIHRhcmdldE5hbWUpIHtcbiAgICBjb25zdCBzY29wZU9iamVjdCA9IGdldFNjb3BlKHRoaXMsIHNjb3BlKTtcbiAgICBjb25zdCB0YXJnZXRTY29wZU9iamVjdCA9IGdldFNjb3BlKHRoaXMsIHRhcmdldFNjb3BlKTtcbiAgICBjb25zdCBwcml2YXRlTmFtZSA9ICdfJyArIG5hbWU7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzY29wZU9iamVjdCwge1xuICAgICAgLy8gQSBwcml2YXRlIHByb3BlcnR5IGlzIGRlZmluZWQgdG8gaG9sZCB0aGUgYWN0dWFsIHZhbHVlLCB3aGVuIHRoaXMgcHJvcGVydHkgaXMgc2V0IGluIGl0cyBzY29wZSAoc2V0IGluIHRoZSBzZXR0ZXIpXG4gICAgICBbcHJpdmF0ZU5hbWVdOiB7XG4gICAgICAgIHZhbHVlOiBzY29wZU9iamVjdFtuYW1lXSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH0sXG4gICAgICAvLyBUaGUgYWN0dWFsIHByb3BlcnR5IGlzIGRlZmluZWQgYXMgZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZG8gdGhlIHJvdXRpbmcgd2hlbiB2YWx1ZSBpcyBub3QgbG9jYWxseSBzZXQuXG4gICAgICBbbmFtZV06IHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIGNvbnN0IGxvY2FsID0gdGhpc1twcml2YXRlTmFtZV07XG4gICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGFyZ2V0U2NvcGVPYmplY3RbdGFyZ2V0TmFtZV07XG4gICAgICAgICAgaWYgKGlzT2JqZWN0KGxvY2FsKSkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRhcmdldCwgbG9jYWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdmFsdWVPckRlZmF1bHQobG9jYWwsIHRhcmdldCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgIHRoaXNbcHJpdmF0ZU5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFwcGx5KGFwcGxpZXJzKSB7XG4gICAgYXBwbGllcnMuZm9yRWFjaCgoYXBwbHkpID0+IGFwcGx5KHRoaXMpKTtcbiAgfVxufVxuXG4vLyBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBkZWZhdWx0IC8qICNfX1BVUkVfXyAqLyBuZXcgRGVmYXVsdHMoe1xuICBfc2NyaXB0YWJsZTogKG5hbWUpID0+ICFuYW1lLnN0YXJ0c1dpdGgoJ29uJyksXG4gIF9pbmRleGFibGU6IChuYW1lKSA9PiBuYW1lICE9PSAnZXZlbnRzJyxcbiAgaG92ZXI6IHtcbiAgICBfZmFsbGJhY2s6ICdpbnRlcmFjdGlvbidcbiAgfSxcbiAgaW50ZXJhY3Rpb246IHtcbiAgICBfc2NyaXB0YWJsZTogZmFsc2UsXG4gICAgX2luZGV4YWJsZTogZmFsc2UsXG4gIH1cbn0sIFthcHBseUFuaW1hdGlvbnNEZWZhdWx0cywgYXBwbHlMYXlvdXRzRGVmYXVsdHMsIGFwcGx5U2NhbGVEZWZhdWx0c10pO1xuIiwgImltcG9ydCB0eXBlIHtcbiAgQ2hhcnQsXG4gIFBvaW50LFxuICBGb250U3BlYyxcbiAgQ2FudmFzRm9udFNwZWMsXG4gIFBvaW50U3R5bGUsXG4gIFJlbmRlclRleHRPcHRzLFxuICBCYWNrZHJvcE9wdGlvbnNcbn0gZnJvbSAnLi4vdHlwZXMvaW5kZXguanMnO1xuaW1wb3J0IHR5cGUge1xuICBUUkJMLFxuICBTcGxpbmVQb2ludCxcbiAgUm91bmRlZFJlY3QsXG4gIFRSQkxDb3JuZXJzXG59IGZyb20gJy4uL3R5cGVzL2dlb21ldHJpYy5qcyc7XG5pbXBvcnQge2lzQXJyYXksIGlzTnVsbE9yVW5kZWZ9IGZyb20gJy4vaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCB7UEksIFRBVSwgSEFMRl9QSSwgUVVBUlRFUl9QSSwgVFdPX1RISVJEU19QSSwgUkFEX1BFUl9ERUd9IGZyb20gJy4vaGVscGVycy5tYXRoLmpzJztcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gZm9udCBvYmplY3QgaW50byBhIENTUyBmb250IHN0cmluZy5cbiAqIEBwYXJhbSBmb250IC0gQSBmb250IG9iamVjdC5cbiAqIEByZXR1cm4gVGhlIENTUyBmb250IHN0cmluZy4gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9mb250XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Gb250U3RyaW5nKGZvbnQ6IEZvbnRTcGVjKSB7XG4gIGlmICghZm9udCB8fCBpc051bGxPclVuZGVmKGZvbnQuc2l6ZSkgfHwgaXNOdWxsT3JVbmRlZihmb250LmZhbWlseSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoZm9udC5zdHlsZSA/IGZvbnQuc3R5bGUgKyAnICcgOiAnJylcblx0XHQrIChmb250LndlaWdodCA/IGZvbnQud2VpZ2h0ICsgJyAnIDogJycpXG5cdFx0KyBmb250LnNpemUgKyAncHggJ1xuXHRcdCsgZm9udC5mYW1pbHk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9tZWFzdXJlVGV4dChcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIGRhdGE6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gIGdjOiBzdHJpbmdbXSxcbiAgbG9uZ2VzdDogbnVtYmVyLFxuICBzdHJpbmc6IHN0cmluZ1xuKSB7XG4gIGxldCB0ZXh0V2lkdGggPSBkYXRhW3N0cmluZ107XG4gIGlmICghdGV4dFdpZHRoKSB7XG4gICAgdGV4dFdpZHRoID0gZGF0YVtzdHJpbmddID0gY3R4Lm1lYXN1cmVUZXh0KHN0cmluZykud2lkdGg7XG4gICAgZ2MucHVzaChzdHJpbmcpO1xuICB9XG4gIGlmICh0ZXh0V2lkdGggPiBsb25nZXN0KSB7XG4gICAgbG9uZ2VzdCA9IHRleHRXaWR0aDtcbiAgfVxuICByZXR1cm4gbG9uZ2VzdDtcbn1cblxudHlwZSBUaGluZyA9IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGxcbnR5cGUgVGhpbmdzID0gKFRoaW5nIHwgVGhpbmdbXSlbXVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5leHBvcnQgZnVuY3Rpb24gX2xvbmdlc3RUZXh0KFxuICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgZm9udDogc3RyaW5nLFxuICBhcnJheU9mVGhpbmdzOiBUaGluZ3MsXG4gIGNhY2hlPzoge2RhdGE/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+LCBnYXJiYWdlQ29sbGVjdD86IHN0cmluZ1tdLCBmb250Pzogc3RyaW5nfVxuKSB7XG4gIGNhY2hlID0gY2FjaGUgfHwge307XG4gIGxldCBkYXRhID0gY2FjaGUuZGF0YSA9IGNhY2hlLmRhdGEgfHwge307XG4gIGxldCBnYyA9IGNhY2hlLmdhcmJhZ2VDb2xsZWN0ID0gY2FjaGUuZ2FyYmFnZUNvbGxlY3QgfHwgW107XG5cbiAgaWYgKGNhY2hlLmZvbnQgIT09IGZvbnQpIHtcbiAgICBkYXRhID0gY2FjaGUuZGF0YSA9IHt9O1xuICAgIGdjID0gY2FjaGUuZ2FyYmFnZUNvbGxlY3QgPSBbXTtcbiAgICBjYWNoZS5mb250ID0gZm9udDtcbiAgfVxuXG4gIGN0eC5zYXZlKCk7XG5cbiAgY3R4LmZvbnQgPSBmb250O1xuICBsZXQgbG9uZ2VzdCA9IDA7XG4gIGNvbnN0IGlsZW4gPSBhcnJheU9mVGhpbmdzLmxlbmd0aDtcbiAgbGV0IGk6IG51bWJlciwgajogbnVtYmVyLCBqbGVuOiBudW1iZXIsIHRoaW5nOiBUaGluZyB8IFRoaW5nW10sIG5lc3RlZFRoaW5nOiBUaGluZyB8IFRoaW5nW107XG4gIGZvciAoaSA9IDA7IGkgPCBpbGVuOyBpKyspIHtcbiAgICB0aGluZyA9IGFycmF5T2ZUaGluZ3NbaV07XG5cbiAgICAvLyBVbmRlZmluZWQgc3RyaW5ncyBhbmQgYXJyYXlzIHNob3VsZCBub3QgYmUgbWVhc3VyZWRcbiAgICBpZiAodGhpbmcgIT09IHVuZGVmaW5lZCAmJiB0aGluZyAhPT0gbnVsbCAmJiAhaXNBcnJheSh0aGluZykpIHtcbiAgICAgIGxvbmdlc3QgPSBfbWVhc3VyZVRleHQoY3R4LCBkYXRhLCBnYywgbG9uZ2VzdCwgdGhpbmcpO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh0aGluZykpIHtcbiAgICAgIC8vIGlmIGl0IGlzIGFuIGFycmF5IGxldHMgbWVhc3VyZSBlYWNoIGVsZW1lbnRcbiAgICAgIC8vIHRvIGRvIG1heWJlIHNpbXBsaWZ5IHRoaXMgZnVuY3Rpb24gYSBiaXQgc28gd2UgY2FuIGRvIHRoaXMgbW9yZSByZWN1cnNpdmVseT9cbiAgICAgIGZvciAoaiA9IDAsIGpsZW4gPSB0aGluZy5sZW5ndGg7IGogPCBqbGVuOyBqKyspIHtcbiAgICAgICAgbmVzdGVkVGhpbmcgPSB0aGluZ1tqXTtcbiAgICAgICAgLy8gVW5kZWZpbmVkIHN0cmluZ3MgYW5kIGFycmF5cyBzaG91bGQgbm90IGJlIG1lYXN1cmVkXG4gICAgICAgIGlmIChuZXN0ZWRUaGluZyAhPT0gdW5kZWZpbmVkICYmIG5lc3RlZFRoaW5nICE9PSBudWxsICYmICFpc0FycmF5KG5lc3RlZFRoaW5nKSkge1xuICAgICAgICAgIGxvbmdlc3QgPSBfbWVhc3VyZVRleHQoY3R4LCBkYXRhLCBnYywgbG9uZ2VzdCwgbmVzdGVkVGhpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY3R4LnJlc3RvcmUoKTtcblxuICBjb25zdCBnY0xlbiA9IGdjLmxlbmd0aCAvIDI7XG4gIGlmIChnY0xlbiA+IGFycmF5T2ZUaGluZ3MubGVuZ3RoKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IGdjTGVuOyBpKyspIHtcbiAgICAgIGRlbGV0ZSBkYXRhW2djW2ldXTtcbiAgICB9XG4gICAgZ2Muc3BsaWNlKDAsIGdjTGVuKTtcbiAgfVxuICByZXR1cm4gbG9uZ2VzdDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbGlnbmVkIHBpeGVsIHZhbHVlIHRvIGF2b2lkIGFudGktYWxpYXNpbmcgYmx1clxuICogQHBhcmFtIGNoYXJ0IC0gVGhlIGNoYXJ0IGluc3RhbmNlLlxuICogQHBhcmFtIHBpeGVsIC0gQSBwaXhlbCB2YWx1ZS5cbiAqIEBwYXJhbSB3aWR0aCAtIFRoZSB3aWR0aCBvZiB0aGUgZWxlbWVudC5cbiAqIEByZXR1cm5zIFRoZSBhbGlnbmVkIHBpeGVsIHZhbHVlLlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9hbGlnblBpeGVsKGNoYXJ0OiBDaGFydCwgcGl4ZWw6IG51bWJlciwgd2lkdGg6IG51bWJlcikge1xuICBjb25zdCBkZXZpY2VQaXhlbFJhdGlvID0gY2hhcnQuY3VycmVudERldmljZVBpeGVsUmF0aW87XG4gIGNvbnN0IGhhbGZXaWR0aCA9IHdpZHRoICE9PSAwID8gTWF0aC5tYXgod2lkdGggLyAyLCAwLjUpIDogMDtcbiAgcmV0dXJuIE1hdGgucm91bmQoKHBpeGVsIC0gaGFsZldpZHRoKSAqIGRldmljZVBpeGVsUmF0aW8pIC8gZGV2aWNlUGl4ZWxSYXRpbyArIGhhbGZXaWR0aDtcbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIGVudGlyZSBjYW52YXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckNhbnZhcyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBjdHg/OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgY3R4ID0gY3R4IHx8IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gIGN0eC5zYXZlKCk7XG4gIC8vIGNhbnZhcy53aWR0aCBhbmQgY2FudmFzLmhlaWdodCBkbyBub3QgY29uc2lkZXIgdGhlIGNhbnZhcyB0cmFuc2Zvcm0sXG4gIC8vIHdoaWxlIGNsZWFyUmVjdCBkb2VzXG4gIGN0eC5yZXNldFRyYW5zZm9ybSgpO1xuICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gIGN0eC5yZXN0b3JlKCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhd1BvaW50T3B0aW9ucyB7XG4gIHBvaW50U3R5bGU6IFBvaW50U3R5bGU7XG4gIHJvdGF0aW9uPzogbnVtYmVyO1xuICByYWRpdXM6IG51bWJlcjtcbiAgYm9yZGVyV2lkdGg6IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdQb2ludChcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIG9wdGlvbnM6IERyYXdQb2ludE9wdGlvbnMsXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyXG4pIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICBkcmF3UG9pbnRMZWdlbmQoY3R4LCBvcHRpb25zLCB4LCB5LCBudWxsKTtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmV4cG9ydCBmdW5jdGlvbiBkcmF3UG9pbnRMZWdlbmQoXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICBvcHRpb25zOiBEcmF3UG9pbnRPcHRpb25zLFxuICB4OiBudW1iZXIsXG4gIHk6IG51bWJlcixcbiAgdzogbnVtYmVyXG4pIHtcbiAgbGV0IHR5cGU6IHN0cmluZywgeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIsIHNpemU6IG51bWJlciwgY29ybmVyUmFkaXVzOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIHhPZmZzZXRXOiBudW1iZXIsIHlPZmZzZXRXOiBudW1iZXI7XG4gIGNvbnN0IHN0eWxlID0gb3B0aW9ucy5wb2ludFN0eWxlO1xuICBjb25zdCByb3RhdGlvbiA9IG9wdGlvbnMucm90YXRpb247XG4gIGNvbnN0IHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzO1xuICBsZXQgcmFkID0gKHJvdGF0aW9uIHx8IDApICogUkFEX1BFUl9ERUc7XG5cbiAgaWYgKHN0eWxlICYmIHR5cGVvZiBzdHlsZSA9PT0gJ29iamVjdCcpIHtcbiAgICB0eXBlID0gc3R5bGUudG9TdHJpbmcoKTtcbiAgICBpZiAodHlwZSA9PT0gJ1tvYmplY3QgSFRNTEltYWdlRWxlbWVudF0nIHx8IHR5cGUgPT09ICdbb2JqZWN0IEhUTUxDYW52YXNFbGVtZW50XScpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHgudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgY3R4LnJvdGF0ZShyYWQpO1xuICAgICAgY3R4LmRyYXdJbWFnZShzdHlsZSwgLXN0eWxlLndpZHRoIC8gMiwgLXN0eWxlLmhlaWdodCAvIDIsIHN0eWxlLndpZHRoLCBzdHlsZS5oZWlnaHQpO1xuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNOYU4ocmFkaXVzKSB8fCByYWRpdXMgPD0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGN0eC5iZWdpblBhdGgoKTtcblxuICBzd2l0Y2ggKHN0eWxlKSB7XG4gIC8vIERlZmF1bHQgaW5jbHVkZXMgY2lyY2xlXG4gICAgZGVmYXVsdDpcbiAgICAgIGlmICh3KSB7XG4gICAgICAgIGN0eC5lbGxpcHNlKHgsIHksIHcgLyAyLCByYWRpdXMsIDAsIDAsIFRBVSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgVEFVKTtcbiAgICAgIH1cbiAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3RyaWFuZ2xlJzpcbiAgICAgIHdpZHRoID0gdyA/IHcgLyAyIDogcmFkaXVzO1xuICAgICAgY3R4Lm1vdmVUbyh4ICsgTWF0aC5zaW4ocmFkKSAqIHdpZHRoLCB5IC0gTWF0aC5jb3MocmFkKSAqIHJhZGl1cyk7XG4gICAgICByYWQgKz0gVFdPX1RISVJEU19QSTtcbiAgICAgIGN0eC5saW5lVG8oeCArIE1hdGguc2luKHJhZCkgKiB3aWR0aCwgeSAtIE1hdGguY29zKHJhZCkgKiByYWRpdXMpO1xuICAgICAgcmFkICs9IFRXT19USElSRFNfUEk7XG4gICAgICBjdHgubGluZVRvKHggKyBNYXRoLnNpbihyYWQpICogd2lkdGgsIHkgLSBNYXRoLmNvcyhyYWQpICogcmFkaXVzKTtcbiAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3JlY3RSb3VuZGVkJzpcbiAgICAvLyBOT1RFOiB0aGUgcm91bmRlZCByZWN0IGltcGxlbWVudGF0aW9uIGNoYW5nZWQgdG8gdXNlIGBhcmNgIGluc3RlYWQgb2ZcbiAgICAvLyBgcXVhZHJhdGljQ3VydmVUb2Agc2luY2UgaXQgZ2VuZXJhdGVzIGJldHRlciByZXN1bHRzIHdoZW4gcmVjdCBpc1xuICAgIC8vIGFsbW9zdCBhIGNpcmNsZS4gMC41MTYgKGluc3RlYWQgb2YgMC41KSBwcm9kdWNlcyByZXN1bHRzIHdpdGggdmlzdWFsbHlcbiAgICAvLyBjbG9zZXIgcHJvcG9ydGlvbiB0byB0aGUgcHJldmlvdXMgaW1wbCBhbmQgaXQgaXMgaW5zY3JpYmVkIGluIHRoZVxuICAgIC8vIGNpcmNsZSB3aXRoIGByYWRpdXNgLiBGb3IgbW9yZSBkZXRhaWxzLCBzZWUgdGhlIGZvbGxvd2luZyBQUnM6XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzU1OTdcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvNTg1OFxuICAgICAgY29ybmVyUmFkaXVzID0gcmFkaXVzICogMC41MTY7XG4gICAgICBzaXplID0gcmFkaXVzIC0gY29ybmVyUmFkaXVzO1xuICAgICAgeE9mZnNldCA9IE1hdGguY29zKHJhZCArIFFVQVJURVJfUEkpICogc2l6ZTtcbiAgICAgIHhPZmZzZXRXID0gTWF0aC5jb3MocmFkICsgUVVBUlRFUl9QSSkgKiAodyA/IHcgLyAyIC0gY29ybmVyUmFkaXVzIDogc2l6ZSk7XG4gICAgICB5T2Zmc2V0ID0gTWF0aC5zaW4ocmFkICsgUVVBUlRFUl9QSSkgKiBzaXplO1xuICAgICAgeU9mZnNldFcgPSBNYXRoLnNpbihyYWQgKyBRVUFSVEVSX1BJKSAqICh3ID8gdyAvIDIgLSBjb3JuZXJSYWRpdXMgOiBzaXplKTtcbiAgICAgIGN0eC5hcmMoeCAtIHhPZmZzZXRXLCB5IC0geU9mZnNldCwgY29ybmVyUmFkaXVzLCByYWQgLSBQSSwgcmFkIC0gSEFMRl9QSSk7XG4gICAgICBjdHguYXJjKHggKyB5T2Zmc2V0VywgeSAtIHhPZmZzZXQsIGNvcm5lclJhZGl1cywgcmFkIC0gSEFMRl9QSSwgcmFkKTtcbiAgICAgIGN0eC5hcmMoeCArIHhPZmZzZXRXLCB5ICsgeU9mZnNldCwgY29ybmVyUmFkaXVzLCByYWQsIHJhZCArIEhBTEZfUEkpO1xuICAgICAgY3R4LmFyYyh4IC0geU9mZnNldFcsIHkgKyB4T2Zmc2V0LCBjb3JuZXJSYWRpdXMsIHJhZCArIEhBTEZfUEksIHJhZCArIFBJKTtcbiAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3JlY3QnOlxuICAgICAgaWYgKCFyb3RhdGlvbikge1xuICAgICAgICBzaXplID0gTWF0aC5TUVJUMV8yICogcmFkaXVzO1xuICAgICAgICB3aWR0aCA9IHcgPyB3IC8gMiA6IHNpemU7XG4gICAgICAgIGN0eC5yZWN0KHggLSB3aWR0aCwgeSAtIHNpemUsIDIgKiB3aWR0aCwgMiAqIHNpemUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJhZCArPSBRVUFSVEVSX1BJO1xuICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlICdyZWN0Um90JzpcbiAgICAgIHhPZmZzZXRXID0gTWF0aC5jb3MocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpO1xuICAgICAgeE9mZnNldCA9IE1hdGguY29zKHJhZCkgKiByYWRpdXM7XG4gICAgICB5T2Zmc2V0ID0gTWF0aC5zaW4ocmFkKSAqIHJhZGl1cztcbiAgICAgIHlPZmZzZXRXID0gTWF0aC5zaW4ocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpO1xuICAgICAgY3R4Lm1vdmVUbyh4IC0geE9mZnNldFcsIHkgLSB5T2Zmc2V0KTtcbiAgICAgIGN0eC5saW5lVG8oeCArIHlPZmZzZXRXLCB5IC0geE9mZnNldCk7XG4gICAgICBjdHgubGluZVRvKHggKyB4T2Zmc2V0VywgeSArIHlPZmZzZXQpO1xuICAgICAgY3R4LmxpbmVUbyh4IC0geU9mZnNldFcsIHkgKyB4T2Zmc2V0KTtcbiAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Nyb3NzUm90JzpcbiAgICAgIHJhZCArPSBRVUFSVEVSX1BJO1xuICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlICdjcm9zcyc6XG4gICAgICB4T2Zmc2V0VyA9IE1hdGguY29zKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgIHhPZmZzZXQgPSBNYXRoLmNvcyhyYWQpICogcmFkaXVzO1xuICAgICAgeU9mZnNldCA9IE1hdGguc2luKHJhZCkgKiByYWRpdXM7XG4gICAgICB5T2Zmc2V0VyA9IE1hdGguc2luKHJhZCkgKiAodyA/IHcgLyAyIDogcmFkaXVzKTtcbiAgICAgIGN0eC5tb3ZlVG8oeCAtIHhPZmZzZXRXLCB5IC0geU9mZnNldCk7XG4gICAgICBjdHgubGluZVRvKHggKyB4T2Zmc2V0VywgeSArIHlPZmZzZXQpO1xuICAgICAgY3R4Lm1vdmVUbyh4ICsgeU9mZnNldFcsIHkgLSB4T2Zmc2V0KTtcbiAgICAgIGN0eC5saW5lVG8oeCAtIHlPZmZzZXRXLCB5ICsgeE9mZnNldCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdzdGFyJzpcbiAgICAgIHhPZmZzZXRXID0gTWF0aC5jb3MocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpO1xuICAgICAgeE9mZnNldCA9IE1hdGguY29zKHJhZCkgKiByYWRpdXM7XG4gICAgICB5T2Zmc2V0ID0gTWF0aC5zaW4ocmFkKSAqIHJhZGl1cztcbiAgICAgIHlPZmZzZXRXID0gTWF0aC5zaW4ocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpO1xuICAgICAgY3R4Lm1vdmVUbyh4IC0geE9mZnNldFcsIHkgLSB5T2Zmc2V0KTtcbiAgICAgIGN0eC5saW5lVG8oeCArIHhPZmZzZXRXLCB5ICsgeU9mZnNldCk7XG4gICAgICBjdHgubW92ZVRvKHggKyB5T2Zmc2V0VywgeSAtIHhPZmZzZXQpO1xuICAgICAgY3R4LmxpbmVUbyh4IC0geU9mZnNldFcsIHkgKyB4T2Zmc2V0KTtcbiAgICAgIHJhZCArPSBRVUFSVEVSX1BJO1xuICAgICAgeE9mZnNldFcgPSBNYXRoLmNvcyhyYWQpICogKHcgPyB3IC8gMiA6IHJhZGl1cyk7XG4gICAgICB4T2Zmc2V0ID0gTWF0aC5jb3MocmFkKSAqIHJhZGl1cztcbiAgICAgIHlPZmZzZXQgPSBNYXRoLnNpbihyYWQpICogcmFkaXVzO1xuICAgICAgeU9mZnNldFcgPSBNYXRoLnNpbihyYWQpICogKHcgPyB3IC8gMiA6IHJhZGl1cyk7XG4gICAgICBjdHgubW92ZVRvKHggLSB4T2Zmc2V0VywgeSAtIHlPZmZzZXQpO1xuICAgICAgY3R4LmxpbmVUbyh4ICsgeE9mZnNldFcsIHkgKyB5T2Zmc2V0KTtcbiAgICAgIGN0eC5tb3ZlVG8oeCArIHlPZmZzZXRXLCB5IC0geE9mZnNldCk7XG4gICAgICBjdHgubGluZVRvKHggLSB5T2Zmc2V0VywgeSArIHhPZmZzZXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbGluZSc6XG4gICAgICB4T2Zmc2V0ID0gdyA/IHcgLyAyIDogTWF0aC5jb3MocmFkKSAqIHJhZGl1cztcbiAgICAgIHlPZmZzZXQgPSBNYXRoLnNpbihyYWQpICogcmFkaXVzO1xuICAgICAgY3R4Lm1vdmVUbyh4IC0geE9mZnNldCwgeSAtIHlPZmZzZXQpO1xuICAgICAgY3R4LmxpbmVUbyh4ICsgeE9mZnNldCwgeSArIHlPZmZzZXQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZGFzaCc6XG4gICAgICBjdHgubW92ZVRvKHgsIHkpO1xuICAgICAgY3R4LmxpbmVUbyh4ICsgTWF0aC5jb3MocmFkKSAqICh3ID8gdyAvIDIgOiByYWRpdXMpLCB5ICsgTWF0aC5zaW4ocmFkKSAqIHJhZGl1cyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGZhbHNlOlxuICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICBjdHguZmlsbCgpO1xuICBpZiAob3B0aW9ucy5ib3JkZXJXaWR0aCA+IDApIHtcbiAgICBjdHguc3Ryb2tlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBvaW50IGlzIGluc2lkZSB0aGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgdG8gdGVzdFxuICogQHBhcmFtIGFyZWEgLSBUaGUgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gbWFyZ2luIC0gYWxsb3dlZCBtYXJnaW5cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfaXNQb2ludEluQXJlYShcbiAgcG9pbnQ6IFBvaW50LFxuICBhcmVhOiBUUkJMLFxuICBtYXJnaW4/OiBudW1iZXJcbikge1xuICBtYXJnaW4gPSBtYXJnaW4gfHwgMC41OyAvLyBtYXJnaW4gLSBkZWZhdWx0IGlzIHRvIG1hdGNoIHJvdW5kZWQgZGVjaW1hbHNcblxuICByZXR1cm4gIWFyZWEgfHwgKHBvaW50ICYmIHBvaW50LnggPiBhcmVhLmxlZnQgLSBtYXJnaW4gJiYgcG9pbnQueCA8IGFyZWEucmlnaHQgKyBtYXJnaW4gJiZcblx0XHRwb2ludC55ID4gYXJlYS50b3AgLSBtYXJnaW4gJiYgcG9pbnQueSA8IGFyZWEuYm90dG9tICsgbWFyZ2luKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsaXBBcmVhKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBhcmVhOiBUUkJMKSB7XG4gIGN0eC5zYXZlKCk7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4LnJlY3QoYXJlYS5sZWZ0LCBhcmVhLnRvcCwgYXJlYS5yaWdodCAtIGFyZWEubGVmdCwgYXJlYS5ib3R0b20gLSBhcmVhLnRvcCk7XG4gIGN0eC5jbGlwKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmNsaXBBcmVhKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gIGN0eC5yZXN0b3JlKCk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9zdGVwcGVkTGluZVRvKFxuICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgcHJldmlvdXM6IFBvaW50LFxuICB0YXJnZXQ6IFBvaW50LFxuICBmbGlwPzogYm9vbGVhbixcbiAgbW9kZT86IHN0cmluZ1xuKSB7XG4gIGlmICghcHJldmlvdXMpIHtcbiAgICByZXR1cm4gY3R4LmxpbmVUbyh0YXJnZXQueCwgdGFyZ2V0LnkpO1xuICB9XG4gIGlmIChtb2RlID09PSAnbWlkZGxlJykge1xuICAgIGNvbnN0IG1pZHBvaW50ID0gKHByZXZpb3VzLnggKyB0YXJnZXQueCkgLyAyLjA7XG4gICAgY3R4LmxpbmVUbyhtaWRwb2ludCwgcHJldmlvdXMueSk7XG4gICAgY3R4LmxpbmVUbyhtaWRwb2ludCwgdGFyZ2V0LnkpO1xuICB9IGVsc2UgaWYgKG1vZGUgPT09ICdhZnRlcicgIT09ICEhZmxpcCkge1xuICAgIGN0eC5saW5lVG8ocHJldmlvdXMueCwgdGFyZ2V0LnkpO1xuICB9IGVsc2Uge1xuICAgIGN0eC5saW5lVG8odGFyZ2V0LngsIHByZXZpb3VzLnkpO1xuICB9XG4gIGN0eC5saW5lVG8odGFyZ2V0LngsIHRhcmdldC55KTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2JlemllckN1cnZlVG8oXG4gIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICBwcmV2aW91czogU3BsaW5lUG9pbnQsXG4gIHRhcmdldDogU3BsaW5lUG9pbnQsXG4gIGZsaXA/OiBib29sZWFuXG4pIHtcbiAgaWYgKCFwcmV2aW91cykge1xuICAgIHJldHVybiBjdHgubGluZVRvKHRhcmdldC54LCB0YXJnZXQueSk7XG4gIH1cbiAgY3R4LmJlemllckN1cnZlVG8oXG4gICAgZmxpcCA/IHByZXZpb3VzLmNwMXggOiBwcmV2aW91cy5jcDJ4LFxuICAgIGZsaXAgPyBwcmV2aW91cy5jcDF5IDogcHJldmlvdXMuY3AyeSxcbiAgICBmbGlwID8gdGFyZ2V0LmNwMnggOiB0YXJnZXQuY3AxeCxcbiAgICBmbGlwID8gdGFyZ2V0LmNwMnkgOiB0YXJnZXQuY3AxeSxcbiAgICB0YXJnZXQueCxcbiAgICB0YXJnZXQueSk7XG59XG5cbmZ1bmN0aW9uIHNldFJlbmRlck9wdHMoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIG9wdHM6IFJlbmRlclRleHRPcHRzKSB7XG4gIGlmIChvcHRzLnRyYW5zbGF0aW9uKSB7XG4gICAgY3R4LnRyYW5zbGF0ZShvcHRzLnRyYW5zbGF0aW9uWzBdLCBvcHRzLnRyYW5zbGF0aW9uWzFdKTtcbiAgfVxuXG4gIGlmICghaXNOdWxsT3JVbmRlZihvcHRzLnJvdGF0aW9uKSkge1xuICAgIGN0eC5yb3RhdGUob3B0cy5yb3RhdGlvbik7XG4gIH1cblxuICBpZiAob3B0cy5jb2xvcikge1xuICAgIGN0eC5maWxsU3R5bGUgPSBvcHRzLmNvbG9yO1xuICB9XG5cbiAgaWYgKG9wdHMudGV4dEFsaWduKSB7XG4gICAgY3R4LnRleHRBbGlnbiA9IG9wdHMudGV4dEFsaWduO1xuICB9XG5cbiAgaWYgKG9wdHMudGV4dEJhc2VsaW5lKSB7XG4gICAgY3R4LnRleHRCYXNlbGluZSA9IG9wdHMudGV4dEJhc2VsaW5lO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlY29yYXRlVGV4dChcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICBsaW5lOiBzdHJpbmcsXG4gIG9wdHM6IFJlbmRlclRleHRPcHRzXG4pIHtcbiAgaWYgKG9wdHMuc3RyaWtldGhyb3VnaCB8fCBvcHRzLnVuZGVybGluZSkge1xuICAgIC8qKlxuICAgICAqIE5vdyB0aGF0IElFMTEgc3VwcG9ydCBoYXMgYmVlbiBkcm9wcGVkLCB3ZSBjYW4gdXNlIG1vcmVcbiAgICAgKiBvZiB0aGUgVGV4dE1ldHJpY3Mgb2JqZWN0LiBUaGUgYWN0dWFsIGJvdW5kaW5nIGJveGVzXG4gICAgICogYXJlIHVuZmxhZ2dlZCBpbiBDaHJvbWUsIEZpcmVmb3gsIEVkZ2UsIGFuZCBTYWZhcmkgc28gdGhleVxuICAgICAqIGNhbiBiZSBzYWZlbHkgdXNlZC5cbiAgICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RleHRNZXRyaWNzI0Jyb3dzZXJfY29tcGF0aWJpbGl0eVxuICAgICAqL1xuICAgIGNvbnN0IG1ldHJpY3MgPSBjdHgubWVhc3VyZVRleHQobGluZSk7XG4gICAgY29uc3QgbGVmdCA9IHggLSBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94TGVmdDtcbiAgICBjb25zdCByaWdodCA9IHggKyBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94UmlnaHQ7XG4gICAgY29uc3QgdG9wID0geSAtIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQ7XG4gICAgY29uc3QgYm90dG9tID0geSArIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50O1xuICAgIGNvbnN0IHlEZWNvcmF0aW9uID0gb3B0cy5zdHJpa2V0aHJvdWdoID8gKHRvcCArIGJvdHRvbSkgLyAyIDogYm90dG9tO1xuXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gY3R4LmZpbGxTdHlsZTtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmxpbmVXaWR0aCA9IG9wdHMuZGVjb3JhdGlvbldpZHRoIHx8IDI7XG4gICAgY3R4Lm1vdmVUbyhsZWZ0LCB5RGVjb3JhdGlvbik7XG4gICAgY3R4LmxpbmVUbyhyaWdodCwgeURlY29yYXRpb24pO1xuICAgIGN0eC5zdHJva2UoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkcmF3QmFja2Ryb3AoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIG9wdHM6IEJhY2tkcm9wT3B0aW9ucykge1xuICBjb25zdCBvbGRDb2xvciA9IGN0eC5maWxsU3R5bGU7XG5cbiAgY3R4LmZpbGxTdHlsZSA9IG9wdHMuY29sb3IgYXMgc3RyaW5nO1xuICBjdHguZmlsbFJlY3Qob3B0cy5sZWZ0LCBvcHRzLnRvcCwgb3B0cy53aWR0aCwgb3B0cy5oZWlnaHQpO1xuICBjdHguZmlsbFN0eWxlID0gb2xkQ29sb3I7XG59XG5cbi8qKlxuICogUmVuZGVyIHRleHQgb250byB0aGUgY2FudmFzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUZXh0KFxuICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgdGV4dDogc3RyaW5nIHwgc3RyaW5nW10sXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICBmb250OiBDYW52YXNGb250U3BlYyxcbiAgb3B0czogUmVuZGVyVGV4dE9wdHMgPSB7fVxuKSB7XG4gIGNvbnN0IGxpbmVzID0gaXNBcnJheSh0ZXh0KSA/IHRleHQgOiBbdGV4dF07XG4gIGNvbnN0IHN0cm9rZSA9IG9wdHMuc3Ryb2tlV2lkdGggPiAwICYmIG9wdHMuc3Ryb2tlQ29sb3IgIT09ICcnO1xuICBsZXQgaTogbnVtYmVyLCBsaW5lOiBzdHJpbmc7XG5cbiAgY3R4LnNhdmUoKTtcbiAgY3R4LmZvbnQgPSBmb250LnN0cmluZztcbiAgc2V0UmVuZGVyT3B0cyhjdHgsIG9wdHMpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgIGxpbmUgPSBsaW5lc1tpXTtcblxuICAgIGlmIChvcHRzLmJhY2tkcm9wKSB7XG4gICAgICBkcmF3QmFja2Ryb3AoY3R4LCBvcHRzLmJhY2tkcm9wKTtcbiAgICB9XG5cbiAgICBpZiAoc3Ryb2tlKSB7XG4gICAgICBpZiAob3B0cy5zdHJva2VDb2xvcikge1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBvcHRzLnN0cm9rZUNvbG9yO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTnVsbE9yVW5kZWYob3B0cy5zdHJva2VXaWR0aCkpIHtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IG9wdHMuc3Ryb2tlV2lkdGg7XG4gICAgICB9XG5cbiAgICAgIGN0eC5zdHJva2VUZXh0KGxpbmUsIHgsIHksIG9wdHMubWF4V2lkdGgpO1xuICAgIH1cblxuICAgIGN0eC5maWxsVGV4dChsaW5lLCB4LCB5LCBvcHRzLm1heFdpZHRoKTtcbiAgICBkZWNvcmF0ZVRleHQoY3R4LCB4LCB5LCBsaW5lLCBvcHRzKTtcblxuICAgIHkgKz0gTnVtYmVyKGZvbnQubGluZUhlaWdodCk7XG4gIH1cblxuICBjdHgucmVzdG9yZSgpO1xufVxuXG4vKipcbiAqIEFkZCBhIHBhdGggb2YgYSByZWN0YW5nbGUgd2l0aCByb3VuZGVkIGNvcm5lcnMgdG8gdGhlIGN1cnJlbnQgc3ViLXBhdGhcbiAqIEBwYXJhbSBjdHggLSBDb250ZXh0XG4gKiBAcGFyYW0gcmVjdCAtIEJvdW5kaW5nIHJlY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFJvdW5kZWRSZWN0UGF0aChcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIHJlY3Q6IFJvdW5kZWRSZWN0ICYgeyByYWRpdXM6IFRSQkxDb3JuZXJzIH1cbikge1xuICBjb25zdCB7eCwgeSwgdywgaCwgcmFkaXVzfSA9IHJlY3Q7XG5cbiAgLy8gdG9wIGxlZnQgYXJjXG4gIGN0eC5hcmMoeCArIHJhZGl1cy50b3BMZWZ0LCB5ICsgcmFkaXVzLnRvcExlZnQsIHJhZGl1cy50b3BMZWZ0LCAtSEFMRl9QSSwgUEksIHRydWUpO1xuXG4gIC8vIGxpbmUgZnJvbSB0b3AgbGVmdCB0byBib3R0b20gbGVmdFxuICBjdHgubGluZVRvKHgsIHkgKyBoIC0gcmFkaXVzLmJvdHRvbUxlZnQpO1xuXG4gIC8vIGJvdHRvbSBsZWZ0IGFyY1xuICBjdHguYXJjKHggKyByYWRpdXMuYm90dG9tTGVmdCwgeSArIGggLSByYWRpdXMuYm90dG9tTGVmdCwgcmFkaXVzLmJvdHRvbUxlZnQsIFBJLCBIQUxGX1BJLCB0cnVlKTtcblxuICAvLyBsaW5lIGZyb20gYm90dG9tIGxlZnQgdG8gYm90dG9tIHJpZ2h0XG4gIGN0eC5saW5lVG8oeCArIHcgLSByYWRpdXMuYm90dG9tUmlnaHQsIHkgKyBoKTtcblxuICAvLyBib3R0b20gcmlnaHQgYXJjXG4gIGN0eC5hcmMoeCArIHcgLSByYWRpdXMuYm90dG9tUmlnaHQsIHkgKyBoIC0gcmFkaXVzLmJvdHRvbVJpZ2h0LCByYWRpdXMuYm90dG9tUmlnaHQsIEhBTEZfUEksIDAsIHRydWUpO1xuXG4gIC8vIGxpbmUgZnJvbSBib3R0b20gcmlnaHQgdG8gdG9wIHJpZ2h0XG4gIGN0eC5saW5lVG8oeCArIHcsIHkgKyByYWRpdXMudG9wUmlnaHQpO1xuXG4gIC8vIHRvcCByaWdodCBhcmNcbiAgY3R4LmFyYyh4ICsgdyAtIHJhZGl1cy50b3BSaWdodCwgeSArIHJhZGl1cy50b3BSaWdodCwgcmFkaXVzLnRvcFJpZ2h0LCAwLCAtSEFMRl9QSSwgdHJ1ZSk7XG5cbiAgLy8gbGluZSBmcm9tIHRvcCByaWdodCB0byB0b3AgbGVmdFxuICBjdHgubGluZVRvKHggKyByYWRpdXMudG9wTGVmdCwgeSk7XG59XG4iLCAiaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4uL2NvcmUvY29yZS5kZWZhdWx0cy5qcyc7XG5pbXBvcnQge2lzQXJyYXksIGlzT2JqZWN0LCB0b0RpbWVuc2lvbiwgdmFsdWVPckRlZmF1bHR9IGZyb20gJy4vaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCB7dG9Gb250U3RyaW5nfSBmcm9tICcuL2hlbHBlcnMuY2FudmFzLmpzJztcbmltcG9ydCB0eXBlIHtDaGFydEFyZWEsIEZvbnRTcGVjLCBQb2ludH0gZnJvbSAnLi4vdHlwZXMvaW5kZXguanMnO1xuaW1wb3J0IHR5cGUge1RSQkwsIFRSQkxDb3JuZXJzfSBmcm9tICcuLi90eXBlcy9nZW9tZXRyaWMuanMnO1xuXG5jb25zdCBMSU5FX0hFSUdIVCA9IC9eKG5vcm1hbHwoXFxkKyg/OlxcLlxcZCspPykocHh8ZW18JSk/KSQvO1xuY29uc3QgRk9OVF9TVFlMRSA9IC9eKG5vcm1hbHxpdGFsaWN8aW5pdGlhbHxpbmhlcml0fHVuc2V0fChvYmxpcXVlKCAtP1swLTldP1swLTldZGVnKT8pKSQvO1xuXG4vKipcbiAqIEBhbGlhcyBDaGFydC5oZWxwZXJzLm9wdGlvbnNcbiAqIEBuYW1lc3BhY2VcbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gbGluZSBoZWlnaHQgYHZhbHVlYCBpbiBwaXhlbHMgZm9yIGEgc3BlY2lmaWMgZm9udCBgc2l6ZWAuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgbGluZUhlaWdodCB0byBwYXJzZSAoZWcuIDEuNiwgJzE0cHgnLCAnNzUlJywgJzEuNmVtJykuXG4gKiBAcGFyYW0gc2l6ZSAtIFRoZSBmb250IHNpemUgKGluIHBpeGVscykgdXNlZCB0byByZXNvbHZlIHJlbGF0aXZlIGB2YWx1ZWAuXG4gKiBAcmV0dXJucyBUaGUgZWZmZWN0aXZlIGxpbmUgaGVpZ2h0IGluIHBpeGVscyAoc2l6ZSAqIDEuMiBpZiB2YWx1ZSBpcyBpbnZhbGlkKS5cbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2xpbmUtaGVpZ2h0XG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvTGluZUhlaWdodCh2YWx1ZTogbnVtYmVyIHwgc3RyaW5nLCBzaXplOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBtYXRjaGVzID0gKCcnICsgdmFsdWUpLm1hdGNoKExJTkVfSEVJR0hUKTtcbiAgaWYgKCFtYXRjaGVzIHx8IG1hdGNoZXNbMV0gPT09ICdub3JtYWwnKSB7XG4gICAgcmV0dXJuIHNpemUgKiAxLjI7XG4gIH1cblxuICB2YWx1ZSA9ICttYXRjaGVzWzJdO1xuXG4gIHN3aXRjaCAobWF0Y2hlc1szXSkge1xuICAgIGNhc2UgJ3B4JzpcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICBjYXNlICclJzpcbiAgICAgIHZhbHVlIC89IDEwMDtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBzaXplICogdmFsdWU7XG59XG5cbmNvbnN0IG51bWJlck9yWmVybyA9ICh2OiB1bmtub3duKSA9PiArdiB8fCAwO1xuXG4vKipcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIHByb3BzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfcmVhZFZhbHVlVG9Qcm9wczxLIGV4dGVuZHMgc3RyaW5nPih2YWx1ZTogbnVtYmVyIHwgUmVjb3JkPEssIG51bWJlcj4sIHByb3BzOiBLW10pOiBSZWNvcmQ8SywgbnVtYmVyPjtcbmV4cG9ydCBmdW5jdGlvbiBfcmVhZFZhbHVlVG9Qcm9wczxLIGV4dGVuZHMgc3RyaW5nLCBUIGV4dGVuZHMgc3RyaW5nPih2YWx1ZTogbnVtYmVyIHwgUmVjb3JkPEsgJiBULCBudW1iZXI+LCBwcm9wczogUmVjb3JkPFQsIEs+KTogUmVjb3JkPFQsIG51bWJlcj47XG5leHBvcnQgZnVuY3Rpb24gX3JlYWRWYWx1ZVRvUHJvcHModmFsdWU6IG51bWJlciB8IFJlY29yZDxzdHJpbmcsIG51bWJlcj4sIHByb3BzOiBzdHJpbmdbXSB8IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGNvbnN0IG9ialByb3BzID0gaXNPYmplY3QocHJvcHMpO1xuICBjb25zdCBrZXlzID0gb2JqUHJvcHMgPyBPYmplY3Qua2V5cyhwcm9wcykgOiBwcm9wcztcbiAgY29uc3QgcmVhZCA9IGlzT2JqZWN0KHZhbHVlKVxuICAgID8gb2JqUHJvcHNcbiAgICAgID8gcHJvcCA9PiB2YWx1ZU9yRGVmYXVsdCh2YWx1ZVtwcm9wXSwgdmFsdWVbcHJvcHNbcHJvcF1dKVxuICAgICAgOiBwcm9wID0+IHZhbHVlW3Byb3BdXG4gICAgOiAoKSA9PiB2YWx1ZTtcblxuICBmb3IgKGNvbnN0IHByb3Agb2Yga2V5cykge1xuICAgIHJldFtwcm9wXSA9IG51bWJlck9yWmVybyhyZWFkKHByb3ApKTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBnaXZlbiB2YWx1ZSBpbnRvIGEgVFJCTCBvYmplY3QuXG4gKiBAcGFyYW0gdmFsdWUgLSBJZiBhIG51bWJlciwgc2V0IHRoZSB2YWx1ZSB0byBhbGwgVFJCTCBjb21wb25lbnQsXG4gKiAgZWxzZSwgaWYgYW4gb2JqZWN0LCB1c2UgZGVmaW5lZCBwcm9wZXJ0aWVzIGFuZCBzZXRzIHVuZGVmaW5lZCBvbmVzIHRvIDAuXG4gKiAgeCAvIHkgYXJlIHNob3J0aGFuZHMgZm9yIHNhbWUgdmFsdWUgZm9yIGxlZnQvcmlnaHQgYW5kIHRvcC9ib3R0b20uXG4gKiBAcmV0dXJucyBUaGUgcGFkZGluZyB2YWx1ZXMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcbiAqIEBzaW5jZSAzLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9UUkJMKHZhbHVlOiBudW1iZXIgfCBUUkJMIHwgUG9pbnQpIHtcbiAgcmV0dXJuIF9yZWFkVmFsdWVUb1Byb3BzKHZhbHVlLCB7dG9wOiAneScsIHJpZ2h0OiAneCcsIGJvdHRvbTogJ3knLCBsZWZ0OiAneCd9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gdmFsdWUgaW50byBhIFRSQkwgY29ybmVycyBvYmplY3QgKHNpbWlsYXIgd2l0aCBjc3MgYm9yZGVyLXJhZGl1cykuXG4gKiBAcGFyYW0gdmFsdWUgLSBJZiBhIG51bWJlciwgc2V0IHRoZSB2YWx1ZSB0byBhbGwgVFJCTCBjb3JuZXIgY29tcG9uZW50cyxcbiAqICBlbHNlLCBpZiBhbiBvYmplY3QsIHVzZSBkZWZpbmVkIHByb3BlcnRpZXMgYW5kIHNldHMgdW5kZWZpbmVkIG9uZXMgdG8gMC5cbiAqIEByZXR1cm5zIFRoZSBUUkJMIGNvcm5lciB2YWx1ZXMgKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBib3R0b21SaWdodClcbiAqIEBzaW5jZSAzLjAuMFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9UUkJMQ29ybmVycyh2YWx1ZTogbnVtYmVyIHwgVFJCTENvcm5lcnMpIHtcbiAgcmV0dXJuIF9yZWFkVmFsdWVUb1Byb3BzKHZhbHVlLCBbJ3RvcExlZnQnLCAndG9wUmlnaHQnLCAnYm90dG9tTGVmdCcsICdib3R0b21SaWdodCddKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gdmFsdWUgaW50byBhIHBhZGRpbmcgb2JqZWN0IHdpdGggcHJlLWNvbXB1dGVkIHdpZHRoL2hlaWdodC5cbiAqIEBwYXJhbSB2YWx1ZSAtIElmIGEgbnVtYmVyLCBzZXQgdGhlIHZhbHVlIHRvIGFsbCBUUkJMIGNvbXBvbmVudCxcbiAqICBlbHNlLCBpZiBhbiBvYmplY3QsIHVzZSBkZWZpbmVkIHByb3BlcnRpZXMgYW5kIHNldHMgdW5kZWZpbmVkIG9uZXMgdG8gMC5cbiAqICB4IC8geSBhcmUgc2hvcnRoYW5kcyBmb3Igc2FtZSB2YWx1ZSBmb3IgbGVmdC9yaWdodCBhbmQgdG9wL2JvdHRvbS5cbiAqIEByZXR1cm5zIFRoZSBwYWRkaW5nIHZhbHVlcyAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LCB3aWR0aCwgaGVpZ2h0KVxuICogQHNpbmNlIDIuNy4wXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1BhZGRpbmcodmFsdWU/OiBudW1iZXIgfCBUUkJMKTogQ2hhcnRBcmVhIHtcbiAgY29uc3Qgb2JqID0gdG9UUkJMKHZhbHVlKSBhcyBDaGFydEFyZWE7XG5cbiAgb2JqLndpZHRoID0gb2JqLmxlZnQgKyBvYmoucmlnaHQ7XG4gIG9iai5oZWlnaHQgPSBvYmoudG9wICsgb2JqLmJvdHRvbTtcblxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIFBhcnNlcyBmb250IG9wdGlvbnMgYW5kIHJldHVybnMgdGhlIGZvbnQgb2JqZWN0LlxuICogQHBhcmFtIG9wdGlvbnMgLSBBIG9iamVjdCB0aGF0IGNvbnRhaW5zIGZvbnQgb3B0aW9ucyB0byBiZSBwYXJzZWQuXG4gKiBAcGFyYW0gZmFsbGJhY2sgLSBBIG9iamVjdCB0aGF0IGNvbnRhaW5zIGZhbGxiYWNrIGZvbnQgb3B0aW9ucy5cbiAqIEByZXR1cm4gVGhlIGZvbnQgb2JqZWN0LlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdG9Gb250KG9wdGlvbnM6IFBhcnRpYWw8Rm9udFNwZWM+LCBmYWxsYmFjaz86IFBhcnRpYWw8Rm9udFNwZWM+KSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBmYWxsYmFjayA9IGZhbGxiYWNrIHx8IGRlZmF1bHRzLmZvbnQgYXMgRm9udFNwZWM7XG5cbiAgbGV0IHNpemUgPSB2YWx1ZU9yRGVmYXVsdChvcHRpb25zLnNpemUsIGZhbGxiYWNrLnNpemUpO1xuXG4gIGlmICh0eXBlb2Ygc2l6ZSA9PT0gJ3N0cmluZycpIHtcbiAgICBzaXplID0gcGFyc2VJbnQoc2l6ZSwgMTApO1xuICB9XG4gIGxldCBzdHlsZSA9IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMuc3R5bGUsIGZhbGxiYWNrLnN0eWxlKTtcbiAgaWYgKHN0eWxlICYmICEoJycgKyBzdHlsZSkubWF0Y2goRk9OVF9TVFlMRSkpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgZm9udCBzdHlsZSBzcGVjaWZpZWQ6IFwiJyArIHN0eWxlICsgJ1wiJyk7XG4gICAgc3R5bGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zdCBmb250ID0ge1xuICAgIGZhbWlseTogdmFsdWVPckRlZmF1bHQob3B0aW9ucy5mYW1pbHksIGZhbGxiYWNrLmZhbWlseSksXG4gICAgbGluZUhlaWdodDogdG9MaW5lSGVpZ2h0KHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMubGluZUhlaWdodCwgZmFsbGJhY2subGluZUhlaWdodCksIHNpemUpLFxuICAgIHNpemUsXG4gICAgc3R5bGUsXG4gICAgd2VpZ2h0OiB2YWx1ZU9yRGVmYXVsdChvcHRpb25zLndlaWdodCwgZmFsbGJhY2sud2VpZ2h0KSxcbiAgICBzdHJpbmc6ICcnXG4gIH07XG5cbiAgZm9udC5zdHJpbmcgPSB0b0ZvbnRTdHJpbmcoZm9udCk7XG4gIHJldHVybiBmb250O1xufVxuXG4vKipcbiAqIEV2YWx1YXRlcyB0aGUgZ2l2ZW4gYGlucHV0c2Agc2VxdWVudGlhbGx5IGFuZCByZXR1cm5zIHRoZSBmaXJzdCBkZWZpbmVkIHZhbHVlLlxuICogQHBhcmFtIGlucHV0cyAtIEFuIGFycmF5IG9mIHZhbHVlcywgZmFsbGluZyBiYWNrIHRvIHRoZSBsYXN0IHZhbHVlLlxuICogQHBhcmFtIGNvbnRleHQgLSBJZiBkZWZpbmVkIGFuZCB0aGUgY3VycmVudCB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCB0aGUgdmFsdWVcbiAqIGlzIGNhbGxlZCB3aXRoIGBjb250ZXh0YCBhcyBmaXJzdCBhcmd1bWVudCBhbmQgdGhlIHJlc3VsdCBiZWNvbWVzIHRoZSBuZXcgaW5wdXQuXG4gKiBAcGFyYW0gaW5kZXggLSBJZiBkZWZpbmVkIGFuZCB0aGUgY3VycmVudCB2YWx1ZSBpcyBhbiBhcnJheSwgdGhlIHZhbHVlXG4gKiBhdCBgaW5kZXhgIGJlY29tZSB0aGUgbmV3IGlucHV0LlxuICogQHBhcmFtIGluZm8gLSBvYmplY3QgdG8gcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHJlc29sdXRpb24gaW5cbiAqIEBwYXJhbSBpbmZvLmNhY2hlYWJsZSAtIFdpbGwgYmUgc2V0IHRvIGBmYWxzZWAgaWYgb3B0aW9uIGlzIG5vdCBjYWNoZWFibGUuXG4gKiBAc2luY2UgMi43LjBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmUoaW5wdXRzOiBBcnJheTx1bmtub3duPiwgY29udGV4dD86IG9iamVjdCwgaW5kZXg/OiBudW1iZXIsIGluZm8/OiB7IGNhY2hlYWJsZTogYm9vbGVhbiB9KSB7XG4gIGxldCBjYWNoZWFibGUgPSB0cnVlO1xuICBsZXQgaTogbnVtYmVyLCBpbGVuOiBudW1iZXIsIHZhbHVlOiB1bmtub3duO1xuXG4gIGZvciAoaSA9IDAsIGlsZW4gPSBpbnB1dHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgdmFsdWUgPSBpbnB1dHNbaV07XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFsdWUgPSB2YWx1ZShjb250ZXh0KTtcbiAgICAgIGNhY2hlYWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpc0FycmF5KHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZVtpbmRleCAlIHZhbHVlLmxlbmd0aF07XG4gICAgICBjYWNoZWFibGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChpbmZvICYmICFjYWNoZWFibGUpIHtcbiAgICAgICAgaW5mby5jYWNoZWFibGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0gbWlubWF4XG4gKiBAcGFyYW0gZ3JhY2VcbiAqIEBwYXJhbSBiZWdpbkF0WmVyb1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9hZGRHcmFjZShtaW5tYXg6IHsgbWluOiBudW1iZXI7IG1heDogbnVtYmVyOyB9LCBncmFjZTogbnVtYmVyIHwgc3RyaW5nLCBiZWdpbkF0WmVybzogYm9vbGVhbikge1xuICBjb25zdCB7bWluLCBtYXh9ID0gbWlubWF4O1xuICBjb25zdCBjaGFuZ2UgPSB0b0RpbWVuc2lvbihncmFjZSwgKG1heCAtIG1pbikgLyAyKTtcbiAgY29uc3Qga2VlcFplcm8gPSAodmFsdWU6IG51bWJlciwgYWRkOiBudW1iZXIpID0+IGJlZ2luQXRaZXJvICYmIHZhbHVlID09PSAwID8gMCA6IHZhbHVlICsgYWRkO1xuICByZXR1cm4ge1xuICAgIG1pbjoga2VlcFplcm8obWluLCAtTWF0aC5hYnMoY2hhbmdlKSksXG4gICAgbWF4OiBrZWVwWmVybyhtYXgsIGNoYW5nZSlcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBjb250ZXh0IGluaGVyaXRpbmcgcGFyZW50Q29udGV4dFxuICogQHBhcmFtIHBhcmVudENvbnRleHRcbiAqIEBwYXJhbSBjb250ZXh0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udGV4dDxUIGV4dGVuZHMgb2JqZWN0PihwYXJlbnRDb250ZXh0OiBudWxsLCBjb250ZXh0OiBUKTogVDtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb250ZXh0PFQgZXh0ZW5kcyBvYmplY3QsIFAgZXh0ZW5kcyBUPihwYXJlbnRDb250ZXh0OiBQLCBjb250ZXh0OiBUKTogUCAmIFQ7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29udGV4dChwYXJlbnRDb250ZXh0OiBvYmplY3QsIGNvbnRleHQ6IG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHBhcmVudENvbnRleHQpLCBjb250ZXh0KTtcbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbmltcG9ydCB0eXBlIHtBbnlPYmplY3R9IGZyb20gJy4uL3R5cGVzL2Jhc2ljLmpzJztcbmltcG9ydCB0eXBlIHtDaGFydE1ldGF9IGZyb20gJy4uL3R5cGVzL2luZGV4LmpzJztcbmltcG9ydCB0eXBlIHtcbiAgUmVzb2x2ZXJPYmplY3RLZXksXG4gIFJlc29sdmVyQ2FjaGUsXG4gIFJlc29sdmVyUHJveHksXG4gIERlc2NyaXB0b3JEZWZhdWx0cyxcbiAgRGVzY3JpcHRvcixcbiAgQ29udGV4dENhY2hlLFxuICBDb250ZXh0UHJveHlcbn0gZnJvbSAnLi9oZWxwZXJzLmNvbmZpZy50eXBlcy5qcyc7XG5pbXBvcnQge2lzQXJyYXksIGlzRnVuY3Rpb24sIGlzT2JqZWN0LCByZXNvbHZlT2JqZWN0S2V5LCBfY2FwaXRhbGl6ZX0gZnJvbSAnLi9oZWxwZXJzLmNvcmUuanMnO1xuXG5leHBvcnQgKiBmcm9tICcuL2hlbHBlcnMuY29uZmlnLnR5cGVzLmpzJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJveHkgZm9yIHJlc29sdmluZyByYXcgdmFsdWVzIGZvciBvcHRpb25zLlxuICogQHBhcmFtIHNjb3BlcyAtIFRoZSBvcHRpb24gc2NvcGVzIHRvIGxvb2sgZm9yIHZhbHVlcywgaW4gcmVzb2x1dGlvbiBvcmRlclxuICogQHBhcmFtIHByZWZpeGVzIC0gVGhlIHByZWZpeGVzIGZvciB2YWx1ZXMsIGluIHJlc29sdXRpb24gb3JkZXIuXG4gKiBAcGFyYW0gcm9vdFNjb3BlcyAtIFRoZSByb290IG9wdGlvbiBzY29wZXNcbiAqIEBwYXJhbSBmYWxsYmFjayAtIFBhcmVudCBzY29wZXMgZmFsbGJhY2tcbiAqIEBwYXJhbSBnZXRUYXJnZXQgLSBjYWxsYmFjayBmb3IgZ2V0dGluZyB0aGUgdGFyZ2V0IGZvciBjaGFuZ2VkIHZhbHVlc1xuICogQHJldHVybnMgUHJveHlcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfY3JlYXRlUmVzb2x2ZXI8XG4gIFQgZXh0ZW5kcyBBbnlPYmplY3RbXSA9IEFueU9iamVjdFtdLFxuICBSIGV4dGVuZHMgQW55T2JqZWN0W10gPSBUXG4+KFxuICBzY29wZXM6IFQsXG4gIHByZWZpeGVzID0gWycnXSxcbiAgcm9vdFNjb3Blcz86IFIsXG4gIGZhbGxiYWNrPzogUmVzb2x2ZXJPYmplY3RLZXksXG4gIGdldFRhcmdldCA9ICgpID0+IHNjb3Blc1swXVxuKSB7XG4gIGNvbnN0IGZpbmFsUm9vdFNjb3BlcyA9IHJvb3RTY29wZXMgfHwgc2NvcGVzO1xuICBpZiAodHlwZW9mIGZhbGxiYWNrID09PSAndW5kZWZpbmVkJykge1xuICAgIGZhbGxiYWNrID0gX3Jlc29sdmUoJ19mYWxsYmFjaycsIHNjb3Blcyk7XG4gIH1cbiAgY29uc3QgY2FjaGU6IFJlc29sdmVyQ2FjaGU8VCwgUj4gPSB7XG4gICAgW1N5bWJvbC50b1N0cmluZ1RhZ106ICdPYmplY3QnLFxuICAgIF9jYWNoZWFibGU6IHRydWUsXG4gICAgX3Njb3Blczogc2NvcGVzLFxuICAgIF9yb290U2NvcGVzOiBmaW5hbFJvb3RTY29wZXMsXG4gICAgX2ZhbGxiYWNrOiBmYWxsYmFjayxcbiAgICBfZ2V0VGFyZ2V0OiBnZXRUYXJnZXQsXG4gICAgb3ZlcnJpZGU6IChzY29wZTogQW55T2JqZWN0KSA9PiBfY3JlYXRlUmVzb2x2ZXIoW3Njb3BlLCAuLi5zY29wZXNdLCBwcmVmaXhlcywgZmluYWxSb290U2NvcGVzLCBmYWxsYmFjayksXG4gIH07XG4gIHJldHVybiBuZXcgUHJveHkoY2FjaGUsIHtcbiAgICAvKipcbiAgICAgKiBBIHRyYXAgZm9yIHRoZSBkZWxldGUgb3BlcmF0b3IuXG4gICAgICovXG4gICAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wOiBzdHJpbmcpIHtcbiAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcF07IC8vIHJlbW92ZSBmcm9tIGNhY2hlXG4gICAgICBkZWxldGUgdGFyZ2V0Ll9rZXlzOyAvLyByZW1vdmUgY2FjaGVkIGtleXNcbiAgICAgIGRlbGV0ZSBzY29wZXNbMF1bcHJvcF07IC8vIHJlbW92ZSBmcm9tIHRvcCBsZXZlbCBzY29wZVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEEgdHJhcCBmb3IgZ2V0dGluZyBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICovXG4gICAgZ2V0KHRhcmdldCwgcHJvcDogc3RyaW5nKSB7XG4gICAgICByZXR1cm4gX2NhY2hlZCh0YXJnZXQsIHByb3AsXG4gICAgICAgICgpID0+IF9yZXNvbHZlV2l0aFByZWZpeGVzKHByb3AsIHByZWZpeGVzLCBzY29wZXMsIHRhcmdldCkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBIHRyYXAgZm9yIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IuXG4gICAgICogQWxzbyB1c2VkIGJ5IE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKSB7XG4gICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0Ll9zY29wZXNbMF0sIHByb3ApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBIHRyYXAgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZi5cbiAgICAgKi9cbiAgICBnZXRQcm90b3R5cGVPZigpIHtcbiAgICAgIHJldHVybiBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHNjb3Blc1swXSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEEgdHJhcCBmb3IgdGhlIGluIG9wZXJhdG9yLlxuICAgICAqL1xuICAgIGhhcyh0YXJnZXQsIHByb3A6IHN0cmluZykge1xuICAgICAgcmV0dXJuIGdldEtleXNGcm9tQWxsU2NvcGVzKHRhcmdldCkuaW5jbHVkZXMocHJvcCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEEgdHJhcCBmb3IgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgYW5kIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMuXG4gICAgICovXG4gICAgb3duS2V5cyh0YXJnZXQpIHtcbiAgICAgIHJldHVybiBnZXRLZXlzRnJvbUFsbFNjb3Blcyh0YXJnZXQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBIHRyYXAgZm9yIHNldHRpbmcgcHJvcGVydHkgdmFsdWVzLlxuICAgICAqL1xuICAgIHNldCh0YXJnZXQsIHByb3A6IHN0cmluZywgdmFsdWUpIHtcbiAgICAgIGNvbnN0IHN0b3JhZ2UgPSB0YXJnZXQuX3N0b3JhZ2UgfHwgKHRhcmdldC5fc3RvcmFnZSA9IGdldFRhcmdldCgpKTtcbiAgICAgIHRhcmdldFtwcm9wXSA9IHN0b3JhZ2VbcHJvcF0gPSB2YWx1ZTsgLy8gc2V0IHRvIHRvcCBsZXZlbCBzY29wZSArIGNhY2hlXG4gICAgICBkZWxldGUgdGFyZ2V0Ll9rZXlzOyAvLyByZW1vdmUgY2FjaGVkIGtleXNcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSkgYXMgUmVzb2x2ZXJQcm94eTxULCBSPjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIFByb3h5IGZvciByZXNvbHZpbmcgb3B0aW9uIHZhbHVlcyB3aXRoIGNvbnRleHQuXG4gKiBAcGFyYW0gcHJveHkgLSBUaGUgUHJveHkgcmV0dXJuZWQgYnkgYF9jcmVhdGVSZXNvbHZlcmBcbiAqIEBwYXJhbSBjb250ZXh0IC0gQ29udGV4dCBvYmplY3QgZm9yIHNjcmlwdGFibGUvaW5kZXhhYmxlIG9wdGlvbnNcbiAqIEBwYXJhbSBzdWJQcm94eSAtIFRoZSBwcm94eSBwcm92aWRlZCBmb3Igc2NyaXB0YWJsZSBvcHRpb25zXG4gKiBAcGFyYW0gZGVzY3JpcHRvckRlZmF1bHRzIC0gRGVmYXVsdHMgZm9yIGRlc2NyaXB0b3JzXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2F0dGFjaENvbnRleHQ8XG4gIFQgZXh0ZW5kcyBBbnlPYmplY3RbXSA9IEFueU9iamVjdFtdLFxuICBSIGV4dGVuZHMgQW55T2JqZWN0W10gPSBUXG4+KFxuICBwcm94eTogUmVzb2x2ZXJQcm94eTxULCBSPixcbiAgY29udGV4dDogQW55T2JqZWN0LFxuICBzdWJQcm94eT86IFJlc29sdmVyUHJveHk8VCwgUj4sXG4gIGRlc2NyaXB0b3JEZWZhdWx0cz86IERlc2NyaXB0b3JEZWZhdWx0c1xuKSB7XG4gIGNvbnN0IGNhY2hlOiBDb250ZXh0Q2FjaGU8VCwgUj4gPSB7XG4gICAgX2NhY2hlYWJsZTogZmFsc2UsXG4gICAgX3Byb3h5OiBwcm94eSxcbiAgICBfY29udGV4dDogY29udGV4dCxcbiAgICBfc3ViUHJveHk6IHN1YlByb3h5LFxuICAgIF9zdGFjazogbmV3IFNldCgpLFxuICAgIF9kZXNjcmlwdG9yczogX2Rlc2NyaXB0b3JzKHByb3h5LCBkZXNjcmlwdG9yRGVmYXVsdHMpLFxuICAgIHNldENvbnRleHQ6IChjdHg6IEFueU9iamVjdCkgPT4gX2F0dGFjaENvbnRleHQocHJveHksIGN0eCwgc3ViUHJveHksIGRlc2NyaXB0b3JEZWZhdWx0cyksXG4gICAgb3ZlcnJpZGU6IChzY29wZTogQW55T2JqZWN0KSA9PiBfYXR0YWNoQ29udGV4dChwcm94eS5vdmVycmlkZShzY29wZSksIGNvbnRleHQsIHN1YlByb3h5LCBkZXNjcmlwdG9yRGVmYXVsdHMpXG4gIH07XG4gIHJldHVybiBuZXcgUHJveHkoY2FjaGUsIHtcbiAgICAvKipcbiAgICAgKiBBIHRyYXAgZm9yIHRoZSBkZWxldGUgb3BlcmF0b3IuXG4gICAgICovXG4gICAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBwcm9wKSB7XG4gICAgICBkZWxldGUgdGFyZ2V0W3Byb3BdOyAvLyByZW1vdmUgZnJvbSBjYWNoZVxuICAgICAgZGVsZXRlIHByb3h5W3Byb3BdOyAvLyByZW1vdmUgZnJvbSBwcm94eVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEEgdHJhcCBmb3IgZ2V0dGluZyBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICovXG4gICAgZ2V0KHRhcmdldCwgcHJvcDogc3RyaW5nLCByZWNlaXZlcikge1xuICAgICAgcmV0dXJuIF9jYWNoZWQodGFyZ2V0LCBwcm9wLFxuICAgICAgICAoKSA9PiBfcmVzb2x2ZVdpdGhDb250ZXh0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQSB0cmFwIGZvciBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLlxuICAgICAqIEFsc28gdXNlZCBieSBPYmplY3QuaGFzT3duUHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcCkge1xuICAgICAgcmV0dXJuIHRhcmdldC5fZGVzY3JpcHRvcnMuYWxsS2V5c1xuICAgICAgICA/IFJlZmxlY3QuaGFzKHByb3h5LCBwcm9wKSA/IHtlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWV9IDogdW5kZWZpbmVkXG4gICAgICAgIDogUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJveHksIHByb3ApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBIHRyYXAgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZi5cbiAgICAgKi9cbiAgICBnZXRQcm90b3R5cGVPZigpIHtcbiAgICAgIHJldHVybiBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHByb3h5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQSB0cmFwIGZvciB0aGUgaW4gb3BlcmF0b3IuXG4gICAgICovXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgcmV0dXJuIFJlZmxlY3QuaGFzKHByb3h5LCBwcm9wKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQSB0cmFwIGZvciBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyBhbmQgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scy5cbiAgICAgKi9cbiAgICBvd25LZXlzKCkge1xuICAgICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyhwcm94eSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEEgdHJhcCBmb3Igc2V0dGluZyBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICovXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgIHByb3h5W3Byb3BdID0gdmFsdWU7IC8vIHNldCB0byBwcm94eVxuICAgICAgZGVsZXRlIHRhcmdldFtwcm9wXTsgLy8gcmVtb3ZlIGZyb20gY2FjaGVcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSkgYXMgQ29udGV4dFByb3h5PFQsIFI+O1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZGVzY3JpcHRvcnMoXG4gIHByb3h5OiBSZXNvbHZlckNhY2hlLFxuICBkZWZhdWx0czogRGVzY3JpcHRvckRlZmF1bHRzID0ge3NjcmlwdGFibGU6IHRydWUsIGluZGV4YWJsZTogdHJ1ZX1cbik6IERlc2NyaXB0b3Ige1xuICBjb25zdCB7X3NjcmlwdGFibGUgPSBkZWZhdWx0cy5zY3JpcHRhYmxlLCBfaW5kZXhhYmxlID0gZGVmYXVsdHMuaW5kZXhhYmxlLCBfYWxsS2V5cyA9IGRlZmF1bHRzLmFsbEtleXN9ID0gcHJveHk7XG4gIHJldHVybiB7XG4gICAgYWxsS2V5czogX2FsbEtleXMsXG4gICAgc2NyaXB0YWJsZTogX3NjcmlwdGFibGUsXG4gICAgaW5kZXhhYmxlOiBfaW5kZXhhYmxlLFxuICAgIGlzU2NyaXB0YWJsZTogaXNGdW5jdGlvbihfc2NyaXB0YWJsZSkgPyBfc2NyaXB0YWJsZSA6ICgpID0+IF9zY3JpcHRhYmxlLFxuICAgIGlzSW5kZXhhYmxlOiBpc0Z1bmN0aW9uKF9pbmRleGFibGUpID8gX2luZGV4YWJsZSA6ICgpID0+IF9pbmRleGFibGVcbiAgfTtcbn1cblxuY29uc3QgcmVhZEtleSA9IChwcmVmaXg6IHN0cmluZywgbmFtZTogc3RyaW5nKSA9PiBwcmVmaXggPyBwcmVmaXggKyBfY2FwaXRhbGl6ZShuYW1lKSA6IG5hbWU7XG5jb25zdCBuZWVkc1N1YlJlc29sdmVyID0gKHByb3A6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IGlzT2JqZWN0KHZhbHVlKSAmJiBwcm9wICE9PSAnYWRhcHRlcnMnICYmXG4gIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpID09PSBudWxsIHx8IHZhbHVlLmNvbnN0cnVjdG9yID09PSBPYmplY3QpO1xuXG5mdW5jdGlvbiBfY2FjaGVkKFxuICB0YXJnZXQ6IEFueU9iamVjdCxcbiAgcHJvcDogc3RyaW5nLFxuICByZXNvbHZlOiAoKSA9PiB1bmtub3duXG4pIHtcbiAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0YXJnZXQsIHByb3ApKSB7XG4gICAgcmV0dXJuIHRhcmdldFtwcm9wXTtcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0gcmVzb2x2ZSgpO1xuICAvLyBjYWNoZSB0aGUgcmVzb2x2ZWQgdmFsdWVcbiAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gX3Jlc29sdmVXaXRoQ29udGV4dChcbiAgdGFyZ2V0OiBDb250ZXh0Q2FjaGUsXG4gIHByb3A6IHN0cmluZyxcbiAgcmVjZWl2ZXI6IEFueU9iamVjdFxuKSB7XG4gIGNvbnN0IHtfcHJveHksIF9jb250ZXh0LCBfc3ViUHJveHksIF9kZXNjcmlwdG9yczogZGVzY3JpcHRvcnN9ID0gdGFyZ2V0O1xuICBsZXQgdmFsdWUgPSBfcHJveHlbcHJvcF07IC8vIHJlc29sdmUgZnJvbSBwcm94eVxuXG4gIC8vIHJlc29sdmUgd2l0aCBjb250ZXh0XG4gIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSAmJiBkZXNjcmlwdG9ycy5pc1NjcmlwdGFibGUocHJvcCkpIHtcbiAgICB2YWx1ZSA9IF9yZXNvbHZlU2NyaXB0YWJsZShwcm9wLCB2YWx1ZSwgdGFyZ2V0LCByZWNlaXZlcik7XG4gIH1cbiAgaWYgKGlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCkge1xuICAgIHZhbHVlID0gX3Jlc29sdmVBcnJheShwcm9wLCB2YWx1ZSwgdGFyZ2V0LCBkZXNjcmlwdG9ycy5pc0luZGV4YWJsZSk7XG4gIH1cbiAgaWYgKG5lZWRzU3ViUmVzb2x2ZXIocHJvcCwgdmFsdWUpKSB7XG4gICAgLy8gaWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzIGFuIG9iamVjdCwgY3JlYXRlIGEgc3ViIHJlc29sdmVyIGZvciBpdFxuICAgIHZhbHVlID0gX2F0dGFjaENvbnRleHQodmFsdWUsIF9jb250ZXh0LCBfc3ViUHJveHkgJiYgX3N1YlByb3h5W3Byb3BdLCBkZXNjcmlwdG9ycyk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZVNjcmlwdGFibGUoXG4gIHByb3A6IHN0cmluZyxcbiAgZ2V0VmFsdWU6IChjdHg6IEFueU9iamVjdCwgc3ViOiBBbnlPYmplY3QpID0+IHVua25vd24sXG4gIHRhcmdldDogQ29udGV4dENhY2hlLFxuICByZWNlaXZlcjogQW55T2JqZWN0XG4pIHtcbiAgY29uc3Qge19wcm94eSwgX2NvbnRleHQsIF9zdWJQcm94eSwgX3N0YWNrfSA9IHRhcmdldDtcbiAgaWYgKF9zdGFjay5oYXMocHJvcCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlY3Vyc2lvbiBkZXRlY3RlZDogJyArIEFycmF5LmZyb20oX3N0YWNrKS5qb2luKCctPicpICsgJy0+JyArIHByb3ApO1xuICB9XG4gIF9zdGFjay5hZGQocHJvcCk7XG4gIGxldCB2YWx1ZSA9IGdldFZhbHVlKF9jb250ZXh0LCBfc3ViUHJveHkgfHwgcmVjZWl2ZXIpO1xuICBfc3RhY2suZGVsZXRlKHByb3ApO1xuICBpZiAobmVlZHNTdWJSZXNvbHZlcihwcm9wLCB2YWx1ZSkpIHtcbiAgICAvLyBXaGVuIHNjcmlwdGFibGUgb3B0aW9uIHJldHVybnMgYW4gb2JqZWN0LCBjcmVhdGUgYSByZXNvbHZlciBvbiB0aGF0LlxuICAgIHZhbHVlID0gY3JlYXRlU3ViUmVzb2x2ZXIoX3Byb3h5Ll9zY29wZXMsIF9wcm94eSwgcHJvcCwgdmFsdWUpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gX3Jlc29sdmVBcnJheShcbiAgcHJvcDogc3RyaW5nLFxuICB2YWx1ZTogdW5rbm93bltdLFxuICB0YXJnZXQ6IENvbnRleHRDYWNoZSxcbiAgaXNJbmRleGFibGU6IChrZXk6IHN0cmluZykgPT4gYm9vbGVhblxuKSB7XG4gIGNvbnN0IHtfcHJveHksIF9jb250ZXh0LCBfc3ViUHJveHksIF9kZXNjcmlwdG9yczogZGVzY3JpcHRvcnN9ID0gdGFyZ2V0O1xuXG4gIGlmICh0eXBlb2YgX2NvbnRleHQuaW5kZXggIT09ICd1bmRlZmluZWQnICYmIGlzSW5kZXhhYmxlKHByb3ApKSB7XG4gICAgcmV0dXJuIHZhbHVlW19jb250ZXh0LmluZGV4ICUgdmFsdWUubGVuZ3RoXTtcbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZVswXSkpIHtcbiAgICAvLyBBcnJheSBvZiBvYmplY3RzLCByZXR1cm4gYXJyYXkgb3IgcmVzb2x2ZXJzXG4gICAgY29uc3QgYXJyID0gdmFsdWU7XG4gICAgY29uc3Qgc2NvcGVzID0gX3Byb3h5Ll9zY29wZXMuZmlsdGVyKHMgPT4gcyAhPT0gYXJyKTtcbiAgICB2YWx1ZSA9IFtdO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgIGNvbnN0IHJlc29sdmVyID0gY3JlYXRlU3ViUmVzb2x2ZXIoc2NvcGVzLCBfcHJveHksIHByb3AsIGl0ZW0pO1xuICAgICAgdmFsdWUucHVzaChfYXR0YWNoQ29udGV4dChyZXNvbHZlciwgX2NvbnRleHQsIF9zdWJQcm94eSAmJiBfc3ViUHJveHlbcHJvcF0sIGRlc2NyaXB0b3JzKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUZhbGxiYWNrKFxuICBmYWxsYmFjazogUmVzb2x2ZXJPYmplY3RLZXkgfCAoKHByb3A6IFJlc29sdmVyT2JqZWN0S2V5LCB2YWx1ZTogdW5rbm93bikgPT4gUmVzb2x2ZXJPYmplY3RLZXkpLFxuICBwcm9wOiBSZXNvbHZlck9iamVjdEtleSxcbiAgdmFsdWU6IHVua25vd25cbikge1xuICByZXR1cm4gaXNGdW5jdGlvbihmYWxsYmFjaykgPyBmYWxsYmFjayhwcm9wLCB2YWx1ZSkgOiBmYWxsYmFjaztcbn1cblxuY29uc3QgZ2V0U2NvcGUgPSAoa2V5OiBSZXNvbHZlck9iamVjdEtleSwgcGFyZW50OiBBbnlPYmplY3QpID0+IGtleSA9PT0gdHJ1ZSA/IHBhcmVudFxuICA6IHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnID8gcmVzb2x2ZU9iamVjdEtleShwYXJlbnQsIGtleSkgOiB1bmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGFkZFNjb3BlcyhcbiAgc2V0OiBTZXQ8QW55T2JqZWN0PixcbiAgcGFyZW50U2NvcGVzOiBBbnlPYmplY3RbXSxcbiAga2V5OiBSZXNvbHZlck9iamVjdEtleSxcbiAgcGFyZW50RmFsbGJhY2s6IFJlc29sdmVyT2JqZWN0S2V5LFxuICB2YWx1ZTogdW5rbm93blxuKSB7XG4gIGZvciAoY29uc3QgcGFyZW50IG9mIHBhcmVudFNjb3Blcykge1xuICAgIGNvbnN0IHNjb3BlID0gZ2V0U2NvcGUoa2V5LCBwYXJlbnQpO1xuICAgIGlmIChzY29wZSkge1xuICAgICAgc2V0LmFkZChzY29wZSk7XG4gICAgICBjb25zdCBmYWxsYmFjayA9IHJlc29sdmVGYWxsYmFjayhzY29wZS5fZmFsbGJhY2ssIGtleSwgdmFsdWUpO1xuICAgICAgaWYgKHR5cGVvZiBmYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcgJiYgZmFsbGJhY2sgIT09IGtleSAmJiBmYWxsYmFjayAhPT0gcGFyZW50RmFsbGJhY2spIHtcbiAgICAgICAgLy8gV2hlbiB3ZSByZWFjaCB0aGUgZGVzY3JpcHRvciB0aGF0IGRlZmluZXMgYSBuZXcgX2ZhbGxiYWNrLCByZXR1cm4gdGhhdC5cbiAgICAgICAgLy8gVGhlIGZhbGxiYWNrIHdpbGwgcmVzdW1lIHRvIHRoYXQgbmV3IHNjb3BlLlxuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzY29wZSA9PT0gZmFsc2UgJiYgdHlwZW9mIHBhcmVudEZhbGxiYWNrICE9PSAndW5kZWZpbmVkJyAmJiBrZXkgIT09IHBhcmVudEZhbGxiYWNrKSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBgZmFsc2VgIHJlc3VsdHMgdG8gYGZhbHNlYCwgd2hlbiBmYWxsaW5nIGJhY2sgdG8gZGlmZmVyZW50IGtleS5cbiAgICAgIC8vIEZvciBleGFtcGxlIGBpbnRlcmFjdGlvbmAgZnJvbSBgaG92ZXJgIG9yIGBwbHVnaW5zLnRvb2x0aXBgIGFuZCBgYW5pbWF0aW9uYCBmcm9tIGBhbmltYXRpb25zYFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3ViUmVzb2x2ZXIoXG4gIHBhcmVudFNjb3BlczogQW55T2JqZWN0W10sXG4gIHJlc29sdmVyOiBSZXNvbHZlckNhY2hlLFxuICBwcm9wOiBSZXNvbHZlck9iamVjdEtleSxcbiAgdmFsdWU6IHVua25vd25cbikge1xuICBjb25zdCByb290U2NvcGVzID0gcmVzb2x2ZXIuX3Jvb3RTY29wZXM7XG4gIGNvbnN0IGZhbGxiYWNrID0gcmVzb2x2ZUZhbGxiYWNrKHJlc29sdmVyLl9mYWxsYmFjaywgcHJvcCwgdmFsdWUpO1xuICBjb25zdCBhbGxTY29wZXMgPSBbLi4ucGFyZW50U2NvcGVzLCAuLi5yb290U2NvcGVzXTtcbiAgY29uc3Qgc2V0ID0gbmV3IFNldDxBbnlPYmplY3Q+KCk7XG4gIHNldC5hZGQodmFsdWUpO1xuICBsZXQga2V5ID0gYWRkU2NvcGVzRnJvbUtleShzZXQsIGFsbFNjb3BlcywgcHJvcCwgZmFsbGJhY2sgfHwgcHJvcCwgdmFsdWUpO1xuICBpZiAoa2V5ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZmFsbGJhY2sgIT09ICd1bmRlZmluZWQnICYmIGZhbGxiYWNrICE9PSBwcm9wKSB7XG4gICAga2V5ID0gYWRkU2NvcGVzRnJvbUtleShzZXQsIGFsbFNjb3BlcywgZmFsbGJhY2ssIGtleSwgdmFsdWUpO1xuICAgIGlmIChrZXkgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVSZXNvbHZlcihBcnJheS5mcm9tKHNldCksIFsnJ10sIHJvb3RTY29wZXMsIGZhbGxiYWNrLFxuICAgICgpID0+IHN1YkdldFRhcmdldChyZXNvbHZlciwgcHJvcCBhcyBzdHJpbmcsIHZhbHVlKSk7XG59XG5cbmZ1bmN0aW9uIGFkZFNjb3Blc0Zyb21LZXkoXG4gIHNldDogU2V0PEFueU9iamVjdD4sXG4gIGFsbFNjb3BlczogQW55T2JqZWN0W10sXG4gIGtleTogUmVzb2x2ZXJPYmplY3RLZXksXG4gIGZhbGxiYWNrOiBSZXNvbHZlck9iamVjdEtleSxcbiAgaXRlbTogdW5rbm93blxuKSB7XG4gIHdoaWxlIChrZXkpIHtcbiAgICBrZXkgPSBhZGRTY29wZXMoc2V0LCBhbGxTY29wZXMsIGtleSwgZmFsbGJhY2ssIGl0ZW0pO1xuICB9XG4gIHJldHVybiBrZXk7XG59XG5cbmZ1bmN0aW9uIHN1YkdldFRhcmdldChcbiAgcmVzb2x2ZXI6IFJlc29sdmVyQ2FjaGUsXG4gIHByb3A6IHN0cmluZyxcbiAgdmFsdWU6IHVua25vd25cbikge1xuICBjb25zdCBwYXJlbnQgPSByZXNvbHZlci5fZ2V0VGFyZ2V0KCk7XG4gIGlmICghKHByb3AgaW4gcGFyZW50KSkge1xuICAgIHBhcmVudFtwcm9wXSA9IHt9O1xuICB9XG4gIGNvbnN0IHRhcmdldCA9IHBhcmVudFtwcm9wXTtcbiAgaWYgKGlzQXJyYXkodGFyZ2V0KSAmJiBpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAvLyBGb3IgYXJyYXkgb2Ygb2JqZWN0cywgdGhlIG9iamVjdCBpcyB1c2VkIHRvIHN0b3JlIHVwZGF0ZWQgdmFsdWVzXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB0YXJnZXQgfHwge307XG59XG5cbmZ1bmN0aW9uIF9yZXNvbHZlV2l0aFByZWZpeGVzKFxuICBwcm9wOiBzdHJpbmcsXG4gIHByZWZpeGVzOiBzdHJpbmdbXSxcbiAgc2NvcGVzOiBBbnlPYmplY3RbXSxcbiAgcHJveHk6IFJlc29sdmVyUHJveHlcbikge1xuICBsZXQgdmFsdWU6IHVua25vd247XG4gIGZvciAoY29uc3QgcHJlZml4IG9mIHByZWZpeGVzKSB7XG4gICAgdmFsdWUgPSBfcmVzb2x2ZShyZWFkS2V5KHByZWZpeCwgcHJvcCksIHNjb3Blcyk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBuZWVkc1N1YlJlc29sdmVyKHByb3AsIHZhbHVlKVxuICAgICAgICA/IGNyZWF0ZVN1YlJlc29sdmVyKHNjb3BlcywgcHJveHksIHByb3AsIHZhbHVlKVxuICAgICAgICA6IHZhbHVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZShrZXk6IHN0cmluZywgc2NvcGVzOiBBbnlPYmplY3RbXSkge1xuICBmb3IgKGNvbnN0IHNjb3BlIG9mIHNjb3Blcykge1xuICAgIGlmICghc2NvcGUpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZSA9IHNjb3BlW2tleV07XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0S2V5c0Zyb21BbGxTY29wZXModGFyZ2V0OiBSZXNvbHZlckNhY2hlKSB7XG4gIGxldCBrZXlzID0gdGFyZ2V0Ll9rZXlzO1xuICBpZiAoIWtleXMpIHtcbiAgICBrZXlzID0gdGFyZ2V0Ll9rZXlzID0gcmVzb2x2ZUtleXNGcm9tQWxsU2NvcGVzKHRhcmdldC5fc2NvcGVzKTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZUtleXNGcm9tQWxsU2NvcGVzKHNjb3BlczogQW55T2JqZWN0W10pIHtcbiAgY29uc3Qgc2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3Qgc2NvcGUgb2Ygc2NvcGVzKSB7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NvcGUpLmZpbHRlcihrID0+ICFrLnN0YXJ0c1dpdGgoJ18nKSkpIHtcbiAgICAgIHNldC5hZGQoa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20oc2V0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9wYXJzZU9iamVjdERhdGFSYWRpYWxTY2FsZShcbiAgbWV0YTogQ2hhcnRNZXRhPCdsaW5lJyB8ICdzY2F0dGVyJz4sXG4gIGRhdGE6IEFueU9iamVjdFtdLFxuICBzdGFydDogbnVtYmVyLFxuICBjb3VudDogbnVtYmVyXG4pIHtcbiAgY29uc3Qge2lTY2FsZX0gPSBtZXRhO1xuICBjb25zdCB7a2V5ID0gJ3InfSA9IHRoaXMuX3BhcnNpbmc7XG4gIGNvbnN0IHBhcnNlZCA9IG5ldyBBcnJheTx7cjogdW5rbm93bn0+KGNvdW50KTtcbiAgbGV0IGk6IG51bWJlciwgaWxlbjogbnVtYmVyLCBpbmRleDogbnVtYmVyLCBpdGVtOiBBbnlPYmplY3Q7XG5cbiAgZm9yIChpID0gMCwgaWxlbiA9IGNvdW50OyBpIDwgaWxlbjsgKytpKSB7XG4gICAgaW5kZXggPSBpICsgc3RhcnQ7XG4gICAgaXRlbSA9IGRhdGFbaW5kZXhdO1xuICAgIHBhcnNlZFtpXSA9IHtcbiAgICAgIHI6IGlTY2FsZS5wYXJzZShyZXNvbHZlT2JqZWN0S2V5KGl0ZW0sIGtleSksIGluZGV4KVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHBhcnNlZDtcbn1cbiIsICJpbXBvcnQge2FsbW9zdEVxdWFscywgZGlzdGFuY2VCZXR3ZWVuUG9pbnRzLCBzaWdufSBmcm9tICcuL2hlbHBlcnMubWF0aC5qcyc7XG5pbXBvcnQge19pc1BvaW50SW5BcmVhfSBmcm9tICcuL2hlbHBlcnMuY2FudmFzLmpzJztcbmltcG9ydCB0eXBlIHtDaGFydEFyZWF9IGZyb20gJy4uL3R5cGVzL2luZGV4LmpzJztcbmltcG9ydCB0eXBlIHtTcGxpbmVQb2ludH0gZnJvbSAnLi4vdHlwZXMvZ2VvbWV0cmljLmpzJztcblxuY29uc3QgRVBTSUxPTiA9IE51bWJlci5FUFNJTE9OIHx8IDFlLTE0O1xuXG50eXBlIE9wdGlvbmFsU3BsaW5lUG9pbnQgPSBTcGxpbmVQb2ludCB8IGZhbHNlXG5jb25zdCBnZXRQb2ludCA9IChwb2ludHM6IFNwbGluZVBvaW50W10sIGk6IG51bWJlcik6IE9wdGlvbmFsU3BsaW5lUG9pbnQgPT4gaSA8IHBvaW50cy5sZW5ndGggJiYgIXBvaW50c1tpXS5za2lwICYmIHBvaW50c1tpXTtcbmNvbnN0IGdldFZhbHVlQXhpcyA9IChpbmRleEF4aXM6ICd4JyB8ICd5JykgPT4gaW5kZXhBeGlzID09PSAneCcgPyAneScgOiAneCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpbmVDdXJ2ZShcbiAgZmlyc3RQb2ludDogU3BsaW5lUG9pbnQsXG4gIG1pZGRsZVBvaW50OiBTcGxpbmVQb2ludCxcbiAgYWZ0ZXJQb2ludDogU3BsaW5lUG9pbnQsXG4gIHQ6IG51bWJlclxuKToge1xuICAgIHByZXZpb3VzOiBTcGxpbmVQb2ludFxuICAgIG5leHQ6IFNwbGluZVBvaW50XG4gIH0ge1xuICAvLyBQcm9wcyB0byBSb2IgU3BlbmNlciBhdCBzY2FsZWQgaW5ub3ZhdGlvbiBmb3IgaGlzIHBvc3Qgb24gc3BsaW5pbmcgYmV0d2VlbiBwb2ludHNcbiAgLy8gaHR0cDovL3NjYWxlZGlubm92YXRpb24uY29tL2FuYWx5dGljcy9zcGxpbmVzL2Fib3V0U3BsaW5lcy5odG1sXG5cbiAgLy8gVGhpcyBmdW5jdGlvbiBtdXN0IGFsc28gcmVzcGVjdCBcInNraXBwZWRcIiBwb2ludHNcblxuICBjb25zdCBwcmV2aW91cyA9IGZpcnN0UG9pbnQuc2tpcCA/IG1pZGRsZVBvaW50IDogZmlyc3RQb2ludDtcbiAgY29uc3QgY3VycmVudCA9IG1pZGRsZVBvaW50O1xuICBjb25zdCBuZXh0ID0gYWZ0ZXJQb2ludC5za2lwID8gbWlkZGxlUG9pbnQgOiBhZnRlclBvaW50O1xuICBjb25zdCBkMDEgPSBkaXN0YW5jZUJldHdlZW5Qb2ludHMoY3VycmVudCwgcHJldmlvdXMpO1xuICBjb25zdCBkMTIgPSBkaXN0YW5jZUJldHdlZW5Qb2ludHMobmV4dCwgY3VycmVudCk7XG5cbiAgbGV0IHMwMSA9IGQwMSAvIChkMDEgKyBkMTIpO1xuICBsZXQgczEyID0gZDEyIC8gKGQwMSArIGQxMik7XG5cbiAgLy8gSWYgYWxsIHBvaW50cyBhcmUgdGhlIHNhbWUsIHMwMSAmIHMwMiB3aWxsIGJlIGluZlxuICBzMDEgPSBpc05hTihzMDEpID8gMCA6IHMwMTtcbiAgczEyID0gaXNOYU4oczEyKSA/IDAgOiBzMTI7XG5cbiAgY29uc3QgZmEgPSB0ICogczAxOyAvLyBzY2FsaW5nIGZhY3RvciBmb3IgdHJpYW5nbGUgVGFcbiAgY29uc3QgZmIgPSB0ICogczEyO1xuXG4gIHJldHVybiB7XG4gICAgcHJldmlvdXM6IHtcbiAgICAgIHg6IGN1cnJlbnQueCAtIGZhICogKG5leHQueCAtIHByZXZpb3VzLngpLFxuICAgICAgeTogY3VycmVudC55IC0gZmEgKiAobmV4dC55IC0gcHJldmlvdXMueSlcbiAgICB9LFxuICAgIG5leHQ6IHtcbiAgICAgIHg6IGN1cnJlbnQueCArIGZiICogKG5leHQueCAtIHByZXZpb3VzLngpLFxuICAgICAgeTogY3VycmVudC55ICsgZmIgKiAobmV4dC55IC0gcHJldmlvdXMueSlcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQWRqdXN0IHRhbmdlbnRzIHRvIGVuc3VyZSBtb25vdG9uaWMgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtb25vdG9uZUFkanVzdChwb2ludHM6IFNwbGluZVBvaW50W10sIGRlbHRhSzogbnVtYmVyW10sIG1LOiBudW1iZXJbXSkge1xuICBjb25zdCBwb2ludHNMZW4gPSBwb2ludHMubGVuZ3RoO1xuXG4gIGxldCBhbHBoYUs6IG51bWJlciwgYmV0YUs6IG51bWJlciwgdGF1SzogbnVtYmVyLCBzcXVhcmVkTWFnbml0dWRlOiBudW1iZXIsIHBvaW50Q3VycmVudDogT3B0aW9uYWxTcGxpbmVQb2ludDtcbiAgbGV0IHBvaW50QWZ0ZXIgPSBnZXRQb2ludChwb2ludHMsIDApO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50c0xlbiAtIDE7ICsraSkge1xuICAgIHBvaW50Q3VycmVudCA9IHBvaW50QWZ0ZXI7XG4gICAgcG9pbnRBZnRlciA9IGdldFBvaW50KHBvaW50cywgaSArIDEpO1xuICAgIGlmICghcG9pbnRDdXJyZW50IHx8ICFwb2ludEFmdGVyKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoYWxtb3N0RXF1YWxzKGRlbHRhS1tpXSwgMCwgRVBTSUxPTikpIHtcbiAgICAgIG1LW2ldID0gbUtbaSArIDFdID0gMDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGFscGhhSyA9IG1LW2ldIC8gZGVsdGFLW2ldO1xuICAgIGJldGFLID0gbUtbaSArIDFdIC8gZGVsdGFLW2ldO1xuICAgIHNxdWFyZWRNYWduaXR1ZGUgPSBNYXRoLnBvdyhhbHBoYUssIDIpICsgTWF0aC5wb3coYmV0YUssIDIpO1xuICAgIGlmIChzcXVhcmVkTWFnbml0dWRlIDw9IDkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHRhdUsgPSAzIC8gTWF0aC5zcXJ0KHNxdWFyZWRNYWduaXR1ZGUpO1xuICAgIG1LW2ldID0gYWxwaGFLICogdGF1SyAqIGRlbHRhS1tpXTtcbiAgICBtS1tpICsgMV0gPSBiZXRhSyAqIHRhdUsgKiBkZWx0YUtbaV07XG4gIH1cbn1cblxuZnVuY3Rpb24gbW9ub3RvbmVDb21wdXRlKHBvaW50czogU3BsaW5lUG9pbnRbXSwgbUs6IG51bWJlcltdLCBpbmRleEF4aXM6ICd4JyB8ICd5JyA9ICd4Jykge1xuICBjb25zdCB2YWx1ZUF4aXMgPSBnZXRWYWx1ZUF4aXMoaW5kZXhBeGlzKTtcbiAgY29uc3QgcG9pbnRzTGVuID0gcG9pbnRzLmxlbmd0aDtcbiAgbGV0IGRlbHRhOiBudW1iZXIsIHBvaW50QmVmb3JlOiBPcHRpb25hbFNwbGluZVBvaW50LCBwb2ludEN1cnJlbnQ6IE9wdGlvbmFsU3BsaW5lUG9pbnQ7XG4gIGxldCBwb2ludEFmdGVyID0gZ2V0UG9pbnQocG9pbnRzLCAwKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50c0xlbjsgKytpKSB7XG4gICAgcG9pbnRCZWZvcmUgPSBwb2ludEN1cnJlbnQ7XG4gICAgcG9pbnRDdXJyZW50ID0gcG9pbnRBZnRlcjtcbiAgICBwb2ludEFmdGVyID0gZ2V0UG9pbnQocG9pbnRzLCBpICsgMSk7XG4gICAgaWYgKCFwb2ludEN1cnJlbnQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGlQaXhlbCA9IHBvaW50Q3VycmVudFtpbmRleEF4aXNdO1xuICAgIGNvbnN0IHZQaXhlbCA9IHBvaW50Q3VycmVudFt2YWx1ZUF4aXNdO1xuICAgIGlmIChwb2ludEJlZm9yZSkge1xuICAgICAgZGVsdGEgPSAoaVBpeGVsIC0gcG9pbnRCZWZvcmVbaW5kZXhBeGlzXSkgLyAzO1xuICAgICAgcG9pbnRDdXJyZW50W2BjcDEke2luZGV4QXhpc31gXSA9IGlQaXhlbCAtIGRlbHRhO1xuICAgICAgcG9pbnRDdXJyZW50W2BjcDEke3ZhbHVlQXhpc31gXSA9IHZQaXhlbCAtIGRlbHRhICogbUtbaV07XG4gICAgfVxuICAgIGlmIChwb2ludEFmdGVyKSB7XG4gICAgICBkZWx0YSA9IChwb2ludEFmdGVyW2luZGV4QXhpc10gLSBpUGl4ZWwpIC8gMztcbiAgICAgIHBvaW50Q3VycmVudFtgY3AyJHtpbmRleEF4aXN9YF0gPSBpUGl4ZWwgKyBkZWx0YTtcbiAgICAgIHBvaW50Q3VycmVudFtgY3AyJHt2YWx1ZUF4aXN9YF0gPSB2UGl4ZWwgKyBkZWx0YSAqIG1LW2ldO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsY3VsYXRlcyBCXHUwMEU5emllciBjb250cm9sIHBvaW50cyBpbiBhIHNpbWlsYXIgd2F5IHRoYW4gfHNwbGluZUN1cnZlfCxcbiAqIGJ1dCBwcmVzZXJ2ZXMgbW9ub3RvbmljaXR5IG9mIHRoZSBwcm92aWRlZCBkYXRhIGFuZCBlbnN1cmVzIG5vIGxvY2FsIGV4dHJlbXVtcyBhcmUgYWRkZWRcbiAqIGJldHdlZW4gdGhlIGRhdGFzZXQgZGlzY3JldGUgcG9pbnRzIGR1ZSB0byB0aGUgaW50ZXJwb2xhdGlvbi5cbiAqIFNlZSA6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01vbm90b25lX2N1YmljX2ludGVycG9sYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGluZUN1cnZlTW9ub3RvbmUocG9pbnRzOiBTcGxpbmVQb2ludFtdLCBpbmRleEF4aXM6ICd4JyB8ICd5JyA9ICd4Jykge1xuICBjb25zdCB2YWx1ZUF4aXMgPSBnZXRWYWx1ZUF4aXMoaW5kZXhBeGlzKTtcbiAgY29uc3QgcG9pbnRzTGVuID0gcG9pbnRzLmxlbmd0aDtcbiAgY29uc3QgZGVsdGFLOiBudW1iZXJbXSA9IEFycmF5KHBvaW50c0xlbikuZmlsbCgwKTtcbiAgY29uc3QgbUs6IG51bWJlcltdID0gQXJyYXkocG9pbnRzTGVuKTtcblxuICAvLyBDYWxjdWxhdGUgc2xvcGVzIChkZWx0YUspIGFuZCBpbml0aWFsaXplIHRhbmdlbnRzIChtSylcbiAgbGV0IGksIHBvaW50QmVmb3JlOiBPcHRpb25hbFNwbGluZVBvaW50LCBwb2ludEN1cnJlbnQ6IE9wdGlvbmFsU3BsaW5lUG9pbnQ7XG4gIGxldCBwb2ludEFmdGVyID0gZ2V0UG9pbnQocG9pbnRzLCAwKTtcblxuICBmb3IgKGkgPSAwOyBpIDwgcG9pbnRzTGVuOyArK2kpIHtcbiAgICBwb2ludEJlZm9yZSA9IHBvaW50Q3VycmVudDtcbiAgICBwb2ludEN1cnJlbnQgPSBwb2ludEFmdGVyO1xuICAgIHBvaW50QWZ0ZXIgPSBnZXRQb2ludChwb2ludHMsIGkgKyAxKTtcbiAgICBpZiAoIXBvaW50Q3VycmVudCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKHBvaW50QWZ0ZXIpIHtcbiAgICAgIGNvbnN0IHNsb3BlRGVsdGEgPSBwb2ludEFmdGVyW2luZGV4QXhpc10gLSBwb2ludEN1cnJlbnRbaW5kZXhBeGlzXTtcblxuICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgdHdvIHBvaW50cyB0aGF0IGFwcGVhciBhdCB0aGUgc2FtZSB4IHBpeGVsLCBzbG9wZURlbHRhWCBpcyAwXG4gICAgICBkZWx0YUtbaV0gPSBzbG9wZURlbHRhICE9PSAwID8gKHBvaW50QWZ0ZXJbdmFsdWVBeGlzXSAtIHBvaW50Q3VycmVudFt2YWx1ZUF4aXNdKSAvIHNsb3BlRGVsdGEgOiAwO1xuICAgIH1cbiAgICBtS1tpXSA9ICFwb2ludEJlZm9yZSA/IGRlbHRhS1tpXVxuICAgICAgOiAhcG9pbnRBZnRlciA/IGRlbHRhS1tpIC0gMV1cbiAgICAgICAgOiAoc2lnbihkZWx0YUtbaSAtIDFdKSAhPT0gc2lnbihkZWx0YUtbaV0pKSA/IDBcbiAgICAgICAgICA6IChkZWx0YUtbaSAtIDFdICsgZGVsdGFLW2ldKSAvIDI7XG4gIH1cblxuICBtb25vdG9uZUFkanVzdChwb2ludHMsIGRlbHRhSywgbUspO1xuXG4gIG1vbm90b25lQ29tcHV0ZShwb2ludHMsIG1LLCBpbmRleEF4aXMpO1xufVxuXG5mdW5jdGlvbiBjYXBDb250cm9sUG9pbnQocHQ6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihwdCwgbWF4KSwgbWluKTtcbn1cblxuZnVuY3Rpb24gY2FwQmV6aWVyUG9pbnRzKHBvaW50czogU3BsaW5lUG9pbnRbXSwgYXJlYTogQ2hhcnRBcmVhKSB7XG4gIGxldCBpLCBpbGVuLCBwb2ludCwgaW5BcmVhLCBpbkFyZWFQcmV2O1xuICBsZXQgaW5BcmVhTmV4dCA9IF9pc1BvaW50SW5BcmVhKHBvaW50c1swXSwgYXJlYSk7XG4gIGZvciAoaSA9IDAsIGlsZW4gPSBwb2ludHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgaW5BcmVhUHJldiA9IGluQXJlYTtcbiAgICBpbkFyZWEgPSBpbkFyZWFOZXh0O1xuICAgIGluQXJlYU5leHQgPSBpIDwgaWxlbiAtIDEgJiYgX2lzUG9pbnRJbkFyZWEocG9pbnRzW2kgKyAxXSwgYXJlYSk7XG4gICAgaWYgKCFpbkFyZWEpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBwb2ludCA9IHBvaW50c1tpXTtcbiAgICBpZiAoaW5BcmVhUHJldikge1xuICAgICAgcG9pbnQuY3AxeCA9IGNhcENvbnRyb2xQb2ludChwb2ludC5jcDF4LCBhcmVhLmxlZnQsIGFyZWEucmlnaHQpO1xuICAgICAgcG9pbnQuY3AxeSA9IGNhcENvbnRyb2xQb2ludChwb2ludC5jcDF5LCBhcmVhLnRvcCwgYXJlYS5ib3R0b20pO1xuICAgIH1cbiAgICBpZiAoaW5BcmVhTmV4dCkge1xuICAgICAgcG9pbnQuY3AyeCA9IGNhcENvbnRyb2xQb2ludChwb2ludC5jcDJ4LCBhcmVhLmxlZnQsIGFyZWEucmlnaHQpO1xuICAgICAgcG9pbnQuY3AyeSA9IGNhcENvbnRyb2xQb2ludChwb2ludC5jcDJ5LCBhcmVhLnRvcCwgYXJlYS5ib3R0b20pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfdXBkYXRlQmV6aWVyQ29udHJvbFBvaW50cyhcbiAgcG9pbnRzOiBTcGxpbmVQb2ludFtdLFxuICBvcHRpb25zLFxuICBhcmVhOiBDaGFydEFyZWEsXG4gIGxvb3A6IGJvb2xlYW4sXG4gIGluZGV4QXhpczogJ3gnIHwgJ3knXG4pIHtcbiAgbGV0IGk6IG51bWJlciwgaWxlbjogbnVtYmVyLCBwb2ludDogU3BsaW5lUG9pbnQsIGNvbnRyb2xQb2ludHM6IFJldHVyblR5cGU8dHlwZW9mIHNwbGluZUN1cnZlPjtcblxuICAvLyBPbmx5IGNvbnNpZGVyIHBvaW50cyB0aGF0IGFyZSBkcmF3biBpbiBjYXNlIHRoZSBzcGFuR2FwcyBvcHRpb24gaXMgdXNlZFxuICBpZiAob3B0aW9ucy5zcGFuR2Fwcykge1xuICAgIHBvaW50cyA9IHBvaW50cy5maWx0ZXIoKHB0KSA9PiAhcHQuc2tpcCk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5jdWJpY0ludGVycG9sYXRpb25Nb2RlID09PSAnbW9ub3RvbmUnKSB7XG4gICAgc3BsaW5lQ3VydmVNb25vdG9uZShwb2ludHMsIGluZGV4QXhpcyk7XG4gIH0gZWxzZSB7XG4gICAgbGV0IHByZXYgPSBsb29wID8gcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSA6IHBvaW50c1swXTtcbiAgICBmb3IgKGkgPSAwLCBpbGVuID0gcG9pbnRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgcG9pbnQgPSBwb2ludHNbaV07XG4gICAgICBjb250cm9sUG9pbnRzID0gc3BsaW5lQ3VydmUoXG4gICAgICAgIHByZXYsXG4gICAgICAgIHBvaW50LFxuICAgICAgICBwb2ludHNbTWF0aC5taW4oaSArIDEsIGlsZW4gLSAobG9vcCA/IDAgOiAxKSkgJSBpbGVuXSxcbiAgICAgICAgb3B0aW9ucy50ZW5zaW9uXG4gICAgICApO1xuICAgICAgcG9pbnQuY3AxeCA9IGNvbnRyb2xQb2ludHMucHJldmlvdXMueDtcbiAgICAgIHBvaW50LmNwMXkgPSBjb250cm9sUG9pbnRzLnByZXZpb3VzLnk7XG4gICAgICBwb2ludC5jcDJ4ID0gY29udHJvbFBvaW50cy5uZXh0Lng7XG4gICAgICBwb2ludC5jcDJ5ID0gY29udHJvbFBvaW50cy5uZXh0Lnk7XG4gICAgICBwcmV2ID0gcG9pbnQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdGlvbnMuY2FwQmV6aWVyUG9pbnRzKSB7XG4gICAgY2FwQmV6aWVyUG9pbnRzKHBvaW50cywgYXJlYSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7Q2hhcnRBcmVhLCBTY2FsZX0gZnJvbSAnLi4vdHlwZXMvaW5kZXguanMnO1xuaW1wb3J0IHR5cGUgQ2hhcnQgZnJvbSAnLi4vY29yZS9jb3JlLmNvbnRyb2xsZXIuanMnO1xuaW1wb3J0IHR5cGUge0NoYXJ0RXZlbnR9IGZyb20gJy4uL3R5cGVzLmpzJztcbmltcG9ydCB7SU5GSU5JVFl9IGZyb20gJy4vaGVscGVycy5tYXRoLmpzJztcblxuLyoqXG4gKiBOb3RlOiB0eXBlZGVmcyBhcmUgYXV0by1leHBvcnRlZCwgc28gdXNlIGEgbWFkZS11cCBgZG9tYCBuYW1lc3BhY2Ugd2hlcmVcbiAqIG5lY2Vzc2FyeSB0byBhdm9pZCBkdXBsaWNhdGVzIHdpdGggYGV4cG9ydCAqIGZyb20gJy4vaGVscGVyc2A7IHNlZVxuICogaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80NjAxMVxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uL2NvcmUvY29yZS5jb250cm9sbGVyLmpzJykuZGVmYXVsdCB9IGRvbS5DaGFydFxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uLy4uL3R5cGVzJykuQ2hhcnRFdmVudCB9IENoYXJ0RXZlbnRcbiAqL1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfaXNEb21TdXBwb3J0ZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZ2V0UGFyZW50Tm9kZShkb21Ob2RlOiBIVE1MQ2FudmFzRWxlbWVudCk6IEhUTUxDYW52YXNFbGVtZW50IHtcbiAgbGV0IHBhcmVudCA9IGRvbU5vZGUucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCAmJiBwYXJlbnQudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgU2hhZG93Um9vdF0nKSB7XG4gICAgcGFyZW50ID0gKHBhcmVudCBhcyBTaGFkb3dSb290KS5ob3N0O1xuICB9XG4gIHJldHVybiBwYXJlbnQgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG59XG5cbi8qKlxuICogY29udmVydCBtYXgtd2lkdGgvbWF4LWhlaWdodCB2YWx1ZXMgdGhhdCBtYXkgYmUgcGVyY2VudGFnZXMgaW50byBhIG51bWJlclxuICogQHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZU1heFN0eWxlKHN0eWxlVmFsdWU6IHN0cmluZyB8IG51bWJlciwgbm9kZTogSFRNTEVsZW1lbnQsIHBhcmVudFByb3BlcnR5OiBzdHJpbmcpIHtcbiAgbGV0IHZhbHVlSW5QaXhlbHM6IG51bWJlcjtcbiAgaWYgKHR5cGVvZiBzdHlsZVZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHZhbHVlSW5QaXhlbHMgPSBwYXJzZUludChzdHlsZVZhbHVlLCAxMCk7XG5cbiAgICBpZiAoc3R5bGVWYWx1ZS5pbmRleE9mKCclJykgIT09IC0xKSB7XG4gICAgICAvLyBwZXJjZW50YWdlICogc2l6ZSBpbiBkaW1lbnNpb25cbiAgICAgIHZhbHVlSW5QaXhlbHMgPSAodmFsdWVJblBpeGVscyAvIDEwMCkgKiBub2RlLnBhcmVudE5vZGVbcGFyZW50UHJvcGVydHldO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZUluUGl4ZWxzID0gc3R5bGVWYWx1ZTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZUluUGl4ZWxzO1xufVxuXG5jb25zdCBnZXRDb21wdXRlZFN0eWxlID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogQ1NTU3R5bGVEZWNsYXJhdGlvbiA9PlxuICBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0eWxlKGVsOiBIVE1MRWxlbWVudCwgcHJvcGVydHk6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KTtcbn1cblxuY29uc3QgcG9zaXRpb25zID0gWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnXTtcbmZ1bmN0aW9uIGdldFBvc2l0aW9uZWRTdHlsZShzdHlsZXM6IENTU1N0eWxlRGVjbGFyYXRpb24sIHN0eWxlOiBzdHJpbmcsIHN1ZmZpeD86IHN0cmluZyk6IENoYXJ0QXJlYSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9IGFzIENoYXJ0QXJlYTtcbiAgc3VmZml4ID0gc3VmZml4ID8gJy0nICsgc3VmZml4IDogJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgY29uc3QgcG9zID0gcG9zaXRpb25zW2ldO1xuICAgIHJlc3VsdFtwb3NdID0gcGFyc2VGbG9hdChzdHlsZXNbc3R5bGUgKyAnLScgKyBwb3MgKyBzdWZmaXhdKSB8fCAwO1xuICB9XG4gIHJlc3VsdC53aWR0aCA9IHJlc3VsdC5sZWZ0ICsgcmVzdWx0LnJpZ2h0O1xuICByZXN1bHQuaGVpZ2h0ID0gcmVzdWx0LnRvcCArIHJlc3VsdC5ib3R0b207XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmNvbnN0IHVzZU9mZnNldFBvcyA9ICh4OiBudW1iZXIsIHk6IG51bWJlciwgdGFyZ2V0OiBIVE1MRWxlbWVudCB8IEV2ZW50VGFyZ2V0KSA9PlxuICAoeCA+IDAgfHwgeSA+IDApICYmICghdGFyZ2V0IHx8ICEodGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5zaGFkb3dSb290KTtcblxuLyoqXG4gKiBAcGFyYW0gZVxuICogQHBhcmFtIGNhbnZhc1xuICogQHJldHVybnMgQ2FudmFzIHBvc2l0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldENhbnZhc1Bvc2l0aW9uKFxuICBlOiBFdmVudCB8IFRvdWNoRXZlbnQgfCBNb3VzZUV2ZW50LFxuICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50XG4pOiB7XG4gICAgeDogbnVtYmVyO1xuICAgIHk6IG51bWJlcjtcbiAgICBib3g6IGJvb2xlYW47XG4gIH0ge1xuICBjb25zdCB0b3VjaGVzID0gKGUgYXMgVG91Y2hFdmVudCkudG91Y2hlcztcbiAgY29uc3Qgc291cmNlID0gKHRvdWNoZXMgJiYgdG91Y2hlcy5sZW5ndGggPyB0b3VjaGVzWzBdIDogZSkgYXMgTW91c2VFdmVudDtcbiAgY29uc3Qge29mZnNldFgsIG9mZnNldFl9ID0gc291cmNlIGFzIE1vdXNlRXZlbnQ7XG4gIGxldCBib3ggPSBmYWxzZTtcbiAgbGV0IHgsIHk7XG4gIGlmICh1c2VPZmZzZXRQb3Mob2Zmc2V0WCwgb2Zmc2V0WSwgZS50YXJnZXQpKSB7XG4gICAgeCA9IG9mZnNldFg7XG4gICAgeSA9IG9mZnNldFk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB4ID0gc291cmNlLmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgeSA9IHNvdXJjZS5jbGllbnRZIC0gcmVjdC50b3A7XG4gICAgYm94ID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4ge3gsIHksIGJveH07XG59XG5cbi8qKlxuICogR2V0cyBhbiBldmVudCdzIHgsIHkgY29vcmRpbmF0ZXMsIHJlbGF0aXZlIHRvIHRoZSBjaGFydCBhcmVhXG4gKiBAcGFyYW0gZXZlbnRcbiAqIEBwYXJhbSBjaGFydFxuICogQHJldHVybnMgeCBhbmQgeSBjb29yZGluYXRlcyBvZiB0aGUgZXZlbnRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVsYXRpdmVQb3NpdGlvbihcbiAgZXZlbnQ6IEV2ZW50IHwgQ2hhcnRFdmVudCB8IFRvdWNoRXZlbnQgfCBNb3VzZUV2ZW50LFxuICBjaGFydDogQ2hhcnRcbik6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSB7XG4gIGlmICgnbmF0aXZlJyBpbiBldmVudCkge1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuXG4gIGNvbnN0IHtjYW52YXMsIGN1cnJlbnREZXZpY2VQaXhlbFJhdGlvfSA9IGNoYXJ0O1xuICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoY2FudmFzKTtcbiAgY29uc3QgYm9yZGVyQm94ID0gc3R5bGUuYm94U2l6aW5nID09PSAnYm9yZGVyLWJveCc7XG4gIGNvbnN0IHBhZGRpbmdzID0gZ2V0UG9zaXRpb25lZFN0eWxlKHN0eWxlLCAncGFkZGluZycpO1xuICBjb25zdCBib3JkZXJzID0gZ2V0UG9zaXRpb25lZFN0eWxlKHN0eWxlLCAnYm9yZGVyJywgJ3dpZHRoJyk7XG4gIGNvbnN0IHt4LCB5LCBib3h9ID0gZ2V0Q2FudmFzUG9zaXRpb24oZXZlbnQsIGNhbnZhcyk7XG4gIGNvbnN0IHhPZmZzZXQgPSBwYWRkaW5ncy5sZWZ0ICsgKGJveCAmJiBib3JkZXJzLmxlZnQpO1xuICBjb25zdCB5T2Zmc2V0ID0gcGFkZGluZ3MudG9wICsgKGJveCAmJiBib3JkZXJzLnRvcCk7XG5cbiAgbGV0IHt3aWR0aCwgaGVpZ2h0fSA9IGNoYXJ0O1xuICBpZiAoYm9yZGVyQm94KSB7XG4gICAgd2lkdGggLT0gcGFkZGluZ3Mud2lkdGggKyBib3JkZXJzLndpZHRoO1xuICAgIGhlaWdodCAtPSBwYWRkaW5ncy5oZWlnaHQgKyBib3JkZXJzLmhlaWdodDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHg6IE1hdGgucm91bmQoKHggLSB4T2Zmc2V0KSAvIHdpZHRoICogY2FudmFzLndpZHRoIC8gY3VycmVudERldmljZVBpeGVsUmF0aW8pLFxuICAgIHk6IE1hdGgucm91bmQoKHkgLSB5T2Zmc2V0KSAvIGhlaWdodCAqIGNhbnZhcy5oZWlnaHQgLyBjdXJyZW50RGV2aWNlUGl4ZWxSYXRpbylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29udGFpbmVyU2l6ZShjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IFBhcnRpYWw8U2NhbGU+IHtcbiAgbGV0IG1heFdpZHRoOiBudW1iZXIsIG1heEhlaWdodDogbnVtYmVyO1xuXG4gIGlmICh3aWR0aCA9PT0gdW5kZWZpbmVkIHx8IGhlaWdodCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gX2dldFBhcmVudE5vZGUoY2FudmFzKTtcbiAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgd2lkdGggPSBjYW52YXMuY2xpZW50V2lkdGg7XG4gICAgICBoZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyAvLyB0aGlzIGlzIHRoZSBib3JkZXIgYm94IG9mIHRoZSBjb250YWluZXJcbiAgICAgIGNvbnN0IGNvbnRhaW5lclN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShjb250YWluZXIpO1xuICAgICAgY29uc3QgY29udGFpbmVyQm9yZGVyID0gZ2V0UG9zaXRpb25lZFN0eWxlKGNvbnRhaW5lclN0eWxlLCAnYm9yZGVyJywgJ3dpZHRoJyk7XG4gICAgICBjb25zdCBjb250YWluZXJQYWRkaW5nID0gZ2V0UG9zaXRpb25lZFN0eWxlKGNvbnRhaW5lclN0eWxlLCAncGFkZGluZycpO1xuICAgICAgd2lkdGggPSByZWN0LndpZHRoIC0gY29udGFpbmVyUGFkZGluZy53aWR0aCAtIGNvbnRhaW5lckJvcmRlci53aWR0aDtcbiAgICAgIGhlaWdodCA9IHJlY3QuaGVpZ2h0IC0gY29udGFpbmVyUGFkZGluZy5oZWlnaHQgLSBjb250YWluZXJCb3JkZXIuaGVpZ2h0O1xuICAgICAgbWF4V2lkdGggPSBwYXJzZU1heFN0eWxlKGNvbnRhaW5lclN0eWxlLm1heFdpZHRoLCBjb250YWluZXIsICdjbGllbnRXaWR0aCcpO1xuICAgICAgbWF4SGVpZ2h0ID0gcGFyc2VNYXhTdHlsZShjb250YWluZXJTdHlsZS5tYXhIZWlnaHQsIGNvbnRhaW5lciwgJ2NsaWVudEhlaWdodCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBtYXhXaWR0aDogbWF4V2lkdGggfHwgSU5GSU5JVFksXG4gICAgbWF4SGVpZ2h0OiBtYXhIZWlnaHQgfHwgSU5GSU5JVFlcbiAgfTtcbn1cblxuY29uc3Qgcm91bmQxID0gKHY6IG51bWJlcikgPT4gTWF0aC5yb3VuZCh2ICogMTApIC8gMTA7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4aW11bVNpemUoXG4gIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsXG4gIGJiV2lkdGg/OiBudW1iZXIsXG4gIGJiSGVpZ2h0PzogbnVtYmVyLFxuICBhc3BlY3RSYXRpbz86IG51bWJlclxuKTogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9IHtcbiAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGNhbnZhcyk7XG4gIGNvbnN0IG1hcmdpbnMgPSBnZXRQb3NpdGlvbmVkU3R5bGUoc3R5bGUsICdtYXJnaW4nKTtcbiAgY29uc3QgbWF4V2lkdGggPSBwYXJzZU1heFN0eWxlKHN0eWxlLm1heFdpZHRoLCBjYW52YXMsICdjbGllbnRXaWR0aCcpIHx8IElORklOSVRZO1xuICBjb25zdCBtYXhIZWlnaHQgPSBwYXJzZU1heFN0eWxlKHN0eWxlLm1heEhlaWdodCwgY2FudmFzLCAnY2xpZW50SGVpZ2h0JykgfHwgSU5GSU5JVFk7XG4gIGNvbnN0IGNvbnRhaW5lclNpemUgPSBnZXRDb250YWluZXJTaXplKGNhbnZhcywgYmJXaWR0aCwgYmJIZWlnaHQpO1xuICBsZXQge3dpZHRoLCBoZWlnaHR9ID0gY29udGFpbmVyU2l6ZTtcblxuICBpZiAoc3R5bGUuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnKSB7XG4gICAgY29uc3QgYm9yZGVycyA9IGdldFBvc2l0aW9uZWRTdHlsZShzdHlsZSwgJ2JvcmRlcicsICd3aWR0aCcpO1xuICAgIGNvbnN0IHBhZGRpbmdzID0gZ2V0UG9zaXRpb25lZFN0eWxlKHN0eWxlLCAncGFkZGluZycpO1xuICAgIHdpZHRoIC09IHBhZGRpbmdzLndpZHRoICsgYm9yZGVycy53aWR0aDtcbiAgICBoZWlnaHQgLT0gcGFkZGluZ3MuaGVpZ2h0ICsgYm9yZGVycy5oZWlnaHQ7XG4gIH1cbiAgd2lkdGggPSBNYXRoLm1heCgwLCB3aWR0aCAtIG1hcmdpbnMud2lkdGgpO1xuICBoZWlnaHQgPSBNYXRoLm1heCgwLCBhc3BlY3RSYXRpbyA/IHdpZHRoIC8gYXNwZWN0UmF0aW8gOiBoZWlnaHQgLSBtYXJnaW5zLmhlaWdodCk7XG4gIHdpZHRoID0gcm91bmQxKE1hdGgubWluKHdpZHRoLCBtYXhXaWR0aCwgY29udGFpbmVyU2l6ZS5tYXhXaWR0aCkpO1xuICBoZWlnaHQgPSByb3VuZDEoTWF0aC5taW4oaGVpZ2h0LCBtYXhIZWlnaHQsIGNvbnRhaW5lclNpemUubWF4SGVpZ2h0KSk7XG4gIGlmICh3aWR0aCAmJiAhaGVpZ2h0KSB7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzQ2NTlcbiAgICAvLyBJZiB0aGUgY2FudmFzIGhhcyB3aWR0aCwgYnV0IG5vIGhlaWdodCwgZGVmYXVsdCB0byBhc3BlY3RSYXRpbyBvZiAyIChjYW52YXMgZGVmYXVsdClcbiAgICBoZWlnaHQgPSByb3VuZDEod2lkdGggLyAyKTtcbiAgfVxuXG4gIGNvbnN0IG1haW50YWluSGVpZ2h0ID0gYmJXaWR0aCAhPT0gdW5kZWZpbmVkIHx8IGJiSGVpZ2h0ICE9PSB1bmRlZmluZWQ7XG5cbiAgaWYgKG1haW50YWluSGVpZ2h0ICYmIGFzcGVjdFJhdGlvICYmIGNvbnRhaW5lclNpemUuaGVpZ2h0ICYmIGhlaWdodCA+IGNvbnRhaW5lclNpemUuaGVpZ2h0KSB7XG4gICAgaGVpZ2h0ID0gY29udGFpbmVyU2l6ZS5oZWlnaHQ7XG4gICAgd2lkdGggPSByb3VuZDEoTWF0aC5mbG9vcihoZWlnaHQgKiBhc3BlY3RSYXRpbykpO1xuICB9XG5cbiAgcmV0dXJuIHt3aWR0aCwgaGVpZ2h0fTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gY2hhcnRcbiAqIEBwYXJhbSBmb3JjZVJhdGlvXG4gKiBAcGFyYW0gZm9yY2VTdHlsZVxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgY2FudmFzIGNvbnRleHQgc2l6ZSBvciB0cmFuc2Zvcm1hdGlvbiBoYXMgY2hhbmdlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldGluYVNjYWxlKFxuICBjaGFydDogQ2hhcnQsXG4gIGZvcmNlUmF0aW86IG51bWJlcixcbiAgZm9yY2VTdHlsZT86IGJvb2xlYW5cbik6IGJvb2xlYW4gfCB2b2lkIHtcbiAgY29uc3QgcGl4ZWxSYXRpbyA9IGZvcmNlUmF0aW8gfHwgMTtcbiAgY29uc3QgZGV2aWNlSGVpZ2h0ID0gTWF0aC5mbG9vcihjaGFydC5oZWlnaHQgKiBwaXhlbFJhdGlvKTtcbiAgY29uc3QgZGV2aWNlV2lkdGggPSBNYXRoLmZsb29yKGNoYXJ0LndpZHRoICogcGl4ZWxSYXRpbyk7XG5cbiAgY2hhcnQuaGVpZ2h0ID0gTWF0aC5mbG9vcihjaGFydC5oZWlnaHQpO1xuICBjaGFydC53aWR0aCA9IE1hdGguZmxvb3IoY2hhcnQud2lkdGgpO1xuXG4gIGNvbnN0IGNhbnZhcyA9IGNoYXJ0LmNhbnZhcztcblxuICAvLyBJZiBubyBzdHlsZSBoYXMgYmVlbiBzZXQgb24gdGhlIGNhbnZhcywgdGhlIHJlbmRlciBzaXplIGlzIHVzZWQgYXMgZGlzcGxheSBzaXplLFxuICAvLyBtYWtpbmcgdGhlIGNoYXJ0IHZpc3VhbGx5IGJpZ2dlciwgc28gbGV0J3MgZW5mb3JjZSBpdCB0byB0aGUgXCJjb3JyZWN0XCIgdmFsdWVzLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzM1NzVcbiAgaWYgKGNhbnZhcy5zdHlsZSAmJiAoZm9yY2VTdHlsZSB8fCAoIWNhbnZhcy5zdHlsZS5oZWlnaHQgJiYgIWNhbnZhcy5zdHlsZS53aWR0aCkpKSB7XG4gICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke2NoYXJ0LmhlaWdodH1weGA7XG4gICAgY2FudmFzLnN0eWxlLndpZHRoID0gYCR7Y2hhcnQud2lkdGh9cHhgO1xuICB9XG5cbiAgaWYgKGNoYXJ0LmN1cnJlbnREZXZpY2VQaXhlbFJhdGlvICE9PSBwaXhlbFJhdGlvXG4gICAgICB8fCBjYW52YXMuaGVpZ2h0ICE9PSBkZXZpY2VIZWlnaHRcbiAgICAgIHx8IGNhbnZhcy53aWR0aCAhPT0gZGV2aWNlV2lkdGgpIHtcbiAgICBjaGFydC5jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG4gICAgY2FudmFzLmhlaWdodCA9IGRldmljZUhlaWdodDtcbiAgICBjYW52YXMud2lkdGggPSBkZXZpY2VXaWR0aDtcbiAgICBjaGFydC5jdHguc2V0VHJhbnNmb3JtKHBpeGVsUmF0aW8sIDAsIDAsIHBpeGVsUmF0aW8sIDAsIDApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBEZXRlY3RzIHN1cHBvcnQgZm9yIG9wdGlvbnMgb2JqZWN0IGFyZ3VtZW50IGluIGFkZEV2ZW50TGlzdGVuZXIuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnRUYXJnZXQvYWRkRXZlbnRMaXN0ZW5lciNTYWZlbHlfZGV0ZWN0aW5nX29wdGlvbl9zdXBwb3J0XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3Qgc3VwcG9ydHNFdmVudExpc3RlbmVyT3B0aW9ucyA9IChmdW5jdGlvbigpIHtcbiAgbGV0IHBhc3NpdmVTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgZ2V0IHBhc3NpdmUoKSB7IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgYnJvd3NlciBhdHRlbXB0cyB0byBhY2Nlc3MgdGhlIHBhc3NpdmUgcHJvcGVydHkuXG4gICAgICAgIHBhc3NpdmVTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBhcyBFdmVudExpc3RlbmVyT3B0aW9ucztcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0JywgbnVsbCwgb3B0aW9ucyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRpb25zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGNvbnRpbnVlIHJlZ2FyZGxlc3Mgb2YgZXJyb3JcbiAgfVxuICByZXR1cm4gcGFzc2l2ZVN1cHBvcnRlZDtcbn0oKSk7XG5cbi8qKlxuICogVGhlIFwidXNlZFwiIHNpemUgaXMgdGhlIGZpbmFsIHZhbHVlIG9mIGEgZGltZW5zaW9uIHByb3BlcnR5IGFmdGVyIGFsbCBjYWxjdWxhdGlvbnMgaGF2ZVxuICogYmVlbiBwZXJmb3JtZWQuIFRoaXMgbWV0aG9kIHVzZXMgdGhlIGNvbXB1dGVkIHN0eWxlIG9mIGBlbGVtZW50YCBidXQgcmV0dXJucyB1bmRlZmluZWRcbiAqIGlmIHRoZSBjb21wdXRlZCBzdHlsZSBpcyBub3QgZXhwcmVzc2VkIGluIHBpeGVscy4gVGhhdCBjYW4gaGFwcGVuIGluIHNvbWUgY2FzZXMgd2hlcmVcbiAqIGBlbGVtZW50YCBoYXMgYSBzaXplIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgYW5kIHRoaXMgbGFzdCBvbmUgaXMgbm90IHlldCBkaXNwbGF5ZWQsXG4gKiBmb3IgZXhhbXBsZSBiZWNhdXNlIG9mIGBkaXNwbGF5OiBub25lYCBvbiBhIHBhcmVudCBub2RlLlxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvdXNlZF92YWx1ZVxuICogQHJldHVybnMgU2l6ZSBpbiBwaXhlbHMgb3IgdW5kZWZpbmVkIGlmIHVua25vd24uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRVc2VkU2l6ZShcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gIHByb3BlcnR5OiAnd2lkdGgnIHwgJ2hlaWdodCdcbik6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHZhbHVlID0gZ2V0U3R5bGUoZWxlbWVudCwgcHJvcGVydHkpO1xuICBjb25zdCBtYXRjaGVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goL14oXFxkKykoXFwuXFxkKyk/cHgkLyk7XG4gIHJldHVybiBtYXRjaGVzID8gK21hdGNoZXNbMV0gOiB1bmRlZmluZWQ7XG59XG4iLCAiaW1wb3J0IHR5cGUge1BvaW50LCBTcGxpbmVQb2ludH0gZnJvbSAnLi4vdHlwZXMvZ2VvbWV0cmljLmpzJztcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX3BvaW50SW5MaW5lKHAxOiBQb2ludCwgcDI6IFBvaW50LCB0OiBudW1iZXIsIG1vZGU/KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gIHJldHVybiB7XG4gICAgeDogcDEueCArIHQgKiAocDIueCAtIHAxLngpLFxuICAgIHk6IHAxLnkgKyB0ICogKHAyLnkgLSBwMS55KVxuICB9O1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfc3RlcHBlZEludGVycG9sYXRpb24oXG4gIHAxOiBQb2ludCxcbiAgcDI6IFBvaW50LFxuICB0OiBudW1iZXIsIG1vZGU6ICdtaWRkbGUnIHwgJ2FmdGVyJyB8IHVua25vd25cbikge1xuICByZXR1cm4ge1xuICAgIHg6IHAxLnggKyB0ICogKHAyLnggLSBwMS54KSxcbiAgICB5OiBtb2RlID09PSAnbWlkZGxlJyA/IHQgPCAwLjUgPyBwMS55IDogcDIueVxuICAgICAgOiBtb2RlID09PSAnYWZ0ZXInID8gdCA8IDEgPyBwMS55IDogcDIueVxuICAgICAgICA6IHQgPiAwID8gcDIueSA6IHAxLnlcbiAgfTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2JlemllckludGVycG9sYXRpb24ocDE6IFNwbGluZVBvaW50LCBwMjogU3BsaW5lUG9pbnQsIHQ6IG51bWJlciwgbW9kZT8pIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgY29uc3QgY3AxID0ge3g6IHAxLmNwMngsIHk6IHAxLmNwMnl9O1xuICBjb25zdCBjcDIgPSB7eDogcDIuY3AxeCwgeTogcDIuY3AxeX07XG4gIGNvbnN0IGEgPSBfcG9pbnRJbkxpbmUocDEsIGNwMSwgdCk7XG4gIGNvbnN0IGIgPSBfcG9pbnRJbkxpbmUoY3AxLCBjcDIsIHQpO1xuICBjb25zdCBjID0gX3BvaW50SW5MaW5lKGNwMiwgcDIsIHQpO1xuICBjb25zdCBkID0gX3BvaW50SW5MaW5lKGEsIGIsIHQpO1xuICBjb25zdCBlID0gX3BvaW50SW5MaW5lKGIsIGMsIHQpO1xuICByZXR1cm4gX3BvaW50SW5MaW5lKGQsIGUsIHQpO1xufVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgUlRMQWRhcHRlciB7XG4gIHgoeDogbnVtYmVyKTogbnVtYmVyO1xuICBzZXRXaWR0aCh3OiBudW1iZXIpOiB2b2lkO1xuICB0ZXh0QWxpZ24oYWxpZ246ICdjZW50ZXInIHwgJ2xlZnQnIHwgJ3JpZ2h0Jyk6ICdjZW50ZXInIHwgJ2xlZnQnIHwgJ3JpZ2h0JztcbiAgeFBsdXMoeDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKTogbnVtYmVyO1xuICBsZWZ0Rm9yTHRyKHg6IG51bWJlciwgaXRlbVdpZHRoOiBudW1iZXIpOiBudW1iZXI7XG59XG5cbmNvbnN0IGdldFJpZ2h0VG9MZWZ0QWRhcHRlciA9IGZ1bmN0aW9uKHJlY3RYOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBSVExBZGFwdGVyIHtcbiAgcmV0dXJuIHtcbiAgICB4KHgpIHtcbiAgICAgIHJldHVybiByZWN0WCArIHJlY3RYICsgd2lkdGggLSB4O1xuICAgIH0sXG4gICAgc2V0V2lkdGgodykge1xuICAgICAgd2lkdGggPSB3O1xuICAgIH0sXG4gICAgdGV4dEFsaWduKGFsaWduKSB7XG4gICAgICBpZiAoYWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgIHJldHVybiBhbGlnbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhbGlnbiA9PT0gJ3JpZ2h0JyA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gICAgfSxcbiAgICB4UGx1cyh4LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHggLSB2YWx1ZTtcbiAgICB9LFxuICAgIGxlZnRGb3JMdHIoeCwgaXRlbVdpZHRoKSB7XG4gICAgICByZXR1cm4geCAtIGl0ZW1XaWR0aDtcbiAgICB9LFxuICB9O1xufTtcblxuY29uc3QgZ2V0TGVmdFRvUmlnaHRBZGFwdGVyID0gZnVuY3Rpb24oKTogUlRMQWRhcHRlciB7XG4gIHJldHVybiB7XG4gICAgeCh4KSB7XG4gICAgICByZXR1cm4geDtcbiAgICB9LFxuICAgIHNldFdpZHRoKHcpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIH0sXG4gICAgdGV4dEFsaWduKGFsaWduKSB7XG4gICAgICByZXR1cm4gYWxpZ247XG4gICAgfSxcbiAgICB4UGx1cyh4LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHggKyB2YWx1ZTtcbiAgICB9LFxuICAgIGxlZnRGb3JMdHIoeCwgX2l0ZW1XaWR0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgcmV0dXJuIHg7XG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdGxBZGFwdGVyKHJ0bDogYm9vbGVhbiwgcmVjdFg6IG51bWJlciwgd2lkdGg6IG51bWJlcikge1xuICByZXR1cm4gcnRsID8gZ2V0UmlnaHRUb0xlZnRBZGFwdGVyKHJlY3RYLCB3aWR0aCkgOiBnZXRMZWZ0VG9SaWdodEFkYXB0ZXIoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG92ZXJyaWRlVGV4dERpcmVjdGlvbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZGlyZWN0aW9uOiAnbHRyJyB8ICdydGwnKSB7XG4gIGxldCBzdHlsZTogQ1NTU3R5bGVEZWNsYXJhdGlvbiwgb3JpZ2luYWw6IFtzdHJpbmcsIHN0cmluZ107XG4gIGlmIChkaXJlY3Rpb24gPT09ICdsdHInIHx8IGRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICBzdHlsZSA9IGN0eC5jYW52YXMuc3R5bGU7XG4gICAgb3JpZ2luYWwgPSBbXG4gICAgICBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdkaXJlY3Rpb24nKSxcbiAgICAgIHN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkoJ2RpcmVjdGlvbicpLFxuICAgIF07XG5cbiAgICBzdHlsZS5zZXRQcm9wZXJ0eSgnZGlyZWN0aW9uJywgZGlyZWN0aW9uLCAnaW1wb3J0YW50Jyk7XG4gICAgKGN0eCBhcyB7IHByZXZUZXh0RGlyZWN0aW9uPzogW3N0cmluZywgc3RyaW5nXSB9KS5wcmV2VGV4dERpcmVjdGlvbiA9IG9yaWdpbmFsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlVGV4dERpcmVjdGlvbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgb3JpZ2luYWw/OiBbc3RyaW5nLCBzdHJpbmddKSB7XG4gIGlmIChvcmlnaW5hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZGVsZXRlIChjdHggYXMgeyBwcmV2VGV4dERpcmVjdGlvbj86IFtzdHJpbmcsIHN0cmluZ10gfSkucHJldlRleHREaXJlY3Rpb247XG4gICAgY3R4LmNhbnZhcy5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlyZWN0aW9uJywgb3JpZ2luYWxbMF0sIG9yaWdpbmFsWzFdKTtcbiAgfVxufVxuIiwgImltcG9ydCB7X2FuZ2xlQmV0d2VlbiwgX2FuZ2xlRGlmZiwgX2lzQmV0d2VlbiwgX25vcm1hbGl6ZUFuZ2xlfSBmcm9tICcuL2hlbHBlcnMubWF0aC5qcyc7XG5pbXBvcnQge2NyZWF0ZUNvbnRleHR9IGZyb20gJy4vaGVscGVycy5vcHRpb25zLmpzJztcbmltcG9ydCB7aXNQYXR0ZXJuT3JHcmFkaWVudH0gZnJvbSAnLi9oZWxwZXJzLmNvbG9yLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vZWxlbWVudHMvZWxlbWVudC5saW5lLmpzJykuZGVmYXVsdCB9IExpbmVFbGVtZW50XG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vZWxlbWVudHMvZWxlbWVudC5wb2ludC5qcycpLmRlZmF1bHQgfSBQb2ludEVsZW1lbnRcbiAqIEB0eXBlZGVmIHt7c3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGxvb3A6IGJvb2xlYW4sIHN0eWxlPzogYW55fX0gU2VnbWVudFxuICovXG5cbmZ1bmN0aW9uIHByb3BlcnR5Rm4ocHJvcGVydHkpIHtcbiAgaWYgKHByb3BlcnR5ID09PSAnYW5nbGUnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJldHdlZW46IF9hbmdsZUJldHdlZW4sXG4gICAgICBjb21wYXJlOiBfYW5nbGVEaWZmLFxuICAgICAgbm9ybWFsaXplOiBfbm9ybWFsaXplQW5nbGUsXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGJldHdlZW46IF9pc0JldHdlZW4sXG4gICAgY29tcGFyZTogKGEsIGIpID0+IGEgLSBiLFxuICAgIG5vcm1hbGl6ZTogeCA9PiB4XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVNlZ21lbnQoe3N0YXJ0LCBlbmQsIGNvdW50LCBsb29wLCBzdHlsZX0pIHtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogc3RhcnQgJSBjb3VudCxcbiAgICBlbmQ6IGVuZCAlIGNvdW50LFxuICAgIGxvb3A6IGxvb3AgJiYgKGVuZCAtIHN0YXJ0ICsgMSkgJSBjb3VudCA9PT0gMCxcbiAgICBzdHlsZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTZWdtZW50KHNlZ21lbnQsIHBvaW50cywgYm91bmRzKSB7XG4gIGNvbnN0IHtwcm9wZXJ0eSwgc3RhcnQ6IHN0YXJ0Qm91bmQsIGVuZDogZW5kQm91bmR9ID0gYm91bmRzO1xuICBjb25zdCB7YmV0d2Vlbiwgbm9ybWFsaXplfSA9IHByb3BlcnR5Rm4ocHJvcGVydHkpO1xuICBjb25zdCBjb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgbGV0IHtzdGFydCwgZW5kLCBsb29wfSA9IHNlZ21lbnQ7XG4gIGxldCBpLCBpbGVuO1xuXG4gIGlmIChsb29wKSB7XG4gICAgc3RhcnQgKz0gY291bnQ7XG4gICAgZW5kICs9IGNvdW50O1xuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBjb3VudDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgaWYgKCFiZXR3ZWVuKG5vcm1hbGl6ZShwb2ludHNbc3RhcnQgJSBjb3VudF1bcHJvcGVydHldKSwgc3RhcnRCb3VuZCwgZW5kQm91bmQpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhcnQtLTtcbiAgICAgIGVuZC0tO1xuICAgIH1cbiAgICBzdGFydCAlPSBjb3VudDtcbiAgICBlbmQgJT0gY291bnQ7XG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIHtcbiAgICBlbmQgKz0gY291bnQ7XG4gIH1cbiAgcmV0dXJuIHtzdGFydCwgZW5kLCBsb29wLCBzdHlsZTogc2VnbWVudC5zdHlsZX07XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc3ViLXNlZ21lbnQocykgb2YgYSBsaW5lIHNlZ21lbnQgdGhhdCBmYWxsIGluIHRoZSBnaXZlbiBib3VuZHNcbiAqIEBwYXJhbSB7b2JqZWN0fSBzZWdtZW50XG4gKiBAcGFyYW0ge251bWJlcn0gc2VnbWVudC5zdGFydCAtIHN0YXJ0IGluZGV4IG9mIHRoZSBzZWdtZW50LCByZWZlcnJpbmcgdGhlIHBvaW50cyBhcnJheVxuICogQHBhcmFtIHtudW1iZXJ9IHNlZ21lbnQuZW5kIC0gZW5kIGluZGV4IG9mIHRoZSBzZWdtZW50LCByZWZlcnJpbmcgdGhlIHBvaW50cyBhcnJheVxuICogQHBhcmFtIHtib29sZWFufSBzZWdtZW50Lmxvb3AgLSBpbmRpY2F0ZXMgdGhhdCB0aGUgc2VnbWVudCBpcyBhIGxvb3BcbiAqIEBwYXJhbSB7b2JqZWN0fSBbc2VnbWVudC5zdHlsZV0gLSBzZWdtZW50IHN0eWxlXG4gKiBAcGFyYW0ge1BvaW50RWxlbWVudFtdfSBwb2ludHMgLSB0aGUgcG9pbnRzIHRoYXQgdGhpcyBzZWdtZW50IHJlZmVycyB0b1xuICogQHBhcmFtIHtvYmplY3R9IFtib3VuZHNdXG4gKiBAcGFyYW0ge3N0cmluZ30gYm91bmRzLnByb3BlcnR5IC0gdGhlIHByb3BlcnR5IG9mIGEgYFBvaW50RWxlbWVudGAgd2UgYXJlIGJvdW5kaW5nLiBgeGAsIGB5YCBvciBgYW5nbGVgLlxuICogQHBhcmFtIHtudW1iZXJ9IGJvdW5kcy5zdGFydCAtIHN0YXJ0IHZhbHVlIG9mIHRoZSBwcm9wZXJ0eVxuICogQHBhcmFtIHtudW1iZXJ9IGJvdW5kcy5lbmQgLSBlbmQgdmFsdWUgb2YgdGhlIHByb3BlcnR5XG4gKiBAcHJpdmF0ZVxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIF9ib3VuZFNlZ21lbnQoc2VnbWVudCwgcG9pbnRzLCBib3VuZHMpIHtcbiAgaWYgKCFib3VuZHMpIHtcbiAgICByZXR1cm4gW3NlZ21lbnRdO1xuICB9XG5cbiAgY29uc3Qge3Byb3BlcnR5LCBzdGFydDogc3RhcnRCb3VuZCwgZW5kOiBlbmRCb3VuZH0gPSBib3VuZHM7XG4gIGNvbnN0IGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgY29uc3Qge2NvbXBhcmUsIGJldHdlZW4sIG5vcm1hbGl6ZX0gPSBwcm9wZXJ0eUZuKHByb3BlcnR5KTtcbiAgY29uc3Qge3N0YXJ0LCBlbmQsIGxvb3AsIHN0eWxlfSA9IGdldFNlZ21lbnQoc2VnbWVudCwgcG9pbnRzLCBib3VuZHMpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBsZXQgaW5zaWRlID0gZmFsc2U7XG4gIGxldCBzdWJTdGFydCA9IG51bGw7XG4gIGxldCB2YWx1ZSwgcG9pbnQsIHByZXZWYWx1ZTtcblxuICBjb25zdCBzdGFydElzQmVmb3JlID0gKCkgPT4gYmV0d2VlbihzdGFydEJvdW5kLCBwcmV2VmFsdWUsIHZhbHVlKSAmJiBjb21wYXJlKHN0YXJ0Qm91bmQsIHByZXZWYWx1ZSkgIT09IDA7XG4gIGNvbnN0IGVuZElzQmVmb3JlID0gKCkgPT4gY29tcGFyZShlbmRCb3VuZCwgdmFsdWUpID09PSAwIHx8IGJldHdlZW4oZW5kQm91bmQsIHByZXZWYWx1ZSwgdmFsdWUpO1xuICBjb25zdCBzaG91bGRTdGFydCA9ICgpID0+IGluc2lkZSB8fCBzdGFydElzQmVmb3JlKCk7XG4gIGNvbnN0IHNob3VsZFN0b3AgPSAoKSA9PiAhaW5zaWRlIHx8IGVuZElzQmVmb3JlKCk7XG5cbiAgZm9yIChsZXQgaSA9IHN0YXJ0LCBwcmV2ID0gc3RhcnQ7IGkgPD0gZW5kOyArK2kpIHtcbiAgICBwb2ludCA9IHBvaW50c1tpICUgY291bnRdO1xuXG4gICAgaWYgKHBvaW50LnNraXApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhbHVlID0gbm9ybWFsaXplKHBvaW50W3Byb3BlcnR5XSk7XG5cbiAgICBpZiAodmFsdWUgPT09IHByZXZWYWx1ZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaW5zaWRlID0gYmV0d2Vlbih2YWx1ZSwgc3RhcnRCb3VuZCwgZW5kQm91bmQpO1xuXG4gICAgaWYgKHN1YlN0YXJ0ID09PSBudWxsICYmIHNob3VsZFN0YXJ0KCkpIHtcbiAgICAgIHN1YlN0YXJ0ID0gY29tcGFyZSh2YWx1ZSwgc3RhcnRCb3VuZCkgPT09IDAgPyBpIDogcHJldjtcbiAgICB9XG5cbiAgICBpZiAoc3ViU3RhcnQgIT09IG51bGwgJiYgc2hvdWxkU3RvcCgpKSB7XG4gICAgICByZXN1bHQucHVzaChub3JtYWxpemVTZWdtZW50KHtzdGFydDogc3ViU3RhcnQsIGVuZDogaSwgbG9vcCwgY291bnQsIHN0eWxlfSkpO1xuICAgICAgc3ViU3RhcnQgPSBudWxsO1xuICAgIH1cbiAgICBwcmV2ID0gaTtcbiAgICBwcmV2VmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIGlmIChzdWJTdGFydCAhPT0gbnVsbCkge1xuICAgIHJlc3VsdC5wdXNoKG5vcm1hbGl6ZVNlZ21lbnQoe3N0YXJ0OiBzdWJTdGFydCwgZW5kLCBsb29wLCBjb3VudCwgc3R5bGV9KSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2VnbWVudHMgb2YgdGhlIGxpbmUgdGhhdCBhcmUgaW5zaWRlIGdpdmVuIGJvdW5kc1xuICogQHBhcmFtIHtMaW5lRWxlbWVudH0gbGluZVxuICogQHBhcmFtIHtvYmplY3R9IFtib3VuZHNdXG4gKiBAcGFyYW0ge3N0cmluZ30gYm91bmRzLnByb3BlcnR5IC0gdGhlIHByb3BlcnR5IHdlIGFyZSBib3VuZGluZyB3aXRoLiBgeGAsIGB5YCBvciBgYW5nbGVgLlxuICogQHBhcmFtIHtudW1iZXJ9IGJvdW5kcy5zdGFydCAtIHN0YXJ0IHZhbHVlIG9mIHRoZSBgcHJvcGVydHlgXG4gKiBAcGFyYW0ge251bWJlcn0gYm91bmRzLmVuZCAtIGVuZCB2YWx1ZSBvZiB0aGUgYHByb3BlcnR5YFxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9ib3VuZFNlZ21lbnRzKGxpbmUsIGJvdW5kcykge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgY29uc3Qgc2VnbWVudHMgPSBsaW5lLnNlZ21lbnRzO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzdWIgPSBfYm91bmRTZWdtZW50KHNlZ21lbnRzW2ldLCBsaW5lLnBvaW50cywgYm91bmRzKTtcbiAgICBpZiAoc3ViLmxlbmd0aCkge1xuICAgICAgcmVzdWx0LnB1c2goLi4uc3ViKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBGaW5kIHN0YXJ0IGFuZCBlbmQgaW5kZXggb2YgYSBsaW5lLlxuICovXG5mdW5jdGlvbiBmaW5kU3RhcnRBbmRFbmQocG9pbnRzLCBjb3VudCwgbG9vcCwgc3BhbkdhcHMpIHtcbiAgbGV0IHN0YXJ0ID0gMDtcbiAgbGV0IGVuZCA9IGNvdW50IC0gMTtcblxuICBpZiAobG9vcCAmJiAhc3BhbkdhcHMpIHtcbiAgICAvLyBsb29wIGFuZCBub3Qgc3Bhbm5pbmcgZ2FwcywgZmlyc3QgZmluZCBhIGdhcCB0byBzdGFydCBmcm9tXG4gICAgd2hpbGUgKHN0YXJ0IDwgY291bnQgJiYgIXBvaW50c1tzdGFydF0uc2tpcCkge1xuICAgICAgc3RhcnQrKztcbiAgICB9XG4gIH1cblxuICAvLyBmaW5kIGZpcnN0IG5vbiBza2lwcGVkIHBvaW50IChhZnRlciB0aGUgZmlyc3QgZ2FwIHBvc3NpYmx5KVxuICB3aGlsZSAoc3RhcnQgPCBjb3VudCAmJiBwb2ludHNbc3RhcnRdLnNraXApIHtcbiAgICBzdGFydCsrO1xuICB9XG5cbiAgLy8gaWYgd2UgbG9vcGVkIHRvIGNvdW50LCBzdGFydCBuZWVkcyB0byBiZSAwXG4gIHN0YXJ0ICU9IGNvdW50O1xuXG4gIGlmIChsb29wKSB7XG4gICAgLy8gbG9vcCB3aWxsIGdvIHBhc3QgY291bnQsIGlmIHN0YXJ0ID4gMFxuICAgIGVuZCArPSBzdGFydDtcbiAgfVxuXG4gIHdoaWxlIChlbmQgPiBzdGFydCAmJiBwb2ludHNbZW5kICUgY291bnRdLnNraXApIHtcbiAgICBlbmQtLTtcbiAgfVxuXG4gIC8vIGVuZCBjb3VsZCBiZSBtb3JlIHRoYW4gY291bnQsIG5vcm1hbGl6ZVxuICBlbmQgJT0gY291bnQ7XG5cbiAgcmV0dXJuIHtzdGFydCwgZW5kfTtcbn1cblxuLyoqXG4gKiBDb21wdXRlIHNvbGlkIHNlZ21lbnRzIGZyb20gUG9pbnRzLCB3aGVuIHNwYW5HYXBzID09PSBmYWxzZVxuICogQHBhcmFtIHtQb2ludEVsZW1lbnRbXX0gcG9pbnRzIC0gdGhlIHBvaW50c1xuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IC0gc3RhcnQgaW5kZXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggLSBtYXggaW5kZXggKGNhbiBnbyBwYXN0IGNvdW50IG9uIGEgbG9vcClcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9vcCAtIGJvb2xlYW4gaW5kaWNhdGluZyB0aGF0IHRoaXMgd291bGQgYmUgYSBsb29wIGlmIG5vIGdhcHMgYXJlIGZvdW5kXG4gKi9cbmZ1bmN0aW9uIHNvbGlkU2VnbWVudHMocG9pbnRzLCBzdGFydCwgbWF4LCBsb29wKSB7XG4gIGNvbnN0IGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBsYXN0ID0gc3RhcnQ7XG4gIGxldCBwcmV2ID0gcG9pbnRzW3N0YXJ0XTtcbiAgbGV0IGVuZDtcblxuICBmb3IgKGVuZCA9IHN0YXJ0ICsgMTsgZW5kIDw9IG1heDsgKytlbmQpIHtcbiAgICBjb25zdCBjdXIgPSBwb2ludHNbZW5kICUgY291bnRdO1xuICAgIGlmIChjdXIuc2tpcCB8fCBjdXIuc3RvcCkge1xuICAgICAgaWYgKCFwcmV2LnNraXApIHtcbiAgICAgICAgbG9vcCA9IGZhbHNlO1xuICAgICAgICByZXN1bHQucHVzaCh7c3RhcnQ6IHN0YXJ0ICUgY291bnQsIGVuZDogKGVuZCAtIDEpICUgY291bnQsIGxvb3B9KTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBzdGFydCA9IGxhc3QgPSBjdXIuc3RvcCA/IGVuZCA6IG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhc3QgPSBlbmQ7XG4gICAgICBpZiAocHJldi5za2lwKSB7XG4gICAgICAgIHN0YXJ0ID0gZW5kO1xuICAgICAgfVxuICAgIH1cbiAgICBwcmV2ID0gY3VyO1xuICB9XG5cbiAgaWYgKGxhc3QgIT09IG51bGwpIHtcbiAgICByZXN1bHQucHVzaCh7c3RhcnQ6IHN0YXJ0ICUgY291bnQsIGVuZDogbGFzdCAlIGNvdW50LCBsb29wfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENvbXB1dGUgdGhlIGNvbnRpbnVvdXMgc2VnbWVudHMgdGhhdCBkZWZpbmUgdGhlIHdob2xlIGxpbmVcbiAqIFRoZXJlIGNhbiBiZSBza2lwcGVkIHBvaW50cyB3aXRoaW4gYSBzZWdtZW50LCBpZiBzcGFuR2FwcyBpcyB0cnVlLlxuICogQHBhcmFtIHtMaW5lRWxlbWVudH0gbGluZVxuICogQHBhcmFtIHtvYmplY3R9IFtzZWdtZW50T3B0aW9uc11cbiAqIEByZXR1cm4ge1NlZ21lbnRbXX1cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfY29tcHV0ZVNlZ21lbnRzKGxpbmUsIHNlZ21lbnRPcHRpb25zKSB7XG4gIGNvbnN0IHBvaW50cyA9IGxpbmUucG9pbnRzO1xuICBjb25zdCBzcGFuR2FwcyA9IGxpbmUub3B0aW9ucy5zcGFuR2FwcztcbiAgY29uc3QgY291bnQgPSBwb2ludHMubGVuZ3RoO1xuXG4gIGlmICghY291bnQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBsb29wID0gISFsaW5lLl9sb29wO1xuICBjb25zdCB7c3RhcnQsIGVuZH0gPSBmaW5kU3RhcnRBbmRFbmQocG9pbnRzLCBjb3VudCwgbG9vcCwgc3BhbkdhcHMpO1xuXG4gIGlmIChzcGFuR2FwcyA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBzcGxpdEJ5U3R5bGVzKGxpbmUsIFt7c3RhcnQsIGVuZCwgbG9vcH1dLCBwb2ludHMsIHNlZ21lbnRPcHRpb25zKTtcbiAgfVxuXG4gIGNvbnN0IG1heCA9IGVuZCA8IHN0YXJ0ID8gZW5kICsgY291bnQgOiBlbmQ7XG4gIGNvbnN0IGNvbXBsZXRlTG9vcCA9ICEhbGluZS5fZnVsbExvb3AgJiYgc3RhcnQgPT09IDAgJiYgZW5kID09PSBjb3VudCAtIDE7XG4gIHJldHVybiBzcGxpdEJ5U3R5bGVzKGxpbmUsIHNvbGlkU2VnbWVudHMocG9pbnRzLCBzdGFydCwgbWF4LCBjb21wbGV0ZUxvb3ApLCBwb2ludHMsIHNlZ21lbnRPcHRpb25zKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1NlZ21lbnRbXX0gc2VnbWVudHNcbiAqIEBwYXJhbSB7UG9pbnRFbGVtZW50W119IHBvaW50c1xuICogQHBhcmFtIHtvYmplY3R9IFtzZWdtZW50T3B0aW9uc11cbiAqIEByZXR1cm4ge1NlZ21lbnRbXX1cbiAqL1xuZnVuY3Rpb24gc3BsaXRCeVN0eWxlcyhsaW5lLCBzZWdtZW50cywgcG9pbnRzLCBzZWdtZW50T3B0aW9ucykge1xuICBpZiAoIXNlZ21lbnRPcHRpb25zIHx8ICFzZWdtZW50T3B0aW9ucy5zZXRDb250ZXh0IHx8ICFwb2ludHMpIHtcbiAgICByZXR1cm4gc2VnbWVudHM7XG4gIH1cbiAgcmV0dXJuIGRvU3BsaXRCeVN0eWxlcyhsaW5lLCBzZWdtZW50cywgcG9pbnRzLCBzZWdtZW50T3B0aW9ucyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtMaW5lRWxlbWVudH0gbGluZVxuICogQHBhcmFtIHtTZWdtZW50W119IHNlZ21lbnRzXG4gKiBAcGFyYW0ge1BvaW50RWxlbWVudFtdfSBwb2ludHNcbiAqIEBwYXJhbSB7b2JqZWN0fSBbc2VnbWVudE9wdGlvbnNdXG4gKiBAcmV0dXJuIHtTZWdtZW50W119XG4gKi9cbmZ1bmN0aW9uIGRvU3BsaXRCeVN0eWxlcyhsaW5lLCBzZWdtZW50cywgcG9pbnRzLCBzZWdtZW50T3B0aW9ucykge1xuICBjb25zdCBjaGFydENvbnRleHQgPSBsaW5lLl9jaGFydC5nZXRDb250ZXh0KCk7XG4gIGNvbnN0IGJhc2VTdHlsZSA9IHJlYWRTdHlsZShsaW5lLm9wdGlvbnMpO1xuICBjb25zdCB7X2RhdGFzZXRJbmRleDogZGF0YXNldEluZGV4LCBvcHRpb25zOiB7c3BhbkdhcHN9fSA9IGxpbmU7XG4gIGNvbnN0IGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBwcmV2U3R5bGUgPSBiYXNlU3R5bGU7XG4gIGxldCBzdGFydCA9IHNlZ21lbnRzWzBdLnN0YXJ0O1xuICBsZXQgaSA9IHN0YXJ0O1xuXG4gIGZ1bmN0aW9uIGFkZFN0eWxlKHMsIGUsIGwsIHN0KSB7XG4gICAgY29uc3QgZGlyID0gc3BhbkdhcHMgPyAtMSA6IDE7XG4gICAgaWYgKHMgPT09IGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gU3R5bGUgY2FuIG5vdCBzdGFydC9lbmQgb24gYSBza2lwcGVkIHBvaW50LCBhZGp1c3QgaW5kaWNlcyBhY2NvcmRpbmdseVxuICAgIHMgKz0gY291bnQ7XG4gICAgd2hpbGUgKHBvaW50c1tzICUgY291bnRdLnNraXApIHtcbiAgICAgIHMgLT0gZGlyO1xuICAgIH1cbiAgICB3aGlsZSAocG9pbnRzW2UgJSBjb3VudF0uc2tpcCkge1xuICAgICAgZSArPSBkaXI7XG4gICAgfVxuICAgIGlmIChzICUgY291bnQgIT09IGUgJSBjb3VudCkge1xuICAgICAgcmVzdWx0LnB1c2goe3N0YXJ0OiBzICUgY291bnQsIGVuZDogZSAlIGNvdW50LCBsb29wOiBsLCBzdHlsZTogc3R9KTtcbiAgICAgIHByZXZTdHlsZSA9IHN0O1xuICAgICAgc3RhcnQgPSBlICUgY291bnQ7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG4gICAgc3RhcnQgPSBzcGFuR2FwcyA/IHN0YXJ0IDogc2VnbWVudC5zdGFydDtcbiAgICBsZXQgcHJldiA9IHBvaW50c1tzdGFydCAlIGNvdW50XTtcbiAgICBsZXQgc3R5bGU7XG4gICAgZm9yIChpID0gc3RhcnQgKyAxOyBpIDw9IHNlZ21lbnQuZW5kOyBpKyspIHtcbiAgICAgIGNvbnN0IHB0ID0gcG9pbnRzW2kgJSBjb3VudF07XG4gICAgICBzdHlsZSA9IHJlYWRTdHlsZShzZWdtZW50T3B0aW9ucy5zZXRDb250ZXh0KGNyZWF0ZUNvbnRleHQoY2hhcnRDb250ZXh0LCB7XG4gICAgICAgIHR5cGU6ICdzZWdtZW50JyxcbiAgICAgICAgcDA6IHByZXYsXG4gICAgICAgIHAxOiBwdCxcbiAgICAgICAgcDBEYXRhSW5kZXg6IChpIC0gMSkgJSBjb3VudCxcbiAgICAgICAgcDFEYXRhSW5kZXg6IGkgJSBjb3VudCxcbiAgICAgICAgZGF0YXNldEluZGV4XG4gICAgICB9KSkpO1xuICAgICAgaWYgKHN0eWxlQ2hhbmdlZChzdHlsZSwgcHJldlN0eWxlKSkge1xuICAgICAgICBhZGRTdHlsZShzdGFydCwgaSAtIDEsIHNlZ21lbnQubG9vcCwgcHJldlN0eWxlKTtcbiAgICAgIH1cbiAgICAgIHByZXYgPSBwdDtcbiAgICAgIHByZXZTdHlsZSA9IHN0eWxlO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgPCBpIC0gMSkge1xuICAgICAgYWRkU3R5bGUoc3RhcnQsIGkgLSAxLCBzZWdtZW50Lmxvb3AsIHByZXZTdHlsZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcmVhZFN0eWxlKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yLFxuICAgIGJvcmRlckNhcFN0eWxlOiBvcHRpb25zLmJvcmRlckNhcFN0eWxlLFxuICAgIGJvcmRlckRhc2g6IG9wdGlvbnMuYm9yZGVyRGFzaCxcbiAgICBib3JkZXJEYXNoT2Zmc2V0OiBvcHRpb25zLmJvcmRlckRhc2hPZmZzZXQsXG4gICAgYm9yZGVySm9pblN0eWxlOiBvcHRpb25zLmJvcmRlckpvaW5TdHlsZSxcbiAgICBib3JkZXJXaWR0aDogb3B0aW9ucy5ib3JkZXJXaWR0aCxcbiAgICBib3JkZXJDb2xvcjogb3B0aW9ucy5ib3JkZXJDb2xvclxuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUNoYW5nZWQoc3R5bGUsIHByZXZTdHlsZSkge1xuICBpZiAoIXByZXZTdHlsZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBjYWNoZSA9IFtdO1xuICBjb25zdCByZXBsYWNlciA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICBpZiAoIWlzUGF0dGVybk9yR3JhZGllbnQodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmICghY2FjaGUuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICBjYWNoZS5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlLmluZGV4T2YodmFsdWUpO1xuICB9O1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3R5bGUsIHJlcGxhY2VyKSAhPT0gSlNPTi5zdHJpbmdpZnkocHJldlN0eWxlLCByZXBsYWNlcik7XG59XG4iLCAiaW1wb3J0IHtyZXF1ZXN0QW5pbUZyYW1lfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuZXh0cmFzLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi9jb3JlLmFuaW1hdGlvbi5qcycpLmRlZmF1bHQgfSBBbmltYXRpb25cbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL2NvcmUuY29udHJvbGxlci5qcycpLmRlZmF1bHQgfSBDaGFydFxuICovXG5cbi8qKlxuICogUGxlYXNlIHVzZSB0aGUgbW9kdWxlJ3MgZGVmYXVsdCBleHBvcnQgd2hpY2ggcHJvdmlkZXMgYSBzaW5nbGV0b24gaW5zdGFuY2VcbiAqIE5vdGU6IGNsYXNzIGlzIGV4cG9ydCBmb3IgdHlwZWRvY1xuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9yZXF1ZXN0ID0gbnVsbDtcbiAgICB0aGlzLl9jaGFydHMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xuICAgIHRoaXMuX2xhc3REYXRlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfbm90aWZ5KGNoYXJ0LCBhbmltcywgZGF0ZSwgdHlwZSkge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IGFuaW1zLmxpc3RlbmVyc1t0eXBlXTtcbiAgICBjb25zdCBudW1TdGVwcyA9IGFuaW1zLmR1cmF0aW9uO1xuXG4gICAgY2FsbGJhY2tzLmZvckVhY2goZm4gPT4gZm4oe1xuICAgICAgY2hhcnQsXG4gICAgICBpbml0aWFsOiBhbmltcy5pbml0aWFsLFxuICAgICAgbnVtU3RlcHMsXG4gICAgICBjdXJyZW50U3RlcDogTWF0aC5taW4oZGF0ZSAtIGFuaW1zLnN0YXJ0LCBudW1TdGVwcylcbiAgICB9KSk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9yZWZyZXNoKCkge1xuICAgIGlmICh0aGlzLl9yZXF1ZXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3J1bm5pbmcgPSB0cnVlO1xuXG4gICAgdGhpcy5fcmVxdWVzdCA9IHJlcXVlc3RBbmltRnJhbWUuY2FsbCh3aW5kb3csICgpID0+IHtcbiAgICAgIHRoaXMuX3VwZGF0ZSgpO1xuICAgICAgdGhpcy5fcmVxdWVzdCA9IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLl9ydW5uaW5nKSB7XG4gICAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX3VwZGF0ZShkYXRlID0gRGF0ZS5ub3coKSkge1xuICAgIGxldCByZW1haW5pbmcgPSAwO1xuXG4gICAgdGhpcy5fY2hhcnRzLmZvckVhY2goKGFuaW1zLCBjaGFydCkgPT4ge1xuICAgICAgaWYgKCFhbmltcy5ydW5uaW5nIHx8ICFhbmltcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaXRlbXMgPSBhbmltcy5pdGVtcztcbiAgICAgIGxldCBpID0gaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgIGxldCBkcmF3ID0gZmFsc2U7XG4gICAgICBsZXQgaXRlbTtcblxuICAgICAgZm9yICg7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGl0ZW0gPSBpdGVtc1tpXTtcblxuICAgICAgICBpZiAoaXRlbS5fYWN0aXZlKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uX3RvdGFsID4gYW5pbXMuZHVyYXRpb24pIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBhbmltYXRpb24gaGFzIGJlZW4gdXBkYXRlZCBhbmQgaXRzIGR1cmF0aW9uIHByb2xvbmdlZCxcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0byB0b3RhbCBkdXJhdGlvbiBvZiBjdXJyZW50IGFuaW1hdGlvbnMgcnVuIChmb3IgcHJvZ3Jlc3MgZXZlbnQpXG4gICAgICAgICAgICBhbmltcy5kdXJhdGlvbiA9IGl0ZW0uX3RvdGFsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtLnRpY2soZGF0ZSk7XG4gICAgICAgICAgZHJhdyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIHRoZSBpdGVtIGJ5IHJlcGxhY2luZyBpdCB3aXRoIGxhc3QgaXRlbSBhbmQgcmVtb3ZpbmcgdGhlIGxhc3RcbiAgICAgICAgICAvLyBBIGxvdCBmYXN0ZXIgdGhhbiBzcGxpY2UuXG4gICAgICAgICAgaXRlbXNbaV0gPSBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICBpdGVtcy5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZHJhdykge1xuICAgICAgICBjaGFydC5kcmF3KCk7XG4gICAgICAgIHRoaXMuX25vdGlmeShjaGFydCwgYW5pbXMsIGRhdGUsICdwcm9ncmVzcycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICBhbmltcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX25vdGlmeShjaGFydCwgYW5pbXMsIGRhdGUsICdjb21wbGV0ZScpO1xuICAgICAgICBhbmltcy5pbml0aWFsID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJlbWFpbmluZyArPSBpdGVtcy5sZW5ndGg7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9sYXN0RGF0ZSA9IGRhdGU7XG5cbiAgICBpZiAocmVtYWluaW5nID09PSAwKSB7XG4gICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0QW5pbXMoY2hhcnQpIHtcbiAgICBjb25zdCBjaGFydHMgPSB0aGlzLl9jaGFydHM7XG4gICAgbGV0IGFuaW1zID0gY2hhcnRzLmdldChjaGFydCk7XG4gICAgaWYgKCFhbmltcykge1xuICAgICAgYW5pbXMgPSB7XG4gICAgICAgIHJ1bm5pbmc6IGZhbHNlLFxuICAgICAgICBpbml0aWFsOiB0cnVlLFxuICAgICAgICBpdGVtczogW10sXG4gICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgIGNvbXBsZXRlOiBbXSxcbiAgICAgICAgICBwcm9ncmVzczogW11cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNoYXJ0cy5zZXQoY2hhcnQsIGFuaW1zKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuaW1zO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0XG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIGV2ZW50IG5hbWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgLSBjYWxsYmFja1xuXHQgKi9cbiAgbGlzdGVuKGNoYXJ0LCBldmVudCwgY2IpIHtcbiAgICB0aGlzLl9nZXRBbmltcyhjaGFydCkubGlzdGVuZXJzW2V2ZW50XS5wdXNoKGNiKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBBZGQgYW5pbWF0aW9uc1xuXHQgKiBAcGFyYW0ge0NoYXJ0fSBjaGFydFxuXHQgKiBAcGFyYW0ge0FuaW1hdGlvbltdfSBpdGVtcyAtIGFuaW1hdGlvbnNcblx0ICovXG4gIGFkZChjaGFydCwgaXRlbXMpIHtcbiAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZ2V0QW5pbXMoY2hhcnQpLml0ZW1zLnB1c2goLi4uaXRlbXMpO1xuICB9XG5cbiAgLyoqXG5cdCAqIENvdW50cyBudW1iZXIgb2YgYWN0aXZlIGFuaW1hdGlvbnMgZm9yIHRoZSBjaGFydFxuXHQgKiBAcGFyYW0ge0NoYXJ0fSBjaGFydFxuXHQgKi9cbiAgaGFzKGNoYXJ0KSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEFuaW1zKGNoYXJ0KS5pdGVtcy5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG5cdCAqIFN0YXJ0IGFuaW1hdGluZyAoYWxsIGNoYXJ0cylcblx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnRcblx0ICovXG4gIHN0YXJ0KGNoYXJ0KSB7XG4gICAgY29uc3QgYW5pbXMgPSB0aGlzLl9jaGFydHMuZ2V0KGNoYXJ0KTtcbiAgICBpZiAoIWFuaW1zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFuaW1zLnJ1bm5pbmcgPSB0cnVlO1xuICAgIGFuaW1zLnN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBhbmltcy5kdXJhdGlvbiA9IGFuaW1zLml0ZW1zLnJlZHVjZSgoYWNjLCBjdXIpID0+IE1hdGgubWF4KGFjYywgY3VyLl9kdXJhdGlvbiksIDApO1xuICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgfVxuXG4gIHJ1bm5pbmcoY2hhcnQpIHtcbiAgICBpZiAoIXRoaXMuX3J1bm5pbmcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgYW5pbXMgPSB0aGlzLl9jaGFydHMuZ2V0KGNoYXJ0KTtcbiAgICBpZiAoIWFuaW1zIHx8ICFhbmltcy5ydW5uaW5nIHx8ICFhbmltcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcblx0ICogU3RvcCBhbGwgYW5pbWF0aW9ucyBmb3IgdGhlIGNoYXJ0XG5cdCAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0XG5cdCAqL1xuICBzdG9wKGNoYXJ0KSB7XG4gICAgY29uc3QgYW5pbXMgPSB0aGlzLl9jaGFydHMuZ2V0KGNoYXJ0KTtcbiAgICBpZiAoIWFuaW1zIHx8ICFhbmltcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSBhbmltcy5pdGVtcztcbiAgICBsZXQgaSA9IGl0ZW1zLmxlbmd0aCAtIDE7XG5cbiAgICBmb3IgKDsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGl0ZW1zW2ldLmNhbmNlbCgpO1xuICAgIH1cbiAgICBhbmltcy5pdGVtcyA9IFtdO1xuICAgIHRoaXMuX25vdGlmeShjaGFydCwgYW5pbXMsIERhdGUubm93KCksICdjb21wbGV0ZScpO1xuICB9XG5cbiAgLyoqXG5cdCAqIFJlbW92ZSBjaGFydCBmcm9tIEFuaW1hdG9yXG5cdCAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0XG5cdCAqL1xuICByZW1vdmUoY2hhcnQpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhcnRzLmRlbGV0ZShjaGFydCk7XG4gIH1cbn1cblxuLy8gc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgZGVmYXVsdCAvKiAjX19QVVJFX18gKi8gbmV3IEFuaW1hdG9yKCk7XG4iLCAiaW1wb3J0IGVmZmVjdHMgZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmVhc2luZy5qcyc7XG5pbXBvcnQge3Jlc29sdmV9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5vcHRpb25zLmpzJztcbmltcG9ydCB7Y29sb3IgYXMgaGVscGVyc0NvbG9yfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29sb3IuanMnO1xuXG5jb25zdCB0cmFuc3BhcmVudCA9ICd0cmFuc3BhcmVudCc7XG5jb25zdCBpbnRlcnBvbGF0b3JzID0ge1xuICBib29sZWFuKGZyb20sIHRvLCBmYWN0b3IpIHtcbiAgICByZXR1cm4gZmFjdG9yID4gMC41ID8gdG8gOiBmcm9tO1xuICB9LFxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZyb21cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmYWN0b3JcbiAgICovXG4gIGNvbG9yKGZyb20sIHRvLCBmYWN0b3IpIHtcbiAgICBjb25zdCBjMCA9IGhlbHBlcnNDb2xvcihmcm9tIHx8IHRyYW5zcGFyZW50KTtcbiAgICBjb25zdCBjMSA9IGMwLnZhbGlkICYmIGhlbHBlcnNDb2xvcih0byB8fCB0cmFuc3BhcmVudCk7XG4gICAgcmV0dXJuIGMxICYmIGMxLnZhbGlkXG4gICAgICA/IGMxLm1peChjMCwgZmFjdG9yKS5oZXhTdHJpbmcoKVxuICAgICAgOiB0bztcbiAgfSxcbiAgbnVtYmVyKGZyb20sIHRvLCBmYWN0b3IpIHtcbiAgICByZXR1cm4gZnJvbSArICh0byAtIGZyb20pICogZmFjdG9yO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRpb24ge1xuICBjb25zdHJ1Y3RvcihjZmcsIHRhcmdldCwgcHJvcCwgdG8pIHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0YXJnZXRbcHJvcF07XG5cbiAgICB0byA9IHJlc29sdmUoW2NmZy50bywgdG8sIGN1cnJlbnRWYWx1ZSwgY2ZnLmZyb21dKTtcbiAgICBjb25zdCBmcm9tID0gcmVzb2x2ZShbY2ZnLmZyb20sIGN1cnJlbnRWYWx1ZSwgdG9dKTtcblxuICAgIHRoaXMuX2FjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5fZm4gPSBjZmcuZm4gfHwgaW50ZXJwb2xhdG9yc1tjZmcudHlwZSB8fCB0eXBlb2YgZnJvbV07XG4gICAgdGhpcy5fZWFzaW5nID0gZWZmZWN0c1tjZmcuZWFzaW5nXSB8fCBlZmZlY3RzLmxpbmVhcjtcbiAgICB0aGlzLl9zdGFydCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSArIChjZmcuZGVsYXkgfHwgMCkpO1xuICAgIHRoaXMuX2R1cmF0aW9uID0gdGhpcy5fdG90YWwgPSBNYXRoLmZsb29yKGNmZy5kdXJhdGlvbik7XG4gICAgdGhpcy5fbG9vcCA9ICEhY2ZnLmxvb3A7XG4gICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMuX3Byb3AgPSBwcm9wO1xuICAgIHRoaXMuX2Zyb20gPSBmcm9tO1xuICAgIHRoaXMuX3RvID0gdG87XG4gICAgdGhpcy5fcHJvbWlzZXMgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBhY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZTtcbiAgfVxuXG4gIHVwZGF0ZShjZmcsIHRvLCBkYXRlKSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgdGhpcy5fbm90aWZ5KGZhbHNlKTtcblxuICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5fdGFyZ2V0W3RoaXMuX3Byb3BdO1xuICAgICAgY29uc3QgZWxhcHNlZCA9IGRhdGUgLSB0aGlzLl9zdGFydDtcbiAgICAgIGNvbnN0IHJlbWFpbiA9IHRoaXMuX2R1cmF0aW9uIC0gZWxhcHNlZDtcbiAgICAgIHRoaXMuX3N0YXJ0ID0gZGF0ZTtcbiAgICAgIHRoaXMuX2R1cmF0aW9uID0gTWF0aC5mbG9vcihNYXRoLm1heChyZW1haW4sIGNmZy5kdXJhdGlvbikpO1xuICAgICAgdGhpcy5fdG90YWwgKz0gZWxhcHNlZDtcbiAgICAgIHRoaXMuX2xvb3AgPSAhIWNmZy5sb29wO1xuICAgICAgdGhpcy5fdG8gPSByZXNvbHZlKFtjZmcudG8sIHRvLCBjdXJyZW50VmFsdWUsIGNmZy5mcm9tXSk7XG4gICAgICB0aGlzLl9mcm9tID0gcmVzb2x2ZShbY2ZnLmZyb20sIGN1cnJlbnRWYWx1ZSwgdG9dKTtcbiAgICB9XG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgLy8gdXBkYXRlIGN1cnJlbnQgZXZhbHVhdGVkIHZhbHVlLCBmb3Igc21vb3RoZXIgYW5pbWF0aW9uc1xuICAgICAgdGhpcy50aWNrKERhdGUubm93KCkpO1xuICAgICAgdGhpcy5fYWN0aXZlID0gZmFsc2U7XG4gICAgICB0aGlzLl9ub3RpZnkoZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHRpY2soZGF0ZSkge1xuICAgIGNvbnN0IGVsYXBzZWQgPSBkYXRlIC0gdGhpcy5fc3RhcnQ7XG4gICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLl9kdXJhdGlvbjtcbiAgICBjb25zdCBwcm9wID0gdGhpcy5fcHJvcDtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5fZnJvbTtcbiAgICBjb25zdCBsb29wID0gdGhpcy5fbG9vcDtcbiAgICBjb25zdCB0byA9IHRoaXMuX3RvO1xuICAgIGxldCBmYWN0b3I7XG5cbiAgICB0aGlzLl9hY3RpdmUgPSBmcm9tICE9PSB0byAmJiAobG9vcCB8fCAoZWxhcHNlZCA8IGR1cmF0aW9uKSk7XG5cbiAgICBpZiAoIXRoaXMuX2FjdGl2ZSkge1xuICAgICAgdGhpcy5fdGFyZ2V0W3Byb3BdID0gdG87XG4gICAgICB0aGlzLl9ub3RpZnkodHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVsYXBzZWQgPCAwKSB7XG4gICAgICB0aGlzLl90YXJnZXRbcHJvcF0gPSBmcm9tO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZhY3RvciA9IChlbGFwc2VkIC8gZHVyYXRpb24pICUgMjtcbiAgICBmYWN0b3IgPSBsb29wICYmIGZhY3RvciA+IDEgPyAyIC0gZmFjdG9yIDogZmFjdG9yO1xuICAgIGZhY3RvciA9IHRoaXMuX2Vhc2luZyhNYXRoLm1pbigxLCBNYXRoLm1heCgwLCBmYWN0b3IpKSk7XG5cbiAgICB0aGlzLl90YXJnZXRbcHJvcF0gPSB0aGlzLl9mbihmcm9tLCB0bywgZmFjdG9yKTtcbiAgfVxuXG4gIHdhaXQoKSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLl9wcm9taXNlcyB8fCAodGhpcy5fcHJvbWlzZXMgPSBbXSk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgcHJvbWlzZXMucHVzaCh7cmVzLCByZWp9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9ub3RpZnkocmVzb2x2ZWQpIHtcbiAgICBjb25zdCBtZXRob2QgPSByZXNvbHZlZCA/ICdyZXMnIDogJ3Jlaic7XG4gICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLl9wcm9taXNlcyB8fCBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9taXNlc1tpXVttZXRob2RdKCk7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IGFuaW1hdG9yIGZyb20gJy4vY29yZS5hbmltYXRvci5qcyc7XG5pbXBvcnQgQW5pbWF0aW9uIGZyb20gJy4vY29yZS5hbmltYXRpb24uanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4vY29yZS5kZWZhdWx0cy5qcyc7XG5pbXBvcnQge2lzQXJyYXksIGlzT2JqZWN0fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFuaW1hdGlvbnMge1xuICBjb25zdHJ1Y3RvcihjaGFydCwgY29uZmlnKSB7XG4gICAgdGhpcy5fY2hhcnQgPSBjaGFydDtcbiAgICB0aGlzLl9wcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuY29uZmlndXJlKGNvbmZpZyk7XG4gIH1cblxuICBjb25maWd1cmUoY29uZmlnKSB7XG4gICAgaWYgKCFpc09iamVjdChjb25maWcpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYW5pbWF0aW9uT3B0aW9ucyA9IE9iamVjdC5rZXlzKGRlZmF1bHRzLmFuaW1hdGlvbik7XG4gICAgY29uc3QgYW5pbWF0ZWRQcm9wcyA9IHRoaXMuX3Byb3BlcnRpZXM7XG5cbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjb25maWcpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGNvbnN0IGNmZyA9IGNvbmZpZ1trZXldO1xuICAgICAgaWYgKCFpc09iamVjdChjZmcpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc29sdmVkID0ge307XG4gICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBhbmltYXRpb25PcHRpb25zKSB7XG4gICAgICAgIHJlc29sdmVkW29wdGlvbl0gPSBjZmdbb3B0aW9uXTtcbiAgICAgIH1cblxuICAgICAgKGlzQXJyYXkoY2ZnLnByb3BlcnRpZXMpICYmIGNmZy5wcm9wZXJ0aWVzIHx8IFtrZXldKS5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgICAgIGlmIChwcm9wID09PSBrZXkgfHwgIWFuaW1hdGVkUHJvcHMuaGFzKHByb3ApKSB7XG4gICAgICAgICAgYW5pbWF0ZWRQcm9wcy5zZXQocHJvcCwgcmVzb2x2ZWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBVdGlsaXR5IHRvIGhhbmRsZSBhbmltYXRpb24gb2YgYG9wdGlvbnNgLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2FuaW1hdGVPcHRpb25zKHRhcmdldCwgdmFsdWVzKSB7XG4gICAgY29uc3QgbmV3T3B0aW9ucyA9IHZhbHVlcy5vcHRpb25zO1xuICAgIGNvbnN0IG9wdGlvbnMgPSByZXNvbHZlVGFyZ2V0T3B0aW9ucyh0YXJnZXQsIG5ld09wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGFuaW1hdGlvbnMgPSB0aGlzLl9jcmVhdGVBbmltYXRpb25zKG9wdGlvbnMsIG5ld09wdGlvbnMpO1xuICAgIGlmIChuZXdPcHRpb25zLiRzaGFyZWQpIHtcbiAgICAgIC8vIEdvaW5nIHRvIHNoYXJlZCBvcHRpb25zOlxuICAgICAgLy8gQWZ0ZXIgYWxsIGFuaW1hdGlvbnMgYXJlIGRvbmUsIGFzc2lnbiB0aGUgc2hhcmVkIG9wdGlvbnMgb2JqZWN0IHRvIHRoZSBlbGVtZW50XG4gICAgICAvLyBTbyBhbnkgbmV3IHVwZGF0ZXMgdG8gdGhlIHNoYXJlZCBvcHRpb25zIGFyZSBvYnNlcnZlZFxuICAgICAgYXdhaXRBbGwodGFyZ2V0Lm9wdGlvbnMuJGFuaW1hdGlvbnMsIG5ld09wdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0YXJnZXQub3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gICAgICB9LCAoKSA9PiB7XG4gICAgICAgIC8vIHJlamVjdGVkLCBub29wXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5pbWF0aW9ucztcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2NyZWF0ZUFuaW1hdGlvbnModGFyZ2V0LCB2YWx1ZXMpIHtcbiAgICBjb25zdCBhbmltYXRlZFByb3BzID0gdGhpcy5fcHJvcGVydGllcztcbiAgICBjb25zdCBhbmltYXRpb25zID0gW107XG4gICAgY29uc3QgcnVubmluZyA9IHRhcmdldC4kYW5pbWF0aW9ucyB8fCAodGFyZ2V0LiRhbmltYXRpb25zID0ge30pO1xuICAgIGNvbnN0IHByb3BzID0gT2JqZWN0LmtleXModmFsdWVzKTtcbiAgICBjb25zdCBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgaTtcblxuICAgIGZvciAoaSA9IHByb3BzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBjb25zdCBwcm9wID0gcHJvcHNbaV07XG4gICAgICBpZiAocHJvcC5jaGFyQXQoMCkgPT09ICckJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3AgPT09ICdvcHRpb25zJykge1xuICAgICAgICBhbmltYXRpb25zLnB1c2goLi4udGhpcy5fYW5pbWF0ZU9wdGlvbnModGFyZ2V0LCB2YWx1ZXMpKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1twcm9wXTtcbiAgICAgIGxldCBhbmltYXRpb24gPSBydW5uaW5nW3Byb3BdO1xuICAgICAgY29uc3QgY2ZnID0gYW5pbWF0ZWRQcm9wcy5nZXQocHJvcCk7XG5cbiAgICAgIGlmIChhbmltYXRpb24pIHtcbiAgICAgICAgaWYgKGNmZyAmJiBhbmltYXRpb24uYWN0aXZlKCkpIHtcbiAgICAgICAgICAvLyBUaGVyZSBpcyBhbiBleGlzdGluZyBhY3RpdmUgYW5pbWF0aW9uLCBsZXQncyB1cGRhdGUgdGhhdFxuICAgICAgICAgIGFuaW1hdGlvbi51cGRhdGUoY2ZnLCB2YWx1ZSwgZGF0ZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYW5pbWF0aW9uLmNhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWNmZyB8fCAhY2ZnLmR1cmF0aW9uKSB7XG4gICAgICAgIC8vIG5vdCBhbmltYXRlZCwgc2V0IGRpcmVjdGx5IHRvIG5ldyB2YWx1ZVxuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHJ1bm5pbmdbcHJvcF0gPSBhbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKGNmZywgdGFyZ2V0LCBwcm9wLCB2YWx1ZSk7XG4gICAgICBhbmltYXRpb25zLnB1c2goYW5pbWF0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuaW1hdGlvbnM7XG4gIH1cblxuXG4gIC8qKlxuXHQgKiBVcGRhdGUgYHRhcmdldGAgcHJvcGVydGllcyB0byBuZXcgdmFsdWVzLCB1c2luZyBjb25maWd1cmVkIGFuaW1hdGlvbnNcblx0ICogQHBhcmFtIHtvYmplY3R9IHRhcmdldCAtIG9iamVjdCB0byB1cGRhdGVcblx0ICogQHBhcmFtIHtvYmplY3R9IHZhbHVlcyAtIG5ldyB0YXJnZXQgcHJvcGVydGllc1xuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbnx1bmRlZmluZWR9IC0gYHRydWVgIGlmIGFuaW1hdGlvbnMgd2VyZSBzdGFydGVkXG5cdCAqKi9cbiAgdXBkYXRlKHRhcmdldCwgdmFsdWVzKSB7XG4gICAgaWYgKHRoaXMuX3Byb3BlcnRpZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgLy8gTm90aGluZyBpcyBhbmltYXRlZCwganVzdCBhcHBseSB0aGUgbmV3IHZhbHVlcy5cbiAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB2YWx1ZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFuaW1hdGlvbnMgPSB0aGlzLl9jcmVhdGVBbmltYXRpb25zKHRhcmdldCwgdmFsdWVzKTtcblxuICAgIGlmIChhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgYW5pbWF0b3IuYWRkKHRoaXMuX2NoYXJ0LCBhbmltYXRpb25zKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhd2FpdEFsbChhbmltYXRpb25zLCBwcm9wZXJ0aWVzKSB7XG4gIGNvbnN0IHJ1bm5pbmcgPSBbXTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhbmltID0gYW5pbWF0aW9uc1trZXlzW2ldXTtcbiAgICBpZiAoYW5pbSAmJiBhbmltLmFjdGl2ZSgpKSB7XG4gICAgICBydW5uaW5nLnB1c2goYW5pbS53YWl0KCkpO1xuICAgIH1cbiAgfVxuICAvLyBAdHMtaWdub3JlXG4gIHJldHVybiBQcm9taXNlLmFsbChydW5uaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVRhcmdldE9wdGlvbnModGFyZ2V0LCBuZXdPcHRpb25zKSB7XG4gIGlmICghbmV3T3B0aW9ucykge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgb3B0aW9ucyA9IHRhcmdldC5vcHRpb25zO1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICB0YXJnZXQub3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvcHRpb25zLiRzaGFyZWQpIHtcbiAgICAvLyBHb2luZyBmcm9tIHNoYXJlZCBvcHRpb25zIHRvIGRpc3RpbmN0IG9uZTpcbiAgICAvLyBDcmVhdGUgbmV3IG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9sZCBzaGFyZWQgdmFsdWVzIGFuZCBzdGFydCB1cGRhdGluZyB0aGF0LlxuICAgIHRhcmdldC5vcHRpb25zID0gb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHskc2hhcmVkOiBmYWxzZSwgJGFuaW1hdGlvbnM6IHt9fSk7XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG4iLCAiaW1wb3J0IEFuaW1hdGlvbnMgZnJvbSAnLi9jb3JlLmFuaW1hdGlvbnMuanMnO1xuaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4vY29yZS5kZWZhdWx0cy5qcyc7XG5pbXBvcnQge2lzQXJyYXksIGlzRmluaXRlLCBpc09iamVjdCwgdmFsdWVPckRlZmF1bHQsIHJlc29sdmVPYmplY3RLZXksIGRlZmluZWR9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCB7bGlzdGVuQXJyYXlFdmVudHMsIHVubGlzdGVuQXJyYXlFdmVudHN9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb2xsZWN0aW9uLmpzJztcbmltcG9ydCB7Y3JlYXRlQ29udGV4dCwgc2lnbn0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vY29yZS5jb250cm9sbGVyLmpzJykuZGVmYXVsdCB9IENoYXJ0XG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi9jb3JlLnNjYWxlLmpzJykuZGVmYXVsdCB9IFNjYWxlXG4gKi9cblxuZnVuY3Rpb24gc2NhbGVDbGlwKHNjYWxlLCBhbGxvd2VkT3ZlcmZsb3cpIHtcbiAgY29uc3Qgb3B0cyA9IHNjYWxlICYmIHNjYWxlLm9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJldmVyc2UgPSBvcHRzLnJldmVyc2U7XG4gIGNvbnN0IG1pbiA9IG9wdHMubWluID09PSB1bmRlZmluZWQgPyBhbGxvd2VkT3ZlcmZsb3cgOiAwO1xuICBjb25zdCBtYXggPSBvcHRzLm1heCA9PT0gdW5kZWZpbmVkID8gYWxsb3dlZE92ZXJmbG93IDogMDtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogcmV2ZXJzZSA/IG1heCA6IG1pbixcbiAgICBlbmQ6IHJldmVyc2UgPyBtaW4gOiBtYXhcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdENsaXAoeFNjYWxlLCB5U2NhbGUsIGFsbG93ZWRPdmVyZmxvdykge1xuICBpZiAoYWxsb3dlZE92ZXJmbG93ID09PSBmYWxzZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB4ID0gc2NhbGVDbGlwKHhTY2FsZSwgYWxsb3dlZE92ZXJmbG93KTtcbiAgY29uc3QgeSA9IHNjYWxlQ2xpcCh5U2NhbGUsIGFsbG93ZWRPdmVyZmxvdyk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3A6IHkuZW5kLFxuICAgIHJpZ2h0OiB4LmVuZCxcbiAgICBib3R0b206IHkuc3RhcnQsXG4gICAgbGVmdDogeC5zdGFydFxuICB9O1xufVxuXG5mdW5jdGlvbiB0b0NsaXAodmFsdWUpIHtcbiAgbGV0IHQsIHIsIGIsIGw7XG5cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHQgPSB2YWx1ZS50b3A7XG4gICAgciA9IHZhbHVlLnJpZ2h0O1xuICAgIGIgPSB2YWx1ZS5ib3R0b207XG4gICAgbCA9IHZhbHVlLmxlZnQ7XG4gIH0gZWxzZSB7XG4gICAgdCA9IHIgPSBiID0gbCA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0b3A6IHQsXG4gICAgcmlnaHQ6IHIsXG4gICAgYm90dG9tOiBiLFxuICAgIGxlZnQ6IGwsXG4gICAgZGlzYWJsZWQ6IHZhbHVlID09PSBmYWxzZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTb3J0ZWREYXRhc2V0SW5kaWNlcyhjaGFydCwgZmlsdGVyVmlzaWJsZSkge1xuICBjb25zdCBrZXlzID0gW107XG4gIGNvbnN0IG1ldGFzZXRzID0gY2hhcnQuX2dldFNvcnRlZERhdGFzZXRNZXRhcyhmaWx0ZXJWaXNpYmxlKTtcbiAgbGV0IGksIGlsZW47XG5cbiAgZm9yIChpID0gMCwgaWxlbiA9IG1ldGFzZXRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgIGtleXMucHVzaChtZXRhc2V0c1tpXS5pbmRleCk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59XG5cbmZ1bmN0aW9uIGFwcGx5U3RhY2soc3RhY2ssIHZhbHVlLCBkc0luZGV4LCBvcHRpb25zID0ge30pIHtcbiAgY29uc3Qga2V5cyA9IHN0YWNrLmtleXM7XG4gIGNvbnN0IHNpbmdsZU1vZGUgPSBvcHRpb25zLm1vZGUgPT09ICdzaW5nbGUnO1xuICBsZXQgaSwgaWxlbiwgZGF0YXNldEluZGV4LCBvdGhlclZhbHVlO1xuXG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZvciAoaSA9IDAsIGlsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgIGRhdGFzZXRJbmRleCA9ICtrZXlzW2ldO1xuICAgIGlmIChkYXRhc2V0SW5kZXggPT09IGRzSW5kZXgpIHtcbiAgICAgIGlmIChvcHRpb25zLmFsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBvdGhlclZhbHVlID0gc3RhY2sudmFsdWVzW2RhdGFzZXRJbmRleF07XG4gICAgaWYgKGlzRmluaXRlKG90aGVyVmFsdWUpICYmIChzaW5nbGVNb2RlIHx8ICh2YWx1ZSA9PT0gMCB8fCBzaWduKHZhbHVlKSA9PT0gc2lnbihvdGhlclZhbHVlKSkpKSB7XG4gICAgICB2YWx1ZSArPSBvdGhlclZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRPYmplY3REYXRhVG9BcnJheShkYXRhKSB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgY29uc3QgYWRhdGEgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICBsZXQgaSwgaWxlbiwga2V5O1xuICBmb3IgKGkgPSAwLCBpbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICBrZXkgPSBrZXlzW2ldO1xuICAgIGFkYXRhW2ldID0ge1xuICAgICAgeDoga2V5LFxuICAgICAgeTogZGF0YVtrZXldXG4gICAgfTtcbiAgfVxuICByZXR1cm4gYWRhdGE7XG59XG5cbmZ1bmN0aW9uIGlzU3RhY2tlZChzY2FsZSwgbWV0YSkge1xuICBjb25zdCBzdGFja2VkID0gc2NhbGUgJiYgc2NhbGUub3B0aW9ucy5zdGFja2VkO1xuICByZXR1cm4gc3RhY2tlZCB8fCAoc3RhY2tlZCA9PT0gdW5kZWZpbmVkICYmIG1ldGEuc3RhY2sgIT09IHVuZGVmaW5lZCk7XG59XG5cbmZ1bmN0aW9uIGdldFN0YWNrS2V5KGluZGV4U2NhbGUsIHZhbHVlU2NhbGUsIG1ldGEpIHtcbiAgcmV0dXJuIGAke2luZGV4U2NhbGUuaWR9LiR7dmFsdWVTY2FsZS5pZH0uJHttZXRhLnN0YWNrIHx8IG1ldGEudHlwZX1gO1xufVxuXG5mdW5jdGlvbiBnZXRVc2VyQm91bmRzKHNjYWxlKSB7XG4gIGNvbnN0IHttaW4sIG1heCwgbWluRGVmaW5lZCwgbWF4RGVmaW5lZH0gPSBzY2FsZS5nZXRVc2VyQm91bmRzKCk7XG4gIHJldHVybiB7XG4gICAgbWluOiBtaW5EZWZpbmVkID8gbWluIDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLFxuICAgIG1heDogbWF4RGVmaW5lZCA/IG1heCA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRPckNyZWF0ZVN0YWNrKHN0YWNrcywgc3RhY2tLZXksIGluZGV4VmFsdWUpIHtcbiAgY29uc3Qgc3ViU3RhY2sgPSBzdGFja3Nbc3RhY2tLZXldIHx8IChzdGFja3Nbc3RhY2tLZXldID0ge30pO1xuICByZXR1cm4gc3ViU3RhY2tbaW5kZXhWYWx1ZV0gfHwgKHN1YlN0YWNrW2luZGV4VmFsdWVdID0ge30pO1xufVxuXG5mdW5jdGlvbiBnZXRMYXN0SW5kZXhJblN0YWNrKHN0YWNrLCB2U2NhbGUsIHBvc2l0aXZlLCB0eXBlKSB7XG4gIGZvciAoY29uc3QgbWV0YSBvZiB2U2NhbGUuZ2V0TWF0Y2hpbmdWaXNpYmxlTWV0YXModHlwZSkucmV2ZXJzZSgpKSB7XG4gICAgY29uc3QgdmFsdWUgPSBzdGFja1ttZXRhLmluZGV4XTtcbiAgICBpZiAoKHBvc2l0aXZlICYmIHZhbHVlID4gMCkgfHwgKCFwb3NpdGl2ZSAmJiB2YWx1ZSA8IDApKSB7XG4gICAgICByZXR1cm4gbWV0YS5pbmRleDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU3RhY2tzKGNvbnRyb2xsZXIsIHBhcnNlZCkge1xuICBjb25zdCB7Y2hhcnQsIF9jYWNoZWRNZXRhOiBtZXRhfSA9IGNvbnRyb2xsZXI7XG4gIGNvbnN0IHN0YWNrcyA9IGNoYXJ0Ll9zdGFja3MgfHwgKGNoYXJ0Ll9zdGFja3MgPSB7fSk7IC8vIG1hcCBzdHJ1Y3R1cmUgaXMge3N0YWNrS2V5OiB7ZGF0YXNldEluZGV4OiB2YWx1ZX19XG4gIGNvbnN0IHtpU2NhbGUsIHZTY2FsZSwgaW5kZXg6IGRhdGFzZXRJbmRleH0gPSBtZXRhO1xuICBjb25zdCBpQXhpcyA9IGlTY2FsZS5heGlzO1xuICBjb25zdCB2QXhpcyA9IHZTY2FsZS5heGlzO1xuICBjb25zdCBrZXkgPSBnZXRTdGFja0tleShpU2NhbGUsIHZTY2FsZSwgbWV0YSk7XG4gIGNvbnN0IGlsZW4gPSBwYXJzZWQubGVuZ3RoO1xuICBsZXQgc3RhY2s7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbGVuOyArK2kpIHtcbiAgICBjb25zdCBpdGVtID0gcGFyc2VkW2ldO1xuICAgIGNvbnN0IHtbaUF4aXNdOiBpbmRleCwgW3ZBeGlzXTogdmFsdWV9ID0gaXRlbTtcbiAgICBjb25zdCBpdGVtU3RhY2tzID0gaXRlbS5fc3RhY2tzIHx8IChpdGVtLl9zdGFja3MgPSB7fSk7XG4gICAgc3RhY2sgPSBpdGVtU3RhY2tzW3ZBeGlzXSA9IGdldE9yQ3JlYXRlU3RhY2soc3RhY2tzLCBrZXksIGluZGV4KTtcbiAgICBzdGFja1tkYXRhc2V0SW5kZXhdID0gdmFsdWU7XG5cbiAgICBzdGFjay5fdG9wID0gZ2V0TGFzdEluZGV4SW5TdGFjayhzdGFjaywgdlNjYWxlLCB0cnVlLCBtZXRhLnR5cGUpO1xuICAgIHN0YWNrLl9ib3R0b20gPSBnZXRMYXN0SW5kZXhJblN0YWNrKHN0YWNrLCB2U2NhbGUsIGZhbHNlLCBtZXRhLnR5cGUpO1xuXG4gICAgY29uc3QgdmlzdWFsVmFsdWVzID0gc3RhY2suX3Zpc3VhbFZhbHVlcyB8fCAoc3RhY2suX3Zpc3VhbFZhbHVlcyA9IHt9KTtcbiAgICB2aXN1YWxWYWx1ZXNbZGF0YXNldEluZGV4XSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEZpcnN0U2NhbGVJZChjaGFydCwgYXhpcykge1xuICBjb25zdCBzY2FsZXMgPSBjaGFydC5zY2FsZXM7XG4gIHJldHVybiBPYmplY3Qua2V5cyhzY2FsZXMpLmZpbHRlcihrZXkgPT4gc2NhbGVzW2tleV0uYXhpcyA9PT0gYXhpcykuc2hpZnQoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0YXNldENvbnRleHQocGFyZW50LCBpbmRleCkge1xuICByZXR1cm4gY3JlYXRlQ29udGV4dChwYXJlbnQsXG4gICAge1xuICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgIGRhdGFzZXQ6IHVuZGVmaW5lZCxcbiAgICAgIGRhdGFzZXRJbmRleDogaW5kZXgsXG4gICAgICBpbmRleCxcbiAgICAgIG1vZGU6ICdkZWZhdWx0JyxcbiAgICAgIHR5cGU6ICdkYXRhc2V0J1xuICAgIH1cbiAgKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0YUNvbnRleHQocGFyZW50LCBpbmRleCwgZWxlbWVudCkge1xuICByZXR1cm4gY3JlYXRlQ29udGV4dChwYXJlbnQsIHtcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIGRhdGFJbmRleDogaW5kZXgsXG4gICAgcGFyc2VkOiB1bmRlZmluZWQsXG4gICAgcmF3OiB1bmRlZmluZWQsXG4gICAgZWxlbWVudCxcbiAgICBpbmRleCxcbiAgICBtb2RlOiAnZGVmYXVsdCcsXG4gICAgdHlwZTogJ2RhdGEnXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjbGVhclN0YWNrcyhtZXRhLCBpdGVtcykge1xuICAvLyBOb3QgdXNpbmcgbWV0YS5pbmRleCBoZXJlLCBiZWNhdXNlIGl0IG1pZ2h0IGJlIGFscmVhZHkgdXBkYXRlZCBpZiB0aGUgZGF0YXNldCBjaGFuZ2VkIGxvY2F0aW9uXG4gIGNvbnN0IGRhdGFzZXRJbmRleCA9IG1ldGEuY29udHJvbGxlci5pbmRleDtcbiAgY29uc3QgYXhpcyA9IG1ldGEudlNjYWxlICYmIG1ldGEudlNjYWxlLmF4aXM7XG4gIGlmICghYXhpcykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGl0ZW1zID0gaXRlbXMgfHwgbWV0YS5fcGFyc2VkO1xuICBmb3IgKGNvbnN0IHBhcnNlZCBvZiBpdGVtcykge1xuICAgIGNvbnN0IHN0YWNrcyA9IHBhcnNlZC5fc3RhY2tzO1xuICAgIGlmICghc3RhY2tzIHx8IHN0YWNrc1theGlzXSA9PT0gdW5kZWZpbmVkIHx8IHN0YWNrc1theGlzXVtkYXRhc2V0SW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGVsZXRlIHN0YWNrc1theGlzXVtkYXRhc2V0SW5kZXhdO1xuICAgIGlmIChzdGFja3NbYXhpc10uX3Zpc3VhbFZhbHVlcyAhPT0gdW5kZWZpbmVkICYmIHN0YWNrc1theGlzXS5fdmlzdWFsVmFsdWVzW2RhdGFzZXRJbmRleF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVsZXRlIHN0YWNrc1theGlzXS5fdmlzdWFsVmFsdWVzW2RhdGFzZXRJbmRleF07XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGlzRGlyZWN0VXBkYXRlTW9kZSA9IChtb2RlKSA9PiBtb2RlID09PSAncmVzZXQnIHx8IG1vZGUgPT09ICdub25lJztcbmNvbnN0IGNsb25lSWZOb3RTaGFyZWQgPSAoY2FjaGVkLCBzaGFyZWQpID0+IHNoYXJlZCA/IGNhY2hlZCA6IE9iamVjdC5hc3NpZ24oe30sIGNhY2hlZCk7XG5jb25zdCBjcmVhdGVTdGFjayA9IChjYW5TdGFjaywgbWV0YSwgY2hhcnQpID0+IGNhblN0YWNrICYmICFtZXRhLmhpZGRlbiAmJiBtZXRhLl9zdGFja2VkXG4gICYmIHtrZXlzOiBnZXRTb3J0ZWREYXRhc2V0SW5kaWNlcyhjaGFydCwgdHJ1ZSksIHZhbHVlczogbnVsbH07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGFzZXRDb250cm9sbGVyIHtcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHt9O1xuXG4gIC8qKlxuICAgKiBFbGVtZW50IHR5cGUgdXNlZCB0byBnZW5lcmF0ZSBhIG1ldGEgZGF0YXNldCAoZS5nLiBDaGFydC5lbGVtZW50LkxpbmVFbGVtZW50KS5cbiAgICovXG4gIHN0YXRpYyBkYXRhc2V0RWxlbWVudFR5cGUgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBFbGVtZW50IHR5cGUgdXNlZCB0byBnZW5lcmF0ZSBhIG1ldGEgZGF0YSAoZS5nLiBDaGFydC5lbGVtZW50LlBvaW50RWxlbWVudCkuXG4gICAqL1xuICBzdGF0aWMgZGF0YUVsZW1lbnRUeXBlID0gbnVsbDtcblxuICAvKipcblx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnRcblx0ICogQHBhcmFtIHtudW1iZXJ9IGRhdGFzZXRJbmRleFxuXHQgKi9cbiAgY29uc3RydWN0b3IoY2hhcnQsIGRhdGFzZXRJbmRleCkge1xuICAgIHRoaXMuY2hhcnQgPSBjaGFydDtcbiAgICB0aGlzLl9jdHggPSBjaGFydC5jdHg7XG4gICAgdGhpcy5pbmRleCA9IGRhdGFzZXRJbmRleDtcbiAgICB0aGlzLl9jYWNoZWREYXRhT3B0cyA9IHt9O1xuICAgIHRoaXMuX2NhY2hlZE1ldGEgPSB0aGlzLmdldE1ldGEoKTtcbiAgICB0aGlzLl90eXBlID0gdGhpcy5fY2FjaGVkTWV0YS50eXBlO1xuICAgIHRoaXMub3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge2Jvb2xlYW4gfCBvYmplY3R9ICovXG4gICAgdGhpcy5fcGFyc2luZyA9IGZhbHNlO1xuICAgIHRoaXMuX2RhdGEgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fb2JqZWN0RGF0YSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9zaGFyZWRPcHRpb25zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2RyYXdTdGFydCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9kcmF3Q291bnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5lbmFibGVPcHRpb25TaGFyaW5nID0gZmFsc2U7XG4gICAgdGhpcy5zdXBwb3J0c0RlY2ltYXRpb24gPSBmYWxzZTtcbiAgICB0aGlzLiRjb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N5bmNMaXN0ID0gW107XG4gICAgdGhpcy5kYXRhc2V0RWxlbWVudFR5cGUgPSBuZXcudGFyZ2V0LmRhdGFzZXRFbGVtZW50VHlwZTtcbiAgICB0aGlzLmRhdGFFbGVtZW50VHlwZSA9IG5ldy50YXJnZXQuZGF0YUVsZW1lbnRUeXBlO1xuXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIHRoaXMuY29uZmlndXJlKCk7XG4gICAgdGhpcy5saW5rU2NhbGVzKCk7XG4gICAgbWV0YS5fc3RhY2tlZCA9IGlzU3RhY2tlZChtZXRhLnZTY2FsZSwgbWV0YSk7XG4gICAgdGhpcy5hZGRFbGVtZW50cygpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5maWxsICYmICF0aGlzLmNoYXJ0LmlzUGx1Z2luRW5hYmxlZCgnZmlsbGVyJykpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlRyaWVkIHRvIHVzZSB0aGUgJ2ZpbGwnIG9wdGlvbiB3aXRob3V0IHRoZSAnRmlsbGVyJyBwbHVnaW4gZW5hYmxlZC4gUGxlYXNlIGltcG9ydCBhbmQgcmVnaXN0ZXIgdGhlICdGaWxsZXInIHBsdWdpbiBhbmQgbWFrZSBzdXJlIGl0IGlzIG5vdCBkaXNhYmxlZCBpbiB0aGUgb3B0aW9uc1wiKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVJbmRleChkYXRhc2V0SW5kZXgpIHtcbiAgICBpZiAodGhpcy5pbmRleCAhPT0gZGF0YXNldEluZGV4KSB7XG4gICAgICBjbGVhclN0YWNrcyh0aGlzLl9jYWNoZWRNZXRhKTtcbiAgICB9XG4gICAgdGhpcy5pbmRleCA9IGRhdGFzZXRJbmRleDtcbiAgfVxuXG4gIGxpbmtTY2FsZXMoKSB7XG4gICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IGRhdGFzZXQgPSB0aGlzLmdldERhdGFzZXQoKTtcblxuICAgIGNvbnN0IGNob29zZUlkID0gKGF4aXMsIHgsIHksIHIpID0+IGF4aXMgPT09ICd4JyA/IHggOiBheGlzID09PSAncicgPyByIDogeTtcblxuICAgIGNvbnN0IHhpZCA9IG1ldGEueEF4aXNJRCA9IHZhbHVlT3JEZWZhdWx0KGRhdGFzZXQueEF4aXNJRCwgZ2V0Rmlyc3RTY2FsZUlkKGNoYXJ0LCAneCcpKTtcbiAgICBjb25zdCB5aWQgPSBtZXRhLnlBeGlzSUQgPSB2YWx1ZU9yRGVmYXVsdChkYXRhc2V0LnlBeGlzSUQsIGdldEZpcnN0U2NhbGVJZChjaGFydCwgJ3knKSk7XG4gICAgY29uc3QgcmlkID0gbWV0YS5yQXhpc0lEID0gdmFsdWVPckRlZmF1bHQoZGF0YXNldC5yQXhpc0lELCBnZXRGaXJzdFNjYWxlSWQoY2hhcnQsICdyJykpO1xuICAgIGNvbnN0IGluZGV4QXhpcyA9IG1ldGEuaW5kZXhBeGlzO1xuICAgIGNvbnN0IGlpZCA9IG1ldGEuaUF4aXNJRCA9IGNob29zZUlkKGluZGV4QXhpcywgeGlkLCB5aWQsIHJpZCk7XG4gICAgY29uc3QgdmlkID0gbWV0YS52QXhpc0lEID0gY2hvb3NlSWQoaW5kZXhBeGlzLCB5aWQsIHhpZCwgcmlkKTtcbiAgICBtZXRhLnhTY2FsZSA9IHRoaXMuZ2V0U2NhbGVGb3JJZCh4aWQpO1xuICAgIG1ldGEueVNjYWxlID0gdGhpcy5nZXRTY2FsZUZvcklkKHlpZCk7XG4gICAgbWV0YS5yU2NhbGUgPSB0aGlzLmdldFNjYWxlRm9ySWQocmlkKTtcbiAgICBtZXRhLmlTY2FsZSA9IHRoaXMuZ2V0U2NhbGVGb3JJZChpaWQpO1xuICAgIG1ldGEudlNjYWxlID0gdGhpcy5nZXRTY2FsZUZvcklkKHZpZCk7XG4gIH1cblxuICBnZXREYXRhc2V0KCkge1xuICAgIHJldHVybiB0aGlzLmNoYXJ0LmRhdGEuZGF0YXNldHNbdGhpcy5pbmRleF07XG4gIH1cblxuICBnZXRNZXRhKCkge1xuICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKHRoaXMuaW5kZXgpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzY2FsZUlEXG5cdCAqIEByZXR1cm4ge1NjYWxlfVxuXHQgKi9cbiAgZ2V0U2NhbGVGb3JJZChzY2FsZUlEKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhcnQuc2NhbGVzW3NjYWxlSURdO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0T3RoZXJTY2FsZShzY2FsZSkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIHJldHVybiBzY2FsZSA9PT0gbWV0YS5pU2NhbGVcbiAgICAgID8gbWV0YS52U2NhbGVcbiAgICAgIDogbWV0YS5pU2NhbGU7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLl91cGRhdGUoJ3Jlc2V0Jyk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9kZXN0cm95KCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGlmICh0aGlzLl9kYXRhKSB7XG4gICAgICB1bmxpc3RlbkFycmF5RXZlbnRzKHRoaXMuX2RhdGEsIHRoaXMpO1xuICAgIH1cbiAgICBpZiAobWV0YS5fc3RhY2tlZCkge1xuICAgICAgY2xlYXJTdGFja3MobWV0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZGF0YUNoZWNrKCkge1xuICAgIGNvbnN0IGRhdGFzZXQgPSB0aGlzLmdldERhdGFzZXQoKTtcbiAgICBjb25zdCBkYXRhID0gZGF0YXNldC5kYXRhIHx8IChkYXRhc2V0LmRhdGEgPSBbXSk7XG4gICAgY29uc3QgX2RhdGEgPSB0aGlzLl9kYXRhO1xuXG4gICAgLy8gSW4gb3JkZXIgdG8gY29ycmVjdGx5IGhhbmRsZSBkYXRhIGFkZGl0aW9uL2RlbGV0aW9uIGFuaW1hdGlvbiAoYW4gdGh1cyBzaW11bGF0ZVxuICAgIC8vIHJlYWwtdGltZSBjaGFydHMpLCB3ZSBuZWVkIHRvIG1vbml0b3IgdGhlc2UgZGF0YSBtb2RpZmljYXRpb25zIGFuZCBzeW5jaHJvbml6ZVxuICAgIC8vIHRoZSBpbnRlcm5hbCBtZXRhIGRhdGEgYWNjb3JkaW5nbHkuXG5cbiAgICBpZiAoaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSBjb252ZXJ0T2JqZWN0RGF0YVRvQXJyYXkoZGF0YSk7XG4gICAgfSBlbHNlIGlmIChfZGF0YSAhPT0gZGF0YSkge1xuICAgICAgaWYgKF9kYXRhKSB7XG4gICAgICAgIC8vIFRoaXMgY2FzZSBoYXBwZW5zIHdoZW4gdGhlIHVzZXIgcmVwbGFjZWQgdGhlIGRhdGEgYXJyYXkgaW5zdGFuY2UuXG4gICAgICAgIHVubGlzdGVuQXJyYXlFdmVudHMoX2RhdGEsIHRoaXMpO1xuICAgICAgICAvLyBEaXNjYXJkIG9sZCBwYXJzZWQgZGF0YSBhbmQgc3RhY2tzXG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgICAgICBjbGVhclN0YWNrcyhtZXRhKTtcbiAgICAgICAgbWV0YS5fcGFyc2VkID0gW107XG4gICAgICB9XG4gICAgICBpZiAoZGF0YSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKGRhdGEpKSB7XG4gICAgICAgIGxpc3RlbkFycmF5RXZlbnRzKGRhdGEsIHRoaXMpO1xuICAgICAgfVxuICAgICAgdGhpcy5fc3luY0xpc3QgPSBbXTtcbiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIH1cbiAgfVxuXG4gIGFkZEVsZW1lbnRzKCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuXG4gICAgdGhpcy5fZGF0YUNoZWNrKCk7XG5cbiAgICBpZiAodGhpcy5kYXRhc2V0RWxlbWVudFR5cGUpIHtcbiAgICAgIG1ldGEuZGF0YXNldCA9IG5ldyB0aGlzLmRhdGFzZXRFbGVtZW50VHlwZSgpO1xuICAgIH1cbiAgfVxuXG4gIGJ1aWxkT3JVcGRhdGVFbGVtZW50cyhyZXNldE5ld0VsZW1lbnRzKSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3QgZGF0YXNldCA9IHRoaXMuZ2V0RGF0YXNldCgpO1xuICAgIGxldCBzdGFja0NoYW5nZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX2RhdGFDaGVjaygpO1xuXG4gICAgLy8gbWFrZSBzdXJlIGNhY2hlZCBfc3RhY2tlZCBzdGF0dXMgaXMgY3VycmVudFxuICAgIGNvbnN0IG9sZFN0YWNrZWQgPSBtZXRhLl9zdGFja2VkO1xuICAgIG1ldGEuX3N0YWNrZWQgPSBpc1N0YWNrZWQobWV0YS52U2NhbGUsIG1ldGEpO1xuXG4gICAgLy8gZGV0ZWN0IGNoYW5nZSBpbiBzdGFjayBvcHRpb25cbiAgICBpZiAobWV0YS5zdGFjayAhPT0gZGF0YXNldC5zdGFjaykge1xuICAgICAgc3RhY2tDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIC8vIHJlbW92ZSB2YWx1ZXMgZnJvbSBvbGQgc3RhY2tcbiAgICAgIGNsZWFyU3RhY2tzKG1ldGEpO1xuICAgICAgbWV0YS5zdGFjayA9IGRhdGFzZXQuc3RhY2s7XG4gICAgfVxuXG4gICAgLy8gUmUtc3luYyBtZXRhIGRhdGEgaW4gY2FzZSB0aGUgdXNlciByZXBsYWNlZCB0aGUgZGF0YSBhcnJheSBvciBpZiB3ZSBtaXNzZWRcbiAgICAvLyBhbnkgdXBkYXRlcyBhbmQgc28gbWFrZSBzdXJlIHRoYXQgd2UgaGFuZGxlIG51bWJlciBvZiBkYXRhcG9pbnRzIGNoYW5naW5nLlxuICAgIHRoaXMuX3Jlc3luY0VsZW1lbnRzKHJlc2V0TmV3RWxlbWVudHMpO1xuXG4gICAgLy8gaWYgc3RhY2sgY2hhbmdlZCwgdXBkYXRlIHN0YWNrIHZhbHVlcyBmb3IgdGhlIHdob2xlIGRhdGFzZXRcbiAgICBpZiAoc3RhY2tDaGFuZ2VkIHx8IG9sZFN0YWNrZWQgIT09IG1ldGEuX3N0YWNrZWQpIHtcbiAgICAgIHVwZGF0ZVN0YWNrcyh0aGlzLCBtZXRhLl9wYXJzZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBNZXJnZXMgdXNlci1zdXBwbGllZCBhbmQgZGVmYXVsdCBkYXRhc2V0LWxldmVsIG9wdGlvbnNcblx0ICogQHByaXZhdGVcblx0ICovXG4gIGNvbmZpZ3VyZSgpIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmNoYXJ0LmNvbmZpZztcbiAgICBjb25zdCBzY29wZUtleXMgPSBjb25maWcuZGF0YXNldFNjb3BlS2V5cyh0aGlzLl90eXBlKTtcbiAgICBjb25zdCBzY29wZXMgPSBjb25maWcuZ2V0T3B0aW9uU2NvcGVzKHRoaXMuZ2V0RGF0YXNldCgpLCBzY29wZUtleXMsIHRydWUpO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbmZpZy5jcmVhdGVSZXNvbHZlcihzY29wZXMsIHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICB0aGlzLl9wYXJzaW5nID0gdGhpcy5vcHRpb25zLnBhcnNpbmc7XG4gICAgdGhpcy5fY2FjaGVkRGF0YU9wdHMgPSB7fTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRcblx0ICogQHBhcmFtIHtudW1iZXJ9IGNvdW50XG5cdCAqL1xuICBwYXJzZShzdGFydCwgY291bnQpIHtcbiAgICBjb25zdCB7X2NhY2hlZE1ldGE6IG1ldGEsIF9kYXRhOiBkYXRhfSA9IHRoaXM7XG4gICAgY29uc3Qge2lTY2FsZSwgX3N0YWNrZWR9ID0gbWV0YTtcbiAgICBjb25zdCBpQXhpcyA9IGlTY2FsZS5heGlzO1xuXG4gICAgbGV0IHNvcnRlZCA9IHN0YXJ0ID09PSAwICYmIGNvdW50ID09PSBkYXRhLmxlbmd0aCA/IHRydWUgOiBtZXRhLl9zb3J0ZWQ7XG4gICAgbGV0IHByZXYgPSBzdGFydCA+IDAgJiYgbWV0YS5fcGFyc2VkW3N0YXJ0IC0gMV07XG4gICAgbGV0IGksIGN1ciwgcGFyc2VkO1xuXG4gICAgaWYgKHRoaXMuX3BhcnNpbmcgPT09IGZhbHNlKSB7XG4gICAgICBtZXRhLl9wYXJzZWQgPSBkYXRhO1xuICAgICAgbWV0YS5fc29ydGVkID0gdHJ1ZTtcbiAgICAgIHBhcnNlZCA9IGRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc0FycmF5KGRhdGFbc3RhcnRdKSkge1xuICAgICAgICBwYXJzZWQgPSB0aGlzLnBhcnNlQXJyYXlEYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCk7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGRhdGFbc3RhcnRdKSkge1xuICAgICAgICBwYXJzZWQgPSB0aGlzLnBhcnNlT2JqZWN0RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VkID0gdGhpcy5wYXJzZVByaW1pdGl2ZURhdGEobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNOb3RJbk9yZGVyQ29tcGFyZWRUb1ByZXYgPSAoKSA9PiBjdXJbaUF4aXNdID09PSBudWxsIHx8IChwcmV2ICYmIGN1cltpQXhpc10gPCBwcmV2W2lBeGlzXSk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICBtZXRhLl9wYXJzZWRbaSArIHN0YXJ0XSA9IGN1ciA9IHBhcnNlZFtpXTtcbiAgICAgICAgaWYgKHNvcnRlZCkge1xuICAgICAgICAgIGlmIChpc05vdEluT3JkZXJDb21wYXJlZFRvUHJldigpKSB7XG4gICAgICAgICAgICBzb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJldiA9IGN1cjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWV0YS5fc29ydGVkID0gc29ydGVkO1xuICAgIH1cblxuICAgIGlmIChfc3RhY2tlZCkge1xuICAgICAgdXBkYXRlU3RhY2tzKHRoaXMsIHBhcnNlZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIFBhcnNlIGFycmF5IG9mIHByaW1pdGl2ZSB2YWx1ZXNcblx0ICogQHBhcmFtIHtvYmplY3R9IG1ldGEgLSBkYXRhc2V0IG1ldGFcblx0ICogQHBhcmFtIHthcnJheX0gZGF0YSAtIGRhdGEgYXJyYXkuIEV4YW1wbGUgWzEsMyw0XVxuXHQgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgLSBzdGFydCBpbmRleFxuXHQgKiBAcGFyYW0ge251bWJlcn0gY291bnQgLSBudW1iZXIgb2YgaXRlbXMgdG8gcGFyc2Vcblx0ICogQHJldHVybnMge29iamVjdH0gcGFyc2VkIGl0ZW0gLSBpdGVtIGNvbnRhaW5pbmcgaW5kZXggYW5kIGEgcGFyc2VkIHZhbHVlXG5cdCAqIGZvciBlYWNoIHNjYWxlIGlkLlxuXHQgKiBFeGFtcGxlOiB7eFNjYWxlMDogMCwgeVNjYWxlMDogMX1cblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgcGFyc2VQcmltaXRpdmVEYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgIGNvbnN0IHtpU2NhbGUsIHZTY2FsZX0gPSBtZXRhO1xuICAgIGNvbnN0IGlBeGlzID0gaVNjYWxlLmF4aXM7XG4gICAgY29uc3QgdkF4aXMgPSB2U2NhbGUuYXhpcztcbiAgICBjb25zdCBsYWJlbHMgPSBpU2NhbGUuZ2V0TGFiZWxzKCk7XG4gICAgY29uc3Qgc2luZ2xlU2NhbGUgPSBpU2NhbGUgPT09IHZTY2FsZTtcbiAgICBjb25zdCBwYXJzZWQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGxldCBpLCBpbGVuLCBpbmRleDtcblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBjb3VudDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgaW5kZXggPSBpICsgc3RhcnQ7XG4gICAgICBwYXJzZWRbaV0gPSB7XG4gICAgICAgIFtpQXhpc106IHNpbmdsZVNjYWxlIHx8IGlTY2FsZS5wYXJzZShsYWJlbHNbaW5kZXhdLCBpbmRleCksXG4gICAgICAgIFt2QXhpc106IHZTY2FsZS5wYXJzZShkYXRhW2luZGV4XSwgaW5kZXgpXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkO1xuICB9XG5cbiAgLyoqXG5cdCAqIFBhcnNlIGFycmF5IG9mIGFycmF5c1xuXHQgKiBAcGFyYW0ge29iamVjdH0gbWV0YSAtIGRhdGFzZXQgbWV0YVxuXHQgKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gZGF0YSBhcnJheS4gRXhhbXBsZSBbWzEsMl0sWzMsNF1dXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCAtIHN0YXJ0IGluZGV4XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIG51bWJlciBvZiBpdGVtcyB0byBwYXJzZVxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fSBwYXJzZWQgaXRlbSAtIGl0ZW0gY29udGFpbmluZyBpbmRleCBhbmQgYSBwYXJzZWQgdmFsdWVcblx0ICogZm9yIGVhY2ggc2NhbGUgaWQuXG5cdCAqIEV4YW1wbGU6IHt4OiAwLCB5OiAxfVxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBwYXJzZUFycmF5RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICBjb25zdCB7eFNjYWxlLCB5U2NhbGV9ID0gbWV0YTtcbiAgICBjb25zdCBwYXJzZWQgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGxldCBpLCBpbGVuLCBpbmRleCwgaXRlbTtcblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBjb3VudDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgaW5kZXggPSBpICsgc3RhcnQ7XG4gICAgICBpdGVtID0gZGF0YVtpbmRleF07XG4gICAgICBwYXJzZWRbaV0gPSB7XG4gICAgICAgIHg6IHhTY2FsZS5wYXJzZShpdGVtWzBdLCBpbmRleCksXG4gICAgICAgIHk6IHlTY2FsZS5wYXJzZShpdGVtWzFdLCBpbmRleClcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWQ7XG4gIH1cblxuICAvKipcblx0ICogUGFyc2UgYXJyYXkgb2Ygb2JqZWN0c1xuXHQgKiBAcGFyYW0ge29iamVjdH0gbWV0YSAtIGRhdGFzZXQgbWV0YVxuXHQgKiBAcGFyYW0ge2FycmF5fSBkYXRhIC0gZGF0YSBhcnJheS4gRXhhbXBsZSBbe3g6MSwgeTo1fSwge3g6MiwgeToxMH1dXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCAtIHN0YXJ0IGluZGV4XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIG51bWJlciBvZiBpdGVtcyB0byBwYXJzZVxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fSBwYXJzZWQgaXRlbSAtIGl0ZW0gY29udGFpbmluZyBpbmRleCBhbmQgYSBwYXJzZWQgdmFsdWVcblx0ICogZm9yIGVhY2ggc2NhbGUgaWQuIF9jdXN0b20gaXMgb3B0aW9uYWxcblx0ICogRXhhbXBsZToge3hTY2FsZTA6IDAsIHlTY2FsZTA6IDEsIF9jdXN0b206IHtyOiAxMCwgZm9vOiAnYmFyJ319XG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIHBhcnNlT2JqZWN0RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICBjb25zdCB7eFNjYWxlLCB5U2NhbGV9ID0gbWV0YTtcbiAgICBjb25zdCB7eEF4aXNLZXkgPSAneCcsIHlBeGlzS2V5ID0gJ3knfSA9IHRoaXMuX3BhcnNpbmc7XG4gICAgY29uc3QgcGFyc2VkID0gbmV3IEFycmF5KGNvdW50KTtcbiAgICBsZXQgaSwgaWxlbiwgaW5kZXgsIGl0ZW07XG5cbiAgICBmb3IgKGkgPSAwLCBpbGVuID0gY291bnQ7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIGluZGV4ID0gaSArIHN0YXJ0O1xuICAgICAgaXRlbSA9IGRhdGFbaW5kZXhdO1xuICAgICAgcGFyc2VkW2ldID0ge1xuICAgICAgICB4OiB4U2NhbGUucGFyc2UocmVzb2x2ZU9iamVjdEtleShpdGVtLCB4QXhpc0tleSksIGluZGV4KSxcbiAgICAgICAgeTogeVNjYWxlLnBhcnNlKHJlc29sdmVPYmplY3RLZXkoaXRlbSwgeUF4aXNLZXkpLCBpbmRleClcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWQ7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZ2V0UGFyc2VkKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlZE1ldGEuX3BhcnNlZFtpbmRleF07XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZ2V0RGF0YUVsZW1lbnQoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkTWV0YS5kYXRhW2luZGV4XTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBhcHBseVN0YWNrKHNjYWxlLCBwYXJzZWQsIG1vZGUpIHtcbiAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3QgdmFsdWUgPSBwYXJzZWRbc2NhbGUuYXhpc107XG4gICAgY29uc3Qgc3RhY2sgPSB7XG4gICAgICBrZXlzOiBnZXRTb3J0ZWREYXRhc2V0SW5kaWNlcyhjaGFydCwgdHJ1ZSksXG4gICAgICB2YWx1ZXM6IHBhcnNlZC5fc3RhY2tzW3NjYWxlLmF4aXNdLl92aXN1YWxWYWx1ZXNcbiAgICB9O1xuICAgIHJldHVybiBhcHBseVN0YWNrKHN0YWNrLCB2YWx1ZSwgbWV0YS5pbmRleCwge21vZGV9KTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICB1cGRhdGVSYW5nZUZyb21QYXJzZWQocmFuZ2UsIHNjYWxlLCBwYXJzZWQsIHN0YWNrKSB7XG4gICAgY29uc3QgcGFyc2VkVmFsdWUgPSBwYXJzZWRbc2NhbGUuYXhpc107XG4gICAgbGV0IHZhbHVlID0gcGFyc2VkVmFsdWUgPT09IG51bGwgPyBOYU4gOiBwYXJzZWRWYWx1ZTtcbiAgICBjb25zdCB2YWx1ZXMgPSBzdGFjayAmJiBwYXJzZWQuX3N0YWNrc1tzY2FsZS5heGlzXTtcbiAgICBpZiAoc3RhY2sgJiYgdmFsdWVzKSB7XG4gICAgICBzdGFjay52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICB2YWx1ZSA9IGFwcGx5U3RhY2soc3RhY2ssIHBhcnNlZFZhbHVlLCB0aGlzLl9jYWNoZWRNZXRhLmluZGV4KTtcbiAgICB9XG4gICAgcmFuZ2UubWluID0gTWF0aC5taW4ocmFuZ2UubWluLCB2YWx1ZSk7XG4gICAgcmFuZ2UubWF4ID0gTWF0aC5tYXgocmFuZ2UubWF4LCB2YWx1ZSk7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZ2V0TWluTWF4KHNjYWxlLCBjYW5TdGFjaykge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IF9wYXJzZWQgPSBtZXRhLl9wYXJzZWQ7XG4gICAgY29uc3Qgc29ydGVkID0gbWV0YS5fc29ydGVkICYmIHNjYWxlID09PSBtZXRhLmlTY2FsZTtcbiAgICBjb25zdCBpbGVuID0gX3BhcnNlZC5sZW5ndGg7XG4gICAgY29uc3Qgb3RoZXJTY2FsZSA9IHRoaXMuX2dldE90aGVyU2NhbGUoc2NhbGUpO1xuICAgIGNvbnN0IHN0YWNrID0gY3JlYXRlU3RhY2soY2FuU3RhY2ssIG1ldGEsIHRoaXMuY2hhcnQpO1xuICAgIGNvbnN0IHJhbmdlID0ge21pbjogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBtYXg6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWX07XG4gICAgY29uc3Qge21pbjogb3RoZXJNaW4sIG1heDogb3RoZXJNYXh9ID0gZ2V0VXNlckJvdW5kcyhvdGhlclNjYWxlKTtcbiAgICBsZXQgaSwgcGFyc2VkO1xuXG4gICAgZnVuY3Rpb24gX3NraXAoKSB7XG4gICAgICBwYXJzZWQgPSBfcGFyc2VkW2ldO1xuICAgICAgY29uc3Qgb3RoZXJWYWx1ZSA9IHBhcnNlZFtvdGhlclNjYWxlLmF4aXNdO1xuICAgICAgcmV0dXJuICFpc0Zpbml0ZShwYXJzZWRbc2NhbGUuYXhpc10pIHx8IG90aGVyTWluID4gb3RoZXJWYWx1ZSB8fCBvdGhlck1heCA8IG90aGVyVmFsdWU7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgaWYgKF9za2lwKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVJhbmdlRnJvbVBhcnNlZChyYW5nZSwgc2NhbGUsIHBhcnNlZCwgc3RhY2spO1xuICAgICAgaWYgKHNvcnRlZCkge1xuICAgICAgICAvLyBpZiB0aGUgZGF0YSBpcyBzb3J0ZWQsIHdlIGRvbid0IG5lZWQgdG8gY2hlY2sgZnVydGhlciBmcm9tIHRoaXMgZW5kIG9mIGFycmF5XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc29ydGVkKSB7XG4gICAgICAvLyBpbiB0aGUgc29ydGVkIGNhc2UsIGZpbmQgZmlyc3Qgbm9uLXNraXBwZWQgdmFsdWUgZnJvbSBvdGhlciBlbmQgb2YgYXJyYXlcbiAgICAgIGZvciAoaSA9IGlsZW4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBpZiAoX3NraXAoKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlUmFuZ2VGcm9tUGFyc2VkKHJhbmdlLCBzY2FsZSwgcGFyc2VkLCBzdGFjayk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH1cblxuICBnZXRBbGxQYXJzZWRWYWx1ZXMoc2NhbGUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSB0aGlzLl9jYWNoZWRNZXRhLl9wYXJzZWQ7XG4gICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgbGV0IGksIGlsZW4sIHZhbHVlO1xuXG4gICAgZm9yIChpID0gMCwgaWxlbiA9IHBhcnNlZC5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIHZhbHVlID0gcGFyc2VkW2ldW3NjYWxlLmF4aXNdO1xuICAgICAgaWYgKGlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICAvKipcblx0ICogQHJldHVybiB7bnVtYmVyfGJvb2xlYW59XG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIGdldE1heE92ZXJmbG93KCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRMYWJlbEFuZFZhbHVlKGluZGV4KSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3QgaVNjYWxlID0gbWV0YS5pU2NhbGU7XG4gICAgY29uc3QgdlNjYWxlID0gbWV0YS52U2NhbGU7XG4gICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaW5kZXgpO1xuICAgIHJldHVybiB7XG4gICAgICBsYWJlbDogaVNjYWxlID8gJycgKyBpU2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWRbaVNjYWxlLmF4aXNdKSA6ICcnLFxuICAgICAgdmFsdWU6IHZTY2FsZSA/ICcnICsgdlNjYWxlLmdldExhYmVsRm9yVmFsdWUocGFyc2VkW3ZTY2FsZS5heGlzXSkgOiAnJ1xuICAgIH07XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF91cGRhdGUobW9kZSkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIHRoaXMudXBkYXRlKG1vZGUgfHwgJ2RlZmF1bHQnKTtcbiAgICBtZXRhLl9jbGlwID0gdG9DbGlwKHZhbHVlT3JEZWZhdWx0KHRoaXMub3B0aW9ucy5jbGlwLCBkZWZhdWx0Q2xpcChtZXRhLnhTY2FsZSwgbWV0YS55U2NhbGUsIHRoaXMuZ2V0TWF4T3ZlcmZsb3coKSkpKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbW9kZVxuXHQgKi9cbiAgdXBkYXRlKG1vZGUpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICBkcmF3KCkge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuX2N0eDtcbiAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3QgZWxlbWVudHMgPSBtZXRhLmRhdGEgfHwgW107XG4gICAgY29uc3QgYXJlYSA9IGNoYXJ0LmNoYXJ0QXJlYTtcbiAgICBjb25zdCBhY3RpdmUgPSBbXTtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2RyYXdTdGFydCB8fCAwO1xuICAgIGNvbnN0IGNvdW50ID0gdGhpcy5fZHJhd0NvdW50IHx8IChlbGVtZW50cy5sZW5ndGggLSBzdGFydCk7XG4gICAgY29uc3QgZHJhd0FjdGl2ZUVsZW1lbnRzT25Ub3AgPSB0aGlzLm9wdGlvbnMuZHJhd0FjdGl2ZUVsZW1lbnRzT25Ub3A7XG4gICAgbGV0IGk7XG5cbiAgICBpZiAobWV0YS5kYXRhc2V0KSB7XG4gICAgICBtZXRhLmRhdGFzZXQuZHJhdyhjdHgsIGFyZWEsIHN0YXJ0LCBjb3VudCk7XG4gICAgfVxuXG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBzdGFydCArIGNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgIGlmIChlbGVtZW50LmhpZGRlbikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50LmFjdGl2ZSAmJiBkcmF3QWN0aXZlRWxlbWVudHNPblRvcCkge1xuICAgICAgICBhY3RpdmUucHVzaChlbGVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuZHJhdyhjdHgsIGFyZWEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBhY3RpdmUubGVuZ3RoOyArK2kpIHtcbiAgICAgIGFjdGl2ZVtpXS5kcmF3KGN0eCwgYXJlYSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIFJldHVybnMgYSBzZXQgb2YgcHJlZGVmaW5lZCBzdHlsZSBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gcmVwcmVzZW50IHRoZSBkYXRhc2V0XG5cdCAqIG9yIHRoZSBkYXRhIGlmIHRoZSBpbmRleCBpcyBzcGVjaWZpZWRcblx0ICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gZGF0YSBpbmRleFxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFthY3RpdmVdIC0gdHJ1ZSBpZiBob3ZlclxuXHQgKiBAcmV0dXJuIHtvYmplY3R9IHN0eWxlIG9iamVjdFxuXHQgKi9cbiAgZ2V0U3R5bGUoaW5kZXgsIGFjdGl2ZSkge1xuICAgIGNvbnN0IG1vZGUgPSBhY3RpdmUgPyAnYWN0aXZlJyA6ICdkZWZhdWx0JztcbiAgICByZXR1cm4gaW5kZXggPT09IHVuZGVmaW5lZCAmJiB0aGlzLl9jYWNoZWRNZXRhLmRhdGFzZXRcbiAgICAgID8gdGhpcy5yZXNvbHZlRGF0YXNldEVsZW1lbnRPcHRpb25zKG1vZGUpXG4gICAgICA6IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpbmRleCB8fCAwLCBtb2RlKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRDb250ZXh0KGluZGV4LCBhY3RpdmUsIG1vZGUpIHtcbiAgICBjb25zdCBkYXRhc2V0ID0gdGhpcy5nZXREYXRhc2V0KCk7XG4gICAgbGV0IGNvbnRleHQ7XG4gICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLl9jYWNoZWRNZXRhLmRhdGEubGVuZ3RoKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fY2FjaGVkTWV0YS5kYXRhW2luZGV4XTtcbiAgICAgIGNvbnRleHQgPSBlbGVtZW50LiRjb250ZXh0IHx8XG4gICAgICAgIChlbGVtZW50LiRjb250ZXh0ID0gY3JlYXRlRGF0YUNvbnRleHQodGhpcy5nZXRDb250ZXh0KCksIGluZGV4LCBlbGVtZW50KSk7XG4gICAgICBjb250ZXh0LnBhcnNlZCA9IHRoaXMuZ2V0UGFyc2VkKGluZGV4KTtcbiAgICAgIGNvbnRleHQucmF3ID0gZGF0YXNldC5kYXRhW2luZGV4XTtcbiAgICAgIGNvbnRleHQuaW5kZXggPSBjb250ZXh0LmRhdGFJbmRleCA9IGluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0ID0gdGhpcy4kY29udGV4dCB8fFxuICAgICAgICAodGhpcy4kY29udGV4dCA9IGNyZWF0ZURhdGFzZXRDb250ZXh0KHRoaXMuY2hhcnQuZ2V0Q29udGV4dCgpLCB0aGlzLmluZGV4KSk7XG4gICAgICBjb250ZXh0LmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgY29udGV4dC5pbmRleCA9IGNvbnRleHQuZGF0YXNldEluZGV4ID0gdGhpcy5pbmRleDtcbiAgICB9XG5cbiAgICBjb250ZXh0LmFjdGl2ZSA9ICEhYWN0aXZlO1xuICAgIGNvbnRleHQubW9kZSA9IG1vZGU7XG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtzdHJpbmd9IFttb2RlXVxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICByZXNvbHZlRGF0YXNldEVsZW1lbnRPcHRpb25zKG1vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVzb2x2ZUVsZW1lbnRPcHRpb25zKHRoaXMuZGF0YXNldEVsZW1lbnRUeXBlLmlkLCBtb2RlKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHtzdHJpbmd9IFttb2RlXVxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICByZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGluZGV4LCBtb2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc29sdmVFbGVtZW50T3B0aW9ucyh0aGlzLmRhdGFFbGVtZW50VHlwZS5pZCwgbW9kZSwgaW5kZXgpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfcmVzb2x2ZUVsZW1lbnRPcHRpb25zKGVsZW1lbnRUeXBlLCBtb2RlID0gJ2RlZmF1bHQnLCBpbmRleCkge1xuICAgIGNvbnN0IGFjdGl2ZSA9IG1vZGUgPT09ICdhY3RpdmUnO1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5fY2FjaGVkRGF0YU9wdHM7XG4gICAgY29uc3QgY2FjaGVLZXkgPSBlbGVtZW50VHlwZSArICctJyArIG1vZGU7XG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGVbY2FjaGVLZXldO1xuICAgIGNvbnN0IHNoYXJpbmcgPSB0aGlzLmVuYWJsZU9wdGlvblNoYXJpbmcgJiYgZGVmaW5lZChpbmRleCk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNsb25lSWZOb3RTaGFyZWQoY2FjaGVkLCBzaGFyaW5nKTtcbiAgICB9XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5jaGFydC5jb25maWc7XG4gICAgY29uc3Qgc2NvcGVLZXlzID0gY29uZmlnLmRhdGFzZXRFbGVtZW50U2NvcGVLZXlzKHRoaXMuX3R5cGUsIGVsZW1lbnRUeXBlKTtcbiAgICBjb25zdCBwcmVmaXhlcyA9IGFjdGl2ZSA/IFtgJHtlbGVtZW50VHlwZX1Ib3ZlcmAsICdob3ZlcicsIGVsZW1lbnRUeXBlLCAnJ10gOiBbZWxlbWVudFR5cGUsICcnXTtcbiAgICBjb25zdCBzY29wZXMgPSBjb25maWcuZ2V0T3B0aW9uU2NvcGVzKHRoaXMuZ2V0RGF0YXNldCgpLCBzY29wZUtleXMpO1xuICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoZGVmYXVsdHMuZWxlbWVudHNbZWxlbWVudFR5cGVdKTtcbiAgICAvLyBjb250ZXh0IGlzIHByb3ZpZGVkIGFzIGEgZnVuY3Rpb24sIGFuZCBpcyBjYWxsZWQgb25seSBpZiBuZWVkZWQsXG4gICAgLy8gc28gd2UgZG9uJ3QgY3JlYXRlIGEgY29udGV4dCBmb3IgZWFjaCBlbGVtZW50IGlmIG5vdCBuZWVkZWQuXG4gICAgY29uc3QgY29udGV4dCA9ICgpID0+IHRoaXMuZ2V0Q29udGV4dChpbmRleCwgYWN0aXZlLCBtb2RlKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBjb25maWcucmVzb2x2ZU5hbWVkT3B0aW9ucyhzY29wZXMsIG5hbWVzLCBjb250ZXh0LCBwcmVmaXhlcyk7XG5cbiAgICBpZiAodmFsdWVzLiRzaGFyZWQpIHtcbiAgICAgIC8vIGAkc2hhcmVkYCBpbmRpY2F0ZXMgdGhpcyBzZXQgb2Ygb3B0aW9ucyBjYW4gYmUgc2hhcmVkIGJldHdlZW4gbXVsdGlwbGUgZWxlbWVudHMuXG4gICAgICAvLyBTaGFyaW5nIGlzIHVzZWQgdG8gcmVkdWNlIG51bWJlciBvZiBwcm9wZXJ0aWVzIHRvIGNoYW5nZSBkdXJpbmcgYW5pbWF0aW9uLlxuICAgICAgdmFsdWVzLiRzaGFyZWQgPSBzaGFyaW5nO1xuXG4gICAgICAvLyBXZSBjYWNoZSBvcHRpb25zIGJ5IGBtb2RlYCwgd2hpY2ggY2FuIGJlICdhY3RpdmUnIGZvciBleGFtcGxlLiBUaGlzIGVuYWJsZXMgdXNcbiAgICAgIC8vIHRvIGhhdmUgdGhlICdhY3RpdmUnIGVsZW1lbnQgb3B0aW9ucyBhbmQgJ2RlZmF1bHQnIG9wdGlvbnMgdG8gc3dpdGNoIGJldHdlZW5cbiAgICAgIC8vIHdoZW4gaW50ZXJhY3RpbmcuXG4gICAgICBjYWNoZVtjYWNoZUtleV0gPSBPYmplY3QuZnJlZXplKGNsb25lSWZOb3RTaGFyZWQodmFsdWVzLCBzaGFyaW5nKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfcmVzb2x2ZUFuaW1hdGlvbnMoaW5kZXgsIHRyYW5zaXRpb24sIGFjdGl2ZSkge1xuICAgIGNvbnN0IGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuX2NhY2hlZERhdGFPcHRzO1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gYGFuaW1hdGlvbi0ke3RyYW5zaXRpb259YDtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZVtjYWNoZUtleV07XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgaWYgKGNoYXJ0Lm9wdGlvbnMuYW5pbWF0aW9uICE9PSBmYWxzZSkge1xuICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5jaGFydC5jb25maWc7XG4gICAgICBjb25zdCBzY29wZUtleXMgPSBjb25maWcuZGF0YXNldEFuaW1hdGlvblNjb3BlS2V5cyh0aGlzLl90eXBlLCB0cmFuc2l0aW9uKTtcbiAgICAgIGNvbnN0IHNjb3BlcyA9IGNvbmZpZy5nZXRPcHRpb25TY29wZXModGhpcy5nZXREYXRhc2V0KCksIHNjb3BlS2V5cyk7XG4gICAgICBvcHRpb25zID0gY29uZmlnLmNyZWF0ZVJlc29sdmVyKHNjb3BlcywgdGhpcy5nZXRDb250ZXh0KGluZGV4LCBhY3RpdmUsIHRyYW5zaXRpb24pKTtcbiAgICB9XG4gICAgY29uc3QgYW5pbWF0aW9ucyA9IG5ldyBBbmltYXRpb25zKGNoYXJ0LCBvcHRpb25zICYmIG9wdGlvbnMuYW5pbWF0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5fY2FjaGVhYmxlKSB7XG4gICAgICBjYWNoZVtjYWNoZUtleV0gPSBPYmplY3QuZnJlZXplKGFuaW1hdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gYW5pbWF0aW9ucztcbiAgfVxuXG4gIC8qKlxuXHQgKiBVdGlsaXR5IGZvciBnZXR0aW5nIHRoZSBvcHRpb25zIG9iamVjdCBzaGFyZWQgYmV0d2VlbiBlbGVtZW50c1xuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRTaGFyZWRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMuJHNoYXJlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2hhcmVkT3B0aW9ucyB8fCAodGhpcy5fc2hhcmVkT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBVdGlsaXR5IGZvciBkZXRlcm1pbmluZyBpZiBgb3B0aW9uc2Agc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSB1cGRhdGVkIHByb3BlcnRpZXNcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgaW5jbHVkZU9wdGlvbnMobW9kZSwgc2hhcmVkT3B0aW9ucykge1xuICAgIHJldHVybiAhc2hhcmVkT3B0aW9ucyB8fCBpc0RpcmVjdFVwZGF0ZU1vZGUobW9kZSkgfHwgdGhpcy5jaGFydC5fYW5pbWF0aW9uc0Rpc2FibGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0b2RvIHY0LCByZW5hbWUgdG8gZ2V0U2hhcmVkT3B0aW9ucyBhbmQgcmVtb3ZlIGV4Y2VzcyBmdW5jdGlvbnNcbiAgICovXG4gIF9nZXRTaGFyZWRPcHRpb25zKHN0YXJ0LCBtb2RlKSB7XG4gICAgY29uc3QgZmlyc3RPcHRzID0gdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHN0YXJ0LCBtb2RlKTtcbiAgICBjb25zdCBwcmV2aW91c2x5U2hhcmVkT3B0aW9ucyA9IHRoaXMuX3NoYXJlZE9wdGlvbnM7XG4gICAgY29uc3Qgc2hhcmVkT3B0aW9ucyA9IHRoaXMuZ2V0U2hhcmVkT3B0aW9ucyhmaXJzdE9wdHMpO1xuICAgIGNvbnN0IGluY2x1ZGVPcHRpb25zID0gdGhpcy5pbmNsdWRlT3B0aW9ucyhtb2RlLCBzaGFyZWRPcHRpb25zKSB8fCAoc2hhcmVkT3B0aW9ucyAhPT0gcHJldmlvdXNseVNoYXJlZE9wdGlvbnMpO1xuICAgIHRoaXMudXBkYXRlU2hhcmVkT3B0aW9ucyhzaGFyZWRPcHRpb25zLCBtb2RlLCBmaXJzdE9wdHMpO1xuICAgIHJldHVybiB7c2hhcmVkT3B0aW9ucywgaW5jbHVkZU9wdGlvbnN9O1xuICB9XG5cbiAgLyoqXG5cdCAqIFV0aWxpdHkgZm9yIHVwZGF0aW5nIGFuIGVsZW1lbnQgd2l0aCBuZXcgcHJvcGVydGllcywgdXNpbmcgYW5pbWF0aW9ucyB3aGVuIGFwcHJvcHJpYXRlLlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICB1cGRhdGVFbGVtZW50KGVsZW1lbnQsIGluZGV4LCBwcm9wZXJ0aWVzLCBtb2RlKSB7XG4gICAgaWYgKGlzRGlyZWN0VXBkYXRlTW9kZShtb2RlKSkge1xuICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LCBwcm9wZXJ0aWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVzb2x2ZUFuaW1hdGlvbnMoaW5kZXgsIG1vZGUpLnVwZGF0ZShlbGVtZW50LCBwcm9wZXJ0aWVzKTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogVXRpbGl0eSB0byBhbmltYXRlIHRoZSBzaGFyZWQgb3B0aW9ucywgdGhhdCBhcmUgcG90ZW50aWFsbHkgYWZmZWN0aW5nIG11bHRpcGxlIGVsZW1lbnRzLlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICB1cGRhdGVTaGFyZWRPcHRpb25zKHNoYXJlZE9wdGlvbnMsIG1vZGUsIG5ld09wdGlvbnMpIHtcbiAgICBpZiAoc2hhcmVkT3B0aW9ucyAmJiAhaXNEaXJlY3RVcGRhdGVNb2RlKG1vZGUpKSB7XG4gICAgICB0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucyh1bmRlZmluZWQsIG1vZGUpLnVwZGF0ZShzaGFyZWRPcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9zZXRTdHlsZShlbGVtZW50LCBpbmRleCwgbW9kZSwgYWN0aXZlKSB7XG4gICAgZWxlbWVudC5hY3RpdmUgPSBhY3RpdmU7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2V0U3R5bGUoaW5kZXgsIGFjdGl2ZSk7XG4gICAgdGhpcy5fcmVzb2x2ZUFuaW1hdGlvbnMoaW5kZXgsIG1vZGUsIGFjdGl2ZSkudXBkYXRlKGVsZW1lbnQsIHtcbiAgICAgIC8vIFdoZW4gZ29pbmcgZnJvbSBhY3RpdmUgdG8gaW5hY3RpdmUsIHdlIG5lZWQgdG8gdXBkYXRlIHRvIHRoZSBzaGFyZWQgb3B0aW9ucy5cbiAgICAgIC8vIFRoaXMgd2F5IHRoZSBvbmNlIGhvdmVyZWQgZWxlbWVudCB3aWxsIGVuZCB1cCB3aXRoIHRoZSBzYW1lIG9yaWdpbmFsIHNoYXJlZCBvcHRpb25zIGluc3RhbmNlLCBhZnRlciBhbmltYXRpb24uXG4gICAgICBvcHRpb25zOiAoIWFjdGl2ZSAmJiB0aGlzLmdldFNoYXJlZE9wdGlvbnMob3B0aW9ucykpIHx8IG9wdGlvbnNcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUhvdmVyU3R5bGUoZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleCkge1xuICAgIHRoaXMuX3NldFN0eWxlKGVsZW1lbnQsIGluZGV4LCAnYWN0aXZlJywgZmFsc2UpO1xuICB9XG5cbiAgc2V0SG92ZXJTdHlsZShlbGVtZW50LCBkYXRhc2V0SW5kZXgsIGluZGV4KSB7XG4gICAgdGhpcy5fc2V0U3R5bGUoZWxlbWVudCwgaW5kZXgsICdhY3RpdmUnLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX3JlbW92ZURhdGFzZXRIb3ZlclN0eWxlKCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9jYWNoZWRNZXRhLmRhdGFzZXQ7XG5cbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgdGhpcy5fc2V0U3R5bGUoZWxlbWVudCwgdW5kZWZpbmVkLCAnYWN0aXZlJywgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX3NldERhdGFzZXRIb3ZlclN0eWxlKCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9jYWNoZWRNZXRhLmRhdGFzZXQ7XG5cbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgdGhpcy5fc2V0U3R5bGUoZWxlbWVudCwgdW5kZWZpbmVkLCAnYWN0aXZlJywgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfcmVzeW5jRWxlbWVudHMocmVzZXROZXdFbGVtZW50cykge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhO1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5fY2FjaGVkTWV0YS5kYXRhO1xuXG4gICAgLy8gQXBwbHkgY2hhbmdlcyBkZXRlY3RlZCB0aHJvdWdoIGFycmF5IGxpc3RlbmVyc1xuICAgIGZvciAoY29uc3QgW21ldGhvZCwgYXJnMSwgYXJnMl0gb2YgdGhpcy5fc3luY0xpc3QpIHtcbiAgICAgIHRoaXNbbWV0aG9kXShhcmcxLCBhcmcyKTtcbiAgICB9XG4gICAgdGhpcy5fc3luY0xpc3QgPSBbXTtcblxuICAgIGNvbnN0IG51bU1ldGEgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgY29uc3QgbnVtRGF0YSA9IGRhdGEubGVuZ3RoO1xuICAgIGNvbnN0IGNvdW50ID0gTWF0aC5taW4obnVtRGF0YSwgbnVtTWV0YSk7XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIC8vIFRPRE86IEl0IGlzIG5vdCBvcHRpbWFsIHRvIGFsd2F5cyBwYXJzZSB0aGUgb2xkIGRhdGFcbiAgICAgIC8vIFRoaXMgaXMgZG9uZSBiZWNhdXNlIHdlIGFyZSBub3QgZGV0ZWN0aW5nIGRpcmVjdCBhc3NpZ25tZW50czpcbiAgICAgIC8vIGNoYXJ0LmRhdGEuZGF0YXNldHNbMF0uZGF0YVs1XSA9IDEwO1xuICAgICAgLy8gY2hhcnQuZGF0YS5kYXRhc2V0c1swXS5kYXRhWzVdLnkgPSAxMDtcbiAgICAgIHRoaXMucGFyc2UoMCwgY291bnQpO1xuICAgIH1cblxuICAgIGlmIChudW1EYXRhID4gbnVtTWV0YSkge1xuICAgICAgdGhpcy5faW5zZXJ0RWxlbWVudHMobnVtTWV0YSwgbnVtRGF0YSAtIG51bU1ldGEsIHJlc2V0TmV3RWxlbWVudHMpO1xuICAgIH0gZWxzZSBpZiAobnVtRGF0YSA8IG51bU1ldGEpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnRzKG51bURhdGEsIG51bU1ldGEgLSBudW1EYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9pbnNlcnRFbGVtZW50cyhzdGFydCwgY291bnQsIHJlc2V0TmV3RWxlbWVudHMgPSB0cnVlKSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3QgZGF0YSA9IG1ldGEuZGF0YTtcbiAgICBjb25zdCBlbmQgPSBzdGFydCArIGNvdW50O1xuICAgIGxldCBpO1xuXG4gICAgY29uc3QgbW92ZSA9IChhcnIpID0+IHtcbiAgICAgIGFyci5sZW5ndGggKz0gY291bnQ7XG4gICAgICBmb3IgKGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+PSBlbmQ7IGktLSkge1xuICAgICAgICBhcnJbaV0gPSBhcnJbaSAtIGNvdW50XTtcbiAgICAgIH1cbiAgICB9O1xuICAgIG1vdmUoZGF0YSk7XG5cbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICBkYXRhW2ldID0gbmV3IHRoaXMuZGF0YUVsZW1lbnRUeXBlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BhcnNpbmcpIHtcbiAgICAgIG1vdmUobWV0YS5fcGFyc2VkKTtcbiAgICB9XG4gICAgdGhpcy5wYXJzZShzdGFydCwgY291bnQpO1xuXG4gICAgaWYgKHJlc2V0TmV3RWxlbWVudHMpIHtcbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudHMoZGF0YSwgc3RhcnQsIGNvdW50LCAncmVzZXQnKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVFbGVtZW50cyhlbGVtZW50LCBzdGFydCwgY291bnQsIG1vZGUpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9yZW1vdmVFbGVtZW50cyhzdGFydCwgY291bnQpIHtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBpZiAodGhpcy5fcGFyc2luZykge1xuICAgICAgY29uc3QgcmVtb3ZlZCA9IG1ldGEuX3BhcnNlZC5zcGxpY2Uoc3RhcnQsIGNvdW50KTtcbiAgICAgIGlmIChtZXRhLl9zdGFja2VkKSB7XG4gICAgICAgIGNsZWFyU3RhY2tzKG1ldGEsIHJlbW92ZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBtZXRhLmRhdGEuc3BsaWNlKHN0YXJ0LCBjb3VudCk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcbiAgICovXG4gIF9zeW5jKGFyZ3MpIHtcbiAgICBpZiAodGhpcy5fcGFyc2luZykge1xuICAgICAgdGhpcy5fc3luY0xpc3QucHVzaChhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgW21ldGhvZCwgYXJnMSwgYXJnMl0gPSBhcmdzO1xuICAgICAgdGhpc1ttZXRob2RdKGFyZzEsIGFyZzIpO1xuICAgIH1cbiAgICB0aGlzLmNoYXJ0Ll9kYXRhQ2hhbmdlcy5wdXNoKFt0aGlzLmluZGV4LCAuLi5hcmdzXSk7XG4gIH1cblxuICBfb25EYXRhUHVzaCgpIHtcbiAgICBjb25zdCBjb3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgdGhpcy5fc3luYyhbJ19pbnNlcnRFbGVtZW50cycsIHRoaXMuZ2V0RGF0YXNldCgpLmRhdGEubGVuZ3RoIC0gY291bnQsIGNvdW50XSk7XG4gIH1cblxuICBfb25EYXRhUG9wKCkge1xuICAgIHRoaXMuX3N5bmMoWydfcmVtb3ZlRWxlbWVudHMnLCB0aGlzLl9jYWNoZWRNZXRhLmRhdGEubGVuZ3RoIC0gMSwgMV0pO1xuICB9XG5cbiAgX29uRGF0YVNoaWZ0KCkge1xuICAgIHRoaXMuX3N5bmMoWydfcmVtb3ZlRWxlbWVudHMnLCAwLCAxXSk7XG4gIH1cblxuICBfb25EYXRhU3BsaWNlKHN0YXJ0LCBjb3VudCkge1xuICAgIGlmIChjb3VudCkge1xuICAgICAgdGhpcy5fc3luYyhbJ19yZW1vdmVFbGVtZW50cycsIHN0YXJ0LCBjb3VudF0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdDb3VudCA9IGFyZ3VtZW50cy5sZW5ndGggLSAyO1xuICAgIGlmIChuZXdDb3VudCkge1xuICAgICAgdGhpcy5fc3luYyhbJ19pbnNlcnRFbGVtZW50cycsIHN0YXJ0LCBuZXdDb3VudF0pO1xuICAgIH1cbiAgfVxuXG4gIF9vbkRhdGFVbnNoaWZ0KCkge1xuICAgIHRoaXMuX3N5bmMoWydfaW5zZXJ0RWxlbWVudHMnLCAwLCBhcmd1bWVudHMubGVuZ3RoXSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgRGF0YXNldENvbnRyb2xsZXIgZnJvbSAnLi4vY29yZS9jb3JlLmRhdGFzZXRDb250cm9sbGVyLmpzJztcbmltcG9ydCB7XG4gIF9hcnJheVVuaXF1ZSwgaXNBcnJheSwgaXNOdWxsT3JVbmRlZixcbiAgdmFsdWVPckRlZmF1bHQsIHJlc29sdmVPYmplY3RLZXksIHNpZ24sIGRlZmluZWRcbn0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbmZ1bmN0aW9uIGdldEFsbFNjYWxlVmFsdWVzKHNjYWxlLCB0eXBlKSB7XG4gIGlmICghc2NhbGUuX2NhY2hlLiRiYXIpIHtcbiAgICBjb25zdCB2aXNpYmxlTWV0YXMgPSBzY2FsZS5nZXRNYXRjaGluZ1Zpc2libGVNZXRhcyh0eXBlKTtcbiAgICBsZXQgdmFsdWVzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMCwgaWxlbiA9IHZpc2libGVNZXRhcy5sZW5ndGg7IGkgPCBpbGVuOyBpKyspIHtcbiAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQodmlzaWJsZU1ldGFzW2ldLmNvbnRyb2xsZXIuZ2V0QWxsUGFyc2VkVmFsdWVzKHNjYWxlKSk7XG4gICAgfVxuICAgIHNjYWxlLl9jYWNoZS4kYmFyID0gX2FycmF5VW5pcXVlKHZhbHVlcy5zb3J0KChhLCBiKSA9PiBhIC0gYikpO1xuICB9XG4gIHJldHVybiBzY2FsZS5fY2FjaGUuJGJhcjtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgXCJvcHRpbWFsXCIgc2FtcGxlIHNpemUgdG8gbWFpbnRhaW4gYmFycyBlcXVhbGx5IHNpemVkIHdoaWxlIHByZXZlbnRpbmcgb3ZlcmxhcC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVNaW5TYW1wbGVTaXplKG1ldGEpIHtcbiAgY29uc3Qgc2NhbGUgPSBtZXRhLmlTY2FsZTtcbiAgY29uc3QgdmFsdWVzID0gZ2V0QWxsU2NhbGVWYWx1ZXMoc2NhbGUsIG1ldGEudHlwZSk7XG4gIGxldCBtaW4gPSBzY2FsZS5fbGVuZ3RoO1xuICBsZXQgaSwgaWxlbiwgY3VyciwgcHJldjtcbiAgY29uc3QgdXBkYXRlTWluQW5kUHJldiA9ICgpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gMzI3NjcgfHwgY3VyciA9PT0gLTMyNzY4KSB7XG4gICAgICAvLyBJZ25vcmUgdHJ1bmNhdGVkIHBpeGVsc1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZGVmaW5lZChwcmV2KSkge1xuICAgICAgLy8gY3VyciAtIHByZXYgPT09IDAgaXMgaWdub3JlZFxuICAgICAgbWluID0gTWF0aC5taW4obWluLCBNYXRoLmFicyhjdXJyIC0gcHJldikgfHwgbWluKTtcbiAgICB9XG4gICAgcHJldiA9IGN1cnI7XG4gIH07XG5cbiAgZm9yIChpID0gMCwgaWxlbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICBjdXJyID0gc2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZXNbaV0pO1xuICAgIHVwZGF0ZU1pbkFuZFByZXYoKTtcbiAgfVxuXG4gIHByZXYgPSB1bmRlZmluZWQ7XG4gIGZvciAoaSA9IDAsIGlsZW4gPSBzY2FsZS50aWNrcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICBjdXJyID0gc2NhbGUuZ2V0UGl4ZWxGb3JUaWNrKGkpO1xuICAgIHVwZGF0ZU1pbkFuZFByZXYoKTtcbiAgfVxuXG4gIHJldHVybiBtaW47XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYW4gXCJpZGVhbFwiIGNhdGVnb3J5IGJhc2VkIG9uIHRoZSBhYnNvbHV0ZSBiYXIgdGhpY2tuZXNzIG9yLCBpZiB1bmRlZmluZWQgb3IgbnVsbCxcbiAqIHVzZXMgdGhlIHNtYWxsZXN0IGludGVydmFsIChzZWUgY29tcHV0ZU1pblNhbXBsZVNpemUpIHRoYXQgcHJldmVudHMgYmFyIG92ZXJsYXBwaW5nLiBUaGlzXG4gKiBtb2RlIGN1cnJlbnRseSBhbHdheXMgZ2VuZXJhdGVzIGJhcnMgZXF1YWxseSBzaXplZCAodW50aWwgd2UgaW50cm9kdWNlIHNjcmlwdGFibGUgb3B0aW9ucz8pLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUZpdENhdGVnb3J5VHJhaXRzKGluZGV4LCBydWxlciwgb3B0aW9ucywgc3RhY2tDb3VudCkge1xuICBjb25zdCB0aGlja25lc3MgPSBvcHRpb25zLmJhclRoaWNrbmVzcztcbiAgbGV0IHNpemUsIHJhdGlvO1xuXG4gIGlmIChpc051bGxPclVuZGVmKHRoaWNrbmVzcykpIHtcbiAgICBzaXplID0gcnVsZXIubWluICogb3B0aW9ucy5jYXRlZ29yeVBlcmNlbnRhZ2U7XG4gICAgcmF0aW8gPSBvcHRpb25zLmJhclBlcmNlbnRhZ2U7XG4gIH0gZWxzZSB7XG4gICAgLy8gV2hlbiBiYXIgdGhpY2tuZXNzIGlzIGVuZm9yY2VkLCBjYXRlZ29yeSBhbmQgYmFyIHBlcmNlbnRhZ2VzIGFyZSBpZ25vcmVkLlxuICAgIC8vIE5vdGUoU0IpOiB3ZSBjb3VsZCBhZGQgc3VwcG9ydCBmb3IgcmVsYXRpdmUgYmFyIHRoaWNrbmVzcyAoZS5nLiBiYXJUaGlja25lc3M6ICc1MCUnKVxuICAgIC8vIGFuZCBkZXByZWNhdGUgYmFyUGVyY2VudGFnZSBzaW5jZSB0aGlzIHZhbHVlIGlzIGlnbm9yZWQgd2hlbiB0aGlja25lc3MgaXMgYWJzb2x1dGUuXG4gICAgc2l6ZSA9IHRoaWNrbmVzcyAqIHN0YWNrQ291bnQ7XG4gICAgcmF0aW8gPSAxO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjaHVuazogc2l6ZSAvIHN0YWNrQ291bnQsXG4gICAgcmF0aW8sXG4gICAgc3RhcnQ6IHJ1bGVyLnBpeGVsc1tpbmRleF0gLSAoc2l6ZSAvIDIpXG4gIH07XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYW4gXCJvcHRpbWFsXCIgY2F0ZWdvcnkgdGhhdCBnbG9iYWxseSBhcnJhbmdlcyBiYXJzIHNpZGUgYnkgc2lkZSAobm8gZ2FwIHdoZW5cbiAqIHBlcmNlbnRhZ2Ugb3B0aW9ucyBhcmUgMSksIGJhc2VkIG9uIHRoZSBwcmV2aW91cyBhbmQgZm9sbG93aW5nIGNhdGVnb3JpZXMuIFRoaXMgbW9kZVxuICogZ2VuZXJhdGVzIGJhcnMgd2l0aCBkaWZmZXJlbnQgd2lkdGhzIHdoZW4gZGF0YSBhcmUgbm90IGV2ZW5seSBzcGFjZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb21wdXRlRmxleENhdGVnb3J5VHJhaXRzKGluZGV4LCBydWxlciwgb3B0aW9ucywgc3RhY2tDb3VudCkge1xuICBjb25zdCBwaXhlbHMgPSBydWxlci5waXhlbHM7XG4gIGNvbnN0IGN1cnIgPSBwaXhlbHNbaW5kZXhdO1xuICBsZXQgcHJldiA9IGluZGV4ID4gMCA/IHBpeGVsc1tpbmRleCAtIDFdIDogbnVsbDtcbiAgbGV0IG5leHQgPSBpbmRleCA8IHBpeGVscy5sZW5ndGggLSAxID8gcGl4ZWxzW2luZGV4ICsgMV0gOiBudWxsO1xuICBjb25zdCBwZXJjZW50ID0gb3B0aW9ucy5jYXRlZ29yeVBlcmNlbnRhZ2U7XG5cbiAgaWYgKHByZXYgPT09IG51bGwpIHtcbiAgICAvLyBmaXJzdCBkYXRhOiBpdHMgc2l6ZSBpcyBkb3VibGUgYmFzZWQgb24gdGhlIG5leHQgcG9pbnQgb3IsXG4gICAgLy8gaWYgaXQncyBhbHNvIHRoZSBsYXN0IGRhdGEsIHdlIHVzZSB0aGUgc2NhbGUgc2l6ZS5cbiAgICBwcmV2ID0gY3VyciAtIChuZXh0ID09PSBudWxsID8gcnVsZXIuZW5kIC0gcnVsZXIuc3RhcnQgOiBuZXh0IC0gY3Vycik7XG4gIH1cblxuICBpZiAobmV4dCA9PT0gbnVsbCkge1xuICAgIC8vIGxhc3QgZGF0YTogaXRzIHNpemUgaXMgYWxzbyBkb3VibGUgYmFzZWQgb24gdGhlIHByZXZpb3VzIHBvaW50LlxuICAgIG5leHQgPSBjdXJyICsgY3VyciAtIHByZXY7XG4gIH1cblxuICBjb25zdCBzdGFydCA9IGN1cnIgLSAoY3VyciAtIE1hdGgubWluKHByZXYsIG5leHQpKSAvIDIgKiBwZXJjZW50O1xuICBjb25zdCBzaXplID0gTWF0aC5hYnMobmV4dCAtIHByZXYpIC8gMiAqIHBlcmNlbnQ7XG5cbiAgcmV0dXJuIHtcbiAgICBjaHVuazogc2l6ZSAvIHN0YWNrQ291bnQsXG4gICAgcmF0aW86IG9wdGlvbnMuYmFyUGVyY2VudGFnZSxcbiAgICBzdGFydFxuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZUZsb2F0QmFyKGVudHJ5LCBpdGVtLCB2U2NhbGUsIGkpIHtcbiAgY29uc3Qgc3RhcnRWYWx1ZSA9IHZTY2FsZS5wYXJzZShlbnRyeVswXSwgaSk7XG4gIGNvbnN0IGVuZFZhbHVlID0gdlNjYWxlLnBhcnNlKGVudHJ5WzFdLCBpKTtcbiAgY29uc3QgbWluID0gTWF0aC5taW4oc3RhcnRWYWx1ZSwgZW5kVmFsdWUpO1xuICBjb25zdCBtYXggPSBNYXRoLm1heChzdGFydFZhbHVlLCBlbmRWYWx1ZSk7XG4gIGxldCBiYXJTdGFydCA9IG1pbjtcbiAgbGV0IGJhckVuZCA9IG1heDtcblxuICBpZiAoTWF0aC5hYnMobWluKSA+IE1hdGguYWJzKG1heCkpIHtcbiAgICBiYXJTdGFydCA9IG1heDtcbiAgICBiYXJFbmQgPSBtaW47XG4gIH1cblxuICAvLyBTdG9yZSBgYmFyRW5kYCAoZnVydGhlc3QgYXdheSBmcm9tIG9yaWdpbikgYXMgcGFyc2VkIHZhbHVlLFxuICAvLyB0byBtYWtlIHN0YWNraW5nIHN0cmFpZ2h0IGZvcndhcmRcbiAgaXRlbVt2U2NhbGUuYXhpc10gPSBiYXJFbmQ7XG5cbiAgaXRlbS5fY3VzdG9tID0ge1xuICAgIGJhclN0YXJ0LFxuICAgIGJhckVuZCxcbiAgICBzdGFydDogc3RhcnRWYWx1ZSxcbiAgICBlbmQ6IGVuZFZhbHVlLFxuICAgIG1pbixcbiAgICBtYXhcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VWYWx1ZShlbnRyeSwgaXRlbSwgdlNjYWxlLCBpKSB7XG4gIGlmIChpc0FycmF5KGVudHJ5KSkge1xuICAgIHBhcnNlRmxvYXRCYXIoZW50cnksIGl0ZW0sIHZTY2FsZSwgaSk7XG4gIH0gZWxzZSB7XG4gICAgaXRlbVt2U2NhbGUuYXhpc10gPSB2U2NhbGUucGFyc2UoZW50cnksIGkpO1xuICB9XG4gIHJldHVybiBpdGVtO1xufVxuXG5mdW5jdGlvbiBwYXJzZUFycmF5T3JQcmltaXRpdmUobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KSB7XG4gIGNvbnN0IGlTY2FsZSA9IG1ldGEuaVNjYWxlO1xuICBjb25zdCB2U2NhbGUgPSBtZXRhLnZTY2FsZTtcbiAgY29uc3QgbGFiZWxzID0gaVNjYWxlLmdldExhYmVscygpO1xuICBjb25zdCBzaW5nbGVTY2FsZSA9IGlTY2FsZSA9PT0gdlNjYWxlO1xuICBjb25zdCBwYXJzZWQgPSBbXTtcbiAgbGV0IGksIGlsZW4sIGl0ZW0sIGVudHJ5O1xuXG4gIGZvciAoaSA9IHN0YXJ0LCBpbGVuID0gc3RhcnQgKyBjb3VudDsgaSA8IGlsZW47ICsraSkge1xuICAgIGVudHJ5ID0gZGF0YVtpXTtcbiAgICBpdGVtID0ge307XG4gICAgaXRlbVtpU2NhbGUuYXhpc10gPSBzaW5nbGVTY2FsZSB8fCBpU2NhbGUucGFyc2UobGFiZWxzW2ldLCBpKTtcbiAgICBwYXJzZWQucHVzaChwYXJzZVZhbHVlKGVudHJ5LCBpdGVtLCB2U2NhbGUsIGkpKTtcbiAgfVxuICByZXR1cm4gcGFyc2VkO1xufVxuXG5mdW5jdGlvbiBpc0Zsb2F0QmFyKGN1c3RvbSkge1xuICByZXR1cm4gY3VzdG9tICYmIGN1c3RvbS5iYXJTdGFydCAhPT0gdW5kZWZpbmVkICYmIGN1c3RvbS5iYXJFbmQgIT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gYmFyU2lnbihzaXplLCB2U2NhbGUsIGFjdHVhbEJhc2UpIHtcbiAgaWYgKHNpemUgIT09IDApIHtcbiAgICByZXR1cm4gc2lnbihzaXplKTtcbiAgfVxuICByZXR1cm4gKHZTY2FsZS5pc0hvcml6b250YWwoKSA/IDEgOiAtMSkgKiAodlNjYWxlLm1pbiA+PSBhY3R1YWxCYXNlID8gMSA6IC0xKTtcbn1cblxuZnVuY3Rpb24gYm9yZGVyUHJvcHMocHJvcGVydGllcykge1xuICBsZXQgcmV2ZXJzZSwgc3RhcnQsIGVuZCwgdG9wLCBib3R0b207XG4gIGlmIChwcm9wZXJ0aWVzLmhvcml6b250YWwpIHtcbiAgICByZXZlcnNlID0gcHJvcGVydGllcy5iYXNlID4gcHJvcGVydGllcy54O1xuICAgIHN0YXJ0ID0gJ2xlZnQnO1xuICAgIGVuZCA9ICdyaWdodCc7XG4gIH0gZWxzZSB7XG4gICAgcmV2ZXJzZSA9IHByb3BlcnRpZXMuYmFzZSA8IHByb3BlcnRpZXMueTtcbiAgICBzdGFydCA9ICdib3R0b20nO1xuICAgIGVuZCA9ICd0b3AnO1xuICB9XG4gIGlmIChyZXZlcnNlKSB7XG4gICAgdG9wID0gJ2VuZCc7XG4gICAgYm90dG9tID0gJ3N0YXJ0JztcbiAgfSBlbHNlIHtcbiAgICB0b3AgPSAnc3RhcnQnO1xuICAgIGJvdHRvbSA9ICdlbmQnO1xuICB9XG4gIHJldHVybiB7c3RhcnQsIGVuZCwgcmV2ZXJzZSwgdG9wLCBib3R0b219O1xufVxuXG5mdW5jdGlvbiBzZXRCb3JkZXJTa2lwcGVkKHByb3BlcnRpZXMsIG9wdGlvbnMsIHN0YWNrLCBpbmRleCkge1xuICBsZXQgZWRnZSA9IG9wdGlvbnMuYm9yZGVyU2tpcHBlZDtcbiAgY29uc3QgcmVzID0ge307XG5cbiAgaWYgKCFlZGdlKSB7XG4gICAgcHJvcGVydGllcy5ib3JkZXJTa2lwcGVkID0gcmVzO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChlZGdlID09PSB0cnVlKSB7XG4gICAgcHJvcGVydGllcy5ib3JkZXJTa2lwcGVkID0ge3RvcDogdHJ1ZSwgcmlnaHQ6IHRydWUsIGJvdHRvbTogdHJ1ZSwgbGVmdDogdHJ1ZX07XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qge3N0YXJ0LCBlbmQsIHJldmVyc2UsIHRvcCwgYm90dG9tfSA9IGJvcmRlclByb3BzKHByb3BlcnRpZXMpO1xuXG4gIGlmIChlZGdlID09PSAnbWlkZGxlJyAmJiBzdGFjaykge1xuICAgIHByb3BlcnRpZXMuZW5hYmxlQm9yZGVyUmFkaXVzID0gdHJ1ZTtcbiAgICBpZiAoKHN0YWNrLl90b3AgfHwgMCkgPT09IGluZGV4KSB7XG4gICAgICBlZGdlID0gdG9wO1xuICAgIH0gZWxzZSBpZiAoKHN0YWNrLl9ib3R0b20gfHwgMCkgPT09IGluZGV4KSB7XG4gICAgICBlZGdlID0gYm90dG9tO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNbcGFyc2VFZGdlKGJvdHRvbSwgc3RhcnQsIGVuZCwgcmV2ZXJzZSldID0gdHJ1ZTtcbiAgICAgIGVkZ2UgPSB0b3A7XG4gICAgfVxuICB9XG5cbiAgcmVzW3BhcnNlRWRnZShlZGdlLCBzdGFydCwgZW5kLCByZXZlcnNlKV0gPSB0cnVlO1xuICBwcm9wZXJ0aWVzLmJvcmRlclNraXBwZWQgPSByZXM7XG59XG5cbmZ1bmN0aW9uIHBhcnNlRWRnZShlZGdlLCBhLCBiLCByZXZlcnNlKSB7XG4gIGlmIChyZXZlcnNlKSB7XG4gICAgZWRnZSA9IHN3YXAoZWRnZSwgYSwgYik7XG4gICAgZWRnZSA9IHN0YXJ0RW5kKGVkZ2UsIGIsIGEpO1xuICB9IGVsc2Uge1xuICAgIGVkZ2UgPSBzdGFydEVuZChlZGdlLCBhLCBiKTtcbiAgfVxuICByZXR1cm4gZWRnZTtcbn1cblxuZnVuY3Rpb24gc3dhcChvcmlnLCB2MSwgdjIpIHtcbiAgcmV0dXJuIG9yaWcgPT09IHYxID8gdjIgOiBvcmlnID09PSB2MiA/IHYxIDogb3JpZztcbn1cblxuZnVuY3Rpb24gc3RhcnRFbmQodiwgc3RhcnQsIGVuZCkge1xuICByZXR1cm4gdiA9PT0gJ3N0YXJ0JyA/IHN0YXJ0IDogdiA9PT0gJ2VuZCcgPyBlbmQgOiB2O1xufVxuXG5mdW5jdGlvbiBzZXRJbmZsYXRlQW1vdW50KHByb3BlcnRpZXMsIHtpbmZsYXRlQW1vdW50fSwgcmF0aW8pIHtcbiAgcHJvcGVydGllcy5pbmZsYXRlQW1vdW50ID0gaW5mbGF0ZUFtb3VudCA9PT0gJ2F1dG8nXG4gICAgPyByYXRpbyA9PT0gMSA/IDAuMzMgOiAwXG4gICAgOiBpbmZsYXRlQW1vdW50O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXJDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXIge1xuXG4gIHN0YXRpYyBpZCA9ICdiYXInO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIGRlZmF1bHRzID0ge1xuICAgIGRhdGFzZXRFbGVtZW50VHlwZTogZmFsc2UsXG4gICAgZGF0YUVsZW1lbnRUeXBlOiAnYmFyJyxcblxuICAgIGNhdGVnb3J5UGVyY2VudGFnZTogMC44LFxuICAgIGJhclBlcmNlbnRhZ2U6IDAuOSxcbiAgICBncm91cGVkOiB0cnVlLFxuXG4gICAgYW5pbWF0aW9uczoge1xuICAgICAgbnVtYmVyczoge1xuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgcHJvcGVydGllczogWyd4JywgJ3knLCAnYmFzZScsICd3aWR0aCcsICdoZWlnaHQnXVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBvdmVycmlkZXMgPSB7XG4gICAgc2NhbGVzOiB7XG4gICAgICBfaW5kZXhfOiB7XG4gICAgICAgIHR5cGU6ICdjYXRlZ29yeScsXG4gICAgICAgIG9mZnNldDogdHJ1ZSxcbiAgICAgICAgZ3JpZDoge1xuICAgICAgICAgIG9mZnNldDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX3ZhbHVlXzoge1xuICAgICAgICB0eXBlOiAnbGluZWFyJyxcbiAgICAgICAgYmVnaW5BdFplcm86IHRydWUsXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG5cdCAqIE92ZXJyaWRpbmcgcHJpbWl0aXZlIGRhdGEgcGFyc2luZyBzaW5jZSB3ZSBzdXBwb3J0IG1peGVkIHByaW1pdGl2ZS9hcnJheVxuXHQgKiBkYXRhIGZvciBmbG9hdCBiYXJzXG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIHBhcnNlUHJpbWl0aXZlRGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICByZXR1cm4gcGFyc2VBcnJheU9yUHJpbWl0aXZlKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCk7XG4gIH1cblxuICAvKipcblx0ICogT3ZlcnJpZGluZyBhcnJheSBkYXRhIHBhcnNpbmcgc2luY2Ugd2Ugc3VwcG9ydCBtaXhlZCBwcmltaXRpdmUvYXJyYXlcblx0ICogZGF0YSBmb3IgZmxvYXQgYmFyc1xuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBwYXJzZUFycmF5RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICByZXR1cm4gcGFyc2VBcnJheU9yUHJpbWl0aXZlKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCk7XG4gIH1cblxuICAvKipcblx0ICogT3ZlcnJpZGluZyBvYmplY3QgZGF0YSBwYXJzaW5nIHNpbmNlIHdlIHN1cHBvcnQgbWl4ZWQgcHJpbWl0aXZlL2FycmF5XG5cdCAqIHZhbHVlLXNjYWxlIGRhdGEgZm9yIGZsb2F0IGJhcnNcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgcGFyc2VPYmplY3REYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgIGNvbnN0IHtpU2NhbGUsIHZTY2FsZX0gPSBtZXRhO1xuICAgIGNvbnN0IHt4QXhpc0tleSA9ICd4JywgeUF4aXNLZXkgPSAneSd9ID0gdGhpcy5fcGFyc2luZztcbiAgICBjb25zdCBpQXhpc0tleSA9IGlTY2FsZS5heGlzID09PSAneCcgPyB4QXhpc0tleSA6IHlBeGlzS2V5O1xuICAgIGNvbnN0IHZBeGlzS2V5ID0gdlNjYWxlLmF4aXMgPT09ICd4JyA/IHhBeGlzS2V5IDogeUF4aXNLZXk7XG4gICAgY29uc3QgcGFyc2VkID0gW107XG4gICAgbGV0IGksIGlsZW4sIGl0ZW0sIG9iajtcbiAgICBmb3IgKGkgPSBzdGFydCwgaWxlbiA9IHN0YXJ0ICsgY291bnQ7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIG9iaiA9IGRhdGFbaV07XG4gICAgICBpdGVtID0ge307XG4gICAgICBpdGVtW2lTY2FsZS5heGlzXSA9IGlTY2FsZS5wYXJzZShyZXNvbHZlT2JqZWN0S2V5KG9iaiwgaUF4aXNLZXkpLCBpKTtcbiAgICAgIHBhcnNlZC5wdXNoKHBhcnNlVmFsdWUocmVzb2x2ZU9iamVjdEtleShvYmosIHZBeGlzS2V5KSwgaXRlbSwgdlNjYWxlLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWQ7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgdXBkYXRlUmFuZ2VGcm9tUGFyc2VkKHJhbmdlLCBzY2FsZSwgcGFyc2VkLCBzdGFjaykge1xuICAgIHN1cGVyLnVwZGF0ZVJhbmdlRnJvbVBhcnNlZChyYW5nZSwgc2NhbGUsIHBhcnNlZCwgc3RhY2spO1xuICAgIGNvbnN0IGN1c3RvbSA9IHBhcnNlZC5fY3VzdG9tO1xuICAgIGlmIChjdXN0b20gJiYgc2NhbGUgPT09IHRoaXMuX2NhY2hlZE1ldGEudlNjYWxlKSB7XG4gICAgICAvLyBmbG9hdCBiYXI6IG9ubHkgb25lIGVuZCBvZiB0aGUgYmFyIGlzIGNvbnNpZGVyZWQgYnkgYHN1cGVyYFxuICAgICAgcmFuZ2UubWluID0gTWF0aC5taW4ocmFuZ2UubWluLCBjdXN0b20ubWluKTtcbiAgICAgIHJhbmdlLm1heCA9IE1hdGgubWF4KHJhbmdlLm1heCwgY3VzdG9tLm1heCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEByZXR1cm4ge251bWJlcnxib29sZWFufVxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRNYXhPdmVyZmxvdygpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRMYWJlbEFuZFZhbHVlKGluZGV4KSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3Qge2lTY2FsZSwgdlNjYWxlfSA9IG1ldGE7XG4gICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaW5kZXgpO1xuICAgIGNvbnN0IGN1c3RvbSA9IHBhcnNlZC5fY3VzdG9tO1xuICAgIGNvbnN0IHZhbHVlID0gaXNGbG9hdEJhcihjdXN0b20pXG4gICAgICA/ICdbJyArIGN1c3RvbS5zdGFydCArICcsICcgKyBjdXN0b20uZW5kICsgJ10nXG4gICAgICA6ICcnICsgdlNjYWxlLmdldExhYmVsRm9yVmFsdWUocGFyc2VkW3ZTY2FsZS5heGlzXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6ICcnICsgaVNjYWxlLmdldExhYmVsRm9yVmFsdWUocGFyc2VkW2lTY2FsZS5heGlzXSksXG4gICAgICB2YWx1ZVxuICAgIH07XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuZW5hYmxlT3B0aW9uU2hhcmluZyA9IHRydWU7XG5cbiAgICBzdXBlci5pbml0aWFsaXplKCk7XG5cbiAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBtZXRhLnN0YWNrID0gdGhpcy5nZXREYXRhc2V0KCkuc3RhY2s7XG4gIH1cblxuICB1cGRhdGUobW9kZSkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIHRoaXMudXBkYXRlRWxlbWVudHMobWV0YS5kYXRhLCAwLCBtZXRhLmRhdGEubGVuZ3RoLCBtb2RlKTtcbiAgfVxuXG4gIHVwZGF0ZUVsZW1lbnRzKGJhcnMsIHN0YXJ0LCBjb3VudCwgbW9kZSkge1xuICAgIGNvbnN0IHJlc2V0ID0gbW9kZSA9PT0gJ3Jlc2V0JztcbiAgICBjb25zdCB7aW5kZXgsIF9jYWNoZWRNZXRhOiB7dlNjYWxlfX0gPSB0aGlzO1xuICAgIGNvbnN0IGJhc2UgPSB2U2NhbGUuZ2V0QmFzZVBpeGVsKCk7XG4gICAgY29uc3QgaG9yaXpvbnRhbCA9IHZTY2FsZS5pc0hvcml6b250YWwoKTtcbiAgICBjb25zdCBydWxlciA9IHRoaXMuX2dldFJ1bGVyKCk7XG4gICAgY29uc3Qge3NoYXJlZE9wdGlvbnMsIGluY2x1ZGVPcHRpb25zfSA9IHRoaXMuX2dldFNoYXJlZE9wdGlvbnMoc3RhcnQsIG1vZGUpO1xuXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpKTtcbiAgICAgIGNvbnN0IHZwaXhlbHMgPSByZXNldCB8fCBpc051bGxPclVuZGVmKHBhcnNlZFt2U2NhbGUuYXhpc10pID8ge2Jhc2UsIGhlYWQ6IGJhc2V9IDogdGhpcy5fY2FsY3VsYXRlQmFyVmFsdWVQaXhlbHMoaSk7XG4gICAgICBjb25zdCBpcGl4ZWxzID0gdGhpcy5fY2FsY3VsYXRlQmFySW5kZXhQaXhlbHMoaSwgcnVsZXIpO1xuICAgICAgY29uc3Qgc3RhY2sgPSAocGFyc2VkLl9zdGFja3MgfHwge30pW3ZTY2FsZS5heGlzXTtcblxuICAgICAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICAgICAgaG9yaXpvbnRhbCxcbiAgICAgICAgYmFzZTogdnBpeGVscy5iYXNlLFxuICAgICAgICBlbmFibGVCb3JkZXJSYWRpdXM6ICFzdGFjayB8fCBpc0Zsb2F0QmFyKHBhcnNlZC5fY3VzdG9tKSB8fCAoaW5kZXggPT09IHN0YWNrLl90b3AgfHwgaW5kZXggPT09IHN0YWNrLl9ib3R0b20pLFxuICAgICAgICB4OiBob3Jpem9udGFsID8gdnBpeGVscy5oZWFkIDogaXBpeGVscy5jZW50ZXIsXG4gICAgICAgIHk6IGhvcml6b250YWwgPyBpcGl4ZWxzLmNlbnRlciA6IHZwaXhlbHMuaGVhZCxcbiAgICAgICAgaGVpZ2h0OiBob3Jpem9udGFsID8gaXBpeGVscy5zaXplIDogTWF0aC5hYnModnBpeGVscy5zaXplKSxcbiAgICAgICAgd2lkdGg6IGhvcml6b250YWwgPyBNYXRoLmFicyh2cGl4ZWxzLnNpemUpIDogaXBpeGVscy5zaXplXG4gICAgICB9O1xuXG4gICAgICBpZiAoaW5jbHVkZU9wdGlvbnMpIHtcbiAgICAgICAgcHJvcGVydGllcy5vcHRpb25zID0gc2hhcmVkT3B0aW9ucyB8fCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgYmFyc1tpXS5hY3RpdmUgPyAnYWN0aXZlJyA6IG1vZGUpO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHByb3BlcnRpZXMub3B0aW9ucyB8fCBiYXJzW2ldLm9wdGlvbnM7XG4gICAgICBzZXRCb3JkZXJTa2lwcGVkKHByb3BlcnRpZXMsIG9wdGlvbnMsIHN0YWNrLCBpbmRleCk7XG4gICAgICBzZXRJbmZsYXRlQW1vdW50KHByb3BlcnRpZXMsIG9wdGlvbnMsIHJ1bGVyLnJhdGlvKTtcbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudChiYXJzW2ldLCBpLCBwcm9wZXJ0aWVzLCBtb2RlKTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogUmV0dXJucyB0aGUgc3RhY2tzIGJhc2VkIG9uIGdyb3VwcyBhbmQgYmFyIHZpc2liaWxpdHkuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbbGFzdF0gLSBUaGUgZGF0YXNldCBpbmRleFxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2RhdGFJbmRleF0gLSBUaGUgZGF0YSBpbmRleCBvZiB0aGUgcnVsZXJcblx0ICogQHJldHVybnMge3N0cmluZ1tdfSBUaGUgbGlzdCBvZiBzdGFjayBJRHNcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9nZXRTdGFja3MobGFzdCwgZGF0YUluZGV4KSB7XG4gICAgY29uc3Qge2lTY2FsZX0gPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IG1ldGFzZXRzID0gaVNjYWxlLmdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKHRoaXMuX3R5cGUpXG4gICAgICAuZmlsdGVyKG1ldGEgPT4gbWV0YS5jb250cm9sbGVyLm9wdGlvbnMuZ3JvdXBlZCk7XG4gICAgY29uc3Qgc3RhY2tlZCA9IGlTY2FsZS5vcHRpb25zLnN0YWNrZWQ7XG4gICAgY29uc3Qgc3RhY2tzID0gW107XG5cbiAgICBjb25zdCBza2lwTnVsbCA9IChtZXRhKSA9PiB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBtZXRhLmNvbnRyb2xsZXIuZ2V0UGFyc2VkKGRhdGFJbmRleCk7XG4gICAgICBjb25zdCB2YWwgPSBwYXJzZWQgJiYgcGFyc2VkW21ldGEudlNjYWxlLmF4aXNdO1xuXG4gICAgICBpZiAoaXNOdWxsT3JVbmRlZih2YWwpIHx8IGlzTmFOKHZhbCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgbWV0YSBvZiBtZXRhc2V0cykge1xuICAgICAgaWYgKGRhdGFJbmRleCAhPT0gdW5kZWZpbmVkICYmIHNraXBOdWxsKG1ldGEpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBzdGFja2VkICAgfCBtZXRhLnN0YWNrXG4gICAgICAvLyAgICAgICAgICAgfCBmb3VuZCB8IG5vdCBmb3VuZCB8IHVuZGVmaW5lZFxuICAgICAgLy8gZmFsc2UgICAgIHwgICB4ICAgfCAgICAgeCAgICAgfCAgICAgeFxuICAgICAgLy8gdHJ1ZSAgICAgIHwgICAgICAgfCAgICAgeCAgICAgfFxuICAgICAgLy8gdW5kZWZpbmVkIHwgICAgICAgfCAgICAgeCAgICAgfCAgICAgeFxuICAgICAgaWYgKHN0YWNrZWQgPT09IGZhbHNlIHx8IHN0YWNrcy5pbmRleE9mKG1ldGEuc3RhY2spID09PSAtMSB8fFxuXHRcdFx0XHQoc3RhY2tlZCA9PT0gdW5kZWZpbmVkICYmIG1ldGEuc3RhY2sgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgc3RhY2tzLnB1c2gobWV0YS5zdGFjayk7XG4gICAgICB9XG4gICAgICBpZiAobWV0YS5pbmRleCA9PT0gbGFzdCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBObyBzdGFja3M/IHRoYXQgbWVhbnMgdGhlcmUgaXMgbm8gdmlzaWJsZSBkYXRhLiBMZXQncyBzdGlsbCBpbml0aWFsaXplIGFuIGB1bmRlZmluZWRgXG4gICAgLy8gc3RhY2sgd2hlcmUgcG9zc2libGUgaW52aXNpYmxlIGJhcnMgd2lsbCBiZSBsb2NhdGVkLlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGFydGpzL0NoYXJ0LmpzL2lzc3Vlcy82MzY4XG4gICAgaWYgKCFzdGFja3MubGVuZ3RoKSB7XG4gICAgICBzdGFja3MucHVzaCh1bmRlZmluZWQpO1xuICAgIH1cblxuICAgIHJldHVybiBzdGFja3M7XG4gIH1cblxuICAvKipcblx0ICogUmV0dXJucyB0aGUgZWZmZWN0aXZlIG51bWJlciBvZiBzdGFja3MgYmFzZWQgb24gZ3JvdXBzIGFuZCBiYXIgdmlzaWJpbGl0eS5cblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9nZXRTdGFja0NvdW50KGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFN0YWNrcyh1bmRlZmluZWQsIGluZGV4KS5sZW5ndGg7XG4gIH1cblxuICAvKipcblx0ICogUmV0dXJucyB0aGUgc3RhY2sgaW5kZXggZm9yIHRoZSBnaXZlbiBkYXRhc2V0IGJhc2VkIG9uIGdyb3VwcyBhbmQgYmFyIHZpc2liaWxpdHkuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbZGF0YXNldEluZGV4XSAtIFRoZSBkYXRhc2V0IGluZGV4XG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV0gLSBUaGUgc3RhY2sgbmFtZSB0byBmaW5kXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF0YUluZGV4XVxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgc3RhY2sgaW5kZXhcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9nZXRTdGFja0luZGV4KGRhdGFzZXRJbmRleCwgbmFtZSwgZGF0YUluZGV4KSB7XG4gICAgY29uc3Qgc3RhY2tzID0gdGhpcy5fZ2V0U3RhY2tzKGRhdGFzZXRJbmRleCwgZGF0YUluZGV4KTtcbiAgICBjb25zdCBpbmRleCA9IChuYW1lICE9PSB1bmRlZmluZWQpXG4gICAgICA/IHN0YWNrcy5pbmRleE9mKG5hbWUpXG4gICAgICA6IC0xOyAvLyBpbmRleE9mIHJldHVybnMgLTEgaWYgZWxlbWVudCBpcyBub3QgcHJlc2VudFxuXG4gICAgcmV0dXJuIChpbmRleCA9PT0gLTEpXG4gICAgICA/IHN0YWNrcy5sZW5ndGggLSAxXG4gICAgICA6IGluZGV4O1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0UnVsZXIoKSB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBjb25zdCBpU2NhbGUgPSBtZXRhLmlTY2FsZTtcbiAgICBjb25zdCBwaXhlbHMgPSBbXTtcbiAgICBsZXQgaSwgaWxlbjtcblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBtZXRhLmRhdGEubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgICBwaXhlbHMucHVzaChpU2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZSh0aGlzLmdldFBhcnNlZChpKVtpU2NhbGUuYXhpc10sIGkpKTtcbiAgICB9XG5cbiAgICBjb25zdCBiYXJUaGlja25lc3MgPSBvcHRzLmJhclRoaWNrbmVzcztcbiAgICBjb25zdCBtaW4gPSBiYXJUaGlja25lc3MgfHwgY29tcHV0ZU1pblNhbXBsZVNpemUobWV0YSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWluLFxuICAgICAgcGl4ZWxzLFxuICAgICAgc3RhcnQ6IGlTY2FsZS5fc3RhcnRQaXhlbCxcbiAgICAgIGVuZDogaVNjYWxlLl9lbmRQaXhlbCxcbiAgICAgIHN0YWNrQ291bnQ6IHRoaXMuX2dldFN0YWNrQ291bnQoKSxcbiAgICAgIHNjYWxlOiBpU2NhbGUsXG4gICAgICBncm91cGVkOiBvcHRzLmdyb3VwZWQsXG4gICAgICAvLyBiYXIgdGhpY2tuZXNzIHJhdGlvIHVzZWQgZm9yIG5vbi1ncm91cGVkIGJhcnNcbiAgICAgIHJhdGlvOiBiYXJUaGlja25lc3MgPyAxIDogb3B0cy5jYXRlZ29yeVBlcmNlbnRhZ2UgKiBvcHRzLmJhclBlcmNlbnRhZ2VcbiAgICB9O1xuICB9XG5cbiAgLyoqXG5cdCAqIE5vdGU6IHBpeGVsIHZhbHVlcyBhcmUgbm90IGNsYW1wZWQgdG8gdGhlIHNjYWxlIGFyZWEuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfY2FsY3VsYXRlQmFyVmFsdWVQaXhlbHMoaW5kZXgpIHtcbiAgICBjb25zdCB7X2NhY2hlZE1ldGE6IHt2U2NhbGUsIF9zdGFja2VkLCBpbmRleDogZGF0YXNldEluZGV4fSwgb3B0aW9uczoge2Jhc2U6IGJhc2VWYWx1ZSwgbWluQmFyTGVuZ3RofX0gPSB0aGlzO1xuICAgIGNvbnN0IGFjdHVhbEJhc2UgPSBiYXNlVmFsdWUgfHwgMDtcbiAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpbmRleCk7XG4gICAgY29uc3QgY3VzdG9tID0gcGFyc2VkLl9jdXN0b207XG4gICAgY29uc3QgZmxvYXRpbmcgPSBpc0Zsb2F0QmFyKGN1c3RvbSk7XG4gICAgbGV0IHZhbHVlID0gcGFyc2VkW3ZTY2FsZS5heGlzXTtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGxldCBsZW5ndGggPSBfc3RhY2tlZCA/IHRoaXMuYXBwbHlTdGFjayh2U2NhbGUsIHBhcnNlZCwgX3N0YWNrZWQpIDogdmFsdWU7XG4gICAgbGV0IGhlYWQsIHNpemU7XG5cbiAgICBpZiAobGVuZ3RoICE9PSB2YWx1ZSkge1xuICAgICAgc3RhcnQgPSBsZW5ndGggLSB2YWx1ZTtcbiAgICAgIGxlbmd0aCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGlmIChmbG9hdGluZykge1xuICAgICAgdmFsdWUgPSBjdXN0b20uYmFyU3RhcnQ7XG4gICAgICBsZW5ndGggPSBjdXN0b20uYmFyRW5kIC0gY3VzdG9tLmJhclN0YXJ0O1xuICAgICAgLy8gYmFycyBjcm9zc2luZyBvcmlnaW4gYXJlIG5vdCBzdGFja2VkXG4gICAgICBpZiAodmFsdWUgIT09IDAgJiYgc2lnbih2YWx1ZSkgIT09IHNpZ24oY3VzdG9tLmJhckVuZCkpIHtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgfVxuICAgICAgc3RhcnQgKz0gdmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRWYWx1ZSA9ICFpc051bGxPclVuZGVmKGJhc2VWYWx1ZSkgJiYgIWZsb2F0aW5nID8gYmFzZVZhbHVlIDogc3RhcnQ7XG4gICAgbGV0IGJhc2UgPSB2U2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShzdGFydFZhbHVlKTtcblxuICAgIGlmICh0aGlzLmNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGluZGV4KSkge1xuICAgICAgaGVhZCA9IHZTY2FsZS5nZXRQaXhlbEZvclZhbHVlKHN0YXJ0ICsgbGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2hlbiBub3QgdmlzaWJsZSwgbm8gaGVpZ2h0XG4gICAgICBoZWFkID0gYmFzZTtcbiAgICB9XG5cbiAgICBzaXplID0gaGVhZCAtIGJhc2U7XG5cbiAgICBpZiAoTWF0aC5hYnMoc2l6ZSkgPCBtaW5CYXJMZW5ndGgpIHtcbiAgICAgIHNpemUgPSBiYXJTaWduKHNpemUsIHZTY2FsZSwgYWN0dWFsQmFzZSkgKiBtaW5CYXJMZW5ndGg7XG4gICAgICBpZiAodmFsdWUgPT09IGFjdHVhbEJhc2UpIHtcbiAgICAgICAgYmFzZSAtPSBzaXplIC8gMjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0YXJ0UGl4ZWwgPSB2U2NhbGUuZ2V0UGl4ZWxGb3JEZWNpbWFsKDApO1xuICAgICAgY29uc3QgZW5kUGl4ZWwgPSB2U2NhbGUuZ2V0UGl4ZWxGb3JEZWNpbWFsKDEpO1xuICAgICAgY29uc3QgbWluID0gTWF0aC5taW4oc3RhcnRQaXhlbCwgZW5kUGl4ZWwpO1xuICAgICAgY29uc3QgbWF4ID0gTWF0aC5tYXgoc3RhcnRQaXhlbCwgZW5kUGl4ZWwpO1xuICAgICAgYmFzZSA9IE1hdGgubWF4KE1hdGgubWluKGJhc2UsIG1heCksIG1pbik7XG4gICAgICBoZWFkID0gYmFzZSArIHNpemU7XG5cbiAgICAgIGlmIChfc3RhY2tlZCAmJiAhZmxvYXRpbmcpIHtcbiAgICAgICAgLy8gdmlzdWFsIGRhdGEgY29vcmRpbmF0ZXMgYWZ0ZXIgYXBwbHlpbmcgbWluQmFyTGVuZ3RoXG4gICAgICAgIHBhcnNlZC5fc3RhY2tzW3ZTY2FsZS5heGlzXS5fdmlzdWFsVmFsdWVzW2RhdGFzZXRJbmRleF0gPSB2U2NhbGUuZ2V0VmFsdWVGb3JQaXhlbChoZWFkKSAtIHZTY2FsZS5nZXRWYWx1ZUZvclBpeGVsKGJhc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChiYXNlID09PSB2U2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShhY3R1YWxCYXNlKSkge1xuICAgICAgY29uc3QgaGFsZkdyaWQgPSBzaWduKHNpemUpICogdlNjYWxlLmdldExpbmVXaWR0aEZvclZhbHVlKGFjdHVhbEJhc2UpIC8gMjtcbiAgICAgIGJhc2UgKz0gaGFsZkdyaWQ7XG4gICAgICBzaXplIC09IGhhbGZHcmlkO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzaXplLFxuICAgICAgYmFzZSxcbiAgICAgIGhlYWQsXG4gICAgICBjZW50ZXI6IGhlYWQgKyBzaXplIC8gMlxuICAgIH07XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9jYWxjdWxhdGVCYXJJbmRleFBpeGVscyhpbmRleCwgcnVsZXIpIHtcbiAgICBjb25zdCBzY2FsZSA9IHJ1bGVyLnNjYWxlO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3Qgc2tpcE51bGwgPSBvcHRpb25zLnNraXBOdWxsO1xuICAgIGNvbnN0IG1heEJhclRoaWNrbmVzcyA9IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMubWF4QmFyVGhpY2tuZXNzLCBJbmZpbml0eSk7XG4gICAgbGV0IGNlbnRlciwgc2l6ZTtcbiAgICBpZiAocnVsZXIuZ3JvdXBlZCkge1xuICAgICAgY29uc3Qgc3RhY2tDb3VudCA9IHNraXBOdWxsID8gdGhpcy5fZ2V0U3RhY2tDb3VudChpbmRleCkgOiBydWxlci5zdGFja0NvdW50O1xuICAgICAgY29uc3QgcmFuZ2UgPSBvcHRpb25zLmJhclRoaWNrbmVzcyA9PT0gJ2ZsZXgnXG4gICAgICAgID8gY29tcHV0ZUZsZXhDYXRlZ29yeVRyYWl0cyhpbmRleCwgcnVsZXIsIG9wdGlvbnMsIHN0YWNrQ291bnQpXG4gICAgICAgIDogY29tcHV0ZUZpdENhdGVnb3J5VHJhaXRzKGluZGV4LCBydWxlciwgb3B0aW9ucywgc3RhY2tDb3VudCk7XG5cbiAgICAgIGNvbnN0IHN0YWNrSW5kZXggPSB0aGlzLl9nZXRTdGFja0luZGV4KHRoaXMuaW5kZXgsIHRoaXMuX2NhY2hlZE1ldGEuc3RhY2ssIHNraXBOdWxsID8gaW5kZXggOiB1bmRlZmluZWQpO1xuICAgICAgY2VudGVyID0gcmFuZ2Uuc3RhcnQgKyAocmFuZ2UuY2h1bmsgKiBzdGFja0luZGV4KSArIChyYW5nZS5jaHVuayAvIDIpO1xuICAgICAgc2l6ZSA9IE1hdGgubWluKG1heEJhclRoaWNrbmVzcywgcmFuZ2UuY2h1bmsgKiByYW5nZS5yYXRpbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvciBub24tZ3JvdXBlZCBiYXIgY2hhcnRzLCBleGFjdCBwaXhlbCB2YWx1ZXMgYXJlIHVzZWRcbiAgICAgIGNlbnRlciA9IHNjYWxlLmdldFBpeGVsRm9yVmFsdWUodGhpcy5nZXRQYXJzZWQoaW5kZXgpW3NjYWxlLmF4aXNdLCBpbmRleCk7XG4gICAgICBzaXplID0gTWF0aC5taW4obWF4QmFyVGhpY2tuZXNzLCBydWxlci5taW4gKiBydWxlci5yYXRpbyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJhc2U6IGNlbnRlciAtIHNpemUgLyAyLFxuICAgICAgaGVhZDogY2VudGVyICsgc2l6ZSAvIDIsXG4gICAgICBjZW50ZXIsXG4gICAgICBzaXplXG4gICAgfTtcbiAgfVxuXG4gIGRyYXcoKSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3QgdlNjYWxlID0gbWV0YS52U2NhbGU7XG4gICAgY29uc3QgcmVjdHMgPSBtZXRhLmRhdGE7XG4gICAgY29uc3QgaWxlbiA9IHJlY3RzLmxlbmd0aDtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgaWYgKHRoaXMuZ2V0UGFyc2VkKGkpW3ZTY2FsZS5heGlzXSAhPT0gbnVsbCkge1xuICAgICAgICByZWN0c1tpXS5kcmF3KHRoaXMuX2N0eCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbiIsICJpbXBvcnQgRGF0YXNldENvbnRyb2xsZXIgZnJvbSAnLi4vY29yZS9jb3JlLmRhdGFzZXRDb250cm9sbGVyLmpzJztcbmltcG9ydCB7dmFsdWVPckRlZmF1bHR9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb3JlLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnViYmxlQ29udHJvbGxlciBleHRlbmRzIERhdGFzZXRDb250cm9sbGVyIHtcblxuICBzdGF0aWMgaWQgPSAnYnViYmxlJztcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICBkYXRhc2V0RWxlbWVudFR5cGU6IGZhbHNlLFxuICAgIGRhdGFFbGVtZW50VHlwZTogJ3BvaW50JyxcblxuICAgIGFuaW1hdGlvbnM6IHtcbiAgICAgIG51bWJlcnM6IHtcbiAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgIHByb3BlcnRpZXM6IFsneCcsICd5JywgJ2JvcmRlcldpZHRoJywgJ3JhZGl1cyddXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIG92ZXJyaWRlcyA9IHtcbiAgICBzY2FsZXM6IHtcbiAgICAgIHg6IHtcbiAgICAgICAgdHlwZTogJ2xpbmVhcidcbiAgICAgIH0sXG4gICAgICB5OiB7XG4gICAgICAgIHR5cGU6ICdsaW5lYXInXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5lbmFibGVPcHRpb25TaGFyaW5nID0gdHJ1ZTtcbiAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gIH1cblxuICAvKipcblx0ICogUGFyc2UgYXJyYXkgb2YgcHJpbWl0aXZlIHZhbHVlc1xuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBwYXJzZVByaW1pdGl2ZURhdGEobWV0YSwgZGF0YSwgc3RhcnQsIGNvdW50KSB7XG4gICAgY29uc3QgcGFyc2VkID0gc3VwZXIucGFyc2VQcmltaXRpdmVEYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJzZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhcnNlZFtpXS5fY3VzdG9tID0gdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkgKyBzdGFydCkucmFkaXVzO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkO1xuICB9XG5cbiAgLyoqXG5cdCAqIFBhcnNlIGFycmF5IG9mIGFycmF5c1xuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBwYXJzZUFycmF5RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBzdXBlci5wYXJzZUFycmF5RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gZGF0YVtzdGFydCArIGldO1xuICAgICAgcGFyc2VkW2ldLl9jdXN0b20gPSB2YWx1ZU9yRGVmYXVsdChpdGVtWzJdLCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSArIHN0YXJ0KS5yYWRpdXMpO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkO1xuICB9XG5cbiAgLyoqXG5cdCAqIFBhcnNlIGFycmF5IG9mIG9iamVjdHNcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgcGFyc2VPYmplY3REYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHN1cGVyLnBhcnNlT2JqZWN0RGF0YShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gZGF0YVtzdGFydCArIGldO1xuICAgICAgcGFyc2VkW2ldLl9jdXN0b20gPSB2YWx1ZU9yRGVmYXVsdChpdGVtICYmIGl0ZW0uciAmJiAraXRlbS5yLCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSArIHN0YXJ0KS5yYWRpdXMpO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIGdldE1heE92ZXJmbG93KCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9jYWNoZWRNZXRhLmRhdGE7XG5cbiAgICBsZXQgbWF4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gZGF0YS5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBkYXRhW2ldLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkpKSAvIDIpO1xuICAgIH1cbiAgICByZXR1cm4gbWF4ID4gMCAmJiBtYXg7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IGxhYmVscyA9IHRoaXMuY2hhcnQuZGF0YS5sYWJlbHMgfHwgW107XG4gICAgY29uc3Qge3hTY2FsZSwgeVNjYWxlfSA9IG1ldGE7XG4gICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaW5kZXgpO1xuICAgIGNvbnN0IHggPSB4U2NhbGUuZ2V0TGFiZWxGb3JWYWx1ZShwYXJzZWQueCk7XG4gICAgY29uc3QgeSA9IHlTY2FsZS5nZXRMYWJlbEZvclZhbHVlKHBhcnNlZC55KTtcbiAgICBjb25zdCByID0gcGFyc2VkLl9jdXN0b207XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6IGxhYmVsc1tpbmRleF0gfHwgJycsXG4gICAgICB2YWx1ZTogJygnICsgeCArICcsICcgKyB5ICsgKHIgPyAnLCAnICsgciA6ICcnKSArICcpJ1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUobW9kZSkge1xuICAgIGNvbnN0IHBvaW50cyA9IHRoaXMuX2NhY2hlZE1ldGEuZGF0YTtcblxuICAgIC8vIFVwZGF0ZSBQb2ludHNcbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRzKHBvaW50cywgMCwgcG9pbnRzLmxlbmd0aCwgbW9kZSk7XG4gIH1cblxuICB1cGRhdGVFbGVtZW50cyhwb2ludHMsIHN0YXJ0LCBjb3VudCwgbW9kZSkge1xuICAgIGNvbnN0IHJlc2V0ID0gbW9kZSA9PT0gJ3Jlc2V0JztcbiAgICBjb25zdCB7aVNjYWxlLCB2U2NhbGV9ID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBjb25zdCB7c2hhcmVkT3B0aW9ucywgaW5jbHVkZU9wdGlvbnN9ID0gdGhpcy5fZ2V0U2hhcmVkT3B0aW9ucyhzdGFydCwgbW9kZSk7XG4gICAgY29uc3QgaUF4aXMgPSBpU2NhbGUuYXhpcztcbiAgICBjb25zdCB2QXhpcyA9IHZTY2FsZS5heGlzO1xuXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgIGNvbnN0IHBhcnNlZCA9ICFyZXNldCAmJiB0aGlzLmdldFBhcnNlZChpKTtcbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fTtcbiAgICAgIGNvbnN0IGlQaXhlbCA9IHByb3BlcnRpZXNbaUF4aXNdID0gcmVzZXQgPyBpU2NhbGUuZ2V0UGl4ZWxGb3JEZWNpbWFsKDAuNSkgOiBpU2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShwYXJzZWRbaUF4aXNdKTtcbiAgICAgIGNvbnN0IHZQaXhlbCA9IHByb3BlcnRpZXNbdkF4aXNdID0gcmVzZXQgPyB2U2NhbGUuZ2V0QmFzZVBpeGVsKCkgOiB2U2NhbGUuZ2V0UGl4ZWxGb3JWYWx1ZShwYXJzZWRbdkF4aXNdKTtcblxuICAgICAgcHJvcGVydGllcy5za2lwID0gaXNOYU4oaVBpeGVsKSB8fCBpc05hTih2UGl4ZWwpO1xuXG4gICAgICBpZiAoaW5jbHVkZU9wdGlvbnMpIHtcbiAgICAgICAgcHJvcGVydGllcy5vcHRpb25zID0gc2hhcmVkT3B0aW9ucyB8fCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgcG9pbnQuYWN0aXZlID8gJ2FjdGl2ZScgOiBtb2RlKTtcblxuICAgICAgICBpZiAocmVzZXQpIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzLm9wdGlvbnMucmFkaXVzID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQocG9pbnQsIGksIHByb3BlcnRpZXMsIG1vZGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHtzdHJpbmd9IFttb2RlXVxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICByZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGluZGV4LCBtb2RlKSB7XG4gICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaW5kZXgpO1xuICAgIGxldCB2YWx1ZXMgPSBzdXBlci5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGluZGV4LCBtb2RlKTtcblxuICAgIC8vIEluIGNhc2UgdmFsdWVzIHdlcmUgY2FjaGVkIChhbmQgdGh1cyBmcm96ZW4pLCB3ZSBuZWVkIHRvIGNsb25lIHRoZSB2YWx1ZXNcbiAgICBpZiAodmFsdWVzLiRzaGFyZWQpIHtcbiAgICAgIHZhbHVlcyA9IE9iamVjdC5hc3NpZ24oe30sIHZhbHVlcywgeyRzaGFyZWQ6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgLy8gQ3VzdG9tIHJhZGl1cyByZXNvbHV0aW9uXG4gICAgY29uc3QgcmFkaXVzID0gdmFsdWVzLnJhZGl1cztcbiAgICBpZiAobW9kZSAhPT0gJ2FjdGl2ZScpIHtcbiAgICAgIHZhbHVlcy5yYWRpdXMgPSAwO1xuICAgIH1cbiAgICB2YWx1ZXMucmFkaXVzICs9IHZhbHVlT3JEZWZhdWx0KHBhcnNlZCAmJiBwYXJzZWQuX2N1c3RvbSwgcmFkaXVzKTtcblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cbn1cbiIsICJpbXBvcnQgRGF0YXNldENvbnRyb2xsZXIgZnJvbSAnLi4vY29yZS9jb3JlLmRhdGFzZXRDb250cm9sbGVyLmpzJztcbmltcG9ydCB7aXNPYmplY3QsIHJlc29sdmVPYmplY3RLZXksIHRvUGVyY2VudGFnZSwgdG9EaW1lbnNpb24sIHZhbHVlT3JEZWZhdWx0fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5pbXBvcnQge2Zvcm1hdE51bWJlcn0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmludGwuanMnO1xuaW1wb3J0IHt0b1JhZGlhbnMsIFBJLCBUQVUsIEhBTEZfUEksIF9hbmdsZUJldHdlZW59IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5tYXRoLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vY29yZS9jb3JlLmNvbnRyb2xsZXIuanMnKS5kZWZhdWx0IH0gQ2hhcnRcbiAqL1xuXG5mdW5jdGlvbiBnZXRSYXRpb0FuZE9mZnNldChyb3RhdGlvbiwgY2lyY3VtZmVyZW5jZSwgY3V0b3V0KSB7XG4gIGxldCByYXRpb1ggPSAxO1xuICBsZXQgcmF0aW9ZID0gMTtcbiAgbGV0IG9mZnNldFggPSAwO1xuICBsZXQgb2Zmc2V0WSA9IDA7XG4gIC8vIElmIHRoZSBjaGFydCdzIGNpcmN1bWZlcmVuY2UgaXNuJ3QgYSBmdWxsIGNpcmNsZSwgY2FsY3VsYXRlIHNpemUgYXMgYSByYXRpbyBvZiB0aGUgd2lkdGgvaGVpZ2h0IG9mIHRoZSBhcmNcbiAgaWYgKGNpcmN1bWZlcmVuY2UgPCBUQVUpIHtcbiAgICBjb25zdCBzdGFydEFuZ2xlID0gcm90YXRpb247XG4gICAgY29uc3QgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgY2lyY3VtZmVyZW5jZTtcbiAgICBjb25zdCBzdGFydFggPSBNYXRoLmNvcyhzdGFydEFuZ2xlKTtcbiAgICBjb25zdCBzdGFydFkgPSBNYXRoLnNpbihzdGFydEFuZ2xlKTtcbiAgICBjb25zdCBlbmRYID0gTWF0aC5jb3MoZW5kQW5nbGUpO1xuICAgIGNvbnN0IGVuZFkgPSBNYXRoLnNpbihlbmRBbmdsZSk7XG4gICAgY29uc3QgY2FsY01heCA9IChhbmdsZSwgYSwgYikgPT4gX2FuZ2xlQmV0d2VlbihhbmdsZSwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIHRydWUpID8gMSA6IE1hdGgubWF4KGEsIGEgKiBjdXRvdXQsIGIsIGIgKiBjdXRvdXQpO1xuICAgIGNvbnN0IGNhbGNNaW4gPSAoYW5nbGUsIGEsIGIpID0+IF9hbmdsZUJldHdlZW4oYW5nbGUsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCB0cnVlKSA/IC0xIDogTWF0aC5taW4oYSwgYSAqIGN1dG91dCwgYiwgYiAqIGN1dG91dCk7XG4gICAgY29uc3QgbWF4WCA9IGNhbGNNYXgoMCwgc3RhcnRYLCBlbmRYKTtcbiAgICBjb25zdCBtYXhZID0gY2FsY01heChIQUxGX1BJLCBzdGFydFksIGVuZFkpO1xuICAgIGNvbnN0IG1pblggPSBjYWxjTWluKFBJLCBzdGFydFgsIGVuZFgpO1xuICAgIGNvbnN0IG1pblkgPSBjYWxjTWluKFBJICsgSEFMRl9QSSwgc3RhcnRZLCBlbmRZKTtcbiAgICByYXRpb1ggPSAobWF4WCAtIG1pblgpIC8gMjtcbiAgICByYXRpb1kgPSAobWF4WSAtIG1pblkpIC8gMjtcbiAgICBvZmZzZXRYID0gLShtYXhYICsgbWluWCkgLyAyO1xuICAgIG9mZnNldFkgPSAtKG1heFkgKyBtaW5ZKSAvIDI7XG4gIH1cbiAgcmV0dXJuIHtyYXRpb1gsIHJhdGlvWSwgb2Zmc2V0WCwgb2Zmc2V0WX07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERvdWdobnV0Q29udHJvbGxlciBleHRlbmRzIERhdGFzZXRDb250cm9sbGVyIHtcblxuICBzdGF0aWMgaWQgPSAnZG91Z2hudXQnO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIGRlZmF1bHRzID0ge1xuICAgIGRhdGFzZXRFbGVtZW50VHlwZTogZmFsc2UsXG4gICAgZGF0YUVsZW1lbnRUeXBlOiAnYXJjJyxcbiAgICBhbmltYXRpb246IHtcbiAgICAgIC8vIEJvb2xlYW4gLSBXaGV0aGVyIHdlIGFuaW1hdGUgdGhlIHJvdGF0aW9uIG9mIHRoZSBEb3VnaG51dFxuICAgICAgYW5pbWF0ZVJvdGF0ZTogdHJ1ZSxcbiAgICAgIC8vIEJvb2xlYW4gLSBXaGV0aGVyIHdlIGFuaW1hdGUgc2NhbGluZyB0aGUgRG91Z2hudXQgZnJvbSB0aGUgY2VudHJlXG4gICAgICBhbmltYXRlU2NhbGU6IGZhbHNlXG4gICAgfSxcbiAgICBhbmltYXRpb25zOiB7XG4gICAgICBudW1iZXJzOiB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbJ2NpcmN1bWZlcmVuY2UnLCAnZW5kQW5nbGUnLCAnaW5uZXJSYWRpdXMnLCAnb3V0ZXJSYWRpdXMnLCAnc3RhcnRBbmdsZScsICd4JywgJ3knLCAnb2Zmc2V0JywgJ2JvcmRlcldpZHRoJywgJ3NwYWNpbmcnXVxuICAgICAgfSxcbiAgICB9LFxuICAgIC8vIFRoZSBwZXJjZW50YWdlIG9mIHRoZSBjaGFydCB0aGF0IHdlIGN1dCBvdXQgb2YgdGhlIG1pZGRsZS5cbiAgICBjdXRvdXQ6ICc1MCUnLFxuXG4gICAgLy8gVGhlIHJvdGF0aW9uIG9mIHRoZSBjaGFydCwgd2hlcmUgdGhlIGZpcnN0IGRhdGEgYXJjIGJlZ2lucy5cbiAgICByb3RhdGlvbjogMCxcblxuICAgIC8vIFRoZSB0b3RhbCBjaXJjdW1mZXJlbmNlIG9mIHRoZSBjaGFydC5cbiAgICBjaXJjdW1mZXJlbmNlOiAzNjAsXG5cbiAgICAvLyBUaGUgb3V0ZXIgcmFkaXVzIG9mIHRoZSBjaGFydFxuICAgIHJhZGl1czogJzEwMCUnLFxuXG4gICAgLy8gU3BhY2luZyBiZXR3ZWVuIGFyY3NcbiAgICBzcGFjaW5nOiAwLFxuXG4gICAgaW5kZXhBeGlzOiAncicsXG4gIH07XG5cbiAgc3RhdGljIGRlc2NyaXB0b3JzID0ge1xuICAgIF9zY3JpcHRhYmxlOiAobmFtZSkgPT4gbmFtZSAhPT0gJ3NwYWNpbmcnLFxuICAgIF9pbmRleGFibGU6IChuYW1lKSA9PiBuYW1lICE9PSAnc3BhY2luZycgJiYgIW5hbWUuc3RhcnRzV2l0aCgnYm9yZGVyRGFzaCcpICYmICFuYW1lLnN0YXJ0c1dpdGgoJ2hvdmVyQm9yZGVyRGFzaCcpLFxuICB9O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIG92ZXJyaWRlcyA9IHtcbiAgICBhc3BlY3RSYXRpbzogMSxcblxuICAgIC8vIE5lZWQgdG8gb3ZlcnJpZGUgdGhlc2UgdG8gZ2l2ZSBhIG5pY2UgZGVmYXVsdFxuICAgIHBsdWdpbnM6IHtcbiAgICAgIGxlZ2VuZDoge1xuICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICBnZW5lcmF0ZUxhYmVscyhjaGFydCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNoYXJ0LmRhdGE7XG4gICAgICAgICAgICBpZiAoZGF0YS5sYWJlbHMubGVuZ3RoICYmIGRhdGEuZGF0YXNldHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHtsYWJlbHM6IHtwb2ludFN0eWxlLCBjb2xvcn19ID0gY2hhcnQubGVnZW5kLm9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubGFiZWxzLm1hcCgobGFiZWwsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoMCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBtZXRhLmNvbnRyb2xsZXIuZ2V0U3R5bGUoaSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgdGV4dDogbGFiZWwsXG4gICAgICAgICAgICAgICAgICBmaWxsU3R5bGU6IHN0eWxlLmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgICAgICAgIHN0cm9rZVN0eWxlOiBzdHlsZS5ib3JkZXJDb2xvcixcbiAgICAgICAgICAgICAgICAgIGZvbnRDb2xvcjogY29sb3IsXG4gICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IHN0eWxlLmJvcmRlcldpZHRoLFxuICAgICAgICAgICAgICAgICAgcG9pbnRTdHlsZTogcG9pbnRTdHlsZSxcbiAgICAgICAgICAgICAgICAgIGhpZGRlbjogIWNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGkpLFxuXG4gICAgICAgICAgICAgICAgICAvLyBFeHRyYSBkYXRhIHVzZWQgZm9yIHRvZ2dsaW5nIHRoZSBjb3JyZWN0IGl0ZW1cbiAgICAgICAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9uQ2xpY2soZSwgbGVnZW5kSXRlbSwgbGVnZW5kKSB7XG4gICAgICAgICAgbGVnZW5kLmNoYXJ0LnRvZ2dsZURhdGFWaXNpYmlsaXR5KGxlZ2VuZEl0ZW0uaW5kZXgpO1xuICAgICAgICAgIGxlZ2VuZC5jaGFydC51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdHJ1Y3RvcihjaGFydCwgZGF0YXNldEluZGV4KSB7XG4gICAgc3VwZXIoY2hhcnQsIGRhdGFzZXRJbmRleCk7XG5cbiAgICB0aGlzLmVuYWJsZU9wdGlvblNoYXJpbmcgPSB0cnVlO1xuICAgIHRoaXMuaW5uZXJSYWRpdXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vdXRlclJhZGl1cyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9mZnNldFggPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vZmZzZXRZID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgbGlua1NjYWxlcygpIHt9XG5cbiAgLyoqXG5cdCAqIE92ZXJyaWRlIGRhdGEgcGFyc2luZywgc2luY2Ugd2UgYXJlIG5vdCB1c2luZyBzY2FsZXNcblx0ICovXG4gIHBhcnNlKHN0YXJ0LCBjb3VudCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldERhdGFzZXQoKS5kYXRhO1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuXG4gICAgaWYgKHRoaXMuX3BhcnNpbmcgPT09IGZhbHNlKSB7XG4gICAgICBtZXRhLl9wYXJzZWQgPSBkYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZ2V0dGVyID0gKGkpID0+ICtkYXRhW2ldO1xuXG4gICAgICBpZiAoaXNPYmplY3QoZGF0YVtzdGFydF0pKSB7XG4gICAgICAgIGNvbnN0IHtrZXkgPSAndmFsdWUnfSA9IHRoaXMuX3BhcnNpbmc7XG4gICAgICAgIGdldHRlciA9IChpKSA9PiArcmVzb2x2ZU9iamVjdEtleShkYXRhW2ldLCBrZXkpO1xuICAgICAgfVxuXG4gICAgICBsZXQgaSwgaWxlbjtcbiAgICAgIGZvciAoaSA9IHN0YXJ0LCBpbGVuID0gc3RhcnQgKyBjb3VudDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgICBtZXRhLl9wYXJzZWRbaV0gPSBnZXR0ZXIoaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0Um90YXRpb24oKSB7XG4gICAgcmV0dXJuIHRvUmFkaWFucyh0aGlzLm9wdGlvbnMucm90YXRpb24gLSA5MCk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9nZXRDaXJjdW1mZXJlbmNlKCkge1xuICAgIHJldHVybiB0b1JhZGlhbnModGhpcy5vcHRpb25zLmNpcmN1bWZlcmVuY2UpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEdldCB0aGUgbWF4aW1hbCByb3RhdGlvbiAmIGNpcmN1bWZlcmVuY2UgZXh0ZW50c1xuXHQgKiBhY3Jvc3MgYWxsIHZpc2libGUgZGF0YXNldHMuXG5cdCAqL1xuICBfZ2V0Um90YXRpb25FeHRlbnRzKCkge1xuICAgIGxldCBtaW4gPSBUQVU7XG4gICAgbGV0IG1heCA9IC1UQVU7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0cy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKHRoaXMuY2hhcnQuaXNEYXRhc2V0VmlzaWJsZShpKSAmJiB0aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKGkpLnR5cGUgPT09IHRoaXMuX3R5cGUpIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IHRoaXMuY2hhcnQuZ2V0RGF0YXNldE1ldGEoaSkuY29udHJvbGxlcjtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBjb250cm9sbGVyLl9nZXRSb3RhdGlvbigpO1xuICAgICAgICBjb25zdCBjaXJjdW1mZXJlbmNlID0gY29udHJvbGxlci5fZ2V0Q2lyY3VtZmVyZW5jZSgpO1xuXG4gICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgcm90YXRpb24pO1xuICAgICAgICBtYXggPSBNYXRoLm1heChtYXgsIHJvdGF0aW9uICsgY2lyY3VtZmVyZW5jZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJvdGF0aW9uOiBtaW4sXG4gICAgICBjaXJjdW1mZXJlbmNlOiBtYXggLSBtaW4sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbW9kZVxuXHQgKi9cbiAgdXBkYXRlKG1vZGUpIHtcbiAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgY29uc3Qge2NoYXJ0QXJlYX0gPSBjaGFydDtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBjb25zdCBhcmNzID0gbWV0YS5kYXRhO1xuICAgIGNvbnN0IHNwYWNpbmcgPSB0aGlzLmdldE1heEJvcmRlcldpZHRoKCkgKyB0aGlzLmdldE1heE9mZnNldChhcmNzKSArIHRoaXMub3B0aW9ucy5zcGFjaW5nO1xuICAgIGNvbnN0IG1heFNpemUgPSBNYXRoLm1heCgoTWF0aC5taW4oY2hhcnRBcmVhLndpZHRoLCBjaGFydEFyZWEuaGVpZ2h0KSAtIHNwYWNpbmcpIC8gMiwgMCk7XG4gICAgY29uc3QgY3V0b3V0ID0gTWF0aC5taW4odG9QZXJjZW50YWdlKHRoaXMub3B0aW9ucy5jdXRvdXQsIG1heFNpemUpLCAxKTtcbiAgICBjb25zdCBjaGFydFdlaWdodCA9IHRoaXMuX2dldFJpbmdXZWlnaHQodGhpcy5pbmRleCk7XG5cbiAgICAvLyBDb21wdXRlIHRoZSBtYXhpbWFsIHJvdGF0aW9uICYgY2lyY3VtZmVyZW5jZSBsaW1pdHMuXG4gICAgLy8gSWYgd2Ugb25seSBjb25zaWRlciBvdXIgZGF0YXNldCwgdGhpcyBjYW4gY2F1c2UgcHJvYmxlbXMgd2hlbiB0d28gZGF0YXNldHNcbiAgICAvLyBhcmUgYm90aCBsZXNzIHRoYW4gYSBjaXJjbGUgd2l0aCBkaWZmZXJlbnQgcm90YXRpb25zIChzdGFydGluZyBhbmdsZXMpXG4gICAgY29uc3Qge2NpcmN1bWZlcmVuY2UsIHJvdGF0aW9ufSA9IHRoaXMuX2dldFJvdGF0aW9uRXh0ZW50cygpO1xuICAgIGNvbnN0IHtyYXRpb1gsIHJhdGlvWSwgb2Zmc2V0WCwgb2Zmc2V0WX0gPSBnZXRSYXRpb0FuZE9mZnNldChyb3RhdGlvbiwgY2lyY3VtZmVyZW5jZSwgY3V0b3V0KTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IChjaGFydEFyZWEud2lkdGggLSBzcGFjaW5nKSAvIHJhdGlvWDtcbiAgICBjb25zdCBtYXhIZWlnaHQgPSAoY2hhcnRBcmVhLmhlaWdodCAtIHNwYWNpbmcpIC8gcmF0aW9ZO1xuICAgIGNvbnN0IG1heFJhZGl1cyA9IE1hdGgubWF4KE1hdGgubWluKG1heFdpZHRoLCBtYXhIZWlnaHQpIC8gMiwgMCk7XG4gICAgY29uc3Qgb3V0ZXJSYWRpdXMgPSB0b0RpbWVuc2lvbih0aGlzLm9wdGlvbnMucmFkaXVzLCBtYXhSYWRpdXMpO1xuICAgIGNvbnN0IGlubmVyUmFkaXVzID0gTWF0aC5tYXgob3V0ZXJSYWRpdXMgKiBjdXRvdXQsIDApO1xuICAgIGNvbnN0IHJhZGl1c0xlbmd0aCA9IChvdXRlclJhZGl1cyAtIGlubmVyUmFkaXVzKSAvIHRoaXMuX2dldFZpc2libGVEYXRhc2V0V2VpZ2h0VG90YWwoKTtcbiAgICB0aGlzLm9mZnNldFggPSBvZmZzZXRYICogb3V0ZXJSYWRpdXM7XG4gICAgdGhpcy5vZmZzZXRZID0gb2Zmc2V0WSAqIG91dGVyUmFkaXVzO1xuXG4gICAgbWV0YS50b3RhbCA9IHRoaXMuY2FsY3VsYXRlVG90YWwoKTtcblxuICAgIHRoaXMub3V0ZXJSYWRpdXMgPSBvdXRlclJhZGl1cyAtIHJhZGl1c0xlbmd0aCAqIHRoaXMuX2dldFJpbmdXZWlnaHRPZmZzZXQodGhpcy5pbmRleCk7XG4gICAgdGhpcy5pbm5lclJhZGl1cyA9IE1hdGgubWF4KHRoaXMub3V0ZXJSYWRpdXMgLSByYWRpdXNMZW5ndGggKiBjaGFydFdlaWdodCwgMCk7XG5cbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRzKGFyY3MsIDAsIGFyY3MubGVuZ3RoLCBtb2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NpcmN1bWZlcmVuY2UoaSwgcmVzZXQpIHtcbiAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IGNpcmN1bWZlcmVuY2UgPSB0aGlzLl9nZXRDaXJjdW1mZXJlbmNlKCk7XG4gICAgaWYgKChyZXNldCAmJiBvcHRzLmFuaW1hdGlvbi5hbmltYXRlUm90YXRlKSB8fCAhdGhpcy5jaGFydC5nZXREYXRhVmlzaWJpbGl0eShpKSB8fCBtZXRhLl9wYXJzZWRbaV0gPT09IG51bGwgfHwgbWV0YS5kYXRhW2ldLmhpZGRlbikge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZUNpcmN1bWZlcmVuY2UobWV0YS5fcGFyc2VkW2ldICogY2lyY3VtZmVyZW5jZSAvIFRBVSk7XG4gIH1cblxuICB1cGRhdGVFbGVtZW50cyhhcmNzLCBzdGFydCwgY291bnQsIG1vZGUpIHtcbiAgICBjb25zdCByZXNldCA9IG1vZGUgPT09ICdyZXNldCc7XG4gICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgIGNvbnN0IGNoYXJ0QXJlYSA9IGNoYXJ0LmNoYXJ0QXJlYTtcbiAgICBjb25zdCBvcHRzID0gY2hhcnQub3B0aW9ucztcbiAgICBjb25zdCBhbmltYXRpb25PcHRzID0gb3B0cy5hbmltYXRpb247XG4gICAgY29uc3QgY2VudGVyWCA9IChjaGFydEFyZWEubGVmdCArIGNoYXJ0QXJlYS5yaWdodCkgLyAyO1xuICAgIGNvbnN0IGNlbnRlclkgPSAoY2hhcnRBcmVhLnRvcCArIGNoYXJ0QXJlYS5ib3R0b20pIC8gMjtcbiAgICBjb25zdCBhbmltYXRlU2NhbGUgPSByZXNldCAmJiBhbmltYXRpb25PcHRzLmFuaW1hdGVTY2FsZTtcbiAgICBjb25zdCBpbm5lclJhZGl1cyA9IGFuaW1hdGVTY2FsZSA/IDAgOiB0aGlzLmlubmVyUmFkaXVzO1xuICAgIGNvbnN0IG91dGVyUmFkaXVzID0gYW5pbWF0ZVNjYWxlID8gMCA6IHRoaXMub3V0ZXJSYWRpdXM7XG4gICAgY29uc3Qge3NoYXJlZE9wdGlvbnMsIGluY2x1ZGVPcHRpb25zfSA9IHRoaXMuX2dldFNoYXJlZE9wdGlvbnMoc3RhcnQsIG1vZGUpO1xuICAgIGxldCBzdGFydEFuZ2xlID0gdGhpcy5fZ2V0Um90YXRpb24oKTtcbiAgICBsZXQgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBzdGFydDsgKytpKSB7XG4gICAgICBzdGFydEFuZ2xlICs9IHRoaXMuX2NpcmN1bWZlcmVuY2UoaSwgcmVzZXQpO1xuICAgIH1cblxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgKytpKSB7XG4gICAgICBjb25zdCBjaXJjdW1mZXJlbmNlID0gdGhpcy5fY2lyY3VtZmVyZW5jZShpLCByZXNldCk7XG4gICAgICBjb25zdCBhcmMgPSBhcmNzW2ldO1xuICAgICAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICAgICAgeDogY2VudGVyWCArIHRoaXMub2Zmc2V0WCxcbiAgICAgICAgeTogY2VudGVyWSArIHRoaXMub2Zmc2V0WSxcbiAgICAgICAgc3RhcnRBbmdsZSxcbiAgICAgICAgZW5kQW5nbGU6IHN0YXJ0QW5nbGUgKyBjaXJjdW1mZXJlbmNlLFxuICAgICAgICBjaXJjdW1mZXJlbmNlLFxuICAgICAgICBvdXRlclJhZGl1cyxcbiAgICAgICAgaW5uZXJSYWRpdXNcbiAgICAgIH07XG4gICAgICBpZiAoaW5jbHVkZU9wdGlvbnMpIHtcbiAgICAgICAgcHJvcGVydGllcy5vcHRpb25zID0gc2hhcmVkT3B0aW9ucyB8fCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgYXJjLmFjdGl2ZSA/ICdhY3RpdmUnIDogbW9kZSk7XG4gICAgICB9XG4gICAgICBzdGFydEFuZ2xlICs9IGNpcmN1bWZlcmVuY2U7XG5cbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudChhcmMsIGksIHByb3BlcnRpZXMsIG1vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGNhbGN1bGF0ZVRvdGFsKCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IG1ldGFEYXRhID0gbWV0YS5kYXRhO1xuICAgIGxldCB0b3RhbCA9IDA7XG4gICAgbGV0IGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbWV0YURhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbWV0YS5fcGFyc2VkW2ldO1xuICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmICFpc05hTih2YWx1ZSkgJiYgdGhpcy5jaGFydC5nZXREYXRhVmlzaWJpbGl0eShpKSAmJiAhbWV0YURhdGFbaV0uaGlkZGVuKSB7XG4gICAgICAgIHRvdGFsICs9IE1hdGguYWJzKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG90YWw7XG4gIH1cblxuICBjYWxjdWxhdGVDaXJjdW1mZXJlbmNlKHZhbHVlKSB7XG4gICAgY29uc3QgdG90YWwgPSB0aGlzLl9jYWNoZWRNZXRhLnRvdGFsO1xuICAgIGlmICh0b3RhbCA+IDAgJiYgIWlzTmFOKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIFRBVSAqIChNYXRoLmFicyh2YWx1ZSkgLyB0b3RhbCk7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICBjb25zdCBsYWJlbHMgPSBjaGFydC5kYXRhLmxhYmVscyB8fCBbXTtcbiAgICBjb25zdCB2YWx1ZSA9IGZvcm1hdE51bWJlcihtZXRhLl9wYXJzZWRbaW5kZXhdLCBjaGFydC5vcHRpb25zLmxvY2FsZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6IGxhYmVsc1tpbmRleF0gfHwgJycsXG4gICAgICB2YWx1ZSxcbiAgICB9O1xuICB9XG5cbiAgZ2V0TWF4Qm9yZGVyV2lkdGgoYXJjcykge1xuICAgIGxldCBtYXggPSAwO1xuICAgIGNvbnN0IGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICBsZXQgaSwgaWxlbiwgbWV0YSwgY29udHJvbGxlciwgb3B0aW9ucztcblxuICAgIGlmICghYXJjcykge1xuICAgICAgLy8gRmluZCB0aGUgb3V0bW9zdCB2aXNpYmxlIGRhdGFzZXRcbiAgICAgIGZvciAoaSA9IDAsIGlsZW4gPSBjaGFydC5kYXRhLmRhdGFzZXRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgICBpZiAoY2hhcnQuaXNEYXRhc2V0VmlzaWJsZShpKSkge1xuICAgICAgICAgIG1ldGEgPSBjaGFydC5nZXREYXRhc2V0TWV0YShpKTtcbiAgICAgICAgICBhcmNzID0gbWV0YS5kYXRhO1xuICAgICAgICAgIGNvbnRyb2xsZXIgPSBtZXRhLmNvbnRyb2xsZXI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWFyY3MpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBhcmNzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgb3B0aW9ucyA9IGNvbnRyb2xsZXIucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpKTtcbiAgICAgIGlmIChvcHRpb25zLmJvcmRlckFsaWduICE9PSAnaW5uZXInKSB7XG4gICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgb3B0aW9ucy5ib3JkZXJXaWR0aCB8fCAwLCBvcHRpb25zLmhvdmVyQm9yZGVyV2lkdGggfHwgMCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG4gIH1cblxuICBnZXRNYXhPZmZzZXQoYXJjcykge1xuICAgIGxldCBtYXggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGlsZW4gPSBhcmNzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhpKTtcbiAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgb3B0aW9ucy5vZmZzZXQgfHwgMCwgb3B0aW9ucy5ob3Zlck9mZnNldCB8fCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBHZXQgcmFkaXVzIGxlbmd0aCBvZmZzZXQgb2YgdGhlIGRhdGFzZXQgaW4gcmVsYXRpb24gdG8gdGhlIHZpc2libGUgZGF0YXNldHMgd2VpZ2h0cy4gVGhpcyBhbGxvd3MgZGV0ZXJtaW5pbmcgdGhlIGlubmVyIGFuZCBvdXRlciByYWRpdXMgY29ycmVjdGx5XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0UmluZ1dlaWdodE9mZnNldChkYXRhc2V0SW5kZXgpIHtcbiAgICBsZXQgcmluZ1dlaWdodE9mZnNldCA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFzZXRJbmRleDsgKytpKSB7XG4gICAgICBpZiAodGhpcy5jaGFydC5pc0RhdGFzZXRWaXNpYmxlKGkpKSB7XG4gICAgICAgIHJpbmdXZWlnaHRPZmZzZXQgKz0gdGhpcy5fZ2V0UmluZ1dlaWdodChpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmluZ1dlaWdodE9mZnNldDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2dldFJpbmdXZWlnaHQoZGF0YXNldEluZGV4KSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KHZhbHVlT3JEZWZhdWx0KHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1tkYXRhc2V0SW5kZXhdLndlaWdodCwgMSksIDApO1xuICB9XG5cbiAgLyoqXG5cdCAqIFJldHVybnMgdGhlIHN1bSBvZiBhbGwgdmlzaWJsZSBkYXRhIHNldCB3ZWlnaHRzLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2dldFZpc2libGVEYXRhc2V0V2VpZ2h0VG90YWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFJpbmdXZWlnaHRPZmZzZXQodGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzLmxlbmd0aCkgfHwgMTtcbiAgfVxufVxuIiwgImltcG9ydCBEYXRhc2V0Q29udHJvbGxlciBmcm9tICcuLi9jb3JlL2NvcmUuZGF0YXNldENvbnRyb2xsZXIuanMnO1xuaW1wb3J0IHtpc051bGxPclVuZGVmfSBmcm9tICcuLi9oZWxwZXJzL2luZGV4LmpzJztcbmltcG9ydCB7aXNOdW1iZXJ9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5tYXRoLmpzJztcbmltcG9ydCB7X2dldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHMsIF9zY2FsZVJhbmdlc0NoYW5nZWR9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5leHRyYXMuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaW5lQ29udHJvbGxlciBleHRlbmRzIERhdGFzZXRDb250cm9sbGVyIHtcblxuICBzdGF0aWMgaWQgPSAnbGluZSc7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgZGF0YXNldEVsZW1lbnRUeXBlOiAnbGluZScsXG4gICAgZGF0YUVsZW1lbnRUeXBlOiAncG9pbnQnLFxuXG4gICAgc2hvd0xpbmU6IHRydWUsXG4gICAgc3BhbkdhcHM6IGZhbHNlLFxuICB9O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIG92ZXJyaWRlcyA9IHtcbiAgICBzY2FsZXM6IHtcbiAgICAgIF9pbmRleF86IHtcbiAgICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcbiAgICAgIH0sXG4gICAgICBfdmFsdWVfOiB7XG4gICAgICAgIHR5cGU6ICdsaW5lYXInLFxuICAgICAgfSxcbiAgICB9XG4gIH07XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLmVuYWJsZU9wdGlvblNoYXJpbmcgPSB0cnVlO1xuICAgIHRoaXMuc3VwcG9ydHNEZWNpbWF0aW9uID0gdHJ1ZTtcbiAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gIH1cblxuICB1cGRhdGUobW9kZSkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IHtkYXRhc2V0OiBsaW5lLCBkYXRhOiBwb2ludHMgPSBbXSwgX2RhdGFzZXR9ID0gbWV0YTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgYW5pbWF0aW9uc0Rpc2FibGVkID0gdGhpcy5jaGFydC5fYW5pbWF0aW9uc0Rpc2FibGVkO1xuICAgIGxldCB7c3RhcnQsIGNvdW50fSA9IF9nZXRTdGFydEFuZENvdW50T2ZWaXNpYmxlUG9pbnRzKG1ldGEsIHBvaW50cywgYW5pbWF0aW9uc0Rpc2FibGVkKTtcblxuICAgIHRoaXMuX2RyYXdTdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuX2RyYXdDb3VudCA9IGNvdW50O1xuXG4gICAgaWYgKF9zY2FsZVJhbmdlc0NoYW5nZWQobWV0YSkpIHtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgTGluZVxuICAgIGxpbmUuX2NoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICBsaW5lLl9kYXRhc2V0SW5kZXggPSB0aGlzLmluZGV4O1xuICAgIGxpbmUuX2RlY2ltYXRlZCA9ICEhX2RhdGFzZXQuX2RlY2ltYXRlZDtcbiAgICBsaW5lLnBvaW50cyA9IHBvaW50cztcblxuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnJlc29sdmVEYXRhc2V0RWxlbWVudE9wdGlvbnMobW9kZSk7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hvd0xpbmUpIHtcbiAgICAgIG9wdGlvbnMuYm9yZGVyV2lkdGggPSAwO1xuICAgIH1cbiAgICBvcHRpb25zLnNlZ21lbnQgPSB0aGlzLm9wdGlvbnMuc2VnbWVudDtcbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnQobGluZSwgdW5kZWZpbmVkLCB7XG4gICAgICBhbmltYXRlZDogIWFuaW1hdGlvbnNEaXNhYmxlZCxcbiAgICAgIG9wdGlvbnNcbiAgICB9LCBtb2RlKTtcblxuICAgIC8vIFVwZGF0ZSBQb2ludHNcbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRzKHBvaW50cywgc3RhcnQsIGNvdW50LCBtb2RlKTtcbiAgfVxuXG4gIHVwZGF0ZUVsZW1lbnRzKHBvaW50cywgc3RhcnQsIGNvdW50LCBtb2RlKSB7XG4gICAgY29uc3QgcmVzZXQgPSBtb2RlID09PSAncmVzZXQnO1xuICAgIGNvbnN0IHtpU2NhbGUsIHZTY2FsZSwgX3N0YWNrZWQsIF9kYXRhc2V0fSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3Qge3NoYXJlZE9wdGlvbnMsIGluY2x1ZGVPcHRpb25zfSA9IHRoaXMuX2dldFNoYXJlZE9wdGlvbnMoc3RhcnQsIG1vZGUpO1xuICAgIGNvbnN0IGlBeGlzID0gaVNjYWxlLmF4aXM7XG4gICAgY29uc3QgdkF4aXMgPSB2U2NhbGUuYXhpcztcbiAgICBjb25zdCB7c3BhbkdhcHMsIHNlZ21lbnR9ID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IG1heEdhcExlbmd0aCA9IGlzTnVtYmVyKHNwYW5HYXBzKSA/IHNwYW5HYXBzIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgIGNvbnN0IGRpcmVjdFVwZGF0ZSA9IHRoaXMuY2hhcnQuX2FuaW1hdGlvbnNEaXNhYmxlZCB8fCByZXNldCB8fCBtb2RlID09PSAnbm9uZSc7XG4gICAgY29uc3QgZW5kID0gc3RhcnQgKyBjb3VudDtcbiAgICBjb25zdCBwb2ludHNDb3VudCA9IHBvaW50cy5sZW5ndGg7XG4gICAgbGV0IHByZXZQYXJzZWQgPSBzdGFydCA+IDAgJiYgdGhpcy5nZXRQYXJzZWQoc3RhcnQgLSAxKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzQ291bnQ7ICsraSkge1xuICAgICAgY29uc3QgcG9pbnQgPSBwb2ludHNbaV07XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gZGlyZWN0VXBkYXRlID8gcG9pbnQgOiB7fTtcblxuICAgICAgaWYgKGkgPCBzdGFydCB8fCBpID49IGVuZCkge1xuICAgICAgICBwcm9wZXJ0aWVzLnNraXAgPSB0cnVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaSk7XG4gICAgICBjb25zdCBudWxsRGF0YSA9IGlzTnVsbE9yVW5kZWYocGFyc2VkW3ZBeGlzXSk7XG4gICAgICBjb25zdCBpUGl4ZWwgPSBwcm9wZXJ0aWVzW2lBeGlzXSA9IGlTY2FsZS5nZXRQaXhlbEZvclZhbHVlKHBhcnNlZFtpQXhpc10sIGkpO1xuICAgICAgY29uc3QgdlBpeGVsID0gcHJvcGVydGllc1t2QXhpc10gPSByZXNldCB8fCBudWxsRGF0YSA/IHZTY2FsZS5nZXRCYXNlUGl4ZWwoKSA6IHZTY2FsZS5nZXRQaXhlbEZvclZhbHVlKF9zdGFja2VkID8gdGhpcy5hcHBseVN0YWNrKHZTY2FsZSwgcGFyc2VkLCBfc3RhY2tlZCkgOiBwYXJzZWRbdkF4aXNdLCBpKTtcblxuICAgICAgcHJvcGVydGllcy5za2lwID0gaXNOYU4oaVBpeGVsKSB8fCBpc05hTih2UGl4ZWwpIHx8IG51bGxEYXRhO1xuICAgICAgcHJvcGVydGllcy5zdG9wID0gaSA+IDAgJiYgKE1hdGguYWJzKHBhcnNlZFtpQXhpc10gLSBwcmV2UGFyc2VkW2lBeGlzXSkpID4gbWF4R2FwTGVuZ3RoO1xuICAgICAgaWYgKHNlZ21lbnQpIHtcbiAgICAgICAgcHJvcGVydGllcy5wYXJzZWQgPSBwYXJzZWQ7XG4gICAgICAgIHByb3BlcnRpZXMucmF3ID0gX2RhdGFzZXQuZGF0YVtpXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGluY2x1ZGVPcHRpb25zKSB7XG4gICAgICAgIHByb3BlcnRpZXMub3B0aW9ucyA9IHNoYXJlZE9wdGlvbnMgfHwgdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGksIHBvaW50LmFjdGl2ZSA/ICdhY3RpdmUnIDogbW9kZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghZGlyZWN0VXBkYXRlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlRWxlbWVudChwb2ludCwgaSwgcHJvcGVydGllcywgbW9kZSk7XG4gICAgICB9XG5cbiAgICAgIHByZXZQYXJzZWQgPSBwYXJzZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIGdldE1heE92ZXJmbG93KCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IGRhdGFzZXQgPSBtZXRhLmRhdGFzZXQ7XG4gICAgY29uc3QgYm9yZGVyID0gZGF0YXNldC5vcHRpb25zICYmIGRhdGFzZXQub3B0aW9ucy5ib3JkZXJXaWR0aCB8fCAwO1xuICAgIGNvbnN0IGRhdGEgPSBtZXRhLmRhdGEgfHwgW107XG4gICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGJvcmRlcjtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RQb2ludCA9IGRhdGFbMF0uc2l6ZSh0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoMCkpO1xuICAgIGNvbnN0IGxhc3RQb2ludCA9IGRhdGFbZGF0YS5sZW5ndGggLSAxXS5zaXplKHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhkYXRhLmxlbmd0aCAtIDEpKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoYm9yZGVyLCBmaXJzdFBvaW50LCBsYXN0UG9pbnQpIC8gMjtcbiAgfVxuXG4gIGRyYXcoKSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgbWV0YS5kYXRhc2V0LnVwZGF0ZUNvbnRyb2xQb2ludHModGhpcy5jaGFydC5jaGFydEFyZWEsIG1ldGEuaVNjYWxlLmF4aXMpO1xuICAgIHN1cGVyLmRyYXcoKTtcbiAgfVxufVxuIiwgImltcG9ydCBEYXRhc2V0Q29udHJvbGxlciBmcm9tICcuLi9jb3JlL2NvcmUuZGF0YXNldENvbnRyb2xsZXIuanMnO1xuaW1wb3J0IHt0b1JhZGlhbnMsIFBJLCBmb3JtYXROdW1iZXIsIF9wYXJzZU9iamVjdERhdGFSYWRpYWxTY2FsZX0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvbGFyQXJlYUNvbnRyb2xsZXIgZXh0ZW5kcyBEYXRhc2V0Q29udHJvbGxlciB7XG5cbiAgc3RhdGljIGlkID0gJ3BvbGFyQXJlYSc7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgZGF0YUVsZW1lbnRUeXBlOiAnYXJjJyxcbiAgICBhbmltYXRpb246IHtcbiAgICAgIGFuaW1hdGVSb3RhdGU6IHRydWUsXG4gICAgICBhbmltYXRlU2NhbGU6IHRydWVcbiAgICB9LFxuICAgIGFuaW1hdGlvbnM6IHtcbiAgICAgIG51bWJlcnM6IHtcbiAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgIHByb3BlcnRpZXM6IFsneCcsICd5JywgJ3N0YXJ0QW5nbGUnLCAnZW5kQW5nbGUnLCAnaW5uZXJSYWRpdXMnLCAnb3V0ZXJSYWRpdXMnXVxuICAgICAgfSxcbiAgICB9LFxuICAgIGluZGV4QXhpczogJ3InLFxuICAgIHN0YXJ0QW5nbGU6IDAsXG4gIH07XG5cbiAgLyoqXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBzdGF0aWMgb3ZlcnJpZGVzID0ge1xuICAgIGFzcGVjdFJhdGlvOiAxLFxuXG4gICAgcGx1Z2luczoge1xuICAgICAgbGVnZW5kOiB7XG4gICAgICAgIGxhYmVsczoge1xuICAgICAgICAgIGdlbmVyYXRlTGFiZWxzKGNoYXJ0KSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gY2hhcnQuZGF0YTtcbiAgICAgICAgICAgIGlmIChkYXRhLmxhYmVscy5sZW5ndGggJiYgZGF0YS5kYXRhc2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29uc3Qge2xhYmVsczoge3BvaW50U3R5bGUsIGNvbG9yfX0gPSBjaGFydC5sZWdlbmQub3B0aW9ucztcblxuICAgICAgICAgICAgICByZXR1cm4gZGF0YS5sYWJlbHMubWFwKChsYWJlbCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBjaGFydC5nZXREYXRhc2V0TWV0YSgwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IG1ldGEuY29udHJvbGxlci5nZXRTdHlsZShpKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICB0ZXh0OiBsYWJlbCxcbiAgICAgICAgICAgICAgICAgIGZpbGxTdHlsZTogc3R5bGUuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgICAgICAgc3Ryb2tlU3R5bGU6IHN0eWxlLmJvcmRlckNvbG9yLFxuICAgICAgICAgICAgICAgICAgZm9udENvbG9yOiBjb2xvcixcbiAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogc3R5bGUuYm9yZGVyV2lkdGgsXG4gICAgICAgICAgICAgICAgICBwb2ludFN0eWxlOiBwb2ludFN0eWxlLFxuICAgICAgICAgICAgICAgICAgaGlkZGVuOiAhY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoaSksXG5cbiAgICAgICAgICAgICAgICAgIC8vIEV4dHJhIGRhdGEgdXNlZCBmb3IgdG9nZ2xpbmcgdGhlIGNvcnJlY3QgaXRlbVxuICAgICAgICAgICAgICAgICAgaW5kZXg6IGlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25DbGljayhlLCBsZWdlbmRJdGVtLCBsZWdlbmQpIHtcbiAgICAgICAgICBsZWdlbmQuY2hhcnQudG9nZ2xlRGF0YVZpc2liaWxpdHkobGVnZW5kSXRlbS5pbmRleCk7XG4gICAgICAgICAgbGVnZW5kLmNoYXJ0LnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNjYWxlczoge1xuICAgICAgcjoge1xuICAgICAgICB0eXBlOiAncmFkaWFsTGluZWFyJyxcbiAgICAgICAgYW5nbGVMaW5lczoge1xuICAgICAgICAgIGRpc3BsYXk6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGJlZ2luQXRaZXJvOiB0cnVlLFxuICAgICAgICBncmlkOiB7XG4gICAgICAgICAgY2lyY3VsYXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcG9pbnRMYWJlbHM6IHtcbiAgICAgICAgICBkaXNwbGF5OiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBzdGFydEFuZ2xlOiAwXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKGNoYXJ0LCBkYXRhc2V0SW5kZXgpIHtcbiAgICBzdXBlcihjaGFydCwgZGF0YXNldEluZGV4KTtcblxuICAgIHRoaXMuaW5uZXJSYWRpdXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vdXRlclJhZGl1cyA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGdldExhYmVsQW5kVmFsdWUoaW5kZXgpIHtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgY29uc3QgbGFiZWxzID0gY2hhcnQuZGF0YS5sYWJlbHMgfHwgW107XG4gICAgY29uc3QgdmFsdWUgPSBmb3JtYXROdW1iZXIobWV0YS5fcGFyc2VkW2luZGV4XS5yLCBjaGFydC5vcHRpb25zLmxvY2FsZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGFiZWw6IGxhYmVsc1tpbmRleF0gfHwgJycsXG4gICAgICB2YWx1ZSxcbiAgICB9O1xuICB9XG5cbiAgcGFyc2VPYmplY3REYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgIHJldHVybiBfcGFyc2VPYmplY3REYXRhUmFkaWFsU2NhbGUuYmluZCh0aGlzKShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICB9XG5cbiAgdXBkYXRlKG1vZGUpIHtcbiAgICBjb25zdCBhcmNzID0gdGhpcy5fY2FjaGVkTWV0YS5kYXRhO1xuXG4gICAgdGhpcy5fdXBkYXRlUmFkaXVzKCk7XG4gICAgdGhpcy51cGRhdGVFbGVtZW50cyhhcmNzLCAwLCBhcmNzLmxlbmd0aCwgbW9kZSk7XG4gIH1cblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0TWluTWF4KCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IHJhbmdlID0ge21pbjogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBtYXg6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWX07XG5cbiAgICBtZXRhLmRhdGEuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHRoaXMuZ2V0UGFyc2VkKGluZGV4KS5yO1xuXG4gICAgICBpZiAoIWlzTmFOKHBhcnNlZCkgJiYgdGhpcy5jaGFydC5nZXREYXRhVmlzaWJpbGl0eShpbmRleCkpIHtcbiAgICAgICAgaWYgKHBhcnNlZCA8IHJhbmdlLm1pbikge1xuICAgICAgICAgIHJhbmdlLm1pbiA9IHBhcnNlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJzZWQgPiByYW5nZS5tYXgpIHtcbiAgICAgICAgICByYW5nZS5tYXggPSBwYXJzZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByYW5nZTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX3VwZGF0ZVJhZGl1cygpIHtcbiAgICBjb25zdCBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgY29uc3QgY2hhcnRBcmVhID0gY2hhcnQuY2hhcnRBcmVhO1xuICAgIGNvbnN0IG9wdHMgPSBjaGFydC5vcHRpb25zO1xuICAgIGNvbnN0IG1pblNpemUgPSBNYXRoLm1pbihjaGFydEFyZWEucmlnaHQgLSBjaGFydEFyZWEubGVmdCwgY2hhcnRBcmVhLmJvdHRvbSAtIGNoYXJ0QXJlYS50b3ApO1xuXG4gICAgY29uc3Qgb3V0ZXJSYWRpdXMgPSBNYXRoLm1heChtaW5TaXplIC8gMiwgMCk7XG4gICAgY29uc3QgaW5uZXJSYWRpdXMgPSBNYXRoLm1heChvcHRzLmN1dG91dFBlcmNlbnRhZ2UgPyAob3V0ZXJSYWRpdXMgLyAxMDApICogKG9wdHMuY3V0b3V0UGVyY2VudGFnZSkgOiAxLCAwKTtcbiAgICBjb25zdCByYWRpdXNMZW5ndGggPSAob3V0ZXJSYWRpdXMgLSBpbm5lclJhZGl1cykgLyBjaGFydC5nZXRWaXNpYmxlRGF0YXNldENvdW50KCk7XG5cbiAgICB0aGlzLm91dGVyUmFkaXVzID0gb3V0ZXJSYWRpdXMgLSAocmFkaXVzTGVuZ3RoICogdGhpcy5pbmRleCk7XG4gICAgdGhpcy5pbm5lclJhZGl1cyA9IHRoaXMub3V0ZXJSYWRpdXMgLSByYWRpdXNMZW5ndGg7XG4gIH1cblxuICB1cGRhdGVFbGVtZW50cyhhcmNzLCBzdGFydCwgY291bnQsIG1vZGUpIHtcbiAgICBjb25zdCByZXNldCA9IG1vZGUgPT09ICdyZXNldCc7XG4gICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgIGNvbnN0IG9wdHMgPSBjaGFydC5vcHRpb25zO1xuICAgIGNvbnN0IGFuaW1hdGlvbk9wdHMgPSBvcHRzLmFuaW1hdGlvbjtcbiAgICBjb25zdCBzY2FsZSA9IHRoaXMuX2NhY2hlZE1ldGEuclNjYWxlO1xuICAgIGNvbnN0IGNlbnRlclggPSBzY2FsZS54Q2VudGVyO1xuICAgIGNvbnN0IGNlbnRlclkgPSBzY2FsZS55Q2VudGVyO1xuICAgIGNvbnN0IGRhdGFzZXRTdGFydEFuZ2xlID0gc2NhbGUuZ2V0SW5kZXhBbmdsZSgwKSAtIDAuNSAqIFBJO1xuICAgIGxldCBhbmdsZSA9IGRhdGFzZXRTdGFydEFuZ2xlO1xuICAgIGxldCBpO1xuXG4gICAgY29uc3QgZGVmYXVsdEFuZ2xlID0gMzYwIC8gdGhpcy5jb3VudFZpc2libGVFbGVtZW50cygpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHN0YXJ0OyArK2kpIHtcbiAgICAgIGFuZ2xlICs9IHRoaXMuX2NvbXB1dGVBbmdsZShpLCBtb2RlLCBkZWZhdWx0QW5nbGUpO1xuICAgIH1cbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IHN0YXJ0ICsgY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgYXJjID0gYXJjc1tpXTtcbiAgICAgIGxldCBzdGFydEFuZ2xlID0gYW5nbGU7XG4gICAgICBsZXQgZW5kQW5nbGUgPSBhbmdsZSArIHRoaXMuX2NvbXB1dGVBbmdsZShpLCBtb2RlLCBkZWZhdWx0QW5nbGUpO1xuICAgICAgbGV0IG91dGVyUmFkaXVzID0gY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoaSkgPyBzY2FsZS5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZSh0aGlzLmdldFBhcnNlZChpKS5yKSA6IDA7XG4gICAgICBhbmdsZSA9IGVuZEFuZ2xlO1xuXG4gICAgICBpZiAocmVzZXQpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbk9wdHMuYW5pbWF0ZVNjYWxlKSB7XG4gICAgICAgICAgb3V0ZXJSYWRpdXMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbmltYXRpb25PcHRzLmFuaW1hdGVSb3RhdGUpIHtcbiAgICAgICAgICBzdGFydEFuZ2xlID0gZW5kQW5nbGUgPSBkYXRhc2V0U3RhcnRBbmdsZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICB4OiBjZW50ZXJYLFxuICAgICAgICB5OiBjZW50ZXJZLFxuICAgICAgICBpbm5lclJhZGl1czogMCxcbiAgICAgICAgb3V0ZXJSYWRpdXMsXG4gICAgICAgIHN0YXJ0QW5nbGUsXG4gICAgICAgIGVuZEFuZ2xlLFxuICAgICAgICBvcHRpb25zOiB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgYXJjLmFjdGl2ZSA/ICdhY3RpdmUnIDogbW9kZSlcbiAgICAgIH07XG5cbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudChhcmMsIGksIHByb3BlcnRpZXMsIG1vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGNvdW50VmlzaWJsZUVsZW1lbnRzKCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGxldCBjb3VudCA9IDA7XG5cbiAgICBtZXRhLmRhdGEuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmICghaXNOYU4odGhpcy5nZXRQYXJzZWQoaW5kZXgpLnIpICYmIHRoaXMuY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoaW5kZXgpKSB7XG4gICAgICAgIGNvdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY291bnQ7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9jb21wdXRlQW5nbGUoaW5kZXgsIG1vZGUsIGRlZmF1bHRBbmdsZSkge1xuICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGluZGV4KVxuICAgICAgPyB0b1JhZGlhbnModGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGluZGV4LCBtb2RlKS5hbmdsZSB8fCBkZWZhdWx0QW5nbGUpXG4gICAgICA6IDA7XG4gIH1cbn1cbiIsICJpbXBvcnQgRG91Z2hudXRDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlci5kb3VnaG51dC5qcyc7XG5cbi8vIFBpZSBjaGFydHMgYXJlIERvdWdobnV0IGNoYXJ0IHdpdGggZGlmZmVyZW50IGRlZmF1bHRzXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQaWVDb250cm9sbGVyIGV4dGVuZHMgRG91Z2hudXRDb250cm9sbGVyIHtcblxuICBzdGF0aWMgaWQgPSAncGllJztcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiB0aGUgY2hhcnQgdGhhdCB3ZSBjdXQgb3V0IG9mIHRoZSBtaWRkbGUuXG4gICAgY3V0b3V0OiAwLFxuXG4gICAgLy8gVGhlIHJvdGF0aW9uIG9mIHRoZSBjaGFydCwgd2hlcmUgdGhlIGZpcnN0IGRhdGEgYXJjIGJlZ2lucy5cbiAgICByb3RhdGlvbjogMCxcblxuICAgIC8vIFRoZSB0b3RhbCBjaXJjdW1mZXJlbmNlIG9mIHRoZSBjaGFydC5cbiAgICBjaXJjdW1mZXJlbmNlOiAzNjAsXG5cbiAgICAvLyBUaGUgb3V0ZXIgcmFkaXVzIG9mIHRoZSBjaGFydFxuICAgIHJhZGl1czogJzEwMCUnXG4gIH07XG59XG4iLCAiaW1wb3J0IERhdGFzZXRDb250cm9sbGVyIGZyb20gJy4uL2NvcmUvY29yZS5kYXRhc2V0Q29udHJvbGxlci5qcyc7XG5pbXBvcnQge19wYXJzZU9iamVjdERhdGFSYWRpYWxTY2FsZX0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhZGFyQ29udHJvbGxlciBleHRlbmRzIERhdGFzZXRDb250cm9sbGVyIHtcblxuICBzdGF0aWMgaWQgPSAncmFkYXInO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIGRlZmF1bHRzID0ge1xuICAgIGRhdGFzZXRFbGVtZW50VHlwZTogJ2xpbmUnLFxuICAgIGRhdGFFbGVtZW50VHlwZTogJ3BvaW50JyxcbiAgICBpbmRleEF4aXM6ICdyJyxcbiAgICBzaG93TGluZTogdHJ1ZSxcbiAgICBlbGVtZW50czoge1xuICAgICAgbGluZToge1xuICAgICAgICBmaWxsOiAnc3RhcnQnXG4gICAgICB9XG4gICAgfSxcbiAgfTtcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBvdmVycmlkZXMgPSB7XG4gICAgYXNwZWN0UmF0aW86IDEsXG5cbiAgICBzY2FsZXM6IHtcbiAgICAgIHI6IHtcbiAgICAgICAgdHlwZTogJ3JhZGlhbExpbmVhcicsXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRMYWJlbEFuZFZhbHVlKGluZGV4KSB7XG4gICAgY29uc3QgdlNjYWxlID0gdGhpcy5fY2FjaGVkTWV0YS52U2NhbGU7XG4gICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaW5kZXgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsOiB2U2NhbGUuZ2V0TGFiZWxzKClbaW5kZXhdLFxuICAgICAgdmFsdWU6ICcnICsgdlNjYWxlLmdldExhYmVsRm9yVmFsdWUocGFyc2VkW3ZTY2FsZS5heGlzXSlcbiAgICB9O1xuICB9XG5cbiAgcGFyc2VPYmplY3REYXRhKG1ldGEsIGRhdGEsIHN0YXJ0LCBjb3VudCkge1xuICAgIHJldHVybiBfcGFyc2VPYmplY3REYXRhUmFkaWFsU2NhbGUuYmluZCh0aGlzKShtZXRhLCBkYXRhLCBzdGFydCwgY291bnQpO1xuICB9XG5cbiAgdXBkYXRlKG1vZGUpIHtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBjb25zdCBsaW5lID0gbWV0YS5kYXRhc2V0O1xuICAgIGNvbnN0IHBvaW50cyA9IG1ldGEuZGF0YSB8fCBbXTtcbiAgICBjb25zdCBsYWJlbHMgPSBtZXRhLmlTY2FsZS5nZXRMYWJlbHMoKTtcblxuICAgIC8vIFVwZGF0ZSBMaW5lXG4gICAgbGluZS5wb2ludHMgPSBwb2ludHM7XG4gICAgLy8gSW4gcmVzaXplIG1vZGUgb25seSBwb2ludCBsb2NhdGlvbnMgY2hhbmdlLCBzbyBubyBuZWVkIHRvIHNldCB0aGUgcG9pbnRzIG9yIG9wdGlvbnMuXG4gICAgaWYgKG1vZGUgIT09ICdyZXNpemUnKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5yZXNvbHZlRGF0YXNldEVsZW1lbnRPcHRpb25zKG1vZGUpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hvd0xpbmUpIHtcbiAgICAgICAgb3B0aW9ucy5ib3JkZXJXaWR0aCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICAgIF9sb29wOiB0cnVlLFxuICAgICAgICBfZnVsbExvb3A6IGxhYmVscy5sZW5ndGggPT09IHBvaW50cy5sZW5ndGgsXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIH07XG5cbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudChsaW5lLCB1bmRlZmluZWQsIHByb3BlcnRpZXMsIG1vZGUpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBQb2ludHNcbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRzKHBvaW50cywgMCwgcG9pbnRzLmxlbmd0aCwgbW9kZSk7XG4gIH1cblxuICB1cGRhdGVFbGVtZW50cyhwb2ludHMsIHN0YXJ0LCBjb3VudCwgbW9kZSkge1xuICAgIGNvbnN0IHNjYWxlID0gdGhpcy5fY2FjaGVkTWV0YS5yU2NhbGU7XG4gICAgY29uc3QgcmVzZXQgPSBtb2RlID09PSAncmVzZXQnO1xuXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgc3RhcnQgKyBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgcG9pbnQuYWN0aXZlID8gJ2FjdGl2ZScgOiBtb2RlKTtcbiAgICAgIGNvbnN0IHBvaW50UG9zaXRpb24gPSBzY2FsZS5nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUoaSwgdGhpcy5nZXRQYXJzZWQoaSkucik7XG5cbiAgICAgIGNvbnN0IHggPSByZXNldCA/IHNjYWxlLnhDZW50ZXIgOiBwb2ludFBvc2l0aW9uLng7XG4gICAgICBjb25zdCB5ID0gcmVzZXQgPyBzY2FsZS55Q2VudGVyIDogcG9pbnRQb3NpdGlvbi55O1xuXG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgICAgICBhbmdsZTogcG9pbnRQb3NpdGlvbi5hbmdsZSxcbiAgICAgICAgc2tpcDogaXNOYU4oeCkgfHwgaXNOYU4oeSksXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIH07XG5cbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudChwb2ludCwgaSwgcHJvcGVydGllcywgbW9kZSk7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IERhdGFzZXRDb250cm9sbGVyIGZyb20gJy4uL2NvcmUvY29yZS5kYXRhc2V0Q29udHJvbGxlci5qcyc7XG5pbXBvcnQge2lzTnVsbE9yVW5kZWZ9IGZyb20gJy4uL2hlbHBlcnMvaW5kZXguanMnO1xuaW1wb3J0IHtpc051bWJlcn0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLm1hdGguanMnO1xuaW1wb3J0IHtfZ2V0U3RhcnRBbmRDb3VudE9mVmlzaWJsZVBvaW50cywgX3NjYWxlUmFuZ2VzQ2hhbmdlZH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmV4dHJhcy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjYXR0ZXJDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXIge1xuXG4gIHN0YXRpYyBpZCA9ICdzY2F0dGVyJztcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICBkYXRhc2V0RWxlbWVudFR5cGU6IGZhbHNlLFxuICAgIGRhdGFFbGVtZW50VHlwZTogJ3BvaW50JyxcbiAgICBzaG93TGluZTogZmFsc2UsXG4gICAgZmlsbDogZmFsc2VcbiAgfTtcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBvdmVycmlkZXMgPSB7XG5cbiAgICBpbnRlcmFjdGlvbjoge1xuICAgICAgbW9kZTogJ3BvaW50J1xuICAgIH0sXG5cbiAgICBzY2FsZXM6IHtcbiAgICAgIHg6IHtcbiAgICAgICAgdHlwZTogJ2xpbmVhcidcbiAgICAgIH0sXG4gICAgICB5OiB7XG4gICAgICAgIHR5cGU6ICdsaW5lYXInXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRMYWJlbEFuZFZhbHVlKGluZGV4KSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuX2NhY2hlZE1ldGE7XG4gICAgY29uc3QgbGFiZWxzID0gdGhpcy5jaGFydC5kYXRhLmxhYmVscyB8fCBbXTtcbiAgICBjb25zdCB7eFNjYWxlLCB5U2NhbGV9ID0gbWV0YTtcbiAgICBjb25zdCBwYXJzZWQgPSB0aGlzLmdldFBhcnNlZChpbmRleCk7XG4gICAgY29uc3QgeCA9IHhTY2FsZS5nZXRMYWJlbEZvclZhbHVlKHBhcnNlZC54KTtcbiAgICBjb25zdCB5ID0geVNjYWxlLmdldExhYmVsRm9yVmFsdWUocGFyc2VkLnkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsOiBsYWJlbHNbaW5kZXhdIHx8ICcnLFxuICAgICAgdmFsdWU6ICcoJyArIHggKyAnLCAnICsgeSArICcpJ1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUobW9kZSkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IHtkYXRhOiBwb2ludHMgPSBbXX0gPSBtZXRhO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBhbmltYXRpb25zRGlzYWJsZWQgPSB0aGlzLmNoYXJ0Ll9hbmltYXRpb25zRGlzYWJsZWQ7XG4gICAgbGV0IHtzdGFydCwgY291bnR9ID0gX2dldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHMobWV0YSwgcG9pbnRzLCBhbmltYXRpb25zRGlzYWJsZWQpO1xuXG4gICAgdGhpcy5fZHJhd1N0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5fZHJhd0NvdW50ID0gY291bnQ7XG5cbiAgICBpZiAoX3NjYWxlUmFuZ2VzQ2hhbmdlZChtZXRhKSkge1xuICAgICAgc3RhcnQgPSAwO1xuICAgICAgY291bnQgPSBwb2ludHMubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2hvd0xpbmUpIHtcblxuICAgICAgY29uc3Qge2RhdGFzZXQ6IGxpbmUsIF9kYXRhc2V0fSA9IG1ldGE7XG5cbiAgICAgIC8vIFVwZGF0ZSBMaW5lXG4gICAgICBsaW5lLl9jaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICBsaW5lLl9kYXRhc2V0SW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgbGluZS5fZGVjaW1hdGVkID0gISFfZGF0YXNldC5fZGVjaW1hdGVkO1xuICAgICAgbGluZS5wb2ludHMgPSBwb2ludHM7XG5cbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnJlc29sdmVEYXRhc2V0RWxlbWVudE9wdGlvbnMobW9kZSk7XG4gICAgICBvcHRpb25zLnNlZ21lbnQgPSB0aGlzLm9wdGlvbnMuc2VnbWVudDtcbiAgICAgIHRoaXMudXBkYXRlRWxlbWVudChsaW5lLCB1bmRlZmluZWQsIHtcbiAgICAgICAgYW5pbWF0ZWQ6ICFhbmltYXRpb25zRGlzYWJsZWQsXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIH0sIG1vZGUpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBQb2ludHNcbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRzKHBvaW50cywgc3RhcnQsIGNvdW50LCBtb2RlKTtcbiAgfVxuXG4gIGFkZEVsZW1lbnRzKCkge1xuICAgIGNvbnN0IHtzaG93TGluZX0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBpZiAoIXRoaXMuZGF0YXNldEVsZW1lbnRUeXBlICYmIHNob3dMaW5lKSB7XG4gICAgICB0aGlzLmRhdGFzZXRFbGVtZW50VHlwZSA9IHRoaXMuY2hhcnQucmVnaXN0cnkuZ2V0RWxlbWVudCgnbGluZScpO1xuICAgIH1cblxuICAgIHN1cGVyLmFkZEVsZW1lbnRzKCk7XG4gIH1cblxuICB1cGRhdGVFbGVtZW50cyhwb2ludHMsIHN0YXJ0LCBjb3VudCwgbW9kZSkge1xuICAgIGNvbnN0IHJlc2V0ID0gbW9kZSA9PT0gJ3Jlc2V0JztcbiAgICBjb25zdCB7aVNjYWxlLCB2U2NhbGUsIF9zdGFja2VkLCBfZGF0YXNldH0gPSB0aGlzLl9jYWNoZWRNZXRhO1xuICAgIGNvbnN0IGZpcnN0T3B0cyA9IHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhzdGFydCwgbW9kZSk7XG4gICAgY29uc3Qgc2hhcmVkT3B0aW9ucyA9IHRoaXMuZ2V0U2hhcmVkT3B0aW9ucyhmaXJzdE9wdHMpO1xuICAgIGNvbnN0IGluY2x1ZGVPcHRpb25zID0gdGhpcy5pbmNsdWRlT3B0aW9ucyhtb2RlLCBzaGFyZWRPcHRpb25zKTtcbiAgICBjb25zdCBpQXhpcyA9IGlTY2FsZS5heGlzO1xuICAgIGNvbnN0IHZBeGlzID0gdlNjYWxlLmF4aXM7XG4gICAgY29uc3Qge3NwYW5HYXBzLCBzZWdtZW50fSA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBtYXhHYXBMZW5ndGggPSBpc051bWJlcihzcGFuR2FwcykgPyBzcGFuR2FwcyA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBjb25zdCBkaXJlY3RVcGRhdGUgPSB0aGlzLmNoYXJ0Ll9hbmltYXRpb25zRGlzYWJsZWQgfHwgcmVzZXQgfHwgbW9kZSA9PT0gJ25vbmUnO1xuICAgIGxldCBwcmV2UGFyc2VkID0gc3RhcnQgPiAwICYmIHRoaXMuZ2V0UGFyc2VkKHN0YXJ0IC0gMSk7XG5cbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBzdGFydCArIGNvdW50OyArK2kpIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgY29uc3QgcGFyc2VkID0gdGhpcy5nZXRQYXJzZWQoaSk7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gZGlyZWN0VXBkYXRlID8gcG9pbnQgOiB7fTtcbiAgICAgIGNvbnN0IG51bGxEYXRhID0gaXNOdWxsT3JVbmRlZihwYXJzZWRbdkF4aXNdKTtcbiAgICAgIGNvbnN0IGlQaXhlbCA9IHByb3BlcnRpZXNbaUF4aXNdID0gaVNjYWxlLmdldFBpeGVsRm9yVmFsdWUocGFyc2VkW2lBeGlzXSwgaSk7XG4gICAgICBjb25zdCB2UGl4ZWwgPSBwcm9wZXJ0aWVzW3ZBeGlzXSA9IHJlc2V0IHx8IG51bGxEYXRhID8gdlNjYWxlLmdldEJhc2VQaXhlbCgpIDogdlNjYWxlLmdldFBpeGVsRm9yVmFsdWUoX3N0YWNrZWQgPyB0aGlzLmFwcGx5U3RhY2sodlNjYWxlLCBwYXJzZWQsIF9zdGFja2VkKSA6IHBhcnNlZFt2QXhpc10sIGkpO1xuXG4gICAgICBwcm9wZXJ0aWVzLnNraXAgPSBpc05hTihpUGl4ZWwpIHx8IGlzTmFOKHZQaXhlbCkgfHwgbnVsbERhdGE7XG4gICAgICBwcm9wZXJ0aWVzLnN0b3AgPSBpID4gMCAmJiAoTWF0aC5hYnMocGFyc2VkW2lBeGlzXSAtIHByZXZQYXJzZWRbaUF4aXNdKSkgPiBtYXhHYXBMZW5ndGg7XG4gICAgICBpZiAoc2VnbWVudCkge1xuICAgICAgICBwcm9wZXJ0aWVzLnBhcnNlZCA9IHBhcnNlZDtcbiAgICAgICAgcHJvcGVydGllcy5yYXcgPSBfZGF0YXNldC5kYXRhW2ldO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5jbHVkZU9wdGlvbnMpIHtcbiAgICAgICAgcHJvcGVydGllcy5vcHRpb25zID0gc2hhcmVkT3B0aW9ucyB8fCB0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSwgcG9pbnQuYWN0aXZlID8gJ2FjdGl2ZScgOiBtb2RlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkaXJlY3RVcGRhdGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KHBvaW50LCBpLCBwcm9wZXJ0aWVzLCBtb2RlKTtcbiAgICAgIH1cblxuICAgICAgcHJldlBhcnNlZCA9IHBhcnNlZDtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVNoYXJlZE9wdGlvbnMoc2hhcmVkT3B0aW9ucywgbW9kZSwgZmlyc3RPcHRzKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRNYXhPdmVyZmxvdygpIHtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5fY2FjaGVkTWV0YTtcbiAgICBjb25zdCBkYXRhID0gbWV0YS5kYXRhIHx8IFtdO1xuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hvd0xpbmUpIHtcbiAgICAgIGxldCBtYXggPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IGRhdGEubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBkYXRhW2ldLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkpKSAvIDIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1heCA+IDAgJiYgbWF4O1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGFzZXQgPSBtZXRhLmRhdGFzZXQ7XG4gICAgY29uc3QgYm9yZGVyID0gZGF0YXNldC5vcHRpb25zICYmIGRhdGFzZXQub3B0aW9ucy5ib3JkZXJXaWR0aCB8fCAwO1xuXG4gICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGJvcmRlcjtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFBvaW50ID0gZGF0YVswXS5zaXplKHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucygwKSk7XG4gICAgY29uc3QgbGFzdFBvaW50ID0gZGF0YVtkYXRhLmxlbmd0aCAtIDFdLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGRhdGEubGVuZ3RoIC0gMSkpO1xuICAgIHJldHVybiBNYXRoLm1heChib3JkZXIsIGZpcnN0UG9pbnQsIGxhc3RQb2ludCkgLyAyO1xuICB9XG59XG4iLCAiLyoqXG4gKiBAbmFtZXNwYWNlIENoYXJ0Ll9hZGFwdGVyc1xuICogQHNpbmNlIDIuOC4wXG4gKiBAcHJpdmF0ZVxuICovXG5cbmltcG9ydCB0eXBlIHtBbnlPYmplY3R9IGZyb20gJy4uL3R5cGVzL2Jhc2ljLmpzJztcbmltcG9ydCB0eXBlIHtDaGFydE9wdGlvbnN9IGZyb20gJy4uL3R5cGVzL2luZGV4LmpzJztcblxuZXhwb3J0IHR5cGUgVGltZVVuaXQgPSAnbWlsbGlzZWNvbmQnIHwgJ3NlY29uZCcgfCAnbWludXRlJyB8ICdob3VyJyB8ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICdxdWFydGVyJyB8ICd5ZWFyJztcblxuZXhwb3J0IGludGVyZmFjZSBEYXRlQWRhcHRlcjxUIGV4dGVuZHMgQW55T2JqZWN0ID0gQW55T2JqZWN0PiB7XG4gIHJlYWRvbmx5IG9wdGlvbnM6IFQ7XG4gIC8qKlxuICAgKiBXaWxsIGNhbGxlZCB3aXRoIGNoYXJ0IG9wdGlvbnMgYWZ0ZXIgYWRhcHRlciBjcmVhdGlvbi5cbiAgICovXG4gIGluaXQodGhpczogRGF0ZUFkYXB0ZXI8VD4sIGNoYXJ0T3B0aW9uczogQ2hhcnRPcHRpb25zKTogdm9pZDtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBtYXAgb2YgdGltZSBmb3JtYXRzIGZvciB0aGUgc3VwcG9ydGVkIGZvcm1hdHRpbmcgdW5pdHMgZGVmaW5lZFxuICAgKiBpbiBVbml0IGFzIHdlbGwgYXMgJ2RhdGV0aW1lJyByZXByZXNlbnRpbmcgYSBkZXRhaWxlZCBkYXRlL3RpbWUgc3RyaW5nLlxuICAgKi9cbiAgZm9ybWF0cyh0aGlzOiBEYXRlQWRhcHRlcjxUPik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGdpdmVuIGB2YWx1ZWAgYW5kIHJldHVybiB0aGUgYXNzb2NpYXRlZCB0aW1lc3RhbXAuXG4gICAqIEBwYXJhbSB2YWx1ZSAtIHRoZSB2YWx1ZSB0byBwYXJzZSAodXN1YWxseSBjb21lcyBmcm9tIHRoZSBkYXRhKVxuICAgKiBAcGFyYW0gW2Zvcm1hdF0gLSB0aGUgZXhwZWN0ZWQgZGF0YSBmb3JtYXRcbiAgICovXG4gIHBhcnNlKHRoaXM6IERhdGVBZGFwdGVyPFQ+LCB2YWx1ZTogdW5rbm93biwgZm9ybWF0PzogVGltZVVuaXQpOiBudW1iZXIgfCBudWxsO1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgZm9ybWF0dGVkIGRhdGUgaW4gdGhlIHNwZWNpZmllZCBgZm9ybWF0YCBmb3IgYSBnaXZlbiBgdGltZXN0YW1wYC5cbiAgICogQHBhcmFtIHRpbWVzdGFtcCAtIHRoZSB0aW1lc3RhbXAgdG8gZm9ybWF0XG4gICAqIEBwYXJhbSBmb3JtYXQgLSB0aGUgZGF0ZS90aW1lIHRva2VuXG4gICAqL1xuICBmb3JtYXQodGhpczogRGF0ZUFkYXB0ZXI8VD4sIHRpbWVzdGFtcDogbnVtYmVyLCBmb3JtYXQ6IFRpbWVVbml0KTogc3RyaW5nO1xuICAvKipcbiAgICogQWRkcyB0aGUgc3BlY2lmaWVkIGBhbW91bnRgIG9mIGB1bml0YCB0byB0aGUgZ2l2ZW4gYHRpbWVzdGFtcGAuXG4gICAqIEBwYXJhbSB0aW1lc3RhbXAgLSB0aGUgaW5wdXQgdGltZXN0YW1wXG4gICAqIEBwYXJhbSBhbW91bnQgLSB0aGUgYW1vdW50IHRvIGFkZFxuICAgKiBAcGFyYW0gdW5pdCAtIHRoZSB1bml0IGFzIHN0cmluZ1xuICAgKi9cbiAgYWRkKHRoaXM6IERhdGVBZGFwdGVyPFQ+LCB0aW1lc3RhbXA6IG51bWJlciwgYW1vdW50OiBudW1iZXIsIHVuaXQ6IFRpbWVVbml0KTogbnVtYmVyO1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGB1bml0YCBiZXR3ZWVuIHRoZSBnaXZlbiB0aW1lc3RhbXBzLlxuICAgKiBAcGFyYW0gYSAtIHRoZSBpbnB1dCB0aW1lc3RhbXAgKHJlZmVyZW5jZSlcbiAgICogQHBhcmFtIGIgLSB0aGUgdGltZXN0YW1wIHRvIHN1YnRyYWN0XG4gICAqIEBwYXJhbSB1bml0IC0gdGhlIHVuaXQgYXMgc3RyaW5nXG4gICAqL1xuICBkaWZmKHRoaXM6IERhdGVBZGFwdGVyPFQ+LCBhOiBudW1iZXIsIGI6IG51bWJlciwgdW5pdDogVGltZVVuaXQpOiBudW1iZXI7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHN0YXJ0IG9mIGB1bml0YCBmb3IgdGhlIGdpdmVuIGB0aW1lc3RhbXBgLlxuICAgKiBAcGFyYW0gdGltZXN0YW1wIC0gdGhlIGlucHV0IHRpbWVzdGFtcFxuICAgKiBAcGFyYW0gdW5pdCAtIHRoZSB1bml0IGFzIHN0cmluZ1xuICAgKiBAcGFyYW0gW3dlZWtkYXldIC0gdGhlIElTTyBkYXkgb2YgdGhlIHdlZWsgd2l0aCAxIGJlaW5nIE1vbmRheVxuICAgKiBhbmQgNyBiZWluZyBTdW5kYXkgKG9ubHkgbmVlZGVkIGlmIHBhcmFtICp1bml0KiBpcyBgaXNvV2Vla2ApLlxuICAgKi9cbiAgc3RhcnRPZih0aGlzOiBEYXRlQWRhcHRlcjxUPiwgdGltZXN0YW1wOiBudW1iZXIsIHVuaXQ6IFRpbWVVbml0IHwgJ2lzb1dlZWsnLCB3ZWVrZGF5PzogbnVtYmVyKTogbnVtYmVyO1xuICAvKipcbiAgICogUmV0dXJucyBlbmQgb2YgYHVuaXRgIGZvciB0aGUgZ2l2ZW4gYHRpbWVzdGFtcGAuXG4gICAqIEBwYXJhbSB0aW1lc3RhbXAgLSB0aGUgaW5wdXQgdGltZXN0YW1wXG4gICAqIEBwYXJhbSB1bml0IC0gdGhlIHVuaXQgYXMgc3RyaW5nXG4gICAqL1xuICBlbmRPZih0aGlzOiBEYXRlQWRhcHRlcjxUPiwgdGltZXN0YW1wOiBudW1iZXIsIHVuaXQ6IFRpbWVVbml0IHwgJ2lzb1dlZWsnKTogbnVtYmVyO1xufVxuXG5mdW5jdGlvbiBhYnN0cmFjdDxUID0gdm9pZD4oKTogVCB7XG4gIHRocm93IG5ldyBFcnJvcignVGhpcyBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkOiBDaGVjayB0aGF0IGEgY29tcGxldGUgZGF0ZSBhZGFwdGVyIGlzIHByb3ZpZGVkLicpO1xufVxuXG4vKipcbiAqIERhdGUgYWRhcHRlciAoY3VycmVudCB1c2VkIGJ5IHRoZSB0aW1lIHNjYWxlKVxuICogQG5hbWVzcGFjZSBDaGFydC5fYWRhcHRlcnMuX2RhdGVcbiAqIEBtZW1iZXJvZiBDaGFydC5fYWRhcHRlcnNcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIERhdGVBZGFwdGVyQmFzZSBpbXBsZW1lbnRzIERhdGVBZGFwdGVyIHtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgZGVmYXVsdCBkYXRlIGFkYXB0ZXIgbWV0aG9kcy5cbiAgICogQWNjZXB0cyB0eXBlIHBhcmFtZXRlciB0byBkZWZpbmUgb3B0aW9ucyB0eXBlLlxuICAgKiBAZXhhbXBsZVxuICAgKiBDaGFydC5fYWRhcHRlcnMuX2RhdGUub3ZlcnJpZGU8e215QWRhcHRlck9wdGlvbjogc3RyaW5nfT4oe1xuICAgKiAgIGluaXQoKSB7XG4gICAqICAgICBjb25zb2xlLmxvZyh0aGlzLm9wdGlvbnMubXlBZGFwdGVyT3B0aW9uKTtcbiAgICogICB9XG4gICAqIH0pXG4gICAqL1xuICBzdGF0aWMgb3ZlcnJpZGU8VCBleHRlbmRzIEFueU9iamVjdCA9IEFueU9iamVjdD4oXG4gICAgbWVtYmVyczogUGFydGlhbDxPbWl0PERhdGVBZGFwdGVyPFQ+LCAnb3B0aW9ucyc+PlxuICApIHtcbiAgICBPYmplY3QuYXNzaWduKERhdGVBZGFwdGVyQmFzZS5wcm90b3R5cGUsIG1lbWJlcnMpO1xuICB9XG5cbiAgcmVhZG9ubHkgb3B0aW9uczogQW55T2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEFueU9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gIGluaXQoKSB7fVxuXG4gIGZvcm1hdHMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICBwYXJzZSgpOiBudW1iZXIgfCBudWxsIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIGZvcm1hdCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgYWRkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICBkaWZmKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICBzdGFydE9mKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICBlbmRPZigpOiBudW1iZXIge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgX2RhdGU6IERhdGVBZGFwdGVyQmFzZVxufTtcbiIsICJpbXBvcnQge19sb29rdXBCeUtleSwgX3Jsb29rdXBCeUtleX0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvbGxlY3Rpb24uanMnO1xuaW1wb3J0IHtnZXRSZWxhdGl2ZVBvc2l0aW9ufSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuZG9tLmpzJztcbmltcG9ydCB7X2FuZ2xlQmV0d2VlbiwgZ2V0QW5nbGVGcm9tUG9pbnR9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5tYXRoLmpzJztcbmltcG9ydCB7X2lzUG9pbnRJbkFyZWF9IGZyb20gJy4uL2hlbHBlcnMvaW5kZXguanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL2NvcmUuY29udHJvbGxlci5qcycpLmRlZmF1bHQgfSBDaGFydFxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uL3R5cGVzL2luZGV4LmpzJykuQ2hhcnRFdmVudCB9IENoYXJ0RXZlbnRcbiAqIEB0eXBlZGVmIHt7YXhpcz86IHN0cmluZywgaW50ZXJzZWN0PzogYm9vbGVhbiwgaW5jbHVkZUludmlzaWJsZT86IGJvb2xlYW59fSBJbnRlcmFjdGlvbk9wdGlvbnNcbiAqIEB0eXBlZGVmIHt7ZGF0YXNldEluZGV4OiBudW1iZXIsIGluZGV4OiBudW1iZXIsIGVsZW1lbnQ6IGltcG9ydCgnLi9jb3JlLmVsZW1lbnQuanMnKS5kZWZhdWx0fX0gSW50ZXJhY3Rpb25JdGVtXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vdHlwZXMvaW5kZXguanMnKS5Qb2ludCB9IFBvaW50XG4gKi9cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZG8gYmluYXJ5IHNlYXJjaCB3aGVuIHBvc3NpYmxlXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YXNldCAtIHRoZSBkYXRhc2V0IG1ldGFcbiAqIEBwYXJhbSB7c3RyaW5nfSBheGlzIC0gdGhlIGF4aXMgbW9kZS4geHx5fHh5fHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIHRoZSB2YWx1ZSB0byBmaW5kXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpbnRlcnNlY3RdIC0gc2hvdWxkIHRoZSBlbGVtZW50IGludGVyc2VjdFxuICogQHJldHVybnMge3tsbzpudW1iZXIsIGhpOm51bWJlcn19IGluZGljZXMgdG8gc2VhcmNoIGRhdGEgYXJyYXkgYmV0d2VlblxuICovXG5mdW5jdGlvbiBiaW5hcnlTZWFyY2gobWV0YXNldCwgYXhpcywgdmFsdWUsIGludGVyc2VjdCkge1xuICBjb25zdCB7Y29udHJvbGxlciwgZGF0YSwgX3NvcnRlZH0gPSBtZXRhc2V0O1xuICBjb25zdCBpU2NhbGUgPSBjb250cm9sbGVyLl9jYWNoZWRNZXRhLmlTY2FsZTtcbiAgaWYgKGlTY2FsZSAmJiBheGlzID09PSBpU2NhbGUuYXhpcyAmJiBheGlzICE9PSAncicgJiYgX3NvcnRlZCAmJiBkYXRhLmxlbmd0aCkge1xuICAgIGNvbnN0IGxvb2t1cE1ldGhvZCA9IGlTY2FsZS5fcmV2ZXJzZVBpeGVscyA/IF9ybG9va3VwQnlLZXkgOiBfbG9va3VwQnlLZXk7XG4gICAgaWYgKCFpbnRlcnNlY3QpIHtcbiAgICAgIHJldHVybiBsb29rdXBNZXRob2QoZGF0YSwgYXhpcywgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoY29udHJvbGxlci5fc2hhcmVkT3B0aW9ucykge1xuICAgICAgLy8gX3NoYXJlZE9wdGlvbnMgaW5kaWNhdGVzIHRoYXQgZWFjaCBlbGVtZW50IGhhcyBlcXVhbCBvcHRpb25zIC0+IGVxdWFsIHByb3BvcnRpb25zXG4gICAgICAvLyBTbyB3ZSBjYW4gZG8gYSByYW5nZWQgYmluYXJ5IHNlYXJjaCBiYXNlZCBvbiB0aGUgcmFuZ2Ugb2YgZmlyc3QgZWxlbWVudCBhbmRcbiAgICAgIC8vIGJlIGNvbmZpZGVudCB0byBnZXQgdGhlIGZ1bGwgcmFuZ2Ugb2YgaW5kaWNlcyB0aGF0IGNhbiBpbnRlcnNlY3Qgd2l0aCB0aGUgdmFsdWUuXG4gICAgICBjb25zdCBlbCA9IGRhdGFbMF07XG4gICAgICBjb25zdCByYW5nZSA9IHR5cGVvZiBlbC5nZXRSYW5nZSA9PT0gJ2Z1bmN0aW9uJyAmJiBlbC5nZXRSYW5nZShheGlzKTtcbiAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICBjb25zdCBzdGFydCA9IGxvb2t1cE1ldGhvZChkYXRhLCBheGlzLCB2YWx1ZSAtIHJhbmdlKTtcbiAgICAgICAgY29uc3QgZW5kID0gbG9va3VwTWV0aG9kKGRhdGEsIGF4aXMsIHZhbHVlICsgcmFuZ2UpO1xuICAgICAgICByZXR1cm4ge2xvOiBzdGFydC5sbywgaGk6IGVuZC5oaX07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIERlZmF1bHQgdG8gYWxsIGVsZW1lbnRzLCB3aGVuIGJpbmFyeSBzZWFyY2ggY2FuIG5vdCBiZSB1c2VkLlxuICByZXR1cm4ge2xvOiAwLCBoaTogZGF0YS5sZW5ndGggLSAxfTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gc2VsZWN0IGNhbmRpZGF0ZSBlbGVtZW50cyBmb3IgaW50ZXJhY3Rpb25cbiAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0XG4gKiBAcGFyYW0ge3N0cmluZ30gYXhpcyAtIHRoZSBheGlzIG1vZGUuIHh8eXx4eXxyXG4gKiBAcGFyYW0ge1BvaW50fSBwb3NpdGlvbiAtIHRoZSBwb2ludCB0byBiZSBuZWFyZXN0IHRvLCBpbiByZWxhdGl2ZSBjb29yZGluYXRlc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gaGFuZGxlciAtIHRoZSBjYWxsYmFjayB0byBleGVjdXRlIGZvciBlYWNoIHZpc2libGUgaXRlbVxuICogQHBhcmFtIHtib29sZWFufSBbaW50ZXJzZWN0XSAtIGNvbnNpZGVyIGludGVyc2VjdGluZyBpdGVtc1xuICovXG5mdW5jdGlvbiBldmFsdWF0ZUludGVyYWN0aW9uSXRlbXMoY2hhcnQsIGF4aXMsIHBvc2l0aW9uLCBoYW5kbGVyLCBpbnRlcnNlY3QpIHtcbiAgY29uc3QgbWV0YXNldHMgPSBjaGFydC5nZXRTb3J0ZWRWaXNpYmxlRGF0YXNldE1ldGFzKCk7XG4gIGNvbnN0IHZhbHVlID0gcG9zaXRpb25bYXhpc107XG4gIGZvciAobGV0IGkgPSAwLCBpbGVuID0gbWV0YXNldHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgY29uc3Qge2luZGV4LCBkYXRhfSA9IG1ldGFzZXRzW2ldO1xuICAgIGNvbnN0IHtsbywgaGl9ID0gYmluYXJ5U2VhcmNoKG1ldGFzZXRzW2ldLCBheGlzLCB2YWx1ZSwgaW50ZXJzZWN0KTtcbiAgICBmb3IgKGxldCBqID0gbG87IGogPD0gaGk7ICsraikge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRhdGFbal07XG4gICAgICBpZiAoIWVsZW1lbnQuc2tpcCkge1xuICAgICAgICBoYW5kbGVyKGVsZW1lbnQsIGluZGV4LCBqKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYSBkaXN0YW5jZSBtZXRyaWMgZnVuY3Rpb24gZm9yIHR3byBwb2ludHMgYmFzZWQgb24gdGhlXG4gKiBheGlzIG1vZGUgc2V0dGluZ1xuICogQHBhcmFtIHtzdHJpbmd9IGF4aXMgLSB0aGUgYXhpcyBtb2RlLiB4fHl8eHl8clxuICovXG5mdW5jdGlvbiBnZXREaXN0YW5jZU1ldHJpY0ZvckF4aXMoYXhpcykge1xuICBjb25zdCB1c2VYID0gYXhpcy5pbmRleE9mKCd4JykgIT09IC0xO1xuICBjb25zdCB1c2VZID0gYXhpcy5pbmRleE9mKCd5JykgIT09IC0xO1xuXG4gIHJldHVybiBmdW5jdGlvbihwdDEsIHB0Mikge1xuICAgIGNvbnN0IGRlbHRhWCA9IHVzZVggPyBNYXRoLmFicyhwdDEueCAtIHB0Mi54KSA6IDA7XG4gICAgY29uc3QgZGVsdGFZID0gdXNlWSA/IE1hdGguYWJzKHB0MS55IC0gcHQyLnkpIDogMDtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGRlbHRhWCwgMikgKyBNYXRoLnBvdyhkZWx0YVksIDIpKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBpdGVtcyB0aGF0IGludGVyc2VjdCB0aGUgZXZlbnQgcG9zaXRpb25cbiAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0XG4gKiBAcGFyYW0ge1BvaW50fSBwb3NpdGlvbiAtIHRoZSBwb2ludCB0byBiZSBuZWFyZXN0IHRvLCBpbiByZWxhdGl2ZSBjb29yZGluYXRlc1xuICogQHBhcmFtIHtzdHJpbmd9IGF4aXMgLSB0aGUgYXhpcyBtb2RlLiB4fHl8eHl8clxuICogQHBhcmFtIHtib29sZWFufSBbdXNlRmluYWxQb3NpdGlvbl0gLSB1c2UgdGhlIGVsZW1lbnQncyBhbmltYXRpb24gdGFyZ2V0IGluc3RlYWQgb2YgY3VycmVudCBwb3NpdGlvblxuICogQHBhcmFtIHtib29sZWFufSBbaW5jbHVkZUludmlzaWJsZV0gLSBpbmNsdWRlIGludmlzaWJsZSBwb2ludHMgdGhhdCBhcmUgb3V0c2lkZSBvZiB0aGUgY2hhcnQgYXJlYVxuICogQHJldHVybiB7SW50ZXJhY3Rpb25JdGVtW119IHRoZSBuZWFyZXN0IGl0ZW1zXG4gKi9cbmZ1bmN0aW9uIGdldEludGVyc2VjdEl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgdXNlRmluYWxQb3NpdGlvbiwgaW5jbHVkZUludmlzaWJsZSkge1xuICBjb25zdCBpdGVtcyA9IFtdO1xuXG4gIGlmICghaW5jbHVkZUludmlzaWJsZSAmJiAhY2hhcnQuaXNQb2ludEluQXJlYShwb3NpdGlvbikpIHtcbiAgICByZXR1cm4gaXRlbXM7XG4gIH1cblxuICBjb25zdCBldmFsdWF0aW9uRnVuYyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGRhdGFzZXRJbmRleCwgaW5kZXgpIHtcbiAgICBpZiAoIWluY2x1ZGVJbnZpc2libGUgJiYgIV9pc1BvaW50SW5BcmVhKGVsZW1lbnQsIGNoYXJ0LmNoYXJ0QXJlYSwgMCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQuaW5SYW5nZShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCB1c2VGaW5hbFBvc2l0aW9uKSkge1xuICAgICAgaXRlbXMucHVzaCh7ZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleH0pO1xuICAgIH1cbiAgfTtcblxuICBldmFsdWF0ZUludGVyYWN0aW9uSXRlbXMoY2hhcnQsIGF4aXMsIHBvc2l0aW9uLCBldmFsdWF0aW9uRnVuYywgdHJ1ZSk7XG4gIHJldHVybiBpdGVtcztcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBpdGVtcyBuZWFyZXN0IHRvIHRoZSBldmVudCBwb3NpdGlvbiBmb3IgYSByYWRpYWwgY2hhcnRcbiAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0IHRvIGxvb2sgYXQgZWxlbWVudHMgZnJvbVxuICogQHBhcmFtIHtQb2ludH0gcG9zaXRpb24gLSB0aGUgcG9pbnQgdG8gYmUgbmVhcmVzdCB0bywgaW4gcmVsYXRpdmUgY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBheGlzIC0gdGhlIGF4ZXMgYWxvbmcgd2hpY2ggdG8gbWVhc3VyZSBkaXN0YW5jZVxuICogQHBhcmFtIHtib29sZWFufSBbdXNlRmluYWxQb3NpdGlvbl0gLSB1c2UgdGhlIGVsZW1lbnQncyBhbmltYXRpb24gdGFyZ2V0IGluc3RlYWQgb2YgY3VycmVudCBwb3NpdGlvblxuICogQHJldHVybiB7SW50ZXJhY3Rpb25JdGVtW119IHRoZSBuZWFyZXN0IGl0ZW1zXG4gKi9cbmZ1bmN0aW9uIGdldE5lYXJlc3RSYWRpYWxJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgbGV0IGl0ZW1zID0gW107XG5cbiAgZnVuY3Rpb24gZXZhbHVhdGlvbkZ1bmMoZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleCkge1xuICAgIGNvbnN0IHtzdGFydEFuZ2xlLCBlbmRBbmdsZX0gPSBlbGVtZW50LmdldFByb3BzKFsnc3RhcnRBbmdsZScsICdlbmRBbmdsZSddLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICBjb25zdCB7YW5nbGV9ID0gZ2V0QW5nbGVGcm9tUG9pbnQoZWxlbWVudCwge3g6IHBvc2l0aW9uLngsIHk6IHBvc2l0aW9uLnl9KTtcblxuICAgIGlmIChfYW5nbGVCZXR3ZWVuKGFuZ2xlLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSkpIHtcbiAgICAgIGl0ZW1zLnB1c2goe2VsZW1lbnQsIGRhdGFzZXRJbmRleCwgaW5kZXh9KTtcbiAgICB9XG4gIH1cblxuICBldmFsdWF0ZUludGVyYWN0aW9uSXRlbXMoY2hhcnQsIGF4aXMsIHBvc2l0aW9uLCBldmFsdWF0aW9uRnVuYyk7XG4gIHJldHVybiBpdGVtcztcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBpdGVtcyBuZWFyZXN0IHRvIHRoZSBldmVudCBwb3NpdGlvbiBmb3IgYSBjYXJ0ZXNpYW4gY2hhcnRcbiAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0IHRvIGxvb2sgYXQgZWxlbWVudHMgZnJvbVxuICogQHBhcmFtIHtQb2ludH0gcG9zaXRpb24gLSB0aGUgcG9pbnQgdG8gYmUgbmVhcmVzdCB0bywgaW4gcmVsYXRpdmUgY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBheGlzIC0gdGhlIGF4ZXMgYWxvbmcgd2hpY2ggdG8gbWVhc3VyZSBkaXN0YW5jZVxuICogQHBhcmFtIHtib29sZWFufSBbaW50ZXJzZWN0XSAtIGlmIHRydWUsIG9ubHkgY29uc2lkZXIgaXRlbXMgdGhhdCBpbnRlcnNlY3QgdGhlIHBvc2l0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt1c2VGaW5hbFBvc2l0aW9uXSAtIHVzZSB0aGUgZWxlbWVudCdzIGFuaW1hdGlvbiB0YXJnZXQgaW5zdGVhZCBvZiBjdXJyZW50IHBvc2l0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpbmNsdWRlSW52aXNpYmxlXSAtIGluY2x1ZGUgaW52aXNpYmxlIHBvaW50cyB0aGF0IGFyZSBvdXRzaWRlIG9mIHRoZSBjaGFydCBhcmVhXG4gKiBAcmV0dXJuIHtJbnRlcmFjdGlvbkl0ZW1bXX0gdGhlIG5lYXJlc3QgaXRlbXNcbiAqL1xuZnVuY3Rpb24gZ2V0TmVhcmVzdENhcnRlc2lhbkl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgaW50ZXJzZWN0LCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKSB7XG4gIGxldCBpdGVtcyA9IFtdO1xuICBjb25zdCBkaXN0YW5jZU1ldHJpYyA9IGdldERpc3RhbmNlTWV0cmljRm9yQXhpcyhheGlzKTtcbiAgbGV0IG1pbkRpc3RhbmNlID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuXG4gIGZ1bmN0aW9uIGV2YWx1YXRpb25GdW5jKGVsZW1lbnQsIGRhdGFzZXRJbmRleCwgaW5kZXgpIHtcbiAgICBjb25zdCBpblJhbmdlID0gZWxlbWVudC5pblJhbmdlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIGlmIChpbnRlcnNlY3QgJiYgIWluUmFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjZW50ZXIgPSBlbGVtZW50LmdldENlbnRlclBvaW50KHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIGNvbnN0IHBvaW50SW5BcmVhID0gISFpbmNsdWRlSW52aXNpYmxlIHx8IGNoYXJ0LmlzUG9pbnRJbkFyZWEoY2VudGVyKTtcbiAgICBpZiAoIXBvaW50SW5BcmVhICYmICFpblJhbmdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZU1ldHJpYyhwb3NpdGlvbiwgY2VudGVyKTtcbiAgICBpZiAoZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkge1xuICAgICAgaXRlbXMgPSBbe2VsZW1lbnQsIGRhdGFzZXRJbmRleCwgaW5kZXh9XTtcbiAgICAgIG1pbkRpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgfSBlbHNlIGlmIChkaXN0YW5jZSA9PT0gbWluRGlzdGFuY2UpIHtcbiAgICAgIC8vIENhbiBoYXZlIG11bHRpcGxlIGl0ZW1zIGF0IHRoZSBzYW1lIGRpc3RhbmNlIGluIHdoaWNoIGNhc2Ugd2Ugc29ydCBieSBzaXplXG4gICAgICBpdGVtcy5wdXNoKHtlbGVtZW50LCBkYXRhc2V0SW5kZXgsIGluZGV4fSk7XG4gICAgfVxuICB9XG5cbiAgZXZhbHVhdGVJbnRlcmFjdGlvbkl0ZW1zKGNoYXJ0LCBheGlzLCBwb3NpdGlvbiwgZXZhbHVhdGlvbkZ1bmMpO1xuICByZXR1cm4gaXRlbXM7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB0aGUgaXRlbXMgbmVhcmVzdCB0byB0aGUgZXZlbnQgcG9zaXRpb24gY29uc2lkZXJpbmcgYWxsIHZpc2libGUgaXRlbXMgaW4gdGhlIGNoYXJ0XG4gKiBAcGFyYW0ge0NoYXJ0fSBjaGFydCAtIHRoZSBjaGFydCB0byBsb29rIGF0IGVsZW1lbnRzIGZyb21cbiAqIEBwYXJhbSB7UG9pbnR9IHBvc2l0aW9uIC0gdGhlIHBvaW50IHRvIGJlIG5lYXJlc3QgdG8sIGluIHJlbGF0aXZlIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge3N0cmluZ30gYXhpcyAtIHRoZSBheGVzIGFsb25nIHdoaWNoIHRvIG1lYXN1cmUgZGlzdGFuY2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ludGVyc2VjdF0gLSBpZiB0cnVlLCBvbmx5IGNvbnNpZGVyIGl0ZW1zIHRoYXQgaW50ZXJzZWN0IHRoZSBwb3NpdGlvblxuICogQHBhcmFtIHtib29sZWFufSBbdXNlRmluYWxQb3NpdGlvbl0gLSB1c2UgdGhlIGVsZW1lbnQncyBhbmltYXRpb24gdGFyZ2V0IGluc3RlYWQgb2YgY3VycmVudCBwb3NpdGlvblxuICogQHBhcmFtIHtib29sZWFufSBbaW5jbHVkZUludmlzaWJsZV0gLSBpbmNsdWRlIGludmlzaWJsZSBwb2ludHMgdGhhdCBhcmUgb3V0c2lkZSBvZiB0aGUgY2hhcnQgYXJlYVxuICogQHJldHVybiB7SW50ZXJhY3Rpb25JdGVtW119IHRoZSBuZWFyZXN0IGl0ZW1zXG4gKi9cbmZ1bmN0aW9uIGdldE5lYXJlc3RJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIGludGVyc2VjdCwgdXNlRmluYWxQb3NpdGlvbiwgaW5jbHVkZUludmlzaWJsZSkge1xuICBpZiAoIWluY2x1ZGVJbnZpc2libGUgJiYgIWNoYXJ0LmlzUG9pbnRJbkFyZWEocG9zaXRpb24pKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcmV0dXJuIGF4aXMgPT09ICdyJyAmJiAhaW50ZXJzZWN0XG4gICAgPyBnZXROZWFyZXN0UmFkaWFsSXRlbXMoY2hhcnQsIHBvc2l0aW9uLCBheGlzLCB1c2VGaW5hbFBvc2l0aW9uKVxuICAgIDogZ2V0TmVhcmVzdENhcnRlc2lhbkl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgaW50ZXJzZWN0LCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBpdGVtcyBtYXRjaGluZyBhbG9uZyB0aGUgZ2l2ZW4gWCBvciBZIGF4aXNcbiAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0IHRvIGxvb2sgYXQgZWxlbWVudHMgZnJvbVxuICogQHBhcmFtIHtQb2ludH0gcG9zaXRpb24gLSB0aGUgcG9pbnQgdG8gYmUgbmVhcmVzdCB0bywgaW4gcmVsYXRpdmUgY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBheGlzIC0gdGhlIGF4aXMgdG8gbWF0Y2hcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ludGVyc2VjdF0gLSBpZiB0cnVlLCBvbmx5IGNvbnNpZGVyIGl0ZW1zIHRoYXQgaW50ZXJzZWN0IHRoZSBwb3NpdGlvblxuICogQHBhcmFtIHtib29sZWFufSBbdXNlRmluYWxQb3NpdGlvbl0gLSB1c2UgdGhlIGVsZW1lbnQncyBhbmltYXRpb24gdGFyZ2V0IGluc3RlYWQgb2YgY3VycmVudCBwb3NpdGlvblxuICogQHJldHVybiB7SW50ZXJhY3Rpb25JdGVtW119IHRoZSBuZWFyZXN0IGl0ZW1zXG4gKi9cbmZ1bmN0aW9uIGdldEF4aXNJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIGludGVyc2VjdCwgdXNlRmluYWxQb3NpdGlvbikge1xuICBjb25zdCBpdGVtcyA9IFtdO1xuICBjb25zdCByYW5nZU1ldGhvZCA9IGF4aXMgPT09ICd4JyA/ICdpblhSYW5nZScgOiAnaW5ZUmFuZ2UnO1xuICBsZXQgaW50ZXJzZWN0c0l0ZW0gPSBmYWxzZTtcblxuICBldmFsdWF0ZUludGVyYWN0aW9uSXRlbXMoY2hhcnQsIGF4aXMsIHBvc2l0aW9uLCAoZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleCkgPT4ge1xuICAgIGlmIChlbGVtZW50W3JhbmdlTWV0aG9kXShwb3NpdGlvbltheGlzXSwgdXNlRmluYWxQb3NpdGlvbikpIHtcbiAgICAgIGl0ZW1zLnB1c2goe2VsZW1lbnQsIGRhdGFzZXRJbmRleCwgaW5kZXh9KTtcbiAgICAgIGludGVyc2VjdHNJdGVtID0gaW50ZXJzZWN0c0l0ZW0gfHwgZWxlbWVudC5pblJhbmdlKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gSWYgd2Ugd2FudCB0byB0cmlnZ2VyIG9uIGFuIGludGVyc2VjdCBhbmQgd2UgZG9uJ3QgaGF2ZSBhbnkgaXRlbXNcbiAgLy8gdGhhdCBpbnRlcnNlY3QgdGhlIHBvc2l0aW9uLCByZXR1cm4gbm90aGluZ1xuICBpZiAoaW50ZXJzZWN0ICYmICFpbnRlcnNlY3RzSXRlbSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gaXRlbXM7XG59XG5cbi8qKlxuICogQ29udGFpbnMgaW50ZXJhY3Rpb24gcmVsYXRlZCBmdW5jdGlvbnNcbiAqIEBuYW1lc3BhY2UgQ2hhcnQuSW50ZXJhY3Rpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvLyBQYXJ0IG9mIHRoZSBwdWJsaWMgQVBJIHRvIGZhY2lsaXRhdGUgZGV2ZWxvcGVycyBjcmVhdGluZyB0aGVpciBvd24gbW9kZXNcbiAgZXZhbHVhdGVJbnRlcmFjdGlvbkl0ZW1zLFxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiBmb3IgZGlmZmVyZW50IG1vZGVzXG4gIG1vZGVzOiB7XG4gICAgLyoqXG5cdFx0ICogUmV0dXJucyBpdGVtcyBhdCB0aGUgc2FtZSBpbmRleC4gSWYgdGhlIG9wdGlvbnMuaW50ZXJzZWN0IHBhcmFtZXRlciBpcyB0cnVlLCB3ZSBvbmx5IHJldHVybiBpdGVtcyBpZiB3ZSBpbnRlcnNlY3Qgc29tZXRoaW5nXG5cdFx0ICogSWYgdGhlIG9wdGlvbnMuaW50ZXJzZWN0IG1vZGUgaXMgZmFsc2UsIHdlIGZpbmQgdGhlIG5lYXJlc3QgaXRlbSBhbmQgcmV0dXJuIHRoZSBpdGVtcyBhdCB0aGUgc2FtZSBpbmRleCBhcyB0aGF0IGl0ZW1cblx0XHQgKiBAZnVuY3Rpb24gQ2hhcnQuSW50ZXJhY3Rpb24ubW9kZXMuaW5kZXhcblx0XHQgKiBAc2luY2UgdjIuNC4wXG5cdFx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnQgLSB0aGUgY2hhcnQgd2UgYXJlIHJldHVybmluZyBpdGVtcyBmcm9tXG5cdFx0ICogQHBhcmFtIHtFdmVudH0gZSAtIHRoZSBldmVudCB3ZSBhcmUgZmluZCB0aGluZ3MgYXRcblx0XHQgKiBAcGFyYW0ge0ludGVyYWN0aW9uT3B0aW9uc30gb3B0aW9ucyAtIG9wdGlvbnMgdG8gdXNlXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBbdXNlRmluYWxQb3NpdGlvbl0gLSB1c2UgZmluYWwgZWxlbWVudCBwb3NpdGlvbiAoYW5pbWF0aW9uIHRhcmdldClcblx0XHQgKiBAcmV0dXJuIHtJbnRlcmFjdGlvbkl0ZW1bXX0gLSBpdGVtcyB0aGF0IGFyZSBmb3VuZFxuXHRcdCAqL1xuICAgIGluZGV4KGNoYXJ0LCBlLCBvcHRpb25zLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGdldFJlbGF0aXZlUG9zaXRpb24oZSwgY2hhcnQpO1xuICAgICAgLy8gRGVmYXVsdCBheGlzIGZvciBpbmRleCBtb2RlIGlzICd4JyB0byBtYXRjaCBvbGQgYmVoYXZpb3VyXG4gICAgICBjb25zdCBheGlzID0gb3B0aW9ucy5heGlzIHx8ICd4JztcbiAgICAgIGNvbnN0IGluY2x1ZGVJbnZpc2libGUgPSBvcHRpb25zLmluY2x1ZGVJbnZpc2libGUgfHwgZmFsc2U7XG4gICAgICBjb25zdCBpdGVtcyA9IG9wdGlvbnMuaW50ZXJzZWN0XG4gICAgICAgID8gZ2V0SW50ZXJzZWN0SXRlbXMoY2hhcnQsIHBvc2l0aW9uLCBheGlzLCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKVxuICAgICAgICA6IGdldE5lYXJlc3RJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIGZhbHNlLCB1c2VGaW5hbFBvc2l0aW9uLCBpbmNsdWRlSW52aXNpYmxlKTtcbiAgICAgIGNvbnN0IGVsZW1lbnRzID0gW107XG5cbiAgICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgY2hhcnQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpLmZvckVhY2goKG1ldGEpID0+IHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBpdGVtc1swXS5pbmRleDtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IG1ldGEuZGF0YVtpbmRleF07XG5cbiAgICAgICAgLy8gZG9uJ3QgY291bnQgaXRlbXMgdGhhdCBhcmUgc2tpcHBlZCAobnVsbCBkYXRhKVxuICAgICAgICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5za2lwKSB7XG4gICAgICAgICAgZWxlbWVudHMucHVzaCh7ZWxlbWVudCwgZGF0YXNldEluZGV4OiBtZXRhLmluZGV4LCBpbmRleH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgIH0sXG5cbiAgICAvKipcblx0XHQgKiBSZXR1cm5zIGl0ZW1zIGluIHRoZSBzYW1lIGRhdGFzZXQuIElmIHRoZSBvcHRpb25zLmludGVyc2VjdCBwYXJhbWV0ZXIgaXMgdHJ1ZSwgd2Ugb25seSByZXR1cm4gaXRlbXMgaWYgd2UgaW50ZXJzZWN0IHNvbWV0aGluZ1xuXHRcdCAqIElmIHRoZSBvcHRpb25zLmludGVyc2VjdCBpcyBmYWxzZSwgd2UgZmluZCB0aGUgbmVhcmVzdCBpdGVtIGFuZCByZXR1cm4gdGhlIGl0ZW1zIGluIHRoYXQgZGF0YXNldFxuXHRcdCAqIEBmdW5jdGlvbiBDaGFydC5JbnRlcmFjdGlvbi5tb2Rlcy5kYXRhc2V0XG5cdFx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnQgLSB0aGUgY2hhcnQgd2UgYXJlIHJldHVybmluZyBpdGVtcyBmcm9tXG5cdFx0ICogQHBhcmFtIHtFdmVudH0gZSAtIHRoZSBldmVudCB3ZSBhcmUgZmluZCB0aGluZ3MgYXRcblx0XHQgKiBAcGFyYW0ge0ludGVyYWN0aW9uT3B0aW9uc30gb3B0aW9ucyAtIG9wdGlvbnMgdG8gdXNlXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBbdXNlRmluYWxQb3NpdGlvbl0gLSB1c2UgZmluYWwgZWxlbWVudCBwb3NpdGlvbiAoYW5pbWF0aW9uIHRhcmdldClcblx0XHQgKiBAcmV0dXJuIHtJbnRlcmFjdGlvbkl0ZW1bXX0gLSBpdGVtcyB0aGF0IGFyZSBmb3VuZFxuXHRcdCAqL1xuICAgIGRhdGFzZXQoY2hhcnQsIGUsIG9wdGlvbnMsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihlLCBjaGFydCk7XG4gICAgICBjb25zdCBheGlzID0gb3B0aW9ucy5heGlzIHx8ICd4eSc7XG4gICAgICBjb25zdCBpbmNsdWRlSW52aXNpYmxlID0gb3B0aW9ucy5pbmNsdWRlSW52aXNpYmxlIHx8IGZhbHNlO1xuICAgICAgbGV0IGl0ZW1zID0gb3B0aW9ucy5pbnRlcnNlY3RcbiAgICAgICAgPyBnZXRJbnRlcnNlY3RJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIHVzZUZpbmFsUG9zaXRpb24sIGluY2x1ZGVJbnZpc2libGUpIDpcbiAgICAgICAgZ2V0TmVhcmVzdEl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgZmFsc2UsIHVzZUZpbmFsUG9zaXRpb24sIGluY2x1ZGVJbnZpc2libGUpO1xuXG4gICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBkYXRhc2V0SW5kZXggPSBpdGVtc1swXS5kYXRhc2V0SW5kZXg7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBjaGFydC5nZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpLmRhdGE7XG4gICAgICAgIGl0ZW1zID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGl0ZW1zLnB1c2goe2VsZW1lbnQ6IGRhdGFbaV0sIGRhdGFzZXRJbmRleCwgaW5kZXg6IGl9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfSxcblxuICAgIC8qKlxuXHRcdCAqIFBvaW50IG1vZGUgcmV0dXJucyBhbGwgZWxlbWVudHMgdGhhdCBoaXQgdGVzdCBiYXNlZCBvbiB0aGUgZXZlbnQgcG9zaXRpb25cblx0XHQgKiBvZiB0aGUgZXZlbnRcblx0XHQgKiBAZnVuY3Rpb24gQ2hhcnQuSW50ZXJhY3Rpb24ubW9kZXMuaW50ZXJzZWN0XG5cdFx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnQgLSB0aGUgY2hhcnQgd2UgYXJlIHJldHVybmluZyBpdGVtcyBmcm9tXG5cdFx0ICogQHBhcmFtIHtFdmVudH0gZSAtIHRoZSBldmVudCB3ZSBhcmUgZmluZCB0aGluZ3MgYXRcblx0XHQgKiBAcGFyYW0ge0ludGVyYWN0aW9uT3B0aW9uc30gb3B0aW9ucyAtIG9wdGlvbnMgdG8gdXNlXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBbdXNlRmluYWxQb3NpdGlvbl0gLSB1c2UgZmluYWwgZWxlbWVudCBwb3NpdGlvbiAoYW5pbWF0aW9uIHRhcmdldClcblx0XHQgKiBAcmV0dXJuIHtJbnRlcmFjdGlvbkl0ZW1bXX0gLSBpdGVtcyB0aGF0IGFyZSBmb3VuZFxuXHRcdCAqL1xuICAgIHBvaW50KGNoYXJ0LCBlLCBvcHRpb25zLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGdldFJlbGF0aXZlUG9zaXRpb24oZSwgY2hhcnQpO1xuICAgICAgY29uc3QgYXhpcyA9IG9wdGlvbnMuYXhpcyB8fCAneHknO1xuICAgICAgY29uc3QgaW5jbHVkZUludmlzaWJsZSA9IG9wdGlvbnMuaW5jbHVkZUludmlzaWJsZSB8fCBmYWxzZTtcbiAgICAgIHJldHVybiBnZXRJbnRlcnNlY3RJdGVtcyhjaGFydCwgcG9zaXRpb24sIGF4aXMsIHVzZUZpbmFsUG9zaXRpb24sIGluY2x1ZGVJbnZpc2libGUpO1xuICAgIH0sXG5cbiAgICAvKipcblx0XHQgKiBuZWFyZXN0IG1vZGUgcmV0dXJucyB0aGUgZWxlbWVudCBjbG9zZXN0IHRvIHRoZSBwb2ludFxuXHRcdCAqIEBmdW5jdGlvbiBDaGFydC5JbnRlcmFjdGlvbi5tb2Rlcy5pbnRlcnNlY3Rcblx0XHQgKiBAcGFyYW0ge0NoYXJ0fSBjaGFydCAtIHRoZSBjaGFydCB3ZSBhcmUgcmV0dXJuaW5nIGl0ZW1zIGZyb21cblx0XHQgKiBAcGFyYW0ge0V2ZW50fSBlIC0gdGhlIGV2ZW50IHdlIGFyZSBmaW5kIHRoaW5ncyBhdFxuXHRcdCAqIEBwYXJhbSB7SW50ZXJhY3Rpb25PcHRpb25zfSBvcHRpb25zIC0gb3B0aW9ucyB0byB1c2Vcblx0XHQgKiBAcGFyYW0ge2Jvb2xlYW59IFt1c2VGaW5hbFBvc2l0aW9uXSAtIHVzZSBmaW5hbCBlbGVtZW50IHBvc2l0aW9uIChhbmltYXRpb24gdGFyZ2V0KVxuXHRcdCAqIEByZXR1cm4ge0ludGVyYWN0aW9uSXRlbVtdfSAtIGl0ZW1zIHRoYXQgYXJlIGZvdW5kXG5cdFx0ICovXG4gICAgbmVhcmVzdChjaGFydCwgZSwgb3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbikge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGUsIGNoYXJ0KTtcbiAgICAgIGNvbnN0IGF4aXMgPSBvcHRpb25zLmF4aXMgfHwgJ3h5JztcbiAgICAgIGNvbnN0IGluY2x1ZGVJbnZpc2libGUgPSBvcHRpb25zLmluY2x1ZGVJbnZpc2libGUgfHwgZmFsc2U7XG4gICAgICByZXR1cm4gZ2V0TmVhcmVzdEl0ZW1zKGNoYXJ0LCBwb3NpdGlvbiwgYXhpcywgb3B0aW9ucy5pbnRlcnNlY3QsIHVzZUZpbmFsUG9zaXRpb24sIGluY2x1ZGVJbnZpc2libGUpO1xuICAgIH0sXG5cbiAgICAvKipcblx0XHQgKiB4IG1vZGUgcmV0dXJucyB0aGUgZWxlbWVudHMgdGhhdCBoaXQtdGVzdCBhdCB0aGUgY3VycmVudCB4IGNvb3JkaW5hdGVcblx0XHQgKiBAZnVuY3Rpb24gQ2hhcnQuSW50ZXJhY3Rpb24ubW9kZXMueFxuXHRcdCAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0IHdlIGFyZSByZXR1cm5pbmcgaXRlbXMgZnJvbVxuXHRcdCAqIEBwYXJhbSB7RXZlbnR9IGUgLSB0aGUgZXZlbnQgd2UgYXJlIGZpbmQgdGhpbmdzIGF0XG5cdFx0ICogQHBhcmFtIHtJbnRlcmFjdGlvbk9wdGlvbnN9IG9wdGlvbnMgLSBvcHRpb25zIHRvIHVzZVxuXHRcdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VzZUZpbmFsUG9zaXRpb25dIC0gdXNlIGZpbmFsIGVsZW1lbnQgcG9zaXRpb24gKGFuaW1hdGlvbiB0YXJnZXQpXG5cdFx0ICogQHJldHVybiB7SW50ZXJhY3Rpb25JdGVtW119IC0gaXRlbXMgdGhhdCBhcmUgZm91bmRcblx0XHQgKi9cbiAgICB4KGNoYXJ0LCBlLCBvcHRpb25zLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGdldFJlbGF0aXZlUG9zaXRpb24oZSwgY2hhcnQpO1xuICAgICAgcmV0dXJuIGdldEF4aXNJdGVtcyhjaGFydCwgcG9zaXRpb24sICd4Jywgb3B0aW9ucy5pbnRlcnNlY3QsIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIH0sXG5cbiAgICAvKipcblx0XHQgKiB5IG1vZGUgcmV0dXJucyB0aGUgZWxlbWVudHMgdGhhdCBoaXQtdGVzdCBhdCB0aGUgY3VycmVudCB5IGNvb3JkaW5hdGVcblx0XHQgKiBAZnVuY3Rpb24gQ2hhcnQuSW50ZXJhY3Rpb24ubW9kZXMueVxuXHRcdCAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0IHdlIGFyZSByZXR1cm5pbmcgaXRlbXMgZnJvbVxuXHRcdCAqIEBwYXJhbSB7RXZlbnR9IGUgLSB0aGUgZXZlbnQgd2UgYXJlIGZpbmQgdGhpbmdzIGF0XG5cdFx0ICogQHBhcmFtIHtJbnRlcmFjdGlvbk9wdGlvbnN9IG9wdGlvbnMgLSBvcHRpb25zIHRvIHVzZVxuXHRcdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VzZUZpbmFsUG9zaXRpb25dIC0gdXNlIGZpbmFsIGVsZW1lbnQgcG9zaXRpb24gKGFuaW1hdGlvbiB0YXJnZXQpXG5cdFx0ICogQHJldHVybiB7SW50ZXJhY3Rpb25JdGVtW119IC0gaXRlbXMgdGhhdCBhcmUgZm91bmRcblx0XHQgKi9cbiAgICB5KGNoYXJ0LCBlLCBvcHRpb25zLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IGdldFJlbGF0aXZlUG9zaXRpb24oZSwgY2hhcnQpO1xuICAgICAgcmV0dXJuIGdldEF4aXNJdGVtcyhjaGFydCwgcG9zaXRpb24sICd5Jywgb3B0aW9ucy5pbnRlcnNlY3QsIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIH1cbiAgfVxufTtcbiIsICJpbXBvcnQge2RlZmluZWQsIGVhY2gsIGlzT2JqZWN0fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5pbXBvcnQge3RvUGFkZGluZ30gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLm9wdGlvbnMuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL2NvcmUuY29udHJvbGxlci5qcycpLmRlZmF1bHQgfSBDaGFydFxuICovXG5cbmNvbnN0IFNUQVRJQ19QT1NJVElPTlMgPSBbJ2xlZnQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbSddO1xuXG5mdW5jdGlvbiBmaWx0ZXJCeVBvc2l0aW9uKGFycmF5LCBwb3NpdGlvbikge1xuICByZXR1cm4gYXJyYXkuZmlsdGVyKHYgPT4gdi5wb3MgPT09IHBvc2l0aW9uKTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyRHluYW1pY1Bvc2l0aW9uQnlBeGlzKGFycmF5LCBheGlzKSB7XG4gIHJldHVybiBhcnJheS5maWx0ZXIodiA9PiBTVEFUSUNfUE9TSVRJT05TLmluZGV4T2Yodi5wb3MpID09PSAtMSAmJiB2LmJveC5heGlzID09PSBheGlzKTtcbn1cblxuZnVuY3Rpb24gc29ydEJ5V2VpZ2h0KGFycmF5LCByZXZlcnNlKSB7XG4gIHJldHVybiBhcnJheS5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgdjAgPSByZXZlcnNlID8gYiA6IGE7XG4gICAgY29uc3QgdjEgPSByZXZlcnNlID8gYSA6IGI7XG4gICAgcmV0dXJuIHYwLndlaWdodCA9PT0gdjEud2VpZ2h0ID9cbiAgICAgIHYwLmluZGV4IC0gdjEuaW5kZXggOlxuICAgICAgdjAud2VpZ2h0IC0gdjEud2VpZ2h0O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gd3JhcEJveGVzKGJveGVzKSB7XG4gIGNvbnN0IGxheW91dEJveGVzID0gW107XG4gIGxldCBpLCBpbGVuLCBib3gsIHBvcywgc3RhY2ssIHN0YWNrV2VpZ2h0O1xuXG4gIGZvciAoaSA9IDAsIGlsZW4gPSAoYm94ZXMgfHwgW10pLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgIGJveCA9IGJveGVzW2ldO1xuICAgICh7cG9zaXRpb246IHBvcywgb3B0aW9uczoge3N0YWNrLCBzdGFja1dlaWdodCA9IDF9fSA9IGJveCk7XG4gICAgbGF5b3V0Qm94ZXMucHVzaCh7XG4gICAgICBpbmRleDogaSxcbiAgICAgIGJveCxcbiAgICAgIHBvcyxcbiAgICAgIGhvcml6b250YWw6IGJveC5pc0hvcml6b250YWwoKSxcbiAgICAgIHdlaWdodDogYm94LndlaWdodCxcbiAgICAgIHN0YWNrOiBzdGFjayAmJiAocG9zICsgc3RhY2spLFxuICAgICAgc3RhY2tXZWlnaHRcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbGF5b3V0Qm94ZXM7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkU3RhY2tzKGxheW91dHMpIHtcbiAgY29uc3Qgc3RhY2tzID0ge307XG4gIGZvciAoY29uc3Qgd3JhcCBvZiBsYXlvdXRzKSB7XG4gICAgY29uc3Qge3N0YWNrLCBwb3MsIHN0YWNrV2VpZ2h0fSA9IHdyYXA7XG4gICAgaWYgKCFzdGFjayB8fCAhU1RBVElDX1BPU0lUSU9OUy5pbmNsdWRlcyhwb3MpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgX3N0YWNrID0gc3RhY2tzW3N0YWNrXSB8fCAoc3RhY2tzW3N0YWNrXSA9IHtjb3VudDogMCwgcGxhY2VkOiAwLCB3ZWlnaHQ6IDAsIHNpemU6IDB9KTtcbiAgICBfc3RhY2suY291bnQrKztcbiAgICBfc3RhY2sud2VpZ2h0ICs9IHN0YWNrV2VpZ2h0O1xuICB9XG4gIHJldHVybiBzdGFja3M7XG59XG5cbi8qKlxuICogc3RvcmUgZGltZW5zaW9ucyB1c2VkIGluc3RlYWQgb2YgYXZhaWxhYmxlIGNoYXJ0QXJlYSBpbiBmaXRCb3hlc1xuICoqL1xuZnVuY3Rpb24gc2V0TGF5b3V0RGltcyhsYXlvdXRzLCBwYXJhbXMpIHtcbiAgY29uc3Qgc3RhY2tzID0gYnVpbGRTdGFja3MobGF5b3V0cyk7XG4gIGNvbnN0IHt2Qm94TWF4V2lkdGgsIGhCb3hNYXhIZWlnaHR9ID0gcGFyYW1zO1xuICBsZXQgaSwgaWxlbiwgbGF5b3V0O1xuICBmb3IgKGkgPSAwLCBpbGVuID0gbGF5b3V0cy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICBsYXlvdXQgPSBsYXlvdXRzW2ldO1xuICAgIGNvbnN0IHtmdWxsU2l6ZX0gPSBsYXlvdXQuYm94O1xuICAgIGNvbnN0IHN0YWNrID0gc3RhY2tzW2xheW91dC5zdGFja107XG4gICAgY29uc3QgZmFjdG9yID0gc3RhY2sgJiYgbGF5b3V0LnN0YWNrV2VpZ2h0IC8gc3RhY2sud2VpZ2h0O1xuICAgIGlmIChsYXlvdXQuaG9yaXpvbnRhbCkge1xuICAgICAgbGF5b3V0LndpZHRoID0gZmFjdG9yID8gZmFjdG9yICogdkJveE1heFdpZHRoIDogZnVsbFNpemUgJiYgcGFyYW1zLmF2YWlsYWJsZVdpZHRoO1xuICAgICAgbGF5b3V0LmhlaWdodCA9IGhCb3hNYXhIZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxheW91dC53aWR0aCA9IHZCb3hNYXhXaWR0aDtcbiAgICAgIGxheW91dC5oZWlnaHQgPSBmYWN0b3IgPyBmYWN0b3IgKiBoQm94TWF4SGVpZ2h0IDogZnVsbFNpemUgJiYgcGFyYW1zLmF2YWlsYWJsZUhlaWdodDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0YWNrcztcbn1cblxuZnVuY3Rpb24gYnVpbGRMYXlvdXRCb3hlcyhib3hlcykge1xuICBjb25zdCBsYXlvdXRCb3hlcyA9IHdyYXBCb3hlcyhib3hlcyk7XG4gIGNvbnN0IGZ1bGxTaXplID0gc29ydEJ5V2VpZ2h0KGxheW91dEJveGVzLmZpbHRlcih3cmFwID0+IHdyYXAuYm94LmZ1bGxTaXplKSwgdHJ1ZSk7XG4gIGNvbnN0IGxlZnQgPSBzb3J0QnlXZWlnaHQoZmlsdGVyQnlQb3NpdGlvbihsYXlvdXRCb3hlcywgJ2xlZnQnKSwgdHJ1ZSk7XG4gIGNvbnN0IHJpZ2h0ID0gc29ydEJ5V2VpZ2h0KGZpbHRlckJ5UG9zaXRpb24obGF5b3V0Qm94ZXMsICdyaWdodCcpKTtcbiAgY29uc3QgdG9wID0gc29ydEJ5V2VpZ2h0KGZpbHRlckJ5UG9zaXRpb24obGF5b3V0Qm94ZXMsICd0b3AnKSwgdHJ1ZSk7XG4gIGNvbnN0IGJvdHRvbSA9IHNvcnRCeVdlaWdodChmaWx0ZXJCeVBvc2l0aW9uKGxheW91dEJveGVzLCAnYm90dG9tJykpO1xuICBjb25zdCBjZW50ZXJIb3Jpem9udGFsID0gZmlsdGVyRHluYW1pY1Bvc2l0aW9uQnlBeGlzKGxheW91dEJveGVzLCAneCcpO1xuICBjb25zdCBjZW50ZXJWZXJ0aWNhbCA9IGZpbHRlckR5bmFtaWNQb3NpdGlvbkJ5QXhpcyhsYXlvdXRCb3hlcywgJ3knKTtcblxuICByZXR1cm4ge1xuICAgIGZ1bGxTaXplLFxuICAgIGxlZnRBbmRUb3A6IGxlZnQuY29uY2F0KHRvcCksXG4gICAgcmlnaHRBbmRCb3R0b206IHJpZ2h0LmNvbmNhdChjZW50ZXJWZXJ0aWNhbCkuY29uY2F0KGJvdHRvbSkuY29uY2F0KGNlbnRlckhvcml6b250YWwpLFxuICAgIGNoYXJ0QXJlYTogZmlsdGVyQnlQb3NpdGlvbihsYXlvdXRCb3hlcywgJ2NoYXJ0QXJlYScpLFxuICAgIHZlcnRpY2FsOiBsZWZ0LmNvbmNhdChyaWdodCkuY29uY2F0KGNlbnRlclZlcnRpY2FsKSxcbiAgICBob3Jpem9udGFsOiB0b3AuY29uY2F0KGJvdHRvbSkuY29uY2F0KGNlbnRlckhvcml6b250YWwpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldENvbWJpbmVkTWF4KG1heFBhZGRpbmcsIGNoYXJ0QXJlYSwgYSwgYikge1xuICByZXR1cm4gTWF0aC5tYXgobWF4UGFkZGluZ1thXSwgY2hhcnRBcmVhW2FdKSArIE1hdGgubWF4KG1heFBhZGRpbmdbYl0sIGNoYXJ0QXJlYVtiXSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU1heFBhZGRpbmcobWF4UGFkZGluZywgYm94UGFkZGluZykge1xuICBtYXhQYWRkaW5nLnRvcCA9IE1hdGgubWF4KG1heFBhZGRpbmcudG9wLCBib3hQYWRkaW5nLnRvcCk7XG4gIG1heFBhZGRpbmcubGVmdCA9IE1hdGgubWF4KG1heFBhZGRpbmcubGVmdCwgYm94UGFkZGluZy5sZWZ0KTtcbiAgbWF4UGFkZGluZy5ib3R0b20gPSBNYXRoLm1heChtYXhQYWRkaW5nLmJvdHRvbSwgYm94UGFkZGluZy5ib3R0b20pO1xuICBtYXhQYWRkaW5nLnJpZ2h0ID0gTWF0aC5tYXgobWF4UGFkZGluZy5yaWdodCwgYm94UGFkZGluZy5yaWdodCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURpbXMoY2hhcnRBcmVhLCBwYXJhbXMsIGxheW91dCwgc3RhY2tzKSB7XG4gIGNvbnN0IHtwb3MsIGJveH0gPSBsYXlvdXQ7XG4gIGNvbnN0IG1heFBhZGRpbmcgPSBjaGFydEFyZWEubWF4UGFkZGluZztcblxuICAvLyBkeW5hbWljYWxseSBwbGFjZWQgYm94ZXMgc2l6ZSBpcyBub3QgY29uc2lkZXJlZFxuICBpZiAoIWlzT2JqZWN0KHBvcykpIHtcbiAgICBpZiAobGF5b3V0LnNpemUpIHtcbiAgICAgIC8vIHRoaXMgbGF5b3V0IHdhcyBhbHJlYWR5IGNvdW50ZWQgZm9yLCBsZXRzIGZpcnN0IHJlZHVjZSBvbGQgc2l6ZVxuICAgICAgY2hhcnRBcmVhW3Bvc10gLT0gbGF5b3V0LnNpemU7XG4gICAgfVxuICAgIGNvbnN0IHN0YWNrID0gc3RhY2tzW2xheW91dC5zdGFja10gfHwge3NpemU6IDAsIGNvdW50OiAxfTtcbiAgICBzdGFjay5zaXplID0gTWF0aC5tYXgoc3RhY2suc2l6ZSwgbGF5b3V0Lmhvcml6b250YWwgPyBib3guaGVpZ2h0IDogYm94LndpZHRoKTtcbiAgICBsYXlvdXQuc2l6ZSA9IHN0YWNrLnNpemUgLyBzdGFjay5jb3VudDtcbiAgICBjaGFydEFyZWFbcG9zXSArPSBsYXlvdXQuc2l6ZTtcbiAgfVxuXG4gIGlmIChib3guZ2V0UGFkZGluZykge1xuICAgIHVwZGF0ZU1heFBhZGRpbmcobWF4UGFkZGluZywgYm94LmdldFBhZGRpbmcoKSk7XG4gIH1cblxuICBjb25zdCBuZXdXaWR0aCA9IE1hdGgubWF4KDAsIHBhcmFtcy5vdXRlcldpZHRoIC0gZ2V0Q29tYmluZWRNYXgobWF4UGFkZGluZywgY2hhcnRBcmVhLCAnbGVmdCcsICdyaWdodCcpKTtcbiAgY29uc3QgbmV3SGVpZ2h0ID0gTWF0aC5tYXgoMCwgcGFyYW1zLm91dGVySGVpZ2h0IC0gZ2V0Q29tYmluZWRNYXgobWF4UGFkZGluZywgY2hhcnRBcmVhLCAndG9wJywgJ2JvdHRvbScpKTtcbiAgY29uc3Qgd2lkdGhDaGFuZ2VkID0gbmV3V2lkdGggIT09IGNoYXJ0QXJlYS53O1xuICBjb25zdCBoZWlnaHRDaGFuZ2VkID0gbmV3SGVpZ2h0ICE9PSBjaGFydEFyZWEuaDtcbiAgY2hhcnRBcmVhLncgPSBuZXdXaWR0aDtcbiAgY2hhcnRBcmVhLmggPSBuZXdIZWlnaHQ7XG5cbiAgLy8gcmV0dXJuIGJvb2xlYW5zIG9uIHRoZSBjaGFuZ2VzIHBlciBkaXJlY3Rpb25cbiAgcmV0dXJuIGxheW91dC5ob3Jpem9udGFsXG4gICAgPyB7c2FtZTogd2lkdGhDaGFuZ2VkLCBvdGhlcjogaGVpZ2h0Q2hhbmdlZH1cbiAgICA6IHtzYW1lOiBoZWlnaHRDaGFuZ2VkLCBvdGhlcjogd2lkdGhDaGFuZ2VkfTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF4UGFkZGluZyhjaGFydEFyZWEpIHtcbiAgY29uc3QgbWF4UGFkZGluZyA9IGNoYXJ0QXJlYS5tYXhQYWRkaW5nO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZVBvcyhwb3MpIHtcbiAgICBjb25zdCBjaGFuZ2UgPSBNYXRoLm1heChtYXhQYWRkaW5nW3Bvc10gLSBjaGFydEFyZWFbcG9zXSwgMCk7XG4gICAgY2hhcnRBcmVhW3Bvc10gKz0gY2hhbmdlO1xuICAgIHJldHVybiBjaGFuZ2U7XG4gIH1cbiAgY2hhcnRBcmVhLnkgKz0gdXBkYXRlUG9zKCd0b3AnKTtcbiAgY2hhcnRBcmVhLnggKz0gdXBkYXRlUG9zKCdsZWZ0Jyk7XG4gIHVwZGF0ZVBvcygncmlnaHQnKTtcbiAgdXBkYXRlUG9zKCdib3R0b20nKTtcbn1cblxuZnVuY3Rpb24gZ2V0TWFyZ2lucyhob3Jpem9udGFsLCBjaGFydEFyZWEpIHtcbiAgY29uc3QgbWF4UGFkZGluZyA9IGNoYXJ0QXJlYS5tYXhQYWRkaW5nO1xuXG4gIGZ1bmN0aW9uIG1hcmdpbkZvclBvc2l0aW9ucyhwb3NpdGlvbnMpIHtcbiAgICBjb25zdCBtYXJnaW4gPSB7bGVmdDogMCwgdG9wOiAwLCByaWdodDogMCwgYm90dG9tOiAwfTtcbiAgICBwb3NpdGlvbnMuZm9yRWFjaCgocG9zKSA9PiB7XG4gICAgICBtYXJnaW5bcG9zXSA9IE1hdGgubWF4KGNoYXJ0QXJlYVtwb3NdLCBtYXhQYWRkaW5nW3Bvc10pO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXJnaW47XG4gIH1cblxuICByZXR1cm4gaG9yaXpvbnRhbFxuICAgID8gbWFyZ2luRm9yUG9zaXRpb25zKFsnbGVmdCcsICdyaWdodCddKVxuICAgIDogbWFyZ2luRm9yUG9zaXRpb25zKFsndG9wJywgJ2JvdHRvbSddKTtcbn1cblxuZnVuY3Rpb24gZml0Qm94ZXMoYm94ZXMsIGNoYXJ0QXJlYSwgcGFyYW1zLCBzdGFja3MpIHtcbiAgY29uc3QgcmVmaXRCb3hlcyA9IFtdO1xuICBsZXQgaSwgaWxlbiwgbGF5b3V0LCBib3gsIHJlZml0LCBjaGFuZ2VkO1xuXG4gIGZvciAoaSA9IDAsIGlsZW4gPSBib3hlcy5sZW5ndGgsIHJlZml0ID0gMDsgaSA8IGlsZW47ICsraSkge1xuICAgIGxheW91dCA9IGJveGVzW2ldO1xuICAgIGJveCA9IGxheW91dC5ib3g7XG5cbiAgICBib3gudXBkYXRlKFxuICAgICAgbGF5b3V0LndpZHRoIHx8IGNoYXJ0QXJlYS53LFxuICAgICAgbGF5b3V0LmhlaWdodCB8fCBjaGFydEFyZWEuaCxcbiAgICAgIGdldE1hcmdpbnMobGF5b3V0Lmhvcml6b250YWwsIGNoYXJ0QXJlYSlcbiAgICApO1xuICAgIGNvbnN0IHtzYW1lLCBvdGhlcn0gPSB1cGRhdGVEaW1zKGNoYXJ0QXJlYSwgcGFyYW1zLCBsYXlvdXQsIHN0YWNrcyk7XG5cbiAgICAvLyBEaW1lbnNpb25zIGNoYW5nZWQgYW5kIHRoZXJlIHdlcmUgbm9uIGZ1bGwgd2lkdGggYm94ZXMgYmVmb3JlIHRoaXNcbiAgICAvLyAtPiB3ZSBoYXZlIHRvIHJlZml0IHRob3NlXG4gICAgcmVmaXQgfD0gc2FtZSAmJiByZWZpdEJveGVzLmxlbmd0aDtcblxuICAgIC8vIENoYXJ0IGFyZWEgY2hhbmdlZCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uXG4gICAgY2hhbmdlZCA9IGNoYW5nZWQgfHwgb3RoZXI7XG5cbiAgICBpZiAoIWJveC5mdWxsU2l6ZSkgeyAvLyBmdWxsU2l6ZSBib3hlcyBkb24ndCBuZWVkIHRvIGJlIHJlLWZpdHRlZCBpbiBhbnkgY2FzZVxuICAgICAgcmVmaXRCb3hlcy5wdXNoKGxheW91dCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlZml0ICYmIGZpdEJveGVzKHJlZml0Qm94ZXMsIGNoYXJ0QXJlYSwgcGFyYW1zLCBzdGFja3MpIHx8IGNoYW5nZWQ7XG59XG5cbmZ1bmN0aW9uIHNldEJveERpbXMoYm94LCBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHtcbiAgYm94LnRvcCA9IHRvcDtcbiAgYm94LmxlZnQgPSBsZWZ0O1xuICBib3gucmlnaHQgPSBsZWZ0ICsgd2lkdGg7XG4gIGJveC5ib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG4gIGJveC53aWR0aCA9IHdpZHRoO1xuICBib3guaGVpZ2h0ID0gaGVpZ2h0O1xufVxuXG5mdW5jdGlvbiBwbGFjZUJveGVzKGJveGVzLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKSB7XG4gIGNvbnN0IHVzZXJQYWRkaW5nID0gcGFyYW1zLnBhZGRpbmc7XG4gIGxldCB7eCwgeX0gPSBjaGFydEFyZWE7XG5cbiAgZm9yIChjb25zdCBsYXlvdXQgb2YgYm94ZXMpIHtcbiAgICBjb25zdCBib3ggPSBsYXlvdXQuYm94O1xuICAgIGNvbnN0IHN0YWNrID0gc3RhY2tzW2xheW91dC5zdGFja10gfHwge2NvdW50OiAxLCBwbGFjZWQ6IDAsIHdlaWdodDogMX07XG4gICAgY29uc3Qgd2VpZ2h0ID0gKGxheW91dC5zdGFja1dlaWdodCAvIHN0YWNrLndlaWdodCkgfHwgMTtcbiAgICBpZiAobGF5b3V0Lmhvcml6b250YWwpIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gY2hhcnRBcmVhLncgKiB3ZWlnaHQ7XG4gICAgICBjb25zdCBoZWlnaHQgPSBzdGFjay5zaXplIHx8IGJveC5oZWlnaHQ7XG4gICAgICBpZiAoZGVmaW5lZChzdGFjay5zdGFydCkpIHtcbiAgICAgICAgeSA9IHN0YWNrLnN0YXJ0O1xuICAgICAgfVxuICAgICAgaWYgKGJveC5mdWxsU2l6ZSkge1xuICAgICAgICBzZXRCb3hEaW1zKGJveCwgdXNlclBhZGRpbmcubGVmdCwgeSwgcGFyYW1zLm91dGVyV2lkdGggLSB1c2VyUGFkZGluZy5yaWdodCAtIHVzZXJQYWRkaW5nLmxlZnQsIGhlaWdodCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRCb3hEaW1zKGJveCwgY2hhcnRBcmVhLmxlZnQgKyBzdGFjay5wbGFjZWQsIHksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgc3RhY2suc3RhcnQgPSB5O1xuICAgICAgc3RhY2sucGxhY2VkICs9IHdpZHRoO1xuICAgICAgeSA9IGJveC5ib3R0b207XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGNoYXJ0QXJlYS5oICogd2VpZ2h0O1xuICAgICAgY29uc3Qgd2lkdGggPSBzdGFjay5zaXplIHx8IGJveC53aWR0aDtcbiAgICAgIGlmIChkZWZpbmVkKHN0YWNrLnN0YXJ0KSkge1xuICAgICAgICB4ID0gc3RhY2suc3RhcnQ7XG4gICAgICB9XG4gICAgICBpZiAoYm94LmZ1bGxTaXplKSB7XG4gICAgICAgIHNldEJveERpbXMoYm94LCB4LCB1c2VyUGFkZGluZy50b3AsIHdpZHRoLCBwYXJhbXMub3V0ZXJIZWlnaHQgLSB1c2VyUGFkZGluZy5ib3R0b20gLSB1c2VyUGFkZGluZy50b3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0Qm94RGltcyhib3gsIHgsIGNoYXJ0QXJlYS50b3AgKyBzdGFjay5wbGFjZWQsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgc3RhY2suc3RhcnQgPSB4O1xuICAgICAgc3RhY2sucGxhY2VkICs9IGhlaWdodDtcbiAgICAgIHggPSBib3gucmlnaHQ7XG4gICAgfVxuICB9XG5cbiAgY2hhcnRBcmVhLnggPSB4O1xuICBjaGFydEFyZWEueSA9IHk7XG59XG5cbi8qKlxuICogQGludGVyZmFjZSBMYXlvdXRJdGVtXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBMYXlvdXRJdGVtXG4gKiBAcHJvcCB7c3RyaW5nfSBwb3NpdGlvbiAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgaXRlbSBpbiB0aGUgY2hhcnQgbGF5b3V0LiBQb3NzaWJsZSB2YWx1ZXMgYXJlXG4gKiAnbGVmdCcsICd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgYW5kICdjaGFydEFyZWEnXG4gKiBAcHJvcCB7bnVtYmVyfSB3ZWlnaHQgLSBUaGUgd2VpZ2h0IHVzZWQgdG8gc29ydCB0aGUgaXRlbS4gSGlnaGVyIHdlaWdodHMgYXJlIGZ1cnRoZXIgYXdheSBmcm9tIHRoZSBjaGFydCBhcmVhXG4gKiBAcHJvcCB7Ym9vbGVhbn0gZnVsbFNpemUgLSBpZiB0cnVlLCBhbmQgdGhlIGl0ZW0gaXMgaG9yaXpvbnRhbCwgdGhlbiBwdXNoIHZlcnRpY2FsIGJveGVzIGRvd25cbiAqIEBwcm9wIHtmdW5jdGlvbn0gaXNIb3Jpem9udGFsIC0gcmV0dXJucyB0cnVlIGlmIHRoZSBsYXlvdXQgaXRlbSBpcyBob3Jpem9udGFsIChpZS4gdG9wIG9yIGJvdHRvbSlcbiAqIEBwcm9wIHtmdW5jdGlvbn0gdXBkYXRlIC0gVGFrZXMgdHdvIHBhcmFtZXRlcnM6IHdpZHRoIGFuZCBoZWlnaHQuIFJldHVybnMgc2l6ZSBvZiBpdGVtXG4gKiBAcHJvcCB7ZnVuY3Rpb259IGRyYXcgLSBEcmF3cyB0aGUgZWxlbWVudFxuICogQHByb3Age2Z1bmN0aW9ufSBbZ2V0UGFkZGluZ10gLSAgUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBwYWRkaW5nIG9uIHRoZSBlZGdlc1xuICogQHByb3Age251bWJlcn0gd2lkdGggLSBXaWR0aCBvZiBpdGVtLiBNdXN0IGJlIHZhbGlkIGFmdGVyIHVwZGF0ZSgpXG4gKiBAcHJvcCB7bnVtYmVyfSBoZWlnaHQgLSBIZWlnaHQgb2YgaXRlbS4gTXVzdCBiZSB2YWxpZCBhZnRlciB1cGRhdGUoKVxuICogQHByb3Age251bWJlcn0gbGVmdCAtIExlZnQgZWRnZSBvZiB0aGUgaXRlbS4gU2V0IGJ5IGxheW91dCBzeXN0ZW0gYW5kIGNhbm5vdCBiZSB1c2VkIGluIHVwZGF0ZVxuICogQHByb3Age251bWJlcn0gdG9wIC0gVG9wIGVkZ2Ugb2YgdGhlIGl0ZW0uIFNldCBieSBsYXlvdXQgc3lzdGVtIGFuZCBjYW5ub3QgYmUgdXNlZCBpbiB1cGRhdGVcbiAqIEBwcm9wIHtudW1iZXJ9IHJpZ2h0IC0gUmlnaHQgZWRnZSBvZiB0aGUgaXRlbS4gU2V0IGJ5IGxheW91dCBzeXN0ZW0gYW5kIGNhbm5vdCBiZSB1c2VkIGluIHVwZGF0ZVxuICogQHByb3Age251bWJlcn0gYm90dG9tIC0gQm90dG9tIGVkZ2Ugb2YgdGhlIGl0ZW0uIFNldCBieSBsYXlvdXQgc3lzdGVtIGFuZCBjYW5ub3QgYmUgdXNlZCBpbiB1cGRhdGVcbiAqL1xuXG4vLyBUaGUgbGF5b3V0IHNlcnZpY2UgaXMgdmVyeSBzZWxmIGV4cGxhbmF0b3J5LiAgSXQncyByZXNwb25zaWJsZSBmb3IgdGhlIGxheW91dCB3aXRoaW4gYSBjaGFydC5cbi8vIFNjYWxlcywgTGVnZW5kcyBhbmQgUGx1Z2lucyBhbGwgcmVseSBvbiB0aGUgbGF5b3V0IHNlcnZpY2UgYW5kIGNhbiBlYXNpbHkgcmVnaXN0ZXIgdG8gYmUgcGxhY2VkIGFueXdoZXJlIHRoZXkgbmVlZFxuLy8gSXQgaXMgdGhpcyBzZXJ2aWNlJ3MgcmVzcG9uc2liaWxpdHkgb2YgY2Fycnlpbmcgb3V0IHRoYXQgbGF5b3V0LlxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuXHQgKiBSZWdpc3RlciBhIGJveCB0byBhIGNoYXJ0LlxuXHQgKiBBIGJveCBpcyBzaW1wbHkgYSByZWZlcmVuY2UgdG8gYW4gb2JqZWN0IHRoYXQgcmVxdWlyZXMgbGF5b3V0LiBlZy4gU2NhbGVzLCBMZWdlbmQsIFRpdGxlLlxuXHQgKiBAcGFyYW0ge0NoYXJ0fSBjaGFydCAtIHRoZSBjaGFydCB0byB1c2Vcblx0ICogQHBhcmFtIHtMYXlvdXRJdGVtfSBpdGVtIC0gdGhlIGl0ZW0gdG8gYWRkIHRvIGJlIGxhaWQgb3V0XG5cdCAqL1xuICBhZGRCb3goY2hhcnQsIGl0ZW0pIHtcbiAgICBpZiAoIWNoYXJ0LmJveGVzKSB7XG4gICAgICBjaGFydC5ib3hlcyA9IFtdO1xuICAgIH1cblxuICAgIC8vIGluaXRpYWxpemUgaXRlbSB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICAgaXRlbS5mdWxsU2l6ZSA9IGl0ZW0uZnVsbFNpemUgfHwgZmFsc2U7XG4gICAgaXRlbS5wb3NpdGlvbiA9IGl0ZW0ucG9zaXRpb24gfHwgJ3RvcCc7XG4gICAgaXRlbS53ZWlnaHQgPSBpdGVtLndlaWdodCB8fCAwO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpdGVtLl9sYXllcnMgPSBpdGVtLl9sYXllcnMgfHwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgejogMCxcbiAgICAgICAgZHJhdyhjaGFydEFyZWEpIHtcbiAgICAgICAgICBpdGVtLmRyYXcoY2hhcnRBcmVhKTtcbiAgICAgICAgfVxuICAgICAgfV07XG4gICAgfTtcblxuICAgIGNoYXJ0LmJveGVzLnB1c2goaXRlbSk7XG4gIH0sXG5cbiAgLyoqXG5cdCAqIFJlbW92ZSBhIGxheW91dEl0ZW0gZnJvbSBhIGNoYXJ0XG5cdCAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0IHRvIHJlbW92ZSB0aGUgYm94IGZyb21cblx0ICogQHBhcmFtIHtMYXlvdXRJdGVtfSBsYXlvdXRJdGVtIC0gdGhlIGl0ZW0gdG8gcmVtb3ZlIGZyb20gdGhlIGxheW91dFxuXHQgKi9cbiAgcmVtb3ZlQm94KGNoYXJ0LCBsYXlvdXRJdGVtKSB7XG4gICAgY29uc3QgaW5kZXggPSBjaGFydC5ib3hlcyA/IGNoYXJ0LmJveGVzLmluZGV4T2YobGF5b3V0SXRlbSkgOiAtMTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBjaGFydC5ib3hlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfSxcblxuICAvKipcblx0ICogU2V0cyAob3IgdXBkYXRlcykgb3B0aW9ucyBvbiB0aGUgZ2l2ZW4gYGl0ZW1gLlxuXHQgKiBAcGFyYW0ge0NoYXJ0fSBjaGFydCAtIHRoZSBjaGFydCBpbiB3aGljaCB0aGUgaXRlbSBsaXZlcyAob3Igd2lsbCBiZSBhZGRlZCB0bylcblx0ICogQHBhcmFtIHtMYXlvdXRJdGVtfSBpdGVtIC0gdGhlIGl0ZW0gdG8gY29uZmlndXJlIHdpdGggdGhlIGdpdmVuIG9wdGlvbnNcblx0ICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSB0aGUgbmV3IGl0ZW0gb3B0aW9ucy5cblx0ICovXG4gIGNvbmZpZ3VyZShjaGFydCwgaXRlbSwgb3B0aW9ucykge1xuICAgIGl0ZW0uZnVsbFNpemUgPSBvcHRpb25zLmZ1bGxTaXplO1xuICAgIGl0ZW0ucG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uO1xuICAgIGl0ZW0ud2VpZ2h0ID0gb3B0aW9ucy53ZWlnaHQ7XG4gIH0sXG5cbiAgLyoqXG5cdCAqIEZpdHMgYm94ZXMgb2YgdGhlIGdpdmVuIGNoYXJ0IGludG8gdGhlIGdpdmVuIHNpemUgYnkgaGF2aW5nIGVhY2ggYm94IG1lYXN1cmUgaXRzZWxmXG5cdCAqIHRoZW4gcnVubmluZyBhIGZpdHRpbmcgYWxnb3JpdGhtXG5cdCAqIEBwYXJhbSB7Q2hhcnR9IGNoYXJ0IC0gdGhlIGNoYXJ0XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIHRoZSB3aWR0aCB0byBmaXQgaW50b1xuXHQgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gdGhlIGhlaWdodCB0byBmaXQgaW50b1xuICAgKiBAcGFyYW0ge251bWJlcn0gbWluUGFkZGluZyAtIG1pbmltdW0gcGFkZGluZyByZXF1aXJlZCBmb3IgZWFjaCBzaWRlIG9mIGNoYXJ0IGFyZWFcblx0ICovXG4gIHVwZGF0ZShjaGFydCwgd2lkdGgsIGhlaWdodCwgbWluUGFkZGluZykge1xuICAgIGlmICghY2hhcnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKGNoYXJ0Lm9wdGlvbnMubGF5b3V0LnBhZGRpbmcpO1xuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gTWF0aC5tYXgod2lkdGggLSBwYWRkaW5nLndpZHRoLCAwKTtcbiAgICBjb25zdCBhdmFpbGFibGVIZWlnaHQgPSBNYXRoLm1heChoZWlnaHQgLSBwYWRkaW5nLmhlaWdodCwgMCk7XG4gICAgY29uc3QgYm94ZXMgPSBidWlsZExheW91dEJveGVzKGNoYXJ0LmJveGVzKTtcbiAgICBjb25zdCB2ZXJ0aWNhbEJveGVzID0gYm94ZXMudmVydGljYWw7XG4gICAgY29uc3QgaG9yaXpvbnRhbEJveGVzID0gYm94ZXMuaG9yaXpvbnRhbDtcblxuICAgIC8vIEJlZm9yZSBhbnkgY2hhbmdlcyBhcmUgbWFkZSwgbm90aWZ5IGJveGVzIHRoYXQgYW4gdXBkYXRlIGlzIGFib3V0IHRvIGJlaW5nXG4gICAgLy8gVGhpcyBpcyB1c2VkIHRvIGNsZWFyIGFueSBjYWNoZWQgZGF0YSAoZS5nLiBzY2FsZSBsaW1pdHMpXG4gICAgZWFjaChjaGFydC5ib3hlcywgYm94ID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYm94LmJlZm9yZUxheW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBib3guYmVmb3JlTGF5b3V0KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBFc3NlbnRpYWxseSB3ZSBub3cgaGF2ZSBhbnkgbnVtYmVyIG9mIGJveGVzIG9uIGVhY2ggb2YgdGhlIDQgc2lkZXMuXG4gICAgLy8gT3VyIGNhbnZhcyBsb29rcyBsaWtlIHRoZSBmb2xsb3dpbmcuXG4gICAgLy8gVGhlIGFyZWFzIEwxIGFuZCBMMiBhcmUgdGhlIGxlZnQgYXhlcy4gUjEgaXMgdGhlIHJpZ2h0IGF4aXMsIFQxIGlzIHRoZSB0b3AgYXhpcyBhbmRcbiAgICAvLyBCMSBpcyB0aGUgYm90dG9tIGF4aXNcbiAgICAvLyBUaGVyZSBhcmUgYWxzbyA0IHF1YWRyYW50LWxpa2UgbG9jYXRpb25zIChsZWZ0IHRvIHJpZ2h0IGluc3RlYWQgb2YgY2xvY2t3aXNlKSByZXNlcnZlZCBmb3IgY2hhcnQgb3ZlcmxheXNcbiAgICAvLyBUaGVzZSBsb2NhdGlvbnMgYXJlIHNpbmdsZS1ib3ggbG9jYXRpb25zIG9ubHksIHdoZW4gdHJ5aW5nIHRvIHJlZ2lzdGVyIGEgY2hhcnRBcmVhIGxvY2F0aW9uIHRoYXQgaXMgYWxyZWFkeSB0YWtlbixcbiAgICAvLyBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAgICAvL1xuICAgIC8vIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vIHwgICAgICAgICAgICAgICAgICBUMSAoRnVsbCBXaWR0aCkgICAgICAgICAgICAgICAgICAgfFxuICAgIC8vIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vIHwgICAgfCAgICB8ICAgICAgICAgICAgICAgICBUMiAgICAgICAgICAgICAgICAgIHwgICAgfFxuICAgIC8vIHwgICAgfC0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tfFxuICAgIC8vIHwgICAgfCAgICB8IEMxIHwgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEMyIHwgICAgfFxuICAgIC8vIHwgICAgfCAgICB8LS0tLXwgICAgICAgICAgICAgICAgICAgICAgICAgICB8LS0tLXwgICAgfFxuICAgIC8vIHwgICAgfCAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgfFxuICAgIC8vIHwgTDEgfCBMMiB8ICAgICAgICAgICBDaGFydEFyZWEgKEMwKSAgICAgICAgICAgIHwgUjEgfFxuICAgIC8vIHwgICAgfCAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgfFxuICAgIC8vIHwgICAgfCAgICB8LS0tLXwgICAgICAgICAgICAgICAgICAgICAgICAgICB8LS0tLXwgICAgfFxuICAgIC8vIHwgICAgfCAgICB8IEMzIHwgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEM0IHwgICAgfFxuICAgIC8vIHwgICAgfC0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tfFxuICAgIC8vIHwgICAgfCAgICB8ICAgICAgICAgICAgICAgICBCMSAgICAgICAgICAgICAgICAgIHwgICAgfFxuICAgIC8vIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vIHwgICAgICAgICAgICAgICAgICBCMiAoRnVsbCBXaWR0aCkgICAgICAgICAgICAgICAgICAgfFxuICAgIC8vIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vXG5cbiAgICBjb25zdCB2aXNpYmxlVmVydGljYWxCb3hDb3VudCA9IHZlcnRpY2FsQm94ZXMucmVkdWNlKCh0b3RhbCwgd3JhcCkgPT5cbiAgICAgIHdyYXAuYm94Lm9wdGlvbnMgJiYgd3JhcC5ib3gub3B0aW9ucy5kaXNwbGF5ID09PSBmYWxzZSA/IHRvdGFsIDogdG90YWwgKyAxLCAwKSB8fCAxO1xuXG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICBvdXRlcldpZHRoOiB3aWR0aCxcbiAgICAgIG91dGVySGVpZ2h0OiBoZWlnaHQsXG4gICAgICBwYWRkaW5nLFxuICAgICAgYXZhaWxhYmxlV2lkdGgsXG4gICAgICBhdmFpbGFibGVIZWlnaHQsXG4gICAgICB2Qm94TWF4V2lkdGg6IGF2YWlsYWJsZVdpZHRoIC8gMiAvIHZpc2libGVWZXJ0aWNhbEJveENvdW50LFxuICAgICAgaEJveE1heEhlaWdodDogYXZhaWxhYmxlSGVpZ2h0IC8gMlxuICAgIH0pO1xuICAgIGNvbnN0IG1heFBhZGRpbmcgPSBPYmplY3QuYXNzaWduKHt9LCBwYWRkaW5nKTtcbiAgICB1cGRhdGVNYXhQYWRkaW5nKG1heFBhZGRpbmcsIHRvUGFkZGluZyhtaW5QYWRkaW5nKSk7XG4gICAgY29uc3QgY2hhcnRBcmVhID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBtYXhQYWRkaW5nLFxuICAgICAgdzogYXZhaWxhYmxlV2lkdGgsXG4gICAgICBoOiBhdmFpbGFibGVIZWlnaHQsXG4gICAgICB4OiBwYWRkaW5nLmxlZnQsXG4gICAgICB5OiBwYWRkaW5nLnRvcFxuICAgIH0sIHBhZGRpbmcpO1xuXG4gICAgY29uc3Qgc3RhY2tzID0gc2V0TGF5b3V0RGltcyh2ZXJ0aWNhbEJveGVzLmNvbmNhdChob3Jpem9udGFsQm94ZXMpLCBwYXJhbXMpO1xuXG4gICAgLy8gRmlyc3QgZml0IHRoZSBmdWxsU2l6ZSBib3hlcywgdG8gcmVkdWNlIHByb2JhYmlsaXR5IG9mIHJlLWZpdHRpbmcuXG4gICAgZml0Qm94ZXMoYm94ZXMuZnVsbFNpemUsIGNoYXJ0QXJlYSwgcGFyYW1zLCBzdGFja3MpO1xuXG4gICAgLy8gVGhlbiBmaXQgdmVydGljYWwgYm94ZXNcbiAgICBmaXRCb3hlcyh2ZXJ0aWNhbEJveGVzLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKTtcblxuICAgIC8vIFRoZW4gZml0IGhvcml6b250YWwgYm94ZXNcbiAgICBpZiAoZml0Qm94ZXMoaG9yaXpvbnRhbEJveGVzLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKSkge1xuICAgICAgLy8gaWYgdGhlIGFyZWEgY2hhbmdlZCwgcmUtZml0IHZlcnRpY2FsIGJveGVzXG4gICAgICBmaXRCb3hlcyh2ZXJ0aWNhbEJveGVzLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKTtcbiAgICB9XG5cbiAgICBoYW5kbGVNYXhQYWRkaW5nKGNoYXJ0QXJlYSk7XG5cbiAgICAvLyBGaW5hbGx5IHBsYWNlIHRoZSBib3hlcyB0byBjb3JyZWN0IGNvb3JkaW5hdGVzXG4gICAgcGxhY2VCb3hlcyhib3hlcy5sZWZ0QW5kVG9wLCBjaGFydEFyZWEsIHBhcmFtcywgc3RhY2tzKTtcblxuICAgIC8vIE1vdmUgdG8gb3Bwb3NpdGUgc2lkZSBvZiBjaGFydFxuICAgIGNoYXJ0QXJlYS54ICs9IGNoYXJ0QXJlYS53O1xuICAgIGNoYXJ0QXJlYS55ICs9IGNoYXJ0QXJlYS5oO1xuXG4gICAgcGxhY2VCb3hlcyhib3hlcy5yaWdodEFuZEJvdHRvbSwgY2hhcnRBcmVhLCBwYXJhbXMsIHN0YWNrcyk7XG5cbiAgICBjaGFydC5jaGFydEFyZWEgPSB7XG4gICAgICBsZWZ0OiBjaGFydEFyZWEubGVmdCxcbiAgICAgIHRvcDogY2hhcnRBcmVhLnRvcCxcbiAgICAgIHJpZ2h0OiBjaGFydEFyZWEubGVmdCArIGNoYXJ0QXJlYS53LFxuICAgICAgYm90dG9tOiBjaGFydEFyZWEudG9wICsgY2hhcnRBcmVhLmgsXG4gICAgICBoZWlnaHQ6IGNoYXJ0QXJlYS5oLFxuICAgICAgd2lkdGg6IGNoYXJ0QXJlYS53LFxuICAgIH07XG5cbiAgICAvLyBGaW5hbGx5IHVwZGF0ZSBib3hlcyBpbiBjaGFydEFyZWEgKHJhZGlhbCBzY2FsZSBmb3IgZXhhbXBsZSlcbiAgICBlYWNoKGJveGVzLmNoYXJ0QXJlYSwgKGxheW91dCkgPT4ge1xuICAgICAgY29uc3QgYm94ID0gbGF5b3V0LmJveDtcbiAgICAgIE9iamVjdC5hc3NpZ24oYm94LCBjaGFydC5jaGFydEFyZWEpO1xuICAgICAgYm94LnVwZGF0ZShjaGFydEFyZWEudywgY2hhcnRBcmVhLmgsIHtsZWZ0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwLCBib3R0b206IDB9KTtcbiAgICB9KTtcbiAgfVxufTtcbiIsICJcbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uL2NvcmUvY29yZS5jb250cm9sbGVyLmpzJykuZGVmYXVsdCB9IENoYXJ0XG4gKi9cblxuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyB0aGF0IGFsbG93cyBhYnN0cmFjdGluZyBwbGF0Zm9ybSBkZXBlbmRlbmNpZXMgYXdheSBmcm9tIHRoZSBjaGFydC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZVBsYXRmb3JtIHtcbiAgLyoqXG5cdCAqIENhbGxlZCBhdCBjaGFydCBjb25zdHJ1Y3Rpb24gdGltZSwgcmV0dXJucyBhIGNvbnRleHQyZCBpbnN0YW5jZSBpbXBsZW1lbnRpbmdcblx0ICogdGhlIFtXM0MgQ2FudmFzIDJEIENvbnRleHQgQVBJIHN0YW5kYXJkXXtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvMmRjb250ZXh0L30uXG5cdCAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNhbnZhcyAtIFRoZSBjYW52YXMgZnJvbSB3aGljaCB0byBhY3F1aXJlIGNvbnRleHQgKHBsYXRmb3JtIHNwZWNpZmljKVxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2FzcGVjdFJhdGlvXSAtIFRoZSBjaGFydCBvcHRpb25zXG5cdCAqL1xuICBhY3F1aXJlQ29udGV4dChjYW52YXMsIGFzcGVjdFJhdGlvKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgLyoqXG5cdCAqIENhbGxlZCBhdCBjaGFydCBkZXN0cnVjdGlvbiB0aW1lLCByZWxlYXNlcyBhbnkgcmVzb3VyY2VzIGFzc29jaWF0ZWQgdG8gdGhlIGNvbnRleHRcblx0ICogcHJldmlvdXNseSByZXR1cm5lZCBieSB0aGUgYWNxdWlyZUNvbnRleHQoKSBtZXRob2QuXG5cdCAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IC0gVGhlIGNvbnRleHQyZCBpbnN0YW5jZVxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgbWV0aG9kIHN1Y2NlZWRlZCwgZWxzZSBmYWxzZVxuXHQgKi9cbiAgcmVsZWFzZUNvbnRleHQoY29udGV4dCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG5cdCAqIFJlZ2lzdGVycyB0aGUgc3BlY2lmaWVkIGxpc3RlbmVyIG9uIHRoZSBnaXZlbiBjaGFydC5cblx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnQgLSBDaGFydCBmcm9tIHdoaWNoIHRvIGxpc3RlbiBmb3IgZXZlbnRcblx0ICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgKHtAbGluayBDaGFydEV2ZW50fSkgdHlwZSB0byBsaXN0ZW4gZm9yXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyIC0gUmVjZWl2ZXMgYSBub3RpZmljYXRpb24gKGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHNcblx0ICogdGhlIHtAbGluayBDaGFydEV2ZW50fSBpbnRlcmZhY2UpIHdoZW4gYW4gZXZlbnQgb2YgdGhlIHNwZWNpZmllZCB0eXBlIG9jY3Vycy5cblx0ICovXG4gIGFkZEV2ZW50TGlzdGVuZXIoY2hhcnQsIHR5cGUsIGxpc3RlbmVyKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgLyoqXG5cdCAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBsaXN0ZW5lciBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgd2l0aCBhZGRFdmVudExpc3RlbmVyLlxuXHQgKiBAcGFyYW0ge0NoYXJ0fSBjaGFydCAtIENoYXJ0IGZyb20gd2hpY2ggdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSAoe0BsaW5rIENoYXJ0RXZlbnR9KSB0eXBlIHRvIHJlbW92ZVxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byByZW1vdmUgZnJvbSB0aGUgZXZlbnQgdGFyZ2V0LlxuXHQgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihjaGFydCwgdHlwZSwgbGlzdGVuZXIpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAvKipcblx0ICogQHJldHVybnMge251bWJlcn0gdGhlIGN1cnJlbnQgZGV2aWNlUGl4ZWxSYXRpbyBvZiB0aGUgZGV2aWNlIHRoaXMgcGxhdGZvcm0gaXMgY29ubmVjdGVkIHRvLlxuXHQgKi9cbiAgZ2V0RGV2aWNlUGl4ZWxSYXRpbygpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIHNpemUgaW4gcGl4ZWxzIG9mIGdpdmVuIGNhbnZhcyBlbGVtZW50LlxuXHQgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIC0gY29udGVudCB3aWR0aCBvZiBwYXJlbnQgZWxlbWVudFxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodF0gLSBjb250ZW50IGhlaWdodCBvZiBwYXJlbnQgZWxlbWVudFxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2FzcGVjdFJhdGlvXSAtIGFzcGVjdCByYXRpbyB0byBtYWludGFpblxuXHQgKi9cbiAgZ2V0TWF4aW11bVNpemUoZWxlbWVudCwgd2lkdGgsIGhlaWdodCwgYXNwZWN0UmF0aW8pIHtcbiAgICB3aWR0aCA9IE1hdGgubWF4KDAsIHdpZHRoIHx8IGVsZW1lbnQud2lkdGgpO1xuICAgIGhlaWdodCA9IGhlaWdodCB8fCBlbGVtZW50LmhlaWdodDtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQ6IE1hdGgubWF4KDAsIGFzcGVjdFJhdGlvID8gTWF0aC5mbG9vcih3aWR0aCAvIGFzcGVjdFJhdGlvKSA6IGhlaWdodClcbiAgICB9O1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNhbnZhc1xuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgY2FudmFzIGlzIGF0dGFjaGVkIHRvIHRoZSBwbGF0Zm9ybSwgZmFsc2UgaWYgbm90LlxuXHQgKi9cbiAgaXNBdHRhY2hlZChjYW52YXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgY29uZmlnIHdpdGggcGxhdGZvcm0gc3BlY2lmaWMgcmVxdWlyZW1lbnRzXG4gICAqIEBwYXJhbSB7aW1wb3J0KCcuLi9jb3JlL2NvcmUuY29uZmlnLmpzJykuZGVmYXVsdH0gY29uZmlnXG4gICAqL1xuICB1cGRhdGVDb25maWcoY29uZmlnKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAvLyBuby1vcFxuICB9XG59XG4iLCAiLyoqXG4gKiBQbGF0Zm9ybSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiAobWluaW1hbCkuXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGFydGpzL0NoYXJ0LmpzL3B1bGwvNDU5MSNpc3N1ZWNvbW1lbnQtMzE5NTc1OTM5XG4gKi9cblxuaW1wb3J0IEJhc2VQbGF0Zm9ybSBmcm9tICcuL3BsYXRmb3JtLmJhc2UuanMnO1xuXG4vKipcbiAqIFBsYXRmb3JtIGNsYXNzIGZvciBjaGFydHMgd2l0aG91dCBhY2Nlc3MgdG8gdGhlIERPTSBvciB0byBtYW55IGVsZW1lbnQgcHJvcGVydGllc1xuICogVGhpcyBwbGF0Zm9ybSBpcyB1c2VkIGJ5IGRlZmF1bHQgZm9yIGFueSBjaGFydCBwYXNzZWQgYW4gT2Zmc2NyZWVuQ2FudmFzLlxuICogQGV4dGVuZHMgQmFzZVBsYXRmb3JtXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2ljUGxhdGZvcm0gZXh0ZW5kcyBCYXNlUGxhdGZvcm0ge1xuICBhY3F1aXJlQ29udGV4dChpdGVtKSB7XG4gICAgLy8gVG8gcHJldmVudCBjYW52YXMgZmluZ2VycHJpbnRpbmcsIHNvbWUgYWRkLW9ucyB1bmRlZmluZSB0aGUgZ2V0Q29udGV4dFxuICAgIC8vIG1ldGhvZCwgZm9yIGV4YW1wbGU6IGh0dHBzOi8vZ2l0aHViLmNvbS9ra2Fwc25lci9DYW52YXNCbG9ja2VyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzI4MDdcbiAgICByZXR1cm4gaXRlbSAmJiBpdGVtLmdldENvbnRleHQgJiYgaXRlbS5nZXRDb250ZXh0KCcyZCcpIHx8IG51bGw7XG4gIH1cbiAgdXBkYXRlQ29uZmlnKGNvbmZpZykge1xuICAgIGNvbmZpZy5vcHRpb25zLmFuaW1hdGlvbiA9IGZhbHNlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDaGFydC5QbGF0Zm9ybSBpbXBsZW1lbnRhdGlvbiBmb3IgdGFyZ2V0aW5nIGEgd2ViIGJyb3dzZXJcbiAqL1xuXG5pbXBvcnQgQmFzZVBsYXRmb3JtIGZyb20gJy4vcGxhdGZvcm0uYmFzZS5qcyc7XG5pbXBvcnQge19nZXRQYXJlbnROb2RlLCBnZXRSZWxhdGl2ZVBvc2l0aW9uLCBzdXBwb3J0c0V2ZW50TGlzdGVuZXJPcHRpb25zLCByZWFkVXNlZFNpemUsIGdldE1heGltdW1TaXplfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuZG9tLmpzJztcbmltcG9ydCB7dGhyb3R0bGVkfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuZXh0cmFzLmpzJztcbmltcG9ydCB7aXNOdWxsT3JVbmRlZn0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvcmUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi9jb3JlL2NvcmUuY29udHJvbGxlci5qcycpLmRlZmF1bHQgfSBDaGFydFxuICovXG5cbmNvbnN0IEVYUEFORE9fS0VZID0gJyRjaGFydGpzJztcblxuLyoqXG4gKiBET00gZXZlbnQgdHlwZXMgLT4gQ2hhcnQuanMgZXZlbnQgdHlwZXMuXG4gKiBOb3RlOiBvbmx5IGV2ZW50cyB3aXRoIGRpZmZlcmVudCB0eXBlcyBhcmUgbWFwcGVkLlxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHNcbiAqL1xuY29uc3QgRVZFTlRfVFlQRVMgPSB7XG4gIHRvdWNoc3RhcnQ6ICdtb3VzZWRvd24nLFxuICB0b3VjaG1vdmU6ICdtb3VzZW1vdmUnLFxuICB0b3VjaGVuZDogJ21vdXNldXAnLFxuICBwb2ludGVyZW50ZXI6ICdtb3VzZWVudGVyJyxcbiAgcG9pbnRlcmRvd246ICdtb3VzZWRvd24nLFxuICBwb2ludGVybW92ZTogJ21vdXNlbW92ZScsXG4gIHBvaW50ZXJ1cDogJ21vdXNldXAnLFxuICBwb2ludGVybGVhdmU6ICdtb3VzZW91dCcsXG4gIHBvaW50ZXJvdXQ6ICdtb3VzZW91dCdcbn07XG5cbmNvbnN0IGlzTnVsbE9yRW1wdHkgPSB2YWx1ZSA9PiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gJyc7XG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBjYW52YXMgc3R5bGUgYW5kIHJlbmRlciBzaXplIHdpdGhvdXQgbW9kaWZ5aW5nIHRoZSBjYW52YXMgZGlzcGxheSBzaXplLFxuICogc2luY2UgcmVzcG9uc2l2ZW5lc3MgaXMgaGFuZGxlZCBieSB0aGUgY29udHJvbGxlci5yZXNpemUoKSBtZXRob2QuIFRoZSBjb25maWcgaXMgdXNlZFxuICogdG8gZGV0ZXJtaW5lIHRoZSBhc3BlY3QgcmF0aW8gdG8gYXBwbHkgaW4gY2FzZSBubyBleHBsaWNpdCBoZWlnaHQgaGFzIGJlZW4gc3BlY2lmaWVkLlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzXG4gKiBAcGFyYW0ge251bWJlcn0gW2FzcGVjdFJhdGlvXVxuICovXG5mdW5jdGlvbiBpbml0Q2FudmFzKGNhbnZhcywgYXNwZWN0UmF0aW8pIHtcbiAgY29uc3Qgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG5cbiAgLy8gTk9URShTQikgY2FudmFzLmdldEF0dHJpYnV0ZSgnd2lkdGgnKSAhPT0gY2FudmFzLndpZHRoOiBpbiB0aGUgZmlyc3QgY2FzZSBpdFxuICAvLyByZXR1cm5zIG51bGwgb3IgJycgaWYgbm8gZXhwbGljaXQgdmFsdWUgaGFzIGJlZW4gc2V0IHRvIHRoZSBjYW52YXMgYXR0cmlidXRlLlxuICBjb25zdCByZW5kZXJIZWlnaHQgPSBjYW52YXMuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKTtcbiAgY29uc3QgcmVuZGVyV2lkdGggPSBjYW52YXMuZ2V0QXR0cmlidXRlKCd3aWR0aCcpO1xuXG4gIC8vIENoYXJ0LmpzIG1vZGlmaWVzIHNvbWUgY2FudmFzIHZhbHVlcyB0aGF0IHdlIHdhbnQgdG8gcmVzdG9yZSBvbiBkZXN0cm95XG4gIGNhbnZhc1tFWFBBTkRPX0tFWV0gPSB7XG4gICAgaW5pdGlhbDoge1xuICAgICAgaGVpZ2h0OiByZW5kZXJIZWlnaHQsXG4gICAgICB3aWR0aDogcmVuZGVyV2lkdGgsXG4gICAgICBzdHlsZToge1xuICAgICAgICBkaXNwbGF5OiBzdHlsZS5kaXNwbGF5LFxuICAgICAgICBoZWlnaHQ6IHN0eWxlLmhlaWdodCxcbiAgICAgICAgd2lkdGg6IHN0eWxlLndpZHRoXG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIEZvcmNlIGNhbnZhcyB0byBkaXNwbGF5IGFzIGJsb2NrIHRvIGF2b2lkIGV4dHJhIHNwYWNlIGNhdXNlZCBieSBpbmxpbmVcbiAgLy8gZWxlbWVudHMsIHdoaWNoIHdvdWxkIGludGVyZmVyZSB3aXRoIHRoZSByZXNwb25zaXZlIHJlc2l6ZSBwcm9jZXNzLlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvMjUzOFxuICBzdHlsZS5kaXNwbGF5ID0gc3R5bGUuZGlzcGxheSB8fCAnYmxvY2snO1xuICAvLyBJbmNsdWRlIHBvc3NpYmxlIGJvcmRlcnMgaW4gdGhlIHNpemVcbiAgc3R5bGUuYm94U2l6aW5nID0gc3R5bGUuYm94U2l6aW5nIHx8ICdib3JkZXItYm94JztcblxuICBpZiAoaXNOdWxsT3JFbXB0eShyZW5kZXJXaWR0aCkpIHtcbiAgICBjb25zdCBkaXNwbGF5V2lkdGggPSByZWFkVXNlZFNpemUoY2FudmFzLCAnd2lkdGgnKTtcbiAgICBpZiAoZGlzcGxheVdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNhbnZhcy53aWR0aCA9IGRpc3BsYXlXaWR0aDtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNOdWxsT3JFbXB0eShyZW5kZXJIZWlnaHQpKSB7XG4gICAgaWYgKGNhbnZhcy5zdHlsZS5oZWlnaHQgPT09ICcnKSB7XG4gICAgICAvLyBJZiBubyBleHBsaWNpdCByZW5kZXIgaGVpZ2h0IGFuZCBzdHlsZSBoZWlnaHQsIGxldCdzIGFwcGx5IHRoZSBhc3BlY3QgcmF0aW8sXG4gICAgICAvLyB3aGljaCBvbmUgY2FuIGJlIHNwZWNpZmllZCBieSB0aGUgdXNlciBidXQgYWxzbyBieSBjaGFydHMgYXMgZGVmYXVsdCBvcHRpb25cbiAgICAgIC8vIChpLmUuIG9wdGlvbnMuYXNwZWN0UmF0aW8pLiBJZiBub3Qgc3BlY2lmaWVkLCB1c2UgY2FudmFzIGFzcGVjdCByYXRpbyBvZiAyLlxuICAgICAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy53aWR0aCAvIChhc3BlY3RSYXRpbyB8fCAyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGlzcGxheUhlaWdodCA9IHJlYWRVc2VkU2l6ZShjYW52YXMsICdoZWlnaHQnKTtcbiAgICAgIGlmIChkaXNwbGF5SGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGRpc3BsYXlIZWlnaHQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNhbnZhcztcbn1cblxuLy8gRGVmYXVsdCBwYXNzaXZlIHRvIHRydWUgYXMgZXhwZWN0ZWQgYnkgQ2hyb21lIGZvciAndG91Y2hzdGFydCcgYW5kICd0b3VjaGVuZCcgZXZlbnRzLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzQyODdcbmNvbnN0IGV2ZW50TGlzdGVuZXJPcHRpb25zID0gc3VwcG9ydHNFdmVudExpc3RlbmVyT3B0aW9ucyA/IHtwYXNzaXZlOiB0cnVlfSA6IGZhbHNlO1xuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcihub2RlLCB0eXBlLCBsaXN0ZW5lcikge1xuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIGV2ZW50TGlzdGVuZXJPcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoY2hhcnQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoYXJ0LmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBldmVudExpc3RlbmVyT3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIGZyb21OYXRpdmVFdmVudChldmVudCwgY2hhcnQpIHtcbiAgY29uc3QgdHlwZSA9IEVWRU5UX1RZUEVTW2V2ZW50LnR5cGVdIHx8IGV2ZW50LnR5cGU7XG4gIGNvbnN0IHt4LCB5fSA9IGdldFJlbGF0aXZlUG9zaXRpb24oZXZlbnQsIGNoYXJ0KTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlLFxuICAgIGNoYXJ0LFxuICAgIG5hdGl2ZTogZXZlbnQsXG4gICAgeDogeCAhPT0gdW5kZWZpbmVkID8geCA6IG51bGwsXG4gICAgeTogeSAhPT0gdW5kZWZpbmVkID8geSA6IG51bGwsXG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vZGVMaXN0Q29udGFpbnMobm9kZUxpc3QsIGNhbnZhcykge1xuICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZUxpc3QpIHtcbiAgICBpZiAobm9kZSA9PT0gY2FudmFzIHx8IG5vZGUuY29udGFpbnMoY2FudmFzKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUF0dGFjaE9ic2VydmVyKGNoYXJ0LCB0eXBlLCBsaXN0ZW5lcikge1xuICBjb25zdCBjYW52YXMgPSBjaGFydC5jYW52YXM7XG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZW50cmllcyA9PiB7XG4gICAgbGV0IHRyaWdnZXIgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIHRyaWdnZXIgPSB0cmlnZ2VyIHx8IG5vZGVMaXN0Q29udGFpbnMoZW50cnkuYWRkZWROb2RlcywgY2FudmFzKTtcbiAgICAgIHRyaWdnZXIgPSB0cmlnZ2VyICYmICFub2RlTGlzdENvbnRhaW5zKGVudHJ5LnJlbW92ZWROb2RlcywgY2FudmFzKTtcbiAgICB9XG4gICAgaWYgKHRyaWdnZXIpIHtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfVxuICB9KTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURldGFjaE9ic2VydmVyKGNoYXJ0LCB0eXBlLCBsaXN0ZW5lcikge1xuICBjb25zdCBjYW52YXMgPSBjaGFydC5jYW52YXM7XG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZW50cmllcyA9PiB7XG4gICAgbGV0IHRyaWdnZXIgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIHRyaWdnZXIgPSB0cmlnZ2VyIHx8IG5vZGVMaXN0Q29udGFpbnMoZW50cnkucmVtb3ZlZE5vZGVzLCBjYW52YXMpO1xuICAgICAgdHJpZ2dlciA9IHRyaWdnZXIgJiYgIW5vZGVMaXN0Q29udGFpbnMoZW50cnkuYWRkZWROb2RlcywgY2FudmFzKTtcbiAgICB9XG4gICAgaWYgKHRyaWdnZXIpIHtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfVxuICB9KTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pO1xuICByZXR1cm4gb2JzZXJ2ZXI7XG59XG5cbmNvbnN0IGRycExpc3RlbmluZ0NoYXJ0cyA9IG5ldyBNYXAoKTtcbmxldCBvbGREZXZpY2VQaXhlbFJhdGlvID0gMDtcblxuZnVuY3Rpb24gb25XaW5kb3dSZXNpemUoKSB7XG4gIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICBpZiAoZHByID09PSBvbGREZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIG9sZERldmljZVBpeGVsUmF0aW8gPSBkcHI7XG4gIGRycExpc3RlbmluZ0NoYXJ0cy5mb3JFYWNoKChyZXNpemUsIGNoYXJ0KSA9PiB7XG4gICAgaWYgKGNoYXJ0LmN1cnJlbnREZXZpY2VQaXhlbFJhdGlvICE9PSBkcHIpIHtcbiAgICAgIHJlc2l6ZSgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGxpc3RlbkRldmljZVBpeGVsUmF0aW9DaGFuZ2VzKGNoYXJ0LCByZXNpemUpIHtcbiAgaWYgKCFkcnBMaXN0ZW5pbmdDaGFydHMuc2l6ZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gIH1cbiAgZHJwTGlzdGVuaW5nQ2hhcnRzLnNldChjaGFydCwgcmVzaXplKTtcbn1cblxuZnVuY3Rpb24gdW5saXN0ZW5EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlcyhjaGFydCkge1xuICBkcnBMaXN0ZW5pbmdDaGFydHMuZGVsZXRlKGNoYXJ0KTtcbiAgaWYgKCFkcnBMaXN0ZW5pbmdDaGFydHMuc2l6ZSkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUmVzaXplT2JzZXJ2ZXIoY2hhcnQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNvbnN0IGNhbnZhcyA9IGNoYXJ0LmNhbnZhcztcbiAgY29uc3QgY29udGFpbmVyID0gY2FudmFzICYmIF9nZXRQYXJlbnROb2RlKGNhbnZhcyk7XG4gIGlmICghY29udGFpbmVyKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHJlc2l6ZSA9IHRocm90dGxlZCgod2lkdGgsIGhlaWdodCkgPT4ge1xuICAgIGNvbnN0IHcgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgbGlzdGVuZXIod2lkdGgsIGhlaWdodCk7XG4gICAgaWYgKHcgPCBjb250YWluZXIuY2xpZW50V2lkdGgpIHtcbiAgICAgIC8vIElmIHRoZSBjb250YWluZXIgc2l6ZSBzaHJhbmsgZHVyaW5nIGNoYXJ0IHJlc2l6ZSwgbGV0J3MgYXNzdW1lXG4gICAgICAvLyBzY3JvbGxiYXIgYXBwZWFyZWQuIFNvIHdlIHJlc2l6ZSBhZ2FpbiB3aXRoIHRoZSBzY3JvbGxiYXIgdmlzaWJsZSAtXG4gICAgICAvLyBlZmZlY3RpdmVseSBtYWtpbmcgY2hhcnQgc21hbGxlciBhbmQgdGhlIHNjcm9sbGJhciBoaWRkZW4gYWdhaW4uXG4gICAgICAvLyBCZWNhdXNlIHdlIGFyZSBpbnNpZGUgYHRocm90dGxlZGAsIGFuZCBjdXJyZW50bHkgYHRpY2tpbmdgLCBzY3JvbGxcbiAgICAgIC8vIGV2ZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgdGhpcyB3aG9sZSAyIHJlc2l6ZSBwcm9jZXNzLlxuICAgICAgLy8gSWYgd2UgYXNzdW1lZCB3cm9uZyBhbmQgc29tZXRoaW5nIGVsc2UgaGFwcGVuZWQsIHdlIGFyZSByZXNpemluZ1xuICAgICAgLy8gdHdpY2UgaW4gYSBmcmFtZSAocG90ZW50aWFsIHBlcmZvcm1hbmNlIGlzc3VlKVxuICAgICAgbGlzdGVuZXIoKTtcbiAgICB9XG4gIH0sIHdpbmRvdyk7XG5cbiAgLy8gQHRzLWlnbm9yZSB1bnRpbCBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzM3ODYxIGltcGxlbWVudGVkXG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1swXTtcbiAgICBjb25zdCB3aWR0aCA9IGVudHJ5LmNvbnRlbnRSZWN0LndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IGVudHJ5LmNvbnRlbnRSZWN0LmhlaWdodDtcbiAgICAvLyBXaGVuIGl0cyBjb250YWluZXIncyBkaXNwbGF5IGlzIHNldCB0byAnbm9uZScgdGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYVxuICAgIC8vIHNpemUgb2YgKDAsIDApLCB3aGljaCB3aWxsIGNhdXNlIHRoZSBjaGFydCB0byBsb3NlIGl0cyBvcmlnaW5hbCBoZWlnaHQsIHNvIHNraXBcbiAgICAvLyByZXNpemluZyBpbiBzdWNoIGNhc2UuXG4gICAgaWYgKHdpZHRoID09PSAwICYmIGhlaWdodCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXNpemUod2lkdGgsIGhlaWdodCk7XG4gIH0pO1xuICBvYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lcik7XG4gIGxpc3RlbkRldmljZVBpeGVsUmF0aW9DaGFuZ2VzKGNoYXJ0LCByZXNpemUpO1xuXG4gIHJldHVybiBvYnNlcnZlcjtcbn1cblxuZnVuY3Rpb24gcmVsZWFzZU9ic2VydmVyKGNoYXJ0LCB0eXBlLCBvYnNlcnZlcikge1xuICBpZiAob2JzZXJ2ZXIpIHtcbiAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gIH1cbiAgaWYgKHR5cGUgPT09ICdyZXNpemUnKSB7XG4gICAgdW5saXN0ZW5EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlcyhjaGFydCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJveHlBbmRMaXN0ZW4oY2hhcnQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNvbnN0IGNhbnZhcyA9IGNoYXJ0LmNhbnZhcztcbiAgY29uc3QgcHJveHkgPSB0aHJvdHRsZWQoKGV2ZW50KSA9PiB7XG4gICAgLy8gVGhpcyBjYXNlIGNhbiBvY2N1ciBpZiB0aGUgY2hhcnQgaXMgZGVzdHJveWVkIHdoaWxlIHdhaXRpbmdcbiAgICAvLyBmb3IgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB0byBvY2N1ci4gV2UgcHJldmVudCBjcmFzaGVzIGJ5IGNoZWNraW5nXG4gICAgLy8gZm9yIGEgZGVzdHJveWVkIGNoYXJ0XG4gICAgaWYgKGNoYXJ0LmN0eCAhPT0gbnVsbCkge1xuICAgICAgbGlzdGVuZXIoZnJvbU5hdGl2ZUV2ZW50KGV2ZW50LCBjaGFydCkpO1xuICAgIH1cbiAgfSwgY2hhcnQpO1xuXG4gIGFkZExpc3RlbmVyKGNhbnZhcywgdHlwZSwgcHJveHkpO1xuXG4gIHJldHVybiBwcm94eTtcbn1cblxuLyoqXG4gKiBQbGF0Zm9ybSBjbGFzcyBmb3IgY2hhcnRzIHRoYXQgY2FuIGFjY2VzcyB0aGUgRE9NIGFuZCBnbG9iYWwgd2luZG93L2RvY3VtZW50IHByb3BlcnRpZXNcbiAqIEBleHRlbmRzIEJhc2VQbGF0Zm9ybVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb21QbGF0Zm9ybSBleHRlbmRzIEJhc2VQbGF0Zm9ybSB7XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNhbnZhc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gW2FzcGVjdFJhdGlvXVxuXHQgKiBAcmV0dXJuIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8bnVsbH1cblx0ICovXG4gIGFjcXVpcmVDb250ZXh0KGNhbnZhcywgYXNwZWN0UmF0aW8pIHtcbiAgICAvLyBUbyBwcmV2ZW50IGNhbnZhcyBmaW5nZXJwcmludGluZywgc29tZSBhZGQtb25zIHVuZGVmaW5lIHRoZSBnZXRDb250ZXh0XG4gICAgLy8gbWV0aG9kLCBmb3IgZXhhbXBsZTogaHR0cHM6Ly9naXRodWIuY29tL2trYXBzbmVyL0NhbnZhc0Jsb2NrZXJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvMjgwN1xuICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMgJiYgY2FudmFzLmdldENvbnRleHQgJiYgY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAvLyBgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudC9DYW52YXNSZW5kZXJpbmdDb250ZXh0MkRgIGZhaWxzIHdoZW4gdGhlIGNhbnZhcyBpc1xuICAgIC8vIGluc2lkZSBhbiBpZnJhbWUgb3Igd2hlbiBydW5uaW5nIGluIGEgcHJvdGVjdGVkIGVudmlyb25tZW50LiBXZSBjb3VsZCBndWVzcyB0aGVcbiAgICAvLyB0eXBlcyBmcm9tIHRoZWlyIHRvU3RyaW5nKCkgdmFsdWUgYnV0IGxldCdzIGtlZXAgdGhpbmdzIGZsZXhpYmxlIGFuZCBhc3N1bWUgaXQnc1xuICAgIC8vIGEgc3VmZmljaWVudCBjb25kaXRpb24gaWYgdGhlIGNhbnZhcyBoYXMgYSBjb250ZXh0MkQgd2hpY2ggaGFzIGNhbnZhcyBhcyBgY2FudmFzYC5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvMzg4N1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGFydGpzL0NoYXJ0LmpzL2lzc3Vlcy80MTAyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzQxNTJcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LmNhbnZhcyA9PT0gY2FudmFzKSB7XG4gICAgICAvLyBMb2FkIHBsYXRmb3JtIHJlc291cmNlcyBvbiBmaXJzdCBjaGFydCBjcmVhdGlvbiwgdG8gbWFrZSBpdCBwb3NzaWJsZSB0b1xuICAgICAgLy8gaW1wb3J0IHRoZSBsaWJyYXJ5IGJlZm9yZSBzZXR0aW5nIHBsYXRmb3JtIG9wdGlvbnMuXG4gICAgICBpbml0Q2FudmFzKGNhbnZhcywgYXNwZWN0UmF0aW8pO1xuICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHRcblx0ICovXG4gIHJlbGVhc2VDb250ZXh0KGNvbnRleHQpIHtcbiAgICBjb25zdCBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICBpZiAoIWNhbnZhc1tFWFBBTkRPX0tFWV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbml0aWFsID0gY2FudmFzW0VYUEFORE9fS0VZXS5pbml0aWFsO1xuICAgIFsnaGVpZ2h0JywgJ3dpZHRoJ10uZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBpbml0aWFsW3Byb3BdO1xuICAgICAgaWYgKGlzTnVsbE9yVW5kZWYodmFsdWUpKSB7XG4gICAgICAgIGNhbnZhcy5yZW1vdmVBdHRyaWJ1dGUocHJvcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKHByb3AsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHN0eWxlID0gaW5pdGlhbC5zdHlsZSB8fCB7fTtcbiAgICBPYmplY3Qua2V5cyhzdHlsZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjYW52YXMuc3R5bGVba2V5XSA9IHN0eWxlW2tleV07XG4gICAgfSk7XG5cbiAgICAvLyBUaGUgY2FudmFzIHJlbmRlciBzaXplIG1pZ2h0IGhhdmUgYmVlbiBjaGFuZ2VkIChhbmQgdGh1cyB0aGUgc3RhdGUgc3RhY2sgZGlzY2FyZGVkKSxcbiAgICAvLyB3ZSBjYW4ndCB1c2Ugc2F2ZSgpIGFuZCByZXN0b3JlKCkgdG8gcmVzdG9yZSB0aGUgaW5pdGlhbCBzdGF0ZS4gU28gbWFrZSBzdXJlIHRoYXQgYXRcbiAgICAvLyBsZWFzdCB0aGUgY2FudmFzIGNvbnRleHQgaXMgcmVzZXQgdG8gdGhlIGRlZmF1bHQgc3RhdGUgYnkgc2V0dGluZyB0aGUgY2FudmFzIHdpZHRoLlxuICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwNTI1L3RoZS1jYW52YXMtZWxlbWVudC5odG1sXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtYXNzaWduXG4gICAgY2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoO1xuXG4gICAgZGVsZXRlIGNhbnZhc1tFWFBBTkRPX0tFWV07XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcblx0ICpcblx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnRcblx0ICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXJcblx0ICovXG4gIGFkZEV2ZW50TGlzdGVuZXIoY2hhcnQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgLy8gQ2FuIGhhdmUgb25seSBvbmUgbGlzdGVuZXIgcGVyIHR5cGUsIHNvIG1ha2Ugc3VyZSBwcmV2aW91cyBpcyByZW1vdmVkXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGNoYXJ0LCB0eXBlKTtcblxuICAgIGNvbnN0IHByb3hpZXMgPSBjaGFydC4kcHJveGllcyB8fCAoY2hhcnQuJHByb3hpZXMgPSB7fSk7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB7XG4gICAgICBhdHRhY2g6IGNyZWF0ZUF0dGFjaE9ic2VydmVyLFxuICAgICAgZGV0YWNoOiBjcmVhdGVEZXRhY2hPYnNlcnZlcixcbiAgICAgIHJlc2l6ZTogY3JlYXRlUmVzaXplT2JzZXJ2ZXJcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZXIgPSBoYW5kbGVyc1t0eXBlXSB8fCBjcmVhdGVQcm94eUFuZExpc3RlbjtcbiAgICBwcm94aWVzW3R5cGVdID0gaGFuZGxlcihjaGFydCwgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cblxuICAvKipcblx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnRcblx0ICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcblx0ICovXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIoY2hhcnQsIHR5cGUpIHtcbiAgICBjb25zdCBwcm94aWVzID0gY2hhcnQuJHByb3hpZXMgfHwgKGNoYXJ0LiRwcm94aWVzID0ge30pO1xuICAgIGNvbnN0IHByb3h5ID0gcHJveGllc1t0eXBlXTtcblxuICAgIGlmICghcHJveHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBoYW5kbGVycyA9IHtcbiAgICAgIGF0dGFjaDogcmVsZWFzZU9ic2VydmVyLFxuICAgICAgZGV0YWNoOiByZWxlYXNlT2JzZXJ2ZXIsXG4gICAgICByZXNpemU6IHJlbGVhc2VPYnNlcnZlclxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW3R5cGVdIHx8IHJlbW92ZUxpc3RlbmVyO1xuICAgIGhhbmRsZXIoY2hhcnQsIHR5cGUsIHByb3h5KTtcbiAgICBwcm94aWVzW3R5cGVdID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZ2V0RGV2aWNlUGl4ZWxSYXRpbygpIHtcbiAgICByZXR1cm4gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIC0gY29udGVudCB3aWR0aCBvZiBwYXJlbnQgZWxlbWVudFxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodF0gLSBjb250ZW50IGhlaWdodCBvZiBwYXJlbnQgZWxlbWVudFxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2FzcGVjdFJhdGlvXSAtIGFzcGVjdCByYXRpbyB0byBtYWludGFpblxuXHQgKi9cbiAgZ2V0TWF4aW11bVNpemUoY2FudmFzLCB3aWR0aCwgaGVpZ2h0LCBhc3BlY3RSYXRpbykge1xuICAgIHJldHVybiBnZXRNYXhpbXVtU2l6ZShjYW52YXMsIHdpZHRoLCBoZWlnaHQsIGFzcGVjdFJhdGlvKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBjYW52YXNcblx0ICovXG4gIGlzQXR0YWNoZWQoY2FudmFzKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gX2dldFBhcmVudE5vZGUoY2FudmFzKTtcbiAgICByZXR1cm4gISEoY29udGFpbmVyICYmIGNvbnRhaW5lci5pc0Nvbm5lY3RlZCk7XG4gIH1cbn1cbiIsICJpbXBvcnQge19pc0RvbVN1cHBvcnRlZH0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5pbXBvcnQgQmFzZVBsYXRmb3JtIGZyb20gJy4vcGxhdGZvcm0uYmFzZS5qcyc7XG5pbXBvcnQgQmFzaWNQbGF0Zm9ybSBmcm9tICcuL3BsYXRmb3JtLmJhc2ljLmpzJztcbmltcG9ydCBEb21QbGF0Zm9ybSBmcm9tICcuL3BsYXRmb3JtLmRvbS5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBfZGV0ZWN0UGxhdGZvcm0oY2FudmFzKSB7XG4gIGlmICghX2lzRG9tU3VwcG9ydGVkKCkgfHwgKHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09ICd1bmRlZmluZWQnICYmIGNhbnZhcyBpbnN0YW5jZW9mIE9mZnNjcmVlbkNhbnZhcykpIHtcbiAgICByZXR1cm4gQmFzaWNQbGF0Zm9ybTtcbiAgfVxuICByZXR1cm4gRG9tUGxhdGZvcm07XG59XG5cbmV4cG9ydCB7QmFzZVBsYXRmb3JtLCBCYXNpY1BsYXRmb3JtLCBEb21QbGF0Zm9ybX07XG4iLCAiaW1wb3J0IHR5cGUge0FueU9iamVjdH0gZnJvbSAnLi4vdHlwZXMvYmFzaWMuanMnO1xuaW1wb3J0IHR5cGUge1BvaW50fSBmcm9tICcuLi90eXBlcy9nZW9tZXRyaWMuanMnO1xuaW1wb3J0IHR5cGUge0FuaW1hdGlvbn0gZnJvbSAnLi4vdHlwZXMvYW5pbWF0aW9uLmpzJztcbmltcG9ydCB7aXNOdW1iZXJ9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5tYXRoLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWxlbWVudDxUID0gQW55T2JqZWN0LCBPID0gQW55T2JqZWN0PiB7XG5cbiAgc3RhdGljIGRlZmF1bHRzID0ge307XG4gIHN0YXRpYyBkZWZhdWx0Um91dGVzID0gdW5kZWZpbmVkO1xuXG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBhY3RpdmUgPSBmYWxzZTtcbiAgb3B0aW9uczogTztcbiAgJGFuaW1hdGlvbnM6IFJlY29yZDxrZXlvZiBULCBBbmltYXRpb24+O1xuXG4gIHRvb2x0aXBQb3NpdGlvbih1c2VGaW5hbFBvc2l0aW9uOiBib29sZWFuKTogUG9pbnQge1xuICAgIGNvbnN0IHt4LCB5fSA9IHRoaXMuZ2V0UHJvcHMoWyd4JywgJ3knXSwgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgcmV0dXJuIHt4LCB5fSBhcyBQb2ludDtcbiAgfVxuXG4gIGhhc1ZhbHVlKCkge1xuICAgIHJldHVybiBpc051bWJlcih0aGlzLngpICYmIGlzTnVtYmVyKHRoaXMueSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBvciBmaW5hbCB2YWx1ZSBvZiBlYWNoIHByb3AuIENhbiByZXR1cm4gZXh0cmEgcHJvcGVydGllcyAod2hvbGUgb2JqZWN0KS5cbiAgICogQHBhcmFtIHByb3BzIC0gcHJvcGVydGllcyB0byBnZXRcbiAgICogQHBhcmFtIFtmaW5hbF0gLSBnZXQgdGhlIGZpbmFsIHZhbHVlIChhbmltYXRpb24gdGFyZ2V0KVxuICAgKi9cbiAgZ2V0UHJvcHM8UCBleHRlbmRzIChrZXlvZiBUKVtdPihwcm9wczogUCwgZmluYWw/OiBib29sZWFuKTogUGljazxULCBQW251bWJlcl0+O1xuICBnZXRQcm9wczxQIGV4dGVuZHMgc3RyaW5nPihwcm9wczogUFtdLCBmaW5hbD86IGJvb2xlYW4pOiBQYXJ0aWFsPFJlY29yZDxQLCB1bmtub3duPj47XG4gIGdldFByb3BzKHByb3BzOiBzdHJpbmdbXSwgZmluYWw/OiBib29sZWFuKTogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICAgIGNvbnN0IGFuaW1zID0gdGhpcy4kYW5pbWF0aW9ucztcbiAgICBpZiAoIWZpbmFsIHx8ICFhbmltcykge1xuICAgICAgLy8gbGV0J3Mgbm90IGNyZWF0ZSBhbiBvYmplY3QsIGlmIG5vdCBuZWVkZWRcbiAgICAgIHJldHVybiB0aGlzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgIH1cbiAgICBjb25zdCByZXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG4gICAgcHJvcHMuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgcmV0W3Byb3BdID0gYW5pbXNbcHJvcF0gJiYgYW5pbXNbcHJvcF0uYWN0aXZlKCkgPyBhbmltc1twcm9wXS5fdG8gOiB0aGlzW3Byb3AgYXMgc3RyaW5nXTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG59XG4iLCAiaW1wb3J0IHtpc051bGxPclVuZGVmLCB2YWx1ZU9yRGVmYXVsdH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvcmUuanMnO1xuaW1wb3J0IHtfZmFjdG9yaXplfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMubWF0aC5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi9jb3JlLmNvbnRyb2xsZXIuanMnKS5kZWZhdWx0IH0gQ2hhcnRcbiAqIEB0eXBlZGVmIHt7dmFsdWU6bnVtYmVyIHwgc3RyaW5nLCBsYWJlbD86c3RyaW5nLCBtYWpvcj86Ym9vbGVhbiwgJGNvbnRleHQ/OmFueX19IFRpY2tcbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBzdWJzZXQgb2YgdGlja3MgdG8gYmUgcGxvdHRlZCB0byBhdm9pZCBvdmVybGFwcGluZyBsYWJlbHMuXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9jb3JlLnNjYWxlLmpzJykuZGVmYXVsdH0gc2NhbGVcbiAqIEBwYXJhbSB7VGlja1tdfSB0aWNrc1xuICogQHJldHVybiB7VGlja1tdfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF1dG9Ta2lwKHNjYWxlLCB0aWNrcykge1xuICBjb25zdCB0aWNrT3B0cyA9IHNjYWxlLm9wdGlvbnMudGlja3M7XG4gIGNvbnN0IGRldGVybWluZWRNYXhUaWNrcyA9IGRldGVybWluZU1heFRpY2tzKHNjYWxlKTtcbiAgY29uc3QgdGlja3NMaW1pdCA9IE1hdGgubWluKHRpY2tPcHRzLm1heFRpY2tzTGltaXQgfHwgZGV0ZXJtaW5lZE1heFRpY2tzLCBkZXRlcm1pbmVkTWF4VGlja3MpO1xuICBjb25zdCBtYWpvckluZGljZXMgPSB0aWNrT3B0cy5tYWpvci5lbmFibGVkID8gZ2V0TWFqb3JJbmRpY2VzKHRpY2tzKSA6IFtdO1xuICBjb25zdCBudW1NYWpvckluZGljZXMgPSBtYWpvckluZGljZXMubGVuZ3RoO1xuICBjb25zdCBmaXJzdCA9IG1ham9ySW5kaWNlc1swXTtcbiAgY29uc3QgbGFzdCA9IG1ham9ySW5kaWNlc1tudW1NYWpvckluZGljZXMgLSAxXTtcbiAgY29uc3QgbmV3VGlja3MgPSBbXTtcblxuICAvLyBJZiB0aGVyZSBhcmUgdG9vIG1hbnkgbWFqb3IgdGlja3MgdG8gZGlzcGxheSB0aGVtIGFsbFxuICBpZiAobnVtTWFqb3JJbmRpY2VzID4gdGlja3NMaW1pdCkge1xuICAgIHNraXBNYWpvcnModGlja3MsIG5ld1RpY2tzLCBtYWpvckluZGljZXMsIG51bU1ham9ySW5kaWNlcyAvIHRpY2tzTGltaXQpO1xuICAgIHJldHVybiBuZXdUaWNrcztcbiAgfVxuXG4gIGNvbnN0IHNwYWNpbmcgPSBjYWxjdWxhdGVTcGFjaW5nKG1ham9ySW5kaWNlcywgdGlja3MsIHRpY2tzTGltaXQpO1xuXG4gIGlmIChudW1NYWpvckluZGljZXMgPiAwKSB7XG4gICAgbGV0IGksIGlsZW47XG4gICAgY29uc3QgYXZnTWFqb3JTcGFjaW5nID0gbnVtTWFqb3JJbmRpY2VzID4gMSA/IE1hdGgucm91bmQoKGxhc3QgLSBmaXJzdCkgLyAobnVtTWFqb3JJbmRpY2VzIC0gMSkpIDogbnVsbDtcbiAgICBza2lwKHRpY2tzLCBuZXdUaWNrcywgc3BhY2luZywgaXNOdWxsT3JVbmRlZihhdmdNYWpvclNwYWNpbmcpID8gMCA6IGZpcnN0IC0gYXZnTWFqb3JTcGFjaW5nLCBmaXJzdCk7XG4gICAgZm9yIChpID0gMCwgaWxlbiA9IG51bU1ham9ySW5kaWNlcyAtIDE7IGkgPCBpbGVuOyBpKyspIHtcbiAgICAgIHNraXAodGlja3MsIG5ld1RpY2tzLCBzcGFjaW5nLCBtYWpvckluZGljZXNbaV0sIG1ham9ySW5kaWNlc1tpICsgMV0pO1xuICAgIH1cbiAgICBza2lwKHRpY2tzLCBuZXdUaWNrcywgc3BhY2luZywgbGFzdCwgaXNOdWxsT3JVbmRlZihhdmdNYWpvclNwYWNpbmcpID8gdGlja3MubGVuZ3RoIDogbGFzdCArIGF2Z01ham9yU3BhY2luZyk7XG4gICAgcmV0dXJuIG5ld1RpY2tzO1xuICB9XG4gIHNraXAodGlja3MsIG5ld1RpY2tzLCBzcGFjaW5nKTtcbiAgcmV0dXJuIG5ld1RpY2tzO1xufVxuXG5mdW5jdGlvbiBkZXRlcm1pbmVNYXhUaWNrcyhzY2FsZSkge1xuICBjb25zdCBvZmZzZXQgPSBzY2FsZS5vcHRpb25zLm9mZnNldDtcbiAgY29uc3QgdGlja0xlbmd0aCA9IHNjYWxlLl90aWNrU2l6ZSgpO1xuICBjb25zdCBtYXhTY2FsZSA9IHNjYWxlLl9sZW5ndGggLyB0aWNrTGVuZ3RoICsgKG9mZnNldCA/IDAgOiAxKTtcbiAgY29uc3QgbWF4Q2hhcnQgPSBzY2FsZS5fbWF4TGVuZ3RoIC8gdGlja0xlbmd0aDtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5taW4obWF4U2NhbGUsIG1heENoYXJ0KSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJbXX0gbWFqb3JJbmRpY2VzXG4gKiBAcGFyYW0ge1RpY2tbXX0gdGlja3NcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aWNrc0xpbWl0XG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVNwYWNpbmcobWFqb3JJbmRpY2VzLCB0aWNrcywgdGlja3NMaW1pdCkge1xuICBjb25zdCBldmVuTWFqb3JTcGFjaW5nID0gZ2V0RXZlblNwYWNpbmcobWFqb3JJbmRpY2VzKTtcbiAgY29uc3Qgc3BhY2luZyA9IHRpY2tzLmxlbmd0aCAvIHRpY2tzTGltaXQ7XG5cbiAgLy8gSWYgdGhlIG1ham9yIHRpY2tzIGFyZSBldmVubHkgc3BhY2VkIGFwYXJ0LCBwbGFjZSB0aGUgbWlub3IgdGlja3NcbiAgLy8gc28gdGhhdCB0aGV5IGRpdmlkZSB0aGUgbWFqb3IgdGlja3MgaW50byBldmVuIGNodW5rc1xuICBpZiAoIWV2ZW5NYWpvclNwYWNpbmcpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoc3BhY2luZywgMSk7XG4gIH1cblxuICBjb25zdCBmYWN0b3JzID0gX2ZhY3Rvcml6ZShldmVuTWFqb3JTcGFjaW5nKTtcbiAgZm9yIChsZXQgaSA9IDAsIGlsZW4gPSBmYWN0b3JzLmxlbmd0aCAtIDE7IGkgPCBpbGVuOyBpKyspIHtcbiAgICBjb25zdCBmYWN0b3IgPSBmYWN0b3JzW2ldO1xuICAgIGlmIChmYWN0b3IgPiBzcGFjaW5nKSB7XG4gICAgICByZXR1cm4gZmFjdG9yO1xuICAgIH1cbiAgfVxuICByZXR1cm4gTWF0aC5tYXgoc3BhY2luZywgMSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtUaWNrW119IHRpY2tzXG4gKi9cbmZ1bmN0aW9uIGdldE1ham9ySW5kaWNlcyh0aWNrcykge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgbGV0IGksIGlsZW47XG4gIGZvciAoaSA9IDAsIGlsZW4gPSB0aWNrcy5sZW5ndGg7IGkgPCBpbGVuOyBpKyspIHtcbiAgICBpZiAodGlja3NbaV0ubWFqb3IpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7VGlja1tdfSB0aWNrc1xuICogQHBhcmFtIHtUaWNrW119IG5ld1RpY2tzXG4gKiBAcGFyYW0ge251bWJlcltdfSBtYWpvckluZGljZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcGFjaW5nXG4gKi9cbmZ1bmN0aW9uIHNraXBNYWpvcnModGlja3MsIG5ld1RpY2tzLCBtYWpvckluZGljZXMsIHNwYWNpbmcpIHtcbiAgbGV0IGNvdW50ID0gMDtcbiAgbGV0IG5leHQgPSBtYWpvckluZGljZXNbMF07XG4gIGxldCBpO1xuXG4gIHNwYWNpbmcgPSBNYXRoLmNlaWwoc3BhY2luZyk7XG4gIGZvciAoaSA9IDA7IGkgPCB0aWNrcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpID09PSBuZXh0KSB7XG4gICAgICBuZXdUaWNrcy5wdXNoKHRpY2tzW2ldKTtcbiAgICAgIGNvdW50Kys7XG4gICAgICBuZXh0ID0gbWFqb3JJbmRpY2VzW2NvdW50ICogc3BhY2luZ107XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtUaWNrW119IHRpY2tzXG4gKiBAcGFyYW0ge1RpY2tbXX0gbmV3VGlja3NcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcGFjaW5nXG4gKiBAcGFyYW0ge251bWJlcn0gW21ham9yU3RhcnRdXG4gKiBAcGFyYW0ge251bWJlcn0gW21ham9yRW5kXVxuICovXG5mdW5jdGlvbiBza2lwKHRpY2tzLCBuZXdUaWNrcywgc3BhY2luZywgbWFqb3JTdGFydCwgbWFqb3JFbmQpIHtcbiAgY29uc3Qgc3RhcnQgPSB2YWx1ZU9yRGVmYXVsdChtYWpvclN0YXJ0LCAwKTtcbiAgY29uc3QgZW5kID0gTWF0aC5taW4odmFsdWVPckRlZmF1bHQobWFqb3JFbmQsIHRpY2tzLmxlbmd0aCksIHRpY2tzLmxlbmd0aCk7XG4gIGxldCBjb3VudCA9IDA7XG4gIGxldCBsZW5ndGgsIGksIG5leHQ7XG5cbiAgc3BhY2luZyA9IE1hdGguY2VpbChzcGFjaW5nKTtcbiAgaWYgKG1ham9yRW5kKSB7XG4gICAgbGVuZ3RoID0gbWFqb3JFbmQgLSBtYWpvclN0YXJ0O1xuICAgIHNwYWNpbmcgPSBsZW5ndGggLyBNYXRoLmZsb29yKGxlbmd0aCAvIHNwYWNpbmcpO1xuICB9XG5cbiAgbmV4dCA9IHN0YXJ0O1xuXG4gIHdoaWxlIChuZXh0IDwgMCkge1xuICAgIGNvdW50Kys7XG4gICAgbmV4dCA9IE1hdGgucm91bmQoc3RhcnQgKyBjb3VudCAqIHNwYWNpbmcpO1xuICB9XG5cbiAgZm9yIChpID0gTWF0aC5tYXgoc3RhcnQsIDApOyBpIDwgZW5kOyBpKyspIHtcbiAgICBpZiAoaSA9PT0gbmV4dCkge1xuICAgICAgbmV3VGlja3MucHVzaCh0aWNrc1tpXSk7XG4gICAgICBjb3VudCsrO1xuICAgICAgbmV4dCA9IE1hdGgucm91bmQoc3RhcnQgKyBjb3VudCAqIHNwYWNpbmcpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJbXX0gYXJyXG4gKi9cbmZ1bmN0aW9uIGdldEV2ZW5TcGFjaW5nKGFycikge1xuICBjb25zdCBsZW4gPSBhcnIubGVuZ3RoO1xuICBsZXQgaSwgZGlmZjtcblxuICBpZiAobGVuIDwgMikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAoZGlmZiA9IGFyclswXSwgaSA9IDE7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhcnJbaV0gLSBhcnJbaSAtIDFdICE9PSBkaWZmKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBkaWZmO1xufVxuIiwgImltcG9ydCBFbGVtZW50IGZyb20gJy4vY29yZS5lbGVtZW50LmpzJztcbmltcG9ydCB7X2FsaWduUGl4ZWwsIF9tZWFzdXJlVGV4dCwgcmVuZGVyVGV4dCwgY2xpcEFyZWEsIHVuY2xpcEFyZWF9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jYW52YXMuanMnO1xuaW1wb3J0IHtjYWxsYmFjayBhcyBjYWxsLCBlYWNoLCBmaW5pdGVPckRlZmF1bHQsIGlzQXJyYXksIGlzRmluaXRlLCBpc051bGxPclVuZGVmLCBpc09iamVjdCwgdmFsdWVPckRlZmF1bHR9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCB7dG9EZWdyZWVzLCB0b1JhZGlhbnMsIF9pbnQxNlJhbmdlLCBfbGltaXRWYWx1ZSwgSEFMRl9QSX0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLm1hdGguanMnO1xuaW1wb3J0IHtfYWxpZ25TdGFydEVuZCwgX3RvTGVmdFJpZ2h0Q2VudGVyfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuZXh0cmFzLmpzJztcbmltcG9ydCB7Y3JlYXRlQ29udGV4dCwgdG9Gb250LCB0b1BhZGRpbmcsIF9hZGRHcmFjZX0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLm9wdGlvbnMuanMnO1xuaW1wb3J0IHthdXRvU2tpcH0gZnJvbSAnLi9jb3JlLnNjYWxlLmF1dG9za2lwLmpzJztcblxuY29uc3QgcmV2ZXJzZUFsaWduID0gKGFsaWduKSA9PiBhbGlnbiA9PT0gJ2xlZnQnID8gJ3JpZ2h0JyA6IGFsaWduID09PSAncmlnaHQnID8gJ2xlZnQnIDogYWxpZ247XG5jb25zdCBvZmZzZXRGcm9tRWRnZSA9IChzY2FsZSwgZWRnZSwgb2Zmc2V0KSA9PiBlZGdlID09PSAndG9wJyB8fCBlZGdlID09PSAnbGVmdCcgPyBzY2FsZVtlZGdlXSArIG9mZnNldCA6IHNjYWxlW2VkZ2VdIC0gb2Zmc2V0O1xuY29uc3QgZ2V0VGlja3NMaW1pdCA9ICh0aWNrc0xlbmd0aCwgbWF4VGlja3NMaW1pdCkgPT4gTWF0aC5taW4obWF4VGlja3NMaW1pdCB8fCB0aWNrc0xlbmd0aCwgdGlja3NMZW5ndGgpO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi90eXBlcy9pbmRleC5qcycpLkNoYXJ0IH0gQ2hhcnRcbiAqIEB0eXBlZGVmIHt7dmFsdWU6bnVtYmVyIHwgc3RyaW5nLCBsYWJlbD86c3RyaW5nLCBtYWpvcj86Ym9vbGVhbiwgJGNvbnRleHQ/OmFueX19IFRpY2tcbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgYXJyYXkgY29udGFpbmluZyBudW1JdGVtcyBmcm9tIGFyclxuICogQHBhcmFtIHthbnlbXX0gYXJyXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtSXRlbXNcbiAqL1xuZnVuY3Rpb24gc2FtcGxlKGFyciwgbnVtSXRlbXMpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGNvbnN0IGluY3JlbWVudCA9IGFyci5sZW5ndGggLyBudW1JdGVtcztcbiAgY29uc3QgbGVuID0gYXJyLmxlbmd0aDtcbiAgbGV0IGkgPSAwO1xuXG4gIGZvciAoOyBpIDwgbGVuOyBpICs9IGluY3JlbWVudCkge1xuICAgIHJlc3VsdC5wdXNoKGFycltNYXRoLmZsb29yKGkpXSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1NjYWxlfSBzY2FsZVxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9mZnNldEdyaWRMaW5lc1xuICovXG5mdW5jdGlvbiBnZXRQaXhlbEZvckdyaWRMaW5lKHNjYWxlLCBpbmRleCwgb2Zmc2V0R3JpZExpbmVzKSB7XG4gIGNvbnN0IGxlbmd0aCA9IHNjYWxlLnRpY2tzLmxlbmd0aDtcbiAgY29uc3QgdmFsaWRJbmRleCA9IE1hdGgubWluKGluZGV4LCBsZW5ndGggLSAxKTtcbiAgY29uc3Qgc3RhcnQgPSBzY2FsZS5fc3RhcnRQaXhlbDtcbiAgY29uc3QgZW5kID0gc2NhbGUuX2VuZFBpeGVsO1xuICBjb25zdCBlcHNpbG9uID0gMWUtNjsgLy8gMWUtNiBpcyBtYXJnaW4gaW4gcGl4ZWxzIGZvciBhY2N1bXVsYXRlZCBlcnJvci5cbiAgbGV0IGxpbmVWYWx1ZSA9IHNjYWxlLmdldFBpeGVsRm9yVGljayh2YWxpZEluZGV4KTtcbiAgbGV0IG9mZnNldDtcblxuICBpZiAob2Zmc2V0R3JpZExpbmVzKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgICAgb2Zmc2V0ID0gTWF0aC5tYXgobGluZVZhbHVlIC0gc3RhcnQsIGVuZCAtIGxpbmVWYWx1ZSk7XG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgb2Zmc2V0ID0gKHNjYWxlLmdldFBpeGVsRm9yVGljaygxKSAtIGxpbmVWYWx1ZSkgLyAyO1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmZzZXQgPSAobGluZVZhbHVlIC0gc2NhbGUuZ2V0UGl4ZWxGb3JUaWNrKHZhbGlkSW5kZXggLSAxKSkgLyAyO1xuICAgIH1cbiAgICBsaW5lVmFsdWUgKz0gdmFsaWRJbmRleCA8IGluZGV4ID8gb2Zmc2V0IDogLW9mZnNldDtcblxuICAgIC8vIFJldHVybiB1bmRlZmluZWQgaWYgdGhlIHBpeGVsIGlzIG91dCBvZiB0aGUgcmFuZ2VcbiAgICBpZiAobGluZVZhbHVlIDwgc3RhcnQgLSBlcHNpbG9uIHx8IGxpbmVWYWx1ZSA+IGVuZCArIGVwc2lsb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxpbmVWYWx1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gY2FjaGVzXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoXG4gKi9cbmZ1bmN0aW9uIGdhcmJhZ2VDb2xsZWN0KGNhY2hlcywgbGVuZ3RoKSB7XG4gIGVhY2goY2FjaGVzLCAoY2FjaGUpID0+IHtcbiAgICBjb25zdCBnYyA9IGNhY2hlLmdjO1xuICAgIGNvbnN0IGdjTGVuID0gZ2MubGVuZ3RoIC8gMjtcbiAgICBsZXQgaTtcbiAgICBpZiAoZ2NMZW4gPiBsZW5ndGgpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBnY0xlbjsgKytpKSB7XG4gICAgICAgIGRlbGV0ZSBjYWNoZS5kYXRhW2djW2ldXTtcbiAgICAgIH1cbiAgICAgIGdjLnNwbGljZSgwLCBnY0xlbik7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBnZXRUaWNrTWFya0xlbmd0aChvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLmRyYXdUaWNrcyA/IG9wdGlvbnMudGlja0xlbmd0aCA6IDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gZ2V0VGl0bGVIZWlnaHQob3B0aW9ucywgZmFsbGJhY2spIHtcbiAgaWYgKCFvcHRpb25zLmRpc3BsYXkpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGNvbnN0IGZvbnQgPSB0b0ZvbnQob3B0aW9ucy5mb250LCBmYWxsYmFjayk7XG4gIGNvbnN0IHBhZGRpbmcgPSB0b1BhZGRpbmcob3B0aW9ucy5wYWRkaW5nKTtcbiAgY29uc3QgbGluZXMgPSBpc0FycmF5KG9wdGlvbnMudGV4dCkgPyBvcHRpb25zLnRleHQubGVuZ3RoIDogMTtcblxuICByZXR1cm4gKGxpbmVzICogZm9udC5saW5lSGVpZ2h0KSArIHBhZGRpbmcuaGVpZ2h0O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTY2FsZUNvbnRleHQocGFyZW50LCBzY2FsZSkge1xuICByZXR1cm4gY3JlYXRlQ29udGV4dChwYXJlbnQsIHtcbiAgICBzY2FsZSxcbiAgICB0eXBlOiAnc2NhbGUnXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUaWNrQ29udGV4dChwYXJlbnQsIGluZGV4LCB0aWNrKSB7XG4gIHJldHVybiBjcmVhdGVDb250ZXh0KHBhcmVudCwge1xuICAgIHRpY2ssXG4gICAgaW5kZXgsXG4gICAgdHlwZTogJ3RpY2snXG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0aXRsZUFsaWduKGFsaWduLCBwb3NpdGlvbiwgcmV2ZXJzZSkge1xuICAvKiogQHR5cGUge0NhbnZhc1RleHRBbGlnbn0gKi9cbiAgbGV0IHJldCA9IF90b0xlZnRSaWdodENlbnRlcihhbGlnbik7XG4gIGlmICgocmV2ZXJzZSAmJiBwb3NpdGlvbiAhPT0gJ3JpZ2h0JykgfHwgKCFyZXZlcnNlICYmIHBvc2l0aW9uID09PSAncmlnaHQnKSkge1xuICAgIHJldCA9IHJldmVyc2VBbGlnbihyZXQpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIHRpdGxlQXJncyhzY2FsZSwgb2Zmc2V0LCBwb3NpdGlvbiwgYWxpZ24pIHtcbiAgY29uc3Qge3RvcCwgbGVmdCwgYm90dG9tLCByaWdodCwgY2hhcnR9ID0gc2NhbGU7XG4gIGNvbnN0IHtjaGFydEFyZWEsIHNjYWxlc30gPSBjaGFydDtcbiAgbGV0IHJvdGF0aW9uID0gMDtcbiAgbGV0IG1heFdpZHRoLCB0aXRsZVgsIHRpdGxlWTtcbiAgY29uc3QgaGVpZ2h0ID0gYm90dG9tIC0gdG9wO1xuICBjb25zdCB3aWR0aCA9IHJpZ2h0IC0gbGVmdDtcblxuICBpZiAoc2NhbGUuaXNIb3Jpem9udGFsKCkpIHtcbiAgICB0aXRsZVggPSBfYWxpZ25TdGFydEVuZChhbGlnbiwgbGVmdCwgcmlnaHQpO1xuXG4gICAgaWYgKGlzT2JqZWN0KHBvc2l0aW9uKSkge1xuICAgICAgY29uc3QgcG9zaXRpb25BeGlzSUQgPSBPYmplY3Qua2V5cyhwb3NpdGlvbilbMF07XG4gICAgICBjb25zdCB2YWx1ZSA9IHBvc2l0aW9uW3Bvc2l0aW9uQXhpc0lEXTtcbiAgICAgIHRpdGxlWSA9IHNjYWxlc1twb3NpdGlvbkF4aXNJRF0uZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkgKyBoZWlnaHQgLSBvZmZzZXQ7XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHRpdGxlWSA9IChjaGFydEFyZWEuYm90dG9tICsgY2hhcnRBcmVhLnRvcCkgLyAyICsgaGVpZ2h0IC0gb2Zmc2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aXRsZVkgPSBvZmZzZXRGcm9tRWRnZShzY2FsZSwgcG9zaXRpb24sIG9mZnNldCk7XG4gICAgfVxuICAgIG1heFdpZHRoID0gcmlnaHQgLSBsZWZ0O1xuICB9IGVsc2Uge1xuICAgIGlmIChpc09iamVjdChwb3NpdGlvbikpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uQXhpc0lEID0gT2JqZWN0LmtleXMocG9zaXRpb24pWzBdO1xuICAgICAgY29uc3QgdmFsdWUgPSBwb3NpdGlvbltwb3NpdGlvbkF4aXNJRF07XG4gICAgICB0aXRsZVggPSBzY2FsZXNbcG9zaXRpb25BeGlzSURdLmdldFBpeGVsRm9yVmFsdWUodmFsdWUpIC0gd2lkdGggKyBvZmZzZXQ7XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHRpdGxlWCA9IChjaGFydEFyZWEubGVmdCArIGNoYXJ0QXJlYS5yaWdodCkgLyAyIC0gd2lkdGggKyBvZmZzZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpdGxlWCA9IG9mZnNldEZyb21FZGdlKHNjYWxlLCBwb3NpdGlvbiwgb2Zmc2V0KTtcbiAgICB9XG4gICAgdGl0bGVZID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIGJvdHRvbSwgdG9wKTtcbiAgICByb3RhdGlvbiA9IHBvc2l0aW9uID09PSAnbGVmdCcgPyAtSEFMRl9QSSA6IEhBTEZfUEk7XG4gIH1cbiAgcmV0dXJuIHt0aXRsZVgsIHRpdGxlWSwgbWF4V2lkdGgsIHJvdGF0aW9ufTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NhbGUgZXh0ZW5kcyBFbGVtZW50IHtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LXN0YXRlbWVudHNcbiAgY29uc3RydWN0b3IoY2ZnKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXMuaWQgPSBjZmcuaWQ7XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgdGhpcy50eXBlID0gY2ZnLnR5cGU7XG4gICAgLyoqIEB0eXBlIHthbnl9ICovXG4gICAgdGhpcy5vcHRpb25zID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAqL1xuICAgIHRoaXMuY3R4ID0gY2ZnLmN0eDtcbiAgICAvKiogQHR5cGUge0NoYXJ0fSAqL1xuICAgIHRoaXMuY2hhcnQgPSBjZmcuY2hhcnQ7XG5cbiAgICAvLyBpbXBsZW1lbnRzIGJveFxuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMudG9wID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuYm90dG9tID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMubGVmdCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLnJpZ2h0ID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMud2lkdGggPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5oZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbWFyZ2lucyA9IHtcbiAgICAgIGxlZnQ6IDAsXG4gICAgICByaWdodDogMCxcbiAgICAgIHRvcDogMCxcbiAgICAgIGJvdHRvbTogMFxuICAgIH07XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5tYXhXaWR0aCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLm1heEhlaWdodCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLnBhZGRpbmdUb3AgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wYWRkaW5nQm90dG9tID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMucGFkZGluZ0xlZnQgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wYWRkaW5nUmlnaHQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBzY2FsZS1zcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgLyoqIEB0eXBlIHtzdHJpbmc9fSAqL1xuICAgIHRoaXMuYXhpcyA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge251bWJlcj19ICovXG4gICAgdGhpcy5sYWJlbFJvdGF0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWluID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWF4ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JhbmdlID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7VGlja1tdfSAqL1xuICAgIHRoaXMudGlja3MgPSBbXTtcbiAgICAvKiogQHR5cGUge29iamVjdFtdfG51bGx9ICovXG4gICAgdGhpcy5fZ3JpZExpbmVJdGVtcyA9IG51bGw7XG4gICAgLyoqIEB0eXBlIHtvYmplY3RbXXxudWxsfSAqL1xuICAgIHRoaXMuX2xhYmVsSXRlbXMgPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7b2JqZWN0fG51bGx9ICovXG4gICAgdGhpcy5fbGFiZWxTaXplcyA9IG51bGw7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgICB0aGlzLl9tYXhMZW5ndGggPSAwO1xuICAgIHRoaXMuX2xvbmdlc3RUZXh0Q2FjaGUgPSB7fTtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLl9zdGFydFBpeGVsID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuX2VuZFBpeGVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3JldmVyc2VQaXhlbHMgPSBmYWxzZTtcbiAgICB0aGlzLl91c2VyTWF4ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3VzZXJNaW4gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc3VnZ2VzdGVkTWF4ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N1Z2dlc3RlZE1pbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl90aWNrc0xlbmd0aCA9IDA7XG4gICAgdGhpcy5fYm9yZGVyVmFsdWUgPSAwO1xuICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgdGhpcy5fZGF0YUxpbWl0c0NhY2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuJGNvbnRleHQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHthbnl9IG9wdGlvbnNcblx0ICogQHNpbmNlIDMuMFxuXHQgKi9cbiAgaW5pdChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucy5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcblxuICAgIHRoaXMuYXhpcyA9IG9wdGlvbnMuYXhpcztcblxuICAgIC8vIHBhcnNlIG1pbi9tYXggdmFsdWUsIHNvIHdlIGNhbiBwcm9wZXJseSBkZXRlcm1pbmUgbWluL21heCBmb3Igb3RoZXIgc2NhbGVzXG4gICAgdGhpcy5fdXNlck1pbiA9IHRoaXMucGFyc2Uob3B0aW9ucy5taW4pO1xuICAgIHRoaXMuX3VzZXJNYXggPSB0aGlzLnBhcnNlKG9wdGlvbnMubWF4KTtcbiAgICB0aGlzLl9zdWdnZXN0ZWRNaW4gPSB0aGlzLnBhcnNlKG9wdGlvbnMuc3VnZ2VzdGVkTWluKTtcbiAgICB0aGlzLl9zdWdnZXN0ZWRNYXggPSB0aGlzLnBhcnNlKG9wdGlvbnMuc3VnZ2VzdGVkTWF4KTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBQYXJzZSBhIHN1cHBvcnRlZCBpbnB1dCB2YWx1ZSB0byBpbnRlcm5hbCByZXByZXNlbnRhdGlvbi5cblx0ICogQHBhcmFtIHsqfSByYXdcblx0ICogQHBhcmFtIHtudW1iZXJ9IFtpbmRleF1cblx0ICogQHNpbmNlIDMuMFxuXHQgKi9cbiAgcGFyc2UocmF3LCBpbmRleCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgcmV0dXJuIHJhdztcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcmV0dXJuIHt7bWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBtaW5EZWZpbmVkOiBib29sZWFuLCBtYXhEZWZpbmVkOiBib29sZWFufX1cblx0ICogQHByb3RlY3RlZFxuXHQgKiBAc2luY2UgMy4wXG5cdCAqL1xuICBnZXRVc2VyQm91bmRzKCkge1xuICAgIGxldCB7X3VzZXJNaW4sIF91c2VyTWF4LCBfc3VnZ2VzdGVkTWluLCBfc3VnZ2VzdGVkTWF4fSA9IHRoaXM7XG4gICAgX3VzZXJNaW4gPSBmaW5pdGVPckRlZmF1bHQoX3VzZXJNaW4sIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG4gICAgX3VzZXJNYXggPSBmaW5pdGVPckRlZmF1bHQoX3VzZXJNYXgsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSk7XG4gICAgX3N1Z2dlc3RlZE1pbiA9IGZpbml0ZU9yRGVmYXVsdChfc3VnZ2VzdGVkTWluLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgIF9zdWdnZXN0ZWRNYXggPSBmaW5pdGVPckRlZmF1bHQoX3N1Z2dlc3RlZE1heCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKTtcbiAgICByZXR1cm4ge1xuICAgICAgbWluOiBmaW5pdGVPckRlZmF1bHQoX3VzZXJNaW4sIF9zdWdnZXN0ZWRNaW4pLFxuICAgICAgbWF4OiBmaW5pdGVPckRlZmF1bHQoX3VzZXJNYXgsIF9zdWdnZXN0ZWRNYXgpLFxuICAgICAgbWluRGVmaW5lZDogaXNGaW5pdGUoX3VzZXJNaW4pLFxuICAgICAgbWF4RGVmaW5lZDogaXNGaW5pdGUoX3VzZXJNYXgpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IGNhblN0YWNrXG5cdCAqIEByZXR1cm4ge3ttaW46IG51bWJlciwgbWF4OiBudW1iZXJ9fVxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqIEBzaW5jZSAzLjBcblx0ICovXG4gIGdldE1pbk1heChjYW5TdGFjaykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICBsZXQge21pbiwgbWF4LCBtaW5EZWZpbmVkLCBtYXhEZWZpbmVkfSA9IHRoaXMuZ2V0VXNlckJvdW5kcygpO1xuICAgIGxldCByYW5nZTtcblxuICAgIGlmIChtaW5EZWZpbmVkICYmIG1heERlZmluZWQpIHtcbiAgICAgIHJldHVybiB7bWluLCBtYXh9O1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFzID0gdGhpcy5nZXRNYXRjaGluZ1Zpc2libGVNZXRhcygpO1xuICAgIGZvciAobGV0IGkgPSAwLCBpbGVuID0gbWV0YXMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgICByYW5nZSA9IG1ldGFzW2ldLmNvbnRyb2xsZXIuZ2V0TWluTWF4KHRoaXMsIGNhblN0YWNrKTtcbiAgICAgIGlmICghbWluRGVmaW5lZCkge1xuICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIHJhbmdlLm1pbik7XG4gICAgICB9XG4gICAgICBpZiAoIW1heERlZmluZWQpIHtcbiAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCByYW5nZS5tYXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSBtaW4gPD0gbWF4IHdoZW4gb25seSBtaW4gb3IgbWF4IGlzIGRlZmluZWQgYnkgdXNlciBhbmQgdGhlIGRhdGEgaXMgb3V0c2lkZSB0aGF0IHJhbmdlXG4gICAgbWluID0gbWF4RGVmaW5lZCAmJiBtaW4gPiBtYXggPyBtYXggOiBtaW47XG4gICAgbWF4ID0gbWluRGVmaW5lZCAmJiBtaW4gPiBtYXggPyBtaW4gOiBtYXg7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWluOiBmaW5pdGVPckRlZmF1bHQobWluLCBmaW5pdGVPckRlZmF1bHQobWF4LCBtaW4pKSxcbiAgICAgIG1heDogZmluaXRlT3JEZWZhdWx0KG1heCwgZmluaXRlT3JEZWZhdWx0KG1pbiwgbWF4KSlcbiAgICB9O1xuICB9XG5cbiAgLyoqXG5cdCAqIEdldCB0aGUgcGFkZGluZyBuZWVkZWQgZm9yIHRoZSBzY2FsZVxuXHQgKiBAcmV0dXJuIHt7dG9wOiBudW1iZXIsIGxlZnQ6IG51bWJlciwgYm90dG9tOiBudW1iZXIsIHJpZ2h0OiBudW1iZXJ9fSB0aGUgbmVjZXNzYXJ5IHBhZGRpbmdcblx0ICogQHByaXZhdGVcblx0ICovXG4gIGdldFBhZGRpbmcoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZnQ6IHRoaXMucGFkZGluZ0xlZnQgfHwgMCxcbiAgICAgIHRvcDogdGhpcy5wYWRkaW5nVG9wIHx8IDAsXG4gICAgICByaWdodDogdGhpcy5wYWRkaW5nUmlnaHQgfHwgMCxcbiAgICAgIGJvdHRvbTogdGhpcy5wYWRkaW5nQm90dG9tIHx8IDBcbiAgICB9O1xuICB9XG5cbiAgLyoqXG5cdCAqIFJldHVybnMgdGhlIHNjYWxlIHRpY2sgb2JqZWN0c1xuXHQgKiBAcmV0dXJuIHtUaWNrW119XG5cdCAqIEBzaW5jZSAyLjdcblx0ICovXG4gIGdldFRpY2tzKCkge1xuICAgIHJldHVybiB0aGlzLnRpY2tzO1xuICB9XG5cbiAgLyoqXG5cdCAqIEByZXR1cm4ge3N0cmluZ1tdfVxuXHQgKi9cbiAgZ2V0TGFiZWxzKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNoYXJ0LmRhdGE7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5sYWJlbHMgfHwgKHRoaXMuaXNIb3Jpem9udGFsKCkgPyBkYXRhLnhMYWJlbHMgOiBkYXRhLnlMYWJlbHMpIHx8IGRhdGEubGFiZWxzIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydCgnLi4vdHlwZXMuanMnKS5MYWJlbEl0ZW1bXX1cbiAgICovXG4gIGdldExhYmVsSXRlbXMoY2hhcnRBcmVhID0gdGhpcy5jaGFydC5jaGFydEFyZWEpIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuX2xhYmVsSXRlbXMgfHwgKHRoaXMuX2xhYmVsSXRlbXMgPSB0aGlzLl9jb21wdXRlTGFiZWxJdGVtcyhjaGFydEFyZWEpKTtcbiAgICByZXR1cm4gaXRlbXM7XG4gIH1cblxuICAvLyBXaGVuIGEgbmV3IGxheW91dCBpcyBjcmVhdGVkLCByZXNldCB0aGUgZGF0YSBsaW1pdHMgY2FjaGVcbiAgYmVmb3JlTGF5b3V0KCkge1xuICAgIHRoaXMuX2NhY2hlID0ge307XG4gICAgdGhpcy5fZGF0YUxpbWl0c0NhY2hlZCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gVGhlc2UgbWV0aG9kcyBhcmUgb3JkZXJlZCBieSBsaWZlY3ljbGUuIFV0aWxpdGllcyB0aGVuIGZvbGxvdy5cbiAgLy8gQW55IGZ1bmN0aW9uIGRlZmluZWQgaGVyZSBpcyBpbmhlcml0ZWQgYnkgYWxsIHNjYWxlIHR5cGVzLlxuICAvLyBBbnkgZnVuY3Rpb24gY2FuIGJlIGV4dGVuZGVkIGJ5IHRoZSBzY2FsZSB0eXBlXG5cbiAgYmVmb3JlVXBkYXRlKCkge1xuICAgIGNhbGwodGhpcy5vcHRpb25zLmJlZm9yZVVwZGF0ZSwgW3RoaXNdKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gbWF4V2lkdGggLSB0aGUgbWF4IHdpZHRoIGluIHBpeGVsc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gbWF4SGVpZ2h0IC0gdGhlIG1heCBoZWlnaHQgaW4gcGl4ZWxzXG5cdCAqIEBwYXJhbSB7e3RvcDogbnVtYmVyLCBsZWZ0OiBudW1iZXIsIGJvdHRvbTogbnVtYmVyLCByaWdodDogbnVtYmVyfX0gbWFyZ2lucyAtIHRoZSBzcGFjZSBiZXR3ZWVuIHRoZSBlZGdlIG9mIHRoZSBvdGhlciBzY2FsZXMgYW5kIGVkZ2Ugb2YgdGhlIGNoYXJ0XG5cdCAqICAgVGhpcyBzcGFjZSBjb21lcyBmcm9tIHR3byBzb3VyY2VzOlxuXHQgKiAgICAgLSBwYWRkaW5nIC0gc3BhY2UgdGhhdCdzIHJlcXVpcmVkIHRvIHNob3cgdGhlIGxhYmVscyBhdCB0aGUgZWRnZXMgb2YgdGhlIHNjYWxlXG5cdCAqICAgICAtIHRoaWNrbmVzcyBvZiBzY2FsZXMgb3IgbGVnZW5kcyBpbiBhbm90aGVyIG9yaWVudGF0aW9uXG5cdCAqL1xuICB1cGRhdGUobWF4V2lkdGgsIG1heEhlaWdodCwgbWFyZ2lucykge1xuICAgIGNvbnN0IHtiZWdpbkF0WmVybywgZ3JhY2UsIHRpY2tzOiB0aWNrT3B0c30gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3Qgc2FtcGxlU2l6ZSA9IHRpY2tPcHRzLnNhbXBsZVNpemU7XG5cbiAgICAvLyBVcGRhdGUgTGlmZWN5Y2xlIC0gUHJvYmFibHkgZG9uJ3Qgd2FudCB0byBldmVyIGV4dGVuZCBvciBvdmVyd3JpdGUgdGhpcyBmdW5jdGlvbiA7KVxuICAgIHRoaXMuYmVmb3JlVXBkYXRlKCk7XG5cbiAgICAvLyBBYnNvcmIgdGhlIG1hc3RlciBtZWFzdXJlbWVudHNcbiAgICB0aGlzLm1heFdpZHRoID0gbWF4V2lkdGg7XG4gICAgdGhpcy5tYXhIZWlnaHQgPSBtYXhIZWlnaHQ7XG4gICAgdGhpcy5fbWFyZ2lucyA9IG1hcmdpbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIGxlZnQ6IDAsXG4gICAgICByaWdodDogMCxcbiAgICAgIHRvcDogMCxcbiAgICAgIGJvdHRvbTogMFxuICAgIH0sIG1hcmdpbnMpO1xuXG4gICAgdGhpcy50aWNrcyA9IG51bGw7XG4gICAgdGhpcy5fbGFiZWxTaXplcyA9IG51bGw7XG4gICAgdGhpcy5fZ3JpZExpbmVJdGVtcyA9IG51bGw7XG4gICAgdGhpcy5fbGFiZWxJdGVtcyA9IG51bGw7XG5cbiAgICAvLyBEaW1lbnNpb25zXG4gICAgdGhpcy5iZWZvcmVTZXREaW1lbnNpb25zKCk7XG4gICAgdGhpcy5zZXREaW1lbnNpb25zKCk7XG4gICAgdGhpcy5hZnRlclNldERpbWVuc2lvbnMoKTtcblxuICAgIHRoaXMuX21heExlbmd0aCA9IHRoaXMuaXNIb3Jpem9udGFsKClcbiAgICAgID8gdGhpcy53aWR0aCArIG1hcmdpbnMubGVmdCArIG1hcmdpbnMucmlnaHRcbiAgICAgIDogdGhpcy5oZWlnaHQgKyBtYXJnaW5zLnRvcCArIG1hcmdpbnMuYm90dG9tO1xuXG4gICAgLy8gRGF0YSBtaW4vbWF4XG4gICAgaWYgKCF0aGlzLl9kYXRhTGltaXRzQ2FjaGVkKSB7XG4gICAgICB0aGlzLmJlZm9yZURhdGFMaW1pdHMoKTtcbiAgICAgIHRoaXMuZGV0ZXJtaW5lRGF0YUxpbWl0cygpO1xuICAgICAgdGhpcy5hZnRlckRhdGFMaW1pdHMoKTtcbiAgICAgIHRoaXMuX3JhbmdlID0gX2FkZEdyYWNlKHRoaXMsIGdyYWNlLCBiZWdpbkF0WmVybyk7XG4gICAgICB0aGlzLl9kYXRhTGltaXRzQ2FjaGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmJlZm9yZUJ1aWxkVGlja3MoKTtcblxuICAgIHRoaXMudGlja3MgPSB0aGlzLmJ1aWxkVGlja3MoKSB8fCBbXTtcblxuICAgIC8vIEFsbG93IG1vZGlmaWNhdGlvbiBvZiB0aWNrcyBpbiBjYWxsYmFjay5cbiAgICB0aGlzLmFmdGVyQnVpbGRUaWNrcygpO1xuXG4gICAgLy8gQ29tcHV0ZSB0aWNrIHJvdGF0aW9uIGFuZCBmaXQgdXNpbmcgYSBzYW1wbGVkIHN1YnNldCBvZiBsYWJlbHNcbiAgICAvLyBXZSBnZW5lcmFsbHkgZG9uJ3QgbmVlZCB0byBjb21wdXRlIHRoZSBzaXplIG9mIGV2ZXJ5IHNpbmdsZSBsYWJlbCBmb3IgZGV0ZXJtaW5pbmcgc2NhbGUgc2l6ZVxuICAgIGNvbnN0IHNhbXBsaW5nRW5hYmxlZCA9IHNhbXBsZVNpemUgPCB0aGlzLnRpY2tzLmxlbmd0aDtcbiAgICB0aGlzLl9jb252ZXJ0VGlja3NUb0xhYmVscyhzYW1wbGluZ0VuYWJsZWQgPyBzYW1wbGUodGhpcy50aWNrcywgc2FtcGxlU2l6ZSkgOiB0aGlzLnRpY2tzKTtcblxuICAgIC8vIGNvbmZpZ3VyZSBpcyBjYWxsZWQgdHdpY2UsIG9uY2UgaGVyZSwgb25jZSBmcm9tIGNvcmUuY29udHJvbGxlci51cGRhdGVMYXlvdXQuXG4gICAgLy8gSGVyZSB3ZSBoYXZlbid0IGJlZW4gcG9zaXRpb25lZCB5ZXQsIGJ1dCBkaW1lbnNpb25zIGFyZSBjb3JyZWN0LlxuICAgIC8vIFZhcmlhYmxlcyBzZXQgaW4gY29uZmlndXJlIGFyZSBuZWVkZWQgZm9yIGNhbGN1bGF0ZUxhYmVsUm90YXRpb24sIGFuZFxuICAgIC8vIGl0J3Mgb2sgdGhhdCBjb29yZGluYXRlcyBhcmUgbm90IGNvcnJlY3QgdGhlcmUsIG9ubHkgZGltZW5zaW9ucyBtYXR0ZXIuXG4gICAgdGhpcy5jb25maWd1cmUoKTtcblxuICAgIC8vIFRpY2sgUm90YXRpb25cbiAgICB0aGlzLmJlZm9yZUNhbGN1bGF0ZUxhYmVsUm90YXRpb24oKTtcbiAgICB0aGlzLmNhbGN1bGF0ZUxhYmVsUm90YXRpb24oKTsgLy8gUHJlY29uZGl0aW9uczogbnVtYmVyIG9mIHRpY2tzIGFuZCBzaXplcyBvZiBsYXJnZXN0IGxhYmVscyBtdXN0IGJlIGNhbGN1bGF0ZWQgYmVmb3JlaGFuZFxuICAgIHRoaXMuYWZ0ZXJDYWxjdWxhdGVMYWJlbFJvdGF0aW9uKCk7XG5cbiAgICAvLyBBdXRvLXNraXBcbiAgICBpZiAodGlja09wdHMuZGlzcGxheSAmJiAodGlja09wdHMuYXV0b1NraXAgfHwgdGlja09wdHMuc291cmNlID09PSAnYXV0bycpKSB7XG4gICAgICB0aGlzLnRpY2tzID0gYXV0b1NraXAodGhpcywgdGhpcy50aWNrcyk7XG4gICAgICB0aGlzLl9sYWJlbFNpemVzID0gbnVsbDtcbiAgICAgIHRoaXMuYWZ0ZXJBdXRvU2tpcCgpO1xuICAgIH1cblxuICAgIGlmIChzYW1wbGluZ0VuYWJsZWQpIHtcbiAgICAgIC8vIEdlbmVyYXRlIGxhYmVscyB1c2luZyBhbGwgbm9uLXNraXBwZWQgdGlja3NcbiAgICAgIHRoaXMuX2NvbnZlcnRUaWNrc1RvTGFiZWxzKHRoaXMudGlja3MpO1xuICAgIH1cblxuICAgIHRoaXMuYmVmb3JlRml0KCk7XG4gICAgdGhpcy5maXQoKTsgLy8gUHJlY29uZGl0aW9uczogbGFiZWwgcm90YXRpb24gYW5kIGxhYmVsIHNpemVzIG11c3QgYmUgY2FsY3VsYXRlZCBiZWZvcmVoYW5kXG4gICAgdGhpcy5hZnRlckZpdCgpO1xuXG4gICAgLy8gSU1QT1JUQU5UOiBhZnRlciB0aGlzIHBvaW50LCB3ZSBjb25zaWRlciB0aGF0IGB0aGlzLnRpY2tzYCB3aWxsIE5FVkVSIGNoYW5nZSFcblxuICAgIHRoaXMuYWZ0ZXJVcGRhdGUoKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBjb25maWd1cmUoKSB7XG4gICAgbGV0IHJldmVyc2VQaXhlbHMgPSB0aGlzLm9wdGlvbnMucmV2ZXJzZTtcbiAgICBsZXQgc3RhcnRQaXhlbCwgZW5kUGl4ZWw7XG5cbiAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgc3RhcnRQaXhlbCA9IHRoaXMubGVmdDtcbiAgICAgIGVuZFBpeGVsID0gdGhpcy5yaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRQaXhlbCA9IHRoaXMudG9wO1xuICAgICAgZW5kUGl4ZWwgPSB0aGlzLmJvdHRvbTtcbiAgICAgIC8vIGJ5IGRlZmF1bHQgdmVydGljYWwgc2NhbGVzIGFyZSBmcm9tIGJvdHRvbSB0byB0b3AsIHNvIHBpeGVscyBhcmUgcmV2ZXJzZWRcbiAgICAgIHJldmVyc2VQaXhlbHMgPSAhcmV2ZXJzZVBpeGVscztcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRQaXhlbCA9IHN0YXJ0UGl4ZWw7XG4gICAgdGhpcy5fZW5kUGl4ZWwgPSBlbmRQaXhlbDtcbiAgICB0aGlzLl9yZXZlcnNlUGl4ZWxzID0gcmV2ZXJzZVBpeGVscztcbiAgICB0aGlzLl9sZW5ndGggPSBlbmRQaXhlbCAtIHN0YXJ0UGl4ZWw7XG4gICAgdGhpcy5fYWxpZ25Ub1BpeGVscyA9IHRoaXMub3B0aW9ucy5hbGlnblRvUGl4ZWxzO1xuICB9XG5cbiAgYWZ0ZXJVcGRhdGUoKSB7XG4gICAgY2FsbCh0aGlzLm9wdGlvbnMuYWZ0ZXJVcGRhdGUsIFt0aGlzXSk7XG4gIH1cblxuICAvL1xuXG4gIGJlZm9yZVNldERpbWVuc2lvbnMoKSB7XG4gICAgY2FsbCh0aGlzLm9wdGlvbnMuYmVmb3JlU2V0RGltZW5zaW9ucywgW3RoaXNdKTtcbiAgfVxuICBzZXREaW1lbnNpb25zKCkge1xuICAgIC8vIFNldCB0aGUgdW5jb25zdHJhaW5lZCBkaW1lbnNpb24gYmVmb3JlIGxhYmVsIHJvdGF0aW9uXG4gICAgaWYgKHRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgIC8vIFJlc2V0IHBvc2l0aW9uIGJlZm9yZSBjYWxjdWxhdGluZyByb3RhdGlvblxuICAgICAgdGhpcy53aWR0aCA9IHRoaXMubWF4V2lkdGg7XG4gICAgICB0aGlzLmxlZnQgPSAwO1xuICAgICAgdGhpcy5yaWdodCA9IHRoaXMud2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQ7XG5cbiAgICAgIC8vIFJlc2V0IHBvc2l0aW9uIGJlZm9yZSBjYWxjdWxhdGluZyByb3RhdGlvblxuICAgICAgdGhpcy50b3AgPSAwO1xuICAgICAgdGhpcy5ib3R0b20gPSB0aGlzLmhlaWdodDtcbiAgICB9XG5cbiAgICAvLyBSZXNldCBwYWRkaW5nXG4gICAgdGhpcy5wYWRkaW5nTGVmdCA9IDA7XG4gICAgdGhpcy5wYWRkaW5nVG9wID0gMDtcbiAgICB0aGlzLnBhZGRpbmdSaWdodCA9IDA7XG4gICAgdGhpcy5wYWRkaW5nQm90dG9tID0gMDtcbiAgfVxuICBhZnRlclNldERpbWVuc2lvbnMoKSB7XG4gICAgY2FsbCh0aGlzLm9wdGlvbnMuYWZ0ZXJTZXREaW1lbnNpb25zLCBbdGhpc10pO1xuICB9XG5cbiAgX2NhbGxIb29rcyhuYW1lKSB7XG4gICAgdGhpcy5jaGFydC5ub3RpZnlQbHVnaW5zKG5hbWUsIHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICBjYWxsKHRoaXMub3B0aW9uc1tuYW1lXSwgW3RoaXNdKTtcbiAgfVxuXG4gIC8vIERhdGEgbGltaXRzXG4gIGJlZm9yZURhdGFMaW1pdHMoKSB7XG4gICAgdGhpcy5fY2FsbEhvb2tzKCdiZWZvcmVEYXRhTGltaXRzJyk7XG4gIH1cbiAgZGV0ZXJtaW5lRGF0YUxpbWl0cygpIHt9XG4gIGFmdGVyRGF0YUxpbWl0cygpIHtcbiAgICB0aGlzLl9jYWxsSG9va3MoJ2FmdGVyRGF0YUxpbWl0cycpO1xuICB9XG5cbiAgLy9cbiAgYmVmb3JlQnVpbGRUaWNrcygpIHtcbiAgICB0aGlzLl9jYWxsSG9va3MoJ2JlZm9yZUJ1aWxkVGlja3MnKTtcbiAgfVxuICAvKipcblx0ICogQHJldHVybiB7b2JqZWN0W119IHRoZSB0aWNrc1xuXHQgKi9cbiAgYnVpbGRUaWNrcygpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYWZ0ZXJCdWlsZFRpY2tzKCkge1xuICAgIHRoaXMuX2NhbGxIb29rcygnYWZ0ZXJCdWlsZFRpY2tzJyk7XG4gIH1cblxuICBiZWZvcmVUaWNrVG9MYWJlbENvbnZlcnNpb24oKSB7XG4gICAgY2FsbCh0aGlzLm9wdGlvbnMuYmVmb3JlVGlja1RvTGFiZWxDb252ZXJzaW9uLCBbdGhpc10pO1xuICB9XG4gIC8qKlxuXHQgKiBDb252ZXJ0IHRpY2tzIHRvIGxhYmVsIHN0cmluZ3Ncblx0ICogQHBhcmFtIHtUaWNrW119IHRpY2tzXG5cdCAqL1xuICBnZW5lcmF0ZVRpY2tMYWJlbHModGlja3MpIHtcbiAgICBjb25zdCB0aWNrT3B0cyA9IHRoaXMub3B0aW9ucy50aWNrcztcbiAgICBsZXQgaSwgaWxlbiwgdGljaztcbiAgICBmb3IgKGkgPSAwLCBpbGVuID0gdGlja3MubGVuZ3RoOyBpIDwgaWxlbjsgaSsrKSB7XG4gICAgICB0aWNrID0gdGlja3NbaV07XG4gICAgICB0aWNrLmxhYmVsID0gY2FsbCh0aWNrT3B0cy5jYWxsYmFjaywgW3RpY2sudmFsdWUsIGksIHRpY2tzXSwgdGhpcyk7XG4gICAgfVxuICB9XG4gIGFmdGVyVGlja1RvTGFiZWxDb252ZXJzaW9uKCkge1xuICAgIGNhbGwodGhpcy5vcHRpb25zLmFmdGVyVGlja1RvTGFiZWxDb252ZXJzaW9uLCBbdGhpc10pO1xuICB9XG5cbiAgLy9cblxuICBiZWZvcmVDYWxjdWxhdGVMYWJlbFJvdGF0aW9uKCkge1xuICAgIGNhbGwodGhpcy5vcHRpb25zLmJlZm9yZUNhbGN1bGF0ZUxhYmVsUm90YXRpb24sIFt0aGlzXSk7XG4gIH1cbiAgY2FsY3VsYXRlTGFiZWxSb3RhdGlvbigpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IHRpY2tPcHRzID0gb3B0aW9ucy50aWNrcztcbiAgICBjb25zdCBudW1UaWNrcyA9IGdldFRpY2tzTGltaXQodGhpcy50aWNrcy5sZW5ndGgsIG9wdGlvbnMudGlja3MubWF4VGlja3NMaW1pdCk7XG4gICAgY29uc3QgbWluUm90YXRpb24gPSB0aWNrT3B0cy5taW5Sb3RhdGlvbiB8fCAwO1xuICAgIGNvbnN0IG1heFJvdGF0aW9uID0gdGlja09wdHMubWF4Um90YXRpb247XG4gICAgbGV0IGxhYmVsUm90YXRpb24gPSBtaW5Sb3RhdGlvbjtcbiAgICBsZXQgdGlja1dpZHRoLCBtYXhIZWlnaHQsIG1heExhYmVsRGlhZ29uYWw7XG5cbiAgICBpZiAoIXRoaXMuX2lzVmlzaWJsZSgpIHx8ICF0aWNrT3B0cy5kaXNwbGF5IHx8IG1pblJvdGF0aW9uID49IG1heFJvdGF0aW9uIHx8IG51bVRpY2tzIDw9IDEgfHwgIXRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgIHRoaXMubGFiZWxSb3RhdGlvbiA9IG1pblJvdGF0aW9uO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxhYmVsU2l6ZXMgPSB0aGlzLl9nZXRMYWJlbFNpemVzKCk7XG4gICAgY29uc3QgbWF4TGFiZWxXaWR0aCA9IGxhYmVsU2l6ZXMud2lkZXN0LndpZHRoO1xuICAgIGNvbnN0IG1heExhYmVsSGVpZ2h0ID0gbGFiZWxTaXplcy5oaWdoZXN0LmhlaWdodDtcblxuICAgIC8vIEVzdGltYXRlIHRoZSB3aWR0aCBvZiBlYWNoIGdyaWQgYmFzZWQgb24gdGhlIGNhbnZhcyB3aWR0aCwgdGhlIG1heGltdW1cbiAgICAvLyBsYWJlbCB3aWR0aCBhbmQgdGhlIG51bWJlciBvZiB0aWNrIGludGVydmFsc1xuICAgIGNvbnN0IG1heFdpZHRoID0gX2xpbWl0VmFsdWUodGhpcy5jaGFydC53aWR0aCAtIG1heExhYmVsV2lkdGgsIDAsIHRoaXMubWF4V2lkdGgpO1xuICAgIHRpY2tXaWR0aCA9IG9wdGlvbnMub2Zmc2V0ID8gdGhpcy5tYXhXaWR0aCAvIG51bVRpY2tzIDogbWF4V2lkdGggLyAobnVtVGlja3MgLSAxKTtcblxuICAgIC8vIEFsbG93IDMgcGl4ZWxzIHgyIHBhZGRpbmcgZWl0aGVyIHNpZGUgZm9yIGxhYmVsIHJlYWRhYmlsaXR5XG4gICAgaWYgKG1heExhYmVsV2lkdGggKyA2ID4gdGlja1dpZHRoKSB7XG4gICAgICB0aWNrV2lkdGggPSBtYXhXaWR0aCAvIChudW1UaWNrcyAtIChvcHRpb25zLm9mZnNldCA/IDAuNSA6IDEpKTtcbiAgICAgIG1heEhlaWdodCA9IHRoaXMubWF4SGVpZ2h0IC0gZ2V0VGlja01hcmtMZW5ndGgob3B0aW9ucy5ncmlkKVxuXHRcdFx0XHQtIHRpY2tPcHRzLnBhZGRpbmcgLSBnZXRUaXRsZUhlaWdodChvcHRpb25zLnRpdGxlLCB0aGlzLmNoYXJ0Lm9wdGlvbnMuZm9udCk7XG4gICAgICBtYXhMYWJlbERpYWdvbmFsID0gTWF0aC5zcXJ0KG1heExhYmVsV2lkdGggKiBtYXhMYWJlbFdpZHRoICsgbWF4TGFiZWxIZWlnaHQgKiBtYXhMYWJlbEhlaWdodCk7XG4gICAgICBsYWJlbFJvdGF0aW9uID0gdG9EZWdyZWVzKE1hdGgubWluKFxuICAgICAgICBNYXRoLmFzaW4oX2xpbWl0VmFsdWUoKGxhYmVsU2l6ZXMuaGlnaGVzdC5oZWlnaHQgKyA2KSAvIHRpY2tXaWR0aCwgLTEsIDEpKSxcbiAgICAgICAgTWF0aC5hc2luKF9saW1pdFZhbHVlKG1heEhlaWdodCAvIG1heExhYmVsRGlhZ29uYWwsIC0xLCAxKSkgLSBNYXRoLmFzaW4oX2xpbWl0VmFsdWUobWF4TGFiZWxIZWlnaHQgLyBtYXhMYWJlbERpYWdvbmFsLCAtMSwgMSkpXG4gICAgICApKTtcbiAgICAgIGxhYmVsUm90YXRpb24gPSBNYXRoLm1heChtaW5Sb3RhdGlvbiwgTWF0aC5taW4obWF4Um90YXRpb24sIGxhYmVsUm90YXRpb24pKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhYmVsUm90YXRpb24gPSBsYWJlbFJvdGF0aW9uO1xuICB9XG4gIGFmdGVyQ2FsY3VsYXRlTGFiZWxSb3RhdGlvbigpIHtcbiAgICBjYWxsKHRoaXMub3B0aW9ucy5hZnRlckNhbGN1bGF0ZUxhYmVsUm90YXRpb24sIFt0aGlzXSk7XG4gIH1cbiAgYWZ0ZXJBdXRvU2tpcCgpIHt9XG5cbiAgLy9cblxuICBiZWZvcmVGaXQoKSB7XG4gICAgY2FsbCh0aGlzLm9wdGlvbnMuYmVmb3JlRml0LCBbdGhpc10pO1xuICB9XG4gIGZpdCgpIHtcbiAgICAvLyBSZXNldFxuICAgIGNvbnN0IG1pblNpemUgPSB7XG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMFxuICAgIH07XG5cbiAgICBjb25zdCB7Y2hhcnQsIG9wdGlvbnM6IHt0aWNrczogdGlja09wdHMsIHRpdGxlOiB0aXRsZU9wdHMsIGdyaWQ6IGdyaWRPcHRzfX0gPSB0aGlzO1xuICAgIGNvbnN0IGRpc3BsYXkgPSB0aGlzLl9pc1Zpc2libGUoKTtcbiAgICBjb25zdCBpc0hvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuXG4gICAgaWYgKGRpc3BsYXkpIHtcbiAgICAgIGNvbnN0IHRpdGxlSGVpZ2h0ID0gZ2V0VGl0bGVIZWlnaHQodGl0bGVPcHRzLCBjaGFydC5vcHRpb25zLmZvbnQpO1xuICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICBtaW5TaXplLndpZHRoID0gdGhpcy5tYXhXaWR0aDtcbiAgICAgICAgbWluU2l6ZS5oZWlnaHQgPSBnZXRUaWNrTWFya0xlbmd0aChncmlkT3B0cykgKyB0aXRsZUhlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1pblNpemUuaGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQ7IC8vIGZpbGwgYWxsIHRoZSBoZWlnaHRcbiAgICAgICAgbWluU2l6ZS53aWR0aCA9IGdldFRpY2tNYXJrTGVuZ3RoKGdyaWRPcHRzKSArIHRpdGxlSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBib3RoZXIgZml0dGluZyB0aGUgdGlja3MgaWYgd2UgYXJlIG5vdCBzaG93aW5nIHRoZSBsYWJlbHNcbiAgICAgIGlmICh0aWNrT3B0cy5kaXNwbGF5ICYmIHRoaXMudGlja3MubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHtmaXJzdCwgbGFzdCwgd2lkZXN0LCBoaWdoZXN0fSA9IHRoaXMuX2dldExhYmVsU2l6ZXMoKTtcbiAgICAgICAgY29uc3QgdGlja1BhZGRpbmcgPSB0aWNrT3B0cy5wYWRkaW5nICogMjtcbiAgICAgICAgY29uc3QgYW5nbGVSYWRpYW5zID0gdG9SYWRpYW5zKHRoaXMubGFiZWxSb3RhdGlvbik7XG4gICAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zKGFuZ2xlUmFkaWFucyk7XG4gICAgICAgIGNvbnN0IHNpbiA9IE1hdGguc2luKGFuZ2xlUmFkaWFucyk7XG5cbiAgICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICAvLyBBIGhvcml6b250YWwgYXhpcyBpcyBtb3JlIGNvbnN0cmFpbmVkIGJ5IHRoZSBoZWlnaHQuXG4gICAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSB0aWNrT3B0cy5taXJyb3IgPyAwIDogc2luICogd2lkZXN0LndpZHRoICsgY29zICogaGlnaGVzdC5oZWlnaHQ7XG4gICAgICAgICAgbWluU2l6ZS5oZWlnaHQgPSBNYXRoLm1pbih0aGlzLm1heEhlaWdodCwgbWluU2l6ZS5oZWlnaHQgKyBsYWJlbEhlaWdodCArIHRpY2tQYWRkaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQSB2ZXJ0aWNhbCBheGlzIGlzIG1vcmUgY29uc3RyYWluZWQgYnkgdGhlIHdpZHRoLiBMYWJlbHMgYXJlIHRoZVxuICAgICAgICAvLyBkb21pbmFudCBmYWN0b3IgaGVyZSwgc28gZ2V0IHRoYXQgbGVuZ3RoIGZpcnN0IGFuZCBhY2NvdW50IGZvciBwYWRkaW5nXG4gICAgICAgICAgY29uc3QgbGFiZWxXaWR0aCA9IHRpY2tPcHRzLm1pcnJvciA/IDAgOiBjb3MgKiB3aWRlc3Qud2lkdGggKyBzaW4gKiBoaWdoZXN0LmhlaWdodDtcblxuICAgICAgICAgIG1pblNpemUud2lkdGggPSBNYXRoLm1pbih0aGlzLm1heFdpZHRoLCBtaW5TaXplLndpZHRoICsgbGFiZWxXaWR0aCArIHRpY2tQYWRkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVQYWRkaW5nKGZpcnN0LCBsYXN0LCBzaW4sIGNvcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5faGFuZGxlTWFyZ2lucygpO1xuXG4gICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgdGhpcy53aWR0aCA9IHRoaXMuX2xlbmd0aCA9IGNoYXJ0LndpZHRoIC0gdGhpcy5fbWFyZ2lucy5sZWZ0IC0gdGhpcy5fbWFyZ2lucy5yaWdodDtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gbWluU2l6ZS5oZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2lkdGggPSBtaW5TaXplLndpZHRoO1xuICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLl9sZW5ndGggPSBjaGFydC5oZWlnaHQgLSB0aGlzLl9tYXJnaW5zLnRvcCAtIHRoaXMuX21hcmdpbnMuYm90dG9tO1xuICAgIH1cbiAgfVxuXG4gIF9jYWxjdWxhdGVQYWRkaW5nKGZpcnN0LCBsYXN0LCBzaW4sIGNvcykge1xuICAgIGNvbnN0IHt0aWNrczoge2FsaWduLCBwYWRkaW5nfSwgcG9zaXRpb259ID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IGlzUm90YXRlZCA9IHRoaXMubGFiZWxSb3RhdGlvbiAhPT0gMDtcbiAgICBjb25zdCBsYWJlbHNCZWxvd1RpY2tzID0gcG9zaXRpb24gIT09ICd0b3AnICYmIHRoaXMuYXhpcyA9PT0gJ3gnO1xuXG4gICAgaWYgKHRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgIGNvbnN0IG9mZnNldExlZnQgPSB0aGlzLmdldFBpeGVsRm9yVGljaygwKSAtIHRoaXMubGVmdDtcbiAgICAgIGNvbnN0IG9mZnNldFJpZ2h0ID0gdGhpcy5yaWdodCAtIHRoaXMuZ2V0UGl4ZWxGb3JUaWNrKHRoaXMudGlja3MubGVuZ3RoIC0gMSk7XG4gICAgICBsZXQgcGFkZGluZ0xlZnQgPSAwO1xuICAgICAgbGV0IHBhZGRpbmdSaWdodCA9IDA7XG5cbiAgICAgIC8vIEVuc3VyZSB0aGF0IG91ciB0aWNrcyBhcmUgYWx3YXlzIGluc2lkZSB0aGUgY2FudmFzLiBXaGVuIHJvdGF0ZWQsIHRpY2tzIGFyZSByaWdodCBhbGlnbmVkXG4gICAgICAvLyB3aGljaCBtZWFucyB0aGF0IHRoZSByaWdodCBwYWRkaW5nIGlzIGRvbWluYXRlZCBieSB0aGUgZm9udCBoZWlnaHRcbiAgICAgIGlmIChpc1JvdGF0ZWQpIHtcbiAgICAgICAgaWYgKGxhYmVsc0JlbG93VGlja3MpIHtcbiAgICAgICAgICBwYWRkaW5nTGVmdCA9IGNvcyAqIGZpcnN0LndpZHRoO1xuICAgICAgICAgIHBhZGRpbmdSaWdodCA9IHNpbiAqIGxhc3QuaGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhZGRpbmdMZWZ0ID0gc2luICogZmlyc3QuaGVpZ2h0O1xuICAgICAgICAgIHBhZGRpbmdSaWdodCA9IGNvcyAqIGxhc3Qud2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdzdGFydCcpIHtcbiAgICAgICAgcGFkZGluZ1JpZ2h0ID0gbGFzdC53aWR0aDtcbiAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdlbmQnKSB7XG4gICAgICAgIHBhZGRpbmdMZWZ0ID0gZmlyc3Qud2lkdGg7XG4gICAgICB9IGVsc2UgaWYgKGFsaWduICE9PSAnaW5uZXInKSB7XG4gICAgICAgIHBhZGRpbmdMZWZ0ID0gZmlyc3Qud2lkdGggLyAyO1xuICAgICAgICBwYWRkaW5nUmlnaHQgPSBsYXN0LndpZHRoIC8gMjtcbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHBhZGRpbmcgdGFraW5nIGludG8gYWNjb3VudCBjaGFuZ2VzIGluIG9mZnNldHNcbiAgICAgIHRoaXMucGFkZGluZ0xlZnQgPSBNYXRoLm1heCgocGFkZGluZ0xlZnQgLSBvZmZzZXRMZWZ0ICsgcGFkZGluZykgKiB0aGlzLndpZHRoIC8gKHRoaXMud2lkdGggLSBvZmZzZXRMZWZ0KSwgMCk7XG4gICAgICB0aGlzLnBhZGRpbmdSaWdodCA9IE1hdGgubWF4KChwYWRkaW5nUmlnaHQgLSBvZmZzZXRSaWdodCArIHBhZGRpbmcpICogdGhpcy53aWR0aCAvICh0aGlzLndpZHRoIC0gb2Zmc2V0UmlnaHQpLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBhZGRpbmdUb3AgPSBsYXN0LmhlaWdodCAvIDI7XG4gICAgICBsZXQgcGFkZGluZ0JvdHRvbSA9IGZpcnN0LmhlaWdodCAvIDI7XG5cbiAgICAgIGlmIChhbGlnbiA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICBwYWRkaW5nVG9wID0gMDtcbiAgICAgICAgcGFkZGluZ0JvdHRvbSA9IGZpcnN0LmhlaWdodDtcbiAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdlbmQnKSB7XG4gICAgICAgIHBhZGRpbmdUb3AgPSBsYXN0LmhlaWdodDtcbiAgICAgICAgcGFkZGluZ0JvdHRvbSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucGFkZGluZ1RvcCA9IHBhZGRpbmdUb3AgKyBwYWRkaW5nO1xuICAgICAgdGhpcy5wYWRkaW5nQm90dG9tID0gcGFkZGluZ0JvdHRvbSArIHBhZGRpbmc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEhhbmRsZSBtYXJnaW5zIGFuZCBwYWRkaW5nIGludGVyYWN0aW9uc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2hhbmRsZU1hcmdpbnMoKSB7XG4gICAgaWYgKHRoaXMuX21hcmdpbnMpIHtcbiAgICAgIHRoaXMuX21hcmdpbnMubGVmdCA9IE1hdGgubWF4KHRoaXMucGFkZGluZ0xlZnQsIHRoaXMuX21hcmdpbnMubGVmdCk7XG4gICAgICB0aGlzLl9tYXJnaW5zLnRvcCA9IE1hdGgubWF4KHRoaXMucGFkZGluZ1RvcCwgdGhpcy5fbWFyZ2lucy50b3ApO1xuICAgICAgdGhpcy5fbWFyZ2lucy5yaWdodCA9IE1hdGgubWF4KHRoaXMucGFkZGluZ1JpZ2h0LCB0aGlzLl9tYXJnaW5zLnJpZ2h0KTtcbiAgICAgIHRoaXMuX21hcmdpbnMuYm90dG9tID0gTWF0aC5tYXgodGhpcy5wYWRkaW5nQm90dG9tLCB0aGlzLl9tYXJnaW5zLmJvdHRvbSk7XG4gICAgfVxuICB9XG5cbiAgYWZ0ZXJGaXQoKSB7XG4gICAgY2FsbCh0aGlzLm9wdGlvbnMuYWZ0ZXJGaXQsIFt0aGlzXSk7XG4gIH1cblxuICAvLyBTaGFyZWQgTWV0aG9kc1xuICAvKipcblx0ICogQHJldHVybiB7Ym9vbGVhbn1cblx0ICovXG4gIGlzSG9yaXpvbnRhbCgpIHtcbiAgICBjb25zdCB7YXhpcywgcG9zaXRpb259ID0gdGhpcy5vcHRpb25zO1xuICAgIHJldHVybiBwb3NpdGlvbiA9PT0gJ3RvcCcgfHwgcG9zaXRpb24gPT09ICdib3R0b20nIHx8IGF4aXMgPT09ICd4JztcbiAgfVxuICAvKipcblx0ICogQHJldHVybiB7Ym9vbGVhbn1cblx0ICovXG4gIGlzRnVsbFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5mdWxsU2l6ZTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge1RpY2tbXX0gdGlja3Ncblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9jb252ZXJ0VGlja3NUb0xhYmVscyh0aWNrcykge1xuICAgIHRoaXMuYmVmb3JlVGlja1RvTGFiZWxDb252ZXJzaW9uKCk7XG5cbiAgICB0aGlzLmdlbmVyYXRlVGlja0xhYmVscyh0aWNrcyk7XG5cbiAgICAvLyBUaWNrcyBzaG91bGQgYmUgc2tpcHBlZCB3aGVuIGNhbGxiYWNrIHJldHVybnMgbnVsbCBvciB1bmRlZiwgc28gbGV0cyByZW1vdmUgdGhvc2UuXG4gICAgbGV0IGksIGlsZW47XG4gICAgZm9yIChpID0gMCwgaWxlbiA9IHRpY2tzLmxlbmd0aDsgaSA8IGlsZW47IGkrKykge1xuICAgICAgaWYgKGlzTnVsbE9yVW5kZWYodGlja3NbaV0ubGFiZWwpKSB7XG4gICAgICAgIHRpY2tzLnNwbGljZShpLCAxKTtcbiAgICAgICAgaWxlbi0tO1xuICAgICAgICBpLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hZnRlclRpY2tUb0xhYmVsQ29udmVyc2lvbigpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEByZXR1cm4ge3sgZmlyc3Q6IG9iamVjdCwgbGFzdDogb2JqZWN0LCB3aWRlc3Q6IG9iamVjdCwgaGlnaGVzdDogb2JqZWN0LCB3aWR0aHM6IEFycmF5LCBoZWlnaHRzOiBhcnJheSB9fVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2dldExhYmVsU2l6ZXMoKSB7XG4gICAgbGV0IGxhYmVsU2l6ZXMgPSB0aGlzLl9sYWJlbFNpemVzO1xuXG4gICAgaWYgKCFsYWJlbFNpemVzKSB7XG4gICAgICBjb25zdCBzYW1wbGVTaXplID0gdGhpcy5vcHRpb25zLnRpY2tzLnNhbXBsZVNpemU7XG4gICAgICBsZXQgdGlja3MgPSB0aGlzLnRpY2tzO1xuICAgICAgaWYgKHNhbXBsZVNpemUgPCB0aWNrcy5sZW5ndGgpIHtcbiAgICAgICAgdGlja3MgPSBzYW1wbGUodGlja3MsIHNhbXBsZVNpemUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9sYWJlbFNpemVzID0gbGFiZWxTaXplcyA9IHRoaXMuX2NvbXB1dGVMYWJlbFNpemVzKHRpY2tzLCB0aWNrcy5sZW5ndGgsIHRoaXMub3B0aW9ucy50aWNrcy5tYXhUaWNrc0xpbWl0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGFiZWxTaXplcztcbiAgfVxuXG4gIC8qKlxuXHQgKiBSZXR1cm5zIHt3aWR0aCwgaGVpZ2h0LCBvZmZzZXR9IG9iamVjdHMgZm9yIHRoZSBmaXJzdCwgbGFzdCwgd2lkZXN0LCBoaWdoZXN0IHRpY2tcblx0ICogbGFiZWxzIHdoZXJlIG9mZnNldCBpbmRpY2F0ZXMgdGhlIGFuY2hvciBwb2ludCBvZmZzZXQgZnJvbSB0aGUgdG9wIGluIHBpeGVscy5cblx0ICogQHJldHVybiB7eyBmaXJzdDogb2JqZWN0LCBsYXN0OiBvYmplY3QsIHdpZGVzdDogb2JqZWN0LCBoaWdoZXN0OiBvYmplY3QsIHdpZHRoczogQXJyYXksIGhlaWdodHM6IGFycmF5IH19XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfY29tcHV0ZUxhYmVsU2l6ZXModGlja3MsIGxlbmd0aCwgbWF4VGlja3NMaW1pdCkge1xuICAgIGNvbnN0IHtjdHgsIF9sb25nZXN0VGV4dENhY2hlOiBjYWNoZXN9ID0gdGhpcztcbiAgICBjb25zdCB3aWR0aHMgPSBbXTtcbiAgICBjb25zdCBoZWlnaHRzID0gW107XG4gICAgY29uc3QgaW5jcmVtZW50ID0gTWF0aC5mbG9vcihsZW5ndGggLyBnZXRUaWNrc0xpbWl0KGxlbmd0aCwgbWF4VGlja3NMaW1pdCkpO1xuICAgIGxldCB3aWRlc3RMYWJlbFNpemUgPSAwO1xuICAgIGxldCBoaWdoZXN0TGFiZWxTaXplID0gMDtcbiAgICBsZXQgaSwgaiwgamxlbiwgbGFiZWwsIHRpY2tGb250LCBmb250U3RyaW5nLCBjYWNoZSwgbGluZUhlaWdodCwgd2lkdGgsIGhlaWdodCwgbmVzdGVkTGFiZWw7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGluY3JlbWVudCkge1xuICAgICAgbGFiZWwgPSB0aWNrc1tpXS5sYWJlbDtcbiAgICAgIHRpY2tGb250ID0gdGhpcy5fcmVzb2x2ZVRpY2tGb250T3B0aW9ucyhpKTtcbiAgICAgIGN0eC5mb250ID0gZm9udFN0cmluZyA9IHRpY2tGb250LnN0cmluZztcbiAgICAgIGNhY2hlID0gY2FjaGVzW2ZvbnRTdHJpbmddID0gY2FjaGVzW2ZvbnRTdHJpbmddIHx8IHtkYXRhOiB7fSwgZ2M6IFtdfTtcbiAgICAgIGxpbmVIZWlnaHQgPSB0aWNrRm9udC5saW5lSGVpZ2h0O1xuICAgICAgd2lkdGggPSBoZWlnaHQgPSAwO1xuICAgICAgLy8gVW5kZWZpbmVkIGxhYmVscyBhbmQgYXJyYXlzIHNob3VsZCBub3QgYmUgbWVhc3VyZWRcbiAgICAgIGlmICghaXNOdWxsT3JVbmRlZihsYWJlbCkgJiYgIWlzQXJyYXkobGFiZWwpKSB7XG4gICAgICAgIHdpZHRoID0gX21lYXN1cmVUZXh0KGN0eCwgY2FjaGUuZGF0YSwgY2FjaGUuZ2MsIHdpZHRoLCBsYWJlbCk7XG4gICAgICAgIGhlaWdodCA9IGxpbmVIZWlnaHQ7XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkobGFiZWwpKSB7XG4gICAgICAgIC8vIGlmIGl0IGlzIGFuIGFycmF5IGxldCdzIG1lYXN1cmUgZWFjaCBlbGVtZW50XG4gICAgICAgIGZvciAoaiA9IDAsIGpsZW4gPSBsYWJlbC5sZW5ndGg7IGogPCBqbGVuOyArK2opIHtcbiAgICAgICAgICBuZXN0ZWRMYWJlbCA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAobGFiZWxbal0pO1xuICAgICAgICAgIC8vIFVuZGVmaW5lZCBsYWJlbHMgYW5kIGFycmF5cyBzaG91bGQgbm90IGJlIG1lYXN1cmVkXG4gICAgICAgICAgaWYgKCFpc051bGxPclVuZGVmKG5lc3RlZExhYmVsKSAmJiAhaXNBcnJheShuZXN0ZWRMYWJlbCkpIHtcbiAgICAgICAgICAgIHdpZHRoID0gX21lYXN1cmVUZXh0KGN0eCwgY2FjaGUuZGF0YSwgY2FjaGUuZ2MsIHdpZHRoLCBuZXN0ZWRMYWJlbCk7XG4gICAgICAgICAgICBoZWlnaHQgKz0gbGluZUhlaWdodDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdpZHRocy5wdXNoKHdpZHRoKTtcbiAgICAgIGhlaWdodHMucHVzaChoZWlnaHQpO1xuICAgICAgd2lkZXN0TGFiZWxTaXplID0gTWF0aC5tYXgod2lkdGgsIHdpZGVzdExhYmVsU2l6ZSk7XG4gICAgICBoaWdoZXN0TGFiZWxTaXplID0gTWF0aC5tYXgoaGVpZ2h0LCBoaWdoZXN0TGFiZWxTaXplKTtcbiAgICB9XG4gICAgZ2FyYmFnZUNvbGxlY3QoY2FjaGVzLCBsZW5ndGgpO1xuXG4gICAgY29uc3Qgd2lkZXN0ID0gd2lkdGhzLmluZGV4T2Yod2lkZXN0TGFiZWxTaXplKTtcbiAgICBjb25zdCBoaWdoZXN0ID0gaGVpZ2h0cy5pbmRleE9mKGhpZ2hlc3RMYWJlbFNpemUpO1xuXG4gICAgY29uc3QgdmFsdWVBdCA9IChpZHgpID0+ICh7d2lkdGg6IHdpZHRoc1tpZHhdIHx8IDAsIGhlaWdodDogaGVpZ2h0c1tpZHhdIHx8IDB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBmaXJzdDogdmFsdWVBdCgwKSxcbiAgICAgIGxhc3Q6IHZhbHVlQXQobGVuZ3RoIC0gMSksXG4gICAgICB3aWRlc3Q6IHZhbHVlQXQod2lkZXN0KSxcbiAgICAgIGhpZ2hlc3Q6IHZhbHVlQXQoaGlnaGVzdCksXG4gICAgICB3aWR0aHMsXG4gICAgICBoZWlnaHRzLFxuICAgIH07XG4gIH1cblxuICAvKipcblx0ICogVXNlZCB0byBnZXQgdGhlIGxhYmVsIHRvIGRpc3BsYXkgaW4gdGhlIHRvb2x0aXAgZm9yIHRoZSBnaXZlbiB2YWx1ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG4gIGdldExhYmVsRm9yVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcblx0ICogUmV0dXJucyB0aGUgbG9jYXRpb24gb2YgdGhlIGdpdmVuIGRhdGEgcG9pbnQuIFZhbHVlIGNhbiBlaXRoZXIgYmUgYW4gaW5kZXggb3IgYSBudW1lcmljYWwgdmFsdWVcblx0ICogVGhlIGNvb3JkaW5hdGUgKDAsIDApIGlzIGF0IHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgY2FudmFzXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtudW1iZXJ9IFtpbmRleF1cblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cbiAgZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSwgaW5kZXgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICAvKipcblx0ICogVXNlZCB0byBnZXQgdGhlIGRhdGEgdmFsdWUgZnJvbSBhIGdpdmVuIHBpeGVsLiBUaGlzIGlzIHRoZSBpbnZlcnNlIG9mIGdldFBpeGVsRm9yVmFsdWVcblx0ICogVGhlIGNvb3JkaW5hdGUgKDAsIDApIGlzIGF0IHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgY2FudmFzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFxuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cbiAgZ2V0VmFsdWVGb3JQaXhlbChwaXhlbCkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gIC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBsb2NhdGlvbiBvZiB0aGUgdGljayBhdCB0aGUgZ2l2ZW4gaW5kZXhcblx0ICogVGhlIGNvb3JkaW5hdGUgKDAsIDApIGlzIGF0IHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgY2FudmFzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqL1xuICBnZXRQaXhlbEZvclRpY2soaW5kZXgpIHtcbiAgICBjb25zdCB0aWNrcyA9IHRoaXMudGlja3M7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+IHRpY2tzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRQaXhlbEZvclZhbHVlKHRpY2tzW2luZGV4XS52YWx1ZSk7XG4gIH1cblxuICAvKipcblx0ICogVXRpbGl0eSBmb3IgZ2V0dGluZyB0aGUgcGl4ZWwgbG9jYXRpb24gb2YgYSBwZXJjZW50YWdlIG9mIHNjYWxlXG5cdCAqIFRoZSBjb29yZGluYXRlICgwLCAwKSBpcyBhdCB0aGUgdXBwZXItbGVmdCBjb3JuZXIgb2YgdGhlIGNhbnZhc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbFxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqL1xuICBnZXRQaXhlbEZvckRlY2ltYWwoZGVjaW1hbCkge1xuICAgIGlmICh0aGlzLl9yZXZlcnNlUGl4ZWxzKSB7XG4gICAgICBkZWNpbWFsID0gMSAtIGRlY2ltYWw7XG4gICAgfVxuXG4gICAgY29uc3QgcGl4ZWwgPSB0aGlzLl9zdGFydFBpeGVsICsgZGVjaW1hbCAqIHRoaXMuX2xlbmd0aDtcbiAgICByZXR1cm4gX2ludDE2UmFuZ2UodGhpcy5fYWxpZ25Ub1BpeGVscyA/IF9hbGlnblBpeGVsKHRoaXMuY2hhcnQsIHBpeGVsLCAwKSA6IHBpeGVsKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxcblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cbiAgZ2V0RGVjaW1hbEZvclBpeGVsKHBpeGVsKSB7XG4gICAgY29uc3QgZGVjaW1hbCA9IChwaXhlbCAtIHRoaXMuX3N0YXJ0UGl4ZWwpIC8gdGhpcy5fbGVuZ3RoO1xuICAgIHJldHVybiB0aGlzLl9yZXZlcnNlUGl4ZWxzID8gMSAtIGRlY2ltYWwgOiBkZWNpbWFsO1xuICB9XG5cbiAgLyoqXG5cdCAqIFJldHVybnMgdGhlIHBpeGVsIGZvciB0aGUgbWluaW11bSBjaGFydCB2YWx1ZVxuXHQgKiBUaGUgY29vcmRpbmF0ZSAoMCwgMCkgaXMgYXQgdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSBjYW52YXNcblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cbiAgZ2V0QmFzZVBpeGVsKCkge1xuICAgIHJldHVybiB0aGlzLmdldFBpeGVsRm9yVmFsdWUodGhpcy5nZXRCYXNlVmFsdWUoKSk7XG4gIH1cblxuICAvKipcblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cbiAgZ2V0QmFzZVZhbHVlKCkge1xuICAgIGNvbnN0IHttaW4sIG1heH0gPSB0aGlzO1xuXG4gICAgcmV0dXJuIG1pbiA8IDAgJiYgbWF4IDwgMCA/IG1heCA6XG4gICAgICBtaW4gPiAwICYmIG1heCA+IDAgPyBtaW4gOlxuICAgICAgMDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRDb250ZXh0KGluZGV4KSB7XG4gICAgY29uc3QgdGlja3MgPSB0aGlzLnRpY2tzIHx8IFtdO1xuXG4gICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aWNrcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHRpY2sgPSB0aWNrc1tpbmRleF07XG4gICAgICByZXR1cm4gdGljay4kY29udGV4dCB8fFxuXHRcdFx0XHQodGljay4kY29udGV4dCA9IGNyZWF0ZVRpY2tDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpLCBpbmRleCwgdGljaykpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4kY29udGV4dCB8fFxuXHRcdFx0KHRoaXMuJGNvbnRleHQgPSBjcmVhdGVTY2FsZUNvbnRleHQodGhpcy5jaGFydC5nZXRDb250ZXh0KCksIHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfdGlja1NpemUoKSB7XG4gICAgY29uc3Qgb3B0aW9uVGlja3MgPSB0aGlzLm9wdGlvbnMudGlja3M7XG5cbiAgICAvLyBDYWxjdWxhdGUgc3BhY2UgbmVlZGVkIGJ5IGxhYmVsIGluIGF4aXMgZGlyZWN0aW9uLlxuICAgIGNvbnN0IHJvdCA9IHRvUmFkaWFucyh0aGlzLmxhYmVsUm90YXRpb24pO1xuICAgIGNvbnN0IGNvcyA9IE1hdGguYWJzKE1hdGguY29zKHJvdCkpO1xuICAgIGNvbnN0IHNpbiA9IE1hdGguYWJzKE1hdGguc2luKHJvdCkpO1xuXG4gICAgY29uc3QgbGFiZWxTaXplcyA9IHRoaXMuX2dldExhYmVsU2l6ZXMoKTtcbiAgICBjb25zdCBwYWRkaW5nID0gb3B0aW9uVGlja3MuYXV0b1NraXBQYWRkaW5nIHx8IDA7XG4gICAgY29uc3QgdyA9IGxhYmVsU2l6ZXMgPyBsYWJlbFNpemVzLndpZGVzdC53aWR0aCArIHBhZGRpbmcgOiAwO1xuICAgIGNvbnN0IGggPSBsYWJlbFNpemVzID8gbGFiZWxTaXplcy5oaWdoZXN0LmhlaWdodCArIHBhZGRpbmcgOiAwO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHNwYWNlIG5lZWRlZCBmb3IgMSB0aWNrIGluIGF4aXMgZGlyZWN0aW9uLlxuICAgIHJldHVybiB0aGlzLmlzSG9yaXpvbnRhbCgpXG4gICAgICA/IGggKiBjb3MgPiB3ICogc2luID8gdyAvIGNvcyA6IGggLyBzaW5cbiAgICAgIDogaCAqIHNpbiA8IHcgKiBjb3MgPyBoIC8gY29zIDogdyAvIHNpbjtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcmV0dXJuIHtib29sZWFufVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2lzVmlzaWJsZSgpIHtcbiAgICBjb25zdCBkaXNwbGF5ID0gdGhpcy5vcHRpb25zLmRpc3BsYXk7XG5cbiAgICBpZiAoZGlzcGxheSAhPT0gJ2F1dG8nKSB7XG4gICAgICByZXR1cm4gISFkaXNwbGF5O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKCkubGVuZ3RoID4gMDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2NvbXB1dGVHcmlkTGluZUl0ZW1zKGNoYXJ0QXJlYSkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLmF4aXM7XG4gICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3Qge2dyaWQsIHBvc2l0aW9uLCBib3JkZXJ9ID0gb3B0aW9ucztcbiAgICBjb25zdCBvZmZzZXQgPSBncmlkLm9mZnNldDtcbiAgICBjb25zdCBpc0hvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuICAgIGNvbnN0IHRpY2tzID0gdGhpcy50aWNrcztcbiAgICBjb25zdCB0aWNrc0xlbmd0aCA9IHRpY2tzLmxlbmd0aCArIChvZmZzZXQgPyAxIDogMCk7XG4gICAgY29uc3QgdGwgPSBnZXRUaWNrTWFya0xlbmd0aChncmlkKTtcbiAgICBjb25zdCBpdGVtcyA9IFtdO1xuXG4gICAgY29uc3QgYm9yZGVyT3B0cyA9IGJvcmRlci5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICBjb25zdCBheGlzV2lkdGggPSBib3JkZXJPcHRzLmRpc3BsYXkgPyBib3JkZXJPcHRzLndpZHRoIDogMDtcbiAgICBjb25zdCBheGlzSGFsZldpZHRoID0gYXhpc1dpZHRoIC8gMjtcbiAgICBjb25zdCBhbGlnbkJvcmRlclZhbHVlID0gZnVuY3Rpb24ocGl4ZWwpIHtcbiAgICAgIHJldHVybiBfYWxpZ25QaXhlbChjaGFydCwgcGl4ZWwsIGF4aXNXaWR0aCk7XG4gICAgfTtcbiAgICBsZXQgYm9yZGVyVmFsdWUsIGksIGxpbmVWYWx1ZSwgYWxpZ25lZExpbmVWYWx1ZTtcbiAgICBsZXQgdHgxLCB0eTEsIHR4MiwgdHkyLCB4MSwgeTEsIHgyLCB5MjtcblxuICAgIGlmIChwb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgIGJvcmRlclZhbHVlID0gYWxpZ25Cb3JkZXJWYWx1ZSh0aGlzLmJvdHRvbSk7XG4gICAgICB0eTEgPSB0aGlzLmJvdHRvbSAtIHRsO1xuICAgICAgdHkyID0gYm9yZGVyVmFsdWUgLSBheGlzSGFsZldpZHRoO1xuICAgICAgeTEgPSBhbGlnbkJvcmRlclZhbHVlKGNoYXJ0QXJlYS50b3ApICsgYXhpc0hhbGZXaWR0aDtcbiAgICAgIHkyID0gY2hhcnRBcmVhLmJvdHRvbTtcbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKHRoaXMudG9wKTtcbiAgICAgIHkxID0gY2hhcnRBcmVhLnRvcDtcbiAgICAgIHkyID0gYWxpZ25Cb3JkZXJWYWx1ZShjaGFydEFyZWEuYm90dG9tKSAtIGF4aXNIYWxmV2lkdGg7XG4gICAgICB0eTEgPSBib3JkZXJWYWx1ZSArIGF4aXNIYWxmV2lkdGg7XG4gICAgICB0eTIgPSB0aGlzLnRvcCArIHRsO1xuICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKHRoaXMucmlnaHQpO1xuICAgICAgdHgxID0gdGhpcy5yaWdodCAtIHRsO1xuICAgICAgdHgyID0gYm9yZGVyVmFsdWUgLSBheGlzSGFsZldpZHRoO1xuICAgICAgeDEgPSBhbGlnbkJvcmRlclZhbHVlKGNoYXJ0QXJlYS5sZWZ0KSArIGF4aXNIYWxmV2lkdGg7XG4gICAgICB4MiA9IGNoYXJ0QXJlYS5yaWdodDtcbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICBib3JkZXJWYWx1ZSA9IGFsaWduQm9yZGVyVmFsdWUodGhpcy5sZWZ0KTtcbiAgICAgIHgxID0gY2hhcnRBcmVhLmxlZnQ7XG4gICAgICB4MiA9IGFsaWduQm9yZGVyVmFsdWUoY2hhcnRBcmVhLnJpZ2h0KSAtIGF4aXNIYWxmV2lkdGg7XG4gICAgICB0eDEgPSBib3JkZXJWYWx1ZSArIGF4aXNIYWxmV2lkdGg7XG4gICAgICB0eDIgPSB0aGlzLmxlZnQgKyB0bDtcbiAgICB9IGVsc2UgaWYgKGF4aXMgPT09ICd4Jykge1xuICAgICAgaWYgKHBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgICAgICBib3JkZXJWYWx1ZSA9IGFsaWduQm9yZGVyVmFsdWUoKGNoYXJ0QXJlYS50b3AgKyBjaGFydEFyZWEuYm90dG9tKSAvIDIgKyAwLjUpO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChwb3NpdGlvbikpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb25BeGlzSUQgPSBPYmplY3Qua2V5cyhwb3NpdGlvbilbMF07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcG9zaXRpb25bcG9zaXRpb25BeGlzSURdO1xuICAgICAgICBib3JkZXJWYWx1ZSA9IGFsaWduQm9yZGVyVmFsdWUodGhpcy5jaGFydC5zY2FsZXNbcG9zaXRpb25BeGlzSURdLmdldFBpeGVsRm9yVmFsdWUodmFsdWUpKTtcbiAgICAgIH1cblxuICAgICAgeTEgPSBjaGFydEFyZWEudG9wO1xuICAgICAgeTIgPSBjaGFydEFyZWEuYm90dG9tO1xuICAgICAgdHkxID0gYm9yZGVyVmFsdWUgKyBheGlzSGFsZldpZHRoO1xuICAgICAgdHkyID0gdHkxICsgdGw7XG4gICAgfSBlbHNlIGlmIChheGlzID09PSAneScpIHtcbiAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKChjaGFydEFyZWEubGVmdCArIGNoYXJ0QXJlYS5yaWdodCkgLyAyKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QocG9zaXRpb24pKSB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQXhpc0lEID0gT2JqZWN0LmtleXMocG9zaXRpb24pWzBdO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHBvc2l0aW9uW3Bvc2l0aW9uQXhpc0lEXTtcbiAgICAgICAgYm9yZGVyVmFsdWUgPSBhbGlnbkJvcmRlclZhbHVlKHRoaXMuY2hhcnQuc2NhbGVzW3Bvc2l0aW9uQXhpc0lEXS5nZXRQaXhlbEZvclZhbHVlKHZhbHVlKSk7XG4gICAgICB9XG5cbiAgICAgIHR4MSA9IGJvcmRlclZhbHVlIC0gYXhpc0hhbGZXaWR0aDtcbiAgICAgIHR4MiA9IHR4MSAtIHRsO1xuICAgICAgeDEgPSBjaGFydEFyZWEubGVmdDtcbiAgICAgIHgyID0gY2hhcnRBcmVhLnJpZ2h0O1xuICAgIH1cblxuICAgIGNvbnN0IGxpbWl0ID0gdmFsdWVPckRlZmF1bHQob3B0aW9ucy50aWNrcy5tYXhUaWNrc0xpbWl0LCB0aWNrc0xlbmd0aCk7XG4gICAgY29uc3Qgc3RlcCA9IE1hdGgubWF4KDEsIE1hdGguY2VpbCh0aWNrc0xlbmd0aCAvIGxpbWl0KSk7XG4gICAgZm9yIChpID0gMDsgaSA8IHRpY2tzTGVuZ3RoOyBpICs9IHN0ZXApIHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoaSk7XG4gICAgICBjb25zdCBvcHRzQXRJbmRleCA9IGdyaWQuc2V0Q29udGV4dChjb250ZXh0KTtcbiAgICAgIGNvbnN0IG9wdHNBdEluZGV4Qm9yZGVyID0gYm9yZGVyLnNldENvbnRleHQoY29udGV4dCk7XG5cbiAgICAgIGNvbnN0IGxpbmVXaWR0aCA9IG9wdHNBdEluZGV4LmxpbmVXaWR0aDtcbiAgICAgIGNvbnN0IGxpbmVDb2xvciA9IG9wdHNBdEluZGV4LmNvbG9yO1xuICAgICAgY29uc3QgYm9yZGVyRGFzaCA9IG9wdHNBdEluZGV4Qm9yZGVyLmRhc2ggfHwgW107XG4gICAgICBjb25zdCBib3JkZXJEYXNoT2Zmc2V0ID0gb3B0c0F0SW5kZXhCb3JkZXIuZGFzaE9mZnNldDtcblxuICAgICAgY29uc3QgdGlja1dpZHRoID0gb3B0c0F0SW5kZXgudGlja1dpZHRoO1xuICAgICAgY29uc3QgdGlja0NvbG9yID0gb3B0c0F0SW5kZXgudGlja0NvbG9yO1xuICAgICAgY29uc3QgdGlja0JvcmRlckRhc2ggPSBvcHRzQXRJbmRleC50aWNrQm9yZGVyRGFzaCB8fCBbXTtcbiAgICAgIGNvbnN0IHRpY2tCb3JkZXJEYXNoT2Zmc2V0ID0gb3B0c0F0SW5kZXgudGlja0JvcmRlckRhc2hPZmZzZXQ7XG5cbiAgICAgIGxpbmVWYWx1ZSA9IGdldFBpeGVsRm9yR3JpZExpbmUodGhpcywgaSwgb2Zmc2V0KTtcblxuICAgICAgLy8gU2tpcCBpZiB0aGUgcGl4ZWwgaXMgb3V0IG9mIHRoZSByYW5nZVxuICAgICAgaWYgKGxpbmVWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBhbGlnbmVkTGluZVZhbHVlID0gX2FsaWduUGl4ZWwoY2hhcnQsIGxpbmVWYWx1ZSwgbGluZVdpZHRoKTtcblxuICAgICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICB0eDEgPSB0eDIgPSB4MSA9IHgyID0gYWxpZ25lZExpbmVWYWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHR5MSA9IHR5MiA9IHkxID0geTIgPSBhbGlnbmVkTGluZVZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgdHgxLFxuICAgICAgICB0eTEsXG4gICAgICAgIHR4MixcbiAgICAgICAgdHkyLFxuICAgICAgICB4MSxcbiAgICAgICAgeTEsXG4gICAgICAgIHgyLFxuICAgICAgICB5MixcbiAgICAgICAgd2lkdGg6IGxpbmVXaWR0aCxcbiAgICAgICAgY29sb3I6IGxpbmVDb2xvcixcbiAgICAgICAgYm9yZGVyRGFzaCxcbiAgICAgICAgYm9yZGVyRGFzaE9mZnNldCxcbiAgICAgICAgdGlja1dpZHRoLFxuICAgICAgICB0aWNrQ29sb3IsXG4gICAgICAgIHRpY2tCb3JkZXJEYXNoLFxuICAgICAgICB0aWNrQm9yZGVyRGFzaE9mZnNldCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX3RpY2tzTGVuZ3RoID0gdGlja3NMZW5ndGg7XG4gICAgdGhpcy5fYm9yZGVyVmFsdWUgPSBib3JkZXJWYWx1ZTtcblxuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2NvbXB1dGVMYWJlbEl0ZW1zKGNoYXJ0QXJlYSkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLmF4aXM7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCB7cG9zaXRpb24sIHRpY2tzOiBvcHRpb25UaWNrc30gPSBvcHRpb25zO1xuICAgIGNvbnN0IGlzSG9yaXpvbnRhbCA9IHRoaXMuaXNIb3Jpem9udGFsKCk7XG4gICAgY29uc3QgdGlja3MgPSB0aGlzLnRpY2tzO1xuICAgIGNvbnN0IHthbGlnbiwgY3Jvc3NBbGlnbiwgcGFkZGluZywgbWlycm9yfSA9IG9wdGlvblRpY2tzO1xuICAgIGNvbnN0IHRsID0gZ2V0VGlja01hcmtMZW5ndGgob3B0aW9ucy5ncmlkKTtcbiAgICBjb25zdCB0aWNrQW5kUGFkZGluZyA9IHRsICsgcGFkZGluZztcbiAgICBjb25zdCBoVGlja0FuZFBhZGRpbmcgPSBtaXJyb3IgPyAtcGFkZGluZyA6IHRpY2tBbmRQYWRkaW5nO1xuICAgIGNvbnN0IHJvdGF0aW9uID0gLXRvUmFkaWFucyh0aGlzLmxhYmVsUm90YXRpb24pO1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgbGV0IGksIGlsZW4sIHRpY2ssIGxhYmVsLCB4LCB5LCB0ZXh0QWxpZ24sIHBpeGVsLCBmb250LCBsaW5lSGVpZ2h0LCBsaW5lQ291bnQsIHRleHRPZmZzZXQ7XG4gICAgbGV0IHRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuXG4gICAgaWYgKHBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgeSA9IHRoaXMuYm90dG9tIC0gaFRpY2tBbmRQYWRkaW5nO1xuICAgICAgdGV4dEFsaWduID0gdGhpcy5fZ2V0WEF4aXNMYWJlbEFsaWdubWVudCgpO1xuICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdib3R0b20nKSB7XG4gICAgICB5ID0gdGhpcy50b3AgKyBoVGlja0FuZFBhZGRpbmc7XG4gICAgICB0ZXh0QWxpZ24gPSB0aGlzLl9nZXRYQXhpc0xhYmVsQWxpZ25tZW50KCk7XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICBjb25zdCByZXQgPSB0aGlzLl9nZXRZQXhpc0xhYmVsQWxpZ25tZW50KHRsKTtcbiAgICAgIHRleHRBbGlnbiA9IHJldC50ZXh0QWxpZ247XG4gICAgICB4ID0gcmV0Lng7XG4gICAgfSBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgY29uc3QgcmV0ID0gdGhpcy5fZ2V0WUF4aXNMYWJlbEFsaWdubWVudCh0bCk7XG4gICAgICB0ZXh0QWxpZ24gPSByZXQudGV4dEFsaWduO1xuICAgICAgeCA9IHJldC54O1xuICAgIH0gZWxzZSBpZiAoYXhpcyA9PT0gJ3gnKSB7XG4gICAgICBpZiAocG9zaXRpb24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgIHkgPSAoKGNoYXJ0QXJlYS50b3AgKyBjaGFydEFyZWEuYm90dG9tKSAvIDIpICsgdGlja0FuZFBhZGRpbmc7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHBvc2l0aW9uKSkge1xuICAgICAgICBjb25zdCBwb3NpdGlvbkF4aXNJRCA9IE9iamVjdC5rZXlzKHBvc2l0aW9uKVswXTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwb3NpdGlvbltwb3NpdGlvbkF4aXNJRF07XG4gICAgICAgIHkgPSB0aGlzLmNoYXJ0LnNjYWxlc1twb3NpdGlvbkF4aXNJRF0uZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkgKyB0aWNrQW5kUGFkZGluZztcbiAgICAgIH1cbiAgICAgIHRleHRBbGlnbiA9IHRoaXMuX2dldFhBeGlzTGFiZWxBbGlnbm1lbnQoKTtcbiAgICB9IGVsc2UgaWYgKGF4aXMgPT09ICd5Jykge1xuICAgICAgaWYgKHBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgICAgICB4ID0gKChjaGFydEFyZWEubGVmdCArIGNoYXJ0QXJlYS5yaWdodCkgLyAyKSAtIHRpY2tBbmRQYWRkaW5nO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChwb3NpdGlvbikpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb25BeGlzSUQgPSBPYmplY3Qua2V5cyhwb3NpdGlvbilbMF07XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcG9zaXRpb25bcG9zaXRpb25BeGlzSURdO1xuICAgICAgICB4ID0gdGhpcy5jaGFydC5zY2FsZXNbcG9zaXRpb25BeGlzSURdLmdldFBpeGVsRm9yVmFsdWUodmFsdWUpO1xuICAgICAgfVxuICAgICAgdGV4dEFsaWduID0gdGhpcy5fZ2V0WUF4aXNMYWJlbEFsaWdubWVudCh0bCkudGV4dEFsaWduO1xuICAgIH1cblxuICAgIGlmIChheGlzID09PSAneScpIHtcbiAgICAgIGlmIChhbGlnbiA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICB0ZXh0QmFzZWxpbmUgPSAndG9wJztcbiAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICdlbmQnKSB7XG4gICAgICAgIHRleHRCYXNlbGluZSA9ICdib3R0b20nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxhYmVsU2l6ZXMgPSB0aGlzLl9nZXRMYWJlbFNpemVzKCk7XG4gICAgZm9yIChpID0gMCwgaWxlbiA9IHRpY2tzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgdGljayA9IHRpY2tzW2ldO1xuICAgICAgbGFiZWwgPSB0aWNrLmxhYmVsO1xuXG4gICAgICBjb25zdCBvcHRzQXRJbmRleCA9IG9wdGlvblRpY2tzLnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KGkpKTtcbiAgICAgIHBpeGVsID0gdGhpcy5nZXRQaXhlbEZvclRpY2soaSkgKyBvcHRpb25UaWNrcy5sYWJlbE9mZnNldDtcbiAgICAgIGZvbnQgPSB0aGlzLl9yZXNvbHZlVGlja0ZvbnRPcHRpb25zKGkpO1xuICAgICAgbGluZUhlaWdodCA9IGZvbnQubGluZUhlaWdodDtcbiAgICAgIGxpbmVDb3VudCA9IGlzQXJyYXkobGFiZWwpID8gbGFiZWwubGVuZ3RoIDogMTtcbiAgICAgIGNvbnN0IGhhbGZDb3VudCA9IGxpbmVDb3VudCAvIDI7XG4gICAgICBjb25zdCBjb2xvciA9IG9wdHNBdEluZGV4LmNvbG9yO1xuICAgICAgY29uc3Qgc3Ryb2tlQ29sb3IgPSBvcHRzQXRJbmRleC50ZXh0U3Ryb2tlQ29sb3I7XG4gICAgICBjb25zdCBzdHJva2VXaWR0aCA9IG9wdHNBdEluZGV4LnRleHRTdHJva2VXaWR0aDtcbiAgICAgIGxldCB0aWNrVGV4dEFsaWduID0gdGV4dEFsaWduO1xuXG4gICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgIHggPSBwaXhlbDtcblxuICAgICAgICBpZiAodGV4dEFsaWduID09PSAnaW5uZXInKSB7XG4gICAgICAgICAgaWYgKGkgPT09IGlsZW4gLSAxKSB7XG4gICAgICAgICAgICB0aWNrVGV4dEFsaWduID0gIXRoaXMub3B0aW9ucy5yZXZlcnNlID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIHRpY2tUZXh0QWxpZ24gPSAhdGhpcy5vcHRpb25zLnJldmVyc2UgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aWNrVGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgICAgIGlmIChjcm9zc0FsaWduID09PSAnbmVhcicgfHwgcm90YXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIHRleHRPZmZzZXQgPSAtbGluZUNvdW50ICogbGluZUhlaWdodCArIGxpbmVIZWlnaHQgLyAyO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY3Jvc3NBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICAgIHRleHRPZmZzZXQgPSAtbGFiZWxTaXplcy5oaWdoZXN0LmhlaWdodCAvIDIgLSBoYWxmQ291bnQgKiBsaW5lSGVpZ2h0ICsgbGluZUhlaWdodDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dE9mZnNldCA9IC1sYWJlbFNpemVzLmhpZ2hlc3QuaGVpZ2h0ICsgbGluZUhlaWdodCAvIDI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb25lbHktaWZcbiAgICAgICAgICBpZiAoY3Jvc3NBbGlnbiA9PT0gJ25lYXInIHx8IHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICB0ZXh0T2Zmc2V0ID0gbGluZUhlaWdodCAvIDI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjcm9zc0FsaWduID09PSAnY2VudGVyJykge1xuICAgICAgICAgICAgdGV4dE9mZnNldCA9IGxhYmVsU2l6ZXMuaGlnaGVzdC5oZWlnaHQgLyAyIC0gaGFsZkNvdW50ICogbGluZUhlaWdodDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dE9mZnNldCA9IGxhYmVsU2l6ZXMuaGlnaGVzdC5oZWlnaHQgLSBsaW5lQ291bnQgKiBsaW5lSGVpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWlycm9yKSB7XG4gICAgICAgICAgdGV4dE9mZnNldCAqPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm90YXRpb24gIT09IDAgJiYgIW9wdHNBdEluZGV4LnNob3dMYWJlbEJhY2tkcm9wKSB7XG4gICAgICAgICAgeCArPSAobGluZUhlaWdodCAvIDIpICogTWF0aC5zaW4ocm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5ID0gcGl4ZWw7XG4gICAgICAgIHRleHRPZmZzZXQgPSAoMSAtIGxpbmVDb3VudCkgKiBsaW5lSGVpZ2h0IC8gMjtcbiAgICAgIH1cblxuICAgICAgbGV0IGJhY2tkcm9wO1xuXG4gICAgICBpZiAob3B0c0F0SW5kZXguc2hvd0xhYmVsQmFja2Ryb3ApIHtcbiAgICAgICAgY29uc3QgbGFiZWxQYWRkaW5nID0gdG9QYWRkaW5nKG9wdHNBdEluZGV4LmJhY2tkcm9wUGFkZGluZyk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGxhYmVsU2l6ZXMuaGVpZ2h0c1tpXTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBsYWJlbFNpemVzLndpZHRoc1tpXTtcblxuICAgICAgICBsZXQgdG9wID0gdGV4dE9mZnNldCAtIGxhYmVsUGFkZGluZy50b3A7XG4gICAgICAgIGxldCBsZWZ0ID0gMCAtIGxhYmVsUGFkZGluZy5sZWZ0O1xuXG4gICAgICAgIHN3aXRjaCAodGV4dEJhc2VsaW5lKSB7XG4gICAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgICAgdG9wIC09IGhlaWdodCAvIDI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAodGV4dEFsaWduKSB7XG4gICAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgICAgbGVmdCAtPSB3aWR0aCAvIDI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgYmFja2Ryb3AgPSB7XG4gICAgICAgICAgbGVmdCxcbiAgICAgICAgICB0b3AsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoICsgbGFiZWxQYWRkaW5nLndpZHRoLFxuICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICsgbGFiZWxQYWRkaW5nLmhlaWdodCxcblxuICAgICAgICAgIGNvbG9yOiBvcHRzQXRJbmRleC5iYWNrZHJvcENvbG9yLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIGZvbnQsXG4gICAgICAgIHRleHRPZmZzZXQsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICByb3RhdGlvbixcbiAgICAgICAgICBjb2xvcixcbiAgICAgICAgICBzdHJva2VDb2xvcixcbiAgICAgICAgICBzdHJva2VXaWR0aCxcbiAgICAgICAgICB0ZXh0QWxpZ246IHRpY2tUZXh0QWxpZ24sXG4gICAgICAgICAgdGV4dEJhc2VsaW5lLFxuICAgICAgICAgIHRyYW5zbGF0aW9uOiBbeCwgeV0sXG4gICAgICAgICAgYmFja2Ryb3AsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBpdGVtcztcbiAgfVxuXG4gIF9nZXRYQXhpc0xhYmVsQWxpZ25tZW50KCkge1xuICAgIGNvbnN0IHtwb3NpdGlvbiwgdGlja3N9ID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IHJvdGF0aW9uID0gLXRvUmFkaWFucyh0aGlzLmxhYmVsUm90YXRpb24pO1xuXG4gICAgaWYgKHJvdGF0aW9uKSB7XG4gICAgICByZXR1cm4gcG9zaXRpb24gPT09ICd0b3AnID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICB9XG5cbiAgICBsZXQgYWxpZ24gPSAnY2VudGVyJztcblxuICAgIGlmICh0aWNrcy5hbGlnbiA9PT0gJ3N0YXJ0Jykge1xuICAgICAgYWxpZ24gPSAnbGVmdCc7XG4gICAgfSBlbHNlIGlmICh0aWNrcy5hbGlnbiA9PT0gJ2VuZCcpIHtcbiAgICAgIGFsaWduID0gJ3JpZ2h0JztcbiAgICB9IGVsc2UgaWYgKHRpY2tzLmFsaWduID09PSAnaW5uZXInKSB7XG4gICAgICBhbGlnbiA9ICdpbm5lcic7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsaWduO1xuICB9XG5cbiAgX2dldFlBeGlzTGFiZWxBbGlnbm1lbnQodGwpIHtcbiAgICBjb25zdCB7cG9zaXRpb24sIHRpY2tzOiB7Y3Jvc3NBbGlnbiwgbWlycm9yLCBwYWRkaW5nfX0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgbGFiZWxTaXplcyA9IHRoaXMuX2dldExhYmVsU2l6ZXMoKTtcbiAgICBjb25zdCB0aWNrQW5kUGFkZGluZyA9IHRsICsgcGFkZGluZztcbiAgICBjb25zdCB3aWRlc3QgPSBsYWJlbFNpemVzLndpZGVzdC53aWR0aDtcblxuICAgIGxldCB0ZXh0QWxpZ247XG4gICAgbGV0IHg7XG5cbiAgICBpZiAocG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgICAgaWYgKG1pcnJvcikge1xuICAgICAgICB4ID0gdGhpcy5yaWdodCArIHBhZGRpbmc7XG5cbiAgICAgICAgaWYgKGNyb3NzQWxpZ24gPT09ICduZWFyJykge1xuICAgICAgICAgIHRleHRBbGlnbiA9ICdsZWZ0JztcbiAgICAgICAgfSBlbHNlIGlmIChjcm9zc0FsaWduID09PSAnY2VudGVyJykge1xuICAgICAgICAgIHRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgIHggKz0gKHdpZGVzdCAvIDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgICAgeCArPSB3aWRlc3Q7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSB0aGlzLnJpZ2h0IC0gdGlja0FuZFBhZGRpbmc7XG5cbiAgICAgICAgaWYgKGNyb3NzQWxpZ24gPT09ICduZWFyJykge1xuICAgICAgICAgIHRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgIH0gZWxzZSBpZiAoY3Jvc3NBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICB4IC09ICh3aWRlc3QgLyAyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZXh0QWxpZ24gPSAnbGVmdCc7XG4gICAgICAgICAgeCA9IHRoaXMubGVmdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgIGlmIChtaXJyb3IpIHtcbiAgICAgICAgeCA9IHRoaXMubGVmdCArIHBhZGRpbmc7XG5cbiAgICAgICAgaWYgKGNyb3NzQWxpZ24gPT09ICduZWFyJykge1xuICAgICAgICAgIHRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgIH0gZWxzZSBpZiAoY3Jvc3NBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgICB0ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICB4IC09ICh3aWRlc3QgLyAyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZXh0QWxpZ24gPSAnbGVmdCc7XG4gICAgICAgICAgeCAtPSB3aWRlc3Q7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSB0aGlzLmxlZnQgKyB0aWNrQW5kUGFkZGluZztcblxuICAgICAgICBpZiAoY3Jvc3NBbGlnbiA9PT0gJ25lYXInKSB7XG4gICAgICAgICAgdGV4dEFsaWduID0gJ2xlZnQnO1xuICAgICAgICB9IGVsc2UgaWYgKGNyb3NzQWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgICAgdGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgeCArPSB3aWRlc3QgLyAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgICAgeCA9IHRoaXMucmlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICB9XG5cbiAgICByZXR1cm4ge3RleHRBbGlnbiwgeH07XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9jb21wdXRlTGFiZWxBcmVhKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudGlja3MubWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5vcHRpb25zLnBvc2l0aW9uO1xuXG4gICAgaWYgKHBvc2l0aW9uID09PSAnbGVmdCcgfHwgcG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgIHJldHVybiB7dG9wOiAwLCBsZWZ0OiB0aGlzLmxlZnQsIGJvdHRvbTogY2hhcnQuaGVpZ2h0LCByaWdodDogdGhpcy5yaWdodH07XG4gICAgfSBpZiAocG9zaXRpb24gPT09ICd0b3AnIHx8IHBvc2l0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgcmV0dXJuIHt0b3A6IHRoaXMudG9wLCBsZWZ0OiAwLCBib3R0b206IHRoaXMuYm90dG9tLCByaWdodDogY2hhcnQud2lkdGh9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBkcmF3QmFja2dyb3VuZCgpIHtcbiAgICBjb25zdCB7Y3R4LCBvcHRpb25zOiB7YmFja2dyb3VuZENvbG9yfSwgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0fSA9IHRoaXM7XG4gICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgICAgY3R4LnNhdmUoKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kQ29sb3I7XG4gICAgICBjdHguZmlsbFJlY3QobGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0TGluZVdpZHRoRm9yVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBncmlkID0gdGhpcy5vcHRpb25zLmdyaWQ7XG4gICAgaWYgKCF0aGlzLl9pc1Zpc2libGUoKSB8fCAhZ3JpZC5kaXNwbGF5KSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgY29uc3QgdGlja3MgPSB0aGlzLnRpY2tzO1xuICAgIGNvbnN0IGluZGV4ID0gdGlja3MuZmluZEluZGV4KHQgPT4gdC52YWx1ZSA9PT0gdmFsdWUpO1xuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICBjb25zdCBvcHRzID0gZ3JpZC5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dChpbmRleCkpO1xuICAgICAgcmV0dXJuIG9wdHMubGluZVdpZHRoO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBkcmF3R3JpZChjaGFydEFyZWEpIHtcbiAgICBjb25zdCBncmlkID0gdGhpcy5vcHRpb25zLmdyaWQ7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLl9ncmlkTGluZUl0ZW1zIHx8ICh0aGlzLl9ncmlkTGluZUl0ZW1zID0gdGhpcy5fY29tcHV0ZUdyaWRMaW5lSXRlbXMoY2hhcnRBcmVhKSk7XG4gICAgbGV0IGksIGlsZW47XG5cbiAgICBjb25zdCBkcmF3TGluZSA9IChwMSwgcDIsIHN0eWxlKSA9PiB7XG4gICAgICBpZiAoIXN0eWxlLndpZHRoIHx8ICFzdHlsZS5jb2xvcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IHN0eWxlLndpZHRoO1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3R5bGUuY29sb3I7XG4gICAgICBjdHguc2V0TGluZURhc2goc3R5bGUuYm9yZGVyRGFzaCB8fCBbXSk7XG4gICAgICBjdHgubGluZURhc2hPZmZzZXQgPSBzdHlsZS5ib3JkZXJEYXNoT2Zmc2V0O1xuXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHgubW92ZVRvKHAxLngsIHAxLnkpO1xuICAgICAgY3R4LmxpbmVUbyhwMi54LCBwMi55KTtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfTtcblxuICAgIGlmIChncmlkLmRpc3BsYXkpIHtcbiAgICAgIGZvciAoaSA9IDAsIGlsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2ldO1xuXG4gICAgICAgIGlmIChncmlkLmRyYXdPbkNoYXJ0QXJlYSkge1xuICAgICAgICAgIGRyYXdMaW5lKFxuICAgICAgICAgICAge3g6IGl0ZW0ueDEsIHk6IGl0ZW0ueTF9LFxuICAgICAgICAgICAge3g6IGl0ZW0ueDIsIHk6IGl0ZW0ueTJ9LFxuICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ3JpZC5kcmF3VGlja3MpIHtcbiAgICAgICAgICBkcmF3TGluZShcbiAgICAgICAgICAgIHt4OiBpdGVtLnR4MSwgeTogaXRlbS50eTF9LFxuICAgICAgICAgICAge3g6IGl0ZW0udHgyLCB5OiBpdGVtLnR5Mn0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbG9yOiBpdGVtLnRpY2tDb2xvcixcbiAgICAgICAgICAgICAgd2lkdGg6IGl0ZW0udGlja1dpZHRoLFxuICAgICAgICAgICAgICBib3JkZXJEYXNoOiBpdGVtLnRpY2tCb3JkZXJEYXNoLFxuICAgICAgICAgICAgICBib3JkZXJEYXNoT2Zmc2V0OiBpdGVtLnRpY2tCb3JkZXJEYXNoT2Zmc2V0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBkcmF3Qm9yZGVyKCkge1xuICAgIGNvbnN0IHtjaGFydCwgY3R4LCBvcHRpb25zOiB7Ym9yZGVyLCBncmlkfX0gPSB0aGlzO1xuICAgIGNvbnN0IGJvcmRlck9wdHMgPSBib3JkZXIuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoKSk7XG4gICAgY29uc3QgYXhpc1dpZHRoID0gYm9yZGVyLmRpc3BsYXkgPyBib3JkZXJPcHRzLndpZHRoIDogMDtcbiAgICBpZiAoIWF4aXNXaWR0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsYXN0TGluZVdpZHRoID0gZ3JpZC5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgwKSkubGluZVdpZHRoO1xuICAgIGNvbnN0IGJvcmRlclZhbHVlID0gdGhpcy5fYm9yZGVyVmFsdWU7XG4gICAgbGV0IHgxLCB4MiwgeTEsIHkyO1xuXG4gICAgaWYgKHRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgIHgxID0gX2FsaWduUGl4ZWwoY2hhcnQsIHRoaXMubGVmdCwgYXhpc1dpZHRoKSAtIGF4aXNXaWR0aCAvIDI7XG4gICAgICB4MiA9IF9hbGlnblBpeGVsKGNoYXJ0LCB0aGlzLnJpZ2h0LCBsYXN0TGluZVdpZHRoKSArIGxhc3RMaW5lV2lkdGggLyAyO1xuICAgICAgeTEgPSB5MiA9IGJvcmRlclZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB5MSA9IF9hbGlnblBpeGVsKGNoYXJ0LCB0aGlzLnRvcCwgYXhpc1dpZHRoKSAtIGF4aXNXaWR0aCAvIDI7XG4gICAgICB5MiA9IF9hbGlnblBpeGVsKGNoYXJ0LCB0aGlzLmJvdHRvbSwgbGFzdExpbmVXaWR0aCkgKyBsYXN0TGluZVdpZHRoIC8gMjtcbiAgICAgIHgxID0geDIgPSBib3JkZXJWYWx1ZTtcbiAgICB9XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHgubGluZVdpZHRoID0gYm9yZGVyT3B0cy53aWR0aDtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSBib3JkZXJPcHRzLmNvbG9yO1xuXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oeDEsIHkxKTtcbiAgICBjdHgubGluZVRvKHgyLCB5Mik7XG4gICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBkcmF3TGFiZWxzKGNoYXJ0QXJlYSkge1xuICAgIGNvbnN0IG9wdGlvblRpY2tzID0gdGhpcy5vcHRpb25zLnRpY2tzO1xuXG4gICAgaWYgKCFvcHRpb25UaWNrcy5kaXNwbGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG5cbiAgICBjb25zdCBhcmVhID0gdGhpcy5fY29tcHV0ZUxhYmVsQXJlYSgpO1xuICAgIGlmIChhcmVhKSB7XG4gICAgICBjbGlwQXJlYShjdHgsIGFyZWEpO1xuICAgIH1cblxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRMYWJlbEl0ZW1zKGNoYXJ0QXJlYSk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBjb25zdCByZW5kZXJUZXh0T3B0aW9ucyA9IGl0ZW0ub3B0aW9ucztcbiAgICAgIGNvbnN0IHRpY2tGb250ID0gaXRlbS5mb250O1xuICAgICAgY29uc3QgbGFiZWwgPSBpdGVtLmxhYmVsO1xuICAgICAgY29uc3QgeSA9IGl0ZW0udGV4dE9mZnNldDtcbiAgICAgIHJlbmRlclRleHQoY3R4LCBsYWJlbCwgMCwgeSwgdGlja0ZvbnQsIHJlbmRlclRleHRPcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAoYXJlYSkge1xuICAgICAgdW5jbGlwQXJlYShjdHgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBkcmF3VGl0bGUoKSB7XG4gICAgY29uc3Qge2N0eCwgb3B0aW9uczoge3Bvc2l0aW9uLCB0aXRsZSwgcmV2ZXJzZX19ID0gdGhpcztcblxuICAgIGlmICghdGl0bGUuZGlzcGxheSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZvbnQgPSB0b0ZvbnQodGl0bGUuZm9udCk7XG4gICAgY29uc3QgcGFkZGluZyA9IHRvUGFkZGluZyh0aXRsZS5wYWRkaW5nKTtcbiAgICBjb25zdCBhbGlnbiA9IHRpdGxlLmFsaWduO1xuICAgIGxldCBvZmZzZXQgPSBmb250LmxpbmVIZWlnaHQgLyAyO1xuXG4gICAgaWYgKHBvc2l0aW9uID09PSAnYm90dG9tJyB8fCBwb3NpdGlvbiA9PT0gJ2NlbnRlcicgfHwgaXNPYmplY3QocG9zaXRpb24pKSB7XG4gICAgICBvZmZzZXQgKz0gcGFkZGluZy5ib3R0b207XG4gICAgICBpZiAoaXNBcnJheSh0aXRsZS50ZXh0KSkge1xuICAgICAgICBvZmZzZXQgKz0gZm9udC5saW5lSGVpZ2h0ICogKHRpdGxlLnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldCArPSBwYWRkaW5nLnRvcDtcbiAgICB9XG5cbiAgICBjb25zdCB7dGl0bGVYLCB0aXRsZVksIG1heFdpZHRoLCByb3RhdGlvbn0gPSB0aXRsZUFyZ3ModGhpcywgb2Zmc2V0LCBwb3NpdGlvbiwgYWxpZ24pO1xuXG4gICAgcmVuZGVyVGV4dChjdHgsIHRpdGxlLnRleHQsIDAsIDAsIGZvbnQsIHtcbiAgICAgIGNvbG9yOiB0aXRsZS5jb2xvcixcbiAgICAgIG1heFdpZHRoLFxuICAgICAgcm90YXRpb24sXG4gICAgICB0ZXh0QWxpZ246IHRpdGxlQWxpZ24oYWxpZ24sIHBvc2l0aW9uLCByZXZlcnNlKSxcbiAgICAgIHRleHRCYXNlbGluZTogJ21pZGRsZScsXG4gICAgICB0cmFuc2xhdGlvbjogW3RpdGxlWCwgdGl0bGVZXSxcbiAgICB9KTtcbiAgfVxuXG4gIGRyYXcoY2hhcnRBcmVhKSB7XG4gICAgaWYgKCF0aGlzLl9pc1Zpc2libGUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZHJhd0JhY2tncm91bmQoKTtcbiAgICB0aGlzLmRyYXdHcmlkKGNoYXJ0QXJlYSk7XG4gICAgdGhpcy5kcmF3Qm9yZGVyKCk7XG4gICAgdGhpcy5kcmF3VGl0bGUoKTtcbiAgICB0aGlzLmRyYXdMYWJlbHMoY2hhcnRBcmVhKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcmV0dXJuIHtvYmplY3RbXX1cblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9sYXllcnMoKSB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCB0eiA9IG9wdHMudGlja3MgJiYgb3B0cy50aWNrcy56IHx8IDA7XG4gICAgY29uc3QgZ3ogPSB2YWx1ZU9yRGVmYXVsdChvcHRzLmdyaWQgJiYgb3B0cy5ncmlkLnosIC0xKTtcbiAgICBjb25zdCBieiA9IHZhbHVlT3JEZWZhdWx0KG9wdHMuYm9yZGVyICYmIG9wdHMuYm9yZGVyLnosIDApO1xuXG4gICAgaWYgKCF0aGlzLl9pc1Zpc2libGUoKSB8fCB0aGlzLmRyYXcgIT09IFNjYWxlLnByb3RvdHlwZS5kcmF3KSB7XG4gICAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5OiBkcmF3IGhhcyBiZWVuIG92ZXJyaWRkZW4gYnkgY3VzdG9tIHNjYWxlXG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgejogdHosXG4gICAgICAgIGRyYXc6IChjaGFydEFyZWEpID0+IHtcbiAgICAgICAgICB0aGlzLmRyYXcoY2hhcnRBcmVhKTtcbiAgICAgICAgfVxuICAgICAgfV07XG4gICAgfVxuXG4gICAgcmV0dXJuIFt7XG4gICAgICB6OiBneixcbiAgICAgIGRyYXc6IChjaGFydEFyZWEpID0+IHtcbiAgICAgICAgdGhpcy5kcmF3QmFja2dyb3VuZCgpO1xuICAgICAgICB0aGlzLmRyYXdHcmlkKGNoYXJ0QXJlYSk7XG4gICAgICAgIHRoaXMuZHJhd1RpdGxlKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgejogYnosXG4gICAgICBkcmF3OiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZHJhd0JvcmRlcigpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHo6IHR6LFxuICAgICAgZHJhdzogKGNoYXJ0QXJlYSkgPT4ge1xuICAgICAgICB0aGlzLmRyYXdMYWJlbHMoY2hhcnRBcmVhKTtcbiAgICAgIH1cbiAgICB9XTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBSZXR1cm5zIHZpc2libGUgZGF0YXNldCBtZXRhcyB0aGF0IGFyZSBhdHRhY2hlZCB0byB0aGlzIHNjYWxlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZV0gLSBpZiBzcGVjaWZpZWQsIGFsc28gZmlsdGVyIGJ5IGRhdGFzZXQgdHlwZVxuXHQgKiBAcmV0dXJuIHtvYmplY3RbXX1cblx0ICovXG4gIGdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKHR5cGUpIHtcbiAgICBjb25zdCBtZXRhcyA9IHRoaXMuY2hhcnQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpO1xuICAgIGNvbnN0IGF4aXNJRCA9IHRoaXMuYXhpcyArICdBeGlzSUQnO1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGxldCBpLCBpbGVuO1xuXG4gICAgZm9yIChpID0gMCwgaWxlbiA9IG1ldGFzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgY29uc3QgbWV0YSA9IG1ldGFzW2ldO1xuICAgICAgaWYgKG1ldGFbYXhpc0lEXSA9PT0gdGhpcy5pZCAmJiAoIXR5cGUgfHwgbWV0YS50eXBlID09PSB0eXBlKSkge1xuICAgICAgICByZXN1bHQucHVzaChtZXRhKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcblx0ICogQHJldHVybiB7b2JqZWN0fVxuXHQgKiBAcHJvdGVjdGVkXG4gXHQgKi9cbiAgX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoaW5kZXgpIHtcbiAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zLnRpY2tzLnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KGluZGV4KSk7XG4gICAgcmV0dXJuIHRvRm9udChvcHRzLmZvbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9tYXhEaWdpdHMoKSB7XG4gICAgY29uc3QgZm9udFNpemUgPSB0aGlzLl9yZXNvbHZlVGlja0ZvbnRPcHRpb25zKDApLmxpbmVIZWlnaHQ7XG4gICAgcmV0dXJuICh0aGlzLmlzSG9yaXpvbnRhbCgpID8gdGhpcy53aWR0aCA6IHRoaXMuaGVpZ2h0KSAvIGZvbnRTaXplO1xuICB9XG59XG4iLCAiaW1wb3J0IHttZXJnZX0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5pbXBvcnQgZGVmYXVsdHMsIHtvdmVycmlkZXN9IGZyb20gJy4vY29yZS5kZWZhdWx0cy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge3tpZDogc3RyaW5nLCBkZWZhdWx0czogYW55LCBvdmVycmlkZXM/OiBhbnksIGRlZmF1bHRSb3V0ZXM6IGFueX19IElDaGFydENvbXBvbmVudFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR5cGVkUmVnaXN0cnkge1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBzY29wZSwgb3ZlcnJpZGUpIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICB0aGlzLm92ZXJyaWRlID0gb3ZlcnJpZGU7XG4gICAgdGhpcy5pdGVtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICBpc0ZvclR5cGUodHlwZSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YuY2FsbCh0aGlzLnR5cGUucHJvdG90eXBlLCB0eXBlLnByb3RvdHlwZSk7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtJQ2hhcnRDb21wb25lbnR9IGl0ZW1cblx0ICogQHJldHVybnMge3N0cmluZ30gVGhlIHNjb3BlIHdoZXJlIGl0ZW1zIGRlZmF1bHRzIHdlcmUgcmVnaXN0ZXJlZCB0by5cblx0ICovXG4gIHJlZ2lzdGVyKGl0ZW0pIHtcbiAgICBjb25zdCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihpdGVtKTtcbiAgICBsZXQgcGFyZW50U2NvcGU7XG5cbiAgICBpZiAoaXNJQ2hhcnRDb21wb25lbnQocHJvdG8pKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIHBhcmVudCBpcyByZWdpc3RlcmVkIGFuZCBub3RlIHRoZSBzY29wZSB3aGVyZSBpdHMgZGVmYXVsdHMgYXJlLlxuICAgICAgcGFyZW50U2NvcGUgPSB0aGlzLnJlZ2lzdGVyKHByb3RvKTtcbiAgICB9XG5cbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgY29uc3QgaWQgPSBpdGVtLmlkO1xuICAgIGNvbnN0IHNjb3BlID0gdGhpcy5zY29wZSArICcuJyArIGlkO1xuXG4gICAgaWYgKCFpZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjbGFzcyBkb2VzIG5vdCBoYXZlIGlkOiAnICsgaXRlbSk7XG4gICAgfVxuXG4gICAgaWYgKGlkIGluIGl0ZW1zKSB7XG4gICAgICAvLyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgIHJldHVybiBzY29wZTtcbiAgICB9XG5cbiAgICBpdGVtc1tpZF0gPSBpdGVtO1xuICAgIHJlZ2lzdGVyRGVmYXVsdHMoaXRlbSwgc2NvcGUsIHBhcmVudFNjb3BlKTtcbiAgICBpZiAodGhpcy5vdmVycmlkZSkge1xuICAgICAgZGVmYXVsdHMub3ZlcnJpZGUoaXRlbS5pZCwgaXRlbS5vdmVycmlkZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBzY29wZTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWRcblx0ICogQHJldHVybnMge29iamVjdD99XG5cdCAqL1xuICBnZXQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtc1tpZF07XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtJQ2hhcnRDb21wb25lbnR9IGl0ZW1cblx0ICovXG4gIHVucmVnaXN0ZXIoaXRlbSkge1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICBjb25zdCBpZCA9IGl0ZW0uaWQ7XG4gICAgY29uc3Qgc2NvcGUgPSB0aGlzLnNjb3BlO1xuXG4gICAgaWYgKGlkIGluIGl0ZW1zKSB7XG4gICAgICBkZWxldGUgaXRlbXNbaWRdO1xuICAgIH1cblxuICAgIGlmIChzY29wZSAmJiBpZCBpbiBkZWZhdWx0c1tzY29wZV0pIHtcbiAgICAgIGRlbGV0ZSBkZWZhdWx0c1tzY29wZV1baWRdO1xuICAgICAgaWYgKHRoaXMub3ZlcnJpZGUpIHtcbiAgICAgICAgZGVsZXRlIG92ZXJyaWRlc1tpZF07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyRGVmYXVsdHMoaXRlbSwgc2NvcGUsIHBhcmVudFNjb3BlKSB7XG4gIC8vIEluaGVyaXQgdGhlIHBhcmVudCdzIGRlZmF1bHRzIGFuZCBrZWVwIGV4aXN0aW5nIGRlZmF1bHRzXG4gIGNvbnN0IGl0ZW1EZWZhdWx0cyA9IG1lcmdlKE9iamVjdC5jcmVhdGUobnVsbCksIFtcbiAgICBwYXJlbnRTY29wZSA/IGRlZmF1bHRzLmdldChwYXJlbnRTY29wZSkgOiB7fSxcbiAgICBkZWZhdWx0cy5nZXQoc2NvcGUpLFxuICAgIGl0ZW0uZGVmYXVsdHNcbiAgXSk7XG5cbiAgZGVmYXVsdHMuc2V0KHNjb3BlLCBpdGVtRGVmYXVsdHMpO1xuXG4gIGlmIChpdGVtLmRlZmF1bHRSb3V0ZXMpIHtcbiAgICByb3V0ZURlZmF1bHRzKHNjb3BlLCBpdGVtLmRlZmF1bHRSb3V0ZXMpO1xuICB9XG5cbiAgaWYgKGl0ZW0uZGVzY3JpcHRvcnMpIHtcbiAgICBkZWZhdWx0cy5kZXNjcmliZShzY29wZSwgaXRlbS5kZXNjcmlwdG9ycyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm91dGVEZWZhdWx0cyhzY29wZSwgcm91dGVzKSB7XG4gIE9iamVjdC5rZXlzKHJvdXRlcykuZm9yRWFjaChwcm9wZXJ0eSA9PiB7XG4gICAgY29uc3QgcHJvcGVydHlQYXJ0cyA9IHByb3BlcnR5LnNwbGl0KCcuJyk7XG4gICAgY29uc3Qgc291cmNlTmFtZSA9IHByb3BlcnR5UGFydHMucG9wKCk7XG4gICAgY29uc3Qgc291cmNlU2NvcGUgPSBbc2NvcGVdLmNvbmNhdChwcm9wZXJ0eVBhcnRzKS5qb2luKCcuJyk7XG4gICAgY29uc3QgcGFydHMgPSByb3V0ZXNbcHJvcGVydHldLnNwbGl0KCcuJyk7XG4gICAgY29uc3QgdGFyZ2V0TmFtZSA9IHBhcnRzLnBvcCgpO1xuICAgIGNvbnN0IHRhcmdldFNjb3BlID0gcGFydHMuam9pbignLicpO1xuICAgIGRlZmF1bHRzLnJvdXRlKHNvdXJjZVNjb3BlLCBzb3VyY2VOYW1lLCB0YXJnZXRTY29wZSwgdGFyZ2V0TmFtZSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpc0lDaGFydENvbXBvbmVudChwcm90bykge1xuICByZXR1cm4gJ2lkJyBpbiBwcm90byAmJiAnZGVmYXVsdHMnIGluIHByb3RvO1xufVxuIiwgImltcG9ydCBEYXRhc2V0Q29udHJvbGxlciBmcm9tICcuL2NvcmUuZGF0YXNldENvbnRyb2xsZXIuanMnO1xuaW1wb3J0IEVsZW1lbnQgZnJvbSAnLi9jb3JlLmVsZW1lbnQuanMnO1xuaW1wb3J0IFNjYWxlIGZyb20gJy4vY29yZS5zY2FsZS5qcyc7XG5pbXBvcnQgVHlwZWRSZWdpc3RyeSBmcm9tICcuL2NvcmUudHlwZWRSZWdpc3RyeS5qcyc7XG5pbXBvcnQge2VhY2gsIGNhbGxiYWNrIGFzIGNhbGwsIF9jYXBpdGFsaXplfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5cbi8qKlxuICogUGxlYXNlIHVzZSB0aGUgbW9kdWxlJ3MgZGVmYXVsdCBleHBvcnQgd2hpY2ggcHJvdmlkZXMgYSBzaW5nbGV0b24gaW5zdGFuY2VcbiAqIE5vdGU6IGNsYXNzIGlzIGV4cG9ydGVkIGZvciB0eXBlZG9jXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWdpc3RyeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29udHJvbGxlcnMgPSBuZXcgVHlwZWRSZWdpc3RyeShEYXRhc2V0Q29udHJvbGxlciwgJ2RhdGFzZXRzJywgdHJ1ZSk7XG4gICAgdGhpcy5lbGVtZW50cyA9IG5ldyBUeXBlZFJlZ2lzdHJ5KEVsZW1lbnQsICdlbGVtZW50cycpO1xuICAgIHRoaXMucGx1Z2lucyA9IG5ldyBUeXBlZFJlZ2lzdHJ5KE9iamVjdCwgJ3BsdWdpbnMnKTtcbiAgICB0aGlzLnNjYWxlcyA9IG5ldyBUeXBlZFJlZ2lzdHJ5KFNjYWxlLCAnc2NhbGVzJyk7XG4gICAgLy8gT3JkZXIgaXMgaW1wb3J0YW50LCBTY2FsZSBoYXMgRWxlbWVudCBpbiBwcm90b3R5cGUgY2hhaW4sXG4gICAgLy8gc28gU2NhbGVzIG11c3QgYmUgYmVmb3JlIEVsZW1lbnRzLiBQbHVnaW5zIGFyZSBhIGZhbGxiYWNrLCBzbyBub3QgbGlzdGVkIGhlcmUuXG4gICAgdGhpcy5fdHlwZWRSZWdpc3RyaWVzID0gW3RoaXMuY29udHJvbGxlcnMsIHRoaXMuc2NhbGVzLCB0aGlzLmVsZW1lbnRzXTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0gIHsuLi5hbnl9IGFyZ3Ncblx0ICovXG4gIGFkZCguLi5hcmdzKSB7XG4gICAgdGhpcy5fZWFjaCgncmVnaXN0ZXInLCBhcmdzKTtcbiAgfVxuXG4gIHJlbW92ZSguLi5hcmdzKSB7XG4gICAgdGhpcy5fZWFjaCgndW5yZWdpc3RlcicsIGFyZ3MpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSAgey4uLnR5cGVvZiBEYXRhc2V0Q29udHJvbGxlcn0gYXJnc1xuXHQgKi9cbiAgYWRkQ29udHJvbGxlcnMoLi4uYXJncykge1xuICAgIHRoaXMuX2VhY2goJ3JlZ2lzdGVyJywgYXJncywgdGhpcy5jb250cm9sbGVycyk7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtICB7Li4udHlwZW9mIEVsZW1lbnR9IGFyZ3Ncblx0ICovXG4gIGFkZEVsZW1lbnRzKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9lYWNoKCdyZWdpc3RlcicsIGFyZ3MsIHRoaXMuZWxlbWVudHMpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSAgey4uLmFueX0gYXJnc1xuXHQgKi9cbiAgYWRkUGx1Z2lucyguLi5hcmdzKSB7XG4gICAgdGhpcy5fZWFjaCgncmVnaXN0ZXInLCBhcmdzLCB0aGlzLnBsdWdpbnMpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSAgey4uLnR5cGVvZiBTY2FsZX0gYXJnc1xuXHQgKi9cbiAgYWRkU2NhbGVzKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9lYWNoKCdyZWdpc3RlcicsIGFyZ3MsIHRoaXMuc2NhbGVzKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWRcblx0ICogQHJldHVybnMge3R5cGVvZiBEYXRhc2V0Q29udHJvbGxlcn1cblx0ICovXG4gIGdldENvbnRyb2xsZXIoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0KGlkLCB0aGlzLmNvbnRyb2xsZXJzLCAnY29udHJvbGxlcicpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuXHQgKiBAcmV0dXJucyB7dHlwZW9mIEVsZW1lbnR9XG5cdCAqL1xuICBnZXRFbGVtZW50KGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldChpZCwgdGhpcy5lbGVtZW50cywgJ2VsZW1lbnQnKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWRcblx0ICogQHJldHVybnMge29iamVjdH1cblx0ICovXG4gIGdldFBsdWdpbihpZCkge1xuICAgIHJldHVybiB0aGlzLl9nZXQoaWQsIHRoaXMucGx1Z2lucywgJ3BsdWdpbicpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuXHQgKiBAcmV0dXJucyB7dHlwZW9mIFNjYWxlfVxuXHQgKi9cbiAgZ2V0U2NhbGUoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0KGlkLCB0aGlzLnNjYWxlcywgJ3NjYWxlJyk7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtICB7Li4udHlwZW9mIERhdGFzZXRDb250cm9sbGVyfSBhcmdzXG5cdCAqL1xuICByZW1vdmVDb250cm9sbGVycyguLi5hcmdzKSB7XG4gICAgdGhpcy5fZWFjaCgndW5yZWdpc3RlcicsIGFyZ3MsIHRoaXMuY29udHJvbGxlcnMpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSAgey4uLnR5cGVvZiBFbGVtZW50fSBhcmdzXG5cdCAqL1xuICByZW1vdmVFbGVtZW50cyguLi5hcmdzKSB7XG4gICAgdGhpcy5fZWFjaCgndW5yZWdpc3RlcicsIGFyZ3MsIHRoaXMuZWxlbWVudHMpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSAgey4uLmFueX0gYXJnc1xuXHQgKi9cbiAgcmVtb3ZlUGx1Z2lucyguLi5hcmdzKSB7XG4gICAgdGhpcy5fZWFjaCgndW5yZWdpc3RlcicsIGFyZ3MsIHRoaXMucGx1Z2lucyk7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtICB7Li4udHlwZW9mIFNjYWxlfSBhcmdzXG5cdCAqL1xuICByZW1vdmVTY2FsZXMoLi4uYXJncykge1xuICAgIHRoaXMuX2VhY2goJ3VucmVnaXN0ZXInLCBhcmdzLCB0aGlzLnNjYWxlcyk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9lYWNoKG1ldGhvZCwgYXJncywgdHlwZWRSZWdpc3RyeSkge1xuICAgIFsuLi5hcmdzXS5mb3JFYWNoKGFyZyA9PiB7XG4gICAgICBjb25zdCByZWcgPSB0eXBlZFJlZ2lzdHJ5IHx8IHRoaXMuX2dldFJlZ2lzdHJ5Rm9yVHlwZShhcmcpO1xuICAgICAgaWYgKHR5cGVkUmVnaXN0cnkgfHwgcmVnLmlzRm9yVHlwZShhcmcpIHx8IChyZWcgPT09IHRoaXMucGx1Z2lucyAmJiBhcmcuaWQpKSB7XG4gICAgICAgIHRoaXMuX2V4ZWMobWV0aG9kLCByZWcsIGFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgbG9vcGFibGUgYXJnc1xuICAgICAgICAvLyBVc2UgY2FzZTpcbiAgICAgICAgLy8gIGltcG9ydCAqIGFzIHBsdWdpbnMgZnJvbSAnLi9wbHVnaW5zLmpzJztcbiAgICAgICAgLy8gIENoYXJ0LnJlZ2lzdGVyKHBsdWdpbnMpO1xuICAgICAgICBlYWNoKGFyZywgaXRlbSA9PiB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG1peGVkIHR5cGVzIGluIHRoZSBsb29wYWJsZSwgbWFrZSBzdXJlIHRob3NlIGFyZVxuICAgICAgICAgIC8vIHJlZ2lzdGVyZWQgaW4gY29ycmVjdCByZWdpc3RyeVxuICAgICAgICAgIC8vIFVzZSBjYXNlOiAodHJlZW1hcCBleHBvcnRpbmcgY29udHJvbGxlciwgZWxlbWVudHMgZXRjKVxuICAgICAgICAgIC8vICBpbXBvcnQgKiBhcyB0cmVlbWFwIGZyb20gJ2NoYXJ0anMtY2hhcnQtdHJlZW1hcC5qcyc7XG4gICAgICAgICAgLy8gIENoYXJ0LnJlZ2lzdGVyKHRyZWVtYXApO1xuXG4gICAgICAgICAgY29uc3QgaXRlbVJlZyA9IHR5cGVkUmVnaXN0cnkgfHwgdGhpcy5fZ2V0UmVnaXN0cnlGb3JUeXBlKGl0ZW0pO1xuICAgICAgICAgIHRoaXMuX2V4ZWMobWV0aG9kLCBpdGVtUmVnLCBpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9leGVjKG1ldGhvZCwgcmVnaXN0cnksIGNvbXBvbmVudCkge1xuICAgIGNvbnN0IGNhbWVsTWV0aG9kID0gX2NhcGl0YWxpemUobWV0aG9kKTtcbiAgICBjYWxsKGNvbXBvbmVudFsnYmVmb3JlJyArIGNhbWVsTWV0aG9kXSwgW10sIGNvbXBvbmVudCk7IC8vIGJlZm9yZVJlZ2lzdGVyIC8gYmVmb3JlVW5yZWdpc3RlclxuICAgIHJlZ2lzdHJ5W21ldGhvZF0oY29tcG9uZW50KTtcbiAgICBjYWxsKGNvbXBvbmVudFsnYWZ0ZXInICsgY2FtZWxNZXRob2RdLCBbXSwgY29tcG9uZW50KTsgLy8gYWZ0ZXJSZWdpc3RlciAvIGFmdGVyVW5yZWdpc3RlclxuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0UmVnaXN0cnlGb3JUeXBlKHR5cGUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3R5cGVkUmVnaXN0cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmVnID0gdGhpcy5fdHlwZWRSZWdpc3RyaWVzW2ldO1xuICAgICAgaWYgKHJlZy5pc0ZvclR5cGUodHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlZztcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcGx1Z2lucyBpcyB0aGUgZmFsbGJhY2sgcmVnaXN0cnlcbiAgICByZXR1cm4gdGhpcy5wbHVnaW5zO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0KGlkLCB0eXBlZFJlZ2lzdHJ5LCB0eXBlKSB7XG4gICAgY29uc3QgaXRlbSA9IHR5cGVkUmVnaXN0cnkuZ2V0KGlkKTtcbiAgICBpZiAoaXRlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiJyArIGlkICsgJ1wiIGlzIG5vdCBhIHJlZ2lzdGVyZWQgJyArIHR5cGUgKyAnLicpO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG59XG5cbi8vIHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGRlZmF1bHQgLyogI19fUFVSRV9fICovIG5ldyBSZWdpc3RyeSgpO1xuIiwgImltcG9ydCByZWdpc3RyeSBmcm9tICcuL2NvcmUucmVnaXN0cnkuanMnO1xuaW1wb3J0IHtjYWxsYmFjayBhcyBjYWxsQ2FsbGJhY2ssIGlzTnVsbE9yVW5kZWYsIHZhbHVlT3JEZWZhdWx0fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vY29yZS5jb250cm9sbGVyLmpzJykuZGVmYXVsdCB9IENoYXJ0XG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vdHlwZXMvaW5kZXguanMnKS5DaGFydEV2ZW50IH0gQ2hhcnRFdmVudFxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uL3BsdWdpbnMvcGx1Z2luLnRvb2x0aXAuanMnKS5kZWZhdWx0IH0gVG9vbHRpcFxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIGZpbHRlckNhbGxiYWNrXG4gKiBAcGFyYW0ge3twbHVnaW46IG9iamVjdCwgb3B0aW9uczogb2JqZWN0fX0gdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW5kZXhdXG4gKiBAcGFyYW0ge2FycmF5fSBbYXJyYXldXG4gKiBAcGFyYW0ge29iamVjdH0gW3RoaXNBcmddXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGx1Z2luU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2luaXQgPSBbXTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBDYWxscyBlbmFibGVkIHBsdWdpbnMgZm9yIGBjaGFydGAgb24gdGhlIHNwZWNpZmllZCBob29rIGFuZCB3aXRoIHRoZSBnaXZlbiBhcmdzLlxuXHQgKiBUaGlzIG1ldGhvZCBpbW1lZGlhdGVseSByZXR1cm5zIGFzIHNvb24gYXMgYSBwbHVnaW4gZXhwbGljaXRseSByZXR1cm5zIGZhbHNlLiBUaGVcblx0ICogcmV0dXJuZWQgdmFsdWUgY2FuIGJlIHVzZWQsIGZvciBpbnN0YW5jZSwgdG8gaW50ZXJydXB0IHRoZSBjdXJyZW50IGFjdGlvbi5cblx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnQgLSBUaGUgY2hhcnQgaW5zdGFuY2UgZm9yIHdoaWNoIHBsdWdpbnMgc2hvdWxkIGJlIGNhbGxlZC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGhvb2sgLSBUaGUgbmFtZSBvZiB0aGUgcGx1Z2luIG1ldGhvZCB0byBjYWxsIChlLmcuICdiZWZvcmVVcGRhdGUnKS5cblx0ICogQHBhcmFtIHtvYmplY3R9IFthcmdzXSAtIEV4dHJhIGFyZ3VtZW50cyB0byBhcHBseSB0byB0aGUgaG9vayBjYWxsLlxuICAgKiBAcGFyYW0ge2ZpbHRlckNhbGxiYWNrfSBbZmlsdGVyXSAtIEZpbHRlcmluZyBmdW5jdGlvbiBmb3IgbGltaXRpbmcgd2hpY2ggcGx1Z2lucyBhcmUgbm90aWZpZWRcblx0ICogQHJldHVybnMge2Jvb2xlYW59IGZhbHNlIGlmIGFueSBvZiB0aGUgcGx1Z2lucyByZXR1cm4gZmFsc2UsIGVsc2UgcmV0dXJucyB0cnVlLlxuXHQgKi9cbiAgbm90aWZ5KGNoYXJ0LCBob29rLCBhcmdzLCBmaWx0ZXIpIHtcbiAgICBpZiAoaG9vayA9PT0gJ2JlZm9yZUluaXQnKSB7XG4gICAgICB0aGlzLl9pbml0ID0gdGhpcy5fY3JlYXRlRGVzY3JpcHRvcnMoY2hhcnQsIHRydWUpO1xuICAgICAgdGhpcy5fbm90aWZ5KHRoaXMuX2luaXQsIGNoYXJ0LCAnaW5zdGFsbCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gZmlsdGVyID8gdGhpcy5fZGVzY3JpcHRvcnMoY2hhcnQpLmZpbHRlcihmaWx0ZXIpIDogdGhpcy5fZGVzY3JpcHRvcnMoY2hhcnQpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX25vdGlmeShkZXNjcmlwdG9ycywgY2hhcnQsIGhvb2ssIGFyZ3MpO1xuXG4gICAgaWYgKGhvb2sgPT09ICdhZnRlckRlc3Ryb3knKSB7XG4gICAgICB0aGlzLl9ub3RpZnkoZGVzY3JpcHRvcnMsIGNoYXJ0LCAnc3RvcCcpO1xuICAgICAgdGhpcy5fbm90aWZ5KHRoaXMuX2luaXQsIGNoYXJ0LCAndW5pbnN0YWxsJyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9ub3RpZnkoZGVzY3JpcHRvcnMsIGNoYXJ0LCBob29rLCBhcmdzKSB7XG4gICAgYXJncyA9IGFyZ3MgfHwge307XG4gICAgZm9yIChjb25zdCBkZXNjcmlwdG9yIG9mIGRlc2NyaXB0b3JzKSB7XG4gICAgICBjb25zdCBwbHVnaW4gPSBkZXNjcmlwdG9yLnBsdWdpbjtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IHBsdWdpbltob29rXTtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IFtjaGFydCwgYXJncywgZGVzY3JpcHRvci5vcHRpb25zXTtcbiAgICAgIGlmIChjYWxsQ2FsbGJhY2sobWV0aG9kLCBwYXJhbXMsIHBsdWdpbikgPT09IGZhbHNlICYmIGFyZ3MuY2FuY2VsYWJsZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpbnZhbGlkYXRlKCkge1xuICAgIC8vIFdoZW4gcGx1Z2lucyBhcmUgcmVnaXN0ZXJlZCwgdGhlcmUgaXMgdGhlIHBvc3NpYmlsaXR5IG9mIGEgZG91YmxlXG4gICAgLy8gaW52YWxpZGF0ZSBzaXR1YXRpb24uIEluIHRoaXMgY2FzZSwgd2Ugb25seSB3YW50IHRvIGludmFsaWRhdGUgb25jZS5cbiAgICAvLyBJZiB3ZSBpbnZhbGlkYXRlIG11bHRpcGxlIHRpbWVzLCB0aGUgYF9vbGRDYWNoZWAgaXMgbG9zdCBhbmQgYWxsIG9mIHRoZVxuICAgIC8vIHBsdWdpbnMgYXJlIHJlc3RhcnRlZCB3aXRob3V0IGJlaW5nIGNvcnJlY3RseSBzdG9wcGVkLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvODE0N1xuICAgIGlmICghaXNOdWxsT3JVbmRlZih0aGlzLl9jYWNoZSkpIHtcbiAgICAgIHRoaXMuX29sZENhY2hlID0gdGhpcy5fY2FjaGU7XG4gICAgICB0aGlzLl9jYWNoZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtDaGFydH0gY2hhcnRcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9kZXNjcmlwdG9ycyhjaGFydCkge1xuICAgIGlmICh0aGlzLl9jYWNoZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlO1xuICAgIH1cblxuICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gdGhpcy5fY2FjaGUgPSB0aGlzLl9jcmVhdGVEZXNjcmlwdG9ycyhjaGFydCk7XG5cbiAgICB0aGlzLl9ub3RpZnlTdGF0ZUNoYW5nZXMoY2hhcnQpO1xuXG4gICAgcmV0dXJuIGRlc2NyaXB0b3JzO1xuICB9XG5cbiAgX2NyZWF0ZURlc2NyaXB0b3JzKGNoYXJ0LCBhbGwpIHtcbiAgICBjb25zdCBjb25maWcgPSBjaGFydCAmJiBjaGFydC5jb25maWc7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHZhbHVlT3JEZWZhdWx0KGNvbmZpZy5vcHRpb25zICYmIGNvbmZpZy5vcHRpb25zLnBsdWdpbnMsIHt9KTtcbiAgICBjb25zdCBwbHVnaW5zID0gYWxsUGx1Z2lucyhjb25maWcpO1xuICAgIC8vIG9wdGlvbnMgPT09IGZhbHNlID0+IGFsbCBwbHVnaW5zIGFyZSBkaXNhYmxlZFxuICAgIHJldHVybiBvcHRpb25zID09PSBmYWxzZSAmJiAhYWxsID8gW10gOiBjcmVhdGVEZXNjcmlwdG9ycyhjaGFydCwgcGx1Z2lucywgb3B0aW9ucywgYWxsKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge0NoYXJ0fSBjaGFydFxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX25vdGlmeVN0YXRlQ2hhbmdlcyhjaGFydCkge1xuICAgIGNvbnN0IHByZXZpb3VzRGVzY3JpcHRvcnMgPSB0aGlzLl9vbGRDYWNoZSB8fCBbXTtcbiAgICBjb25zdCBkZXNjcmlwdG9ycyA9IHRoaXMuX2NhY2hlO1xuICAgIGNvbnN0IGRpZmYgPSAoYSwgYikgPT4gYS5maWx0ZXIoeCA9PiAhYi5zb21lKHkgPT4geC5wbHVnaW4uaWQgPT09IHkucGx1Z2luLmlkKSk7XG4gICAgdGhpcy5fbm90aWZ5KGRpZmYocHJldmlvdXNEZXNjcmlwdG9ycywgZGVzY3JpcHRvcnMpLCBjaGFydCwgJ3N0b3AnKTtcbiAgICB0aGlzLl9ub3RpZnkoZGlmZihkZXNjcmlwdG9ycywgcHJldmlvdXNEZXNjcmlwdG9ycyksIGNoYXJ0LCAnc3RhcnQnKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KCcuL2NvcmUuY29uZmlnLmpzJykuZGVmYXVsdH0gY29uZmlnXG4gKi9cbmZ1bmN0aW9uIGFsbFBsdWdpbnMoY29uZmlnKSB7XG4gIGNvbnN0IGxvY2FsSWRzID0ge307XG4gIGNvbnN0IHBsdWdpbnMgPSBbXTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHJlZ2lzdHJ5LnBsdWdpbnMuaXRlbXMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBwbHVnaW5zLnB1c2gocmVnaXN0cnkuZ2V0UGx1Z2luKGtleXNbaV0pKTtcbiAgfVxuXG4gIGNvbnN0IGxvY2FsID0gY29uZmlnLnBsdWdpbnMgfHwgW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWwubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwbHVnaW4gPSBsb2NhbFtpXTtcblxuICAgIGlmIChwbHVnaW5zLmluZGV4T2YocGx1Z2luKSA9PT0gLTEpIHtcbiAgICAgIHBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgbG9jYWxJZHNbcGx1Z2luLmlkXSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtwbHVnaW5zLCBsb2NhbElkc307XG59XG5cbmZ1bmN0aW9uIGdldE9wdHMob3B0aW9ucywgYWxsKSB7XG4gIGlmICghYWxsICYmIG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKG9wdGlvbnMgPT09IHRydWUpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlc2NyaXB0b3JzKGNoYXJ0LCB7cGx1Z2lucywgbG9jYWxJZHN9LCBvcHRpb25zLCBhbGwpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGNvbnN0IGNvbnRleHQgPSBjaGFydC5nZXRDb250ZXh0KCk7XG5cbiAgZm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykge1xuICAgIGNvbnN0IGlkID0gcGx1Z2luLmlkO1xuICAgIGNvbnN0IG9wdHMgPSBnZXRPcHRzKG9wdGlvbnNbaWRdLCBhbGwpO1xuICAgIGlmIChvcHRzID09PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgcGx1Z2luLFxuICAgICAgb3B0aW9uczogcGx1Z2luT3B0cyhjaGFydC5jb25maWcsIHtwbHVnaW4sIGxvY2FsOiBsb2NhbElkc1tpZF19LCBvcHRzLCBjb250ZXh0KVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcGx1Z2luT3B0cyhjb25maWcsIHtwbHVnaW4sIGxvY2FsfSwgb3B0cywgY29udGV4dCkge1xuICBjb25zdCBrZXlzID0gY29uZmlnLnBsdWdpblNjb3BlS2V5cyhwbHVnaW4pO1xuICBjb25zdCBzY29wZXMgPSBjb25maWcuZ2V0T3B0aW9uU2NvcGVzKG9wdHMsIGtleXMpO1xuICBpZiAobG9jYWwgJiYgcGx1Z2luLmRlZmF1bHRzKSB7XG4gICAgLy8gbWFrZSBzdXJlIHBsdWdpbiBkZWZhdWx0cyBhcmUgaW4gc2NvcGVzIGZvciBsb2NhbCAobm90IHJlZ2lzdGVyZWQpIHBsdWdpbnNcbiAgICBzY29wZXMucHVzaChwbHVnaW4uZGVmYXVsdHMpO1xuICB9XG4gIHJldHVybiBjb25maWcuY3JlYXRlUmVzb2x2ZXIoc2NvcGVzLCBjb250ZXh0LCBbJyddLCB7XG4gICAgLy8gVGhlc2UgYXJlIGp1c3QgZGVmYXVsdHMgdGhhdCBwbHVnaW5zIGNhbiBvdmVycmlkZVxuICAgIHNjcmlwdGFibGU6IGZhbHNlLFxuICAgIGluZGV4YWJsZTogZmFsc2UsXG4gICAgYWxsS2V5czogdHJ1ZVxuICB9KTtcbn1cbiIsICJpbXBvcnQgZGVmYXVsdHMsIHtvdmVycmlkZXMsIGRlc2NyaXB0b3JzfSBmcm9tICcuL2NvcmUuZGVmYXVsdHMuanMnO1xuaW1wb3J0IHttZXJnZUlmLCByZXNvbHZlT2JqZWN0S2V5LCBpc0FycmF5LCBpc0Z1bmN0aW9uLCB2YWx1ZU9yRGVmYXVsdCwgaXNPYmplY3R9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCB7X2F0dGFjaENvbnRleHQsIF9jcmVhdGVSZXNvbHZlciwgX2Rlc2NyaXB0b3JzfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29uZmlnLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEluZGV4QXhpcyh0eXBlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRhdGFzZXREZWZhdWx0cyA9IGRlZmF1bHRzLmRhdGFzZXRzW3R5cGVdIHx8IHt9O1xuICBjb25zdCBkYXRhc2V0T3B0aW9ucyA9IChvcHRpb25zLmRhdGFzZXRzIHx8IHt9KVt0eXBlXSB8fCB7fTtcbiAgcmV0dXJuIGRhdGFzZXRPcHRpb25zLmluZGV4QXhpcyB8fCBvcHRpb25zLmluZGV4QXhpcyB8fCBkYXRhc2V0RGVmYXVsdHMuaW5kZXhBeGlzIHx8ICd4Jztcbn1cblxuZnVuY3Rpb24gZ2V0QXhpc0Zyb21EZWZhdWx0U2NhbGVJRChpZCwgaW5kZXhBeGlzKSB7XG4gIGxldCBheGlzID0gaWQ7XG4gIGlmIChpZCA9PT0gJ19pbmRleF8nKSB7XG4gICAgYXhpcyA9IGluZGV4QXhpcztcbiAgfSBlbHNlIGlmIChpZCA9PT0gJ192YWx1ZV8nKSB7XG4gICAgYXhpcyA9IGluZGV4QXhpcyA9PT0gJ3gnID8gJ3knIDogJ3gnO1xuICB9XG4gIHJldHVybiBheGlzO1xufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0U2NhbGVJREZyb21BeGlzKGF4aXMsIGluZGV4QXhpcykge1xuICByZXR1cm4gYXhpcyA9PT0gaW5kZXhBeGlzID8gJ19pbmRleF8nIDogJ192YWx1ZV8nO1xufVxuXG5mdW5jdGlvbiBpZE1hdGNoZXNBeGlzKGlkKSB7XG4gIGlmIChpZCA9PT0gJ3gnIHx8IGlkID09PSAneScgfHwgaWQgPT09ICdyJykge1xuICAgIHJldHVybiBpZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBheGlzRnJvbVBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gIGlmIChwb3NpdGlvbiA9PT0gJ3RvcCcgfHwgcG9zaXRpb24gPT09ICdib3R0b20nKSB7XG4gICAgcmV0dXJuICd4JztcbiAgfVxuICBpZiAocG9zaXRpb24gPT09ICdsZWZ0JyB8fCBwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgIHJldHVybiAneSc7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluZUF4aXMoaWQsIC4uLnNjYWxlT3B0aW9ucykge1xuICBpZiAoaWRNYXRjaGVzQXhpcyhpZCkpIHtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgZm9yIChjb25zdCBvcHRzIG9mIHNjYWxlT3B0aW9ucykge1xuICAgIGNvbnN0IGF4aXMgPSBvcHRzLmF4aXNcbiAgICAgIHx8IGF4aXNGcm9tUG9zaXRpb24ob3B0cy5wb3NpdGlvbilcbiAgICAgIHx8IGlkLmxlbmd0aCA+IDEgJiYgaWRNYXRjaGVzQXhpcyhpZFswXS50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAoYXhpcykge1xuICAgICAgcmV0dXJuIGF4aXM7XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGRldGVybWluZSB0eXBlIG9mICcke2lkfScgYXhpcy4gUGxlYXNlIHByb3ZpZGUgJ2F4aXMnIG9yICdwb3NpdGlvbicgb3B0aW9uLmApO1xufVxuXG5mdW5jdGlvbiBnZXRBeGlzRnJvbURhdGFzZXQoaWQsIGF4aXMsIGRhdGFzZXQpIHtcbiAgaWYgKGRhdGFzZXRbYXhpcyArICdBeGlzSUQnXSA9PT0gaWQpIHtcbiAgICByZXR1cm4ge2F4aXN9O1xuICB9XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlQXhpc0Zyb21EYXRhc2V0cyhpZCwgY29uZmlnKSB7XG4gIGlmIChjb25maWcuZGF0YSAmJiBjb25maWcuZGF0YS5kYXRhc2V0cykge1xuICAgIGNvbnN0IGJvdW5kRHMgPSBjb25maWcuZGF0YS5kYXRhc2V0cy5maWx0ZXIoKGQpID0+IGQueEF4aXNJRCA9PT0gaWQgfHwgZC55QXhpc0lEID09PSBpZCk7XG4gICAgaWYgKGJvdW5kRHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZ2V0QXhpc0Zyb21EYXRhc2V0KGlkLCAneCcsIGJvdW5kRHNbMF0pIHx8IGdldEF4aXNGcm9tRGF0YXNldChpZCwgJ3knLCBib3VuZERzWzBdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHt9O1xufVxuXG5mdW5jdGlvbiBtZXJnZVNjYWxlQ29uZmlnKGNvbmZpZywgb3B0aW9ucykge1xuICBjb25zdCBjaGFydERlZmF1bHRzID0gb3ZlcnJpZGVzW2NvbmZpZy50eXBlXSB8fCB7c2NhbGVzOiB7fX07XG4gIGNvbnN0IGNvbmZpZ1NjYWxlcyA9IG9wdGlvbnMuc2NhbGVzIHx8IHt9O1xuICBjb25zdCBjaGFydEluZGV4QXhpcyA9IGdldEluZGV4QXhpcyhjb25maWcudHlwZSwgb3B0aW9ucyk7XG4gIGNvbnN0IHNjYWxlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy8gRmlyc3QgZmlndXJlIG91dCBmaXJzdCBzY2FsZSBpZCdzIHBlciBheGlzLlxuICBPYmplY3Qua2V5cyhjb25maWdTY2FsZXMpLmZvckVhY2goaWQgPT4ge1xuICAgIGNvbnN0IHNjYWxlQ29uZiA9IGNvbmZpZ1NjYWxlc1tpZF07XG4gICAgaWYgKCFpc09iamVjdChzY2FsZUNvbmYpKSB7XG4gICAgICByZXR1cm4gY29uc29sZS5lcnJvcihgSW52YWxpZCBzY2FsZSBjb25maWd1cmF0aW9uIGZvciBzY2FsZTogJHtpZH1gKTtcbiAgICB9XG4gICAgaWYgKHNjYWxlQ29uZi5fcHJveHkpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLndhcm4oYElnbm9yaW5nIHJlc29sdmVyIHBhc3NlZCBhcyBvcHRpb25zIGZvciBzY2FsZTogJHtpZH1gKTtcbiAgICB9XG4gICAgY29uc3QgYXhpcyA9IGRldGVybWluZUF4aXMoaWQsIHNjYWxlQ29uZiwgcmV0cmlldmVBeGlzRnJvbURhdGFzZXRzKGlkLCBjb25maWcpLCBkZWZhdWx0cy5zY2FsZXNbc2NhbGVDb25mLnR5cGVdKTtcbiAgICBjb25zdCBkZWZhdWx0SWQgPSBnZXREZWZhdWx0U2NhbGVJREZyb21BeGlzKGF4aXMsIGNoYXJ0SW5kZXhBeGlzKTtcbiAgICBjb25zdCBkZWZhdWx0U2NhbGVPcHRpb25zID0gY2hhcnREZWZhdWx0cy5zY2FsZXMgfHwge307XG4gICAgc2NhbGVzW2lkXSA9IG1lcmdlSWYoT2JqZWN0LmNyZWF0ZShudWxsKSwgW3theGlzfSwgc2NhbGVDb25mLCBkZWZhdWx0U2NhbGVPcHRpb25zW2F4aXNdLCBkZWZhdWx0U2NhbGVPcHRpb25zW2RlZmF1bHRJZF1dKTtcbiAgfSk7XG5cbiAgLy8gVGhlbiBtZXJnZSBkYXRhc2V0IGRlZmF1bHRzIHRvIHNjYWxlIGNvbmZpZ3NcbiAgY29uZmlnLmRhdGEuZGF0YXNldHMuZm9yRWFjaChkYXRhc2V0ID0+IHtcbiAgICBjb25zdCB0eXBlID0gZGF0YXNldC50eXBlIHx8IGNvbmZpZy50eXBlO1xuICAgIGNvbnN0IGluZGV4QXhpcyA9IGRhdGFzZXQuaW5kZXhBeGlzIHx8IGdldEluZGV4QXhpcyh0eXBlLCBvcHRpb25zKTtcbiAgICBjb25zdCBkYXRhc2V0RGVmYXVsdHMgPSBvdmVycmlkZXNbdHlwZV0gfHwge307XG4gICAgY29uc3QgZGVmYXVsdFNjYWxlT3B0aW9ucyA9IGRhdGFzZXREZWZhdWx0cy5zY2FsZXMgfHwge307XG4gICAgT2JqZWN0LmtleXMoZGVmYXVsdFNjYWxlT3B0aW9ucykuZm9yRWFjaChkZWZhdWx0SUQgPT4ge1xuICAgICAgY29uc3QgYXhpcyA9IGdldEF4aXNGcm9tRGVmYXVsdFNjYWxlSUQoZGVmYXVsdElELCBpbmRleEF4aXMpO1xuICAgICAgY29uc3QgaWQgPSBkYXRhc2V0W2F4aXMgKyAnQXhpc0lEJ10gfHwgYXhpcztcbiAgICAgIHNjYWxlc1tpZF0gPSBzY2FsZXNbaWRdIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBtZXJnZUlmKHNjYWxlc1tpZF0sIFt7YXhpc30sIGNvbmZpZ1NjYWxlc1tpZF0sIGRlZmF1bHRTY2FsZU9wdGlvbnNbZGVmYXVsdElEXV0pO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBhcHBseSBzY2FsZSBkZWZhdWx0cywgaWYgbm90IG92ZXJyaWRkZW4gYnkgZGF0YXNldCBkZWZhdWx0c1xuICBPYmplY3Qua2V5cyhzY2FsZXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICBjb25zdCBzY2FsZSA9IHNjYWxlc1trZXldO1xuICAgIG1lcmdlSWYoc2NhbGUsIFtkZWZhdWx0cy5zY2FsZXNbc2NhbGUudHlwZV0sIGRlZmF1bHRzLnNjYWxlXSk7XG4gIH0pO1xuXG4gIHJldHVybiBzY2FsZXM7XG59XG5cbmZ1bmN0aW9uIGluaXRPcHRpb25zKGNvbmZpZykge1xuICBjb25zdCBvcHRpb25zID0gY29uZmlnLm9wdGlvbnMgfHwgKGNvbmZpZy5vcHRpb25zID0ge30pO1xuXG4gIG9wdGlvbnMucGx1Z2lucyA9IHZhbHVlT3JEZWZhdWx0KG9wdGlvbnMucGx1Z2lucywge30pO1xuICBvcHRpb25zLnNjYWxlcyA9IG1lcmdlU2NhbGVDb25maWcoY29uZmlnLCBvcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gaW5pdERhdGEoZGF0YSkge1xuICBkYXRhID0gZGF0YSB8fCB7fTtcbiAgZGF0YS5kYXRhc2V0cyA9IGRhdGEuZGF0YXNldHMgfHwgW107XG4gIGRhdGEubGFiZWxzID0gZGF0YS5sYWJlbHMgfHwgW107XG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBpbml0Q29uZmlnKGNvbmZpZykge1xuICBjb25maWcgPSBjb25maWcgfHwge307XG4gIGNvbmZpZy5kYXRhID0gaW5pdERhdGEoY29uZmlnLmRhdGEpO1xuXG4gIGluaXRPcHRpb25zKGNvbmZpZyk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuY29uc3Qga2V5Q2FjaGUgPSBuZXcgTWFwKCk7XG5jb25zdCBrZXlzQ2FjaGVkID0gbmV3IFNldCgpO1xuXG5mdW5jdGlvbiBjYWNoZWRLZXlzKGNhY2hlS2V5LCBnZW5lcmF0ZSkge1xuICBsZXQga2V5cyA9IGtleUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmICgha2V5cykge1xuICAgIGtleXMgPSBnZW5lcmF0ZSgpO1xuICAgIGtleUNhY2hlLnNldChjYWNoZUtleSwga2V5cyk7XG4gICAga2V5c0NhY2hlZC5hZGQoa2V5cyk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59XG5cbmNvbnN0IGFkZElmRm91bmQgPSAoc2V0LCBvYmosIGtleSkgPT4ge1xuICBjb25zdCBvcHRzID0gcmVzb2x2ZU9iamVjdEtleShvYmosIGtleSk7XG4gIGlmIChvcHRzICE9PSB1bmRlZmluZWQpIHtcbiAgICBzZXQuYWRkKG9wdHMpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25maWcge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLl9jb25maWcgPSBpbml0Q29uZmlnKGNvbmZpZyk7XG4gICAgdGhpcy5fc2NvcGVDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLl9yZXNvbHZlckNhY2hlID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgZ2V0IHBsYXRmb3JtKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25maWcucGxhdGZvcm07XG4gIH1cblxuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29uZmlnLnR5cGU7XG4gIH1cblxuICBzZXQgdHlwZSh0eXBlKSB7XG4gICAgdGhpcy5fY29uZmlnLnR5cGUgPSB0eXBlO1xuICB9XG5cbiAgZ2V0IGRhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5kYXRhO1xuICB9XG5cbiAgc2V0IGRhdGEoZGF0YSkge1xuICAgIHRoaXMuX2NvbmZpZy5kYXRhID0gaW5pdERhdGEoZGF0YSk7XG4gIH1cblxuICBnZXQgb3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fY29uZmlnLm9wdGlvbnM7XG4gIH1cblxuICBzZXQgb3B0aW9ucyhvcHRpb25zKSB7XG4gICAgdGhpcy5fY29uZmlnLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgZ2V0IHBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5wbHVnaW5zO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuX2NvbmZpZztcbiAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcbiAgICBpbml0T3B0aW9ucyhjb25maWcpO1xuICB9XG5cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLl9zY29wZUNhY2hlLmNsZWFyKCk7XG4gICAgdGhpcy5fcmVzb2x2ZXJDYWNoZS5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9wdGlvbiBzY29wZSBrZXlzIGZvciByZXNvbHZpbmcgZGF0YXNldCBvcHRpb25zLlxuICAgKiBUaGVzZSBrZXlzIGRvIG5vdCBpbmNsdWRlIHRoZSBkYXRhc2V0IGl0c2VsZiwgYmVjYXVzZSBpdCBpcyBub3QgdW5kZXIgb3B0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFzZXRUeXBlXG4gICAqIEByZXR1cm4ge3N0cmluZ1tdW119XG4gICAqL1xuICBkYXRhc2V0U2NvcGVLZXlzKGRhdGFzZXRUeXBlKSB7XG4gICAgcmV0dXJuIGNhY2hlZEtleXMoZGF0YXNldFR5cGUsXG4gICAgICAoKSA9PiBbW1xuICAgICAgICBgZGF0YXNldHMuJHtkYXRhc2V0VHlwZX1gLFxuICAgICAgICAnJ1xuICAgICAgXV0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9wdGlvbiBzY29wZSBrZXlzIGZvciByZXNvbHZpbmcgZGF0YXNldCBhbmltYXRpb24gb3B0aW9ucy5cbiAgICogVGhlc2Uga2V5cyBkbyBub3QgaW5jbHVkZSB0aGUgZGF0YXNldCBpdHNlbGYsIGJlY2F1c2UgaXQgaXMgbm90IHVuZGVyIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhc2V0VHlwZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNpdGlvblxuICAgKiBAcmV0dXJuIHtzdHJpbmdbXVtdfVxuICAgKi9cbiAgZGF0YXNldEFuaW1hdGlvblNjb3BlS2V5cyhkYXRhc2V0VHlwZSwgdHJhbnNpdGlvbikge1xuICAgIHJldHVybiBjYWNoZWRLZXlzKGAke2RhdGFzZXRUeXBlfS50cmFuc2l0aW9uLiR7dHJhbnNpdGlvbn1gLFxuICAgICAgKCkgPT4gW1xuICAgICAgICBbXG4gICAgICAgICAgYGRhdGFzZXRzLiR7ZGF0YXNldFR5cGV9LnRyYW5zaXRpb25zLiR7dHJhbnNpdGlvbn1gLFxuICAgICAgICAgIGB0cmFuc2l0aW9ucy4ke3RyYW5zaXRpb259YCxcbiAgICAgICAgXSxcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmUgdXNlZCBmb3IgbG9va2luZyB1cCB0aGUgYGFuaW1hdGlvbnNgIGFuZCBgYW5pbWF0aW9uYCBrZXlzXG4gICAgICAgIFtcbiAgICAgICAgICBgZGF0YXNldHMuJHtkYXRhc2V0VHlwZX1gLFxuICAgICAgICAgICcnXG4gICAgICAgIF1cbiAgICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9wdGlvbnMgc2NvcGUga2V5cyBmb3IgcmVzb2x2aW5nIGVsZW1lbnQgb3B0aW9ucyB0aGF0IGJlbG9uZ1xuICAgKiB0byBhbiBkYXRhc2V0LiBUaGVzZSBrZXlzIGRvIG5vdCBpbmNsdWRlIHRoZSBkYXRhc2V0IGl0c2VsZiwgYmVjYXVzZSBpdFxuICAgKiBpcyBub3QgdW5kZXIgb3B0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFzZXRUeXBlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50VHlwZVxuICAgKiBAcmV0dXJuIHtzdHJpbmdbXVtdfVxuICAgKi9cbiAgZGF0YXNldEVsZW1lbnRTY29wZUtleXMoZGF0YXNldFR5cGUsIGVsZW1lbnRUeXBlKSB7XG4gICAgcmV0dXJuIGNhY2hlZEtleXMoYCR7ZGF0YXNldFR5cGV9LSR7ZWxlbWVudFR5cGV9YCxcbiAgICAgICgpID0+IFtbXG4gICAgICAgIGBkYXRhc2V0cy4ke2RhdGFzZXRUeXBlfS5lbGVtZW50cy4ke2VsZW1lbnRUeXBlfWAsXG4gICAgICAgIGBkYXRhc2V0cy4ke2RhdGFzZXRUeXBlfWAsXG4gICAgICAgIGBlbGVtZW50cy4ke2VsZW1lbnRUeXBlfWAsXG4gICAgICAgICcnXG4gICAgICBdXSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb3B0aW9ucyBzY29wZSBrZXlzIGZvciByZXNvbHZpbmcgcGx1Z2luIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7e2lkOiBzdHJpbmcsIGFkZGl0aW9uYWxPcHRpb25TY29wZXM/OiBzdHJpbmdbXX19IHBsdWdpblxuICAgKiBAcmV0dXJuIHtzdHJpbmdbXVtdfVxuICAgKi9cbiAgcGx1Z2luU2NvcGVLZXlzKHBsdWdpbikge1xuICAgIGNvbnN0IGlkID0gcGx1Z2luLmlkO1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLnR5cGU7XG4gICAgcmV0dXJuIGNhY2hlZEtleXMoYCR7dHlwZX0tcGx1Z2luLSR7aWR9YCxcbiAgICAgICgpID0+IFtbXG4gICAgICAgIGBwbHVnaW5zLiR7aWR9YCxcbiAgICAgICAgLi4ucGx1Z2luLmFkZGl0aW9uYWxPcHRpb25TY29wZXMgfHwgW10sXG4gICAgICBdXSk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jYWNoZWRTY29wZXMobWFpblNjb3BlLCByZXNldENhY2hlKSB7XG4gICAgY29uc3QgX3Njb3BlQ2FjaGUgPSB0aGlzLl9zY29wZUNhY2hlO1xuICAgIGxldCBjYWNoZSA9IF9zY29wZUNhY2hlLmdldChtYWluU2NvcGUpO1xuICAgIGlmICghY2FjaGUgfHwgcmVzZXRDYWNoZSkge1xuICAgICAgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICBfc2NvcGVDYWNoZS5zZXQobWFpblNjb3BlLCBjYWNoZSk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlcyB0aGUgb2JqZWN0cyBmcm9tIG9wdGlvbnMgYW5kIGRlZmF1bHRzIGZvciBvcHRpb24gdmFsdWUgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtvYmplY3R9IG1haW5TY29wZSAtIFRoZSBtYWluIHNjb3BlIG9iamVjdCBmb3Igb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ1tdW119IGtleUxpc3RzIC0gVGhlIGFycmF5cyBvZiBrZXlzIGluIHJlc29sdXRpb24gb3JkZXJcbiAgICogQHBhcmFtIHtib29sZWFufSBbcmVzZXRDYWNoZV0gLSByZXNldCB0aGUgY2FjaGUgZm9yIHRoaXMgbWFpblNjb3BlXG4gICAqL1xuICBnZXRPcHRpb25TY29wZXMobWFpblNjb3BlLCBrZXlMaXN0cywgcmVzZXRDYWNoZSkge1xuICAgIGNvbnN0IHtvcHRpb25zLCB0eXBlfSA9IHRoaXM7XG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLl9jYWNoZWRTY29wZXMobWFpblNjb3BlLCByZXNldENhY2hlKTtcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoa2V5TGlzdHMpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuXG4gICAgY29uc3Qgc2NvcGVzID0gbmV3IFNldCgpO1xuXG4gICAga2V5TGlzdHMuZm9yRWFjaChrZXlzID0+IHtcbiAgICAgIGlmIChtYWluU2NvcGUpIHtcbiAgICAgICAgc2NvcGVzLmFkZChtYWluU2NvcGUpO1xuICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IGFkZElmRm91bmQoc2NvcGVzLCBtYWluU2NvcGUsIGtleSkpO1xuICAgICAgfVxuICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiBhZGRJZkZvdW5kKHNjb3Blcywgb3B0aW9ucywga2V5KSk7XG4gICAgICBrZXlzLmZvckVhY2goa2V5ID0+IGFkZElmRm91bmQoc2NvcGVzLCBvdmVycmlkZXNbdHlwZV0gfHwge30sIGtleSkpO1xuICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiBhZGRJZkZvdW5kKHNjb3BlcywgZGVmYXVsdHMsIGtleSkpO1xuICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiBhZGRJZkZvdW5kKHNjb3BlcywgZGVzY3JpcHRvcnMsIGtleSkpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYXJyYXkgPSBBcnJheS5mcm9tKHNjb3Blcyk7XG4gICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXJyYXkucHVzaChPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICB9XG4gICAgaWYgKGtleXNDYWNoZWQuaGFzKGtleUxpc3RzKSkge1xuICAgICAgY2FjaGUuc2V0KGtleUxpc3RzLCBhcnJheSk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvcHRpb24gc2NvcGVzIGZvciByZXNvbHZpbmcgY2hhcnQgb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtvYmplY3RbXX1cbiAgICovXG4gIGNoYXJ0T3B0aW9uU2NvcGVzKCkge1xuICAgIGNvbnN0IHtvcHRpb25zLCB0eXBlfSA9IHRoaXM7XG5cbiAgICByZXR1cm4gW1xuICAgICAgb3B0aW9ucyxcbiAgICAgIG92ZXJyaWRlc1t0eXBlXSB8fCB7fSxcbiAgICAgIGRlZmF1bHRzLmRhdGFzZXRzW3R5cGVdIHx8IHt9LCAvLyBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvODUzMVxuICAgICAge3R5cGV9LFxuICAgICAgZGVmYXVsdHMsXG4gICAgICBkZXNjcmlwdG9yc1xuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3RbXX0gc2NvcGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IG5hbWVzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb258b2JqZWN0fSBjb250ZXh0XG4gICAqIEBwYXJhbSB7c3RyaW5nW119IFtwcmVmaXhlc11cbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKi9cbiAgcmVzb2x2ZU5hbWVkT3B0aW9ucyhzY29wZXMsIG5hbWVzLCBjb250ZXh0LCBwcmVmaXhlcyA9IFsnJ10pIHtcbiAgICBjb25zdCByZXN1bHQgPSB7JHNoYXJlZDogdHJ1ZX07XG4gICAgY29uc3Qge3Jlc29sdmVyLCBzdWJQcmVmaXhlc30gPSBnZXRSZXNvbHZlcih0aGlzLl9yZXNvbHZlckNhY2hlLCBzY29wZXMsIHByZWZpeGVzKTtcbiAgICBsZXQgb3B0aW9ucyA9IHJlc29sdmVyO1xuICAgIGlmIChuZWVkQ29udGV4dChyZXNvbHZlciwgbmFtZXMpKSB7XG4gICAgICByZXN1bHQuJHNoYXJlZCA9IGZhbHNlO1xuICAgICAgY29udGV4dCA9IGlzRnVuY3Rpb24oY29udGV4dCkgPyBjb250ZXh0KCkgOiBjb250ZXh0O1xuICAgICAgLy8gc3ViUmVzb2x2ZXIgaXMgcGFzc2VkIHRvIHNjcmlwdGFibGUgb3B0aW9ucy4gSXQgc2hvdWxkIG5vdCByZXNvbHZlIHRvIGhvdmVyIG9wdGlvbnMuXG4gICAgICBjb25zdCBzdWJSZXNvbHZlciA9IHRoaXMuY3JlYXRlUmVzb2x2ZXIoc2NvcGVzLCBjb250ZXh0LCBzdWJQcmVmaXhlcyk7XG4gICAgICBvcHRpb25zID0gX2F0dGFjaENvbnRleHQocmVzb2x2ZXIsIGNvbnRleHQsIHN1YlJlc29sdmVyKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgbmFtZXMpIHtcbiAgICAgIHJlc3VsdFtwcm9wXSA9IG9wdGlvbnNbcHJvcF07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3RbXX0gc2NvcGVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbY29udGV4dF1cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3ByZWZpeGVzXVxuICAgKiBAcGFyYW0ge3tzY3JpcHRhYmxlOiBib29sZWFuLCBpbmRleGFibGU6IGJvb2xlYW4sIGFsbEtleXM/OiBib29sZWFufX0gW2Rlc2NyaXB0b3JEZWZhdWx0c11cbiAgICovXG4gIGNyZWF0ZVJlc29sdmVyKHNjb3BlcywgY29udGV4dCwgcHJlZml4ZXMgPSBbJyddLCBkZXNjcmlwdG9yRGVmYXVsdHMpIHtcbiAgICBjb25zdCB7cmVzb2x2ZXJ9ID0gZ2V0UmVzb2x2ZXIodGhpcy5fcmVzb2x2ZXJDYWNoZSwgc2NvcGVzLCBwcmVmaXhlcyk7XG4gICAgcmV0dXJuIGlzT2JqZWN0KGNvbnRleHQpXG4gICAgICA/IF9hdHRhY2hDb250ZXh0KHJlc29sdmVyLCBjb250ZXh0LCB1bmRlZmluZWQsIGRlc2NyaXB0b3JEZWZhdWx0cylcbiAgICAgIDogcmVzb2x2ZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UmVzb2x2ZXIocmVzb2x2ZXJDYWNoZSwgc2NvcGVzLCBwcmVmaXhlcykge1xuICBsZXQgY2FjaGUgPSByZXNvbHZlckNhY2hlLmdldChzY29wZXMpO1xuICBpZiAoIWNhY2hlKSB7XG4gICAgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgcmVzb2x2ZXJDYWNoZS5zZXQoc2NvcGVzLCBjYWNoZSk7XG4gIH1cbiAgY29uc3QgY2FjaGVLZXkgPSBwcmVmaXhlcy5qb2luKCk7XG4gIGxldCBjYWNoZWQgPSBjYWNoZS5nZXQoY2FjaGVLZXkpO1xuICBpZiAoIWNhY2hlZCkge1xuICAgIGNvbnN0IHJlc29sdmVyID0gX2NyZWF0ZVJlc29sdmVyKHNjb3BlcywgcHJlZml4ZXMpO1xuICAgIGNhY2hlZCA9IHtcbiAgICAgIHJlc29sdmVyLFxuICAgICAgc3ViUHJlZml4ZXM6IHByZWZpeGVzLmZpbHRlcihwID0+ICFwLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2hvdmVyJykpXG4gICAgfTtcbiAgICBjYWNoZS5zZXQoY2FjaGVLZXksIGNhY2hlZCk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuY29uc3QgaGFzRnVuY3Rpb24gPSB2YWx1ZSA9PiBpc09iamVjdCh2YWx1ZSlcbiAgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpLnJlZHVjZSgoYWNjLCBrZXkpID0+IGFjYyB8fCBpc0Z1bmN0aW9uKHZhbHVlW2tleV0pLCBmYWxzZSk7XG5cbmZ1bmN0aW9uIG5lZWRDb250ZXh0KHByb3h5LCBuYW1lcykge1xuICBjb25zdCB7aXNTY3JpcHRhYmxlLCBpc0luZGV4YWJsZX0gPSBfZGVzY3JpcHRvcnMocHJveHkpO1xuXG4gIGZvciAoY29uc3QgcHJvcCBvZiBuYW1lcykge1xuICAgIGNvbnN0IHNjcmlwdGFibGUgPSBpc1NjcmlwdGFibGUocHJvcCk7XG4gICAgY29uc3QgaW5kZXhhYmxlID0gaXNJbmRleGFibGUocHJvcCk7XG4gICAgY29uc3QgdmFsdWUgPSAoaW5kZXhhYmxlIHx8IHNjcmlwdGFibGUpICYmIHByb3h5W3Byb3BdO1xuICAgIGlmICgoc2NyaXB0YWJsZSAmJiAoaXNGdW5jdGlvbih2YWx1ZSkgfHwgaGFzRnVuY3Rpb24odmFsdWUpKSlcbiAgICAgIHx8IChpbmRleGFibGUgJiYgaXNBcnJheSh2YWx1ZSkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwgImltcG9ydCBhbmltYXRvciBmcm9tICcuL2NvcmUuYW5pbWF0b3IuanMnO1xuaW1wb3J0IGRlZmF1bHRzLCB7b3ZlcnJpZGVzfSBmcm9tICcuL2NvcmUuZGVmYXVsdHMuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uIGZyb20gJy4vY29yZS5pbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgbGF5b3V0cyBmcm9tICcuL2NvcmUubGF5b3V0cy5qcyc7XG5pbXBvcnQge19kZXRlY3RQbGF0Zm9ybX0gZnJvbSAnLi4vcGxhdGZvcm0vaW5kZXguanMnO1xuaW1wb3J0IFBsdWdpblNlcnZpY2UgZnJvbSAnLi9jb3JlLnBsdWdpbnMuanMnO1xuaW1wb3J0IHJlZ2lzdHJ5IGZyb20gJy4vY29yZS5yZWdpc3RyeS5qcyc7XG5pbXBvcnQgQ29uZmlnLCB7ZGV0ZXJtaW5lQXhpcywgZ2V0SW5kZXhBeGlzfSBmcm9tICcuL2NvcmUuY29uZmlnLmpzJztcbmltcG9ydCB7cmV0aW5hU2NhbGUsIF9pc0RvbVN1cHBvcnRlZH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmRvbS5qcyc7XG5pbXBvcnQge2VhY2gsIGNhbGxiYWNrIGFzIGNhbGxDYWxsYmFjaywgdWlkLCB2YWx1ZU9yRGVmYXVsdCwgX2VsZW1lbnRzRXF1YWwsIGlzTnVsbE9yVW5kZWYsIHNldHNFcXVhbCwgZGVmaW5lZCwgaXNGdW5jdGlvbiwgX2lzQ2xpY2tFdmVudH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvcmUuanMnO1xuaW1wb3J0IHtjbGVhckNhbnZhcywgY2xpcEFyZWEsIGNyZWF0ZUNvbnRleHQsIHVuY2xpcEFyZWEsIF9pc1BvaW50SW5BcmVhfSBmcm9tICcuLi9oZWxwZXJzL2luZGV4LmpzJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7dmVyc2lvbn0gZnJvbSAnLi4vLi4vcGFja2FnZS5qc29uJztcbmltcG9ydCB7ZGVib3VuY2V9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5leHRyYXMuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi90eXBlcy9pbmRleC5qcycpLkNoYXJ0RXZlbnQgfSBDaGFydEV2ZW50XG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vdHlwZXMvaW5kZXguanMnKS5Qb2ludCB9IFBvaW50XG4gKi9cblxuY29uc3QgS05PV05fUE9TSVRJT05TID0gWyd0b3AnLCAnYm90dG9tJywgJ2xlZnQnLCAncmlnaHQnLCAnY2hhcnRBcmVhJ107XG5mdW5jdGlvbiBwb3NpdGlvbklzSG9yaXpvbnRhbChwb3NpdGlvbiwgYXhpcykge1xuICByZXR1cm4gcG9zaXRpb24gPT09ICd0b3AnIHx8IHBvc2l0aW9uID09PSAnYm90dG9tJyB8fCAoS05PV05fUE9TSVRJT05TLmluZGV4T2YocG9zaXRpb24pID09PSAtMSAmJiBheGlzID09PSAneCcpO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlMkxldmVsKGwxLCBsMikge1xuICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhW2wxXSA9PT0gYltsMV1cbiAgICAgID8gYVtsMl0gLSBiW2wyXVxuICAgICAgOiBhW2wxXSAtIGJbbDFdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbkFuaW1hdGlvbnNDb21wbGV0ZShjb250ZXh0KSB7XG4gIGNvbnN0IGNoYXJ0ID0gY29udGV4dC5jaGFydDtcbiAgY29uc3QgYW5pbWF0aW9uT3B0aW9ucyA9IGNoYXJ0Lm9wdGlvbnMuYW5pbWF0aW9uO1xuXG4gIGNoYXJ0Lm5vdGlmeVBsdWdpbnMoJ2FmdGVyUmVuZGVyJyk7XG4gIGNhbGxDYWxsYmFjayhhbmltYXRpb25PcHRpb25zICYmIGFuaW1hdGlvbk9wdGlvbnMub25Db21wbGV0ZSwgW2NvbnRleHRdLCBjaGFydCk7XG59XG5cbmZ1bmN0aW9uIG9uQW5pbWF0aW9uUHJvZ3Jlc3MoY29udGV4dCkge1xuICBjb25zdCBjaGFydCA9IGNvbnRleHQuY2hhcnQ7XG4gIGNvbnN0IGFuaW1hdGlvbk9wdGlvbnMgPSBjaGFydC5vcHRpb25zLmFuaW1hdGlvbjtcbiAgY2FsbENhbGxiYWNrKGFuaW1hdGlvbk9wdGlvbnMgJiYgYW5pbWF0aW9uT3B0aW9ucy5vblByb2dyZXNzLCBbY29udGV4dF0sIGNoYXJ0KTtcbn1cblxuLyoqXG4gKiBDaGFydC5qcyBjYW4gdGFrZSBhIHN0cmluZyBpZCBvZiBhIGNhbnZhcyBlbGVtZW50LCBhIDJkIGNvbnRleHQsIG9yIGEgY2FudmFzIGVsZW1lbnQgaXRzZWxmLlxuICogQXR0ZW1wdCB0byB1bndyYXAgdGhlIGl0ZW0gcGFzc2VkIGludG8gdGhlIGNoYXJ0IGNvbnN0cnVjdG9yIHNvIHRoYXQgaXQgaXMgYSBjYW52YXMgZWxlbWVudCAoaWYgcG9zc2libGUpLlxuICovXG5mdW5jdGlvbiBnZXRDYW52YXMoaXRlbSkge1xuICBpZiAoX2lzRG9tU3VwcG9ydGVkKCkgJiYgdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgaXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0pO1xuICB9IGVsc2UgaWYgKGl0ZW0gJiYgaXRlbS5sZW5ndGgpIHtcbiAgICAvLyBTdXBwb3J0IGZvciBhcnJheSBiYXNlZCBxdWVyaWVzIChzdWNoIGFzIGpRdWVyeSlcbiAgICBpdGVtID0gaXRlbVswXTtcbiAgfVxuXG4gIGlmIChpdGVtICYmIGl0ZW0uY2FudmFzKSB7XG4gICAgLy8gU3VwcG9ydCBmb3IgYW55IG9iamVjdCBhc3NvY2lhdGVkIHRvIGEgY2FudmFzIChpbmNsdWRpbmcgYSBjb250ZXh0MmQpXG4gICAgaXRlbSA9IGl0ZW0uY2FudmFzO1xuICB9XG4gIHJldHVybiBpdGVtO1xufVxuXG5jb25zdCBpbnN0YW5jZXMgPSB7fTtcbmNvbnN0IGdldENoYXJ0ID0gKGtleSkgPT4ge1xuICBjb25zdCBjYW52YXMgPSBnZXRDYW52YXMoa2V5KTtcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXMoaW5zdGFuY2VzKS5maWx0ZXIoKGMpID0+IGMuY2FudmFzID09PSBjYW52YXMpLnBvcCgpO1xufTtcblxuZnVuY3Rpb24gbW92ZU51bWVyaWNLZXlzKG9iaiwgc3RhcnQsIG1vdmUpIHtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICBjb25zdCBpbnRLZXkgPSAra2V5O1xuICAgIGlmIChpbnRLZXkgPj0gc3RhcnQpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gb2JqW2tleV07XG4gICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICBpZiAobW92ZSA+IDAgfHwgaW50S2V5ID4gc3RhcnQpIHtcbiAgICAgICAgb2JqW2ludEtleSArIG1vdmVdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtDaGFydEV2ZW50fSBlXG4gKiBAcGFyYW0ge0NoYXJ0RXZlbnR8bnVsbH0gbGFzdEV2ZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGluQ2hhcnRBcmVhXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzQ2xpY2tcbiAqIEByZXR1cm5zIHtDaGFydEV2ZW50fG51bGx9XG4gKi9cbmZ1bmN0aW9uIGRldGVybWluZUxhc3RFdmVudChlLCBsYXN0RXZlbnQsIGluQ2hhcnRBcmVhLCBpc0NsaWNrKSB7XG4gIGlmICghaW5DaGFydEFyZWEgfHwgZS50eXBlID09PSAnbW91c2VvdXQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGlzQ2xpY2spIHtcbiAgICByZXR1cm4gbGFzdEV2ZW50O1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhc2V0QXJlYShtZXRhKSB7XG4gIGNvbnN0IHt4U2NhbGUsIHlTY2FsZX0gPSBtZXRhO1xuICBpZiAoeFNjYWxlICYmIHlTY2FsZSkge1xuICAgIHJldHVybiB7XG4gICAgICBsZWZ0OiB4U2NhbGUubGVmdCxcbiAgICAgIHJpZ2h0OiB4U2NhbGUucmlnaHQsXG4gICAgICB0b3A6IHlTY2FsZS50b3AsXG4gICAgICBib3R0b206IHlTY2FsZS5ib3R0b21cbiAgICB9O1xuICB9XG59XG5cbmNsYXNzIENoYXJ0IHtcblxuICBzdGF0aWMgZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgc3RhdGljIGluc3RhbmNlcyA9IGluc3RhbmNlcztcbiAgc3RhdGljIG92ZXJyaWRlcyA9IG92ZXJyaWRlcztcbiAgc3RhdGljIHJlZ2lzdHJ5ID0gcmVnaXN0cnk7XG4gIHN0YXRpYyB2ZXJzaW9uID0gdmVyc2lvbjtcbiAgc3RhdGljIGdldENoYXJ0ID0gZ2V0Q2hhcnQ7XG5cbiAgc3RhdGljIHJlZ2lzdGVyKC4uLml0ZW1zKSB7XG4gICAgcmVnaXN0cnkuYWRkKC4uLml0ZW1zKTtcbiAgICBpbnZhbGlkYXRlUGx1Z2lucygpO1xuICB9XG5cbiAgc3RhdGljIHVucmVnaXN0ZXIoLi4uaXRlbXMpIHtcbiAgICByZWdpc3RyeS5yZW1vdmUoLi4uaXRlbXMpO1xuICAgIGludmFsaWRhdGVQbHVnaW5zKCk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LXN0YXRlbWVudHNcbiAgY29uc3RydWN0b3IoaXRlbSwgdXNlckNvbmZpZykge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY29uZmlnID0gbmV3IENvbmZpZyh1c2VyQ29uZmlnKTtcbiAgICBjb25zdCBpbml0aWFsQ2FudmFzID0gZ2V0Q2FudmFzKGl0ZW0pO1xuICAgIGNvbnN0IGV4aXN0aW5nQ2hhcnQgPSBnZXRDaGFydChpbml0aWFsQ2FudmFzKTtcbiAgICBpZiAoZXhpc3RpbmdDaGFydCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnQ2FudmFzIGlzIGFscmVhZHkgaW4gdXNlLiBDaGFydCB3aXRoIElEIFxcJycgKyBleGlzdGluZ0NoYXJ0LmlkICsgJ1xcJycgK1xuXHRcdFx0XHQnIG11c3QgYmUgZGVzdHJveWVkIGJlZm9yZSB0aGUgY2FudmFzIHdpdGggSUQgXFwnJyArIGV4aXN0aW5nQ2hhcnQuY2FudmFzLmlkICsgJ1xcJyBjYW4gYmUgcmV1c2VkLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbmZpZy5jcmVhdGVSZXNvbHZlcihjb25maWcuY2hhcnRPcHRpb25TY29wZXMoKSwgdGhpcy5nZXRDb250ZXh0KCkpO1xuXG4gICAgdGhpcy5wbGF0Zm9ybSA9IG5ldyAoY29uZmlnLnBsYXRmb3JtIHx8IF9kZXRlY3RQbGF0Zm9ybShpbml0aWFsQ2FudmFzKSkoKTtcbiAgICB0aGlzLnBsYXRmb3JtLnVwZGF0ZUNvbmZpZyhjb25maWcpO1xuXG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMucGxhdGZvcm0uYWNxdWlyZUNvbnRleHQoaW5pdGlhbENhbnZhcywgb3B0aW9ucy5hc3BlY3RSYXRpbyk7XG4gICAgY29uc3QgY2FudmFzID0gY29udGV4dCAmJiBjb250ZXh0LmNhbnZhcztcbiAgICBjb25zdCBoZWlnaHQgPSBjYW52YXMgJiYgY2FudmFzLmhlaWdodDtcbiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcyAmJiBjYW52YXMud2lkdGg7XG5cbiAgICB0aGlzLmlkID0gdWlkKCk7XG4gICAgdGhpcy5jdHggPSBjb250ZXh0O1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyBTdG9yZSB0aGUgcHJldmlvdXNseSB1c2VkIGFzcGVjdCByYXRpbyB0byBkZXRlcm1pbmUgaWYgYSByZXNpemVcbiAgICAvLyBpcyBuZWVkZWQgZHVyaW5nIHVwZGF0ZXMuIERvIHRoaXMgYWZ0ZXIgX29wdGlvbnMgaXMgc2V0IHNpbmNlXG4gICAgLy8gYXNwZWN0UmF0aW8gdXNlcyBhIGdldHRlclxuICAgIHRoaXMuX2FzcGVjdFJhdGlvID0gdGhpcy5hc3BlY3RSYXRpbztcbiAgICB0aGlzLl9sYXllcnMgPSBbXTtcbiAgICB0aGlzLl9tZXRhc2V0cyA9IFtdO1xuICAgIHRoaXMuX3N0YWNrcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmJveGVzID0gW107XG4gICAgdGhpcy5jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNoYXJ0QXJlYSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9hY3RpdmUgPSBbXTtcbiAgICB0aGlzLl9sYXN0RXZlbnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gICAgLyoqIEB0eXBlIHs/e2F0dGFjaD86IGZ1bmN0aW9uLCBkZXRhY2g/OiBmdW5jdGlvbiwgcmVzaXplPzogZnVuY3Rpb259fSAqL1xuICAgIHRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc29ydGVkTWV0YXNldHMgPSBbXTtcbiAgICB0aGlzLnNjYWxlcyA9IHt9O1xuICAgIHRoaXMuX3BsdWdpbnMgPSBuZXcgUGx1Z2luU2VydmljZSgpO1xuICAgIHRoaXMuJHByb3hpZXMgPSB7fTtcbiAgICB0aGlzLl9oaWRkZW5JbmRpY2VzID0ge307XG4gICAgdGhpcy5hdHRhY2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2FuaW1hdGlvbnNEaXNhYmxlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLiRjb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2RvUmVzaXplID0gZGVib3VuY2UobW9kZSA9PiB0aGlzLnVwZGF0ZShtb2RlKSwgb3B0aW9ucy5yZXNpemVEZWxheSB8fCAwKTtcbiAgICB0aGlzLl9kYXRhQ2hhbmdlcyA9IFtdO1xuXG4gICAgLy8gQWRkIHRoZSBjaGFydCBpbnN0YW5jZSB0byB0aGUgZ2xvYmFsIG5hbWVzcGFjZVxuICAgIGluc3RhbmNlc1t0aGlzLmlkXSA9IHRoaXM7XG5cbiAgICBpZiAoIWNvbnRleHQgfHwgIWNhbnZhcykge1xuICAgICAgLy8gVGhlIGdpdmVuIGl0ZW0gaXMgbm90IGEgY29tcGF0aWJsZSBjb250ZXh0MmQgZWxlbWVudCwgbGV0J3MgcmV0dXJuIGJlZm9yZSBmaW5hbGl6aW5nXG4gICAgICAvLyB0aGUgY2hhcnQgaW5pdGlhbGl6YXRpb24gYnV0IGFmdGVyIHNldHRpbmcgYmFzaWMgY2hhcnQgLyBjb250cm9sbGVyIHByb3BlcnRpZXMgdGhhdFxuICAgICAgLy8gY2FuIGhlbHAgdG8gZmlndXJlIG91dCB0aGF0IHRoZSBjaGFydCBpcyBub3QgdmFsaWQgKGUuZyBjaGFydC5jYW52YXMgIT09IG51bGwpO1xuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzI4MDdcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIGNoYXJ0OiBjYW4ndCBhY3F1aXJlIGNvbnRleHQgZnJvbSB0aGUgZ2l2ZW4gaXRlbVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhbmltYXRvci5saXN0ZW4odGhpcywgJ2NvbXBsZXRlJywgb25BbmltYXRpb25zQ29tcGxldGUpO1xuICAgIGFuaW1hdG9yLmxpc3Rlbih0aGlzLCAncHJvZ3Jlc3MnLCBvbkFuaW1hdGlvblByb2dyZXNzKTtcblxuICAgIHRoaXMuX2luaXRpYWxpemUoKTtcbiAgICBpZiAodGhpcy5hdHRhY2hlZCkge1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgYXNwZWN0UmF0aW8oKSB7XG4gICAgY29uc3Qge29wdGlvbnM6IHthc3BlY3RSYXRpbywgbWFpbnRhaW5Bc3BlY3RSYXRpb30sIHdpZHRoLCBoZWlnaHQsIF9hc3BlY3RSYXRpb30gPSB0aGlzO1xuICAgIGlmICghaXNOdWxsT3JVbmRlZihhc3BlY3RSYXRpbykpIHtcbiAgICAgIC8vIElmIGFzcGVjdFJhdGlvIGlzIGRlZmluZWQgaW4gb3B0aW9ucywgdXNlIHRoYXQuXG4gICAgICByZXR1cm4gYXNwZWN0UmF0aW87XG4gICAgfVxuXG4gICAgaWYgKG1haW50YWluQXNwZWN0UmF0aW8gJiYgX2FzcGVjdFJhdGlvKSB7XG4gICAgICAvLyBJZiBtYWludGFpbkFzcGVjdFJhdGlvIGlzIHRydXRobHkgYW5kIHdlIGhhZCBwcmV2aW91c2x5IGRldGVybWluZWQgX2FzcGVjdFJhdGlvLCB1c2UgdGhhdFxuICAgICAgcmV0dXJuIF9hc3BlY3RSYXRpbztcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGVcbiAgICByZXR1cm4gaGVpZ2h0ID8gd2lkdGggLyBoZWlnaHQgOiBudWxsO1xuICB9XG5cbiAgZ2V0IGRhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmRhdGE7XG4gIH1cblxuICBzZXQgZGF0YShkYXRhKSB7XG4gICAgdGhpcy5jb25maWcuZGF0YSA9IGRhdGE7XG4gIH1cblxuICBnZXQgb3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgfVxuXG4gIHNldCBvcHRpb25zKG9wdGlvbnMpIHtcbiAgICB0aGlzLmNvbmZpZy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIGdldCByZWdpc3RyeSgpIHtcbiAgICByZXR1cm4gcmVnaXN0cnk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9pbml0aWFsaXplKCkge1xuICAgIC8vIEJlZm9yZSBpbml0IHBsdWdpbiBub3RpZmljYXRpb25cbiAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZUluaXQnKTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZSkge1xuICAgICAgdGhpcy5yZXNpemUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0aW5hU2NhbGUodGhpcywgdGhpcy5vcHRpb25zLmRldmljZVBpeGVsUmF0aW8pO1xuICAgIH1cblxuICAgIHRoaXMuYmluZEV2ZW50cygpO1xuXG4gICAgLy8gQWZ0ZXIgaW5pdCBwbHVnaW4gbm90aWZpY2F0aW9uXG4gICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckluaXQnKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgY2xlYXJDYW52YXModGhpcy5jYW52YXMsIHRoaXMuY3R4KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgYW5pbWF0b3Iuc3RvcCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuXHQgKiBSZXNpemUgdGhlIGNoYXJ0IHRvIGl0cyBjb250YWluZXIgb3IgdG8gZXhwbGljaXQgZGltZW5zaW9ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aF1cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHRdXG5cdCAqL1xuICByZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgIGlmICghYW5pbWF0b3IucnVubmluZyh0aGlzKSkge1xuICAgICAgdGhpcy5fcmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXNpemVCZWZvcmVEcmF3ID0ge3dpZHRoLCBoZWlnaHR9O1xuICAgIH1cbiAgfVxuXG4gIF9yZXNpemUod2lkdGgsIGhlaWdodCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgY2FudmFzID0gdGhpcy5jYW52YXM7XG4gICAgY29uc3QgYXNwZWN0UmF0aW8gPSBvcHRpb25zLm1haW50YWluQXNwZWN0UmF0aW8gJiYgdGhpcy5hc3BlY3RSYXRpbztcbiAgICBjb25zdCBuZXdTaXplID0gdGhpcy5wbGF0Zm9ybS5nZXRNYXhpbXVtU2l6ZShjYW52YXMsIHdpZHRoLCBoZWlnaHQsIGFzcGVjdFJhdGlvKTtcbiAgICBjb25zdCBuZXdSYXRpbyA9IG9wdGlvbnMuZGV2aWNlUGl4ZWxSYXRpbyB8fCB0aGlzLnBsYXRmb3JtLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICBjb25zdCBtb2RlID0gdGhpcy53aWR0aCA/ICdyZXNpemUnIDogJ2F0dGFjaCc7XG5cbiAgICB0aGlzLndpZHRoID0gbmV3U2l6ZS53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IG5ld1NpemUuaGVpZ2h0O1xuICAgIHRoaXMuX2FzcGVjdFJhdGlvID0gdGhpcy5hc3BlY3RSYXRpbztcbiAgICBpZiAoIXJldGluYVNjYWxlKHRoaXMsIG5ld1JhdGlvLCB0cnVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubm90aWZ5UGx1Z2lucygncmVzaXplJywge3NpemU6IG5ld1NpemV9KTtcblxuICAgIGNhbGxDYWxsYmFjayhvcHRpb25zLm9uUmVzaXplLCBbdGhpcywgbmV3U2l6ZV0sIHRoaXMpO1xuXG4gICAgaWYgKHRoaXMuYXR0YWNoZWQpIHtcbiAgICAgIGlmICh0aGlzLl9kb1Jlc2l6ZShtb2RlKSkge1xuICAgICAgICAvLyBUaGUgcmVzaXplIHVwZGF0ZSBpcyBkZWxheWVkLCBvbmx5IGRyYXcgd2l0aG91dCB1cGRhdGluZy5cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBlbnN1cmVTY2FsZXNIYXZlSURzKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3Qgc2NhbGVzT3B0aW9ucyA9IG9wdGlvbnMuc2NhbGVzIHx8IHt9O1xuXG4gICAgZWFjaChzY2FsZXNPcHRpb25zLCAoYXhpc09wdGlvbnMsIGF4aXNJRCkgPT4ge1xuICAgICAgYXhpc09wdGlvbnMuaWQgPSBheGlzSUQ7XG4gICAgfSk7XG4gIH1cblxuICAvKipcblx0ICogQnVpbGRzIGEgbWFwIG9mIHNjYWxlIElEIHRvIHNjYWxlIG9iamVjdCBmb3IgZnV0dXJlIGxvb2t1cC5cblx0ICovXG4gIGJ1aWxkT3JVcGRhdGVTY2FsZXMoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBzY2FsZU9wdHMgPSBvcHRpb25zLnNjYWxlcztcbiAgICBjb25zdCBzY2FsZXMgPSB0aGlzLnNjYWxlcztcbiAgICBjb25zdCB1cGRhdGVkID0gT2JqZWN0LmtleXMoc2NhbGVzKS5yZWR1Y2UoKG9iaiwgaWQpID0+IHtcbiAgICAgIG9ialtpZF0gPSBmYWxzZTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSwge30pO1xuICAgIGxldCBpdGVtcyA9IFtdO1xuXG4gICAgaWYgKHNjYWxlT3B0cykge1xuICAgICAgaXRlbXMgPSBpdGVtcy5jb25jYXQoXG4gICAgICAgIE9iamVjdC5rZXlzKHNjYWxlT3B0cykubWFwKChpZCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNjYWxlT3B0aW9ucyA9IHNjYWxlT3B0c1tpZF07XG4gICAgICAgICAgY29uc3QgYXhpcyA9IGRldGVybWluZUF4aXMoaWQsIHNjYWxlT3B0aW9ucyk7XG4gICAgICAgICAgY29uc3QgaXNSYWRpYWwgPSBheGlzID09PSAncic7XG4gICAgICAgICAgY29uc3QgaXNIb3Jpem9udGFsID0gYXhpcyA9PT0gJ3gnO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiBzY2FsZU9wdGlvbnMsXG4gICAgICAgICAgICBkcG9zaXRpb246IGlzUmFkaWFsID8gJ2NoYXJ0QXJlYScgOiBpc0hvcml6b250YWwgPyAnYm90dG9tJyA6ICdsZWZ0JyxcbiAgICAgICAgICAgIGR0eXBlOiBpc1JhZGlhbCA/ICdyYWRpYWxMaW5lYXInIDogaXNIb3Jpem9udGFsID8gJ2NhdGVnb3J5JyA6ICdsaW5lYXInXG4gICAgICAgICAgfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZWFjaChpdGVtcywgKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHNjYWxlT3B0aW9ucyA9IGl0ZW0ub3B0aW9ucztcbiAgICAgIGNvbnN0IGlkID0gc2NhbGVPcHRpb25zLmlkO1xuICAgICAgY29uc3QgYXhpcyA9IGRldGVybWluZUF4aXMoaWQsIHNjYWxlT3B0aW9ucyk7XG4gICAgICBjb25zdCBzY2FsZVR5cGUgPSB2YWx1ZU9yRGVmYXVsdChzY2FsZU9wdGlvbnMudHlwZSwgaXRlbS5kdHlwZSk7XG5cbiAgICAgIGlmIChzY2FsZU9wdGlvbnMucG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBwb3NpdGlvbklzSG9yaXpvbnRhbChzY2FsZU9wdGlvbnMucG9zaXRpb24sIGF4aXMpICE9PSBwb3NpdGlvbklzSG9yaXpvbnRhbChpdGVtLmRwb3NpdGlvbikpIHtcbiAgICAgICAgc2NhbGVPcHRpb25zLnBvc2l0aW9uID0gaXRlbS5kcG9zaXRpb247XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZWRbaWRdID0gdHJ1ZTtcbiAgICAgIGxldCBzY2FsZSA9IG51bGw7XG4gICAgICBpZiAoaWQgaW4gc2NhbGVzICYmIHNjYWxlc1tpZF0udHlwZSA9PT0gc2NhbGVUeXBlKSB7XG4gICAgICAgIHNjYWxlID0gc2NhbGVzW2lkXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjYWxlQ2xhc3MgPSByZWdpc3RyeS5nZXRTY2FsZShzY2FsZVR5cGUpO1xuICAgICAgICBzY2FsZSA9IG5ldyBzY2FsZUNsYXNzKHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICB0eXBlOiBzY2FsZVR5cGUsXG4gICAgICAgICAgY3R4OiB0aGlzLmN0eCxcbiAgICAgICAgICBjaGFydDogdGhpc1xuICAgICAgICB9KTtcbiAgICAgICAgc2NhbGVzW3NjYWxlLmlkXSA9IHNjYWxlO1xuICAgICAgfVxuXG4gICAgICBzY2FsZS5pbml0KHNjYWxlT3B0aW9ucywgb3B0aW9ucyk7XG4gICAgfSk7XG4gICAgLy8gY2xlYXIgdXAgZGlzY2FyZGVkIHNjYWxlc1xuICAgIGVhY2godXBkYXRlZCwgKGhhc1VwZGF0ZWQsIGlkKSA9PiB7XG4gICAgICBpZiAoIWhhc1VwZGF0ZWQpIHtcbiAgICAgICAgZGVsZXRlIHNjYWxlc1tpZF07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBlYWNoKHNjYWxlcywgKHNjYWxlKSA9PiB7XG4gICAgICBsYXlvdXRzLmNvbmZpZ3VyZSh0aGlzLCBzY2FsZSwgc2NhbGUub3B0aW9ucyk7XG4gICAgICBsYXlvdXRzLmFkZEJveCh0aGlzLCBzY2FsZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF91cGRhdGVNZXRhc2V0cygpIHtcbiAgICBjb25zdCBtZXRhc2V0cyA9IHRoaXMuX21ldGFzZXRzO1xuICAgIGNvbnN0IG51bURhdGEgPSB0aGlzLmRhdGEuZGF0YXNldHMubGVuZ3RoO1xuICAgIGNvbnN0IG51bU1ldGEgPSBtZXRhc2V0cy5sZW5ndGg7XG5cbiAgICBtZXRhc2V0cy5zb3J0KChhLCBiKSA9PiBhLmluZGV4IC0gYi5pbmRleCk7XG4gICAgaWYgKG51bU1ldGEgPiBudW1EYXRhKSB7XG4gICAgICBmb3IgKGxldCBpID0gbnVtRGF0YTsgaSA8IG51bU1ldGE7ICsraSkge1xuICAgICAgICB0aGlzLl9kZXN0cm95RGF0YXNldE1ldGEoaSk7XG4gICAgICB9XG4gICAgICBtZXRhc2V0cy5zcGxpY2UobnVtRGF0YSwgbnVtTWV0YSAtIG51bURhdGEpO1xuICAgIH1cbiAgICB0aGlzLl9zb3J0ZWRNZXRhc2V0cyA9IG1ldGFzZXRzLnNsaWNlKDApLnNvcnQoY29tcGFyZTJMZXZlbCgnb3JkZXInLCAnaW5kZXgnKSk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9yZW1vdmVVbnJlZmVyZW5jZWRNZXRhc2V0cygpIHtcbiAgICBjb25zdCB7X21ldGFzZXRzOiBtZXRhc2V0cywgZGF0YToge2RhdGFzZXRzfX0gPSB0aGlzO1xuICAgIGlmIChtZXRhc2V0cy5sZW5ndGggPiBkYXRhc2V0cy5sZW5ndGgpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9zdGFja3M7XG4gICAgfVxuICAgIG1ldGFzZXRzLmZvckVhY2goKG1ldGEsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoZGF0YXNldHMuZmlsdGVyKHggPT4geCA9PT0gbWV0YS5fZGF0YXNldCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lEYXRhc2V0TWV0YShpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBidWlsZE9yVXBkYXRlQ29udHJvbGxlcnMoKSB7XG4gICAgY29uc3QgbmV3Q29udHJvbGxlcnMgPSBbXTtcbiAgICBjb25zdCBkYXRhc2V0cyA9IHRoaXMuZGF0YS5kYXRhc2V0cztcbiAgICBsZXQgaSwgaWxlbjtcblxuICAgIHRoaXMuX3JlbW92ZVVucmVmZXJlbmNlZE1ldGFzZXRzKCk7XG5cbiAgICBmb3IgKGkgPSAwLCBpbGVuID0gZGF0YXNldHMubGVuZ3RoOyBpIDwgaWxlbjsgaSsrKSB7XG4gICAgICBjb25zdCBkYXRhc2V0ID0gZGF0YXNldHNbaV07XG4gICAgICBsZXQgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoaSk7XG4gICAgICBjb25zdCB0eXBlID0gZGF0YXNldC50eXBlIHx8IHRoaXMuY29uZmlnLnR5cGU7XG5cbiAgICAgIGlmIChtZXRhLnR5cGUgJiYgbWV0YS50eXBlICE9PSB0eXBlKSB7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lEYXRhc2V0TWV0YShpKTtcbiAgICAgICAgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoaSk7XG4gICAgICB9XG4gICAgICBtZXRhLnR5cGUgPSB0eXBlO1xuICAgICAgbWV0YS5pbmRleEF4aXMgPSBkYXRhc2V0LmluZGV4QXhpcyB8fCBnZXRJbmRleEF4aXModHlwZSwgdGhpcy5vcHRpb25zKTtcbiAgICAgIG1ldGEub3JkZXIgPSBkYXRhc2V0Lm9yZGVyIHx8IDA7XG4gICAgICBtZXRhLmluZGV4ID0gaTtcbiAgICAgIG1ldGEubGFiZWwgPSAnJyArIGRhdGFzZXQubGFiZWw7XG4gICAgICBtZXRhLnZpc2libGUgPSB0aGlzLmlzRGF0YXNldFZpc2libGUoaSk7XG5cbiAgICAgIGlmIChtZXRhLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgbWV0YS5jb250cm9sbGVyLnVwZGF0ZUluZGV4KGkpO1xuICAgICAgICBtZXRhLmNvbnRyb2xsZXIubGlua1NjYWxlcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgQ29udHJvbGxlckNsYXNzID0gcmVnaXN0cnkuZ2V0Q29udHJvbGxlcih0eXBlKTtcbiAgICAgICAgY29uc3Qge2RhdGFzZXRFbGVtZW50VHlwZSwgZGF0YUVsZW1lbnRUeXBlfSA9IGRlZmF1bHRzLmRhdGFzZXRzW3R5cGVdO1xuICAgICAgICBPYmplY3QuYXNzaWduKENvbnRyb2xsZXJDbGFzcywge1xuICAgICAgICAgIGRhdGFFbGVtZW50VHlwZTogcmVnaXN0cnkuZ2V0RWxlbWVudChkYXRhRWxlbWVudFR5cGUpLFxuICAgICAgICAgIGRhdGFzZXRFbGVtZW50VHlwZTogZGF0YXNldEVsZW1lbnRUeXBlICYmIHJlZ2lzdHJ5LmdldEVsZW1lbnQoZGF0YXNldEVsZW1lbnRUeXBlKVxuICAgICAgICB9KTtcbiAgICAgICAgbWV0YS5jb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXJDbGFzcyh0aGlzLCBpKTtcbiAgICAgICAgbmV3Q29udHJvbGxlcnMucHVzaChtZXRhLmNvbnRyb2xsZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZU1ldGFzZXRzKCk7XG4gICAgcmV0dXJuIG5ld0NvbnRyb2xsZXJzO1xuICB9XG5cbiAgLyoqXG5cdCAqIFJlc2V0IHRoZSBlbGVtZW50cyBvZiBhbGwgZGF0YXNldHNcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9yZXNldEVsZW1lbnRzKCkge1xuICAgIGVhY2godGhpcy5kYXRhLmRhdGFzZXRzLCAoZGF0YXNldCwgZGF0YXNldEluZGV4KSA9PiB7XG4gICAgICB0aGlzLmdldERhdGFzZXRNZXRhKGRhdGFzZXRJbmRleCkuY29udHJvbGxlci5yZXNldCgpO1xuICAgIH0sIHRoaXMpO1xuICB9XG5cbiAgLyoqXG5cdCogUmVzZXRzIHRoZSBjaGFydCBiYWNrIHRvIGl0cyBzdGF0ZSBiZWZvcmUgdGhlIGluaXRpYWwgYW5pbWF0aW9uXG5cdCovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuX3Jlc2V0RWxlbWVudHMoKTtcbiAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ3Jlc2V0Jyk7XG4gIH1cblxuICB1cGRhdGUobW9kZSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY29uZmlnO1xuXG4gICAgY29uZmlnLnVwZGF0ZSgpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9vcHRpb25zID0gY29uZmlnLmNyZWF0ZVJlc29sdmVyKGNvbmZpZy5jaGFydE9wdGlvblNjb3BlcygpLCB0aGlzLmdldENvbnRleHQoKSk7XG4gICAgY29uc3QgYW5pbXNEaXNhYmxlZCA9IHRoaXMuX2FuaW1hdGlvbnNEaXNhYmxlZCA9ICFvcHRpb25zLmFuaW1hdGlvbjtcblxuICAgIHRoaXMuX3VwZGF0ZVNjYWxlcygpO1xuICAgIHRoaXMuX2NoZWNrRXZlbnRCaW5kaW5ncygpO1xuICAgIHRoaXMuX3VwZGF0ZUhpZGRlbkluZGljZXMoKTtcblxuICAgIC8vIHBsdWdpbnMgb3B0aW9ucyByZWZlcmVuY2VzIG1pZ2h0IGhhdmUgY2hhbmdlLCBsZXQncyBpbnZhbGlkYXRlIHRoZSBjYWNoZVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGFydGpzL0NoYXJ0LmpzL2lzc3Vlcy81MTExI2lzc3VlY29tbWVudC0zNTU5MzQxNjdcbiAgICB0aGlzLl9wbHVnaW5zLmludmFsaWRhdGUoKTtcblxuICAgIGlmICh0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZVVwZGF0ZScsIHttb2RlLCBjYW5jZWxhYmxlOiB0cnVlfSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIGRhdGFzZXQgY29udHJvbGxlcnMgYXJlIHVwZGF0ZWQgYW5kIG5ldyBjb250cm9sbGVycyBhcmUgcmVzZXRcbiAgICBjb25zdCBuZXdDb250cm9sbGVycyA9IHRoaXMuYnVpbGRPclVwZGF0ZUNvbnRyb2xsZXJzKCk7XG5cbiAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZUVsZW1lbnRzVXBkYXRlJyk7XG5cbiAgICAvLyBNYWtlIHN1cmUgYWxsIGRhdGFzZXQgY29udHJvbGxlcnMgaGF2ZSBjb3JyZWN0IG1ldGEgZGF0YSBjb3VudHNcbiAgICBsZXQgbWluUGFkZGluZyA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlsZW4gPSB0aGlzLmRhdGEuZGF0YXNldHMubGVuZ3RoOyBpIDwgaWxlbjsgaSsrKSB7XG4gICAgICBjb25zdCB7Y29udHJvbGxlcn0gPSB0aGlzLmdldERhdGFzZXRNZXRhKGkpO1xuICAgICAgY29uc3QgcmVzZXQgPSAhYW5pbXNEaXNhYmxlZCAmJiBuZXdDb250cm9sbGVycy5pbmRleE9mKGNvbnRyb2xsZXIpID09PSAtMTtcbiAgICAgIC8vIE5ldyBjb250cm9sbGVycyB3aWxsIGJlIHJlc2V0IGFmdGVyIHRoZSBsYXlvdXQgcGFzcywgc28gd2Ugb25seSB3YW50IHRvIG1vZGlmeVxuICAgICAgLy8gZWxlbWVudHMgYWRkZWQgdG8gbmV3IGRhdGFzZXRzXG4gICAgICBjb250cm9sbGVyLmJ1aWxkT3JVcGRhdGVFbGVtZW50cyhyZXNldCk7XG4gICAgICBtaW5QYWRkaW5nID0gTWF0aC5tYXgoK2NvbnRyb2xsZXIuZ2V0TWF4T3ZlcmZsb3coKSwgbWluUGFkZGluZyk7XG4gICAgfVxuICAgIG1pblBhZGRpbmcgPSB0aGlzLl9taW5QYWRkaW5nID0gb3B0aW9ucy5sYXlvdXQuYXV0b1BhZGRpbmcgPyBtaW5QYWRkaW5nIDogMDtcbiAgICB0aGlzLl91cGRhdGVMYXlvdXQobWluUGFkZGluZyk7XG5cbiAgICAvLyBPbmx5IHJlc2V0IHRoZSBjb250cm9sbGVycyBpZiB3ZSBoYXZlIGFuaW1hdGlvbnNcbiAgICBpZiAoIWFuaW1zRGlzYWJsZWQpIHtcbiAgICAgIC8vIENhbiBvbmx5IHJlc2V0IHRoZSBuZXcgY29udHJvbGxlcnMgYWZ0ZXIgdGhlIHNjYWxlcyBoYXZlIGJlZW4gdXBkYXRlZFxuICAgICAgLy8gUmVzZXQgaXMgZG9uZSB0byBnZXQgdGhlIHN0YXJ0aW5nIHBvaW50IGZvciB0aGUgaW5pdGlhbCBhbmltYXRpb25cbiAgICAgIGVhY2gobmV3Q29udHJvbGxlcnMsIChjb250cm9sbGVyKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXIucmVzZXQoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX3VwZGF0ZURhdGFzZXRzKG1vZGUpO1xuXG4gICAgLy8gRG8gdGhpcyBiZWZvcmUgcmVuZGVyIHNvIHRoYXQgYW55IHBsdWdpbnMgdGhhdCBuZWVkIGZpbmFsIHNjYWxlIHVwZGF0ZXMgY2FuIHVzZSBpdFxuICAgIHRoaXMubm90aWZ5UGx1Z2lucygnYWZ0ZXJVcGRhdGUnLCB7bW9kZX0pO1xuXG4gICAgdGhpcy5fbGF5ZXJzLnNvcnQoY29tcGFyZTJMZXZlbCgneicsICdfaWR4JykpO1xuXG4gICAgLy8gUmVwbGF5IGxhc3QgZXZlbnQgZnJvbSBiZWZvcmUgdXBkYXRlLCBvciBzZXQgaG92ZXIgc3R5bGVzIG9uIGFjdGl2ZSBlbGVtZW50c1xuICAgIGNvbnN0IHtfYWN0aXZlLCBfbGFzdEV2ZW50fSA9IHRoaXM7XG4gICAgaWYgKF9sYXN0RXZlbnQpIHtcbiAgICAgIHRoaXMuX2V2ZW50SGFuZGxlcihfbGFzdEV2ZW50LCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKF9hY3RpdmUubGVuZ3RoKSB7XG4gICAgICB0aGlzLl91cGRhdGVIb3ZlclN0eWxlcyhfYWN0aXZlLCBfYWN0aXZlLCB0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfdXBkYXRlU2NhbGVzKCkge1xuICAgIGVhY2godGhpcy5zY2FsZXMsIChzY2FsZSkgPT4ge1xuICAgICAgbGF5b3V0cy5yZW1vdmVCb3godGhpcywgc2NhbGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5lbnN1cmVTY2FsZXNIYXZlSURzKCk7XG4gICAgdGhpcy5idWlsZE9yVXBkYXRlU2NhbGVzKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jaGVja0V2ZW50QmluZGluZ3MoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBleGlzdGluZ0V2ZW50cyA9IG5ldyBTZXQoT2JqZWN0LmtleXModGhpcy5fbGlzdGVuZXJzKSk7XG4gICAgY29uc3QgbmV3RXZlbnRzID0gbmV3IFNldChvcHRpb25zLmV2ZW50cyk7XG5cbiAgICBpZiAoIXNldHNFcXVhbChleGlzdGluZ0V2ZW50cywgbmV3RXZlbnRzKSB8fCAhIXRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMgIT09IG9wdGlvbnMucmVzcG9uc2l2ZSkge1xuICAgICAgLy8gVGhlIGNvbmZpZ3VyZWQgZXZlbnRzIGhhdmUgY2hhbmdlZC4gUmViaW5kLlxuICAgICAgdGhpcy51bmJpbmRFdmVudHMoKTtcbiAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3VwZGF0ZUhpZGRlbkluZGljZXMoKSB7XG4gICAgY29uc3Qge19oaWRkZW5JbmRpY2VzfSA9IHRoaXM7XG4gICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuX2dldFVuaWZvcm1EYXRhQ2hhbmdlcygpIHx8IFtdO1xuICAgIGZvciAoY29uc3Qge21ldGhvZCwgc3RhcnQsIGNvdW50fSBvZiBjaGFuZ2VzKSB7XG4gICAgICBjb25zdCBtb3ZlID0gbWV0aG9kID09PSAnX3JlbW92ZUVsZW1lbnRzJyA/IC1jb3VudCA6IGNvdW50O1xuICAgICAgbW92ZU51bWVyaWNLZXlzKF9oaWRkZW5JbmRpY2VzLCBzdGFydCwgbW92ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZ2V0VW5pZm9ybURhdGFDaGFuZ2VzKCkge1xuICAgIGNvbnN0IF9kYXRhQ2hhbmdlcyA9IHRoaXMuX2RhdGFDaGFuZ2VzO1xuICAgIGlmICghX2RhdGFDaGFuZ2VzIHx8ICFfZGF0YUNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZGF0YUNoYW5nZXMgPSBbXTtcbiAgICBjb25zdCBkYXRhc2V0Q291bnQgPSB0aGlzLmRhdGEuZGF0YXNldHMubGVuZ3RoO1xuICAgIGNvbnN0IG1ha2VTZXQgPSAoaWR4KSA9PiBuZXcgU2V0KFxuICAgICAgX2RhdGFDaGFuZ2VzXG4gICAgICAgIC5maWx0ZXIoYyA9PiBjWzBdID09PSBpZHgpXG4gICAgICAgIC5tYXAoKGMsIGkpID0+IGkgKyAnLCcgKyBjLnNwbGljZSgxKS5qb2luKCcsJykpXG4gICAgKTtcblxuICAgIGNvbnN0IGNoYW5nZVNldCA9IG1ha2VTZXQoMCk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBkYXRhc2V0Q291bnQ7IGkrKykge1xuICAgICAgaWYgKCFzZXRzRXF1YWwoY2hhbmdlU2V0LCBtYWtlU2V0KGkpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKGNoYW5nZVNldClcbiAgICAgIC5tYXAoYyA9PiBjLnNwbGl0KCcsJykpXG4gICAgICAubWFwKGEgPT4gKHttZXRob2Q6IGFbMV0sIHN0YXJ0OiArYVsyXSwgY291bnQ6ICthWzNdfSkpO1xuICB9XG5cbiAgLyoqXG5cdCAqIFVwZGF0ZXMgdGhlIGNoYXJ0IGxheW91dCB1bmxlc3MgYSBwbHVnaW4gcmV0dXJucyBgZmFsc2VgIHRvIHRoZSBgYmVmb3JlTGF5b3V0YFxuXHQgKiBob29rLCBpbiB3aGljaCBjYXNlLCBwbHVnaW5zIHdpbGwgbm90IGJlIGNhbGxlZCBvbiBgYWZ0ZXJMYXlvdXRgLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX3VwZGF0ZUxheW91dChtaW5QYWRkaW5nKSB7XG4gICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlTGF5b3V0Jywge2NhbmNlbGFibGU6IHRydWV9KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsYXlvdXRzLnVwZGF0ZSh0aGlzLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgbWluUGFkZGluZyk7XG5cbiAgICBjb25zdCBhcmVhID0gdGhpcy5jaGFydEFyZWE7XG4gICAgY29uc3Qgbm9BcmVhID0gYXJlYS53aWR0aCA8PSAwIHx8IGFyZWEuaGVpZ2h0IDw9IDA7XG5cbiAgICB0aGlzLl9sYXllcnMgPSBbXTtcbiAgICBlYWNoKHRoaXMuYm94ZXMsIChib3gpID0+IHtcbiAgICAgIGlmIChub0FyZWEgJiYgYm94LnBvc2l0aW9uID09PSAnY2hhcnRBcmVhJykge1xuICAgICAgICAvLyBTa2lwIGRyYXdpbmcgYW5kIGNvbmZpZ3VyaW5nIGNoYXJ0QXJlYSBib3hlcyB3aGVuIGNoYXJ0QXJlYSBpcyB6ZXJvIG9yIG5lZ2F0aXZlXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gY29uZmlndXJlIGlzIGNhbGxlZCB0d2ljZSwgb25jZSBpbiBjb3JlLnNjYWxlLnVwZGF0ZSBhbmQgb25jZSBoZXJlLlxuICAgICAgLy8gSGVyZSB0aGUgYm94ZXMgYXJlIGZ1bGx5IHVwZGF0ZWQgYW5kIGF0IHRoZWlyIGZpbmFsIHBvc2l0aW9ucy5cbiAgICAgIGlmIChib3guY29uZmlndXJlKSB7XG4gICAgICAgIGJveC5jb25maWd1cmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xheWVycy5wdXNoKC4uLmJveC5fbGF5ZXJzKCkpO1xuICAgIH0sIHRoaXMpO1xuXG4gICAgdGhpcy5fbGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpdGVtLl9pZHggPSBpbmRleDtcbiAgICB9KTtcblxuICAgIHRoaXMubm90aWZ5UGx1Z2lucygnYWZ0ZXJMYXlvdXQnKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBVcGRhdGVzIGFsbCBkYXRhc2V0cyB1bmxlc3MgYSBwbHVnaW4gcmV0dXJucyBgZmFsc2VgIHRvIHRoZSBgYmVmb3JlRGF0YXNldHNVcGRhdGVgXG5cdCAqIGhvb2ssIGluIHdoaWNoIGNhc2UsIHBsdWdpbnMgd2lsbCBub3QgYmUgY2FsbGVkIG9uIGBhZnRlckRhdGFzZXRzVXBkYXRlYC5cblx0ICogQHByaXZhdGVcblx0ICovXG4gIF91cGRhdGVEYXRhc2V0cyhtb2RlKSB7XG4gICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRGF0YXNldHNVcGRhdGUnLCB7bW9kZSwgY2FuY2VsYWJsZTogdHJ1ZX0pID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBpbGVuID0gdGhpcy5kYXRhLmRhdGFzZXRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgdGhpcy5nZXREYXRhc2V0TWV0YShpKS5jb250cm9sbGVyLmNvbmZpZ3VyZSgpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBpbGVuID0gdGhpcy5kYXRhLmRhdGFzZXRzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgdGhpcy5fdXBkYXRlRGF0YXNldChpLCBpc0Z1bmN0aW9uKG1vZGUpID8gbW9kZSh7ZGF0YXNldEluZGV4OiBpfSkgOiBtb2RlKTtcbiAgICB9XG5cbiAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2FmdGVyRGF0YXNldHNVcGRhdGUnLCB7bW9kZX0pO1xuICB9XG5cbiAgLyoqXG5cdCAqIFVwZGF0ZXMgZGF0YXNldCBhdCBpbmRleCB1bmxlc3MgYSBwbHVnaW4gcmV0dXJucyBgZmFsc2VgIHRvIHRoZSBgYmVmb3JlRGF0YXNldFVwZGF0ZWBcblx0ICogaG9vaywgaW4gd2hpY2ggY2FzZSwgcGx1Z2lucyB3aWxsIG5vdCBiZSBjYWxsZWQgb24gYGFmdGVyRGF0YXNldFVwZGF0ZWAuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfdXBkYXRlRGF0YXNldChpbmRleCwgbW9kZSkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLmdldERhdGFzZXRNZXRhKGluZGV4KTtcbiAgICBjb25zdCBhcmdzID0ge21ldGEsIGluZGV4LCBtb2RlLCBjYW5jZWxhYmxlOiB0cnVlfTtcblxuICAgIGlmICh0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZURhdGFzZXRVcGRhdGUnLCBhcmdzKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBtZXRhLmNvbnRyb2xsZXIuX3VwZGF0ZShtb2RlKTtcblxuICAgIGFyZ3MuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIHRoaXMubm90aWZ5UGx1Z2lucygnYWZ0ZXJEYXRhc2V0VXBkYXRlJywgYXJncyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlUmVuZGVyJywge2NhbmNlbGFibGU6IHRydWV9KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYW5pbWF0b3IuaGFzKHRoaXMpKSB7XG4gICAgICBpZiAodGhpcy5hdHRhY2hlZCAmJiAhYW5pbWF0b3IucnVubmluZyh0aGlzKSkge1xuICAgICAgICBhbmltYXRvci5zdGFydCh0aGlzKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICBvbkFuaW1hdGlvbnNDb21wbGV0ZSh7Y2hhcnQ6IHRoaXN9KTtcbiAgICB9XG4gIH1cblxuICBkcmF3KCkge1xuICAgIGxldCBpO1xuICAgIGlmICh0aGlzLl9yZXNpemVCZWZvcmVEcmF3KSB7XG4gICAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSB0aGlzLl9yZXNpemVCZWZvcmVEcmF3O1xuICAgICAgdGhpcy5fcmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgdGhpcy5fcmVzaXplQmVmb3JlRHJhdyA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY2xlYXIoKTtcblxuICAgIGlmICh0aGlzLndpZHRoIDw9IDAgfHwgdGhpcy5oZWlnaHQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZURyYXcnLCB7Y2FuY2VsYWJsZTogdHJ1ZX0pID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEJlY2F1c2Ugb2YgcGx1Z2luIGhvb2tzIChiZWZvcmUvYWZ0ZXJEYXRhc2V0c0RyYXcpLCBkYXRhc2V0cyBjYW4ndFxuICAgIC8vIGN1cnJlbnRseSBiZSBwYXJ0IG9mIGxheWVycy4gSW5zdGVhZCwgd2UgZHJhd1xuICAgIC8vIGxheWVycyA8PSAwIGJlZm9yZShkZWZhdWx0LCBiYWNrd2FyZCBjb21wYXQpLCBhbmQgdGhlIHJlc3QgYWZ0ZXJcbiAgICBjb25zdCBsYXllcnMgPSB0aGlzLl9sYXllcnM7XG4gICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGggJiYgbGF5ZXJzW2ldLnogPD0gMDsgKytpKSB7XG4gICAgICBsYXllcnNbaV0uZHJhdyh0aGlzLmNoYXJ0QXJlYSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZHJhd0RhdGFzZXRzKCk7XG5cbiAgICAvLyBSZXN0IG9mIGxheWVyc1xuICAgIGZvciAoOyBpIDwgbGF5ZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICBsYXllcnNbaV0uZHJhdyh0aGlzLmNoYXJ0QXJlYSk7XG4gICAgfVxuXG4gICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckRyYXcnKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2dldFNvcnRlZERhdGFzZXRNZXRhcyhmaWx0ZXJWaXNpYmxlKSB7XG4gICAgY29uc3QgbWV0YXNldHMgPSB0aGlzLl9zb3J0ZWRNZXRhc2V0cztcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBsZXQgaSwgaWxlbjtcblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBtZXRhc2V0cy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIGNvbnN0IG1ldGEgPSBtZXRhc2V0c1tpXTtcbiAgICAgIGlmICghZmlsdGVyVmlzaWJsZSB8fCBtZXRhLnZpc2libGUpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gobWV0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBHZXRzIHRoZSB2aXNpYmxlIGRhdGFzZXQgbWV0YXMgaW4gZHJhd2luZyBvcmRlclxuXHQgKiBAcmV0dXJuIHtvYmplY3RbXX1cblx0ICovXG4gIGdldFNvcnRlZFZpc2libGVEYXRhc2V0TWV0YXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldFNvcnRlZERhdGFzZXRNZXRhcyh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBEcmF3cyBhbGwgZGF0YXNldHMgdW5sZXNzIGEgcGx1Z2luIHJldHVybnMgYGZhbHNlYCB0byB0aGUgYGJlZm9yZURhdGFzZXRzRHJhd2Bcblx0ICogaG9vaywgaW4gd2hpY2ggY2FzZSwgcGx1Z2lucyB3aWxsIG5vdCBiZSBjYWxsZWQgb24gYGFmdGVyRGF0YXNldHNEcmF3YC5cblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9kcmF3RGF0YXNldHMoKSB7XG4gICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRGF0YXNldHNEcmF3Jywge2NhbmNlbGFibGU6IHRydWV9KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRhc2V0cyA9IHRoaXMuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpO1xuICAgIGZvciAobGV0IGkgPSBtZXRhc2V0cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdGhpcy5fZHJhd0RhdGFzZXQobWV0YXNldHNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMubm90aWZ5UGx1Z2lucygnYWZ0ZXJEYXRhc2V0c0RyYXcnKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBEcmF3cyBkYXRhc2V0IGF0IGluZGV4IHVubGVzcyBhIHBsdWdpbiByZXR1cm5zIGBmYWxzZWAgdG8gdGhlIGBiZWZvcmVEYXRhc2V0RHJhd2Bcblx0ICogaG9vaywgaW4gd2hpY2ggY2FzZSwgcGx1Z2lucyB3aWxsIG5vdCBiZSBjYWxsZWQgb24gYGFmdGVyRGF0YXNldERyYXdgLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2RyYXdEYXRhc2V0KG1ldGEpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBjbGlwID0gbWV0YS5fY2xpcDtcbiAgICBjb25zdCB1c2VDbGlwID0gIWNsaXAuZGlzYWJsZWQ7XG4gICAgY29uc3QgYXJlYSA9IGdldERhdGFzZXRBcmVhKG1ldGEpIHx8IHRoaXMuY2hhcnRBcmVhO1xuICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICBtZXRhLFxuICAgICAgaW5kZXg6IG1ldGEuaW5kZXgsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLm5vdGlmeVBsdWdpbnMoJ2JlZm9yZURhdGFzZXREcmF3JywgYXJncykgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHVzZUNsaXApIHtcbiAgICAgIGNsaXBBcmVhKGN0eCwge1xuICAgICAgICBsZWZ0OiBjbGlwLmxlZnQgPT09IGZhbHNlID8gMCA6IGFyZWEubGVmdCAtIGNsaXAubGVmdCxcbiAgICAgICAgcmlnaHQ6IGNsaXAucmlnaHQgPT09IGZhbHNlID8gdGhpcy53aWR0aCA6IGFyZWEucmlnaHQgKyBjbGlwLnJpZ2h0LFxuICAgICAgICB0b3A6IGNsaXAudG9wID09PSBmYWxzZSA/IDAgOiBhcmVhLnRvcCAtIGNsaXAudG9wLFxuICAgICAgICBib3R0b206IGNsaXAuYm90dG9tID09PSBmYWxzZSA/IHRoaXMuaGVpZ2h0IDogYXJlYS5ib3R0b20gKyBjbGlwLmJvdHRvbVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbWV0YS5jb250cm9sbGVyLmRyYXcoKTtcblxuICAgIGlmICh1c2VDbGlwKSB7XG4gICAgICB1bmNsaXBBcmVhKGN0eCk7XG4gICAgfVxuXG4gICAgYXJncy5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5ub3RpZnlQbHVnaW5zKCdhZnRlckRhdGFzZXREcmF3JywgYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIHBvaW50IGlzIGluIHRoZSBjaGFydCBhcmVhLlxuICAgKiBAcGFyYW0ge1BvaW50fSBwb2ludCAtIGluIHJlbGF0aXZlIGNvb3JkaW5hdGVzIChzZWUsIGUuZy4sIGdldFJlbGF0aXZlUG9zaXRpb24pXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNQb2ludEluQXJlYShwb2ludCkge1xuICAgIHJldHVybiBfaXNQb2ludEluQXJlYShwb2ludCwgdGhpcy5jaGFydEFyZWEsIHRoaXMuX21pblBhZGRpbmcpO1xuICB9XG5cbiAgZ2V0RWxlbWVudHNBdEV2ZW50Rm9yTW9kZShlLCBtb2RlLCBvcHRpb25zLCB1c2VGaW5hbFBvc2l0aW9uKSB7XG4gICAgY29uc3QgbWV0aG9kID0gSW50ZXJhY3Rpb24ubW9kZXNbbW9kZV07XG4gICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBtZXRob2QodGhpcywgZSwgb3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KSB7XG4gICAgY29uc3QgZGF0YXNldCA9IHRoaXMuZGF0YS5kYXRhc2V0c1tkYXRhc2V0SW5kZXhdO1xuICAgIGNvbnN0IG1ldGFzZXRzID0gdGhpcy5fbWV0YXNldHM7XG4gICAgbGV0IG1ldGEgPSBtZXRhc2V0cy5maWx0ZXIoeCA9PiB4ICYmIHguX2RhdGFzZXQgPT09IGRhdGFzZXQpLnBvcCgpO1xuXG4gICAgaWYgKCFtZXRhKSB7XG4gICAgICBtZXRhID0ge1xuICAgICAgICB0eXBlOiBudWxsLFxuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgZGF0YXNldDogbnVsbCxcbiAgICAgICAgY29udHJvbGxlcjogbnVsbCxcbiAgICAgICAgaGlkZGVuOiBudWxsLFx0XHRcdC8vIFNlZSBpc0RhdGFzZXRWaXNpYmxlKCkgY29tbWVudFxuICAgICAgICB4QXhpc0lEOiBudWxsLFxuICAgICAgICB5QXhpc0lEOiBudWxsLFxuICAgICAgICBvcmRlcjogZGF0YXNldCAmJiBkYXRhc2V0Lm9yZGVyIHx8IDAsXG4gICAgICAgIGluZGV4OiBkYXRhc2V0SW5kZXgsXG4gICAgICAgIF9kYXRhc2V0OiBkYXRhc2V0LFxuICAgICAgICBfcGFyc2VkOiBbXSxcbiAgICAgICAgX3NvcnRlZDogZmFsc2VcbiAgICAgIH07XG4gICAgICBtZXRhc2V0cy5wdXNoKG1ldGEpO1xuICAgIH1cblxuICAgIHJldHVybiBtZXRhO1xuICB9XG5cbiAgZ2V0Q29udGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy4kY29udGV4dCB8fCAodGhpcy4kY29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCwge2NoYXJ0OiB0aGlzLCB0eXBlOiAnY2hhcnQnfSkpO1xuICB9XG5cbiAgZ2V0VmlzaWJsZURhdGFzZXRDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTb3J0ZWRWaXNpYmxlRGF0YXNldE1ldGFzKCkubGVuZ3RoO1xuICB9XG5cbiAgaXNEYXRhc2V0VmlzaWJsZShkYXRhc2V0SW5kZXgpIHtcbiAgICBjb25zdCBkYXRhc2V0ID0gdGhpcy5kYXRhLmRhdGFzZXRzW2RhdGFzZXRJbmRleF07XG4gICAgaWYgKCFkYXRhc2V0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcblxuICAgIC8vIG1ldGEuaGlkZGVuIGlzIGEgcGVyIGNoYXJ0IGRhdGFzZXQgaGlkZGVuIGZsYWcgb3ZlcnJpZGUgd2l0aCAzIHN0YXRlczogaWYgdHJ1ZSBvciBmYWxzZSxcbiAgICAvLyB0aGUgZGF0YXNldC5oaWRkZW4gdmFsdWUgaXMgaWdub3JlZCwgZWxzZSBpZiBudWxsLCB0aGUgZGF0YXNldCBoaWRkZW4gc3RhdGUgaXMgcmV0dXJuZWQuXG4gICAgcmV0dXJuIHR5cGVvZiBtZXRhLmhpZGRlbiA9PT0gJ2Jvb2xlYW4nID8gIW1ldGEuaGlkZGVuIDogIWRhdGFzZXQuaGlkZGVuO1xuICB9XG5cbiAgc2V0RGF0YXNldFZpc2liaWxpdHkoZGF0YXNldEluZGV4LCB2aXNpYmxlKSB7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcbiAgICBtZXRhLmhpZGRlbiA9ICF2aXNpYmxlO1xuICB9XG5cbiAgdG9nZ2xlRGF0YVZpc2liaWxpdHkoaW5kZXgpIHtcbiAgICB0aGlzLl9oaWRkZW5JbmRpY2VzW2luZGV4XSA9ICF0aGlzLl9oaWRkZW5JbmRpY2VzW2luZGV4XTtcbiAgfVxuXG4gIGdldERhdGFWaXNpYmlsaXR5KGluZGV4KSB7XG4gICAgcmV0dXJuICF0aGlzLl9oaWRkZW5JbmRpY2VzW2luZGV4XTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX3VwZGF0ZVZpc2liaWxpdHkoZGF0YXNldEluZGV4LCBkYXRhSW5kZXgsIHZpc2libGUpIHtcbiAgICBjb25zdCBtb2RlID0gdmlzaWJsZSA/ICdzaG93JyA6ICdoaWRlJztcbiAgICBjb25zdCBtZXRhID0gdGhpcy5nZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpO1xuICAgIGNvbnN0IGFuaW1zID0gbWV0YS5jb250cm9sbGVyLl9yZXNvbHZlQW5pbWF0aW9ucyh1bmRlZmluZWQsIG1vZGUpO1xuXG4gICAgaWYgKGRlZmluZWQoZGF0YUluZGV4KSkge1xuICAgICAgbWV0YS5kYXRhW2RhdGFJbmRleF0uaGlkZGVuID0gIXZpc2libGU7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldERhdGFzZXRWaXNpYmlsaXR5KGRhdGFzZXRJbmRleCwgdmlzaWJsZSk7XG4gICAgICAvLyBBbmltYXRlIHZpc2libGUgc3RhdGUsIHNvIGhpZGUgYW5pbWF0aW9uIGNhbiBiZSBzZWVuLiBUaGlzIGNvdWxkIGJlIGhhbmRsZWQgYmV0dGVyIGlmIHVwZGF0ZSAvIHVwZGF0ZURhdGFzZXQgcmV0dXJuZWQgYSBQcm9taXNlLlxuICAgICAgYW5pbXMudXBkYXRlKG1ldGEsIHt2aXNpYmxlfSk7XG4gICAgICB0aGlzLnVwZGF0ZSgoY3R4KSA9PiBjdHguZGF0YXNldEluZGV4ID09PSBkYXRhc2V0SW5kZXggPyBtb2RlIDogdW5kZWZpbmVkKTtcbiAgICB9XG4gIH1cblxuICBoaWRlKGRhdGFzZXRJbmRleCwgZGF0YUluZGV4KSB7XG4gICAgdGhpcy5fdXBkYXRlVmlzaWJpbGl0eShkYXRhc2V0SW5kZXgsIGRhdGFJbmRleCwgZmFsc2UpO1xuICB9XG5cbiAgc2hvdyhkYXRhc2V0SW5kZXgsIGRhdGFJbmRleCkge1xuICAgIHRoaXMuX3VwZGF0ZVZpc2liaWxpdHkoZGF0YXNldEluZGV4LCBkYXRhSW5kZXgsIHRydWUpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZGVzdHJveURhdGFzZXRNZXRhKGRhdGFzZXRJbmRleCkge1xuICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9tZXRhc2V0c1tkYXRhc2V0SW5kZXhdO1xuICAgIGlmIChtZXRhICYmIG1ldGEuY29udHJvbGxlcikge1xuICAgICAgbWV0YS5jb250cm9sbGVyLl9kZXN0cm95KCk7XG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLl9tZXRhc2V0c1tkYXRhc2V0SW5kZXhdO1xuICB9XG5cbiAgX3N0b3AoKSB7XG4gICAgbGV0IGksIGlsZW47XG4gICAgdGhpcy5zdG9wKCk7XG4gICAgYW5pbWF0b3IucmVtb3ZlKHRoaXMpO1xuXG4gICAgZm9yIChpID0gMCwgaWxlbiA9IHRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIHRoaXMuX2Rlc3Ryb3lEYXRhc2V0TWV0YShpKTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRGVzdHJveScpO1xuICAgIGNvbnN0IHtjYW52YXMsIGN0eH0gPSB0aGlzO1xuXG4gICAgdGhpcy5fc3RvcCgpO1xuICAgIHRoaXMuY29uZmlnLmNsZWFyQ2FjaGUoKTtcblxuICAgIGlmIChjYW52YXMpIHtcbiAgICAgIHRoaXMudW5iaW5kRXZlbnRzKCk7XG4gICAgICBjbGVhckNhbnZhcyhjYW52YXMsIGN0eCk7XG4gICAgICB0aGlzLnBsYXRmb3JtLnJlbGVhc2VDb250ZXh0KGN0eCk7XG4gICAgICB0aGlzLmNhbnZhcyA9IG51bGw7XG4gICAgICB0aGlzLmN0eCA9IG51bGw7XG4gICAgfVxuXG4gICAgZGVsZXRlIGluc3RhbmNlc1t0aGlzLmlkXTtcblxuICAgIHRoaXMubm90aWZ5UGx1Z2lucygnYWZ0ZXJEZXN0cm95Jyk7XG4gIH1cblxuICB0b0Jhc2U2NEltYWdlKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5jYW52YXMudG9EYXRhVVJMKC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBiaW5kRXZlbnRzKCkge1xuICAgIHRoaXMuYmluZFVzZXJFdmVudHMoKTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnJlc3BvbnNpdmUpIHtcbiAgICAgIHRoaXMuYmluZFJlc3BvbnNpdmVFdmVudHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hdHRhY2hlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBiaW5kVXNlckV2ZW50cygpIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgY29uc3QgcGxhdGZvcm0gPSB0aGlzLnBsYXRmb3JtO1xuXG4gICAgY29uc3QgX2FkZCA9ICh0eXBlLCBsaXN0ZW5lcikgPT4ge1xuICAgICAgcGxhdGZvcm0uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lcik7XG4gICAgICBsaXN0ZW5lcnNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICB9O1xuXG4gICAgY29uc3QgbGlzdGVuZXIgPSAoZSwgeCwgeSkgPT4ge1xuICAgICAgZS5vZmZzZXRYID0geDtcbiAgICAgIGUub2Zmc2V0WSA9IHk7XG4gICAgICB0aGlzLl9ldmVudEhhbmRsZXIoZSk7XG4gICAgfTtcblxuICAgIGVhY2godGhpcy5vcHRpb25zLmV2ZW50cywgKHR5cGUpID0+IF9hZGQodHlwZSwgbGlzdGVuZXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYmluZFJlc3BvbnNpdmVFdmVudHMoKSB7XG4gICAgaWYgKCF0aGlzLl9yZXNwb25zaXZlTGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9yZXNwb25zaXZlTGlzdGVuZXJzID0ge307XG4gICAgfVxuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnM7XG4gICAgY29uc3QgcGxhdGZvcm0gPSB0aGlzLnBsYXRmb3JtO1xuXG4gICAgY29uc3QgX2FkZCA9ICh0eXBlLCBsaXN0ZW5lcikgPT4ge1xuICAgICAgcGxhdGZvcm0uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lcik7XG4gICAgICBsaXN0ZW5lcnNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICB9O1xuICAgIGNvbnN0IF9yZW1vdmUgPSAodHlwZSwgbGlzdGVuZXIpID0+IHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0pIHtcbiAgICAgICAgcGxhdGZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbdHlwZV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGxpc3RlbmVyID0gKHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAgIGlmICh0aGlzLmNhbnZhcykge1xuICAgICAgICB0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IGRldGFjaGVkOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1jb25zdFxuICAgIGNvbnN0IGF0dGFjaGVkID0gKCkgPT4ge1xuICAgICAgX3JlbW92ZSgnYXR0YWNoJywgYXR0YWNoZWQpO1xuXG4gICAgICB0aGlzLmF0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVzaXplKCk7XG5cbiAgICAgIF9hZGQoJ3Jlc2l6ZScsIGxpc3RlbmVyKTtcbiAgICAgIF9hZGQoJ2RldGFjaCcsIGRldGFjaGVkKTtcbiAgICB9O1xuXG4gICAgZGV0YWNoZWQgPSAoKSA9PiB7XG4gICAgICB0aGlzLmF0dGFjaGVkID0gZmFsc2U7XG5cbiAgICAgIF9yZW1vdmUoJ3Jlc2l6ZScsIGxpc3RlbmVyKTtcblxuICAgICAgLy8gU3RvcCBhbmltYXRpbmcgYW5kIHJlbW92ZSBtZXRhc2V0cywgc28gd2hlbiByZS1hdHRhY2hlZCwgdGhlIGFuaW1hdGlvbnMgc3RhcnQgZnJvbSBiZWdpbm5pbmcuXG4gICAgICB0aGlzLl9zdG9wKCk7XG4gICAgICB0aGlzLl9yZXNpemUoMCwgMCk7XG5cbiAgICAgIF9hZGQoJ2F0dGFjaCcsIGF0dGFjaGVkKTtcbiAgICB9O1xuXG4gICAgaWYgKHBsYXRmb3JtLmlzQXR0YWNoZWQodGhpcy5jYW52YXMpKSB7XG4gICAgICBhdHRhY2hlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZXRhY2hlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgdW5iaW5kRXZlbnRzKCkge1xuICAgIGVhY2godGhpcy5fbGlzdGVuZXJzLCAobGlzdGVuZXIsIHR5cGUpID0+IHtcbiAgICAgIHRoaXMucGxhdGZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lcik7XG4gICAgfSk7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG5cbiAgICBlYWNoKHRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMsIChsaXN0ZW5lciwgdHlwZSkgPT4ge1xuICAgICAgdGhpcy5wbGF0Zm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyKTtcbiAgICB9KTtcbiAgICB0aGlzLl9yZXNwb25zaXZlTGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgdXBkYXRlSG92ZXJTdHlsZShpdGVtcywgbW9kZSwgZW5hYmxlZCkge1xuICAgIGNvbnN0IHByZWZpeCA9IGVuYWJsZWQgPyAnc2V0JyA6ICdyZW1vdmUnO1xuICAgIGxldCBtZXRhLCBpdGVtLCBpLCBpbGVuO1xuXG4gICAgaWYgKG1vZGUgPT09ICdkYXRhc2V0Jykge1xuICAgICAgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoaXRlbXNbMF0uZGF0YXNldEluZGV4KTtcbiAgICAgIG1ldGEuY29udHJvbGxlclsnXycgKyBwcmVmaXggKyAnRGF0YXNldEhvdmVyU3R5bGUnXSgpO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIGl0ZW0gPSBpdGVtc1tpXTtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBpdGVtICYmIHRoaXMuZ2V0RGF0YXNldE1ldGEoaXRlbS5kYXRhc2V0SW5kZXgpLmNvbnRyb2xsZXI7XG4gICAgICBpZiAoY29udHJvbGxlcikge1xuICAgICAgICBjb250cm9sbGVyW3ByZWZpeCArICdIb3ZlclN0eWxlJ10oaXRlbS5lbGVtZW50LCBpdGVtLmRhdGFzZXRJbmRleCwgaXRlbS5pbmRleCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEdldCBhY3RpdmUgKGhvdmVyZWQpIGVsZW1lbnRzXG5cdCAqIEByZXR1cm5zIGFycmF5XG5cdCAqL1xuICBnZXRBY3RpdmVFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlIHx8IFtdO1xuICB9XG5cbiAgLyoqXG5cdCAqIFNldCBhY3RpdmUgKGhvdmVyZWQpIGVsZW1lbnRzXG5cdCAqIEBwYXJhbSB7YXJyYXl9IGFjdGl2ZUVsZW1lbnRzIE5ldyBhY3RpdmUgZGF0YSBwb2ludHNcblx0ICovXG4gIHNldEFjdGl2ZUVsZW1lbnRzKGFjdGl2ZUVsZW1lbnRzKSB7XG4gICAgY29uc3QgbGFzdEFjdGl2ZSA9IHRoaXMuX2FjdGl2ZSB8fCBbXTtcbiAgICBjb25zdCBhY3RpdmUgPSBhY3RpdmVFbGVtZW50cy5tYXAoKHtkYXRhc2V0SW5kZXgsIGluZGV4fSkgPT4ge1xuICAgICAgY29uc3QgbWV0YSA9IHRoaXMuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcbiAgICAgIGlmICghbWV0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRhdGFzZXQgZm91bmQgYXQgaW5kZXggJyArIGRhdGFzZXRJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFzZXRJbmRleCxcbiAgICAgICAgZWxlbWVudDogbWV0YS5kYXRhW2luZGV4XSxcbiAgICAgICAgaW5kZXgsXG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGNoYW5nZWQgPSAhX2VsZW1lbnRzRXF1YWwoYWN0aXZlLCBsYXN0QWN0aXZlKTtcblxuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAvLyBNYWtlIHN1cmUgd2UgZG9uJ3QgdXNlIHRoZSBwcmV2aW91cyBtb3VzZSBldmVudCB0byBvdmVycmlkZSB0aGUgYWN0aXZlIGVsZW1lbnRzIGluIHVwZGF0ZS5cbiAgICAgIHRoaXMuX2xhc3RFdmVudCA9IG51bGw7XG4gICAgICB0aGlzLl91cGRhdGVIb3ZlclN0eWxlcyhhY3RpdmUsIGxhc3RBY3RpdmUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBDYWxscyBlbmFibGVkIHBsdWdpbnMgb24gdGhlIHNwZWNpZmllZCBob29rIGFuZCB3aXRoIHRoZSBnaXZlbiBhcmdzLlxuXHQgKiBUaGlzIG1ldGhvZCBpbW1lZGlhdGVseSByZXR1cm5zIGFzIHNvb24gYXMgYSBwbHVnaW4gZXhwbGljaXRseSByZXR1cm5zIGZhbHNlLiBUaGVcblx0ICogcmV0dXJuZWQgdmFsdWUgY2FuIGJlIHVzZWQsIGZvciBpbnN0YW5jZSwgdG8gaW50ZXJydXB0IHRoZSBjdXJyZW50IGFjdGlvbi5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGhvb2sgLSBUaGUgbmFtZSBvZiB0aGUgcGx1Z2luIG1ldGhvZCB0byBjYWxsIChlLmcuICdiZWZvcmVVcGRhdGUnKS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFthcmdzXSAtIEV4dHJhIGFyZ3VtZW50cyB0byBhcHBseSB0byB0aGUgaG9vayBjYWxsLlxuICAgKiBAcGFyYW0ge2ltcG9ydCgnLi9jb3JlLnBsdWdpbnMuanMnKS5maWx0ZXJDYWxsYmFja30gW2ZpbHRlcl0gLSBGaWx0ZXJpbmcgZnVuY3Rpb24gZm9yIGxpbWl0aW5nIHdoaWNoIHBsdWdpbnMgYXJlIG5vdGlmaWVkXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBmYWxzZSBpZiBhbnkgb2YgdGhlIHBsdWdpbnMgcmV0dXJuIGZhbHNlLCBlbHNlIHJldHVybnMgdHJ1ZS5cblx0ICovXG4gIG5vdGlmeVBsdWdpbnMoaG9vaywgYXJncywgZmlsdGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BsdWdpbnMubm90aWZ5KHRoaXMsIGhvb2ssIGFyZ3MsIGZpbHRlcik7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBwbHVnaW4gd2l0aCB0aGUgc3BlY2lmaWMgSUQgaXMgcmVnaXN0ZXJlZCBhbmQgZW5hYmxlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGx1Z2luSWQgLSBUaGUgSUQgb2YgdGhlIHBsdWdpbiBvZiB3aGljaCB0byBjaGVjayBpZiBpdCBpcyBlbmFibGVkXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNQbHVnaW5FbmFibGVkKHBsdWdpbklkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BsdWdpbnMuX2NhY2hlLmZpbHRlcihwID0+IHAucGx1Z2luLmlkID09PSBwbHVnaW5JZCkubGVuZ3RoID09PSAxO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfdXBkYXRlSG92ZXJTdHlsZXMoYWN0aXZlLCBsYXN0QWN0aXZlLCByZXBsYXkpIHtcbiAgICBjb25zdCBob3Zlck9wdGlvbnMgPSB0aGlzLm9wdGlvbnMuaG92ZXI7XG4gICAgY29uc3QgZGlmZiA9IChhLCBiKSA9PiBhLmZpbHRlcih4ID0+ICFiLnNvbWUoeSA9PiB4LmRhdGFzZXRJbmRleCA9PT0geS5kYXRhc2V0SW5kZXggJiYgeC5pbmRleCA9PT0geS5pbmRleCkpO1xuICAgIGNvbnN0IGRlYWN0aXZhdGVkID0gZGlmZihsYXN0QWN0aXZlLCBhY3RpdmUpO1xuICAgIGNvbnN0IGFjdGl2YXRlZCA9IHJlcGxheSA/IGFjdGl2ZSA6IGRpZmYoYWN0aXZlLCBsYXN0QWN0aXZlKTtcblxuICAgIGlmIChkZWFjdGl2YXRlZC5sZW5ndGgpIHtcbiAgICAgIHRoaXMudXBkYXRlSG92ZXJTdHlsZShkZWFjdGl2YXRlZCwgaG92ZXJPcHRpb25zLm1vZGUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZhdGVkLmxlbmd0aCAmJiBob3Zlck9wdGlvbnMubW9kZSkge1xuICAgICAgdGhpcy51cGRhdGVIb3ZlclN0eWxlKGFjdGl2YXRlZCwgaG92ZXJPcHRpb25zLm1vZGUsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2V2ZW50SGFuZGxlcihlLCByZXBsYXkpIHtcbiAgICBjb25zdCBhcmdzID0ge1xuICAgICAgZXZlbnQ6IGUsXG4gICAgICByZXBsYXksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgaW5DaGFydEFyZWE6IHRoaXMuaXNQb2ludEluQXJlYShlKVxuICAgIH07XG4gICAgY29uc3QgZXZlbnRGaWx0ZXIgPSAocGx1Z2luKSA9PiAocGx1Z2luLm9wdGlvbnMuZXZlbnRzIHx8IHRoaXMub3B0aW9ucy5ldmVudHMpLmluY2x1ZGVzKGUubmF0aXZlLnR5cGUpO1xuXG4gICAgaWYgKHRoaXMubm90aWZ5UGx1Z2lucygnYmVmb3JlRXZlbnQnLCBhcmdzLCBldmVudEZpbHRlcikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlZCA9IHRoaXMuX2hhbmRsZUV2ZW50KGUsIHJlcGxheSwgYXJncy5pbkNoYXJ0QXJlYSk7XG5cbiAgICBhcmdzLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICB0aGlzLm5vdGlmeVBsdWdpbnMoJ2FmdGVyRXZlbnQnLCBhcmdzLCBldmVudEZpbHRlcik7XG5cbiAgICBpZiAoY2hhbmdlZCB8fCBhcmdzLmNoYW5nZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcblx0ICogSGFuZGxlIGFuIGV2ZW50XG5cdCAqIEBwYXJhbSB7Q2hhcnRFdmVudH0gZSB0aGUgZXZlbnQgdG8gaGFuZGxlXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlcGxheV0gLSB0cnVlIGlmIHRoZSBldmVudCB3YXMgcmVwbGF5ZWQgYnkgYHVwZGF0ZWBcbiAgICogQHBhcmFtIHtib29sZWFufSBbaW5DaGFydEFyZWFdIC0gdHJ1ZSBpZiB0aGUgZXZlbnQgaXMgaW5zaWRlIGNoYXJ0QXJlYVxuXHQgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBjaGFydCBuZWVkcyB0byByZS1yZW5kZXJcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9oYW5kbGVFdmVudChlLCByZXBsYXksIGluQ2hhcnRBcmVhKSB7XG4gICAgY29uc3Qge19hY3RpdmU6IGxhc3RBY3RpdmUgPSBbXSwgb3B0aW9uc30gPSB0aGlzO1xuXG4gICAgLy8gSWYgdGhlIGV2ZW50IGlzIHJlcGxheWVkIGZyb20gYHVwZGF0ZWAsIHdlIHNob3VsZCBldmFsdWF0ZSB3aXRoIHRoZSBmaW5hbCBwb3NpdGlvbnMuXG4gICAgLy9cbiAgICAvLyBUaGUgYHJlcGxheWA6XG4gICAgLy8gSXQncyB0aGUgbGFzdCBldmVudCAoZXhjbHVkaW5nIGNsaWNrKSB0aGF0IGhhcyBvY2N1cnJlZCBiZWZvcmUgYHVwZGF0ZWAuXG4gICAgLy8gU28gbW91c2UgaGFzIG5vdCBtb3ZlZC4gSXQncyBhbHNvIG92ZXIgdGhlIGNoYXJ0LCBiZWNhdXNlIHRoZXJlIGlzIGEgYHJlcGxheWAuXG4gICAgLy9cbiAgICAvLyBUaGUgd2h5OlxuICAgIC8vIElmIGFuaW1hdGlvbnMgYXJlIGFjdGl2ZSwgdGhlIGVsZW1lbnRzIGhhdmVuJ3QgbW92ZWQgeWV0IGNvbXBhcmVkIHRvIHN0YXRlIGJlZm9yZSB1cGRhdGUuXG4gICAgLy8gQnV0IGlmIHRoZXkgd2lsbCwgd2UgYXJlIGFjdGl2YXRpbmcgdGhlIGVsZW1lbnRzIHRoYXQgd291bGQgYmUgYWN0aXZlLCBpZiB0aGlzIGNoZWNrXG4gICAgLy8gd2FzIGRvbmUgYWZ0ZXIgdGhlIGFuaW1hdGlvbnMgaGF2ZSBjb21wbGV0ZWQuID0+IFwiZmluYWwgcG9zaXRpb25zXCIuXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gYW5pbWF0aW9ucywgdGhlIFwiZmluYWxcIiBhbmQgXCJjdXJyZW50XCIgcG9zaXRpb25zIGFyZSBlcXVhbC5cbiAgICAvLyBUaGlzIGlzIGRvbmUgc28gd2UgZG8gbm90IGhhdmUgdG8gZXZhbHVhdGUgdGhlIGFjdGl2ZSBlbGVtZW50cyBlYWNoIGFuaW1hdGlvbiBmcmFtZVxuICAgIC8vIC0gaXQgd291bGQgYmUgZXhwZW5zaXZlLlxuICAgIGNvbnN0IHVzZUZpbmFsUG9zaXRpb24gPSByZXBsYXk7XG4gICAgY29uc3QgYWN0aXZlID0gdGhpcy5fZ2V0QWN0aXZlRWxlbWVudHMoZSwgbGFzdEFjdGl2ZSwgaW5DaGFydEFyZWEsIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIGNvbnN0IGlzQ2xpY2sgPSBfaXNDbGlja0V2ZW50KGUpO1xuICAgIGNvbnN0IGxhc3RFdmVudCA9IGRldGVybWluZUxhc3RFdmVudChlLCB0aGlzLl9sYXN0RXZlbnQsIGluQ2hhcnRBcmVhLCBpc0NsaWNrKTtcblxuICAgIGlmIChpbkNoYXJ0QXJlYSkge1xuICAgICAgLy8gU2V0IF9sYXN0RXZlbnQgdG8gbnVsbCB3aGlsZSB3ZSBhcmUgcHJvY2Vzc2luZyB0aGUgZXZlbnQgaGFuZGxlcnMuXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIHJlY3Vyc2lvbiBpZiB0aGUgaGFuZGxlciBjYWxscyBjaGFydC51cGRhdGUoKVxuICAgICAgdGhpcy5fbGFzdEV2ZW50ID0gbnVsbDtcblxuICAgICAgLy8gSW52b2tlIG9uSG92ZXIgaG9va1xuICAgICAgY2FsbENhbGxiYWNrKG9wdGlvbnMub25Ib3ZlciwgW2UsIGFjdGl2ZSwgdGhpc10sIHRoaXMpO1xuXG4gICAgICBpZiAoaXNDbGljaykge1xuICAgICAgICBjYWxsQ2FsbGJhY2sob3B0aW9ucy5vbkNsaWNrLCBbZSwgYWN0aXZlLCB0aGlzXSwgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlZCA9ICFfZWxlbWVudHNFcXVhbChhY3RpdmUsIGxhc3RBY3RpdmUpO1xuICAgIGlmIChjaGFuZ2VkIHx8IHJlcGxheSkge1xuICAgICAgdGhpcy5fYWN0aXZlID0gYWN0aXZlO1xuICAgICAgdGhpcy5fdXBkYXRlSG92ZXJTdHlsZXMoYWN0aXZlLCBsYXN0QWN0aXZlLCByZXBsYXkpO1xuICAgIH1cblxuICAgIHRoaXMuX2xhc3RFdmVudCA9IGxhc3RFdmVudDtcblxuICAgIHJldHVybiBjaGFuZ2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Q2hhcnRFdmVudH0gZSAtIFRoZSBldmVudFxuICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vdHlwZXMvaW5kZXguanMnKS5BY3RpdmVFbGVtZW50W119IGxhc3RBY3RpdmUgLSBQcmV2aW91c2x5IGFjdGl2ZSBlbGVtZW50c1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluQ2hhcnRBcmVhIC0gSXMgdGhlIGVudmVudCBpbnNpZGUgY2hhcnRBcmVhXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlRmluYWxQb3NpdGlvbiAtIFNob3VsZCB0aGUgZXZhbHVhdGlvbiBiZSBkb25lIHdpdGggY3VycmVudCBvciBmaW5hbCAoYWZ0ZXIgYW5pbWF0aW9uKSBlbGVtZW50IHBvc2l0aW9uc1xuICAgKiBAcmV0dXJucyB7aW1wb3J0KCcuLi90eXBlcy9pbmRleC5qcycpLkFjdGl2ZUVsZW1lbnRbXX0gLSBUaGUgYWN0aXZlIGVsZW1lbnRzXG4gICAqIEBwcmF2YXRlXG4gICAqL1xuICBfZ2V0QWN0aXZlRWxlbWVudHMoZSwgbGFzdEFjdGl2ZSwgaW5DaGFydEFyZWEsIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICBpZiAoZS50eXBlID09PSAnbW91c2VvdXQnKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgaWYgKCFpbkNoYXJ0QXJlYSkge1xuICAgICAgLy8gTGV0IHVzZXIgY29udHJvbCB0aGUgYWN0aXZlIGVsZW1lbnRzIG91dHNpZGUgY2hhcnRBcmVhLiBFZy4gdXNpbmcgTGVnZW5kLlxuICAgICAgcmV0dXJuIGxhc3RBY3RpdmU7XG4gICAgfVxuXG4gICAgY29uc3QgaG92ZXJPcHRpb25zID0gdGhpcy5vcHRpb25zLmhvdmVyO1xuICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRzQXRFdmVudEZvck1vZGUoZSwgaG92ZXJPcHRpb25zLm1vZGUsIGhvdmVyT3B0aW9ucywgdXNlRmluYWxQb3NpdGlvbik7XG4gIH1cbn1cblxuLy8gQHRzLWlnbm9yZVxuZnVuY3Rpb24gaW52YWxpZGF0ZVBsdWdpbnMoKSB7XG4gIHJldHVybiBlYWNoKENoYXJ0Lmluc3RhbmNlcywgKGNoYXJ0KSA9PiBjaGFydC5fcGx1Z2lucy5pbnZhbGlkYXRlKCkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDaGFydDtcbiIsICJpbXBvcnQgRWxlbWVudCBmcm9tICcuLi9jb3JlL2NvcmUuZWxlbWVudC5qcyc7XG5pbXBvcnQge19hbmdsZUJldHdlZW4sIGdldEFuZ2xlRnJvbVBvaW50LCBUQVUsIEhBTEZfUEksIHZhbHVlT3JEZWZhdWx0fSBmcm9tICcuLi9oZWxwZXJzL2luZGV4LmpzJztcbmltcG9ydCB7UEksIF9pc0JldHdlZW4sIF9saW1pdFZhbHVlfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMubWF0aC5qcyc7XG5pbXBvcnQge19yZWFkVmFsdWVUb1Byb3BzfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMub3B0aW9ucy5qcyc7XG5pbXBvcnQgdHlwZSB7QXJjT3B0aW9ucywgUG9pbnR9IGZyb20gJy4uL3R5cGVzL2luZGV4LmpzJztcblxuXG5mdW5jdGlvbiBjbGlwQXJjKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBlbGVtZW50OiBBcmNFbGVtZW50LCBlbmRBbmdsZTogbnVtYmVyKSB7XG4gIGNvbnN0IHtzdGFydEFuZ2xlLCBwaXhlbE1hcmdpbiwgeCwgeSwgb3V0ZXJSYWRpdXMsIGlubmVyUmFkaXVzfSA9IGVsZW1lbnQ7XG4gIGxldCBhbmdsZU1hcmdpbiA9IHBpeGVsTWFyZ2luIC8gb3V0ZXJSYWRpdXM7XG5cbiAgLy8gRHJhdyBhbiBpbm5lciBib3JkZXIgYnkgY2xpcHBpbmcgdGhlIGFyYyBhbmQgZHJhd2luZyBhIGRvdWJsZS13aWR0aCBib3JkZXJcbiAgLy8gRW5sYXJnZSB0aGUgY2xpcHBpbmcgYXJjIGJ5IDAuMzMgcGl4ZWxzIHRvIGVsaW1pbmF0ZSBnbGl0Y2hlcyBiZXR3ZWVuIGJvcmRlcnNcbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHguYXJjKHgsIHksIG91dGVyUmFkaXVzLCBzdGFydEFuZ2xlIC0gYW5nbGVNYXJnaW4sIGVuZEFuZ2xlICsgYW5nbGVNYXJnaW4pO1xuICBpZiAoaW5uZXJSYWRpdXMgPiBwaXhlbE1hcmdpbikge1xuICAgIGFuZ2xlTWFyZ2luID0gcGl4ZWxNYXJnaW4gLyBpbm5lclJhZGl1cztcbiAgICBjdHguYXJjKHgsIHksIGlubmVyUmFkaXVzLCBlbmRBbmdsZSArIGFuZ2xlTWFyZ2luLCBzdGFydEFuZ2xlIC0gYW5nbGVNYXJnaW4sIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIGN0eC5hcmMoeCwgeSwgcGl4ZWxNYXJnaW4sIGVuZEFuZ2xlICsgSEFMRl9QSSwgc3RhcnRBbmdsZSAtIEhBTEZfUEkpO1xuICB9XG4gIGN0eC5jbG9zZVBhdGgoKTtcbiAgY3R4LmNsaXAoKTtcbn1cblxuZnVuY3Rpb24gdG9SYWRpdXNDb3JuZXJzKHZhbHVlKSB7XG4gIHJldHVybiBfcmVhZFZhbHVlVG9Qcm9wcyh2YWx1ZSwgWydvdXRlclN0YXJ0JywgJ291dGVyRW5kJywgJ2lubmVyU3RhcnQnLCAnaW5uZXJFbmQnXSk7XG59XG5cbi8qKlxuICogUGFyc2UgYm9yZGVyIHJhZGl1cyBmcm9tIHRoZSBwcm92aWRlZCBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQm9yZGVyUmFkaXVzKGFyYzogQXJjRWxlbWVudCwgaW5uZXJSYWRpdXM6IG51bWJlciwgb3V0ZXJSYWRpdXM6IG51bWJlciwgYW5nbGVEZWx0YTogbnVtYmVyKSB7XG4gIGNvbnN0IG8gPSB0b1JhZGl1c0Nvcm5lcnMoYXJjLm9wdGlvbnMuYm9yZGVyUmFkaXVzKTtcbiAgY29uc3QgaGFsZlRoaWNrbmVzcyA9IChvdXRlclJhZGl1cyAtIGlubmVyUmFkaXVzKSAvIDI7XG4gIGNvbnN0IGlubmVyTGltaXQgPSBNYXRoLm1pbihoYWxmVGhpY2tuZXNzLCBhbmdsZURlbHRhICogaW5uZXJSYWRpdXMgLyAyKTtcblxuICAvLyBPdXRlciBsaW1pdHMgYXJlIGNvbXBsaWNhdGVkLiBXZSB3YW50IHRvIGNvbXB1dGUgdGhlIGF2YWlsYWJsZSBhbmd1bGFyIGRpc3RhbmNlIGF0XG4gIC8vIGEgcmFkaXVzIG9mIG91dGVyUmFkaXVzIC0gYm9yZGVyUmFkaXVzIGJlY2F1c2UgZm9yIHNtYWxsIGFuZ3VsYXIgZGlzdGFuY2VzLCB0aGlzIHRlcm0gbGltaXRzLlxuICAvLyBXZSBjb21wdXRlIGF0IHIgPSBvdXRlclJhZGl1cyAtIGJvcmRlclJhZGl1cyBiZWNhdXNlIHRoaXMgY2lyY2xlIGRlZmluZXMgdGhlIGNlbnRlciBvZiB0aGUgYm9yZGVyIGNvcm5lcnMuXG4gIC8vXG4gIC8vIElmIHRoZSBib3JkZXJSYWRpdXMgaXMgbGFyZ2UsIHRoYXQgdmFsdWUgY2FuIGJlY29tZSBuZWdhdGl2ZS5cbiAgLy8gVGhpcyBjYXVzZXMgdGhlIG91dGVyIGJvcmRlcnMgdG8gbG9zZSB0aGVpciByYWRpdXMgZW50aXJlbHksIHdoaWNoIGlzIHJhdGhlciB1bmV4cGVjdGVkLiBUbyBzb2x2ZSB0aGF0LCBpZiBib3JkZXJSYWRpdXMgPiBvdXRlclJhZGl1c1xuICAvLyB3ZSBrbm93IHRoYXQgdGhlIHRoaWNrbmVzcyB0ZXJtIHdpbGwgZG9taW5hdGUgYW5kIGNvbXB1dGUgdGhlIGxpbWl0cyBhdCB0aGF0IHBvaW50XG4gIGNvbnN0IGNvbXB1dGVPdXRlckxpbWl0ID0gKHZhbCkgPT4ge1xuICAgIGNvbnN0IG91dGVyQXJjTGltaXQgPSAob3V0ZXJSYWRpdXMgLSBNYXRoLm1pbihoYWxmVGhpY2tuZXNzLCB2YWwpKSAqIGFuZ2xlRGVsdGEgLyAyO1xuICAgIHJldHVybiBfbGltaXRWYWx1ZSh2YWwsIDAsIE1hdGgubWluKGhhbGZUaGlja25lc3MsIG91dGVyQXJjTGltaXQpKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIG91dGVyU3RhcnQ6IGNvbXB1dGVPdXRlckxpbWl0KG8ub3V0ZXJTdGFydCksXG4gICAgb3V0ZXJFbmQ6IGNvbXB1dGVPdXRlckxpbWl0KG8ub3V0ZXJFbmQpLFxuICAgIGlubmVyU3RhcnQ6IF9saW1pdFZhbHVlKG8uaW5uZXJTdGFydCwgMCwgaW5uZXJMaW1pdCksXG4gICAgaW5uZXJFbmQ6IF9saW1pdFZhbHVlKG8uaW5uZXJFbmQsIDAsIGlubmVyTGltaXQpLFxuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnQgKHIsIFx1RDgzNVx1REYwMykgdG8gKHgsIHkpXG4gKi9cbmZ1bmN0aW9uIHJUaGV0YVRvWFkocjogbnVtYmVyLCB0aGV0YTogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICByZXR1cm4ge1xuICAgIHg6IHggKyByICogTWF0aC5jb3ModGhldGEpLFxuICAgIHk6IHkgKyByICogTWF0aC5zaW4odGhldGEpLFxuICB9O1xufVxuXG5cbi8qKlxuICogUGF0aCB0aGUgYXJjLCByZXNwZWN0aW5nIGJvcmRlciByYWRpdXMgYnkgc2VwYXJhdGluZyBpbnRvIGxlZnQgYW5kIHJpZ2h0IGhhbHZlcy5cbiAqXG4gKiAgIFN0YXJ0ICAgICAgRW5kXG4gKlxuICogICAgMS0tLT5hLS0tPjIgICAgT3V0ZXJcbiAqICAgLyAgICAgICAgICAgXFxcbiAqICAgOCAgICAgICAgICAgM1xuICogICB8ICAgICAgICAgICB8XG4gKiAgIHwgICAgICAgICAgIHxcbiAqICAgNyAgICAgICAgICAgNFxuICogICBcXCAgICAgICAgICAgL1xuICogICAgNjwtLS1iPC0tLTUgICAgSW5uZXJcbiAqL1xuZnVuY3Rpb24gcGF0aEFyYyhcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIGVsZW1lbnQ6IEFyY0VsZW1lbnQsXG4gIG9mZnNldDogbnVtYmVyLFxuICBzcGFjaW5nOiBudW1iZXIsXG4gIGVuZDogbnVtYmVyLFxuICBjaXJjdWxhcjogYm9vbGVhbixcbikge1xuICBjb25zdCB7eCwgeSwgc3RhcnRBbmdsZTogc3RhcnQsIHBpeGVsTWFyZ2luLCBpbm5lclJhZGl1czogaW5uZXJSfSA9IGVsZW1lbnQ7XG5cbiAgY29uc3Qgb3V0ZXJSYWRpdXMgPSBNYXRoLm1heChlbGVtZW50Lm91dGVyUmFkaXVzICsgc3BhY2luZyArIG9mZnNldCAtIHBpeGVsTWFyZ2luLCAwKTtcbiAgY29uc3QgaW5uZXJSYWRpdXMgPSBpbm5lclIgPiAwID8gaW5uZXJSICsgc3BhY2luZyArIG9mZnNldCArIHBpeGVsTWFyZ2luIDogMDtcblxuICBsZXQgc3BhY2luZ09mZnNldCA9IDA7XG4gIGNvbnN0IGFscGhhID0gZW5kIC0gc3RhcnQ7XG5cbiAgaWYgKHNwYWNpbmcpIHtcbiAgICAvLyBXaGVuIHNwYWNpbmcgaXMgcHJlc2VudCwgaXQgaXMgdGhlIHNhbWUgZm9yIGFsbCBpdGVtc1xuICAgIC8vIFNvIHdlIGFkanVzdCB0aGUgc3RhcnQgYW5kIGVuZCBhbmdsZSBvZiB0aGUgYXJjIHN1Y2ggdGhhdFxuICAgIC8vIHRoZSBkaXN0YW5jZSBpcyB0aGUgc2FtZSBhcyBpdCB3b3VsZCBiZSB3aXRob3V0IHRoZSBzcGFjaW5nXG4gICAgY29uc3Qgbm9TcGFjaW5nSW5uZXJSYWRpdXMgPSBpbm5lclIgPiAwID8gaW5uZXJSIC0gc3BhY2luZyA6IDA7XG4gICAgY29uc3Qgbm9TcGFjaW5nT3V0ZXJSYWRpdXMgPSBvdXRlclJhZGl1cyA+IDAgPyBvdXRlclJhZGl1cyAtIHNwYWNpbmcgOiAwO1xuICAgIGNvbnN0IGF2Tm9nU3BhY2luZ1JhZGl1cyA9IChub1NwYWNpbmdJbm5lclJhZGl1cyArIG5vU3BhY2luZ091dGVyUmFkaXVzKSAvIDI7XG4gICAgY29uc3QgYWRqdXN0ZWRBbmdsZSA9IGF2Tm9nU3BhY2luZ1JhZGl1cyAhPT0gMCA/IChhbHBoYSAqIGF2Tm9nU3BhY2luZ1JhZGl1cykgLyAoYXZOb2dTcGFjaW5nUmFkaXVzICsgc3BhY2luZykgOiBhbHBoYTtcbiAgICBzcGFjaW5nT2Zmc2V0ID0gKGFscGhhIC0gYWRqdXN0ZWRBbmdsZSkgLyAyO1xuICB9XG5cbiAgY29uc3QgYmV0YSA9IE1hdGgubWF4KDAuMDAxLCBhbHBoYSAqIG91dGVyUmFkaXVzIC0gb2Zmc2V0IC8gUEkpIC8gb3V0ZXJSYWRpdXM7XG4gIGNvbnN0IGFuZ2xlT2Zmc2V0ID0gKGFscGhhIC0gYmV0YSkgLyAyO1xuICBjb25zdCBzdGFydEFuZ2xlID0gc3RhcnQgKyBhbmdsZU9mZnNldCArIHNwYWNpbmdPZmZzZXQ7XG4gIGNvbnN0IGVuZEFuZ2xlID0gZW5kIC0gYW5nbGVPZmZzZXQgLSBzcGFjaW5nT2Zmc2V0O1xuICBjb25zdCB7b3V0ZXJTdGFydCwgb3V0ZXJFbmQsIGlubmVyU3RhcnQsIGlubmVyRW5kfSA9IHBhcnNlQm9yZGVyUmFkaXVzKGVsZW1lbnQsIGlubmVyUmFkaXVzLCBvdXRlclJhZGl1cywgZW5kQW5nbGUgLSBzdGFydEFuZ2xlKTtcblxuICBjb25zdCBvdXRlclN0YXJ0QWRqdXN0ZWRSYWRpdXMgPSBvdXRlclJhZGl1cyAtIG91dGVyU3RhcnQ7XG4gIGNvbnN0IG91dGVyRW5kQWRqdXN0ZWRSYWRpdXMgPSBvdXRlclJhZGl1cyAtIG91dGVyRW5kO1xuICBjb25zdCBvdXRlclN0YXJ0QWRqdXN0ZWRBbmdsZSA9IHN0YXJ0QW5nbGUgKyBvdXRlclN0YXJ0IC8gb3V0ZXJTdGFydEFkanVzdGVkUmFkaXVzO1xuICBjb25zdCBvdXRlckVuZEFkanVzdGVkQW5nbGUgPSBlbmRBbmdsZSAtIG91dGVyRW5kIC8gb3V0ZXJFbmRBZGp1c3RlZFJhZGl1cztcblxuICBjb25zdCBpbm5lclN0YXJ0QWRqdXN0ZWRSYWRpdXMgPSBpbm5lclJhZGl1cyArIGlubmVyU3RhcnQ7XG4gIGNvbnN0IGlubmVyRW5kQWRqdXN0ZWRSYWRpdXMgPSBpbm5lclJhZGl1cyArIGlubmVyRW5kO1xuICBjb25zdCBpbm5lclN0YXJ0QWRqdXN0ZWRBbmdsZSA9IHN0YXJ0QW5nbGUgKyBpbm5lclN0YXJ0IC8gaW5uZXJTdGFydEFkanVzdGVkUmFkaXVzO1xuICBjb25zdCBpbm5lckVuZEFkanVzdGVkQW5nbGUgPSBlbmRBbmdsZSAtIGlubmVyRW5kIC8gaW5uZXJFbmRBZGp1c3RlZFJhZGl1cztcblxuICBjdHguYmVnaW5QYXRoKCk7XG5cbiAgaWYgKGNpcmN1bGFyKSB7XG4gICAgLy8gVGhlIGZpcnN0IGFyYyBzZWdtZW50cyBmcm9tIHBvaW50IDEgdG8gcG9pbnQgYSB0byBwb2ludCAyXG4gICAgY29uc3Qgb3V0ZXJNaWRBZGp1c3RlZEFuZ2xlID0gKG91dGVyU3RhcnRBZGp1c3RlZEFuZ2xlICsgb3V0ZXJFbmRBZGp1c3RlZEFuZ2xlKSAvIDI7XG4gICAgY3R4LmFyYyh4LCB5LCBvdXRlclJhZGl1cywgb3V0ZXJTdGFydEFkanVzdGVkQW5nbGUsIG91dGVyTWlkQWRqdXN0ZWRBbmdsZSk7XG4gICAgY3R4LmFyYyh4LCB5LCBvdXRlclJhZGl1cywgb3V0ZXJNaWRBZGp1c3RlZEFuZ2xlLCBvdXRlckVuZEFkanVzdGVkQW5nbGUpO1xuXG4gICAgLy8gVGhlIGNvcm5lciBzZWdtZW50IGZyb20gcG9pbnQgMiB0byBwb2ludCAzXG4gICAgaWYgKG91dGVyRW5kID4gMCkge1xuICAgICAgY29uc3QgcENlbnRlciA9IHJUaGV0YVRvWFkob3V0ZXJFbmRBZGp1c3RlZFJhZGl1cywgb3V0ZXJFbmRBZGp1c3RlZEFuZ2xlLCB4LCB5KTtcbiAgICAgIGN0eC5hcmMocENlbnRlci54LCBwQ2VudGVyLnksIG91dGVyRW5kLCBvdXRlckVuZEFkanVzdGVkQW5nbGUsIGVuZEFuZ2xlICsgSEFMRl9QSSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIGxpbmUgZnJvbSBwb2ludCAzIHRvIHBvaW50IDRcbiAgICBjb25zdCBwNCA9IHJUaGV0YVRvWFkoaW5uZXJFbmRBZGp1c3RlZFJhZGl1cywgZW5kQW5nbGUsIHgsIHkpO1xuICAgIGN0eC5saW5lVG8ocDQueCwgcDQueSk7XG5cbiAgICAvLyBUaGUgY29ybmVyIHNlZ21lbnQgZnJvbSBwb2ludCA0IHRvIHBvaW50IDVcbiAgICBpZiAoaW5uZXJFbmQgPiAwKSB7XG4gICAgICBjb25zdCBwQ2VudGVyID0gclRoZXRhVG9YWShpbm5lckVuZEFkanVzdGVkUmFkaXVzLCBpbm5lckVuZEFkanVzdGVkQW5nbGUsIHgsIHkpO1xuICAgICAgY3R4LmFyYyhwQ2VudGVyLngsIHBDZW50ZXIueSwgaW5uZXJFbmQsIGVuZEFuZ2xlICsgSEFMRl9QSSwgaW5uZXJFbmRBZGp1c3RlZEFuZ2xlICsgTWF0aC5QSSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIGlubmVyIGFyYyBmcm9tIHBvaW50IDUgdG8gcG9pbnQgYiB0byBwb2ludCA2XG4gICAgY29uc3QgaW5uZXJNaWRBZGp1c3RlZEFuZ2xlID0gKChlbmRBbmdsZSAtIChpbm5lckVuZCAvIGlubmVyUmFkaXVzKSkgKyAoc3RhcnRBbmdsZSArIChpbm5lclN0YXJ0IC8gaW5uZXJSYWRpdXMpKSkgLyAyO1xuICAgIGN0eC5hcmMoeCwgeSwgaW5uZXJSYWRpdXMsIGVuZEFuZ2xlIC0gKGlubmVyRW5kIC8gaW5uZXJSYWRpdXMpLCBpbm5lck1pZEFkanVzdGVkQW5nbGUsIHRydWUpO1xuICAgIGN0eC5hcmMoeCwgeSwgaW5uZXJSYWRpdXMsIGlubmVyTWlkQWRqdXN0ZWRBbmdsZSwgc3RhcnRBbmdsZSArIChpbm5lclN0YXJ0IC8gaW5uZXJSYWRpdXMpLCB0cnVlKTtcblxuICAgIC8vIFRoZSBjb3JuZXIgc2VnbWVudCBmcm9tIHBvaW50IDYgdG8gcG9pbnQgN1xuICAgIGlmIChpbm5lclN0YXJ0ID4gMCkge1xuICAgICAgY29uc3QgcENlbnRlciA9IHJUaGV0YVRvWFkoaW5uZXJTdGFydEFkanVzdGVkUmFkaXVzLCBpbm5lclN0YXJ0QWRqdXN0ZWRBbmdsZSwgeCwgeSk7XG4gICAgICBjdHguYXJjKHBDZW50ZXIueCwgcENlbnRlci55LCBpbm5lclN0YXJ0LCBpbm5lclN0YXJ0QWRqdXN0ZWRBbmdsZSArIE1hdGguUEksIHN0YXJ0QW5nbGUgLSBIQUxGX1BJKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgbGluZSBmcm9tIHBvaW50IDcgdG8gcG9pbnQgOFxuICAgIGNvbnN0IHA4ID0gclRoZXRhVG9YWShvdXRlclN0YXJ0QWRqdXN0ZWRSYWRpdXMsIHN0YXJ0QW5nbGUsIHgsIHkpO1xuICAgIGN0eC5saW5lVG8ocDgueCwgcDgueSk7XG5cbiAgICAvLyBUaGUgY29ybmVyIHNlZ21lbnQgZnJvbSBwb2ludCA4IHRvIHBvaW50IDFcbiAgICBpZiAob3V0ZXJTdGFydCA+IDApIHtcbiAgICAgIGNvbnN0IHBDZW50ZXIgPSByVGhldGFUb1hZKG91dGVyU3RhcnRBZGp1c3RlZFJhZGl1cywgb3V0ZXJTdGFydEFkanVzdGVkQW5nbGUsIHgsIHkpO1xuICAgICAgY3R4LmFyYyhwQ2VudGVyLngsIHBDZW50ZXIueSwgb3V0ZXJTdGFydCwgc3RhcnRBbmdsZSAtIEhBTEZfUEksIG91dGVyU3RhcnRBZGp1c3RlZEFuZ2xlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY3R4Lm1vdmVUbyh4LCB5KTtcblxuICAgIGNvbnN0IG91dGVyU3RhcnRYID0gTWF0aC5jb3Mob3V0ZXJTdGFydEFkanVzdGVkQW5nbGUpICogb3V0ZXJSYWRpdXMgKyB4O1xuICAgIGNvbnN0IG91dGVyU3RhcnRZID0gTWF0aC5zaW4ob3V0ZXJTdGFydEFkanVzdGVkQW5nbGUpICogb3V0ZXJSYWRpdXMgKyB5O1xuICAgIGN0eC5saW5lVG8ob3V0ZXJTdGFydFgsIG91dGVyU3RhcnRZKTtcblxuICAgIGNvbnN0IG91dGVyRW5kWCA9IE1hdGguY29zKG91dGVyRW5kQWRqdXN0ZWRBbmdsZSkgKiBvdXRlclJhZGl1cyArIHg7XG4gICAgY29uc3Qgb3V0ZXJFbmRZID0gTWF0aC5zaW4ob3V0ZXJFbmRBZGp1c3RlZEFuZ2xlKSAqIG91dGVyUmFkaXVzICsgeTtcbiAgICBjdHgubGluZVRvKG91dGVyRW5kWCwgb3V0ZXJFbmRZKTtcbiAgfVxuXG4gIGN0eC5jbG9zZVBhdGgoKTtcbn1cblxuZnVuY3Rpb24gZHJhd0FyYyhcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIGVsZW1lbnQ6IEFyY0VsZW1lbnQsXG4gIG9mZnNldDogbnVtYmVyLFxuICBzcGFjaW5nOiBudW1iZXIsXG4gIGNpcmN1bGFyOiBib29sZWFuLFxuKSB7XG4gIGNvbnN0IHtmdWxsQ2lyY2xlcywgc3RhcnRBbmdsZSwgY2lyY3VtZmVyZW5jZX0gPSBlbGVtZW50O1xuICBsZXQgZW5kQW5nbGUgPSBlbGVtZW50LmVuZEFuZ2xlO1xuICBpZiAoZnVsbENpcmNsZXMpIHtcbiAgICBwYXRoQXJjKGN0eCwgZWxlbWVudCwgb2Zmc2V0LCBzcGFjaW5nLCBlbmRBbmdsZSwgY2lyY3VsYXIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnVsbENpcmNsZXM7ICsraSkge1xuICAgICAgY3R4LmZpbGwoKTtcbiAgICB9XG4gICAgaWYgKCFpc05hTihjaXJjdW1mZXJlbmNlKSkge1xuICAgICAgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgKGNpcmN1bWZlcmVuY2UgJSBUQVUgfHwgVEFVKTtcbiAgICB9XG4gIH1cbiAgcGF0aEFyYyhjdHgsIGVsZW1lbnQsIG9mZnNldCwgc3BhY2luZywgZW5kQW5nbGUsIGNpcmN1bGFyKTtcbiAgY3R4LmZpbGwoKTtcbiAgcmV0dXJuIGVuZEFuZ2xlO1xufVxuXG5mdW5jdGlvbiBkcmF3Qm9yZGVyKFxuICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgZWxlbWVudDogQXJjRWxlbWVudCxcbiAgb2Zmc2V0OiBudW1iZXIsXG4gIHNwYWNpbmc6IG51bWJlcixcbiAgY2lyY3VsYXI6IGJvb2xlYW4sXG4pIHtcbiAgY29uc3Qge2Z1bGxDaXJjbGVzLCBzdGFydEFuZ2xlLCBjaXJjdW1mZXJlbmNlLCBvcHRpb25zfSA9IGVsZW1lbnQ7XG4gIGNvbnN0IHtib3JkZXJXaWR0aCwgYm9yZGVySm9pblN0eWxlLCBib3JkZXJEYXNoLCBib3JkZXJEYXNoT2Zmc2V0fSA9IG9wdGlvbnM7XG4gIGNvbnN0IGlubmVyID0gb3B0aW9ucy5ib3JkZXJBbGlnbiA9PT0gJ2lubmVyJztcblxuICBpZiAoIWJvcmRlcldpZHRoKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY3R4LnNldExpbmVEYXNoKGJvcmRlckRhc2ggfHwgW10pO1xuICBjdHgubGluZURhc2hPZmZzZXQgPSBib3JkZXJEYXNoT2Zmc2V0O1xuXG4gIGlmIChpbm5lcikge1xuICAgIGN0eC5saW5lV2lkdGggPSBib3JkZXJXaWR0aCAqIDI7XG4gICAgY3R4LmxpbmVKb2luID0gYm9yZGVySm9pblN0eWxlIHx8ICdyb3VuZCc7XG4gIH0gZWxzZSB7XG4gICAgY3R4LmxpbmVXaWR0aCA9IGJvcmRlcldpZHRoO1xuICAgIGN0eC5saW5lSm9pbiA9IGJvcmRlckpvaW5TdHlsZSB8fCAnYmV2ZWwnO1xuICB9XG5cbiAgbGV0IGVuZEFuZ2xlID0gZWxlbWVudC5lbmRBbmdsZTtcbiAgaWYgKGZ1bGxDaXJjbGVzKSB7XG4gICAgcGF0aEFyYyhjdHgsIGVsZW1lbnQsIG9mZnNldCwgc3BhY2luZywgZW5kQW5nbGUsIGNpcmN1bGFyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZ1bGxDaXJjbGVzOyArK2kpIHtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG4gICAgaWYgKCFpc05hTihjaXJjdW1mZXJlbmNlKSkge1xuICAgICAgZW5kQW5nbGUgPSBzdGFydEFuZ2xlICsgKGNpcmN1bWZlcmVuY2UgJSBUQVUgfHwgVEFVKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5uZXIpIHtcbiAgICBjbGlwQXJjKGN0eCwgZWxlbWVudCwgZW5kQW5nbGUpO1xuICB9XG5cbiAgaWYgKCFmdWxsQ2lyY2xlcykge1xuICAgIHBhdGhBcmMoY3R4LCBlbGVtZW50LCBvZmZzZXQsIHNwYWNpbmcsIGVuZEFuZ2xlLCBjaXJjdWxhcik7XG4gICAgY3R4LnN0cm9rZSgpO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXJjUHJvcHMgZXh0ZW5kcyBQb2ludCB7XG4gIHN0YXJ0QW5nbGU6IG51bWJlcjtcbiAgZW5kQW5nbGU6IG51bWJlcjtcbiAgaW5uZXJSYWRpdXM6IG51bWJlcjtcbiAgb3V0ZXJSYWRpdXM6IG51bWJlcjtcbiAgY2lyY3VtZmVyZW5jZTogbnVtYmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcmNFbGVtZW50IGV4dGVuZHMgRWxlbWVudDxBcmNQcm9wcywgQXJjT3B0aW9ucz4ge1xuXG4gIHN0YXRpYyBpZCA9ICdhcmMnO1xuXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICBib3JkZXJBbGlnbjogJ2NlbnRlcicsXG4gICAgYm9yZGVyQ29sb3I6ICcjZmZmJyxcbiAgICBib3JkZXJEYXNoOiBbXSxcbiAgICBib3JkZXJEYXNoT2Zmc2V0OiAwLFxuICAgIGJvcmRlckpvaW5TdHlsZTogdW5kZWZpbmVkLFxuICAgIGJvcmRlclJhZGl1czogMCxcbiAgICBib3JkZXJXaWR0aDogMixcbiAgICBvZmZzZXQ6IDAsXG4gICAgc3BhY2luZzogMCxcbiAgICBhbmdsZTogdW5kZWZpbmVkLFxuICAgIGNpcmN1bGFyOiB0cnVlLFxuICB9O1xuXG4gIHN0YXRpYyBkZWZhdWx0Um91dGVzID0ge1xuICAgIGJhY2tncm91bmRDb2xvcjogJ2JhY2tncm91bmRDb2xvcidcbiAgfTtcblxuICBzdGF0aWMgZGVzY3JpcHRvcnMgPSB7XG4gICAgX3NjcmlwdGFibGU6IHRydWUsXG4gICAgX2luZGV4YWJsZTogKG5hbWUpID0+IG5hbWUgIT09ICdib3JkZXJEYXNoJ1xuICB9O1xuXG4gIGNpcmN1bWZlcmVuY2U6IG51bWJlcjtcbiAgZW5kQW5nbGU6IG51bWJlcjtcbiAgZnVsbENpcmNsZXM6IG51bWJlcjtcbiAgaW5uZXJSYWRpdXM6IG51bWJlcjtcbiAgb3V0ZXJSYWRpdXM6IG51bWJlcjtcbiAgcGl4ZWxNYXJnaW46IG51bWJlcjtcbiAgc3RhcnRBbmdsZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNmZykge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5jaXJjdW1mZXJlbmNlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc3RhcnRBbmdsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVuZEFuZ2xlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaW5uZXJSYWRpdXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vdXRlclJhZGl1cyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBpeGVsTWFyZ2luID0gMDtcbiAgICB0aGlzLmZ1bGxDaXJjbGVzID0gMDtcblxuICAgIGlmIChjZmcpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY2ZnKTtcbiAgICB9XG4gIH1cblxuICBpblJhbmdlKGNoYXJ0WDogbnVtYmVyLCBjaGFydFk6IG51bWJlciwgdXNlRmluYWxQb3NpdGlvbjogYm9vbGVhbikge1xuICAgIGNvbnN0IHBvaW50ID0gdGhpcy5nZXRQcm9wcyhbJ3gnLCAneSddLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICBjb25zdCB7YW5nbGUsIGRpc3RhbmNlfSA9IGdldEFuZ2xlRnJvbVBvaW50KHBvaW50LCB7eDogY2hhcnRYLCB5OiBjaGFydFl9KTtcbiAgICBjb25zdCB7c3RhcnRBbmdsZSwgZW5kQW5nbGUsIGlubmVyUmFkaXVzLCBvdXRlclJhZGl1cywgY2lyY3VtZmVyZW5jZX0gPSB0aGlzLmdldFByb3BzKFtcbiAgICAgICdzdGFydEFuZ2xlJyxcbiAgICAgICdlbmRBbmdsZScsXG4gICAgICAnaW5uZXJSYWRpdXMnLFxuICAgICAgJ291dGVyUmFkaXVzJyxcbiAgICAgICdjaXJjdW1mZXJlbmNlJ1xuICAgIF0sIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIGNvbnN0IHJBZGp1c3QgPSAodGhpcy5vcHRpb25zLnNwYWNpbmcgKyB0aGlzLm9wdGlvbnMuYm9yZGVyV2lkdGgpIC8gMjtcbiAgICBjb25zdCBfY2lyY3VtZmVyZW5jZSA9IHZhbHVlT3JEZWZhdWx0KGNpcmN1bWZlcmVuY2UsIGVuZEFuZ2xlIC0gc3RhcnRBbmdsZSk7XG4gICAgY29uc3QgYmV0d2VlbkFuZ2xlcyA9IF9jaXJjdW1mZXJlbmNlID49IFRBVSB8fCBfYW5nbGVCZXR3ZWVuKGFuZ2xlLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSk7XG4gICAgY29uc3Qgd2l0aGluUmFkaXVzID0gX2lzQmV0d2VlbihkaXN0YW5jZSwgaW5uZXJSYWRpdXMgKyByQWRqdXN0LCBvdXRlclJhZGl1cyArIHJBZGp1c3QpO1xuXG4gICAgcmV0dXJuIChiZXR3ZWVuQW5nbGVzICYmIHdpdGhpblJhZGl1cyk7XG4gIH1cblxuICBnZXRDZW50ZXJQb2ludCh1c2VGaW5hbFBvc2l0aW9uOiBib29sZWFuKSB7XG4gICAgY29uc3Qge3gsIHksIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBpbm5lclJhZGl1cywgb3V0ZXJSYWRpdXN9ID0gdGhpcy5nZXRQcm9wcyhbXG4gICAgICAneCcsXG4gICAgICAneScsXG4gICAgICAnc3RhcnRBbmdsZScsXG4gICAgICAnZW5kQW5nbGUnLFxuICAgICAgJ2lubmVyUmFkaXVzJyxcbiAgICAgICdvdXRlclJhZGl1cydcbiAgICBdLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgICBjb25zdCB7b2Zmc2V0LCBzcGFjaW5nfSA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBoYWxmQW5nbGUgPSAoc3RhcnRBbmdsZSArIGVuZEFuZ2xlKSAvIDI7XG4gICAgY29uc3QgaGFsZlJhZGl1cyA9IChpbm5lclJhZGl1cyArIG91dGVyUmFkaXVzICsgc3BhY2luZyArIG9mZnNldCkgLyAyO1xuICAgIHJldHVybiB7XG4gICAgICB4OiB4ICsgTWF0aC5jb3MoaGFsZkFuZ2xlKSAqIGhhbGZSYWRpdXMsXG4gICAgICB5OiB5ICsgTWF0aC5zaW4oaGFsZkFuZ2xlKSAqIGhhbGZSYWRpdXNcbiAgICB9O1xuICB9XG5cbiAgdG9vbHRpcFBvc2l0aW9uKHVzZUZpbmFsUG9zaXRpb246IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDZW50ZXJQb2ludCh1c2VGaW5hbFBvc2l0aW9uKTtcbiAgfVxuXG4gIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjb25zdCB7b3B0aW9ucywgY2lyY3VtZmVyZW5jZX0gPSB0aGlzO1xuICAgIGNvbnN0IG9mZnNldCA9IChvcHRpb25zLm9mZnNldCB8fCAwKSAvIDQ7XG4gICAgY29uc3Qgc3BhY2luZyA9IChvcHRpb25zLnNwYWNpbmcgfHwgMCkgLyAyO1xuICAgIGNvbnN0IGNpcmN1bGFyID0gb3B0aW9ucy5jaXJjdWxhcjtcbiAgICB0aGlzLnBpeGVsTWFyZ2luID0gKG9wdGlvbnMuYm9yZGVyQWxpZ24gPT09ICdpbm5lcicpID8gMC4zMyA6IDA7XG4gICAgdGhpcy5mdWxsQ2lyY2xlcyA9IGNpcmN1bWZlcmVuY2UgPiBUQVUgPyBNYXRoLmZsb29yKGNpcmN1bWZlcmVuY2UgLyBUQVUpIDogMDtcblxuICAgIGlmIChjaXJjdW1mZXJlbmNlID09PSAwIHx8IHRoaXMuaW5uZXJSYWRpdXMgPCAwIHx8IHRoaXMub3V0ZXJSYWRpdXMgPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY3R4LnNhdmUoKTtcblxuICAgIGNvbnN0IGhhbGZBbmdsZSA9ICh0aGlzLnN0YXJ0QW5nbGUgKyB0aGlzLmVuZEFuZ2xlKSAvIDI7XG4gICAgY3R4LnRyYW5zbGF0ZShNYXRoLmNvcyhoYWxmQW5nbGUpICogb2Zmc2V0LCBNYXRoLnNpbihoYWxmQW5nbGUpICogb2Zmc2V0KTtcbiAgICBjb25zdCBmaXggPSAxIC0gTWF0aC5zaW4oTWF0aC5taW4oUEksIGNpcmN1bWZlcmVuY2UgfHwgMCkpO1xuICAgIGNvbnN0IHJhZGl1c09mZnNldCA9IG9mZnNldCAqIGZpeDtcblxuICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLmJhY2tncm91bmRDb2xvcjtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSBvcHRpb25zLmJvcmRlckNvbG9yO1xuXG4gICAgZHJhd0FyYyhjdHgsIHRoaXMsIHJhZGl1c09mZnNldCwgc3BhY2luZywgY2lyY3VsYXIpO1xuICAgIGRyYXdCb3JkZXIoY3R4LCB0aGlzLCByYWRpdXNPZmZzZXQsIHNwYWNpbmcsIGNpcmN1bGFyKTtcblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgRWxlbWVudCBmcm9tICcuLi9jb3JlL2NvcmUuZWxlbWVudC5qcyc7XG5pbXBvcnQge19iZXppZXJJbnRlcnBvbGF0aW9uLCBfcG9pbnRJbkxpbmUsIF9zdGVwcGVkSW50ZXJwb2xhdGlvbn0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmludGVycG9sYXRpb24uanMnO1xuaW1wb3J0IHtfY29tcHV0ZVNlZ21lbnRzLCBfYm91bmRTZWdtZW50c30gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLnNlZ21lbnQuanMnO1xuaW1wb3J0IHtfc3RlcHBlZExpbmVUbywgX2JlemllckN1cnZlVG99IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jYW52YXMuanMnO1xuaW1wb3J0IHtfdXBkYXRlQmV6aWVyQ29udHJvbFBvaW50c30gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmN1cnZlLmpzJztcbmltcG9ydCB7dmFsdWVPckRlZmF1bHR9IGZyb20gJy4uL2hlbHBlcnMvaW5kZXguanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL2VsZW1lbnQucG9pbnQuanMnKS5kZWZhdWx0IH0gUG9pbnRFbGVtZW50XG4gKi9cblxuZnVuY3Rpb24gc2V0U3R5bGUoY3R4LCBvcHRpb25zLCBzdHlsZSA9IG9wdGlvbnMpIHtcbiAgY3R4LmxpbmVDYXAgPSB2YWx1ZU9yRGVmYXVsdChzdHlsZS5ib3JkZXJDYXBTdHlsZSwgb3B0aW9ucy5ib3JkZXJDYXBTdHlsZSk7XG4gIGN0eC5zZXRMaW5lRGFzaCh2YWx1ZU9yRGVmYXVsdChzdHlsZS5ib3JkZXJEYXNoLCBvcHRpb25zLmJvcmRlckRhc2gpKTtcbiAgY3R4LmxpbmVEYXNoT2Zmc2V0ID0gdmFsdWVPckRlZmF1bHQoc3R5bGUuYm9yZGVyRGFzaE9mZnNldCwgb3B0aW9ucy5ib3JkZXJEYXNoT2Zmc2V0KTtcbiAgY3R4LmxpbmVKb2luID0gdmFsdWVPckRlZmF1bHQoc3R5bGUuYm9yZGVySm9pblN0eWxlLCBvcHRpb25zLmJvcmRlckpvaW5TdHlsZSk7XG4gIGN0eC5saW5lV2lkdGggPSB2YWx1ZU9yRGVmYXVsdChzdHlsZS5ib3JkZXJXaWR0aCwgb3B0aW9ucy5ib3JkZXJXaWR0aCk7XG4gIGN0eC5zdHJva2VTdHlsZSA9IHZhbHVlT3JEZWZhdWx0KHN0eWxlLmJvcmRlckNvbG9yLCBvcHRpb25zLmJvcmRlckNvbG9yKTtcbn1cblxuZnVuY3Rpb24gbGluZVRvKGN0eCwgcHJldmlvdXMsIHRhcmdldCkge1xuICBjdHgubGluZVRvKHRhcmdldC54LCB0YXJnZXQueSk7XG59XG5cbi8qKlxuICogQHJldHVybnMge2FueX1cbiAqL1xuZnVuY3Rpb24gZ2V0TGluZU1ldGhvZChvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLnN0ZXBwZWQpIHtcbiAgICByZXR1cm4gX3N0ZXBwZWRMaW5lVG87XG4gIH1cblxuICBpZiAob3B0aW9ucy50ZW5zaW9uIHx8IG9wdGlvbnMuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZSA9PT0gJ21vbm90b25lJykge1xuICAgIHJldHVybiBfYmV6aWVyQ3VydmVUbztcbiAgfVxuXG4gIHJldHVybiBsaW5lVG87XG59XG5cbmZ1bmN0aW9uIHBhdGhWYXJzKHBvaW50cywgc2VnbWVudCwgcGFyYW1zID0ge30pIHtcbiAgY29uc3QgY291bnQgPSBwb2ludHMubGVuZ3RoO1xuICBjb25zdCB7c3RhcnQ6IHBhcmFtc1N0YXJ0ID0gMCwgZW5kOiBwYXJhbXNFbmQgPSBjb3VudCAtIDF9ID0gcGFyYW1zO1xuICBjb25zdCB7c3RhcnQ6IHNlZ21lbnRTdGFydCwgZW5kOiBzZWdtZW50RW5kfSA9IHNlZ21lbnQ7XG4gIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgocGFyYW1zU3RhcnQsIHNlZ21lbnRTdGFydCk7XG4gIGNvbnN0IGVuZCA9IE1hdGgubWluKHBhcmFtc0VuZCwgc2VnbWVudEVuZCk7XG4gIGNvbnN0IG91dHNpZGUgPSBwYXJhbXNTdGFydCA8IHNlZ21lbnRTdGFydCAmJiBwYXJhbXNFbmQgPCBzZWdtZW50U3RhcnQgfHwgcGFyYW1zU3RhcnQgPiBzZWdtZW50RW5kICYmIHBhcmFtc0VuZCA+IHNlZ21lbnRFbmQ7XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudCxcbiAgICBzdGFydCxcbiAgICBsb29wOiBzZWdtZW50Lmxvb3AsXG4gICAgaWxlbjogZW5kIDwgc3RhcnQgJiYgIW91dHNpZGUgPyBjb3VudCArIGVuZCAtIHN0YXJ0IDogZW5kIC0gc3RhcnRcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcGF0aCBmcm9tIHBvaW50cywgZ3JvdXBpbmcgYnkgdHJ1bmNhdGVkIHgtY29vcmRpbmF0ZVxuICogUG9pbnRzIG5lZWQgdG8gYmUgaW4gb3JkZXIgYnkgeC1jb29yZGluYXRlIGZvciB0aGlzIHRvIHdvcmsgZWZmaWNpZW50bHlcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfFBhdGgyRH0gY3R4IC0gQ29udGV4dFxuICogQHBhcmFtIHtMaW5lRWxlbWVudH0gbGluZVxuICogQHBhcmFtIHtvYmplY3R9IHNlZ21lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWdtZW50LnN0YXJ0IC0gc3RhcnQgaW5kZXggb2YgdGhlIHNlZ21lbnQsIHJlZmVycmluZyB0aGUgcG9pbnRzIGFycmF5XG4gKiBAcGFyYW0ge251bWJlcn0gc2VnbWVudC5lbmQgLSBlbmQgaW5kZXggb2YgdGhlIHNlZ21lbnQsIHJlZmVycmluZyB0aGUgcG9pbnRzIGFycmF5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNlZ21lbnQubG9vcCAtIGluZGljYXRlcyB0aGF0IHRoZSBzZWdtZW50IGlzIGEgbG9vcFxuICogQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xuICogQHBhcmFtIHtib29sZWFufSBwYXJhbXMubW92ZSAtIG1vdmUgdG8gc3RhcnRpbmcgcG9pbnQgKHZzIGxpbmUgdG8gaXQpXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5yZXZlcnNlIC0gcGF0aCB0aGUgc2VnbWVudCBmcm9tIGVuZCB0byBzdGFydFxuICogQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5zdGFydCAtIGxpbWl0IHNlZ21lbnQgdG8gcG9pbnRzIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCBpbmRleFxuICogQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5lbmQgLSBsaW1pdCBzZWdtZW50IHRvIHBvaW50cyBlbmRpbmcgYXQgYHN0YXJ0YCArIGBjb3VudGAgaW5kZXhcbiAqL1xuZnVuY3Rpb24gcGF0aFNlZ21lbnQoY3R4LCBsaW5lLCBzZWdtZW50LCBwYXJhbXMpIHtcbiAgY29uc3Qge3BvaW50cywgb3B0aW9uc30gPSBsaW5lO1xuICBjb25zdCB7Y291bnQsIHN0YXJ0LCBsb29wLCBpbGVufSA9IHBhdGhWYXJzKHBvaW50cywgc2VnbWVudCwgcGFyYW1zKTtcbiAgY29uc3QgbGluZU1ldGhvZCA9IGdldExpbmVNZXRob2Qob3B0aW9ucyk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgbGV0IHttb3ZlID0gdHJ1ZSwgcmV2ZXJzZX0gPSBwYXJhbXMgfHwge307XG4gIGxldCBpLCBwb2ludCwgcHJldjtcblxuICBmb3IgKGkgPSAwOyBpIDw9IGlsZW47ICsraSkge1xuICAgIHBvaW50ID0gcG9pbnRzWyhzdGFydCArIChyZXZlcnNlID8gaWxlbiAtIGkgOiBpKSkgJSBjb3VudF07XG5cbiAgICBpZiAocG9pbnQuc2tpcCkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgYSBza2lwcGVkIHBvaW50IGluc2lkZSBhIHNlZ21lbnQsIHNwYW5HYXBzIG11c3QgYmUgdHJ1ZVxuICAgICAgY29udGludWU7XG4gICAgfSBlbHNlIGlmIChtb3ZlKSB7XG4gICAgICBjdHgubW92ZVRvKHBvaW50LngsIHBvaW50LnkpO1xuICAgICAgbW92ZSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW5lTWV0aG9kKGN0eCwgcHJldiwgcG9pbnQsIHJldmVyc2UsIG9wdGlvbnMuc3RlcHBlZCk7XG4gICAgfVxuXG4gICAgcHJldiA9IHBvaW50O1xuICB9XG5cbiAgaWYgKGxvb3ApIHtcbiAgICBwb2ludCA9IHBvaW50c1soc3RhcnQgKyAocmV2ZXJzZSA/IGlsZW4gOiAwKSkgJSBjb3VudF07XG4gICAgbGluZU1ldGhvZChjdHgsIHByZXYsIHBvaW50LCByZXZlcnNlLCBvcHRpb25zLnN0ZXBwZWQpO1xuICB9XG5cbiAgcmV0dXJuICEhbG9vcDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgcGF0aCBmcm9tIHBvaW50cywgZ3JvdXBpbmcgYnkgdHJ1bmNhdGVkIHgtY29vcmRpbmF0ZVxuICogUG9pbnRzIG5lZWQgdG8gYmUgaW4gb3JkZXIgYnkgeC1jb29yZGluYXRlIGZvciB0aGlzIHRvIHdvcmsgZWZmaWNpZW50bHlcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfFBhdGgyRH0gY3R4IC0gQ29udGV4dFxuICogQHBhcmFtIHtMaW5lRWxlbWVudH0gbGluZVxuICogQHBhcmFtIHtvYmplY3R9IHNlZ21lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWdtZW50LnN0YXJ0IC0gc3RhcnQgaW5kZXggb2YgdGhlIHNlZ21lbnQsIHJlZmVycmluZyB0aGUgcG9pbnRzIGFycmF5XG4gKiBAcGFyYW0ge251bWJlcn0gc2VnbWVudC5lbmQgLSBlbmQgaW5kZXggb2YgdGhlIHNlZ21lbnQsIHJlZmVycmluZyB0aGUgcG9pbnRzIGFycmF5XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNlZ21lbnQubG9vcCAtIGluZGljYXRlcyB0aGF0IHRoZSBzZWdtZW50IGlzIGEgbG9vcFxuICogQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xuICogQHBhcmFtIHtib29sZWFufSBwYXJhbXMubW92ZSAtIG1vdmUgdG8gc3RhcnRpbmcgcG9pbnQgKHZzIGxpbmUgdG8gaXQpXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5yZXZlcnNlIC0gcGF0aCB0aGUgc2VnbWVudCBmcm9tIGVuZCB0byBzdGFydFxuICogQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5zdGFydCAtIGxpbWl0IHNlZ21lbnQgdG8gcG9pbnRzIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCBpbmRleFxuICogQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5lbmQgLSBsaW1pdCBzZWdtZW50IHRvIHBvaW50cyBlbmRpbmcgYXQgYHN0YXJ0YCArIGBjb3VudGAgaW5kZXhcbiAqL1xuZnVuY3Rpb24gZmFzdFBhdGhTZWdtZW50KGN0eCwgbGluZSwgc2VnbWVudCwgcGFyYW1zKSB7XG4gIGNvbnN0IHBvaW50cyA9IGxpbmUucG9pbnRzO1xuICBjb25zdCB7Y291bnQsIHN0YXJ0LCBpbGVufSA9IHBhdGhWYXJzKHBvaW50cywgc2VnbWVudCwgcGFyYW1zKTtcbiAgY29uc3Qge21vdmUgPSB0cnVlLCByZXZlcnNlfSA9IHBhcmFtcyB8fCB7fTtcbiAgbGV0IGF2Z1ggPSAwO1xuICBsZXQgY291bnRYID0gMDtcbiAgbGV0IGksIHBvaW50LCBwcmV2WCwgbWluWSwgbWF4WSwgbGFzdFk7XG5cbiAgY29uc3QgcG9pbnRJbmRleCA9IChpbmRleCkgPT4gKHN0YXJ0ICsgKHJldmVyc2UgPyBpbGVuIC0gaW5kZXggOiBpbmRleCkpICUgY291bnQ7XG4gIGNvbnN0IGRyYXdYID0gKCkgPT4ge1xuICAgIGlmIChtaW5ZICE9PSBtYXhZKSB7XG4gICAgICAvLyBEcmF3IGxpbmUgdG8gbWF4WSBhbmQgbWluWSwgdXNpbmcgdGhlIGF2ZXJhZ2UgeC1jb29yZGluYXRlXG4gICAgICBjdHgubGluZVRvKGF2Z1gsIG1heFkpO1xuICAgICAgY3R4LmxpbmVUbyhhdmdYLCBtaW5ZKTtcbiAgICAgIC8vIExpbmUgdG8geS12YWx1ZSBvZiBsYXN0IHBvaW50IGluIGdyb3VwLiBTbyB0aGUgbGluZSBjb250aW51ZXNcbiAgICAgIC8vIGZyb20gY29ycmVjdCBwb3NpdGlvbi4gTm90IHVzaW5nIG1vdmUsIHRvIGhhdmUgc29saWQgcGF0aC5cbiAgICAgIGN0eC5saW5lVG8oYXZnWCwgbGFzdFkpO1xuICAgIH1cbiAgfTtcblxuICBpZiAobW92ZSkge1xuICAgIHBvaW50ID0gcG9pbnRzW3BvaW50SW5kZXgoMCldO1xuICAgIGN0eC5tb3ZlVG8ocG9pbnQueCwgcG9pbnQueSk7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDw9IGlsZW47ICsraSkge1xuICAgIHBvaW50ID0gcG9pbnRzW3BvaW50SW5kZXgoaSldO1xuXG4gICAgaWYgKHBvaW50LnNraXApIHtcbiAgICAgIC8vIElmIHRoZXJlIGlzIGEgc2tpcHBlZCBwb2ludCBpbnNpZGUgYSBzZWdtZW50LCBzcGFuR2FwcyBtdXN0IGJlIHRydWVcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHggPSBwb2ludC54O1xuICAgIGNvbnN0IHkgPSBwb2ludC55O1xuICAgIGNvbnN0IHRydW5jWCA9IHggfCAwOyAvLyB0cnVuY2F0ZWQgeC1jb29yZGluYXRlXG5cbiAgICBpZiAodHJ1bmNYID09PSBwcmV2WCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIGBtaW5ZYCAvIGBtYXhZYCBhbmQgYGF2Z1hgIHdoaWxlIHdlIHN0YXkgd2l0aGluIHNhbWUgeC1wb3NpdGlvblxuICAgICAgaWYgKHkgPCBtaW5ZKSB7XG4gICAgICAgIG1pblkgPSB5O1xuICAgICAgfSBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgICAgICBtYXhZID0geTtcbiAgICAgIH1cbiAgICAgIC8vIEZvciBmaXJzdCBwb2ludCBpbiBncm91cCwgY291bnRYIGlzIGAwYCwgc28gYXZlcmFnZSB3aWxsIGJlIGB4YCAvIDEuXG4gICAgICBhdmdYID0gKGNvdW50WCAqIGF2Z1ggKyB4KSAvICsrY291bnRYO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmF3WCgpO1xuICAgICAgLy8gRHJhdyBsaW5lIHRvIG5leHQgeC1wb3NpdGlvbiwgdXNpbmcgdGhlIGZpcnN0IChvciBvbmx5KVxuICAgICAgLy8geS12YWx1ZSBpbiB0aGF0IGdyb3VwXG4gICAgICBjdHgubGluZVRvKHgsIHkpO1xuXG4gICAgICBwcmV2WCA9IHRydW5jWDtcbiAgICAgIGNvdW50WCA9IDA7XG4gICAgICBtaW5ZID0gbWF4WSA9IHk7XG4gICAgfVxuICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgeS12YWx1ZSBpbiBncm91cFxuICAgIGxhc3RZID0geTtcbiAgfVxuICBkcmF3WCgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TGluZUVsZW1lbnR9IGxpbmUgLSB0aGUgbGluZVxuICogQHJldHVybnMge2Z1bmN0aW9ufVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2dldFNlZ21lbnRNZXRob2QobGluZSkge1xuICBjb25zdCBvcHRzID0gbGluZS5vcHRpb25zO1xuICBjb25zdCBib3JkZXJEYXNoID0gb3B0cy5ib3JkZXJEYXNoICYmIG9wdHMuYm9yZGVyRGFzaC5sZW5ndGg7XG4gIGNvbnN0IHVzZUZhc3RQYXRoID0gIWxpbmUuX2RlY2ltYXRlZCAmJiAhbGluZS5fbG9vcCAmJiAhb3B0cy50ZW5zaW9uICYmIG9wdHMuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZSAhPT0gJ21vbm90b25lJyAmJiAhb3B0cy5zdGVwcGVkICYmICFib3JkZXJEYXNoO1xuICByZXR1cm4gdXNlRmFzdFBhdGggPyBmYXN0UGF0aFNlZ21lbnQgOiBwYXRoU2VnbWVudDtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfZ2V0SW50ZXJwb2xhdGlvbk1ldGhvZChvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLnN0ZXBwZWQpIHtcbiAgICByZXR1cm4gX3N0ZXBwZWRJbnRlcnBvbGF0aW9uO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMudGVuc2lvbiB8fCBvcHRpb25zLmN1YmljSW50ZXJwb2xhdGlvbk1vZGUgPT09ICdtb25vdG9uZScpIHtcbiAgICByZXR1cm4gX2JlemllckludGVycG9sYXRpb247XG4gIH1cblxuICByZXR1cm4gX3BvaW50SW5MaW5lO1xufVxuXG5mdW5jdGlvbiBzdHJva2VQYXRoV2l0aENhY2hlKGN0eCwgbGluZSwgc3RhcnQsIGNvdW50KSB7XG4gIGxldCBwYXRoID0gbGluZS5fcGF0aDtcbiAgaWYgKCFwYXRoKSB7XG4gICAgcGF0aCA9IGxpbmUuX3BhdGggPSBuZXcgUGF0aDJEKCk7XG4gICAgaWYgKGxpbmUucGF0aChwYXRoLCBzdGFydCwgY291bnQpKSB7XG4gICAgICBwYXRoLmNsb3NlUGF0aCgpO1xuICAgIH1cbiAgfVxuICBzZXRTdHlsZShjdHgsIGxpbmUub3B0aW9ucyk7XG4gIGN0eC5zdHJva2UocGF0aCk7XG59XG5cbmZ1bmN0aW9uIHN0cm9rZVBhdGhEaXJlY3QoY3R4LCBsaW5lLCBzdGFydCwgY291bnQpIHtcbiAgY29uc3Qge3NlZ21lbnRzLCBvcHRpb25zfSA9IGxpbmU7XG4gIGNvbnN0IHNlZ21lbnRNZXRob2QgPSBfZ2V0U2VnbWVudE1ldGhvZChsaW5lKTtcblxuICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICBzZXRTdHlsZShjdHgsIG9wdGlvbnMsIHNlZ21lbnQuc3R5bGUpO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBpZiAoc2VnbWVudE1ldGhvZChjdHgsIGxpbmUsIHNlZ21lbnQsIHtzdGFydCwgZW5kOiBzdGFydCArIGNvdW50IC0gMX0pKSB7XG4gICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgfVxuICAgIGN0eC5zdHJva2UoKTtcbiAgfVxufVxuXG5jb25zdCB1c2VQYXRoMkQgPSB0eXBlb2YgUGF0aDJEID09PSAnZnVuY3Rpb24nO1xuXG5mdW5jdGlvbiBkcmF3KGN0eCwgbGluZSwgc3RhcnQsIGNvdW50KSB7XG4gIGlmICh1c2VQYXRoMkQgJiYgIWxpbmUub3B0aW9ucy5zZWdtZW50KSB7XG4gICAgc3Ryb2tlUGF0aFdpdGhDYWNoZShjdHgsIGxpbmUsIHN0YXJ0LCBjb3VudCk7XG4gIH0gZWxzZSB7XG4gICAgc3Ryb2tlUGF0aERpcmVjdChjdHgsIGxpbmUsIHN0YXJ0LCBjb3VudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGluZUVsZW1lbnQgZXh0ZW5kcyBFbGVtZW50IHtcblxuICBzdGF0aWMgaWQgPSAnbGluZSc7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgYm9yZGVyQ2FwU3R5bGU6ICdidXR0JyxcbiAgICBib3JkZXJEYXNoOiBbXSxcbiAgICBib3JkZXJEYXNoT2Zmc2V0OiAwLFxuICAgIGJvcmRlckpvaW5TdHlsZTogJ21pdGVyJyxcbiAgICBib3JkZXJXaWR0aDogMyxcbiAgICBjYXBCZXppZXJQb2ludHM6IHRydWUsXG4gICAgY3ViaWNJbnRlcnBvbGF0aW9uTW9kZTogJ2RlZmF1bHQnLFxuICAgIGZpbGw6IGZhbHNlLFxuICAgIHNwYW5HYXBzOiBmYWxzZSxcbiAgICBzdGVwcGVkOiBmYWxzZSxcbiAgICB0ZW5zaW9uOiAwLFxuICB9O1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIGRlZmF1bHRSb3V0ZXMgPSB7XG4gICAgYmFja2dyb3VuZENvbG9yOiAnYmFja2dyb3VuZENvbG9yJyxcbiAgICBib3JkZXJDb2xvcjogJ2JvcmRlckNvbG9yJ1xuICB9O1xuXG5cbiAgc3RhdGljIGRlc2NyaXB0b3JzID0ge1xuICAgIF9zY3JpcHRhYmxlOiB0cnVlLFxuICAgIF9pbmRleGFibGU6IChuYW1lKSA9PiBuYW1lICE9PSAnYm9yZGVyRGFzaCcgJiYgbmFtZSAhPT0gJ2ZpbGwnLFxuICB9O1xuXG5cbiAgY29uc3RydWN0b3IoY2ZnKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuYW5pbWF0ZWQgPSB0cnVlO1xuICAgIHRoaXMub3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9jaGFydCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9sb29wID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2Z1bGxMb29wID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3BhdGggPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcG9pbnRzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3NlZ21lbnRzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2RlY2ltYXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3BvaW50c1VwZGF0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9kYXRhc2V0SW5kZXggPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoY2ZnKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNmZyk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQ29udHJvbFBvaW50cyhjaGFydEFyZWEsIGluZGV4QXhpcykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgaWYgKChvcHRpb25zLnRlbnNpb24gfHwgb3B0aW9ucy5jdWJpY0ludGVycG9sYXRpb25Nb2RlID09PSAnbW9ub3RvbmUnKSAmJiAhb3B0aW9ucy5zdGVwcGVkICYmICF0aGlzLl9wb2ludHNVcGRhdGVkKSB7XG4gICAgICBjb25zdCBsb29wID0gb3B0aW9ucy5zcGFuR2FwcyA/IHRoaXMuX2xvb3AgOiB0aGlzLl9mdWxsTG9vcDtcbiAgICAgIF91cGRhdGVCZXppZXJDb250cm9sUG9pbnRzKHRoaXMuX3BvaW50cywgb3B0aW9ucywgY2hhcnRBcmVhLCBsb29wLCBpbmRleEF4aXMpO1xuICAgICAgdGhpcy5fcG9pbnRzVXBkYXRlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc2V0IHBvaW50cyhwb2ludHMpIHtcbiAgICB0aGlzLl9wb2ludHMgPSBwb2ludHM7XG4gICAgZGVsZXRlIHRoaXMuX3NlZ21lbnRzO1xuICAgIGRlbGV0ZSB0aGlzLl9wYXRoO1xuICAgIHRoaXMuX3BvaW50c1VwZGF0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGdldCBwb2ludHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BvaW50cztcbiAgfVxuXG4gIGdldCBzZWdtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fc2VnbWVudHMgfHwgKHRoaXMuX3NlZ21lbnRzID0gX2NvbXB1dGVTZWdtZW50cyh0aGlzLCB0aGlzLm9wdGlvbnMuc2VnbWVudCkpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEZpcnN0IG5vbi1za2lwcGVkIHBvaW50IG9uIHRoaXMgbGluZVxuXHQgKiBAcmV0dXJucyB7UG9pbnRFbGVtZW50fHVuZGVmaW5lZH1cblx0ICovXG4gIGZpcnN0KCkge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gdGhpcy5zZWdtZW50cztcbiAgICBjb25zdCBwb2ludHMgPSB0aGlzLnBvaW50cztcbiAgICByZXR1cm4gc2VnbWVudHMubGVuZ3RoICYmIHBvaW50c1tzZWdtZW50c1swXS5zdGFydF07XG4gIH1cblxuICAvKipcblx0ICogTGFzdCBub24tc2tpcHBlZCBwb2ludCBvbiB0aGlzIGxpbmVcblx0ICogQHJldHVybnMge1BvaW50RWxlbWVudHx1bmRlZmluZWR9XG5cdCAqL1xuICBsYXN0KCkge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gdGhpcy5zZWdtZW50cztcbiAgICBjb25zdCBwb2ludHMgPSB0aGlzLnBvaW50cztcbiAgICBjb25zdCBjb3VudCA9IHNlZ21lbnRzLmxlbmd0aDtcbiAgICByZXR1cm4gY291bnQgJiYgcG9pbnRzW3NlZ21lbnRzW2NvdW50IC0gMV0uZW5kXTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBJbnRlcnBvbGF0ZSBhIHBvaW50IGluIHRoaXMgbGluZSBhdCB0aGUgc2FtZSB2YWx1ZSBvbiBgcHJvcGVydHlgIGFzXG5cdCAqIHRoZSByZWZlcmVuY2UgYHBvaW50YCBwcm92aWRlZFxuXHQgKiBAcGFyYW0ge1BvaW50RWxlbWVudH0gcG9pbnQgLSB0aGUgcmVmZXJlbmNlIHBvaW50XG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSAtIHRoZSBwcm9wZXJ0eSB0byBtYXRjaCBvblxuXHQgKiBAcmV0dXJucyB7UG9pbnRFbGVtZW50fHVuZGVmaW5lZH1cblx0ICovXG4gIGludGVycG9sYXRlKHBvaW50LCBwcm9wZXJ0eSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgdmFsdWUgPSBwb2ludFtwcm9wZXJ0eV07XG4gICAgY29uc3QgcG9pbnRzID0gdGhpcy5wb2ludHM7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBfYm91bmRTZWdtZW50cyh0aGlzLCB7cHJvcGVydHksIHN0YXJ0OiB2YWx1ZSwgZW5kOiB2YWx1ZX0pO1xuXG4gICAgaWYgKCFzZWdtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCBfaW50ZXJwb2xhdGUgPSBfZ2V0SW50ZXJwb2xhdGlvbk1ldGhvZChvcHRpb25zKTtcbiAgICBsZXQgaSwgaWxlbjtcbiAgICBmb3IgKGkgPSAwLCBpbGVuID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgICBjb25zdCB7c3RhcnQsIGVuZH0gPSBzZWdtZW50c1tpXTtcbiAgICAgIGNvbnN0IHAxID0gcG9pbnRzW3N0YXJ0XTtcbiAgICAgIGNvbnN0IHAyID0gcG9pbnRzW2VuZF07XG4gICAgICBpZiAocDEgPT09IHAyKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHAxKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCB0ID0gTWF0aC5hYnMoKHZhbHVlIC0gcDFbcHJvcGVydHldKSAvIChwMltwcm9wZXJ0eV0gLSBwMVtwcm9wZXJ0eV0pKTtcbiAgICAgIGNvbnN0IGludGVycG9sYXRlZCA9IF9pbnRlcnBvbGF0ZShwMSwgcDIsIHQsIG9wdGlvbnMuc3RlcHBlZCk7XG4gICAgICBpbnRlcnBvbGF0ZWRbcHJvcGVydHldID0gcG9pbnRbcHJvcGVydHldO1xuICAgICAgcmVzdWx0LnB1c2goaW50ZXJwb2xhdGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPT09IDEgPyByZXN1bHRbMF0gOiByZXN1bHQ7XG4gIH1cblxuICAvKipcblx0ICogQXBwZW5kIGEgc2VnbWVudCBvZiB0aGlzIGxpbmUgdG8gY3VycmVudCBwYXRoLlxuXHQgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBzZWdtZW50XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBzZWdtZW50LnN0YXJ0IC0gc3RhcnQgaW5kZXggb2YgdGhlIHNlZ21lbnQsIHJlZmVycmluZyB0aGUgcG9pbnRzIGFycmF5XG4gXHQgKiBAcGFyYW0ge251bWJlcn0gc2VnbWVudC5lbmQgLSBlbmQgaW5kZXggb2YgdGhlIHNlZ21lbnQsIHJlZmVycmluZyB0aGUgcG9pbnRzIGFycmF5XG4gXHQgKiBAcGFyYW0ge2Jvb2xlYW59IHNlZ21lbnQubG9vcCAtIGluZGljYXRlcyB0aGF0IHRoZSBzZWdtZW50IGlzIGEgbG9vcFxuXHQgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLm1vdmUgLSBtb3ZlIHRvIHN0YXJ0aW5nIHBvaW50ICh2cyBsaW5lIHRvIGl0KVxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5yZXZlcnNlIC0gcGF0aCB0aGUgc2VnbWVudCBmcm9tIGVuZCB0byBzdGFydFxuXHQgKiBAcGFyYW0ge251bWJlcn0gcGFyYW1zLnN0YXJ0IC0gbGltaXQgc2VnbWVudCB0byBwb2ludHMgc3RhcnRpbmcgZnJvbSBgc3RhcnRgIGluZGV4XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuZW5kIC0gbGltaXQgc2VnbWVudCB0byBwb2ludHMgZW5kaW5nIGF0IGBzdGFydGAgKyBgY291bnRgIGluZGV4XG5cdCAqIEByZXR1cm5zIHt1bmRlZmluZWR8Ym9vbGVhbn0gLSB0cnVlIGlmIHRoZSBzZWdtZW50IGlzIGEgZnVsbCBsb29wIChwYXRoIHNob3VsZCBiZSBjbG9zZWQpXG5cdCAqL1xuICBwYXRoU2VnbWVudChjdHgsIHNlZ21lbnQsIHBhcmFtcykge1xuICAgIGNvbnN0IHNlZ21lbnRNZXRob2QgPSBfZ2V0U2VnbWVudE1ldGhvZCh0aGlzKTtcbiAgICByZXR1cm4gc2VnbWVudE1ldGhvZChjdHgsIHRoaXMsIHNlZ21lbnQsIHBhcmFtcyk7XG4gIH1cblxuICAvKipcblx0ICogQXBwZW5kIGFsbCBzZWdtZW50cyBvZiB0aGlzIGxpbmUgdG8gY3VycmVudCBwYXRoLlxuXHQgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRHxQYXRoMkR9IGN0eFxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0XVxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvdW50XVxuXHQgKiBAcmV0dXJucyB7dW5kZWZpbmVkfGJvb2xlYW59IC0gdHJ1ZSBpZiBsaW5lIGlzIGEgZnVsbCBsb29wIChwYXRoIHNob3VsZCBiZSBjbG9zZWQpXG5cdCAqL1xuICBwYXRoKGN0eCwgc3RhcnQsIGNvdW50KSB7XG4gICAgY29uc3Qgc2VnbWVudHMgPSB0aGlzLnNlZ21lbnRzO1xuICAgIGNvbnN0IHNlZ21lbnRNZXRob2QgPSBfZ2V0U2VnbWVudE1ldGhvZCh0aGlzKTtcbiAgICBsZXQgbG9vcCA9IHRoaXMuX2xvb3A7XG5cbiAgICBzdGFydCA9IHN0YXJ0IHx8IDA7XG4gICAgY291bnQgPSBjb3VudCB8fCAodGhpcy5wb2ludHMubGVuZ3RoIC0gc3RhcnQpO1xuXG4gICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG4gICAgICBsb29wICY9IHNlZ21lbnRNZXRob2QoY3R4LCB0aGlzLCBzZWdtZW50LCB7c3RhcnQsIGVuZDogc3RhcnQgKyBjb3VudCAtIDF9KTtcbiAgICB9XG4gICAgcmV0dXJuICEhbG9vcDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBEcmF3XG5cdCAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHhcblx0ICogQHBhcmFtIHtvYmplY3R9IGNoYXJ0QXJlYVxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0XVxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2NvdW50XVxuXHQgKi9cbiAgZHJhdyhjdHgsIGNoYXJ0QXJlYSwgc3RhcnQsIGNvdW50KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyB8fCB7fTtcbiAgICBjb25zdCBwb2ludHMgPSB0aGlzLnBvaW50cyB8fCBbXTtcblxuICAgIGlmIChwb2ludHMubGVuZ3RoICYmIG9wdGlvbnMuYm9yZGVyV2lkdGgpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG5cbiAgICAgIGRyYXcoY3R4LCB0aGlzLCBzdGFydCwgY291bnQpO1xuXG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFuaW1hdGVkKSB7XG4gICAgICAvLyBXaGVuIGxpbmUgaXMgYW5pbWF0ZWQsIHRoZSBjb250cm9sIHBvaW50cyBhbmQgcGF0aCBhcmUgbm90IGNhY2hlZC5cbiAgICAgIHRoaXMuX3BvaW50c1VwZGF0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3BhdGggPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IEVsZW1lbnQgZnJvbSAnLi4vY29yZS9jb3JlLmVsZW1lbnQuanMnO1xuaW1wb3J0IHtkcmF3UG9pbnQsIF9pc1BvaW50SW5BcmVhfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY2FudmFzLmpzJztcbmltcG9ydCB0eXBlIHtcbiAgQ2FydGVzaWFuUGFyc2VkRGF0YSxcbiAgQ2hhcnRBcmVhLFxuICBQb2ludCxcbiAgUG9pbnRIb3Zlck9wdGlvbnMsXG4gIFBvaW50T3B0aW9ucyxcbn0gZnJvbSAnLi4vdHlwZXMvaW5kZXguanMnO1xuXG5mdW5jdGlvbiBpblJhbmdlKGVsOiBQb2ludEVsZW1lbnQsIHBvczogbnVtYmVyLCBheGlzOiAneCcgfCAneScsIHVzZUZpbmFsUG9zaXRpb24/OiBib29sZWFuKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSBlbC5vcHRpb25zO1xuICBjb25zdCB7W2F4aXNdOiB2YWx1ZX0gPSBlbC5nZXRQcm9wcyhbYXhpc10sIHVzZUZpbmFsUG9zaXRpb24pO1xuXG4gIHJldHVybiAoTWF0aC5hYnMocG9zIC0gdmFsdWUpIDwgb3B0aW9ucy5yYWRpdXMgKyBvcHRpb25zLmhpdFJhZGl1cyk7XG59XG5cbmV4cG9ydCB0eXBlIFBvaW50UHJvcHMgPSBQb2ludFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2ludEVsZW1lbnQgZXh0ZW5kcyBFbGVtZW50PFBvaW50UHJvcHMsIFBvaW50T3B0aW9ucyAmIFBvaW50SG92ZXJPcHRpb25zPiB7XG5cbiAgc3RhdGljIGlkID0gJ3BvaW50JztcblxuICBwYXJzZWQ6IENhcnRlc2lhblBhcnNlZERhdGE7XG4gIHNraXA/OiBib29sZWFuO1xuICBzdG9wPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICBib3JkZXJXaWR0aDogMSxcbiAgICBoaXRSYWRpdXM6IDEsXG4gICAgaG92ZXJCb3JkZXJXaWR0aDogMSxcbiAgICBob3ZlclJhZGl1czogNCxcbiAgICBwb2ludFN0eWxlOiAnY2lyY2xlJyxcbiAgICByYWRpdXM6IDMsXG4gICAgcm90YXRpb246IDBcbiAgfTtcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0Um91dGVzID0ge1xuICAgIGJhY2tncm91bmRDb2xvcjogJ2JhY2tncm91bmRDb2xvcicsXG4gICAgYm9yZGVyQ29sb3I6ICdib3JkZXJDb2xvcidcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihjZmcpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucGFyc2VkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2tpcCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnN0b3AgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoY2ZnKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNmZyk7XG4gICAgfVxuICB9XG5cbiAgaW5SYW5nZShtb3VzZVg6IG51bWJlciwgbW91c2VZOiBudW1iZXIsIHVzZUZpbmFsUG9zaXRpb24/OiBib29sZWFuKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCB7eCwgeX0gPSB0aGlzLmdldFByb3BzKFsneCcsICd5J10sIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIHJldHVybiAoKE1hdGgucG93KG1vdXNlWCAtIHgsIDIpICsgTWF0aC5wb3cobW91c2VZIC0geSwgMikpIDwgTWF0aC5wb3cob3B0aW9ucy5oaXRSYWRpdXMgKyBvcHRpb25zLnJhZGl1cywgMikpO1xuICB9XG5cbiAgaW5YUmFuZ2UobW91c2VYOiBudW1iZXIsIHVzZUZpbmFsUG9zaXRpb24/OiBib29sZWFuKSB7XG4gICAgcmV0dXJuIGluUmFuZ2UodGhpcywgbW91c2VYLCAneCcsIHVzZUZpbmFsUG9zaXRpb24pO1xuICB9XG5cbiAgaW5ZUmFuZ2UobW91c2VZOiBudW1iZXIsIHVzZUZpbmFsUG9zaXRpb24/OiBib29sZWFuKSB7XG4gICAgcmV0dXJuIGluUmFuZ2UodGhpcywgbW91c2VZLCAneScsIHVzZUZpbmFsUG9zaXRpb24pO1xuICB9XG5cbiAgZ2V0Q2VudGVyUG9pbnQodXNlRmluYWxQb3NpdGlvbj86IGJvb2xlYW4pIHtcbiAgICBjb25zdCB7eCwgeX0gPSB0aGlzLmdldFByb3BzKFsneCcsICd5J10sIHVzZUZpbmFsUG9zaXRpb24pO1xuICAgIHJldHVybiB7eCwgeX07XG4gIH1cblxuICBzaXplKG9wdGlvbnM/OiBQYXJ0aWFsPFBvaW50T3B0aW9ucyAmIFBvaW50SG92ZXJPcHRpb25zPikge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9ucyB8fCB7fTtcbiAgICBsZXQgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgMDtcbiAgICByYWRpdXMgPSBNYXRoLm1heChyYWRpdXMsIHJhZGl1cyAmJiBvcHRpb25zLmhvdmVyUmFkaXVzIHx8IDApO1xuICAgIGNvbnN0IGJvcmRlcldpZHRoID0gcmFkaXVzICYmIG9wdGlvbnMuYm9yZGVyV2lkdGggfHwgMDtcbiAgICByZXR1cm4gKHJhZGl1cyArIGJvcmRlcldpZHRoKSAqIDI7XG4gIH1cblxuICBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBhcmVhOiBDaGFydEFyZWEpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgaWYgKHRoaXMuc2tpcCB8fCBvcHRpb25zLnJhZGl1cyA8IDAuMSB8fCAhX2lzUG9pbnRJbkFyZWEodGhpcywgYXJlYSwgdGhpcy5zaXplKG9wdGlvbnMpIC8gMikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjdHguc3Ryb2tlU3R5bGUgPSBvcHRpb25zLmJvcmRlckNvbG9yO1xuICAgIGN0eC5saW5lV2lkdGggPSBvcHRpb25zLmJvcmRlcldpZHRoO1xuICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLmJhY2tncm91bmRDb2xvcjtcbiAgICBkcmF3UG9pbnQoY3R4LCBvcHRpb25zLCB0aGlzLngsIHRoaXMueSk7XG4gIH1cblxuICBnZXRSYW5nZSgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zIHx8IHt9O1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgRmFsbGJhY2tzIHNob3VsZCBuZXZlciBiZSBoaXQgaW4gcHJhY3RpY2VcbiAgICByZXR1cm4gb3B0aW9ucy5yYWRpdXMgKyBvcHRpb25zLmhpdFJhZGl1cztcbiAgfVxufVxuIiwgImltcG9ydCBFbGVtZW50IGZyb20gJy4uL2NvcmUvY29yZS5lbGVtZW50LmpzJztcbmltcG9ydCB7aXNPYmplY3QsIF9pc0JldHdlZW4sIF9saW1pdFZhbHVlfSBmcm9tICcuLi9oZWxwZXJzL2luZGV4LmpzJztcbmltcG9ydCB7YWRkUm91bmRlZFJlY3RQYXRofSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY2FudmFzLmpzJztcbmltcG9ydCB7dG9UUkJMLCB0b1RSQkxDb3JuZXJzfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMub3B0aW9ucy5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7eyB4OiBudW1iZXIsIHk6IG51bWJlciwgYmFzZTogbnVtYmVyLCBob3Jpem9udGFsOiBib29sZWFuLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9fSBCYXJQcm9wcyAqL1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGJvdW5kcyBvZiB0aGUgYmFyIHJlZ2FyZGxlc3Mgb2YgdGhlIG9yaWVudGF0aW9uXG4gKiBAcGFyYW0ge0JhckVsZW1lbnR9IGJhciB0aGUgYmFyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt1c2VGaW5hbFBvc2l0aW9uXVxuICogQHJldHVybiB7b2JqZWN0fSBib3VuZHMgb2YgdGhlIGJhclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0QmFyQm91bmRzKGJhciwgdXNlRmluYWxQb3NpdGlvbikge1xuICBjb25zdCB7eCwgeSwgYmFzZSwgd2lkdGgsIGhlaWdodH0gPSAvKiogQHR5cGUge0JhclByb3BzfSAqLyAoYmFyLmdldFByb3BzKFsneCcsICd5JywgJ2Jhc2UnLCAnd2lkdGgnLCAnaGVpZ2h0J10sIHVzZUZpbmFsUG9zaXRpb24pKTtcblxuICBsZXQgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCBoYWxmO1xuXG4gIGlmIChiYXIuaG9yaXpvbnRhbCkge1xuICAgIGhhbGYgPSBoZWlnaHQgLyAyO1xuICAgIGxlZnQgPSBNYXRoLm1pbih4LCBiYXNlKTtcbiAgICByaWdodCA9IE1hdGgubWF4KHgsIGJhc2UpO1xuICAgIHRvcCA9IHkgLSBoYWxmO1xuICAgIGJvdHRvbSA9IHkgKyBoYWxmO1xuICB9IGVsc2Uge1xuICAgIGhhbGYgPSB3aWR0aCAvIDI7XG4gICAgbGVmdCA9IHggLSBoYWxmO1xuICAgIHJpZ2h0ID0geCArIGhhbGY7XG4gICAgdG9wID0gTWF0aC5taW4oeSwgYmFzZSk7XG4gICAgYm90dG9tID0gTWF0aC5tYXgoeSwgYmFzZSk7XG4gIH1cblxuICByZXR1cm4ge2xlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbX07XG59XG5cbmZ1bmN0aW9uIHNraXBPckxpbWl0KHNraXAsIHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gc2tpcCA/IDAgOiBfbGltaXRWYWx1ZSh2YWx1ZSwgbWluLCBtYXgpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUJvcmRlcldpZHRoKGJhciwgbWF4VywgbWF4SCkge1xuICBjb25zdCB2YWx1ZSA9IGJhci5vcHRpb25zLmJvcmRlcldpZHRoO1xuICBjb25zdCBza2lwID0gYmFyLmJvcmRlclNraXBwZWQ7XG4gIGNvbnN0IG8gPSB0b1RSQkwodmFsdWUpO1xuXG4gIHJldHVybiB7XG4gICAgdDogc2tpcE9yTGltaXQoc2tpcC50b3AsIG8udG9wLCAwLCBtYXhIKSxcbiAgICByOiBza2lwT3JMaW1pdChza2lwLnJpZ2h0LCBvLnJpZ2h0LCAwLCBtYXhXKSxcbiAgICBiOiBza2lwT3JMaW1pdChza2lwLmJvdHRvbSwgby5ib3R0b20sIDAsIG1heEgpLFxuICAgIGw6IHNraXBPckxpbWl0KHNraXAubGVmdCwgby5sZWZ0LCAwLCBtYXhXKVxuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZUJvcmRlclJhZGl1cyhiYXIsIG1heFcsIG1heEgpIHtcbiAgY29uc3Qge2VuYWJsZUJvcmRlclJhZGl1c30gPSBiYXIuZ2V0UHJvcHMoWydlbmFibGVCb3JkZXJSYWRpdXMnXSk7XG4gIGNvbnN0IHZhbHVlID0gYmFyLm9wdGlvbnMuYm9yZGVyUmFkaXVzO1xuICBjb25zdCBvID0gdG9UUkJMQ29ybmVycyh2YWx1ZSk7XG4gIGNvbnN0IG1heFIgPSBNYXRoLm1pbihtYXhXLCBtYXhIKTtcbiAgY29uc3Qgc2tpcCA9IGJhci5ib3JkZXJTa2lwcGVkO1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBpcyBhbiBvYmplY3QsIGFzc3VtZSB0aGUgdXNlciBrbm93cyB3aGF0IHRoZXkgYXJlIGRvaW5nXG4gIC8vIGFuZCBhcHBseSBhcyBkaXJlY3RlZC5cbiAgY29uc3QgZW5hYmxlQm9yZGVyID0gZW5hYmxlQm9yZGVyUmFkaXVzIHx8IGlzT2JqZWN0KHZhbHVlKTtcblxuICByZXR1cm4ge1xuICAgIHRvcExlZnQ6IHNraXBPckxpbWl0KCFlbmFibGVCb3JkZXIgfHwgc2tpcC50b3AgfHwgc2tpcC5sZWZ0LCBvLnRvcExlZnQsIDAsIG1heFIpLFxuICAgIHRvcFJpZ2h0OiBza2lwT3JMaW1pdCghZW5hYmxlQm9yZGVyIHx8IHNraXAudG9wIHx8IHNraXAucmlnaHQsIG8udG9wUmlnaHQsIDAsIG1heFIpLFxuICAgIGJvdHRvbUxlZnQ6IHNraXBPckxpbWl0KCFlbmFibGVCb3JkZXIgfHwgc2tpcC5ib3R0b20gfHwgc2tpcC5sZWZ0LCBvLmJvdHRvbUxlZnQsIDAsIG1heFIpLFxuICAgIGJvdHRvbVJpZ2h0OiBza2lwT3JMaW1pdCghZW5hYmxlQm9yZGVyIHx8IHNraXAuYm90dG9tIHx8IHNraXAucmlnaHQsIG8uYm90dG9tUmlnaHQsIDAsIG1heFIpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJvdW5kaW5nUmVjdHMoYmFyKSB7XG4gIGNvbnN0IGJvdW5kcyA9IGdldEJhckJvdW5kcyhiYXIpO1xuICBjb25zdCB3aWR0aCA9IGJvdW5kcy5yaWdodCAtIGJvdW5kcy5sZWZ0O1xuICBjb25zdCBoZWlnaHQgPSBib3VuZHMuYm90dG9tIC0gYm91bmRzLnRvcDtcbiAgY29uc3QgYm9yZGVyID0gcGFyc2VCb3JkZXJXaWR0aChiYXIsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gIGNvbnN0IHJhZGl1cyA9IHBhcnNlQm9yZGVyUmFkaXVzKGJhciwgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcblxuICByZXR1cm4ge1xuICAgIG91dGVyOiB7XG4gICAgICB4OiBib3VuZHMubGVmdCxcbiAgICAgIHk6IGJvdW5kcy50b3AsXG4gICAgICB3OiB3aWR0aCxcbiAgICAgIGg6IGhlaWdodCxcbiAgICAgIHJhZGl1c1xuICAgIH0sXG4gICAgaW5uZXI6IHtcbiAgICAgIHg6IGJvdW5kcy5sZWZ0ICsgYm9yZGVyLmwsXG4gICAgICB5OiBib3VuZHMudG9wICsgYm9yZGVyLnQsXG4gICAgICB3OiB3aWR0aCAtIGJvcmRlci5sIC0gYm9yZGVyLnIsXG4gICAgICBoOiBoZWlnaHQgLSBib3JkZXIudCAtIGJvcmRlci5iLFxuICAgICAgcmFkaXVzOiB7XG4gICAgICAgIHRvcExlZnQ6IE1hdGgubWF4KDAsIHJhZGl1cy50b3BMZWZ0IC0gTWF0aC5tYXgoYm9yZGVyLnQsIGJvcmRlci5sKSksXG4gICAgICAgIHRvcFJpZ2h0OiBNYXRoLm1heCgwLCByYWRpdXMudG9wUmlnaHQgLSBNYXRoLm1heChib3JkZXIudCwgYm9yZGVyLnIpKSxcbiAgICAgICAgYm90dG9tTGVmdDogTWF0aC5tYXgoMCwgcmFkaXVzLmJvdHRvbUxlZnQgLSBNYXRoLm1heChib3JkZXIuYiwgYm9yZGVyLmwpKSxcbiAgICAgICAgYm90dG9tUmlnaHQ6IE1hdGgubWF4KDAsIHJhZGl1cy5ib3R0b21SaWdodCAtIE1hdGgubWF4KGJvcmRlci5iLCBib3JkZXIucikpLFxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaW5SYW5nZShiYXIsIHgsIHksIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgY29uc3Qgc2tpcFggPSB4ID09PSBudWxsO1xuICBjb25zdCBza2lwWSA9IHkgPT09IG51bGw7XG4gIGNvbnN0IHNraXBCb3RoID0gc2tpcFggJiYgc2tpcFk7XG4gIGNvbnN0IGJvdW5kcyA9IGJhciAmJiAhc2tpcEJvdGggJiYgZ2V0QmFyQm91bmRzKGJhciwgdXNlRmluYWxQb3NpdGlvbik7XG5cbiAgcmV0dXJuIGJvdW5kc1xuXHRcdCYmIChza2lwWCB8fCBfaXNCZXR3ZWVuKHgsIGJvdW5kcy5sZWZ0LCBib3VuZHMucmlnaHQpKVxuXHRcdCYmIChza2lwWSB8fCBfaXNCZXR3ZWVuKHksIGJvdW5kcy50b3AsIGJvdW5kcy5ib3R0b20pKTtcbn1cblxuZnVuY3Rpb24gaGFzUmFkaXVzKHJhZGl1cykge1xuICByZXR1cm4gcmFkaXVzLnRvcExlZnQgfHwgcmFkaXVzLnRvcFJpZ2h0IHx8IHJhZGl1cy5ib3R0b21MZWZ0IHx8IHJhZGl1cy5ib3R0b21SaWdodDtcbn1cblxuLyoqXG4gKiBBZGQgYSBwYXRoIG9mIGEgcmVjdGFuZ2xlIHRvIHRoZSBjdXJyZW50IHN1Yi1wYXRoXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4IENvbnRleHRcbiAqIEBwYXJhbSB7Kn0gcmVjdCBCb3VuZGluZyByZWN0XG4gKi9cbmZ1bmN0aW9uIGFkZE5vcm1hbFJlY3RQYXRoKGN0eCwgcmVjdCkge1xuICBjdHgucmVjdChyZWN0LngsIHJlY3QueSwgcmVjdC53LCByZWN0LmgpO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVjdChyZWN0LCBhbW91bnQsIHJlZlJlY3QgPSB7fSkge1xuICBjb25zdCB4ID0gcmVjdC54ICE9PSByZWZSZWN0LnggPyAtYW1vdW50IDogMDtcbiAgY29uc3QgeSA9IHJlY3QueSAhPT0gcmVmUmVjdC55ID8gLWFtb3VudCA6IDA7XG4gIGNvbnN0IHcgPSAocmVjdC54ICsgcmVjdC53ICE9PSByZWZSZWN0LnggKyByZWZSZWN0LncgPyBhbW91bnQgOiAwKSAtIHg7XG4gIGNvbnN0IGggPSAocmVjdC55ICsgcmVjdC5oICE9PSByZWZSZWN0LnkgKyByZWZSZWN0LmggPyBhbW91bnQgOiAwKSAtIHk7XG4gIHJldHVybiB7XG4gICAgeDogcmVjdC54ICsgeCxcbiAgICB5OiByZWN0LnkgKyB5LFxuICAgIHc6IHJlY3QudyArIHcsXG4gICAgaDogcmVjdC5oICsgaCxcbiAgICByYWRpdXM6IHJlY3QucmFkaXVzXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhckVsZW1lbnQgZXh0ZW5kcyBFbGVtZW50IHtcblxuICBzdGF0aWMgaWQgPSAnYmFyJztcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICBib3JkZXJTa2lwcGVkOiAnc3RhcnQnLFxuICAgIGJvcmRlcldpZHRoOiAwLFxuICAgIGJvcmRlclJhZGl1czogMCxcbiAgICBpbmZsYXRlQW1vdW50OiAnYXV0bycsXG4gICAgcG9pbnRTdHlsZTogdW5kZWZpbmVkXG4gIH07XG5cbiAgLyoqXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBzdGF0aWMgZGVmYXVsdFJvdXRlcyA9IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICdiYWNrZ3JvdW5kQ29sb3InLFxuICAgIGJvcmRlckNvbG9yOiAnYm9yZGVyQ29sb3InXG4gIH07XG5cbiAgY29uc3RydWN0b3IoY2ZnKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhvcml6b250YWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5iYXNlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud2lkdGggPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5oZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pbmZsYXRlQW1vdW50ID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKGNmZykge1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjZmcpO1xuICAgIH1cbiAgfVxuXG4gIGRyYXcoY3R4KSB7XG4gICAgY29uc3Qge2luZmxhdGVBbW91bnQsIG9wdGlvbnM6IHtib3JkZXJDb2xvciwgYmFja2dyb3VuZENvbG9yfX0gPSB0aGlzO1xuICAgIGNvbnN0IHtpbm5lciwgb3V0ZXJ9ID0gYm91bmRpbmdSZWN0cyh0aGlzKTtcbiAgICBjb25zdCBhZGRSZWN0UGF0aCA9IGhhc1JhZGl1cyhvdXRlci5yYWRpdXMpID8gYWRkUm91bmRlZFJlY3RQYXRoIDogYWRkTm9ybWFsUmVjdFBhdGg7XG5cbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgaWYgKG91dGVyLncgIT09IGlubmVyLncgfHwgb3V0ZXIuaCAhPT0gaW5uZXIuaCkge1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgYWRkUmVjdFBhdGgoY3R4LCBpbmZsYXRlUmVjdChvdXRlciwgaW5mbGF0ZUFtb3VudCwgaW5uZXIpKTtcbiAgICAgIGN0eC5jbGlwKCk7XG4gICAgICBhZGRSZWN0UGF0aChjdHgsIGluZmxhdGVSZWN0KGlubmVyLCAtaW5mbGF0ZUFtb3VudCwgb3V0ZXIpKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBib3JkZXJDb2xvcjtcbiAgICAgIGN0eC5maWxsKCdldmVub2RkJyk7XG4gICAgfVxuXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGFkZFJlY3RQYXRoKGN0eCwgaW5mbGF0ZVJlY3QoaW5uZXIsIGluZmxhdGVBbW91bnQpKTtcbiAgICBjdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yO1xuICAgIGN0eC5maWxsKCk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaW5SYW5nZShtb3VzZVgsIG1vdXNlWSwgdXNlRmluYWxQb3NpdGlvbikge1xuICAgIHJldHVybiBpblJhbmdlKHRoaXMsIG1vdXNlWCwgbW91c2VZLCB1c2VGaW5hbFBvc2l0aW9uKTtcbiAgfVxuXG4gIGluWFJhbmdlKG1vdXNlWCwgdXNlRmluYWxQb3NpdGlvbikge1xuICAgIHJldHVybiBpblJhbmdlKHRoaXMsIG1vdXNlWCwgbnVsbCwgdXNlRmluYWxQb3NpdGlvbik7XG4gIH1cblxuICBpbllSYW5nZShtb3VzZVksIHVzZUZpbmFsUG9zaXRpb24pIHtcbiAgICByZXR1cm4gaW5SYW5nZSh0aGlzLCBudWxsLCBtb3VzZVksIHVzZUZpbmFsUG9zaXRpb24pO1xuICB9XG5cbiAgZ2V0Q2VudGVyUG9pbnQodXNlRmluYWxQb3NpdGlvbikge1xuICAgIGNvbnN0IHt4LCB5LCBiYXNlLCBob3Jpem9udGFsfSA9IC8qKiBAdHlwZSB7QmFyUHJvcHN9ICovICh0aGlzLmdldFByb3BzKFsneCcsICd5JywgJ2Jhc2UnLCAnaG9yaXpvbnRhbCddLCB1c2VGaW5hbFBvc2l0aW9uKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGhvcml6b250YWwgPyAoeCArIGJhc2UpIC8gMiA6IHgsXG4gICAgICB5OiBob3Jpem9udGFsID8geSA6ICh5ICsgYmFzZSkgLyAyXG4gICAgfTtcbiAgfVxuXG4gIGdldFJhbmdlKGF4aXMpIHtcbiAgICByZXR1cm4gYXhpcyA9PT0gJ3gnID8gdGhpcy53aWR0aCAvIDIgOiB0aGlzLmhlaWdodCAvIDI7XG4gIH1cbn1cbiIsICJpbXBvcnQge0RvdWdobnV0Q29udHJvbGxlciwgUG9sYXJBcmVhQ29udHJvbGxlcn0gZnJvbSAnLi4vaW5kZXguanMnO1xuaW1wb3J0IHR5cGUge0NoYXJ0LCBDaGFydERhdGFzZXR9IGZyb20gJy4uL3R5cGVzLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBDb2xvcnNQbHVnaW5PcHRpb25zIHtcbiAgZW5hYmxlZD86IGJvb2xlYW47XG4gIGZvcmNlT3ZlcnJpZGU/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgQ29sb3JzRGVzY3JpcHRvciB7XG4gIGJhY2tncm91bmRDb2xvcj86IHVua25vd247XG4gIGJvcmRlckNvbG9yPzogdW5rbm93bjtcbn1cblxuY29uc3QgQk9SREVSX0NPTE9SUyA9IFtcbiAgJ3JnYig1NCwgMTYyLCAyMzUpJywgLy8gYmx1ZVxuICAncmdiKDI1NSwgOTksIDEzMiknLCAvLyByZWRcbiAgJ3JnYigyNTUsIDE1OSwgNjQpJywgLy8gb3JhbmdlXG4gICdyZ2IoMjU1LCAyMDUsIDg2KScsIC8vIHllbGxvd1xuICAncmdiKDc1LCAxOTIsIDE5MiknLCAvLyBncmVlblxuICAncmdiKDE1MywgMTAyLCAyNTUpJywgLy8gcHVycGxlXG4gICdyZ2IoMjAxLCAyMDMsIDIwNyknIC8vIGdyZXlcbl07XG5cbi8vIEJvcmRlciBjb2xvcnMgd2l0aCA1MCUgdHJhbnNwYXJlbmN5XG5jb25zdCBCQUNLR1JPVU5EX0NPTE9SUyA9IC8qICNfX1BVUkVfXyAqLyBCT1JERVJfQ09MT1JTLm1hcChjb2xvciA9PiBjb2xvci5yZXBsYWNlKCdyZ2IoJywgJ3JnYmEoJykucmVwbGFjZSgnKScsICcsIDAuNSknKSk7XG5cbmZ1bmN0aW9uIGdldEJvcmRlckNvbG9yKGk6IG51bWJlcikge1xuICByZXR1cm4gQk9SREVSX0NPTE9SU1tpICUgQk9SREVSX0NPTE9SUy5sZW5ndGhdO1xufVxuXG5mdW5jdGlvbiBnZXRCYWNrZ3JvdW5kQ29sb3IoaTogbnVtYmVyKSB7XG4gIHJldHVybiBCQUNLR1JPVU5EX0NPTE9SU1tpICUgQkFDS0dST1VORF9DT0xPUlMubGVuZ3RoXTtcbn1cblxuZnVuY3Rpb24gY29sb3JpemVEZWZhdWx0RGF0YXNldChkYXRhc2V0OiBDaGFydERhdGFzZXQsIGk6IG51bWJlcikge1xuICBkYXRhc2V0LmJvcmRlckNvbG9yID0gZ2V0Qm9yZGVyQ29sb3IoaSk7XG4gIGRhdGFzZXQuYmFja2dyb3VuZENvbG9yID0gZ2V0QmFja2dyb3VuZENvbG9yKGkpO1xuXG4gIHJldHVybiArK2k7XG59XG5cbmZ1bmN0aW9uIGNvbG9yaXplRG91Z2hudXREYXRhc2V0KGRhdGFzZXQ6IENoYXJ0RGF0YXNldCwgaTogbnVtYmVyKSB7XG4gIGRhdGFzZXQuYmFja2dyb3VuZENvbG9yID0gZGF0YXNldC5kYXRhLm1hcCgoKSA9PiBnZXRCb3JkZXJDb2xvcihpKyspKTtcblxuICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gY29sb3JpemVQb2xhckFyZWFEYXRhc2V0KGRhdGFzZXQ6IENoYXJ0RGF0YXNldCwgaTogbnVtYmVyKSB7XG4gIGRhdGFzZXQuYmFja2dyb3VuZENvbG9yID0gZGF0YXNldC5kYXRhLm1hcCgoKSA9PiBnZXRCYWNrZ3JvdW5kQ29sb3IoaSsrKSk7XG5cbiAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIGdldENvbG9yaXplcihjaGFydDogQ2hhcnQpIHtcbiAgbGV0IGkgPSAwO1xuXG4gIHJldHVybiAoZGF0YXNldDogQ2hhcnREYXRhc2V0LCBkYXRhc2V0SW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBjaGFydC5nZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpLmNvbnRyb2xsZXI7XG5cbiAgICBpZiAoY29udHJvbGxlciBpbnN0YW5jZW9mIERvdWdobnV0Q29udHJvbGxlcikge1xuICAgICAgaSA9IGNvbG9yaXplRG91Z2hudXREYXRhc2V0KGRhdGFzZXQsIGkpO1xuICAgIH0gZWxzZSBpZiAoY29udHJvbGxlciBpbnN0YW5jZW9mIFBvbGFyQXJlYUNvbnRyb2xsZXIpIHtcbiAgICAgIGkgPSBjb2xvcml6ZVBvbGFyQXJlYURhdGFzZXQoZGF0YXNldCwgaSk7XG4gICAgfSBlbHNlIGlmIChjb250cm9sbGVyKSB7XG4gICAgICBpID0gY29sb3JpemVEZWZhdWx0RGF0YXNldChkYXRhc2V0LCBpKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbnRhaW5zQ29sb3JzRGVmaW5pdGlvbnMoXG4gIGRlc2NyaXB0b3JzOiBDb2xvcnNEZXNjcmlwdG9yW10gfCBSZWNvcmQ8c3RyaW5nLCBDb2xvcnNEZXNjcmlwdG9yPlxuKSB7XG4gIGxldCBrOiBudW1iZXIgfCBzdHJpbmc7XG5cbiAgZm9yIChrIGluIGRlc2NyaXB0b3JzKSB7XG4gICAgaWYgKGRlc2NyaXB0b3JzW2tdLmJvcmRlckNvbG9yIHx8IGRlc2NyaXB0b3JzW2tdLmJhY2tncm91bmRDb2xvcikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBjb250YWluc0NvbG9yc0RlZmluaXRpb24oXG4gIGRlc2NyaXB0b3I6IENvbG9yc0Rlc2NyaXB0b3Jcbikge1xuICByZXR1cm4gZGVzY3JpcHRvciAmJiAoZGVzY3JpcHRvci5ib3JkZXJDb2xvciB8fCBkZXNjcmlwdG9yLmJhY2tncm91bmRDb2xvcik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaWQ6ICdjb2xvcnMnLFxuXG4gIGRlZmF1bHRzOiB7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBmb3JjZU92ZXJyaWRlOiBmYWxzZVxuICB9IGFzIENvbG9yc1BsdWdpbk9wdGlvbnMsXG5cbiAgYmVmb3JlTGF5b3V0KGNoYXJ0OiBDaGFydCwgX2FyZ3MsIG9wdGlvbnM6IENvbG9yc1BsdWdpbk9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIGRhdGE6IHtkYXRhc2V0c30sXG4gICAgICBvcHRpb25zOiBjaGFydE9wdGlvbnNcbiAgICB9ID0gY2hhcnQuY29uZmlnO1xuICAgIGNvbnN0IHtlbGVtZW50c30gPSBjaGFydE9wdGlvbnM7XG5cbiAgICBpZiAoIW9wdGlvbnMuZm9yY2VPdmVycmlkZSAmJiAoY29udGFpbnNDb2xvcnNEZWZpbml0aW9ucyhkYXRhc2V0cykgfHwgY29udGFpbnNDb2xvcnNEZWZpbml0aW9uKGNoYXJ0T3B0aW9ucykgfHwgKGVsZW1lbnRzICYmIGNvbnRhaW5zQ29sb3JzRGVmaW5pdGlvbnMoZWxlbWVudHMpKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvcml6ZXIgPSBnZXRDb2xvcml6ZXIoY2hhcnQpO1xuXG4gICAgZGF0YXNldHMuZm9yRWFjaChjb2xvcml6ZXIpO1xuICB9XG59O1xuIiwgImltcG9ydCB7X2xpbWl0VmFsdWUsIF9sb29rdXBCeUtleSwgaXNOdWxsT3JVbmRlZiwgcmVzb2x2ZX0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbmZ1bmN0aW9uIGx0dGJEZWNpbWF0aW9uKGRhdGEsIHN0YXJ0LCBjb3VudCwgYXZhaWxhYmxlV2lkdGgsIG9wdGlvbnMpIHtcbiAgLyoqXG4gICAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBMYXJnZXN0IFRyaWFuZ2xlIFRocmVlIEJ1Y2tldHMgYWxnb3JpdGhtLlxuICAgKlxuICAgKiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBpbXBsZW1lbnRhdGlvbiBieSBTdmVpbm4gU3RlaW5hcnNzb25cbiAgICogaW4gaHR0cHM6Ly9naXRodWIuY29tL3N2ZWlubi1zdGVpbmFyc3Nvbi9mbG90LWRvd25zYW1wbGUvYmxvYi9tYXN0ZXIvanF1ZXJ5LmZsb3QuZG93bnNhbXBsZS5qc1xuICAgKlxuICAgKiBUaGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb24gaXMgTUlUIGxpY2Vuc2VkLlxuICAgKi9cbiAgY29uc3Qgc2FtcGxlcyA9IG9wdGlvbnMuc2FtcGxlcyB8fCBhdmFpbGFibGVXaWR0aDtcbiAgLy8gVGhlcmUgYXJlIGxlc3MgcG9pbnRzIHRoYW4gdGhlIHRocmVzaG9sZCwgcmV0dXJuaW5nIHRoZSB3aG9sZSBhcnJheVxuICBpZiAoc2FtcGxlcyA+PSBjb3VudCkge1xuICAgIHJldHVybiBkYXRhLnNsaWNlKHN0YXJ0LCBzdGFydCArIGNvdW50KTtcbiAgfVxuXG4gIGNvbnN0IGRlY2ltYXRlZCA9IFtdO1xuXG4gIGNvbnN0IGJ1Y2tldFdpZHRoID0gKGNvdW50IC0gMikgLyAoc2FtcGxlcyAtIDIpO1xuICBsZXQgc2FtcGxlZEluZGV4ID0gMDtcbiAgY29uc3QgZW5kSW5kZXggPSBzdGFydCArIGNvdW50IC0gMTtcbiAgLy8gU3RhcnRpbmcgZnJvbSBvZmZzZXRcbiAgbGV0IGEgPSBzdGFydDtcbiAgbGV0IGksIG1heEFyZWFQb2ludCwgbWF4QXJlYSwgYXJlYSwgbmV4dEE7XG5cbiAgZGVjaW1hdGVkW3NhbXBsZWRJbmRleCsrXSA9IGRhdGFbYV07XG5cbiAgZm9yIChpID0gMDsgaSA8IHNhbXBsZXMgLSAyOyBpKyspIHtcbiAgICBsZXQgYXZnWCA9IDA7XG4gICAgbGV0IGF2Z1kgPSAwO1xuICAgIGxldCBqO1xuXG4gICAgLy8gQWRkaW5nIG9mZnNldFxuICAgIGNvbnN0IGF2Z1JhbmdlU3RhcnQgPSBNYXRoLmZsb29yKChpICsgMSkgKiBidWNrZXRXaWR0aCkgKyAxICsgc3RhcnQ7XG4gICAgY29uc3QgYXZnUmFuZ2VFbmQgPSBNYXRoLm1pbihNYXRoLmZsb29yKChpICsgMikgKiBidWNrZXRXaWR0aCkgKyAxLCBjb3VudCkgKyBzdGFydDtcbiAgICBjb25zdCBhdmdSYW5nZUxlbmd0aCA9IGF2Z1JhbmdlRW5kIC0gYXZnUmFuZ2VTdGFydDtcblxuICAgIGZvciAoaiA9IGF2Z1JhbmdlU3RhcnQ7IGogPCBhdmdSYW5nZUVuZDsgaisrKSB7XG4gICAgICBhdmdYICs9IGRhdGFbal0ueDtcbiAgICAgIGF2Z1kgKz0gZGF0YVtqXS55O1xuICAgIH1cblxuICAgIGF2Z1ggLz0gYXZnUmFuZ2VMZW5ndGg7XG4gICAgYXZnWSAvPSBhdmdSYW5nZUxlbmd0aDtcblxuICAgIC8vIEFkZGluZyBvZmZzZXRcbiAgICBjb25zdCByYW5nZU9mZnMgPSBNYXRoLmZsb29yKGkgKiBidWNrZXRXaWR0aCkgKyAxICsgc3RhcnQ7XG4gICAgY29uc3QgcmFuZ2VUbyA9IE1hdGgubWluKE1hdGguZmxvb3IoKGkgKyAxKSAqIGJ1Y2tldFdpZHRoKSArIDEsIGNvdW50KSArIHN0YXJ0O1xuICAgIGNvbnN0IHt4OiBwb2ludEF4LCB5OiBwb2ludEF5fSA9IGRhdGFbYV07XG5cbiAgICAvLyBOb3RlIHRoYXQgdGhpcyBpcyBjaGFuZ2VkIGZyb20gdGhlIG9yaWdpbmFsIGFsZ29yaXRobSB3aGljaCBpbml0aWFsaXplcyB0aGVzZVxuICAgIC8vIHZhbHVlcyB0byAxLiBUaGUgcmVhc29uIGZvciB0aGlzIGNoYW5nZSBpcyB0aGF0IGlmIHRoZSBhcmVhIGlzIHNtYWxsLCBuZXh0QVxuICAgIC8vIHdvdWxkIG5ldmVyIGJlIHNldCBhbmQgdGh1cyBhIGNyYXNoIHdvdWxkIG9jY3VyIGluIHRoZSBuZXh0IGxvb3AgYXMgYGFgIHdvdWxkIGJlY29tZVxuICAgIC8vIGB1bmRlZmluZWRgLiBTaW5jZSB0aGUgYXJlYSBpcyBhbHdheXMgcG9zaXRpdmUsIGJ1dCBjb3VsZCBiZSAwIGluIHRoZSBjYXNlIG9mIGEgZmxhdCB0cmFjZSxcbiAgICAvLyBpbml0aWFsaXppbmcgd2l0aCBhIG5lZ2F0aXZlIG51bWJlciBpcyB0aGUgY29ycmVjdCBzb2x1dGlvbi5cbiAgICBtYXhBcmVhID0gYXJlYSA9IC0xO1xuXG4gICAgZm9yIChqID0gcmFuZ2VPZmZzOyBqIDwgcmFuZ2VUbzsgaisrKSB7XG4gICAgICBhcmVhID0gMC41ICogTWF0aC5hYnMoXG4gICAgICAgIChwb2ludEF4IC0gYXZnWCkgKiAoZGF0YVtqXS55IC0gcG9pbnRBeSkgLVxuICAgICAgICAocG9pbnRBeCAtIGRhdGFbal0ueCkgKiAoYXZnWSAtIHBvaW50QXkpXG4gICAgICApO1xuXG4gICAgICBpZiAoYXJlYSA+IG1heEFyZWEpIHtcbiAgICAgICAgbWF4QXJlYSA9IGFyZWE7XG4gICAgICAgIG1heEFyZWFQb2ludCA9IGRhdGFbal07XG4gICAgICAgIG5leHRBID0gajtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWNpbWF0ZWRbc2FtcGxlZEluZGV4KytdID0gbWF4QXJlYVBvaW50O1xuICAgIGEgPSBuZXh0QTtcbiAgfVxuXG4gIC8vIEluY2x1ZGUgdGhlIGxhc3QgcG9pbnRcbiAgZGVjaW1hdGVkW3NhbXBsZWRJbmRleCsrXSA9IGRhdGFbZW5kSW5kZXhdO1xuXG4gIHJldHVybiBkZWNpbWF0ZWQ7XG59XG5cbmZ1bmN0aW9uIG1pbk1heERlY2ltYXRpb24oZGF0YSwgc3RhcnQsIGNvdW50LCBhdmFpbGFibGVXaWR0aCkge1xuICBsZXQgYXZnWCA9IDA7XG4gIGxldCBjb3VudFggPSAwO1xuICBsZXQgaSwgcG9pbnQsIHgsIHksIHByZXZYLCBtaW5JbmRleCwgbWF4SW5kZXgsIHN0YXJ0SW5kZXgsIG1pblksIG1heFk7XG4gIGNvbnN0IGRlY2ltYXRlZCA9IFtdO1xuICBjb25zdCBlbmRJbmRleCA9IHN0YXJ0ICsgY291bnQgLSAxO1xuXG4gIGNvbnN0IHhNaW4gPSBkYXRhW3N0YXJ0XS54O1xuICBjb25zdCB4TWF4ID0gZGF0YVtlbmRJbmRleF0ueDtcbiAgY29uc3QgZHggPSB4TWF4IC0geE1pbjtcblxuICBmb3IgKGkgPSBzdGFydDsgaSA8IHN0YXJ0ICsgY291bnQ7ICsraSkge1xuICAgIHBvaW50ID0gZGF0YVtpXTtcbiAgICB4ID0gKHBvaW50LnggLSB4TWluKSAvIGR4ICogYXZhaWxhYmxlV2lkdGg7XG4gICAgeSA9IHBvaW50Lnk7XG4gICAgY29uc3QgdHJ1bmNYID0geCB8IDA7XG5cbiAgICBpZiAodHJ1bmNYID09PSBwcmV2WCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIGBtaW5ZYCAvIGBtYXhZYCBhbmQgYGF2Z1hgIHdoaWxlIHdlIHN0YXkgd2l0aGluIHNhbWUgeC1wb3NpdGlvblxuICAgICAgaWYgKHkgPCBtaW5ZKSB7XG4gICAgICAgIG1pblkgPSB5O1xuICAgICAgICBtaW5JbmRleCA9IGk7XG4gICAgICB9IGVsc2UgaWYgKHkgPiBtYXhZKSB7XG4gICAgICAgIG1heFkgPSB5O1xuICAgICAgICBtYXhJbmRleCA9IGk7XG4gICAgICB9XG4gICAgICAvLyBGb3IgZmlyc3QgcG9pbnQgaW4gZ3JvdXAsIGNvdW50WCBpcyBgMGAsIHNvIGF2ZXJhZ2Ugd2lsbCBiZSBgeGAgLyAxLlxuICAgICAgLy8gVXNlIHBvaW50LnggaGVyZSBiZWNhdXNlIHdlJ3JlIGNvbXB1dGluZyB0aGUgYXZlcmFnZSBkYXRhIGB4YCB2YWx1ZVxuICAgICAgYXZnWCA9IChjb3VudFggKiBhdmdYICsgcG9pbnQueCkgLyArK2NvdW50WDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUHVzaCB1cCB0byA0IHBvaW50cywgMyBmb3IgdGhlIGxhc3QgaW50ZXJ2YWwgYW5kIHRoZSBmaXJzdCBwb2ludCBmb3IgdGhpcyBpbnRlcnZhbFxuICAgICAgY29uc3QgbGFzdEluZGV4ID0gaSAtIDE7XG5cbiAgICAgIGlmICghaXNOdWxsT3JVbmRlZihtaW5JbmRleCkgJiYgIWlzTnVsbE9yVW5kZWYobWF4SW5kZXgpKSB7XG4gICAgICAgIC8vIFRoZSBpbnRlcnZhbCBpcyBkZWZpbmVkIGJ5IDQgcG9pbnRzOiBzdGFydCwgbWluLCBtYXgsIGVuZC5cbiAgICAgICAgLy8gVGhlIHN0YXJ0aW5nIHBvaW50IGlzIGFscmVhZHkgY29uc2lkZXJlZCBhdCB0aGlzIHBvaW50LCBzbyB3ZSBuZWVkIHRvIGRldGVybWluZSB3aGljaFxuICAgICAgICAvLyBvZiB0aGUgb3RoZXIgcG9pbnRzIHRvIGFkZC4gV2UgbmVlZCB0byBzb3J0IHRoZXNlIHBvaW50cyB0byBlbnN1cmUgdGhlIGRlY2ltYXRlZCBkYXRhXG4gICAgICAgIC8vIGlzIHN0aWxsIHNvcnRlZCBhbmQgdGhlbiBlbnN1cmUgdGhlcmUgYXJlIG5vIGR1cGxpY2F0ZXMuXG4gICAgICAgIGNvbnN0IGludGVybWVkaWF0ZUluZGV4MSA9IE1hdGgubWluKG1pbkluZGV4LCBtYXhJbmRleCk7XG4gICAgICAgIGNvbnN0IGludGVybWVkaWF0ZUluZGV4MiA9IE1hdGgubWF4KG1pbkluZGV4LCBtYXhJbmRleCk7XG5cbiAgICAgICAgaWYgKGludGVybWVkaWF0ZUluZGV4MSAhPT0gc3RhcnRJbmRleCAmJiBpbnRlcm1lZGlhdGVJbmRleDEgIT09IGxhc3RJbmRleCkge1xuICAgICAgICAgIGRlY2ltYXRlZC5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRhdGFbaW50ZXJtZWRpYXRlSW5kZXgxXSxcbiAgICAgICAgICAgIHg6IGF2Z1gsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVybWVkaWF0ZUluZGV4MiAhPT0gc3RhcnRJbmRleCAmJiBpbnRlcm1lZGlhdGVJbmRleDIgIT09IGxhc3RJbmRleCkge1xuICAgICAgICAgIGRlY2ltYXRlZC5wdXNoKHtcbiAgICAgICAgICAgIC4uLmRhdGFbaW50ZXJtZWRpYXRlSW5kZXgyXSxcbiAgICAgICAgICAgIHg6IGF2Z1hcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBsYXN0SW5kZXggPT09IHN0YXJ0SW5kZXggd2lsbCBvY2N1ciB3aGVuIGEgcmFuZ2UgaGFzIG9ubHkgMSBwb2ludCB3aGljaCBjb3VsZFxuICAgICAgLy8gaGFwcGVuIHdpdGggdmVyeSB1bmV2ZW4gZGF0YVxuICAgICAgaWYgKGkgPiAwICYmIGxhc3RJbmRleCAhPT0gc3RhcnRJbmRleCkge1xuICAgICAgICAvLyBMYXN0IHBvaW50IGluIHRoZSBwcmV2aW91cyBpbnRlcnZhbFxuICAgICAgICBkZWNpbWF0ZWQucHVzaChkYXRhW2xhc3RJbmRleF0pO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGFydCBvZiB0aGUgbmV3IGludGVydmFsXG4gICAgICBkZWNpbWF0ZWQucHVzaChwb2ludCk7XG4gICAgICBwcmV2WCA9IHRydW5jWDtcbiAgICAgIGNvdW50WCA9IDA7XG4gICAgICBtaW5ZID0gbWF4WSA9IHk7XG4gICAgICBtaW5JbmRleCA9IG1heEluZGV4ID0gc3RhcnRJbmRleCA9IGk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRlY2ltYXRlZDtcbn1cblxuZnVuY3Rpb24gY2xlYW5EZWNpbWF0ZWREYXRhc2V0KGRhdGFzZXQpIHtcbiAgaWYgKGRhdGFzZXQuX2RlY2ltYXRlZCkge1xuICAgIGNvbnN0IGRhdGEgPSBkYXRhc2V0Ll9kYXRhO1xuICAgIGRlbGV0ZSBkYXRhc2V0Ll9kZWNpbWF0ZWQ7XG4gICAgZGVsZXRlIGRhdGFzZXQuX2RhdGE7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRhdGFzZXQsICdkYXRhJywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGRhdGEsXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYW5EZWNpbWF0ZWREYXRhKGNoYXJ0KSB7XG4gIGNoYXJ0LmRhdGEuZGF0YXNldHMuZm9yRWFjaCgoZGF0YXNldCkgPT4ge1xuICAgIGNsZWFuRGVjaW1hdGVkRGF0YXNldChkYXRhc2V0KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHNTaW1wbGlmaWVkKG1ldGEsIHBvaW50cykge1xuICBjb25zdCBwb2ludENvdW50ID0gcG9pbnRzLmxlbmd0aDtcblxuICBsZXQgc3RhcnQgPSAwO1xuICBsZXQgY291bnQ7XG5cbiAgY29uc3Qge2lTY2FsZX0gPSBtZXRhO1xuICBjb25zdCB7bWluLCBtYXgsIG1pbkRlZmluZWQsIG1heERlZmluZWR9ID0gaVNjYWxlLmdldFVzZXJCb3VuZHMoKTtcblxuICBpZiAobWluRGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gX2xpbWl0VmFsdWUoX2xvb2t1cEJ5S2V5KHBvaW50cywgaVNjYWxlLmF4aXMsIG1pbikubG8sIDAsIHBvaW50Q291bnQgLSAxKTtcbiAgfVxuICBpZiAobWF4RGVmaW5lZCkge1xuICAgIGNvdW50ID0gX2xpbWl0VmFsdWUoX2xvb2t1cEJ5S2V5KHBvaW50cywgaVNjYWxlLmF4aXMsIG1heCkuaGkgKyAxLCBzdGFydCwgcG9pbnRDb3VudCkgLSBzdGFydDtcbiAgfSBlbHNlIHtcbiAgICBjb3VudCA9IHBvaW50Q291bnQgLSBzdGFydDtcbiAgfVxuXG4gIHJldHVybiB7c3RhcnQsIGNvdW50fTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpZDogJ2RlY2ltYXRpb24nLFxuXG4gIGRlZmF1bHRzOiB7XG4gICAgYWxnb3JpdGhtOiAnbWluLW1heCcsXG4gICAgZW5hYmxlZDogZmFsc2UsXG4gIH0sXG5cbiAgYmVmb3JlRWxlbWVudHNVcGRhdGU6IChjaGFydCwgYXJncywgb3B0aW9ucykgPT4ge1xuICAgIGlmICghb3B0aW9ucy5lbmFibGVkKSB7XG4gICAgICAvLyBUaGUgZGVjaW1hdGlvbiBwbHVnaW4gbWF5IGhhdmUgYmVlbiBwcmV2aW91c2x5IGVuYWJsZWQuIE5lZWQgdG8gcmVtb3ZlIG9sZCBgZGF0YXNldC5fZGF0YWAgaGFuZGxlcnNcbiAgICAgIGNsZWFuRGVjaW1hdGVkRGF0YShjaGFydCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQXNzdW1lIHRoZSBlbnRpcmUgY2hhcnQgaXMgYXZhaWxhYmxlIHRvIHNob3cgYSBmZXcgbW9yZSBwb2ludHMgdGhhbiBuZWVkZWRcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IGNoYXJ0LndpZHRoO1xuXG4gICAgY2hhcnQuZGF0YS5kYXRhc2V0cy5mb3JFYWNoKChkYXRhc2V0LCBkYXRhc2V0SW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHtfZGF0YSwgaW5kZXhBeGlzfSA9IGRhdGFzZXQ7XG4gICAgICBjb25zdCBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcbiAgICAgIGNvbnN0IGRhdGEgPSBfZGF0YSB8fCBkYXRhc2V0LmRhdGE7XG5cbiAgICAgIGlmIChyZXNvbHZlKFtpbmRleEF4aXMsIGNoYXJ0Lm9wdGlvbnMuaW5kZXhBeGlzXSkgPT09ICd5Jykge1xuICAgICAgICAvLyBEZWNpbWF0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBsaW5lcyB0aGF0IGhhdmUgYW4gWCBpbmRleEF4aXNcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW1ldGEuY29udHJvbGxlci5zdXBwb3J0c0RlY2ltYXRpb24pIHtcbiAgICAgICAgLy8gT25seSBsaW5lIGRhdGFzZXRzIGFyZSBzdXBwb3J0ZWRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB4QXhpcyA9IGNoYXJ0LnNjYWxlc1ttZXRhLnhBeGlzSURdO1xuICAgICAgaWYgKHhBeGlzLnR5cGUgIT09ICdsaW5lYXInICYmIHhBeGlzLnR5cGUgIT09ICd0aW1lJykge1xuICAgICAgICAvLyBPbmx5IGxpbmVhciBpbnRlcnBvbGF0aW9uIGlzIHN1cHBvcnRlZFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFydC5vcHRpb25zLnBhcnNpbmcpIHtcbiAgICAgICAgLy8gUGx1Z2luIG9ubHkgc3VwcG9ydHMgZGF0YSB0aGF0IGRvZXMgbm90IG5lZWQgcGFyc2luZ1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCB7c3RhcnQsIGNvdW50fSA9IGdldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHNTaW1wbGlmaWVkKG1ldGEsIGRhdGEpO1xuICAgICAgY29uc3QgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGQgfHwgNCAqIGF2YWlsYWJsZVdpZHRoO1xuICAgICAgaWYgKGNvdW50IDw9IHRocmVzaG9sZCkge1xuICAgICAgICAvLyBObyBkZWNpbWF0aW9uIGlzIHJlcXVpcmVkIHVudGlsIHdlIGFyZSBhYm92ZSB0aGlzIHRocmVzaG9sZFxuICAgICAgICBjbGVhbkRlY2ltYXRlZERhdGFzZXQoZGF0YXNldCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTnVsbE9yVW5kZWYoX2RhdGEpKSB7XG4gICAgICAgIC8vIEZpcnN0IHRpbWUgd2UgYXJlIHNlZWluZyB0aGlzIGRhdGFzZXRcbiAgICAgICAgLy8gV2Ugb3ZlcnJpZGUgdGhlICdkYXRhJyBwcm9wZXJ0eSB3aXRoIGEgc2V0dGVyIHRoYXQgc3RvcmVzIHRoZVxuICAgICAgICAvLyByYXcgZGF0YSBpbiBfZGF0YSwgYnV0IHJlYWRzIHRoZSBkZWNpbWF0ZWQgZGF0YSBmcm9tIF9kZWNpbWF0ZWRcbiAgICAgICAgZGF0YXNldC5fZGF0YSA9IGRhdGE7XG4gICAgICAgIGRlbGV0ZSBkYXRhc2V0LmRhdGE7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkYXRhc2V0LCAnZGF0YScsIHtcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlY2ltYXRlZDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IGQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gUG9pbnQgdGhlIGNoYXJ0IHRvIHRoZSBkZWNpbWF0ZWQgZGF0YVxuICAgICAgbGV0IGRlY2ltYXRlZDtcbiAgICAgIHN3aXRjaCAob3B0aW9ucy5hbGdvcml0aG0pIHtcbiAgICAgIGNhc2UgJ2x0dGInOlxuICAgICAgICBkZWNpbWF0ZWQgPSBsdHRiRGVjaW1hdGlvbihkYXRhLCBzdGFydCwgY291bnQsIGF2YWlsYWJsZVdpZHRoLCBvcHRpb25zKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdtaW4tbWF4JzpcbiAgICAgICAgZGVjaW1hdGVkID0gbWluTWF4RGVjaW1hdGlvbihkYXRhLCBzdGFydCwgY291bnQsIGF2YWlsYWJsZVdpZHRoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGRlY2ltYXRpb24gYWxnb3JpdGhtICcke29wdGlvbnMuYWxnb3JpdGhtfSdgKTtcbiAgICAgIH1cblxuICAgICAgZGF0YXNldC5fZGVjaW1hdGVkID0gZGVjaW1hdGVkO1xuICAgIH0pO1xuICB9LFxuXG4gIGRlc3Ryb3koY2hhcnQpIHtcbiAgICBjbGVhbkRlY2ltYXRlZERhdGEoY2hhcnQpO1xuICB9XG59O1xuIiwgImltcG9ydCB7X2JvdW5kU2VnbWVudCwgX2JvdW5kU2VnbWVudHMsIF9ub3JtYWxpemVBbmdsZX0gZnJvbSAnLi4vLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBfc2VnbWVudHMobGluZSwgdGFyZ2V0LCBwcm9wZXJ0eSkge1xuICBjb25zdCBzZWdtZW50cyA9IGxpbmUuc2VnbWVudHM7XG4gIGNvbnN0IHBvaW50cyA9IGxpbmUucG9pbnRzO1xuICBjb25zdCB0cG9pbnRzID0gdGFyZ2V0LnBvaW50cztcbiAgY29uc3QgcGFydHMgPSBbXTtcblxuICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICBsZXQge3N0YXJ0LCBlbmR9ID0gc2VnbWVudDtcbiAgICBlbmQgPSBfZmluZFNlZ21lbnRFbmQoc3RhcnQsIGVuZCwgcG9pbnRzKTtcblxuICAgIGNvbnN0IGJvdW5kcyA9IF9nZXRCb3VuZHMocHJvcGVydHksIHBvaW50c1tzdGFydF0sIHBvaW50c1tlbmRdLCBzZWdtZW50Lmxvb3ApO1xuXG4gICAgaWYgKCF0YXJnZXQuc2VnbWVudHMpIHtcbiAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgYm91bmRhcnkgbm90IHN1cHBvcnRpbmcgYHNlZ21lbnRzYCAoc2ltcGxlQXJjKVxuICAgICAgLy8gQm91bmRzIGFyZSBwcm92aWRlZCBhcyBgdGFyZ2V0YCBmb3IgcGFydGlhbCBjaXJjbGUsIG9yIHVuZGVmaW5lZCBmb3IgZnVsbCBjaXJjbGVcbiAgICAgIHBhcnRzLnB1c2goe1xuICAgICAgICBzb3VyY2U6IHNlZ21lbnQsXG4gICAgICAgIHRhcmdldDogYm91bmRzLFxuICAgICAgICBzdGFydDogcG9pbnRzW3N0YXJ0XSxcbiAgICAgICAgZW5kOiBwb2ludHNbZW5kXVxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBHZXQgYWxsIHNlZ21lbnRzIGZyb20gYHRhcmdldGAgdGhhdCBpbnRlcnNlY3QgdGhlIGJvdW5kcyBvZiBjdXJyZW50IHNlZ21lbnQgb2YgYGxpbmVgXG4gICAgY29uc3QgdGFyZ2V0U2VnbWVudHMgPSBfYm91bmRTZWdtZW50cyh0YXJnZXQsIGJvdW5kcyk7XG5cbiAgICBmb3IgKGNvbnN0IHRndCBvZiB0YXJnZXRTZWdtZW50cykge1xuICAgICAgY29uc3Qgc3ViQm91bmRzID0gX2dldEJvdW5kcyhwcm9wZXJ0eSwgdHBvaW50c1t0Z3Quc3RhcnRdLCB0cG9pbnRzW3RndC5lbmRdLCB0Z3QubG9vcCk7XG4gICAgICBjb25zdCBmaWxsU291cmNlcyA9IF9ib3VuZFNlZ21lbnQoc2VnbWVudCwgcG9pbnRzLCBzdWJCb3VuZHMpO1xuXG4gICAgICBmb3IgKGNvbnN0IGZpbGxTb3VyY2Ugb2YgZmlsbFNvdXJjZXMpIHtcbiAgICAgICAgcGFydHMucHVzaCh7XG4gICAgICAgICAgc291cmNlOiBmaWxsU291cmNlLFxuICAgICAgICAgIHRhcmdldDogdGd0LFxuICAgICAgICAgIHN0YXJ0OiB7XG4gICAgICAgICAgICBbcHJvcGVydHldOiBfZ2V0RWRnZShib3VuZHMsIHN1YkJvdW5kcywgJ3N0YXJ0JywgTWF0aC5tYXgpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbmQ6IHtcbiAgICAgICAgICAgIFtwcm9wZXJ0eV06IF9nZXRFZGdlKGJvdW5kcywgc3ViQm91bmRzLCAnZW5kJywgTWF0aC5taW4pXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2dldEJvdW5kcyhwcm9wZXJ0eSwgZmlyc3QsIGxhc3QsIGxvb3ApIHtcbiAgaWYgKGxvb3ApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IHN0YXJ0ID0gZmlyc3RbcHJvcGVydHldO1xuICBsZXQgZW5kID0gbGFzdFtwcm9wZXJ0eV07XG5cbiAgaWYgKHByb3BlcnR5ID09PSAnYW5nbGUnKSB7XG4gICAgc3RhcnQgPSBfbm9ybWFsaXplQW5nbGUoc3RhcnQpO1xuICAgIGVuZCA9IF9ub3JtYWxpemVBbmdsZShlbmQpO1xuICB9XG4gIHJldHVybiB7cHJvcGVydHksIHN0YXJ0LCBlbmR9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX3BvaW50c0Zyb21TZWdtZW50cyhib3VuZGFyeSwgbGluZSkge1xuICBjb25zdCB7eCA9IG51bGwsIHkgPSBudWxsfSA9IGJvdW5kYXJ5IHx8IHt9O1xuICBjb25zdCBsaW5lUG9pbnRzID0gbGluZS5wb2ludHM7XG4gIGNvbnN0IHBvaW50cyA9IFtdO1xuICBsaW5lLnNlZ21lbnRzLmZvckVhY2goKHtzdGFydCwgZW5kfSkgPT4ge1xuICAgIGVuZCA9IF9maW5kU2VnbWVudEVuZChzdGFydCwgZW5kLCBsaW5lUG9pbnRzKTtcbiAgICBjb25zdCBmaXJzdCA9IGxpbmVQb2ludHNbc3RhcnRdO1xuICAgIGNvbnN0IGxhc3QgPSBsaW5lUG9pbnRzW2VuZF07XG4gICAgaWYgKHkgIT09IG51bGwpIHtcbiAgICAgIHBvaW50cy5wdXNoKHt4OiBmaXJzdC54LCB5fSk7XG4gICAgICBwb2ludHMucHVzaCh7eDogbGFzdC54LCB5fSk7XG4gICAgfSBlbHNlIGlmICh4ICE9PSBudWxsKSB7XG4gICAgICBwb2ludHMucHVzaCh7eCwgeTogZmlyc3QueX0pO1xuICAgICAgcG9pbnRzLnB1c2goe3gsIHk6IGxhc3QueX0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwb2ludHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfZmluZFNlZ21lbnRFbmQoc3RhcnQsIGVuZCwgcG9pbnRzKSB7XG4gIGZvciAoO2VuZCA+IHN0YXJ0OyBlbmQtLSkge1xuICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzW2VuZF07XG4gICAgaWYgKCFpc05hTihwb2ludC54KSAmJiAhaXNOYU4ocG9pbnQueSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZW5kO1xufVxuXG5mdW5jdGlvbiBfZ2V0RWRnZShhLCBiLCBwcm9wLCBmbikge1xuICBpZiAoYSAmJiBiKSB7XG4gICAgcmV0dXJuIGZuKGFbcHJvcF0sIGJbcHJvcF0pO1xuICB9XG4gIHJldHVybiBhID8gYVtwcm9wXSA6IGIgPyBiW3Byb3BdIDogMDtcbn1cbiIsICIvKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi8uLi9jb3JlL2NvcmUuY29udHJvbGxlci5qcycpLmRlZmF1bHQgfSBDaGFydFxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uLy4uL2NvcmUvY29yZS5zY2FsZS5qcycpLmRlZmF1bHQgfSBTY2FsZVxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uLy4uL2VsZW1lbnRzL2VsZW1lbnQucG9pbnQuanMnKS5kZWZhdWx0IH0gUG9pbnRFbGVtZW50XG4gKi9cblxuaW1wb3J0IHtMaW5lRWxlbWVudH0gZnJvbSAnLi4vLi4vZWxlbWVudHMvaW5kZXguanMnO1xuaW1wb3J0IHtpc0FycmF5fSBmcm9tICcuLi8uLi9oZWxwZXJzL2luZGV4LmpzJztcbmltcG9ydCB7X3BvaW50c0Zyb21TZWdtZW50c30gZnJvbSAnLi9maWxsZXIuc2VnbWVudC5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHtQb2ludEVsZW1lbnRbXSB8IHsgeDogbnVtYmVyOyB5OiBudW1iZXI7IH19IGJvdW5kYXJ5XG4gKiBAcGFyYW0ge0xpbmVFbGVtZW50fSBsaW5lXG4gKiBAcmV0dXJuIHtMaW5lRWxlbWVudD99XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfY3JlYXRlQm91bmRhcnlMaW5lKGJvdW5kYXJ5LCBsaW5lKSB7XG4gIGxldCBwb2ludHMgPSBbXTtcbiAgbGV0IF9sb29wID0gZmFsc2U7XG5cbiAgaWYgKGlzQXJyYXkoYm91bmRhcnkpKSB7XG4gICAgX2xvb3AgPSB0cnVlO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBwb2ludHMgPSBib3VuZGFyeTtcbiAgfSBlbHNlIHtcbiAgICBwb2ludHMgPSBfcG9pbnRzRnJvbVNlZ21lbnRzKGJvdW5kYXJ5LCBsaW5lKTtcbiAgfVxuXG4gIHJldHVybiBwb2ludHMubGVuZ3RoID8gbmV3IExpbmVFbGVtZW50KHtcbiAgICBwb2ludHMsXG4gICAgb3B0aW9uczoge3RlbnNpb246IDB9LFxuICAgIF9sb29wLFxuICAgIF9mdWxsTG9vcDogX2xvb3BcbiAgfSkgOiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX3Nob3VsZEFwcGx5RmlsbChzb3VyY2UpIHtcbiAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2UuZmlsbCAhPT0gZmFsc2U7XG59XG4iLCAiaW1wb3J0IHtpc09iamVjdCwgaXNGaW5pdGUsIHZhbHVlT3JEZWZhdWx0fSBmcm9tICcuLi8uLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uLy4uL2NvcmUvY29yZS5zY2FsZS5qcycpLmRlZmF1bHQgfSBTY2FsZVxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uLy4uL2VsZW1lbnRzL2VsZW1lbnQubGluZS5qcycpLmRlZmF1bHQgfSBMaW5lRWxlbWVudFxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uLy4uL3R5cGVzL2luZGV4LmpzJykuRmlsbFRhcmdldCB9IEZpbGxUYXJnZXRcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi8uLi90eXBlcy9pbmRleC5qcycpLkNvbXBsZXhGaWxsVGFyZ2V0IH0gQ29tcGxleEZpbGxUYXJnZXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gX3Jlc29sdmVUYXJnZXQoc291cmNlcywgaW5kZXgsIHByb3BhZ2F0ZSkge1xuICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgbGV0IGZpbGwgPSBzb3VyY2UuZmlsbDtcbiAgY29uc3QgdmlzaXRlZCA9IFtpbmRleF07XG4gIGxldCB0YXJnZXQ7XG5cbiAgaWYgKCFwcm9wYWdhdGUpIHtcbiAgICByZXR1cm4gZmlsbDtcbiAgfVxuXG4gIHdoaWxlIChmaWxsICE9PSBmYWxzZSAmJiB2aXNpdGVkLmluZGV4T2YoZmlsbCkgPT09IC0xKSB7XG4gICAgaWYgKCFpc0Zpbml0ZShmaWxsKSkge1xuICAgICAgcmV0dXJuIGZpbGw7XG4gICAgfVxuXG4gICAgdGFyZ2V0ID0gc291cmNlc1tmaWxsXTtcbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0YXJnZXQudmlzaWJsZSkge1xuICAgICAgcmV0dXJuIGZpbGw7XG4gICAgfVxuXG4gICAgdmlzaXRlZC5wdXNoKGZpbGwpO1xuICAgIGZpbGwgPSB0YXJnZXQuZmlsbDtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0xpbmVFbGVtZW50fSBsaW5lXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudFxuICovXG5leHBvcnQgZnVuY3Rpb24gX2RlY29kZUZpbGwobGluZSwgaW5kZXgsIGNvdW50KSB7XG4gIC8qKiBAdHlwZSB7c3RyaW5nIHwge3ZhbHVlOiBudW1iZXJ9fSAqL1xuICBjb25zdCBmaWxsID0gcGFyc2VGaWxsT3B0aW9uKGxpbmUpO1xuXG4gIGlmIChpc09iamVjdChmaWxsKSkge1xuICAgIHJldHVybiBpc05hTihmaWxsLnZhbHVlKSA/IGZhbHNlIDogZmlsbDtcbiAgfVxuXG4gIGxldCB0YXJnZXQgPSBwYXJzZUZsb2F0KGZpbGwpO1xuXG4gIGlmIChpc0Zpbml0ZSh0YXJnZXQpICYmIE1hdGguZmxvb3IodGFyZ2V0KSA9PT0gdGFyZ2V0KSB7XG4gICAgcmV0dXJuIGRlY29kZVRhcmdldEluZGV4KGZpbGxbMF0sIGluZGV4LCB0YXJnZXQsIGNvdW50KTtcbiAgfVxuXG4gIHJldHVybiBbJ29yaWdpbicsICdzdGFydCcsICdlbmQnLCAnc3RhY2snLCAnc2hhcGUnXS5pbmRleE9mKGZpbGwpID49IDAgJiYgZmlsbDtcbn1cblxuZnVuY3Rpb24gZGVjb2RlVGFyZ2V0SW5kZXgoZmlyc3RDaCwgaW5kZXgsIHRhcmdldCwgY291bnQpIHtcbiAgaWYgKGZpcnN0Q2ggPT09ICctJyB8fCBmaXJzdENoID09PSAnKycpIHtcbiAgICB0YXJnZXQgPSBpbmRleCArIHRhcmdldDtcbiAgfVxuXG4gIGlmICh0YXJnZXQgPT09IGluZGV4IHx8IHRhcmdldCA8IDAgfHwgdGFyZ2V0ID49IGNvdW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0ZpbGxUYXJnZXQgfCBDb21wbGV4RmlsbFRhcmdldH0gZmlsbFxuICogQHBhcmFtIHtTY2FsZX0gc2NhbGVcbiAqIEByZXR1cm5zIHtudW1iZXIgfCBudWxsfVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2dldFRhcmdldFBpeGVsKGZpbGwsIHNjYWxlKSB7XG4gIGxldCBwaXhlbCA9IG51bGw7XG4gIGlmIChmaWxsID09PSAnc3RhcnQnKSB7XG4gICAgcGl4ZWwgPSBzY2FsZS5ib3R0b207XG4gIH0gZWxzZSBpZiAoZmlsbCA9PT0gJ2VuZCcpIHtcbiAgICBwaXhlbCA9IHNjYWxlLnRvcDtcbiAgfSBlbHNlIGlmIChpc09iamVjdChmaWxsKSkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBwaXhlbCA9IHNjYWxlLmdldFBpeGVsRm9yVmFsdWUoZmlsbC52YWx1ZSk7XG4gIH0gZWxzZSBpZiAoc2NhbGUuZ2V0QmFzZVBpeGVsKSB7XG4gICAgcGl4ZWwgPSBzY2FsZS5nZXRCYXNlUGl4ZWwoKTtcbiAgfVxuICByZXR1cm4gcGl4ZWw7XG59XG5cbi8qKlxuICogQHBhcmFtIHtGaWxsVGFyZ2V0IHwgQ29tcGxleEZpbGxUYXJnZXR9IGZpbGxcbiAqIEBwYXJhbSB7U2NhbGV9IHNjYWxlXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRWYWx1ZVxuICogQHJldHVybnMge251bWJlciB8IHVuZGVmaW5lZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9nZXRUYXJnZXRWYWx1ZShmaWxsLCBzY2FsZSwgc3RhcnRWYWx1ZSkge1xuICBsZXQgdmFsdWU7XG5cbiAgaWYgKGZpbGwgPT09ICdzdGFydCcpIHtcbiAgICB2YWx1ZSA9IHN0YXJ0VmFsdWU7XG4gIH0gZWxzZSBpZiAoZmlsbCA9PT0gJ2VuZCcpIHtcbiAgICB2YWx1ZSA9IHNjYWxlLm9wdGlvbnMucmV2ZXJzZSA/IHNjYWxlLm1pbiA6IHNjYWxlLm1heDtcbiAgfSBlbHNlIGlmIChpc09iamVjdChmaWxsKSkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB2YWx1ZSA9IGZpbGwudmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBzY2FsZS5nZXRCYXNlVmFsdWUoKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtMaW5lRWxlbWVudH0gbGluZVxuICovXG5mdW5jdGlvbiBwYXJzZUZpbGxPcHRpb24obGluZSkge1xuICBjb25zdCBvcHRpb25zID0gbGluZS5vcHRpb25zO1xuICBjb25zdCBmaWxsT3B0aW9uID0gb3B0aW9ucy5maWxsO1xuICBsZXQgZmlsbCA9IHZhbHVlT3JEZWZhdWx0KGZpbGxPcHRpb24gJiYgZmlsbE9wdGlvbi50YXJnZXQsIGZpbGxPcHRpb24pO1xuXG4gIGlmIChmaWxsID09PSB1bmRlZmluZWQpIHtcbiAgICBmaWxsID0gISFvcHRpb25zLmJhY2tncm91bmRDb2xvcjtcbiAgfVxuXG4gIGlmIChmaWxsID09PSBmYWxzZSB8fCBmaWxsID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGZpbGwgPT09IHRydWUpIHtcbiAgICByZXR1cm4gJ29yaWdpbic7XG4gIH1cbiAgcmV0dXJuIGZpbGw7XG59XG4iLCAiLyoqXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vLi4vY29yZS9jb3JlLmNvbnRyb2xsZXIuanMnKS5kZWZhdWx0IH0gQ2hhcnRcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi8uLi9jb3JlL2NvcmUuc2NhbGUuanMnKS5kZWZhdWx0IH0gU2NhbGVcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi8uLi9lbGVtZW50cy9lbGVtZW50LnBvaW50LmpzJykuZGVmYXVsdCB9IFBvaW50RWxlbWVudFxuICovXG5cbmltcG9ydCB7TGluZUVsZW1lbnR9IGZyb20gJy4uLy4uL2VsZW1lbnRzL2luZGV4LmpzJztcbmltcG9ydCB7X2lzQmV0d2Vlbn0gZnJvbSAnLi4vLi4vaGVscGVycy9pbmRleC5qcyc7XG5pbXBvcnQge19jcmVhdGVCb3VuZGFyeUxpbmV9IGZyb20gJy4vZmlsbGVyLmhlbHBlci5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHt7IGNoYXJ0OiBDaGFydDsgc2NhbGU6IFNjYWxlOyBpbmRleDogbnVtYmVyOyBsaW5lOiBMaW5lRWxlbWVudDsgfX0gc291cmNlXG4gKiBAcmV0dXJuIHtMaW5lRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9idWlsZFN0YWNrTGluZShzb3VyY2UpIHtcbiAgY29uc3Qge3NjYWxlLCBpbmRleCwgbGluZX0gPSBzb3VyY2U7XG4gIGNvbnN0IHBvaW50cyA9IFtdO1xuICBjb25zdCBzZWdtZW50cyA9IGxpbmUuc2VnbWVudHM7XG4gIGNvbnN0IHNvdXJjZVBvaW50cyA9IGxpbmUucG9pbnRzO1xuICBjb25zdCBsaW5lc0JlbG93ID0gZ2V0TGluZXNCZWxvdyhzY2FsZSwgaW5kZXgpO1xuICBsaW5lc0JlbG93LnB1c2goX2NyZWF0ZUJvdW5kYXJ5TGluZSh7eDogbnVsbCwgeTogc2NhbGUuYm90dG9tfSwgbGluZSkpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbaV07XG4gICAgZm9yIChsZXQgaiA9IHNlZ21lbnQuc3RhcnQ7IGogPD0gc2VnbWVudC5lbmQ7IGorKykge1xuICAgICAgYWRkUG9pbnRzQmVsb3cocG9pbnRzLCBzb3VyY2VQb2ludHNbal0sIGxpbmVzQmVsb3cpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3IExpbmVFbGVtZW50KHtwb2ludHMsIG9wdGlvbnM6IHt9fSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtTY2FsZX0gc2NhbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICogQHJldHVybiB7TGluZUVsZW1lbnRbXX1cbiAqL1xuZnVuY3Rpb24gZ2V0TGluZXNCZWxvdyhzY2FsZSwgaW5kZXgpIHtcbiAgY29uc3QgYmVsb3cgPSBbXTtcbiAgY29uc3QgbWV0YXMgPSBzY2FsZS5nZXRNYXRjaGluZ1Zpc2libGVNZXRhcygnbGluZScpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBtZXRhID0gbWV0YXNbaV07XG4gICAgaWYgKG1ldGEuaW5kZXggPT09IGluZGV4KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKCFtZXRhLmhpZGRlbikge1xuICAgICAgYmVsb3cudW5zaGlmdChtZXRhLmRhdGFzZXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYmVsb3c7XG59XG5cbi8qKlxuICogQHBhcmFtIHtQb2ludEVsZW1lbnRbXX0gcG9pbnRzXG4gKiBAcGFyYW0ge1BvaW50RWxlbWVudH0gc291cmNlUG9pbnRcbiAqIEBwYXJhbSB7TGluZUVsZW1lbnRbXX0gbGluZXNCZWxvd1xuICovXG5mdW5jdGlvbiBhZGRQb2ludHNCZWxvdyhwb2ludHMsIHNvdXJjZVBvaW50LCBsaW5lc0JlbG93KSB7XG4gIGNvbnN0IHBvc3Rwb25lZCA9IFtdO1xuICBmb3IgKGxldCBqID0gMDsgaiA8IGxpbmVzQmVsb3cubGVuZ3RoOyBqKyspIHtcbiAgICBjb25zdCBsaW5lID0gbGluZXNCZWxvd1tqXTtcbiAgICBjb25zdCB7Zmlyc3QsIGxhc3QsIHBvaW50fSA9IGZpbmRQb2ludChsaW5lLCBzb3VyY2VQb2ludCwgJ3gnKTtcblxuICAgIGlmICghcG9pbnQgfHwgKGZpcnN0ICYmIGxhc3QpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICAvLyBGaXJzdCBwb2ludCBvZiBhbiBzZWdtZW50IC0+IG5lZWQgdG8gYWRkIGFub3RoZXIgcG9pbnQgYmVmb3JlIHRoaXMsXG4gICAgICAvLyBmcm9tIG5leHQgbGluZSBiZWxvdy5cbiAgICAgIHBvc3Rwb25lZC51bnNoaWZ0KHBvaW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9pbnRzLnB1c2gocG9pbnQpO1xuICAgICAgaWYgKCFsYXN0KSB7XG4gICAgICAgIC8vIEluIHRoZSBtaWRkbGUgb2YgYW4gc2VnbWVudCwgbm8gbmVlZCB0byBhZGQgbW9yZSBwb2ludHMuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwb2ludHMucHVzaCguLi5wb3N0cG9uZWQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TGluZUVsZW1lbnR9IGxpbmVcbiAqIEBwYXJhbSB7UG9pbnRFbGVtZW50fSBzb3VyY2VQb2ludFxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gKiBAcmV0dXJucyB7e3BvaW50PzogUG9pbnRFbGVtZW50LCBmaXJzdD86IGJvb2xlYW4sIGxhc3Q/OiBib29sZWFufX1cbiAqL1xuZnVuY3Rpb24gZmluZFBvaW50KGxpbmUsIHNvdXJjZVBvaW50LCBwcm9wZXJ0eSkge1xuICBjb25zdCBwb2ludCA9IGxpbmUuaW50ZXJwb2xhdGUoc291cmNlUG9pbnQsIHByb3BlcnR5KTtcbiAgaWYgKCFwb2ludCkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIGNvbnN0IHBvaW50VmFsdWUgPSBwb2ludFtwcm9wZXJ0eV07XG4gIGNvbnN0IHNlZ21lbnRzID0gbGluZS5zZWdtZW50cztcbiAgY29uc3QgbGluZVBvaW50cyA9IGxpbmUucG9pbnRzO1xuICBsZXQgZmlyc3QgPSBmYWxzZTtcbiAgbGV0IGxhc3QgPSBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcbiAgICBjb25zdCBmaXJzdFZhbHVlID0gbGluZVBvaW50c1tzZWdtZW50LnN0YXJ0XVtwcm9wZXJ0eV07XG4gICAgY29uc3QgbGFzdFZhbHVlID0gbGluZVBvaW50c1tzZWdtZW50LmVuZF1bcHJvcGVydHldO1xuICAgIGlmIChfaXNCZXR3ZWVuKHBvaW50VmFsdWUsIGZpcnN0VmFsdWUsIGxhc3RWYWx1ZSkpIHtcbiAgICAgIGZpcnN0ID0gcG9pbnRWYWx1ZSA9PT0gZmlyc3RWYWx1ZTtcbiAgICAgIGxhc3QgPSBwb2ludFZhbHVlID09PSBsYXN0VmFsdWU7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtmaXJzdCwgbGFzdCwgcG9pbnR9O1xufVxuIiwgImltcG9ydCB7VEFVfSBmcm9tICcuLi8uLi9oZWxwZXJzL2luZGV4LmpzJztcblxuLy8gVE9ETzogdXNlIGVsZW1lbnRzLkFyY0VsZW1lbnQgaW5zdGVhZFxuZXhwb3J0IGNsYXNzIHNpbXBsZUFyYyB7XG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICB0aGlzLnggPSBvcHRzLng7XG4gICAgdGhpcy55ID0gb3B0cy55O1xuICAgIHRoaXMucmFkaXVzID0gb3B0cy5yYWRpdXM7XG4gIH1cblxuICBwYXRoU2VnbWVudChjdHgsIGJvdW5kcywgb3B0cykge1xuICAgIGNvbnN0IHt4LCB5LCByYWRpdXN9ID0gdGhpcztcbiAgICBib3VuZHMgPSBib3VuZHMgfHwge3N0YXJ0OiAwLCBlbmQ6IFRBVX07XG4gICAgY3R4LmFyYyh4LCB5LCByYWRpdXMsIGJvdW5kcy5lbmQsIGJvdW5kcy5zdGFydCwgdHJ1ZSk7XG4gICAgcmV0dXJuICFvcHRzLmJvdW5kcztcbiAgfVxuXG4gIGludGVycG9sYXRlKHBvaW50KSB7XG4gICAgY29uc3Qge3gsIHksIHJhZGl1c30gPSB0aGlzO1xuICAgIGNvbnN0IGFuZ2xlID0gcG9pbnQuYW5nbGU7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHggKyBNYXRoLmNvcyhhbmdsZSkgKiByYWRpdXMsXG4gICAgICB5OiB5ICsgTWF0aC5zaW4oYW5nbGUpICogcmFkaXVzLFxuICAgICAgYW5nbGVcbiAgICB9O1xuICB9XG59XG4iLCAiaW1wb3J0IHtpc0Zpbml0ZX0gZnJvbSAnLi4vLi4vaGVscGVycy9pbmRleC5qcyc7XG5pbXBvcnQge19jcmVhdGVCb3VuZGFyeUxpbmV9IGZyb20gJy4vZmlsbGVyLmhlbHBlci5qcyc7XG5pbXBvcnQge19nZXRUYXJnZXRQaXhlbCwgX2dldFRhcmdldFZhbHVlfSBmcm9tICcuL2ZpbGxlci5vcHRpb25zLmpzJztcbmltcG9ydCB7X2J1aWxkU3RhY2tMaW5lfSBmcm9tICcuL2ZpbGxlci50YXJnZXQuc3RhY2suanMnO1xuaW1wb3J0IHtzaW1wbGVBcmN9IGZyb20gJy4vc2ltcGxlQXJjLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vLi4vY29yZS9jb3JlLmNvbnRyb2xsZXIuanMnKS5kZWZhdWx0IH0gQ2hhcnRcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi8uLi9jb3JlL2NvcmUuc2NhbGUuanMnKS5kZWZhdWx0IH0gU2NhbGVcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi8uLi9lbGVtZW50cy9lbGVtZW50LnBvaW50LmpzJykuZGVmYXVsdCB9IFBvaW50RWxlbWVudFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBfZ2V0VGFyZ2V0KHNvdXJjZSkge1xuICBjb25zdCB7Y2hhcnQsIGZpbGwsIGxpbmV9ID0gc291cmNlO1xuXG4gIGlmIChpc0Zpbml0ZShmaWxsKSkge1xuICAgIHJldHVybiBnZXRMaW5lQnlJbmRleChjaGFydCwgZmlsbCk7XG4gIH1cblxuICBpZiAoZmlsbCA9PT0gJ3N0YWNrJykge1xuICAgIHJldHVybiBfYnVpbGRTdGFja0xpbmUoc291cmNlKTtcbiAgfVxuXG4gIGlmIChmaWxsID09PSAnc2hhcGUnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBib3VuZGFyeSA9IGNvbXB1dGVCb3VuZGFyeShzb3VyY2UpO1xuXG4gIGlmIChib3VuZGFyeSBpbnN0YW5jZW9mIHNpbXBsZUFyYykge1xuICAgIHJldHVybiBib3VuZGFyeTtcbiAgfVxuXG4gIHJldHVybiBfY3JlYXRlQm91bmRhcnlMaW5lKGJvdW5kYXJ5LCBsaW5lKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0NoYXJ0fSBjaGFydFxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gKi9cbmZ1bmN0aW9uIGdldExpbmVCeUluZGV4KGNoYXJ0LCBpbmRleCkge1xuICBjb25zdCBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoaW5kZXgpO1xuICBjb25zdCB2aXNpYmxlID0gbWV0YSAmJiBjaGFydC5pc0RhdGFzZXRWaXNpYmxlKGluZGV4KTtcbiAgcmV0dXJuIHZpc2libGUgPyBtZXRhLmRhdGFzZXQgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlQm91bmRhcnkoc291cmNlKSB7XG4gIGNvbnN0IHNjYWxlID0gc291cmNlLnNjYWxlIHx8IHt9O1xuXG4gIGlmIChzY2FsZS5nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUpIHtcbiAgICByZXR1cm4gY29tcHV0ZUNpcmN1bGFyQm91bmRhcnkoc291cmNlKTtcbiAgfVxuICByZXR1cm4gY29tcHV0ZUxpbmVhckJvdW5kYXJ5KHNvdXJjZSk7XG59XG5cblxuZnVuY3Rpb24gY29tcHV0ZUxpbmVhckJvdW5kYXJ5KHNvdXJjZSkge1xuICBjb25zdCB7c2NhbGUgPSB7fSwgZmlsbH0gPSBzb3VyY2U7XG4gIGNvbnN0IHBpeGVsID0gX2dldFRhcmdldFBpeGVsKGZpbGwsIHNjYWxlKTtcblxuICBpZiAoaXNGaW5pdGUocGl4ZWwpKSB7XG4gICAgY29uc3QgaG9yaXpvbnRhbCA9IHNjYWxlLmlzSG9yaXpvbnRhbCgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGhvcml6b250YWwgPyBwaXhlbCA6IG51bGwsXG4gICAgICB5OiBob3Jpem9udGFsID8gbnVsbCA6IHBpeGVsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlQ2lyY3VsYXJCb3VuZGFyeShzb3VyY2UpIHtcbiAgY29uc3Qge3NjYWxlLCBmaWxsfSA9IHNvdXJjZTtcbiAgY29uc3Qgb3B0aW9ucyA9IHNjYWxlLm9wdGlvbnM7XG4gIGNvbnN0IGxlbmd0aCA9IHNjYWxlLmdldExhYmVscygpLmxlbmd0aDtcbiAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLnJldmVyc2UgPyBzY2FsZS5tYXggOiBzY2FsZS5taW47XG4gIGNvbnN0IHZhbHVlID0gX2dldFRhcmdldFZhbHVlKGZpbGwsIHNjYWxlLCBzdGFydCk7XG4gIGNvbnN0IHRhcmdldCA9IFtdO1xuXG4gIGlmIChvcHRpb25zLmdyaWQuY2lyY3VsYXIpIHtcbiAgICBjb25zdCBjZW50ZXIgPSBzY2FsZS5nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUoMCwgc3RhcnQpO1xuICAgIHJldHVybiBuZXcgc2ltcGxlQXJjKHtcbiAgICAgIHg6IGNlbnRlci54LFxuICAgICAgeTogY2VudGVyLnksXG4gICAgICByYWRpdXM6IHNjYWxlLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHZhbHVlKVxuICAgIH0pO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHRhcmdldC5wdXNoKHNjYWxlLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZShpLCB2YWx1ZSkpO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbiIsICJpbXBvcnQge2NsaXBBcmVhLCB1bmNsaXBBcmVhfSBmcm9tICcuLi8uLi9oZWxwZXJzL2luZGV4LmpzJztcbmltcG9ydCB7X2ZpbmRTZWdtZW50RW5kLCBfZ2V0Qm91bmRzLCBfc2VnbWVudHN9IGZyb20gJy4vZmlsbGVyLnNlZ21lbnQuanMnO1xuaW1wb3J0IHtfZ2V0VGFyZ2V0fSBmcm9tICcuL2ZpbGxlci50YXJnZXQuanMnO1xuXG5leHBvcnQgZnVuY3Rpb24gX2RyYXdmaWxsKGN0eCwgc291cmNlLCBhcmVhKSB7XG4gIGNvbnN0IHRhcmdldCA9IF9nZXRUYXJnZXQoc291cmNlKTtcbiAgY29uc3Qge2xpbmUsIHNjYWxlLCBheGlzfSA9IHNvdXJjZTtcbiAgY29uc3QgbGluZU9wdHMgPSBsaW5lLm9wdGlvbnM7XG4gIGNvbnN0IGZpbGxPcHRpb24gPSBsaW5lT3B0cy5maWxsO1xuICBjb25zdCBjb2xvciA9IGxpbmVPcHRzLmJhY2tncm91bmRDb2xvcjtcbiAgY29uc3Qge2Fib3ZlID0gY29sb3IsIGJlbG93ID0gY29sb3J9ID0gZmlsbE9wdGlvbiB8fCB7fTtcbiAgaWYgKHRhcmdldCAmJiBsaW5lLnBvaW50cy5sZW5ndGgpIHtcbiAgICBjbGlwQXJlYShjdHgsIGFyZWEpO1xuICAgIGRvRmlsbChjdHgsIHtsaW5lLCB0YXJnZXQsIGFib3ZlLCBiZWxvdywgYXJlYSwgc2NhbGUsIGF4aXN9KTtcbiAgICB1bmNsaXBBcmVhKGN0eCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZG9GaWxsKGN0eCwgY2ZnKSB7XG4gIGNvbnN0IHtsaW5lLCB0YXJnZXQsIGFib3ZlLCBiZWxvdywgYXJlYSwgc2NhbGV9ID0gY2ZnO1xuICBjb25zdCBwcm9wZXJ0eSA9IGxpbmUuX2xvb3AgPyAnYW5nbGUnIDogY2ZnLmF4aXM7XG5cbiAgY3R4LnNhdmUoKTtcblxuICBpZiAocHJvcGVydHkgPT09ICd4JyAmJiBiZWxvdyAhPT0gYWJvdmUpIHtcbiAgICBjbGlwVmVydGljYWwoY3R4LCB0YXJnZXQsIGFyZWEudG9wKTtcbiAgICBmaWxsKGN0eCwge2xpbmUsIHRhcmdldCwgY29sb3I6IGFib3ZlLCBzY2FsZSwgcHJvcGVydHl9KTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY2xpcFZlcnRpY2FsKGN0eCwgdGFyZ2V0LCBhcmVhLmJvdHRvbSk7XG4gIH1cbiAgZmlsbChjdHgsIHtsaW5lLCB0YXJnZXQsIGNvbG9yOiBiZWxvdywgc2NhbGUsIHByb3BlcnR5fSk7XG5cbiAgY3R4LnJlc3RvcmUoKTtcbn1cblxuZnVuY3Rpb24gY2xpcFZlcnRpY2FsKGN0eCwgdGFyZ2V0LCBjbGlwWSkge1xuICBjb25zdCB7c2VnbWVudHMsIHBvaW50c30gPSB0YXJnZXQ7XG4gIGxldCBmaXJzdCA9IHRydWU7XG4gIGxldCBsaW5lTG9vcCA9IGZhbHNlO1xuXG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG4gICAgY29uc3Qge3N0YXJ0LCBlbmR9ID0gc2VnbWVudDtcbiAgICBjb25zdCBmaXJzdFBvaW50ID0gcG9pbnRzW3N0YXJ0XTtcbiAgICBjb25zdCBsYXN0UG9pbnQgPSBwb2ludHNbX2ZpbmRTZWdtZW50RW5kKHN0YXJ0LCBlbmQsIHBvaW50cyldO1xuICAgIGlmIChmaXJzdCkge1xuICAgICAgY3R4Lm1vdmVUbyhmaXJzdFBvaW50LngsIGZpcnN0UG9pbnQueSk7XG4gICAgICBmaXJzdCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHgubGluZVRvKGZpcnN0UG9pbnQueCwgY2xpcFkpO1xuICAgICAgY3R4LmxpbmVUbyhmaXJzdFBvaW50LngsIGZpcnN0UG9pbnQueSk7XG4gICAgfVxuICAgIGxpbmVMb29wID0gISF0YXJnZXQucGF0aFNlZ21lbnQoY3R4LCBzZWdtZW50LCB7bW92ZTogbGluZUxvb3B9KTtcbiAgICBpZiAobGluZUxvb3ApIHtcbiAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmxpbmVUbyhsYXN0UG9pbnQueCwgY2xpcFkpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5saW5lVG8odGFyZ2V0LmZpcnN0KCkueCwgY2xpcFkpO1xuICBjdHguY2xvc2VQYXRoKCk7XG4gIGN0eC5jbGlwKCk7XG59XG5cbmZ1bmN0aW9uIGZpbGwoY3R4LCBjZmcpIHtcbiAgY29uc3Qge2xpbmUsIHRhcmdldCwgcHJvcGVydHksIGNvbG9yLCBzY2FsZX0gPSBjZmc7XG4gIGNvbnN0IHNlZ21lbnRzID0gX3NlZ21lbnRzKGxpbmUsIHRhcmdldCwgcHJvcGVydHkpO1xuXG4gIGZvciAoY29uc3Qge3NvdXJjZTogc3JjLCB0YXJnZXQ6IHRndCwgc3RhcnQsIGVuZH0gb2Ygc2VnbWVudHMpIHtcbiAgICBjb25zdCB7c3R5bGU6IHtiYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcn0gPSB7fX0gPSBzcmM7XG4gICAgY29uc3Qgbm90U2hhcGUgPSB0YXJnZXQgIT09IHRydWU7XG5cbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICBjbGlwQm91bmRzKGN0eCwgc2NhbGUsIG5vdFNoYXBlICYmIF9nZXRCb3VuZHMocHJvcGVydHksIHN0YXJ0LCBlbmQpKTtcblxuICAgIGN0eC5iZWdpblBhdGgoKTtcblxuICAgIGNvbnN0IGxpbmVMb29wID0gISFsaW5lLnBhdGhTZWdtZW50KGN0eCwgc3JjKTtcblxuICAgIGxldCBsb29wO1xuICAgIGlmIChub3RTaGFwZSkge1xuICAgICAgaWYgKGxpbmVMb29wKSB7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludGVycG9sYXRlZExpbmVUbyhjdHgsIHRhcmdldCwgZW5kLCBwcm9wZXJ0eSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldExvb3AgPSAhIXRhcmdldC5wYXRoU2VnbWVudChjdHgsIHRndCwge21vdmU6IGxpbmVMb29wLCByZXZlcnNlOiB0cnVlfSk7XG4gICAgICBsb29wID0gbGluZUxvb3AgJiYgdGFyZ2V0TG9vcDtcbiAgICAgIGlmICghbG9vcCkge1xuICAgICAgICBpbnRlcnBvbGF0ZWRMaW5lVG8oY3R4LCB0YXJnZXQsIHN0YXJ0LCBwcm9wZXJ0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKGxvb3AgPyAnZXZlbm9kZCcgOiAnbm9uemVybycpO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGlwQm91bmRzKGN0eCwgc2NhbGUsIGJvdW5kcykge1xuICBjb25zdCB7dG9wLCBib3R0b219ID0gc2NhbGUuY2hhcnQuY2hhcnRBcmVhO1xuICBjb25zdCB7cHJvcGVydHksIHN0YXJ0LCBlbmR9ID0gYm91bmRzIHx8IHt9O1xuICBpZiAocHJvcGVydHkgPT09ICd4Jykge1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgucmVjdChzdGFydCwgdG9wLCBlbmQgLSBzdGFydCwgYm90dG9tIC0gdG9wKTtcbiAgICBjdHguY2xpcCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlZExpbmVUbyhjdHgsIHRhcmdldCwgcG9pbnQsIHByb3BlcnR5KSB7XG4gIGNvbnN0IGludGVycG9sYXRlZFBvaW50ID0gdGFyZ2V0LmludGVycG9sYXRlKHBvaW50LCBwcm9wZXJ0eSk7XG4gIGlmIChpbnRlcnBvbGF0ZWRQb2ludCkge1xuICAgIGN0eC5saW5lVG8oaW50ZXJwb2xhdGVkUG9pbnQueCwgaW50ZXJwb2xhdGVkUG9pbnQueSk7XG4gIH1cbn1cblxuIiwgIi8qKlxuICogUGx1Z2luIGJhc2VkIG9uIGRpc2N1c3Npb24gZnJvbSB0aGUgZm9sbG93aW5nIENoYXJ0LmpzIGlzc3VlczpcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvaXNzdWVzLzIzODAjaXNzdWVjb21tZW50LTI3OTk2MTU2OVxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvMjQ0MCNpc3N1ZWNvbW1lbnQtMjU2NDYxODk3XG4gKi9cblxuaW1wb3J0IExpbmVFbGVtZW50IGZyb20gJy4uLy4uL2VsZW1lbnRzL2VsZW1lbnQubGluZS5qcyc7XG5pbXBvcnQge19kcmF3ZmlsbH0gZnJvbSAnLi9maWxsZXIuZHJhd2luZy5qcyc7XG5pbXBvcnQge19zaG91bGRBcHBseUZpbGx9IGZyb20gJy4vZmlsbGVyLmhlbHBlci5qcyc7XG5pbXBvcnQge19kZWNvZGVGaWxsLCBfcmVzb2x2ZVRhcmdldH0gZnJvbSAnLi9maWxsZXIub3B0aW9ucy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaWQ6ICdmaWxsZXInLFxuXG4gIGFmdGVyRGF0YXNldHNVcGRhdGUoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgY291bnQgPSAoY2hhcnQuZGF0YS5kYXRhc2V0cyB8fCBbXSkubGVuZ3RoO1xuICAgIGNvbnN0IHNvdXJjZXMgPSBbXTtcbiAgICBsZXQgbWV0YSwgaSwgbGluZSwgc291cmNlO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgIG1ldGEgPSBjaGFydC5nZXREYXRhc2V0TWV0YShpKTtcbiAgICAgIGxpbmUgPSBtZXRhLmRhdGFzZXQ7XG4gICAgICBzb3VyY2UgPSBudWxsO1xuXG4gICAgICBpZiAobGluZSAmJiBsaW5lLm9wdGlvbnMgJiYgbGluZSBpbnN0YW5jZW9mIExpbmVFbGVtZW50KSB7XG4gICAgICAgIHNvdXJjZSA9IHtcbiAgICAgICAgICB2aXNpYmxlOiBjaGFydC5pc0RhdGFzZXRWaXNpYmxlKGkpLFxuICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgIGZpbGw6IF9kZWNvZGVGaWxsKGxpbmUsIGksIGNvdW50KSxcbiAgICAgICAgICBjaGFydCxcbiAgICAgICAgICBheGlzOiBtZXRhLmNvbnRyb2xsZXIub3B0aW9ucy5pbmRleEF4aXMsXG4gICAgICAgICAgc2NhbGU6IG1ldGEudlNjYWxlLFxuICAgICAgICAgIGxpbmUsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG1ldGEuJGZpbGxlciA9IHNvdXJjZTtcbiAgICAgIHNvdXJjZXMucHVzaChzb3VyY2UpO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICBzb3VyY2UgPSBzb3VyY2VzW2ldO1xuICAgICAgaWYgKCFzb3VyY2UgfHwgc291cmNlLmZpbGwgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBzb3VyY2UuZmlsbCA9IF9yZXNvbHZlVGFyZ2V0KHNvdXJjZXMsIGksIG9wdGlvbnMucHJvcGFnYXRlKTtcbiAgICB9XG4gIH0sXG5cbiAgYmVmb3JlRHJhdyhjaGFydCwgX2FyZ3MsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBkcmF3ID0gb3B0aW9ucy5kcmF3VGltZSA9PT0gJ2JlZm9yZURyYXcnO1xuICAgIGNvbnN0IG1ldGFzZXRzID0gY2hhcnQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpO1xuICAgIGNvbnN0IGFyZWEgPSBjaGFydC5jaGFydEFyZWE7XG4gICAgZm9yIChsZXQgaSA9IG1ldGFzZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBjb25zdCBzb3VyY2UgPSBtZXRhc2V0c1tpXS4kZmlsbGVyO1xuICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHNvdXJjZS5saW5lLnVwZGF0ZUNvbnRyb2xQb2ludHMoYXJlYSwgc291cmNlLmF4aXMpO1xuICAgICAgaWYgKGRyYXcgJiYgc291cmNlLmZpbGwpIHtcbiAgICAgICAgX2RyYXdmaWxsKGNoYXJ0LmN0eCwgc291cmNlLCBhcmVhKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYmVmb3JlRGF0YXNldHNEcmF3KGNoYXJ0LCBfYXJncywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmRyYXdUaW1lICE9PSAnYmVmb3JlRGF0YXNldHNEcmF3Jykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFzZXRzID0gY2hhcnQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpO1xuICAgIGZvciAobGV0IGkgPSBtZXRhc2V0cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgY29uc3Qgc291cmNlID0gbWV0YXNldHNbaV0uJGZpbGxlcjtcblxuICAgICAgaWYgKF9zaG91bGRBcHBseUZpbGwoc291cmNlKSkge1xuICAgICAgICBfZHJhd2ZpbGwoY2hhcnQuY3R4LCBzb3VyY2UsIGNoYXJ0LmNoYXJ0QXJlYSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGJlZm9yZURhdGFzZXREcmF3KGNoYXJ0LCBhcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc291cmNlID0gYXJncy5tZXRhLiRmaWxsZXI7XG5cbiAgICBpZiAoIV9zaG91bGRBcHBseUZpbGwoc291cmNlKSB8fCBvcHRpb25zLmRyYXdUaW1lICE9PSAnYmVmb3JlRGF0YXNldERyYXcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgX2RyYXdmaWxsKGNoYXJ0LmN0eCwgc291cmNlLCBjaGFydC5jaGFydEFyZWEpO1xuICB9LFxuXG4gIGRlZmF1bHRzOiB7XG4gICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgIGRyYXdUaW1lOiAnYmVmb3JlRGF0YXNldERyYXcnXG4gIH1cbn07XG4iLCAiaW1wb3J0IGRlZmF1bHRzIGZyb20gJy4uL2NvcmUvY29yZS5kZWZhdWx0cy5qcyc7XG5pbXBvcnQgRWxlbWVudCBmcm9tICcuLi9jb3JlL2NvcmUuZWxlbWVudC5qcyc7XG5pbXBvcnQgbGF5b3V0cyBmcm9tICcuLi9jb3JlL2NvcmUubGF5b3V0cy5qcyc7XG5pbXBvcnQge2FkZFJvdW5kZWRSZWN0UGF0aCwgZHJhd1BvaW50TGVnZW5kLCByZW5kZXJUZXh0fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY2FudmFzLmpzJztcbmltcG9ydCB7XG4gIF9pc0JldHdlZW4sXG4gIGNhbGxiYWNrIGFzIGNhbGwsXG4gIGNsaXBBcmVhLFxuICBnZXRSdGxBZGFwdGVyLFxuICBvdmVycmlkZVRleHREaXJlY3Rpb24sXG4gIHJlc3RvcmVUZXh0RGlyZWN0aW9uLFxuICB0b0ZvbnQsXG4gIHRvUGFkZGluZyxcbiAgdW5jbGlwQXJlYSxcbiAgdmFsdWVPckRlZmF1bHQsXG59IGZyb20gJy4uL2hlbHBlcnMvaW5kZXguanMnO1xuaW1wb3J0IHtfYWxpZ25TdGFydEVuZCwgX3RleHRYLCBfdG9MZWZ0UmlnaHRDZW50ZXJ9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5leHRyYXMuanMnO1xuaW1wb3J0IHt0b1RSQkxDb3JuZXJzfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMub3B0aW9ucy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uL3R5cGVzL2luZGV4LmpzJykuQ2hhcnRFdmVudCB9IENoYXJ0RXZlbnRcbiAqL1xuXG5jb25zdCBnZXRCb3hTaXplID0gKGxhYmVsT3B0cywgZm9udFNpemUpID0+IHtcbiAgbGV0IHtib3hIZWlnaHQgPSBmb250U2l6ZSwgYm94V2lkdGggPSBmb250U2l6ZX0gPSBsYWJlbE9wdHM7XG5cbiAgaWYgKGxhYmVsT3B0cy51c2VQb2ludFN0eWxlKSB7XG4gICAgYm94SGVpZ2h0ID0gTWF0aC5taW4oYm94SGVpZ2h0LCBmb250U2l6ZSk7XG4gICAgYm94V2lkdGggPSBsYWJlbE9wdHMucG9pbnRTdHlsZVdpZHRoIHx8IE1hdGgubWluKGJveFdpZHRoLCBmb250U2l6ZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGJveFdpZHRoLFxuICAgIGJveEhlaWdodCxcbiAgICBpdGVtSGVpZ2h0OiBNYXRoLm1heChmb250U2l6ZSwgYm94SGVpZ2h0KVxuICB9O1xufTtcblxuY29uc3QgaXRlbXNFcXVhbCA9IChhLCBiKSA9PiBhICE9PSBudWxsICYmIGIgIT09IG51bGwgJiYgYS5kYXRhc2V0SW5kZXggPT09IGIuZGF0YXNldEluZGV4ICYmIGEuaW5kZXggPT09IGIuaW5kZXg7XG5cbmV4cG9ydCBjbGFzcyBMZWdlbmQgZXh0ZW5kcyBFbGVtZW50IHtcblxuICAvKipcblx0ICogQHBhcmFtIHt7IGN0eDogYW55OyBvcHRpb25zOiBhbnk7IGNoYXJ0OiBhbnk7IH19IGNvbmZpZ1xuXHQgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuX2FkZGVkID0gZmFsc2U7XG5cbiAgICAvLyBDb250YWlucyBoaXQgYm94ZXMgZm9yIGVhY2ggZGF0YXNldCAoaW4gZGF0YXNldCBvcmRlcilcbiAgICB0aGlzLmxlZ2VuZEhpdEJveGVzID0gW107XG5cbiAgICAvKipcbiBcdFx0ICogQHByaXZhdGVcbiBcdFx0ICovXG4gICAgdGhpcy5faG92ZXJlZEl0ZW0gPSBudWxsO1xuXG4gICAgLy8gQXJlIHdlIGluIGRvdWdobnV0IG1vZGUgd2hpY2ggaGFzIGEgZGlmZmVyZW50IGRhdGEgdHlwZVxuICAgIHRoaXMuZG91Z2hudXRNb2RlID0gZmFsc2U7XG5cbiAgICB0aGlzLmNoYXJ0ID0gY29uZmlnLmNoYXJ0O1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbmZpZy5vcHRpb25zO1xuICAgIHRoaXMuY3R4ID0gY29uZmlnLmN0eDtcbiAgICB0aGlzLmxlZ2VuZEl0ZW1zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY29sdW1uU2l6ZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5saW5lV2lkdGhzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWF4SGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWF4V2lkdGggPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50b3AgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ib3R0b20gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sZWZ0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmlnaHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5oZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9tYXJnaW5zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53ZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5mdWxsU2l6ZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHVwZGF0ZShtYXhXaWR0aCwgbWF4SGVpZ2h0LCBtYXJnaW5zKSB7XG4gICAgdGhpcy5tYXhXaWR0aCA9IG1heFdpZHRoO1xuICAgIHRoaXMubWF4SGVpZ2h0ID0gbWF4SGVpZ2h0O1xuICAgIHRoaXMuX21hcmdpbnMgPSBtYXJnaW5zO1xuXG4gICAgdGhpcy5zZXREaW1lbnNpb25zKCk7XG4gICAgdGhpcy5idWlsZExhYmVscygpO1xuICAgIHRoaXMuZml0KCk7XG4gIH1cblxuICBzZXREaW1lbnNpb25zKCkge1xuICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICB0aGlzLndpZHRoID0gdGhpcy5tYXhXaWR0aDtcbiAgICAgIHRoaXMubGVmdCA9IHRoaXMuX21hcmdpbnMubGVmdDtcbiAgICAgIHRoaXMucmlnaHQgPSB0aGlzLndpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhlaWdodCA9IHRoaXMubWF4SGVpZ2h0O1xuICAgICAgdGhpcy50b3AgPSB0aGlzLl9tYXJnaW5zLnRvcDtcbiAgICAgIHRoaXMuYm90dG9tID0gdGhpcy5oZWlnaHQ7XG4gICAgfVxuICB9XG5cbiAgYnVpbGRMYWJlbHMoKSB7XG4gICAgY29uc3QgbGFiZWxPcHRzID0gdGhpcy5vcHRpb25zLmxhYmVscyB8fCB7fTtcbiAgICBsZXQgbGVnZW5kSXRlbXMgPSBjYWxsKGxhYmVsT3B0cy5nZW5lcmF0ZUxhYmVscywgW3RoaXMuY2hhcnRdLCB0aGlzKSB8fCBbXTtcblxuICAgIGlmIChsYWJlbE9wdHMuZmlsdGVyKSB7XG4gICAgICBsZWdlbmRJdGVtcyA9IGxlZ2VuZEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gbGFiZWxPcHRzLmZpbHRlcihpdGVtLCB0aGlzLmNoYXJ0LmRhdGEpKTtcbiAgICB9XG5cbiAgICBpZiAobGFiZWxPcHRzLnNvcnQpIHtcbiAgICAgIGxlZ2VuZEl0ZW1zID0gbGVnZW5kSXRlbXMuc29ydCgoYSwgYikgPT4gbGFiZWxPcHRzLnNvcnQoYSwgYiwgdGhpcy5jaGFydC5kYXRhKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZXZlcnNlKSB7XG4gICAgICBsZWdlbmRJdGVtcy5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5sZWdlbmRJdGVtcyA9IGxlZ2VuZEl0ZW1zO1xuICB9XG5cbiAgZml0KCkge1xuICAgIGNvbnN0IHtvcHRpb25zLCBjdHh9ID0gdGhpcztcblxuICAgIC8vIFRoZSBsZWdlbmQgbWF5IG5vdCBiZSBkaXNwbGF5ZWQgZm9yIGEgdmFyaWV0eSBvZiByZWFzb25zIGluY2x1ZGluZ1xuICAgIC8vIHRoZSBmYWN0IHRoYXQgdGhlIGRlZmF1bHRzIGdvdCBzZXQgdG8gYGZhbHNlYC5cbiAgICAvLyBXaGVuIHRoZSBsZWdlbmQgaXMgbm90IGRpc3BsYXllZCwgdGhlcmUgYXJlIG5vIGd1YXJhbnRlZXMgdGhhdCB0aGUgb3B0aW9uc1xuICAgIC8vIGFyZSBjb3JyZWN0bHkgZm9ybWF0dGVkIHNvIHdlIG5lZWQgdG8gYmFpbCBvdXQgYXMgZWFybHkgYXMgcG9zc2libGUuXG4gICAgaWYgKCFvcHRpb25zLmRpc3BsYXkpIHtcbiAgICAgIHRoaXMud2lkdGggPSB0aGlzLmhlaWdodCA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbGFiZWxPcHRzID0gb3B0aW9ucy5sYWJlbHM7XG4gICAgY29uc3QgbGFiZWxGb250ID0gdG9Gb250KGxhYmVsT3B0cy5mb250KTtcbiAgICBjb25zdCBmb250U2l6ZSA9IGxhYmVsRm9udC5zaXplO1xuICAgIGNvbnN0IHRpdGxlSGVpZ2h0ID0gdGhpcy5fY29tcHV0ZVRpdGxlSGVpZ2h0KCk7XG4gICAgY29uc3Qge2JveFdpZHRoLCBpdGVtSGVpZ2h0fSA9IGdldEJveFNpemUobGFiZWxPcHRzLCBmb250U2l6ZSk7XG5cbiAgICBsZXQgd2lkdGgsIGhlaWdodDtcblxuICAgIGN0eC5mb250ID0gbGFiZWxGb250LnN0cmluZztcblxuICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICB3aWR0aCA9IHRoaXMubWF4V2lkdGg7IC8vIGZpbGwgYWxsIHRoZSB3aWR0aFxuICAgICAgaGVpZ2h0ID0gdGhpcy5fZml0Um93cyh0aXRsZUhlaWdodCwgZm9udFNpemUsIGJveFdpZHRoLCBpdGVtSGVpZ2h0KSArIDEwO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWlnaHQgPSB0aGlzLm1heEhlaWdodDsgLy8gZmlsbCBhbGwgdGhlIGhlaWdodFxuICAgICAgd2lkdGggPSB0aGlzLl9maXRDb2xzKHRpdGxlSGVpZ2h0LCBsYWJlbEZvbnQsIGJveFdpZHRoLCBpdGVtSGVpZ2h0KSArIDEwO1xuICAgIH1cblxuICAgIHRoaXMud2lkdGggPSBNYXRoLm1pbih3aWR0aCwgb3B0aW9ucy5tYXhXaWR0aCB8fCB0aGlzLm1heFdpZHRoKTtcbiAgICB0aGlzLmhlaWdodCA9IE1hdGgubWluKGhlaWdodCwgb3B0aW9ucy5tYXhIZWlnaHQgfHwgdGhpcy5tYXhIZWlnaHQpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZml0Um93cyh0aXRsZUhlaWdodCwgZm9udFNpemUsIGJveFdpZHRoLCBpdGVtSGVpZ2h0KSB7XG4gICAgY29uc3Qge2N0eCwgbWF4V2lkdGgsIG9wdGlvbnM6IHtsYWJlbHM6IHtwYWRkaW5nfX19ID0gdGhpcztcbiAgICBjb25zdCBoaXRib3hlcyA9IHRoaXMubGVnZW5kSGl0Qm94ZXMgPSBbXTtcbiAgICAvLyBXaWR0aCBvZiBlYWNoIGxpbmUgb2YgbGVnZW5kIGJveGVzLiBMYWJlbHMgd3JhcCBvbnRvIG11bHRpcGxlIGxpbmVzIHdoZW4gdGhlcmUgYXJlIHRvbyBtYW55IHRvIGZpdCBvbiBvbmVcbiAgICBjb25zdCBsaW5lV2lkdGhzID0gdGhpcy5saW5lV2lkdGhzID0gWzBdO1xuICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBpdGVtSGVpZ2h0ICsgcGFkZGluZztcbiAgICBsZXQgdG90YWxIZWlnaHQgPSB0aXRsZUhlaWdodDtcblxuICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7XG4gICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuXG4gICAgbGV0IHJvdyA9IC0xO1xuICAgIGxldCB0b3AgPSAtbGluZUhlaWdodDtcbiAgICB0aGlzLmxlZ2VuZEl0ZW1zLmZvckVhY2goKGxlZ2VuZEl0ZW0sIGkpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW1XaWR0aCA9IGJveFdpZHRoICsgKGZvbnRTaXplIC8gMikgKyBjdHgubWVhc3VyZVRleHQobGVnZW5kSXRlbS50ZXh0KS53aWR0aDtcblxuICAgICAgaWYgKGkgPT09IDAgfHwgbGluZVdpZHRoc1tsaW5lV2lkdGhzLmxlbmd0aCAtIDFdICsgaXRlbVdpZHRoICsgMiAqIHBhZGRpbmcgPiBtYXhXaWR0aCkge1xuICAgICAgICB0b3RhbEhlaWdodCArPSBsaW5lSGVpZ2h0O1xuICAgICAgICBsaW5lV2lkdGhzW2xpbmVXaWR0aHMubGVuZ3RoIC0gKGkgPiAwID8gMCA6IDEpXSA9IDA7XG4gICAgICAgIHRvcCArPSBsaW5lSGVpZ2h0O1xuICAgICAgICByb3crKztcbiAgICAgIH1cblxuICAgICAgaGl0Ym94ZXNbaV0gPSB7bGVmdDogMCwgdG9wLCByb3csIHdpZHRoOiBpdGVtV2lkdGgsIGhlaWdodDogaXRlbUhlaWdodH07XG5cbiAgICAgIGxpbmVXaWR0aHNbbGluZVdpZHRocy5sZW5ndGggLSAxXSArPSBpdGVtV2lkdGggKyBwYWRkaW5nO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRvdGFsSGVpZ2h0O1xuICB9XG5cbiAgX2ZpdENvbHModGl0bGVIZWlnaHQsIGxhYmVsRm9udCwgYm94V2lkdGgsIF9pdGVtSGVpZ2h0KSB7XG4gICAgY29uc3Qge2N0eCwgbWF4SGVpZ2h0LCBvcHRpb25zOiB7bGFiZWxzOiB7cGFkZGluZ319fSA9IHRoaXM7XG4gICAgY29uc3QgaGl0Ym94ZXMgPSB0aGlzLmxlZ2VuZEhpdEJveGVzID0gW107XG4gICAgY29uc3QgY29sdW1uU2l6ZXMgPSB0aGlzLmNvbHVtblNpemVzID0gW107XG4gICAgY29uc3QgaGVpZ2h0TGltaXQgPSBtYXhIZWlnaHQgLSB0aXRsZUhlaWdodDtcblxuICAgIGxldCB0b3RhbFdpZHRoID0gcGFkZGluZztcbiAgICBsZXQgY3VycmVudENvbFdpZHRoID0gMDtcbiAgICBsZXQgY3VycmVudENvbEhlaWdodCA9IDA7XG5cbiAgICBsZXQgbGVmdCA9IDA7XG4gICAgbGV0IGNvbCA9IDA7XG5cbiAgICB0aGlzLmxlZ2VuZEl0ZW1zLmZvckVhY2goKGxlZ2VuZEl0ZW0sIGkpID0+IHtcbiAgICAgIGNvbnN0IHtpdGVtV2lkdGgsIGl0ZW1IZWlnaHR9ID0gY2FsY3VsYXRlSXRlbVNpemUoYm94V2lkdGgsIGxhYmVsRm9udCwgY3R4LCBsZWdlbmRJdGVtLCBfaXRlbUhlaWdodCk7XG5cbiAgICAgIC8vIElmIHRvbyB0YWxsLCBnbyB0byBuZXcgY29sdW1uXG4gICAgICBpZiAoaSA+IDAgJiYgY3VycmVudENvbEhlaWdodCArIGl0ZW1IZWlnaHQgKyAyICogcGFkZGluZyA+IGhlaWdodExpbWl0KSB7XG4gICAgICAgIHRvdGFsV2lkdGggKz0gY3VycmVudENvbFdpZHRoICsgcGFkZGluZztcbiAgICAgICAgY29sdW1uU2l6ZXMucHVzaCh7d2lkdGg6IGN1cnJlbnRDb2xXaWR0aCwgaGVpZ2h0OiBjdXJyZW50Q29sSGVpZ2h0fSk7IC8vIHByZXZpb3VzIGNvbHVtbiBzaXplXG4gICAgICAgIGxlZnQgKz0gY3VycmVudENvbFdpZHRoICsgcGFkZGluZztcbiAgICAgICAgY29sKys7XG4gICAgICAgIGN1cnJlbnRDb2xXaWR0aCA9IGN1cnJlbnRDb2xIZWlnaHQgPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSB0aGUgaGl0Ym94IHdpZHRoIGFuZCBoZWlnaHQgaGVyZS4gRmluYWwgcG9zaXRpb24gd2lsbCBiZSB1cGRhdGVkIGluIGBkcmF3YFxuICAgICAgaGl0Ym94ZXNbaV0gPSB7bGVmdCwgdG9wOiBjdXJyZW50Q29sSGVpZ2h0LCBjb2wsIHdpZHRoOiBpdGVtV2lkdGgsIGhlaWdodDogaXRlbUhlaWdodH07XG5cbiAgICAgIC8vIEdldCBtYXggd2lkdGhcbiAgICAgIGN1cnJlbnRDb2xXaWR0aCA9IE1hdGgubWF4KGN1cnJlbnRDb2xXaWR0aCwgaXRlbVdpZHRoKTtcbiAgICAgIGN1cnJlbnRDb2xIZWlnaHQgKz0gaXRlbUhlaWdodCArIHBhZGRpbmc7XG4gICAgfSk7XG5cbiAgICB0b3RhbFdpZHRoICs9IGN1cnJlbnRDb2xXaWR0aDtcbiAgICBjb2x1bW5TaXplcy5wdXNoKHt3aWR0aDogY3VycmVudENvbFdpZHRoLCBoZWlnaHQ6IGN1cnJlbnRDb2xIZWlnaHR9KTsgLy8gcHJldmlvdXMgY29sdW1uIHNpemVcblxuICAgIHJldHVybiB0b3RhbFdpZHRoO1xuICB9XG5cbiAgYWRqdXN0SGl0Qm94ZXMoKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZGlzcGxheSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0aXRsZUhlaWdodCA9IHRoaXMuX2NvbXB1dGVUaXRsZUhlaWdodCgpO1xuICAgIGNvbnN0IHtsZWdlbmRIaXRCb3hlczogaGl0Ym94ZXMsIG9wdGlvbnM6IHthbGlnbiwgbGFiZWxzOiB7cGFkZGluZ30sIHJ0bH19ID0gdGhpcztcbiAgICBjb25zdCBydGxIZWxwZXIgPSBnZXRSdGxBZGFwdGVyKHJ0bCwgdGhpcy5sZWZ0LCB0aGlzLndpZHRoKTtcbiAgICBpZiAodGhpcy5pc0hvcml6b250YWwoKSkge1xuICAgICAgbGV0IHJvdyA9IDA7XG4gICAgICBsZXQgbGVmdCA9IF9hbGlnblN0YXJ0RW5kKGFsaWduLCB0aGlzLmxlZnQgKyBwYWRkaW5nLCB0aGlzLnJpZ2h0IC0gdGhpcy5saW5lV2lkdGhzW3Jvd10pO1xuICAgICAgZm9yIChjb25zdCBoaXRib3ggb2YgaGl0Ym94ZXMpIHtcbiAgICAgICAgaWYgKHJvdyAhPT0gaGl0Ym94LnJvdykge1xuICAgICAgICAgIHJvdyA9IGhpdGJveC5yb3c7XG4gICAgICAgICAgbGVmdCA9IF9hbGlnblN0YXJ0RW5kKGFsaWduLCB0aGlzLmxlZnQgKyBwYWRkaW5nLCB0aGlzLnJpZ2h0IC0gdGhpcy5saW5lV2lkdGhzW3Jvd10pO1xuICAgICAgICB9XG4gICAgICAgIGhpdGJveC50b3AgKz0gdGhpcy50b3AgKyB0aXRsZUhlaWdodCArIHBhZGRpbmc7XG4gICAgICAgIGhpdGJveC5sZWZ0ID0gcnRsSGVscGVyLmxlZnRGb3JMdHIocnRsSGVscGVyLngobGVmdCksIGhpdGJveC53aWR0aCk7XG4gICAgICAgIGxlZnQgKz0gaGl0Ym94LndpZHRoICsgcGFkZGluZztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNvbCA9IDA7XG4gICAgICBsZXQgdG9wID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRoaXMudG9wICsgdGl0bGVIZWlnaHQgKyBwYWRkaW5nLCB0aGlzLmJvdHRvbSAtIHRoaXMuY29sdW1uU2l6ZXNbY29sXS5oZWlnaHQpO1xuICAgICAgZm9yIChjb25zdCBoaXRib3ggb2YgaGl0Ym94ZXMpIHtcbiAgICAgICAgaWYgKGhpdGJveC5jb2wgIT09IGNvbCkge1xuICAgICAgICAgIGNvbCA9IGhpdGJveC5jb2w7XG4gICAgICAgICAgdG9wID0gX2FsaWduU3RhcnRFbmQoYWxpZ24sIHRoaXMudG9wICsgdGl0bGVIZWlnaHQgKyBwYWRkaW5nLCB0aGlzLmJvdHRvbSAtIHRoaXMuY29sdW1uU2l6ZXNbY29sXS5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGhpdGJveC50b3AgPSB0b3A7XG4gICAgICAgIGhpdGJveC5sZWZ0ICs9IHRoaXMubGVmdCArIHBhZGRpbmc7XG4gICAgICAgIGhpdGJveC5sZWZ0ID0gcnRsSGVscGVyLmxlZnRGb3JMdHIocnRsSGVscGVyLngoaGl0Ym94LmxlZnQpLCBoaXRib3gud2lkdGgpO1xuICAgICAgICB0b3AgKz0gaGl0Ym94LmhlaWdodCArIHBhZGRpbmc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNIb3Jpem9udGFsKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09ICd0b3AnIHx8IHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gJ2JvdHRvbSc7XG4gIH1cblxuICBkcmF3KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzcGxheSkge1xuICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgICBjbGlwQXJlYShjdHgsIHRoaXMpO1xuXG4gICAgICB0aGlzLl9kcmF3KCk7XG5cbiAgICAgIHVuY2xpcEFyZWEoY3R4KTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9kcmF3KCkge1xuICAgIGNvbnN0IHtvcHRpb25zOiBvcHRzLCBjb2x1bW5TaXplcywgbGluZVdpZHRocywgY3R4fSA9IHRoaXM7XG4gICAgY29uc3Qge2FsaWduLCBsYWJlbHM6IGxhYmVsT3B0c30gPSBvcHRzO1xuICAgIGNvbnN0IGRlZmF1bHRDb2xvciA9IGRlZmF1bHRzLmNvbG9yO1xuICAgIGNvbnN0IHJ0bEhlbHBlciA9IGdldFJ0bEFkYXB0ZXIob3B0cy5ydGwsIHRoaXMubGVmdCwgdGhpcy53aWR0aCk7XG4gICAgY29uc3QgbGFiZWxGb250ID0gdG9Gb250KGxhYmVsT3B0cy5mb250KTtcbiAgICBjb25zdCB7cGFkZGluZ30gPSBsYWJlbE9wdHM7XG4gICAgY29uc3QgZm9udFNpemUgPSBsYWJlbEZvbnQuc2l6ZTtcbiAgICBjb25zdCBoYWxmRm9udFNpemUgPSBmb250U2l6ZSAvIDI7XG4gICAgbGV0IGN1cnNvcjtcblxuICAgIHRoaXMuZHJhd1RpdGxlKCk7XG5cbiAgICAvLyBDYW52YXMgc2V0dXBcbiAgICBjdHgudGV4dEFsaWduID0gcnRsSGVscGVyLnRleHRBbGlnbignbGVmdCcpO1xuICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICBjdHgubGluZVdpZHRoID0gMC41O1xuICAgIGN0eC5mb250ID0gbGFiZWxGb250LnN0cmluZztcblxuICAgIGNvbnN0IHtib3hXaWR0aCwgYm94SGVpZ2h0LCBpdGVtSGVpZ2h0fSA9IGdldEJveFNpemUobGFiZWxPcHRzLCBmb250U2l6ZSk7XG5cbiAgICAvLyBjdXJyZW50IHBvc2l0aW9uXG4gICAgY29uc3QgZHJhd0xlZ2VuZEJveCA9IGZ1bmN0aW9uKHgsIHksIGxlZ2VuZEl0ZW0pIHtcbiAgICAgIGlmIChpc05hTihib3hXaWR0aCkgfHwgYm94V2lkdGggPD0gMCB8fCBpc05hTihib3hIZWlnaHQpIHx8IGJveEhlaWdodCA8IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGhlIGN0eCBmb3IgdGhlIGJveFxuICAgICAgY3R4LnNhdmUoKTtcblxuICAgICAgY29uc3QgbGluZVdpZHRoID0gdmFsdWVPckRlZmF1bHQobGVnZW5kSXRlbS5saW5lV2lkdGgsIDEpO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IHZhbHVlT3JEZWZhdWx0KGxlZ2VuZEl0ZW0uZmlsbFN0eWxlLCBkZWZhdWx0Q29sb3IpO1xuICAgICAgY3R4LmxpbmVDYXAgPSB2YWx1ZU9yRGVmYXVsdChsZWdlbmRJdGVtLmxpbmVDYXAsICdidXR0Jyk7XG4gICAgICBjdHgubGluZURhc2hPZmZzZXQgPSB2YWx1ZU9yRGVmYXVsdChsZWdlbmRJdGVtLmxpbmVEYXNoT2Zmc2V0LCAwKTtcbiAgICAgIGN0eC5saW5lSm9pbiA9IHZhbHVlT3JEZWZhdWx0KGxlZ2VuZEl0ZW0ubGluZUpvaW4sICdtaXRlcicpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHZhbHVlT3JEZWZhdWx0KGxlZ2VuZEl0ZW0uc3Ryb2tlU3R5bGUsIGRlZmF1bHRDb2xvcik7XG5cbiAgICAgIGN0eC5zZXRMaW5lRGFzaCh2YWx1ZU9yRGVmYXVsdChsZWdlbmRJdGVtLmxpbmVEYXNoLCBbXSkpO1xuXG4gICAgICBpZiAobGFiZWxPcHRzLnVzZVBvaW50U3R5bGUpIHtcbiAgICAgICAgLy8gUmVjYWxjdWxhdGUgeCBhbmQgeSBmb3IgZHJhd1BvaW50KCkgYmVjYXVzZSBpdHMgZXhwZWN0aW5nXG4gICAgICAgIC8vIHggYW5kIHkgdG8gYmUgY2VudGVyIG9mIGZpZ3VyZSAoaW5zdGVhZCBvZiB0b3AgbGVmdClcbiAgICAgICAgY29uc3QgZHJhd09wdGlvbnMgPSB7XG4gICAgICAgICAgcmFkaXVzOiBib3hIZWlnaHQgKiBNYXRoLlNRUlQyIC8gMixcbiAgICAgICAgICBwb2ludFN0eWxlOiBsZWdlbmRJdGVtLnBvaW50U3R5bGUsXG4gICAgICAgICAgcm90YXRpb246IGxlZ2VuZEl0ZW0ucm90YXRpb24sXG4gICAgICAgICAgYm9yZGVyV2lkdGg6IGxpbmVXaWR0aFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjZW50ZXJYID0gcnRsSGVscGVyLnhQbHVzKHgsIGJveFdpZHRoIC8gMik7XG4gICAgICAgIGNvbnN0IGNlbnRlclkgPSB5ICsgaGFsZkZvbnRTaXplO1xuXG4gICAgICAgIC8vIERyYXcgcG9pbnRTdHlsZSBhcyBsZWdlbmQgc3ltYm9sXG4gICAgICAgIGRyYXdQb2ludExlZ2VuZChjdHgsIGRyYXdPcHRpb25zLCBjZW50ZXJYLCBjZW50ZXJZLCBsYWJlbE9wdHMucG9pbnRTdHlsZVdpZHRoICYmIGJveFdpZHRoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIERyYXcgYm94IGFzIGxlZ2VuZCBzeW1ib2xcbiAgICAgICAgLy8gQWRqdXN0IHBvc2l0aW9uIHdoZW4gYm94SGVpZ2h0IDwgZm9udFNpemUgKHdhbnQgaXQgY2VudGVyZWQpXG4gICAgICAgIGNvbnN0IHlCb3hUb3AgPSB5ICsgTWF0aC5tYXgoKGZvbnRTaXplIC0gYm94SGVpZ2h0KSAvIDIsIDApO1xuICAgICAgICBjb25zdCB4Qm94TGVmdCA9IHJ0bEhlbHBlci5sZWZ0Rm9yTHRyKHgsIGJveFdpZHRoKTtcbiAgICAgICAgY29uc3QgYm9yZGVyUmFkaXVzID0gdG9UUkJMQ29ybmVycyhsZWdlbmRJdGVtLmJvcmRlclJhZGl1cyk7XG5cbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgIGlmIChPYmplY3QudmFsdWVzKGJvcmRlclJhZGl1cykuc29tZSh2ID0+IHYgIT09IDApKSB7XG4gICAgICAgICAgYWRkUm91bmRlZFJlY3RQYXRoKGN0eCwge1xuICAgICAgICAgICAgeDogeEJveExlZnQsXG4gICAgICAgICAgICB5OiB5Qm94VG9wLFxuICAgICAgICAgICAgdzogYm94V2lkdGgsXG4gICAgICAgICAgICBoOiBib3hIZWlnaHQsXG4gICAgICAgICAgICByYWRpdXM6IGJvcmRlclJhZGl1cyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHgucmVjdCh4Qm94TGVmdCwgeUJveFRvcCwgYm94V2lkdGgsIGJveEhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBpZiAobGluZVdpZHRoICE9PSAwKSB7XG4gICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGZpbGxUZXh0ID0gZnVuY3Rpb24oeCwgeSwgbGVnZW5kSXRlbSkge1xuICAgICAgcmVuZGVyVGV4dChjdHgsIGxlZ2VuZEl0ZW0udGV4dCwgeCwgeSArIChpdGVtSGVpZ2h0IC8gMiksIGxhYmVsRm9udCwge1xuICAgICAgICBzdHJpa2V0aHJvdWdoOiBsZWdlbmRJdGVtLmhpZGRlbixcbiAgICAgICAgdGV4dEFsaWduOiBydGxIZWxwZXIudGV4dEFsaWduKGxlZ2VuZEl0ZW0udGV4dEFsaWduKVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEhvcml6b250YWxcbiAgICBjb25zdCBpc0hvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuICAgIGNvbnN0IHRpdGxlSGVpZ2h0ID0gdGhpcy5fY29tcHV0ZVRpdGxlSGVpZ2h0KCk7XG4gICAgaWYgKGlzSG9yaXpvbnRhbCkge1xuICAgICAgY3Vyc29yID0ge1xuICAgICAgICB4OiBfYWxpZ25TdGFydEVuZChhbGlnbiwgdGhpcy5sZWZ0ICsgcGFkZGluZywgdGhpcy5yaWdodCAtIGxpbmVXaWR0aHNbMF0pLFxuICAgICAgICB5OiB0aGlzLnRvcCArIHBhZGRpbmcgKyB0aXRsZUhlaWdodCxcbiAgICAgICAgbGluZTogMFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3Vyc29yID0ge1xuICAgICAgICB4OiB0aGlzLmxlZnQgKyBwYWRkaW5nLFxuICAgICAgICB5OiBfYWxpZ25TdGFydEVuZChhbGlnbiwgdGhpcy50b3AgKyB0aXRsZUhlaWdodCArIHBhZGRpbmcsIHRoaXMuYm90dG9tIC0gY29sdW1uU2l6ZXNbMF0uaGVpZ2h0KSxcbiAgICAgICAgbGluZTogMFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBvdmVycmlkZVRleHREaXJlY3Rpb24odGhpcy5jdHgsIG9wdHMudGV4dERpcmVjdGlvbik7XG5cbiAgICBjb25zdCBsaW5lSGVpZ2h0ID0gaXRlbUhlaWdodCArIHBhZGRpbmc7XG4gICAgdGhpcy5sZWdlbmRJdGVtcy5mb3JFYWNoKChsZWdlbmRJdGVtLCBpKSA9PiB7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBsZWdlbmRJdGVtLmZvbnRDb2xvcjsgLy8gZm9yIHN0cmlrZXRocm91Z2ggZWZmZWN0XG4gICAgICBjdHguZmlsbFN0eWxlID0gbGVnZW5kSXRlbS5mb250Q29sb3I7IC8vIHJlbmRlciBpbiBjb3JyZWN0IGNvbG91clxuXG4gICAgICBjb25zdCB0ZXh0V2lkdGggPSBjdHgubWVhc3VyZVRleHQobGVnZW5kSXRlbS50ZXh0KS53aWR0aDtcbiAgICAgIGNvbnN0IHRleHRBbGlnbiA9IHJ0bEhlbHBlci50ZXh0QWxpZ24obGVnZW5kSXRlbS50ZXh0QWxpZ24gfHwgKGxlZ2VuZEl0ZW0udGV4dEFsaWduID0gbGFiZWxPcHRzLnRleHRBbGlnbikpO1xuICAgICAgY29uc3Qgd2lkdGggPSBib3hXaWR0aCArIGhhbGZGb250U2l6ZSArIHRleHRXaWR0aDtcbiAgICAgIGxldCB4ID0gY3Vyc29yLng7XG4gICAgICBsZXQgeSA9IGN1cnNvci55O1xuXG4gICAgICBydGxIZWxwZXIuc2V0V2lkdGgodGhpcy53aWR0aCk7XG5cbiAgICAgIGlmIChpc0hvcml6b250YWwpIHtcbiAgICAgICAgaWYgKGkgPiAwICYmIHggKyB3aWR0aCArIHBhZGRpbmcgPiB0aGlzLnJpZ2h0KSB7XG4gICAgICAgICAgeSA9IGN1cnNvci55ICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgY3Vyc29yLmxpbmUrKztcbiAgICAgICAgICB4ID0gY3Vyc29yLnggPSBfYWxpZ25TdGFydEVuZChhbGlnbiwgdGhpcy5sZWZ0ICsgcGFkZGluZywgdGhpcy5yaWdodCAtIGxpbmVXaWR0aHNbY3Vyc29yLmxpbmVdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpID4gMCAmJiB5ICsgbGluZUhlaWdodCA+IHRoaXMuYm90dG9tKSB7XG4gICAgICAgIHggPSBjdXJzb3IueCA9IHggKyBjb2x1bW5TaXplc1tjdXJzb3IubGluZV0ud2lkdGggKyBwYWRkaW5nO1xuICAgICAgICBjdXJzb3IubGluZSsrO1xuICAgICAgICB5ID0gY3Vyc29yLnkgPSBfYWxpZ25TdGFydEVuZChhbGlnbiwgdGhpcy50b3AgKyB0aXRsZUhlaWdodCArIHBhZGRpbmcsIHRoaXMuYm90dG9tIC0gY29sdW1uU2l6ZXNbY3Vyc29yLmxpbmVdLmhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlYWxYID0gcnRsSGVscGVyLngoeCk7XG5cbiAgICAgIGRyYXdMZWdlbmRCb3gocmVhbFgsIHksIGxlZ2VuZEl0ZW0pO1xuXG4gICAgICB4ID0gX3RleHRYKHRleHRBbGlnbiwgeCArIGJveFdpZHRoICsgaGFsZkZvbnRTaXplLCBpc0hvcml6b250YWwgPyB4ICsgd2lkdGggOiB0aGlzLnJpZ2h0LCBvcHRzLnJ0bCk7XG5cbiAgICAgIC8vIEZpbGwgdGhlIGFjdHVhbCBsYWJlbFxuICAgICAgZmlsbFRleHQocnRsSGVscGVyLngoeCksIHksIGxlZ2VuZEl0ZW0pO1xuXG4gICAgICBpZiAoaXNIb3Jpem9udGFsKSB7XG4gICAgICAgIGN1cnNvci54ICs9IHdpZHRoICsgcGFkZGluZztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxlZ2VuZEl0ZW0udGV4dCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgZm9udExpbmVIZWlnaHQgPSBsYWJlbEZvbnQubGluZUhlaWdodDtcbiAgICAgICAgY3Vyc29yLnkgKz0gY2FsY3VsYXRlTGVnZW5kSXRlbUhlaWdodChsZWdlbmRJdGVtLCBmb250TGluZUhlaWdodCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJzb3IueSArPSBsaW5lSGVpZ2h0O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVzdG9yZVRleHREaXJlY3Rpb24odGhpcy5jdHgsIG9wdHMudGV4dERpcmVjdGlvbik7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZHJhd1RpdGxlKCkge1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgdGl0bGVPcHRzID0gb3B0cy50aXRsZTtcbiAgICBjb25zdCB0aXRsZUZvbnQgPSB0b0ZvbnQodGl0bGVPcHRzLmZvbnQpO1xuICAgIGNvbnN0IHRpdGxlUGFkZGluZyA9IHRvUGFkZGluZyh0aXRsZU9wdHMucGFkZGluZyk7XG5cbiAgICBpZiAoIXRpdGxlT3B0cy5kaXNwbGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcnRsSGVscGVyID0gZ2V0UnRsQWRhcHRlcihvcHRzLnJ0bCwgdGhpcy5sZWZ0LCB0aGlzLndpZHRoKTtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRpdGxlT3B0cy5wb3NpdGlvbjtcbiAgICBjb25zdCBoYWxmRm9udFNpemUgPSB0aXRsZUZvbnQuc2l6ZSAvIDI7XG4gICAgY29uc3QgdG9wUGFkZGluZ1BsdXNIYWxmRm9udFNpemUgPSB0aXRsZVBhZGRpbmcudG9wICsgaGFsZkZvbnRTaXplO1xuICAgIGxldCB5O1xuXG4gICAgLy8gVGhlc2UgZGVmYXVsdHMgYXJlIHVzZWQgd2hlbiB0aGUgbGVnZW5kIGlzIHZlcnRpY2FsLlxuICAgIC8vIFdoZW4gaG9yaXpvbnRhbCwgdGhleSBhcmUgY29tcHV0ZWQgYmVsb3cuXG4gICAgbGV0IGxlZnQgPSB0aGlzLmxlZnQ7XG4gICAgbGV0IG1heFdpZHRoID0gdGhpcy53aWR0aDtcblxuICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAvLyBNb3ZlIGxlZnQgLyByaWdodCBzbyB0aGF0IHRoZSB0aXRsZSBpcyBhYm92ZSB0aGUgbGVnZW5kIGxpbmVzXG4gICAgICBtYXhXaWR0aCA9IE1hdGgubWF4KC4uLnRoaXMubGluZVdpZHRocyk7XG4gICAgICB5ID0gdGhpcy50b3AgKyB0b3BQYWRkaW5nUGx1c0hhbGZGb250U2l6ZTtcbiAgICAgIGxlZnQgPSBfYWxpZ25TdGFydEVuZChvcHRzLmFsaWduLCBsZWZ0LCB0aGlzLnJpZ2h0IC0gbWF4V2lkdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNb3ZlIGRvd24gc28gdGhhdCB0aGUgdGl0bGUgaXMgYWJvdmUgdGhlIGxlZ2VuZCBzdGFjayBpbiBldmVyeSBhbGlnbm1lbnRcbiAgICAgIGNvbnN0IG1heEhlaWdodCA9IHRoaXMuY29sdW1uU2l6ZXMucmVkdWNlKChhY2MsIHNpemUpID0+IE1hdGgubWF4KGFjYywgc2l6ZS5oZWlnaHQpLCAwKTtcbiAgICAgIHkgPSB0b3BQYWRkaW5nUGx1c0hhbGZGb250U2l6ZSArIF9hbGlnblN0YXJ0RW5kKG9wdHMuYWxpZ24sIHRoaXMudG9wLCB0aGlzLmJvdHRvbSAtIG1heEhlaWdodCAtIG9wdHMubGFiZWxzLnBhZGRpbmcgLSB0aGlzLl9jb21wdXRlVGl0bGVIZWlnaHQoKSk7XG4gICAgfVxuXG4gICAgLy8gTm93IHRoYXQgd2Uga25vdyB0aGUgbGVmdCBlZGdlIG9mIHRoZSBpbm5lciBsZWdlbmQgYm94LCBjb21wdXRlIHRoZSBjb3JyZWN0XG4gICAgLy8gWCBjb29yZGluYXRlIGZyb20gdGhlIHRpdGxlIGFsaWdubWVudFxuICAgIGNvbnN0IHggPSBfYWxpZ25TdGFydEVuZChwb3NpdGlvbiwgbGVmdCwgbGVmdCArIG1heFdpZHRoKTtcblxuICAgIC8vIENhbnZhcyBzZXR1cFxuICAgIGN0eC50ZXh0QWxpZ24gPSBydGxIZWxwZXIudGV4dEFsaWduKF90b0xlZnRSaWdodENlbnRlcihwb3NpdGlvbikpO1xuICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aXRsZU9wdHMuY29sb3I7XG4gICAgY3R4LmZpbGxTdHlsZSA9IHRpdGxlT3B0cy5jb2xvcjtcbiAgICBjdHguZm9udCA9IHRpdGxlRm9udC5zdHJpbmc7XG5cbiAgICByZW5kZXJUZXh0KGN0eCwgdGl0bGVPcHRzLnRleHQsIHgsIHksIHRpdGxlRm9udCk7XG4gIH1cblxuICAvKipcblx0ICogQHByaXZhdGVcblx0ICovXG4gIF9jb21wdXRlVGl0bGVIZWlnaHQoKSB7XG4gICAgY29uc3QgdGl0bGVPcHRzID0gdGhpcy5vcHRpb25zLnRpdGxlO1xuICAgIGNvbnN0IHRpdGxlRm9udCA9IHRvRm9udCh0aXRsZU9wdHMuZm9udCk7XG4gICAgY29uc3QgdGl0bGVQYWRkaW5nID0gdG9QYWRkaW5nKHRpdGxlT3B0cy5wYWRkaW5nKTtcbiAgICByZXR1cm4gdGl0bGVPcHRzLmRpc3BsYXkgPyB0aXRsZUZvbnQubGluZUhlaWdodCArIHRpdGxlUGFkZGluZy5oZWlnaHQgOiAwO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0TGVnZW5kSXRlbUF0KHgsIHkpIHtcbiAgICBsZXQgaSwgaGl0Qm94LCBsaDtcblxuICAgIGlmIChfaXNCZXR3ZWVuKHgsIHRoaXMubGVmdCwgdGhpcy5yaWdodClcbiAgICAgICYmIF9pc0JldHdlZW4oeSwgdGhpcy50b3AsIHRoaXMuYm90dG9tKSkge1xuICAgICAgLy8gU2VlIGlmIHdlIGFyZSB0b3VjaGluZyBvbmUgb2YgdGhlIGRhdGFzZXQgYm94ZXNcbiAgICAgIGxoID0gdGhpcy5sZWdlbmRIaXRCb3hlcztcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsaC5sZW5ndGg7ICsraSkge1xuICAgICAgICBoaXRCb3ggPSBsaFtpXTtcblxuICAgICAgICBpZiAoX2lzQmV0d2Vlbih4LCBoaXRCb3gubGVmdCwgaGl0Qm94LmxlZnQgKyBoaXRCb3gud2lkdGgpXG4gICAgICAgICAgJiYgX2lzQmV0d2Vlbih5LCBoaXRCb3gudG9wLCBoaXRCb3gudG9wICsgaGl0Qm94LmhlaWdodCkpIHtcbiAgICAgICAgICAvLyBUb3VjaGluZyBhbiBlbGVtZW50XG4gICAgICAgICAgcmV0dXJuIHRoaXMubGVnZW5kSXRlbXNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBIYW5kbGUgYW4gZXZlbnRcblx0ICogQHBhcmFtIHtDaGFydEV2ZW50fSBlIC0gVGhlIGV2ZW50IHRvIGhhbmRsZVxuXHQgKi9cbiAgaGFuZGxlRXZlbnQoZSkge1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgaWYgKCFpc0xpc3RlbmVkKGUudHlwZSwgb3B0cykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGFydCBldmVudCBhbHJlYWR5IGhhcyByZWxhdGl2ZSBwb3NpdGlvbiBpbiBpdFxuICAgIGNvbnN0IGhvdmVyZWRJdGVtID0gdGhpcy5fZ2V0TGVnZW5kSXRlbUF0KGUueCwgZS55KTtcblxuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZW1vdmUnIHx8IGUudHlwZSA9PT0gJ21vdXNlb3V0Jykge1xuICAgICAgY29uc3QgcHJldmlvdXMgPSB0aGlzLl9ob3ZlcmVkSXRlbTtcbiAgICAgIGNvbnN0IHNhbWVJdGVtID0gaXRlbXNFcXVhbChwcmV2aW91cywgaG92ZXJlZEl0ZW0pO1xuICAgICAgaWYgKHByZXZpb3VzICYmICFzYW1lSXRlbSkge1xuICAgICAgICBjYWxsKG9wdHMub25MZWF2ZSwgW2UsIHByZXZpb3VzLCB0aGlzXSwgdGhpcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2hvdmVyZWRJdGVtID0gaG92ZXJlZEl0ZW07XG5cbiAgICAgIGlmIChob3ZlcmVkSXRlbSAmJiAhc2FtZUl0ZW0pIHtcbiAgICAgICAgY2FsbChvcHRzLm9uSG92ZXIsIFtlLCBob3ZlcmVkSXRlbSwgdGhpc10sIHRoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaG92ZXJlZEl0ZW0pIHtcbiAgICAgIGNhbGwob3B0cy5vbkNsaWNrLCBbZSwgaG92ZXJlZEl0ZW0sIHRoaXNdLCB0aGlzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlSXRlbVNpemUoYm94V2lkdGgsIGxhYmVsRm9udCwgY3R4LCBsZWdlbmRJdGVtLCBfaXRlbUhlaWdodCkge1xuICBjb25zdCBpdGVtV2lkdGggPSBjYWxjdWxhdGVJdGVtV2lkdGgobGVnZW5kSXRlbSwgYm94V2lkdGgsIGxhYmVsRm9udCwgY3R4KTtcbiAgY29uc3QgaXRlbUhlaWdodCA9IGNhbGN1bGF0ZUl0ZW1IZWlnaHQoX2l0ZW1IZWlnaHQsIGxlZ2VuZEl0ZW0sIGxhYmVsRm9udC5saW5lSGVpZ2h0KTtcbiAgcmV0dXJuIHtpdGVtV2lkdGgsIGl0ZW1IZWlnaHR9O1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVJdGVtV2lkdGgobGVnZW5kSXRlbSwgYm94V2lkdGgsIGxhYmVsRm9udCwgY3R4KSB7XG4gIGxldCBsZWdlbmRJdGVtVGV4dCA9IGxlZ2VuZEl0ZW0udGV4dDtcbiAgaWYgKGxlZ2VuZEl0ZW1UZXh0ICYmIHR5cGVvZiBsZWdlbmRJdGVtVGV4dCAhPT0gJ3N0cmluZycpIHtcbiAgICBsZWdlbmRJdGVtVGV4dCA9IGxlZ2VuZEl0ZW1UZXh0LnJlZHVjZSgoYSwgYikgPT4gYS5sZW5ndGggPiBiLmxlbmd0aCA/IGEgOiBiKTtcbiAgfVxuICByZXR1cm4gYm94V2lkdGggKyAobGFiZWxGb250LnNpemUgLyAyKSArIGN0eC5tZWFzdXJlVGV4dChsZWdlbmRJdGVtVGV4dCkud2lkdGg7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUl0ZW1IZWlnaHQoX2l0ZW1IZWlnaHQsIGxlZ2VuZEl0ZW0sIGZvbnRMaW5lSGVpZ2h0KSB7XG4gIGxldCBpdGVtSGVpZ2h0ID0gX2l0ZW1IZWlnaHQ7XG4gIGlmICh0eXBlb2YgbGVnZW5kSXRlbS50ZXh0ICE9PSAnc3RyaW5nJykge1xuICAgIGl0ZW1IZWlnaHQgPSBjYWxjdWxhdGVMZWdlbmRJdGVtSGVpZ2h0KGxlZ2VuZEl0ZW0sIGZvbnRMaW5lSGVpZ2h0KTtcbiAgfVxuICByZXR1cm4gaXRlbUhlaWdodDtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlTGVnZW5kSXRlbUhlaWdodChsZWdlbmRJdGVtLCBmb250TGluZUhlaWdodCkge1xuICBjb25zdCBsYWJlbEhlaWdodCA9IGxlZ2VuZEl0ZW0udGV4dCA/IGxlZ2VuZEl0ZW0udGV4dC5sZW5ndGggKyAwLjUgOiAwO1xuICByZXR1cm4gZm9udExpbmVIZWlnaHQgKiBsYWJlbEhlaWdodDtcbn1cblxuZnVuY3Rpb24gaXNMaXN0ZW5lZCh0eXBlLCBvcHRzKSB7XG4gIGlmICgodHlwZSA9PT0gJ21vdXNlbW92ZScgfHwgdHlwZSA9PT0gJ21vdXNlb3V0JykgJiYgKG9wdHMub25Ib3ZlciB8fCBvcHRzLm9uTGVhdmUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKG9wdHMub25DbGljayAmJiAodHlwZSA9PT0gJ2NsaWNrJyB8fCB0eXBlID09PSAnbW91c2V1cCcpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGlkOiAnbGVnZW5kJyxcblxuICAvKipcblx0ICogRm9yIHRlc3RzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZWxlbWVudDogTGVnZW5kLFxuXG4gIHN0YXJ0KGNoYXJ0LCBfYXJncywgb3B0aW9ucykge1xuICAgIGNvbnN0IGxlZ2VuZCA9IGNoYXJ0LmxlZ2VuZCA9IG5ldyBMZWdlbmQoe2N0eDogY2hhcnQuY3R4LCBvcHRpb25zLCBjaGFydH0pO1xuICAgIGxheW91dHMuY29uZmlndXJlKGNoYXJ0LCBsZWdlbmQsIG9wdGlvbnMpO1xuICAgIGxheW91dHMuYWRkQm94KGNoYXJ0LCBsZWdlbmQpO1xuICB9LFxuXG4gIHN0b3AoY2hhcnQpIHtcbiAgICBsYXlvdXRzLnJlbW92ZUJveChjaGFydCwgY2hhcnQubGVnZW5kKTtcbiAgICBkZWxldGUgY2hhcnQubGVnZW5kO1xuICB9LFxuXG4gIC8vIER1cmluZyB0aGUgYmVmb3JlVXBkYXRlIHN0ZXAsIHRoZSBsYXlvdXQgY29uZmlndXJhdGlvbiBuZWVkcyB0byBydW5cbiAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgaWYgdGhlIGxlZ2VuZCBwb3NpdGlvbiBjaGFuZ2VzICh2aWEgYW4gb3B0aW9uIHVwZGF0ZSlcbiAgLy8gdGhlIGxheW91dCBzeXN0ZW0gcmVzcGVjdHMgdGhlIGNoYW5nZS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGFydGpzL0NoYXJ0LmpzL2lzc3Vlcy83NTI3XG4gIGJlZm9yZVVwZGF0ZShjaGFydCwgX2FyZ3MsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBsZWdlbmQgPSBjaGFydC5sZWdlbmQ7XG4gICAgbGF5b3V0cy5jb25maWd1cmUoY2hhcnQsIGxlZ2VuZCwgb3B0aW9ucyk7XG4gICAgbGVnZW5kLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9LFxuXG4gIC8vIFRoZSBsYWJlbHMgbmVlZCB0byBiZSBidWlsdCBhZnRlciBkYXRhc2V0cyBhcmUgdXBkYXRlZCB0byBlbnN1cmUgdGhhdCBjb2xvcnNcbiAgLy8gYW5kIG90aGVyIHN0eWxpbmcgYXJlIGNvcnJlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9pc3N1ZXMvNjk2OFxuICBhZnRlclVwZGF0ZShjaGFydCkge1xuICAgIGNvbnN0IGxlZ2VuZCA9IGNoYXJ0LmxlZ2VuZDtcbiAgICBsZWdlbmQuYnVpbGRMYWJlbHMoKTtcbiAgICBsZWdlbmQuYWRqdXN0SGl0Qm94ZXMoKTtcbiAgfSxcblxuXG4gIGFmdGVyRXZlbnQoY2hhcnQsIGFyZ3MpIHtcbiAgICBpZiAoIWFyZ3MucmVwbGF5KSB7XG4gICAgICBjaGFydC5sZWdlbmQuaGFuZGxlRXZlbnQoYXJncy5ldmVudCk7XG4gICAgfVxuICB9LFxuXG4gIGRlZmF1bHRzOiB7XG4gICAgZGlzcGxheTogdHJ1ZSxcbiAgICBwb3NpdGlvbjogJ3RvcCcsXG4gICAgYWxpZ246ICdjZW50ZXInLFxuICAgIGZ1bGxTaXplOiB0cnVlLFxuICAgIHJldmVyc2U6IGZhbHNlLFxuICAgIHdlaWdodDogMTAwMCxcblxuICAgIC8vIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGhhbmRsZVxuICAgIG9uQ2xpY2soZSwgbGVnZW5kSXRlbSwgbGVnZW5kKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGxlZ2VuZEl0ZW0uZGF0YXNldEluZGV4O1xuICAgICAgY29uc3QgY2kgPSBsZWdlbmQuY2hhcnQ7XG4gICAgICBpZiAoY2kuaXNEYXRhc2V0VmlzaWJsZShpbmRleCkpIHtcbiAgICAgICAgY2kuaGlkZShpbmRleCk7XG4gICAgICAgIGxlZ2VuZEl0ZW0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNpLnNob3coaW5kZXgpO1xuICAgICAgICBsZWdlbmRJdGVtLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBvbkhvdmVyOiBudWxsLFxuICAgIG9uTGVhdmU6IG51bGwsXG5cbiAgICBsYWJlbHM6IHtcbiAgICAgIGNvbG9yOiAoY3R4KSA9PiBjdHguY2hhcnQub3B0aW9ucy5jb2xvcixcbiAgICAgIGJveFdpZHRoOiA0MCxcbiAgICAgIHBhZGRpbmc6IDEwLFxuICAgICAgLy8gR2VuZXJhdGVzIGxhYmVscyBzaG93biBpbiB0aGUgbGVnZW5kXG4gICAgICAvLyBWYWxpZCBwcm9wZXJ0aWVzIHRvIHJldHVybjpcbiAgICAgIC8vIHRleHQgOiB0ZXh0IHRvIGRpc3BsYXlcbiAgICAgIC8vIGZpbGxTdHlsZSA6IGZpbGwgb2YgY29sb3VyZWQgYm94XG4gICAgICAvLyBzdHJva2VTdHlsZTogc3Ryb2tlIG9mIGNvbG91cmVkIGJveFxuICAgICAgLy8gaGlkZGVuIDogaWYgdGhpcyBsZWdlbmQgaXRlbSByZWZlcnMgdG8gYSBoaWRkZW4gaXRlbVxuICAgICAgLy8gbGluZUNhcCA6IGNhcCBzdHlsZSBmb3IgbGluZVxuICAgICAgLy8gbGluZURhc2hcbiAgICAgIC8vIGxpbmVEYXNoT2Zmc2V0IDpcbiAgICAgIC8vIGxpbmVKb2luIDpcbiAgICAgIC8vIGxpbmVXaWR0aCA6XG4gICAgICBnZW5lcmF0ZUxhYmVscyhjaGFydCkge1xuICAgICAgICBjb25zdCBkYXRhc2V0cyA9IGNoYXJ0LmRhdGEuZGF0YXNldHM7XG4gICAgICAgIGNvbnN0IHtsYWJlbHM6IHt1c2VQb2ludFN0eWxlLCBwb2ludFN0eWxlLCB0ZXh0QWxpZ24sIGNvbG9yLCB1c2VCb3JkZXJSYWRpdXMsIGJvcmRlclJhZGl1c319ID0gY2hhcnQubGVnZW5kLm9wdGlvbnM7XG5cbiAgICAgICAgcmV0dXJuIGNoYXJ0Ll9nZXRTb3J0ZWREYXRhc2V0TWV0YXMoKS5tYXAoKG1ldGEpID0+IHtcbiAgICAgICAgICBjb25zdCBzdHlsZSA9IG1ldGEuY29udHJvbGxlci5nZXRTdHlsZSh1c2VQb2ludFN0eWxlID8gMCA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgY29uc3QgYm9yZGVyV2lkdGggPSB0b1BhZGRpbmcoc3R5bGUuYm9yZGVyV2lkdGgpO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHQ6IGRhdGFzZXRzW21ldGEuaW5kZXhdLmxhYmVsLFxuICAgICAgICAgICAgZmlsbFN0eWxlOiBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICBmb250Q29sb3I6IGNvbG9yLFxuICAgICAgICAgICAgaGlkZGVuOiAhbWV0YS52aXNpYmxlLFxuICAgICAgICAgICAgbGluZUNhcDogc3R5bGUuYm9yZGVyQ2FwU3R5bGUsXG4gICAgICAgICAgICBsaW5lRGFzaDogc3R5bGUuYm9yZGVyRGFzaCxcbiAgICAgICAgICAgIGxpbmVEYXNoT2Zmc2V0OiBzdHlsZS5ib3JkZXJEYXNoT2Zmc2V0LFxuICAgICAgICAgICAgbGluZUpvaW46IHN0eWxlLmJvcmRlckpvaW5TdHlsZSxcbiAgICAgICAgICAgIGxpbmVXaWR0aDogKGJvcmRlcldpZHRoLndpZHRoICsgYm9yZGVyV2lkdGguaGVpZ2h0KSAvIDQsXG4gICAgICAgICAgICBzdHJva2VTdHlsZTogc3R5bGUuYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBwb2ludFN0eWxlOiBwb2ludFN0eWxlIHx8IHN0eWxlLnBvaW50U3R5bGUsXG4gICAgICAgICAgICByb3RhdGlvbjogc3R5bGUucm90YXRpb24sXG4gICAgICAgICAgICB0ZXh0QWxpZ246IHRleHRBbGlnbiB8fCBzdHlsZS50ZXh0QWxpZ24sXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6IHVzZUJvcmRlclJhZGl1cyAmJiAoYm9yZGVyUmFkaXVzIHx8IHN0eWxlLmJvcmRlclJhZGl1cyksXG5cbiAgICAgICAgICAgIC8vIEJlbG93IGlzIGV4dHJhIGRhdGEgdXNlZCBmb3IgdG9nZ2xpbmcgdGhlIGRhdGFzZXRzXG4gICAgICAgICAgICBkYXRhc2V0SW5kZXg6IG1ldGEuaW5kZXhcbiAgICAgICAgICB9O1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGl0bGU6IHtcbiAgICAgIGNvbG9yOiAoY3R4KSA9PiBjdHguY2hhcnQub3B0aW9ucy5jb2xvcixcbiAgICAgIGRpc3BsYXk6IGZhbHNlLFxuICAgICAgcG9zaXRpb246ICdjZW50ZXInLFxuICAgICAgdGV4dDogJycsXG4gICAgfVxuICB9LFxuXG4gIGRlc2NyaXB0b3JzOiB7XG4gICAgX3NjcmlwdGFibGU6IChuYW1lKSA9PiAhbmFtZS5zdGFydHNXaXRoKCdvbicpLFxuICAgIGxhYmVsczoge1xuICAgICAgX3NjcmlwdGFibGU6IChuYW1lKSA9PiAhWydnZW5lcmF0ZUxhYmVscycsICdmaWx0ZXInLCAnc29ydCddLmluY2x1ZGVzKG5hbWUpLFxuICAgIH1cbiAgfSxcbn07XG4iLCAiaW1wb3J0IEVsZW1lbnQgZnJvbSAnLi4vY29yZS9jb3JlLmVsZW1lbnQuanMnO1xuaW1wb3J0IGxheW91dHMgZnJvbSAnLi4vY29yZS9jb3JlLmxheW91dHMuanMnO1xuaW1wb3J0IHtQSSwgaXNBcnJheSwgdG9QYWRkaW5nLCB0b0ZvbnR9IGZyb20gJy4uL2hlbHBlcnMvaW5kZXguanMnO1xuaW1wb3J0IHtfdG9MZWZ0UmlnaHRDZW50ZXIsIF9hbGlnblN0YXJ0RW5kfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuZXh0cmFzLmpzJztcbmltcG9ydCB7cmVuZGVyVGV4dH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNhbnZhcy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBUaXRsZSBleHRlbmRzIEVsZW1lbnQge1xuICAvKipcblx0ICogQHBhcmFtIHt7IGN0eDogYW55OyBvcHRpb25zOiBhbnk7IGNoYXJ0OiBhbnk7IH19IGNvbmZpZ1xuXHQgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuY2hhcnQgPSBjb25maWcuY2hhcnQ7XG4gICAgdGhpcy5vcHRpb25zID0gY29uZmlnLm9wdGlvbnM7XG4gICAgdGhpcy5jdHggPSBjb25maWcuY3R4O1xuICAgIHRoaXMuX3BhZGRpbmcgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50b3AgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ib3R0b20gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sZWZ0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmlnaHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhlaWdodCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMud2VpZ2h0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZnVsbFNpemUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICB1cGRhdGUobWF4V2lkdGgsIG1heEhlaWdodCkge1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICB0aGlzLmxlZnQgPSAwO1xuICAgIHRoaXMudG9wID0gMDtcblxuICAgIGlmICghb3B0cy5kaXNwbGF5KSB7XG4gICAgICB0aGlzLndpZHRoID0gdGhpcy5oZWlnaHQgPSB0aGlzLnJpZ2h0ID0gdGhpcy5ib3R0b20gPSAwO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMud2lkdGggPSB0aGlzLnJpZ2h0ID0gbWF4V2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLmJvdHRvbSA9IG1heEhlaWdodDtcblxuICAgIGNvbnN0IGxpbmVDb3VudCA9IGlzQXJyYXkob3B0cy50ZXh0KSA/IG9wdHMudGV4dC5sZW5ndGggOiAxO1xuICAgIHRoaXMuX3BhZGRpbmcgPSB0b1BhZGRpbmcob3B0cy5wYWRkaW5nKTtcbiAgICBjb25zdCB0ZXh0U2l6ZSA9IGxpbmVDb3VudCAqIHRvRm9udChvcHRzLmZvbnQpLmxpbmVIZWlnaHQgKyB0aGlzLl9wYWRkaW5nLmhlaWdodDtcblxuICAgIGlmICh0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICB0aGlzLmhlaWdodCA9IHRleHRTaXplO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLndpZHRoID0gdGV4dFNpemU7XG4gICAgfVxuICB9XG5cbiAgaXNIb3Jpem9udGFsKCkge1xuICAgIGNvbnN0IHBvcyA9IHRoaXMub3B0aW9ucy5wb3NpdGlvbjtcbiAgICByZXR1cm4gcG9zID09PSAndG9wJyB8fCBwb3MgPT09ICdib3R0b20nO1xuICB9XG5cbiAgX2RyYXdBcmdzKG9mZnNldCkge1xuICAgIGNvbnN0IHt0b3AsIGxlZnQsIGJvdHRvbSwgcmlnaHQsIG9wdGlvbnN9ID0gdGhpcztcbiAgICBjb25zdCBhbGlnbiA9IG9wdGlvbnMuYWxpZ247XG4gICAgbGV0IHJvdGF0aW9uID0gMDtcbiAgICBsZXQgbWF4V2lkdGgsIHRpdGxlWCwgdGl0bGVZO1xuXG4gICAgaWYgKHRoaXMuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgIHRpdGxlWCA9IF9hbGlnblN0YXJ0RW5kKGFsaWduLCBsZWZ0LCByaWdodCk7XG4gICAgICB0aXRsZVkgPSB0b3AgKyBvZmZzZXQ7XG4gICAgICBtYXhXaWR0aCA9IHJpZ2h0IC0gbGVmdDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICB0aXRsZVggPSBsZWZ0ICsgb2Zmc2V0O1xuICAgICAgICB0aXRsZVkgPSBfYWxpZ25TdGFydEVuZChhbGlnbiwgYm90dG9tLCB0b3ApO1xuICAgICAgICByb3RhdGlvbiA9IFBJICogLTAuNTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpdGxlWCA9IHJpZ2h0IC0gb2Zmc2V0O1xuICAgICAgICB0aXRsZVkgPSBfYWxpZ25TdGFydEVuZChhbGlnbiwgdG9wLCBib3R0b20pO1xuICAgICAgICByb3RhdGlvbiA9IFBJICogMC41O1xuICAgICAgfVxuICAgICAgbWF4V2lkdGggPSBib3R0b20gLSB0b3A7XG4gICAgfVxuICAgIHJldHVybiB7dGl0bGVYLCB0aXRsZVksIG1heFdpZHRoLCByb3RhdGlvbn07XG4gIH1cblxuICBkcmF3KCkge1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBpZiAoIW9wdHMuZGlzcGxheSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZvbnRPcHRzID0gdG9Gb250KG9wdHMuZm9udCk7XG4gICAgY29uc3QgbGluZUhlaWdodCA9IGZvbnRPcHRzLmxpbmVIZWlnaHQ7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbGluZUhlaWdodCAvIDIgKyB0aGlzLl9wYWRkaW5nLnRvcDtcbiAgICBjb25zdCB7dGl0bGVYLCB0aXRsZVksIG1heFdpZHRoLCByb3RhdGlvbn0gPSB0aGlzLl9kcmF3QXJncyhvZmZzZXQpO1xuXG4gICAgcmVuZGVyVGV4dChjdHgsIG9wdHMudGV4dCwgMCwgMCwgZm9udE9wdHMsIHtcbiAgICAgIGNvbG9yOiBvcHRzLmNvbG9yLFxuICAgICAgbWF4V2lkdGgsXG4gICAgICByb3RhdGlvbixcbiAgICAgIHRleHRBbGlnbjogX3RvTGVmdFJpZ2h0Q2VudGVyKG9wdHMuYWxpZ24pLFxuICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJyxcbiAgICAgIHRyYW5zbGF0aW9uOiBbdGl0bGVYLCB0aXRsZVldLFxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRpdGxlKGNoYXJ0LCB0aXRsZU9wdHMpIHtcbiAgY29uc3QgdGl0bGUgPSBuZXcgVGl0bGUoe1xuICAgIGN0eDogY2hhcnQuY3R4LFxuICAgIG9wdGlvbnM6IHRpdGxlT3B0cyxcbiAgICBjaGFydFxuICB9KTtcblxuICBsYXlvdXRzLmNvbmZpZ3VyZShjaGFydCwgdGl0bGUsIHRpdGxlT3B0cyk7XG4gIGxheW91dHMuYWRkQm94KGNoYXJ0LCB0aXRsZSk7XG4gIGNoYXJ0LnRpdGxlQmxvY2sgPSB0aXRsZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpZDogJ3RpdGxlJyxcblxuICAvKipcblx0ICogRm9yIHRlc3RzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZWxlbWVudDogVGl0bGUsXG5cbiAgc3RhcnQoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgY3JlYXRlVGl0bGUoY2hhcnQsIG9wdGlvbnMpO1xuICB9LFxuXG4gIHN0b3AoY2hhcnQpIHtcbiAgICBjb25zdCB0aXRsZUJsb2NrID0gY2hhcnQudGl0bGVCbG9jaztcbiAgICBsYXlvdXRzLnJlbW92ZUJveChjaGFydCwgdGl0bGVCbG9jayk7XG4gICAgZGVsZXRlIGNoYXJ0LnRpdGxlQmxvY2s7XG4gIH0sXG5cbiAgYmVmb3JlVXBkYXRlKGNoYXJ0LCBfYXJncywgb3B0aW9ucykge1xuICAgIGNvbnN0IHRpdGxlID0gY2hhcnQudGl0bGVCbG9jaztcbiAgICBsYXlvdXRzLmNvbmZpZ3VyZShjaGFydCwgdGl0bGUsIG9wdGlvbnMpO1xuICAgIHRpdGxlLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9LFxuXG4gIGRlZmF1bHRzOiB7XG4gICAgYWxpZ246ICdjZW50ZXInLFxuICAgIGRpc3BsYXk6IGZhbHNlLFxuICAgIGZvbnQ6IHtcbiAgICAgIHdlaWdodDogJ2JvbGQnLFxuICAgIH0sXG4gICAgZnVsbFNpemU6IHRydWUsXG4gICAgcGFkZGluZzogMTAsXG4gICAgcG9zaXRpb246ICd0b3AnLFxuICAgIHRleHQ6ICcnLFxuICAgIHdlaWdodDogMjAwMCAgICAgICAgIC8vIGJ5IGRlZmF1bHQgZ3JlYXRlciB0aGFuIGxlZ2VuZCAoMTAwMCkgdG8gYmUgYWJvdmVcbiAgfSxcblxuICBkZWZhdWx0Um91dGVzOiB7XG4gICAgY29sb3I6ICdjb2xvcidcbiAgfSxcblxuICBkZXNjcmlwdG9yczoge1xuICAgIF9zY3JpcHRhYmxlOiB0cnVlLFxuICAgIF9pbmRleGFibGU6IGZhbHNlLFxuICB9LFxufTtcbiIsICJpbXBvcnQge1RpdGxlfSBmcm9tICcuL3BsdWdpbi50aXRsZS5qcyc7XG5pbXBvcnQgbGF5b3V0cyBmcm9tICcuLi9jb3JlL2NvcmUubGF5b3V0cy5qcyc7XG5cbmNvbnN0IG1hcCA9IG5ldyBXZWFrTWFwKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaWQ6ICdzdWJ0aXRsZScsXG5cbiAgc3RhcnQoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgdGl0bGUgPSBuZXcgVGl0bGUoe1xuICAgICAgY3R4OiBjaGFydC5jdHgsXG4gICAgICBvcHRpb25zLFxuICAgICAgY2hhcnRcbiAgICB9KTtcblxuICAgIGxheW91dHMuY29uZmlndXJlKGNoYXJ0LCB0aXRsZSwgb3B0aW9ucyk7XG4gICAgbGF5b3V0cy5hZGRCb3goY2hhcnQsIHRpdGxlKTtcbiAgICBtYXAuc2V0KGNoYXJ0LCB0aXRsZSk7XG4gIH0sXG5cbiAgc3RvcChjaGFydCkge1xuICAgIGxheW91dHMucmVtb3ZlQm94KGNoYXJ0LCBtYXAuZ2V0KGNoYXJ0KSk7XG4gICAgbWFwLmRlbGV0ZShjaGFydCk7XG4gIH0sXG5cbiAgYmVmb3JlVXBkYXRlKGNoYXJ0LCBfYXJncywgb3B0aW9ucykge1xuICAgIGNvbnN0IHRpdGxlID0gbWFwLmdldChjaGFydCk7XG4gICAgbGF5b3V0cy5jb25maWd1cmUoY2hhcnQsIHRpdGxlLCBvcHRpb25zKTtcbiAgICB0aXRsZS5vcHRpb25zID0gb3B0aW9ucztcbiAgfSxcblxuICBkZWZhdWx0czoge1xuICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICBmb250OiB7XG4gICAgICB3ZWlnaHQ6ICdub3JtYWwnLFxuICAgIH0sXG4gICAgZnVsbFNpemU6IHRydWUsXG4gICAgcGFkZGluZzogMCxcbiAgICBwb3NpdGlvbjogJ3RvcCcsXG4gICAgdGV4dDogJycsXG4gICAgd2VpZ2h0OiAxNTAwICAgICAgICAgLy8gYnkgZGVmYXVsdCBncmVhdGVyIHRoYW4gbGVnZW5kICgxMDAwKSBhbmQgc21hbGxlciB0aGFuIHRpdGxlICgyMDAwKVxuICB9LFxuXG4gIGRlZmF1bHRSb3V0ZXM6IHtcbiAgICBjb2xvcjogJ2NvbG9yJ1xuICB9LFxuXG4gIGRlc2NyaXB0b3JzOiB7XG4gICAgX3NjcmlwdGFibGU6IHRydWUsXG4gICAgX2luZGV4YWJsZTogZmFsc2UsXG4gIH0sXG59O1xuIiwgImltcG9ydCBBbmltYXRpb25zIGZyb20gJy4uL2NvcmUvY29yZS5hbmltYXRpb25zLmpzJztcbmltcG9ydCBFbGVtZW50IGZyb20gJy4uL2NvcmUvY29yZS5lbGVtZW50LmpzJztcbmltcG9ydCB7YWRkUm91bmRlZFJlY3RQYXRofSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY2FudmFzLmpzJztcbmltcG9ydCB7ZWFjaCwgbm9vcCwgaXNOdWxsT3JVbmRlZiwgaXNBcnJheSwgX2VsZW1lbnRzRXF1YWwsIGlzT2JqZWN0fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5pbXBvcnQge3RvRm9udCwgdG9QYWRkaW5nLCB0b1RSQkxDb3JuZXJzfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMub3B0aW9ucy5qcyc7XG5pbXBvcnQge2dldFJ0bEFkYXB0ZXIsIG92ZXJyaWRlVGV4dERpcmVjdGlvbiwgcmVzdG9yZVRleHREaXJlY3Rpb259IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5ydGwuanMnO1xuaW1wb3J0IHtkaXN0YW5jZUJldHdlZW5Qb2ludHMsIF9saW1pdFZhbHVlfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMubWF0aC5qcyc7XG5pbXBvcnQge2NyZWF0ZUNvbnRleHQsIGRyYXdQb2ludH0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uL3BsYXRmb3JtL3BsYXRmb3JtLmJhc2UuanMnKS5DaGFydCB9IENoYXJ0XG4gKiBAdHlwZWRlZiB7IGltcG9ydCgnLi4vdHlwZXMvaW5kZXguanMnKS5DaGFydEV2ZW50IH0gQ2hhcnRFdmVudFxuICogQHR5cGVkZWYgeyBpbXBvcnQoJy4uL3R5cGVzL2luZGV4LmpzJykuQWN0aXZlRWxlbWVudCB9IEFjdGl2ZUVsZW1lbnRcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi9jb3JlL2NvcmUuaW50ZXJhY3Rpb24uanMnKS5JbnRlcmFjdGlvbkl0ZW0gfSBJbnRlcmFjdGlvbkl0ZW1cbiAqL1xuXG5jb25zdCBwb3NpdGlvbmVycyA9IHtcbiAgLyoqXG5cdCAqIEF2ZXJhZ2UgbW9kZSBwbGFjZXMgdGhlIHRvb2x0aXAgYXQgdGhlIGF2ZXJhZ2UgcG9zaXRpb24gb2YgdGhlIGVsZW1lbnRzIHNob3duXG5cdCAqL1xuICBhdmVyYWdlKGl0ZW1zKSB7XG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgaSwgbGVuO1xuICAgIGxldCB4ID0gMDtcbiAgICBsZXQgeSA9IDA7XG4gICAgbGV0IGNvdW50ID0gMDtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjb25zdCBlbCA9IGl0ZW1zW2ldLmVsZW1lbnQ7XG4gICAgICBpZiAoZWwgJiYgZWwuaGFzVmFsdWUoKSkge1xuICAgICAgICBjb25zdCBwb3MgPSBlbC50b29sdGlwUG9zaXRpb24oKTtcbiAgICAgICAgeCArPSBwb3MueDtcbiAgICAgICAgeSArPSBwb3MueTtcbiAgICAgICAgKytjb3VudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgeDogeCAvIGNvdW50LFxuICAgICAgeTogeSAvIGNvdW50XG4gICAgfTtcbiAgfSxcblxuICAvKipcblx0ICogR2V0cyB0aGUgdG9vbHRpcCBwb3NpdGlvbiBuZWFyZXN0IG9mIHRoZSBpdGVtIG5lYXJlc3QgdG8gdGhlIGV2ZW50IHBvc2l0aW9uXG5cdCAqL1xuICBuZWFyZXN0KGl0ZW1zLCBldmVudFBvc2l0aW9uKSB7XG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgeCA9IGV2ZW50UG9zaXRpb24ueDtcbiAgICBsZXQgeSA9IGV2ZW50UG9zaXRpb24ueTtcbiAgICBsZXQgbWluRGlzdGFuY2UgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IGksIGxlbiwgbmVhcmVzdEVsZW1lbnQ7XG5cbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgY29uc3QgZWwgPSBpdGVtc1tpXS5lbGVtZW50O1xuICAgICAgaWYgKGVsICYmIGVsLmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgY29uc3QgY2VudGVyID0gZWwuZ2V0Q2VudGVyUG9pbnQoKTtcbiAgICAgICAgY29uc3QgZCA9IGRpc3RhbmNlQmV0d2VlblBvaW50cyhldmVudFBvc2l0aW9uLCBjZW50ZXIpO1xuXG4gICAgICAgIGlmIChkIDwgbWluRGlzdGFuY2UpIHtcbiAgICAgICAgICBtaW5EaXN0YW5jZSA9IGQ7XG4gICAgICAgICAgbmVhcmVzdEVsZW1lbnQgPSBlbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuZWFyZXN0RWxlbWVudCkge1xuICAgICAgY29uc3QgdHAgPSBuZWFyZXN0RWxlbWVudC50b29sdGlwUG9zaXRpb24oKTtcbiAgICAgIHggPSB0cC54O1xuICAgICAgeSA9IHRwLnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHgsXG4gICAgICB5XG4gICAgfTtcbiAgfVxufTtcblxuLy8gSGVscGVyIHRvIHB1c2ggb3IgY29uY2F0IGJhc2VkIG9uIGlmIHRoZSAybmQgcGFyYW1ldGVyIGlzIGFuIGFycmF5IG9yIG5vdFxuZnVuY3Rpb24gcHVzaE9yQ29uY2F0KGJhc2UsIHRvUHVzaCkge1xuICBpZiAodG9QdXNoKSB7XG4gICAgaWYgKGlzQXJyYXkodG9QdXNoKSkge1xuICAgICAgLy8gYmFzZSA9IGJhc2UuY29uY2F0KHRvUHVzaCk7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShiYXNlLCB0b1B1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlLnB1c2godG9QdXNoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmFzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFycmF5IG9mIHN0cmluZ3Mgc3BsaXQgYnkgbmV3bGluZVxuICogQHBhcmFtIHsqfSBzdHIgLSBUaGUgdmFsdWUgdG8gc3BsaXQgYnkgbmV3bGluZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd8c3RyaW5nW119IHZhbHVlIGlmIG5ld2xpbmUgcHJlc2VudCAtIFJldHVybmVkIGZyb20gU3RyaW5nIHNwbGl0KCkgbWV0aG9kXG4gKiBAZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gc3BsaXROZXdsaW5lcyhzdHIpIHtcbiAgaWYgKCh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyB8fCBzdHIgaW5zdGFuY2VvZiBTdHJpbmcpICYmIHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG4gICAgcmV0dXJuIHN0ci5zcGxpdCgnXFxuJyk7XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn1cblxuXG4vKipcbiAqIFByaXZhdGUgaGVscGVyIHRvIGNyZWF0ZSBhIHRvb2x0aXAgaXRlbSBtb2RlbFxuICogQHBhcmFtIHtDaGFydH0gY2hhcnRcbiAqIEBwYXJhbSB7QWN0aXZlRWxlbWVudH0gaXRlbSAtIHtlbGVtZW50LCBpbmRleCwgZGF0YXNldEluZGV4fSB0byBjcmVhdGUgdGhlIHRvb2x0aXAgaXRlbSBmb3JcbiAqIEByZXR1cm4gbmV3IHRvb2x0aXAgaXRlbVxuICovXG5mdW5jdGlvbiBjcmVhdGVUb29sdGlwSXRlbShjaGFydCwgaXRlbSkge1xuICBjb25zdCB7ZWxlbWVudCwgZGF0YXNldEluZGV4LCBpbmRleH0gPSBpdGVtO1xuICBjb25zdCBjb250cm9sbGVyID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KS5jb250cm9sbGVyO1xuICBjb25zdCB7bGFiZWwsIHZhbHVlfSA9IGNvbnRyb2xsZXIuZ2V0TGFiZWxBbmRWYWx1ZShpbmRleCk7XG5cbiAgcmV0dXJuIHtcbiAgICBjaGFydCxcbiAgICBsYWJlbCxcbiAgICBwYXJzZWQ6IGNvbnRyb2xsZXIuZ2V0UGFyc2VkKGluZGV4KSxcbiAgICByYXc6IGNoYXJ0LmRhdGEuZGF0YXNldHNbZGF0YXNldEluZGV4XS5kYXRhW2luZGV4XSxcbiAgICBmb3JtYXR0ZWRWYWx1ZTogdmFsdWUsXG4gICAgZGF0YXNldDogY29udHJvbGxlci5nZXREYXRhc2V0KCksXG4gICAgZGF0YUluZGV4OiBpbmRleCxcbiAgICBkYXRhc2V0SW5kZXgsXG4gICAgZWxlbWVudFxuICB9O1xufVxuXG4vKipcbiAqIEdldCB0aGUgc2l6ZSBvZiB0aGUgdG9vbHRpcFxuICovXG5mdW5jdGlvbiBnZXRUb29sdGlwU2l6ZSh0b29sdGlwLCBvcHRpb25zKSB7XG4gIGNvbnN0IGN0eCA9IHRvb2x0aXAuY2hhcnQuY3R4O1xuICBjb25zdCB7Ym9keSwgZm9vdGVyLCB0aXRsZX0gPSB0b29sdGlwO1xuICBjb25zdCB7Ym94V2lkdGgsIGJveEhlaWdodH0gPSBvcHRpb25zO1xuICBjb25zdCBib2R5Rm9udCA9IHRvRm9udChvcHRpb25zLmJvZHlGb250KTtcbiAgY29uc3QgdGl0bGVGb250ID0gdG9Gb250KG9wdGlvbnMudGl0bGVGb250KTtcbiAgY29uc3QgZm9vdGVyRm9udCA9IHRvRm9udChvcHRpb25zLmZvb3RlckZvbnQpO1xuICBjb25zdCB0aXRsZUxpbmVDb3VudCA9IHRpdGxlLmxlbmd0aDtcbiAgY29uc3QgZm9vdGVyTGluZUNvdW50ID0gZm9vdGVyLmxlbmd0aDtcbiAgY29uc3QgYm9keUxpbmVJdGVtQ291bnQgPSBib2R5Lmxlbmd0aDtcblxuICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKG9wdGlvbnMucGFkZGluZyk7XG4gIGxldCBoZWlnaHQgPSBwYWRkaW5nLmhlaWdodDtcbiAgbGV0IHdpZHRoID0gMDtcblxuICAvLyBDb3VudCBvZiBhbGwgbGluZXMgaW4gdGhlIGJvZHlcbiAgbGV0IGNvbWJpbmVkQm9keUxlbmd0aCA9IGJvZHkucmVkdWNlKChjb3VudCwgYm9keUl0ZW0pID0+IGNvdW50ICsgYm9keUl0ZW0uYmVmb3JlLmxlbmd0aCArIGJvZHlJdGVtLmxpbmVzLmxlbmd0aCArIGJvZHlJdGVtLmFmdGVyLmxlbmd0aCwgMCk7XG4gIGNvbWJpbmVkQm9keUxlbmd0aCArPSB0b29sdGlwLmJlZm9yZUJvZHkubGVuZ3RoICsgdG9vbHRpcC5hZnRlckJvZHkubGVuZ3RoO1xuXG4gIGlmICh0aXRsZUxpbmVDb3VudCkge1xuICAgIGhlaWdodCArPSB0aXRsZUxpbmVDb3VudCAqIHRpdGxlRm9udC5saW5lSGVpZ2h0XG5cdFx0XHQrICh0aXRsZUxpbmVDb3VudCAtIDEpICogb3B0aW9ucy50aXRsZVNwYWNpbmdcblx0XHRcdCsgb3B0aW9ucy50aXRsZU1hcmdpbkJvdHRvbTtcbiAgfVxuICBpZiAoY29tYmluZWRCb2R5TGVuZ3RoKSB7XG4gICAgLy8gQm9keSBsaW5lcyBtYXkgaW5jbHVkZSBzb21lIGV4dHJhIGhlaWdodCBkZXBlbmRpbmcgb24gYm94SGVpZ2h0XG4gICAgY29uc3QgYm9keUxpbmVIZWlnaHQgPSBvcHRpb25zLmRpc3BsYXlDb2xvcnMgPyBNYXRoLm1heChib3hIZWlnaHQsIGJvZHlGb250LmxpbmVIZWlnaHQpIDogYm9keUZvbnQubGluZUhlaWdodDtcbiAgICBoZWlnaHQgKz0gYm9keUxpbmVJdGVtQ291bnQgKiBib2R5TGluZUhlaWdodFxuXHRcdFx0KyAoY29tYmluZWRCb2R5TGVuZ3RoIC0gYm9keUxpbmVJdGVtQ291bnQpICogYm9keUZvbnQubGluZUhlaWdodFxuXHRcdFx0KyAoY29tYmluZWRCb2R5TGVuZ3RoIC0gMSkgKiBvcHRpb25zLmJvZHlTcGFjaW5nO1xuICB9XG4gIGlmIChmb290ZXJMaW5lQ291bnQpIHtcbiAgICBoZWlnaHQgKz0gb3B0aW9ucy5mb290ZXJNYXJnaW5Ub3Bcblx0XHRcdCsgZm9vdGVyTGluZUNvdW50ICogZm9vdGVyRm9udC5saW5lSGVpZ2h0XG5cdFx0XHQrIChmb290ZXJMaW5lQ291bnQgLSAxKSAqIG9wdGlvbnMuZm9vdGVyU3BhY2luZztcbiAgfVxuXG4gIC8vIFRpdGxlIHdpZHRoXG4gIGxldCB3aWR0aFBhZGRpbmcgPSAwO1xuICBjb25zdCBtYXhMaW5lV2lkdGggPSBmdW5jdGlvbihsaW5lKSB7XG4gICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgY3R4Lm1lYXN1cmVUZXh0KGxpbmUpLndpZHRoICsgd2lkdGhQYWRkaW5nKTtcbiAgfTtcblxuICBjdHguc2F2ZSgpO1xuXG4gIGN0eC5mb250ID0gdGl0bGVGb250LnN0cmluZztcbiAgZWFjaCh0b29sdGlwLnRpdGxlLCBtYXhMaW5lV2lkdGgpO1xuXG4gIC8vIEJvZHkgd2lkdGhcbiAgY3R4LmZvbnQgPSBib2R5Rm9udC5zdHJpbmc7XG4gIGVhY2godG9vbHRpcC5iZWZvcmVCb2R5LmNvbmNhdCh0b29sdGlwLmFmdGVyQm9keSksIG1heExpbmVXaWR0aCk7XG5cbiAgLy8gQm9keSBsaW5lcyBtYXkgaW5jbHVkZSBzb21lIGV4dHJhIHdpZHRoIGR1ZSB0byB0aGUgY29sb3IgYm94XG4gIHdpZHRoUGFkZGluZyA9IG9wdGlvbnMuZGlzcGxheUNvbG9ycyA/IChib3hXaWR0aCArIDIgKyBvcHRpb25zLmJveFBhZGRpbmcpIDogMDtcbiAgZWFjaChib2R5LCAoYm9keUl0ZW0pID0+IHtcbiAgICBlYWNoKGJvZHlJdGVtLmJlZm9yZSwgbWF4TGluZVdpZHRoKTtcbiAgICBlYWNoKGJvZHlJdGVtLmxpbmVzLCBtYXhMaW5lV2lkdGgpO1xuICAgIGVhY2goYm9keUl0ZW0uYWZ0ZXIsIG1heExpbmVXaWR0aCk7XG4gIH0pO1xuXG4gIC8vIFJlc2V0IGJhY2sgdG8gMFxuICB3aWR0aFBhZGRpbmcgPSAwO1xuXG4gIC8vIEZvb3RlciB3aWR0aFxuICBjdHguZm9udCA9IGZvb3RlckZvbnQuc3RyaW5nO1xuICBlYWNoKHRvb2x0aXAuZm9vdGVyLCBtYXhMaW5lV2lkdGgpO1xuXG4gIGN0eC5yZXN0b3JlKCk7XG5cbiAgLy8gQWRkIHBhZGRpbmdcbiAgd2lkdGggKz0gcGFkZGluZy53aWR0aDtcblxuICByZXR1cm4ge3dpZHRoLCBoZWlnaHR9O1xufVxuXG5mdW5jdGlvbiBkZXRlcm1pbmVZQWxpZ24oY2hhcnQsIHNpemUpIHtcbiAgY29uc3Qge3ksIGhlaWdodH0gPSBzaXplO1xuXG4gIGlmICh5IDwgaGVpZ2h0IC8gMikge1xuICAgIHJldHVybiAndG9wJztcbiAgfSBlbHNlIGlmICh5ID4gKGNoYXJ0LmhlaWdodCAtIGhlaWdodCAvIDIpKSB7XG4gICAgcmV0dXJuICdib3R0b20nO1xuICB9XG4gIHJldHVybiAnY2VudGVyJztcbn1cblxuZnVuY3Rpb24gZG9lc05vdEZpdFdpdGhBbGlnbih4QWxpZ24sIGNoYXJ0LCBvcHRpb25zLCBzaXplKSB7XG4gIGNvbnN0IHt4LCB3aWR0aH0gPSBzaXplO1xuICBjb25zdCBjYXJldCA9IG9wdGlvbnMuY2FyZXRTaXplICsgb3B0aW9ucy5jYXJldFBhZGRpbmc7XG4gIGlmICh4QWxpZ24gPT09ICdsZWZ0JyAmJiB4ICsgd2lkdGggKyBjYXJldCA+IGNoYXJ0LndpZHRoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoeEFsaWduID09PSAncmlnaHQnICYmIHggLSB3aWR0aCAtIGNhcmV0IDwgMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRldGVybWluZVhBbGlnbihjaGFydCwgb3B0aW9ucywgc2l6ZSwgeUFsaWduKSB7XG4gIGNvbnN0IHt4LCB3aWR0aH0gPSBzaXplO1xuICBjb25zdCB7d2lkdGg6IGNoYXJ0V2lkdGgsIGNoYXJ0QXJlYToge2xlZnQsIHJpZ2h0fX0gPSBjaGFydDtcbiAgbGV0IHhBbGlnbiA9ICdjZW50ZXInO1xuXG4gIGlmICh5QWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgeEFsaWduID0geCA8PSAobGVmdCArIHJpZ2h0KSAvIDIgPyAnbGVmdCcgOiAncmlnaHQnO1xuICB9IGVsc2UgaWYgKHggPD0gd2lkdGggLyAyKSB7XG4gICAgeEFsaWduID0gJ2xlZnQnO1xuICB9IGVsc2UgaWYgKHggPj0gY2hhcnRXaWR0aCAtIHdpZHRoIC8gMikge1xuICAgIHhBbGlnbiA9ICdyaWdodCc7XG4gIH1cblxuICBpZiAoZG9lc05vdEZpdFdpdGhBbGlnbih4QWxpZ24sIGNoYXJ0LCBvcHRpb25zLCBzaXplKSkge1xuICAgIHhBbGlnbiA9ICdjZW50ZXInO1xuICB9XG5cbiAgcmV0dXJuIHhBbGlnbjtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IHRoZSBhbGlnbm1lbnQgb2YgYSB0b29sdGlwIGdpdmVuIHRoZSBzaXplXG4gKi9cbmZ1bmN0aW9uIGRldGVybWluZUFsaWdubWVudChjaGFydCwgb3B0aW9ucywgc2l6ZSkge1xuICBjb25zdCB5QWxpZ24gPSBzaXplLnlBbGlnbiB8fCBvcHRpb25zLnlBbGlnbiB8fCBkZXRlcm1pbmVZQWxpZ24oY2hhcnQsIHNpemUpO1xuXG4gIHJldHVybiB7XG4gICAgeEFsaWduOiBzaXplLnhBbGlnbiB8fCBvcHRpb25zLnhBbGlnbiB8fCBkZXRlcm1pbmVYQWxpZ24oY2hhcnQsIG9wdGlvbnMsIHNpemUsIHlBbGlnbiksXG4gICAgeUFsaWduXG4gIH07XG59XG5cbmZ1bmN0aW9uIGFsaWduWChzaXplLCB4QWxpZ24pIHtcbiAgbGV0IHt4LCB3aWR0aH0gPSBzaXplO1xuICBpZiAoeEFsaWduID09PSAncmlnaHQnKSB7XG4gICAgeCAtPSB3aWR0aDtcbiAgfSBlbHNlIGlmICh4QWxpZ24gPT09ICdjZW50ZXInKSB7XG4gICAgeCAtPSAod2lkdGggLyAyKTtcbiAgfVxuICByZXR1cm4geDtcbn1cblxuZnVuY3Rpb24gYWxpZ25ZKHNpemUsIHlBbGlnbiwgcGFkZGluZ0FuZFNpemUpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxuICBsZXQge3ksIGhlaWdodH0gPSBzaXplO1xuICBpZiAoeUFsaWduID09PSAndG9wJykge1xuICAgIHkgKz0gcGFkZGluZ0FuZFNpemU7XG4gIH0gZWxzZSBpZiAoeUFsaWduID09PSAnYm90dG9tJykge1xuICAgIHkgLT0gaGVpZ2h0ICsgcGFkZGluZ0FuZFNpemU7XG4gIH0gZWxzZSB7XG4gICAgeSAtPSAoaGVpZ2h0IC8gMik7XG4gIH1cbiAgcmV0dXJuIHk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCB0aGUgbG9jYXRpb24gYSB0b29sdGlwIG5lZWRzIHRvIGJlIHBsYWNlZCBhdCBnaXZlbiB0aGUgaW5pdGlhbCBwb3NpdGlvbiAodmlhIHRoZSB2bSkgYW5kIHRoZSBzaXplIGFuZCBhbGlnbm1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0QmFja2dyb3VuZFBvaW50KG9wdGlvbnMsIHNpemUsIGFsaWdubWVudCwgY2hhcnQpIHtcbiAgY29uc3Qge2NhcmV0U2l6ZSwgY2FyZXRQYWRkaW5nLCBjb3JuZXJSYWRpdXN9ID0gb3B0aW9ucztcbiAgY29uc3Qge3hBbGlnbiwgeUFsaWdufSA9IGFsaWdubWVudDtcbiAgY29uc3QgcGFkZGluZ0FuZFNpemUgPSBjYXJldFNpemUgKyBjYXJldFBhZGRpbmc7XG4gIGNvbnN0IHt0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYm90dG9tUmlnaHR9ID0gdG9UUkJMQ29ybmVycyhjb3JuZXJSYWRpdXMpO1xuXG4gIGxldCB4ID0gYWxpZ25YKHNpemUsIHhBbGlnbik7XG4gIGNvbnN0IHkgPSBhbGlnblkoc2l6ZSwgeUFsaWduLCBwYWRkaW5nQW5kU2l6ZSk7XG5cbiAgaWYgKHlBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICBpZiAoeEFsaWduID09PSAnbGVmdCcpIHtcbiAgICAgIHggKz0gcGFkZGluZ0FuZFNpemU7XG4gICAgfSBlbHNlIGlmICh4QWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgIHggLT0gcGFkZGluZ0FuZFNpemU7XG4gICAgfVxuICB9IGVsc2UgaWYgKHhBbGlnbiA9PT0gJ2xlZnQnKSB7XG4gICAgeCAtPSBNYXRoLm1heCh0b3BMZWZ0LCBib3R0b21MZWZ0KSArIGNhcmV0U2l6ZTtcbiAgfSBlbHNlIGlmICh4QWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICB4ICs9IE1hdGgubWF4KHRvcFJpZ2h0LCBib3R0b21SaWdodCkgKyBjYXJldFNpemU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IF9saW1pdFZhbHVlKHgsIDAsIGNoYXJ0LndpZHRoIC0gc2l6ZS53aWR0aCksXG4gICAgeTogX2xpbWl0VmFsdWUoeSwgMCwgY2hhcnQuaGVpZ2h0IC0gc2l6ZS5oZWlnaHQpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEFsaWduZWRYKHRvb2x0aXAsIGFsaWduLCBvcHRpb25zKSB7XG4gIGNvbnN0IHBhZGRpbmcgPSB0b1BhZGRpbmcob3B0aW9ucy5wYWRkaW5nKTtcblxuICByZXR1cm4gYWxpZ24gPT09ICdjZW50ZXInXG4gICAgPyB0b29sdGlwLnggKyB0b29sdGlwLndpZHRoIC8gMlxuICAgIDogYWxpZ24gPT09ICdyaWdodCdcbiAgICAgID8gdG9vbHRpcC54ICsgdG9vbHRpcC53aWR0aCAtIHBhZGRpbmcucmlnaHRcbiAgICAgIDogdG9vbHRpcC54ICsgcGFkZGluZy5sZWZ0O1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBidWlsZCBiZWZvcmUgYW5kIGFmdGVyIGJvZHkgbGluZXNcbiAqL1xuZnVuY3Rpb24gZ2V0QmVmb3JlQWZ0ZXJCb2R5TGluZXMoY2FsbGJhY2spIHtcbiAgcmV0dXJuIHB1c2hPckNvbmNhdChbXSwgc3BsaXROZXdsaW5lcyhjYWxsYmFjaykpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUb29sdGlwQ29udGV4dChwYXJlbnQsIHRvb2x0aXAsIHRvb2x0aXBJdGVtcykge1xuICByZXR1cm4gY3JlYXRlQ29udGV4dChwYXJlbnQsIHtcbiAgICB0b29sdGlwLFxuICAgIHRvb2x0aXBJdGVtcyxcbiAgICB0eXBlOiAndG9vbHRpcCdcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG92ZXJyaWRlQ2FsbGJhY2tzKGNhbGxiYWNrcywgY29udGV4dCkge1xuICBjb25zdCBvdmVycmlkZSA9IGNvbnRleHQgJiYgY29udGV4dC5kYXRhc2V0ICYmIGNvbnRleHQuZGF0YXNldC50b29sdGlwICYmIGNvbnRleHQuZGF0YXNldC50b29sdGlwLmNhbGxiYWNrcztcbiAgcmV0dXJuIG92ZXJyaWRlID8gY2FsbGJhY2tzLm92ZXJyaWRlKG92ZXJyaWRlKSA6IGNhbGxiYWNrcztcbn1cblxuY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgLy8gQXJncyBhcmU6ICh0b29sdGlwSXRlbXMsIGRhdGEpXG4gIGJlZm9yZVRpdGxlOiBub29wLFxuICB0aXRsZSh0b29sdGlwSXRlbXMpIHtcbiAgICBpZiAodG9vbHRpcEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0b29sdGlwSXRlbXNbMF07XG4gICAgICBjb25zdCBsYWJlbHMgPSBpdGVtLmNoYXJ0LmRhdGEubGFiZWxzO1xuICAgICAgY29uc3QgbGFiZWxDb3VudCA9IGxhYmVscyA/IGxhYmVscy5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodGhpcyAmJiB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLm1vZGUgPT09ICdkYXRhc2V0Jykge1xuICAgICAgICByZXR1cm4gaXRlbS5kYXRhc2V0LmxhYmVsIHx8ICcnO1xuICAgICAgfSBlbHNlIGlmIChpdGVtLmxhYmVsKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmxhYmVsO1xuICAgICAgfSBlbHNlIGlmIChsYWJlbENvdW50ID4gMCAmJiBpdGVtLmRhdGFJbmRleCA8IGxhYmVsQ291bnQpIHtcbiAgICAgICAgcmV0dXJuIGxhYmVsc1tpdGVtLmRhdGFJbmRleF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9LFxuICBhZnRlclRpdGxlOiBub29wLFxuXG4gIC8vIEFyZ3MgYXJlOiAodG9vbHRpcEl0ZW1zLCBkYXRhKVxuICBiZWZvcmVCb2R5OiBub29wLFxuXG4gIC8vIEFyZ3MgYXJlOiAodG9vbHRpcEl0ZW0sIGRhdGEpXG4gIGJlZm9yZUxhYmVsOiBub29wLFxuICBsYWJlbCh0b29sdGlwSXRlbSkge1xuICAgIGlmICh0aGlzICYmIHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMubW9kZSA9PT0gJ2RhdGFzZXQnKSB7XG4gICAgICByZXR1cm4gdG9vbHRpcEl0ZW0ubGFiZWwgKyAnOiAnICsgdG9vbHRpcEl0ZW0uZm9ybWF0dGVkVmFsdWUgfHwgdG9vbHRpcEl0ZW0uZm9ybWF0dGVkVmFsdWU7XG4gICAgfVxuXG4gICAgbGV0IGxhYmVsID0gdG9vbHRpcEl0ZW0uZGF0YXNldC5sYWJlbCB8fCAnJztcblxuICAgIGlmIChsYWJlbCkge1xuICAgICAgbGFiZWwgKz0gJzogJztcbiAgICB9XG4gICAgY29uc3QgdmFsdWUgPSB0b29sdGlwSXRlbS5mb3JtYXR0ZWRWYWx1ZTtcbiAgICBpZiAoIWlzTnVsbE9yVW5kZWYodmFsdWUpKSB7XG4gICAgICBsYWJlbCArPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGxhYmVsO1xuICB9LFxuICBsYWJlbENvbG9yKHRvb2x0aXBJdGVtKSB7XG4gICAgY29uc3QgbWV0YSA9IHRvb2x0aXBJdGVtLmNoYXJ0LmdldERhdGFzZXRNZXRhKHRvb2x0aXBJdGVtLmRhdGFzZXRJbmRleCk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1ldGEuY29udHJvbGxlci5nZXRTdHlsZSh0b29sdGlwSXRlbS5kYXRhSW5kZXgpO1xuICAgIHJldHVybiB7XG4gICAgICBib3JkZXJDb2xvcjogb3B0aW9ucy5ib3JkZXJDb2xvcixcbiAgICAgIGJhY2tncm91bmRDb2xvcjogb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBib3JkZXJXaWR0aDogb3B0aW9ucy5ib3JkZXJXaWR0aCxcbiAgICAgIGJvcmRlckRhc2g6IG9wdGlvbnMuYm9yZGVyRGFzaCxcbiAgICAgIGJvcmRlckRhc2hPZmZzZXQ6IG9wdGlvbnMuYm9yZGVyRGFzaE9mZnNldCxcbiAgICAgIGJvcmRlclJhZGl1czogMCxcbiAgICB9O1xuICB9LFxuICBsYWJlbFRleHRDb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmJvZHlDb2xvcjtcbiAgfSxcbiAgbGFiZWxQb2ludFN0eWxlKHRvb2x0aXBJdGVtKSB7XG4gICAgY29uc3QgbWV0YSA9IHRvb2x0aXBJdGVtLmNoYXJ0LmdldERhdGFzZXRNZXRhKHRvb2x0aXBJdGVtLmRhdGFzZXRJbmRleCk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1ldGEuY29udHJvbGxlci5nZXRTdHlsZSh0b29sdGlwSXRlbS5kYXRhSW5kZXgpO1xuICAgIHJldHVybiB7XG4gICAgICBwb2ludFN0eWxlOiBvcHRpb25zLnBvaW50U3R5bGUsXG4gICAgICByb3RhdGlvbjogb3B0aW9ucy5yb3RhdGlvbixcbiAgICB9O1xuICB9LFxuICBhZnRlckxhYmVsOiBub29wLFxuXG4gIC8vIEFyZ3MgYXJlOiAodG9vbHRpcEl0ZW1zLCBkYXRhKVxuICBhZnRlckJvZHk6IG5vb3AsXG5cbiAgLy8gQXJncyBhcmU6ICh0b29sdGlwSXRlbXMsIGRhdGEpXG4gIGJlZm9yZUZvb3Rlcjogbm9vcCxcbiAgZm9vdGVyOiBub29wLFxuICBhZnRlckZvb3Rlcjogbm9vcFxufTtcblxuLyoqXG4gKiBJbnZva2UgY2FsbGJhY2sgZnJvbSBvYmplY3Qgd2l0aCBjb250ZXh0IGFuZCBhcmd1bWVudHMuXG4gKiBJZiBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgLCB0aGVuIHdpbGwgYmUgaW52b2tlZCBkZWZhdWx0IGNhbGxiYWNrLlxuICogQHBhcmFtIHtSZWNvcmQ8a2V5b2YgdHlwZW9mIGRlZmF1bHRDYWxsYmFja3MsIEZ1bmN0aW9uPn0gY2FsbGJhY2tzXG4gKiBAcGFyYW0ge2tleW9mIHR5cGVvZiBkZWZhdWx0Q2FsbGJhY2tzfSBuYW1lXG4gKiBAcGFyYW0geyp9IGN0eFxuICogQHBhcmFtIHsqfSBhcmdcbiAqIEByZXR1cm5zIHthbnl9XG4gKi9cbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKGNhbGxiYWNrcywgbmFtZSwgY3R4LCBhcmcpIHtcbiAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2tzW25hbWVdLmNhbGwoY3R4LCBhcmcpO1xuXG4gIGlmICh0eXBlb2YgcmVzdWx0ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBkZWZhdWx0Q2FsbGJhY2tzW25hbWVdLmNhbGwoY3R4LCBhcmcpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGNsYXNzIFRvb2x0aXAgZXh0ZW5kcyBFbGVtZW50IHtcblxuICAvKipcbiAgICogQG5hbWVzcGFjZSBDaGFydC5Ub29sdGlwLnBvc2l0aW9uZXJzXG4gICAqL1xuICBzdGF0aWMgcG9zaXRpb25lcnMgPSBwb3NpdGlvbmVycztcblxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5vcGFjaXR5ID0gMDtcbiAgICB0aGlzLl9hY3RpdmUgPSBbXTtcbiAgICB0aGlzLl9ldmVudFBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3NpemUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fY2FjaGVkQW5pbWF0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl90b29sdGlwSXRlbXMgPSBbXTtcbiAgICB0aGlzLiRhbmltYXRpb25zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuJGNvbnRleHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5jaGFydCA9IGNvbmZpZy5jaGFydDtcbiAgICB0aGlzLm9wdGlvbnMgPSBjb25maWcub3B0aW9ucztcbiAgICB0aGlzLmRhdGFQb2ludHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50aXRsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmJlZm9yZUJvZHkgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ib2R5ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuYWZ0ZXJCb2R5ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZm9vdGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMueEFsaWduID0gdW5kZWZpbmVkO1xuICAgIHRoaXMueUFsaWduID0gdW5kZWZpbmVkO1xuICAgIHRoaXMueCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnkgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5oZWlnaHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNhcmV0WCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNhcmV0WSA9IHVuZGVmaW5lZDtcbiAgICAvLyBUT0RPOiBWNCwgbWFrZSB0aGlzIHByaXZhdGUsIHJlbmFtZSB0byBgX2xhYmVsU3R5bGVzYCwgYW5kIGNvbWJpbmUgd2l0aCBgbGFiZWxQb2ludFN0eWxlc2BcbiAgICAvLyBhbmQgYGxhYmVsVGV4dENvbG9yc2AgdG8gY3JlYXRlIGEgc2luZ2xlIHZhcmlhYmxlXG4gICAgdGhpcy5sYWJlbENvbG9ycyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxhYmVsUG9pbnRTdHlsZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sYWJlbFRleHRDb2xvcnMgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpbml0aWFsaXplKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuX2NhY2hlZEFuaW1hdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy4kY29udGV4dCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX3Jlc29sdmVBbmltYXRpb25zKCkge1xuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuX2NhY2hlZEFuaW1hdGlvbnM7XG5cbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zLnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KCkpO1xuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zLmVuYWJsZWQgJiYgY2hhcnQub3B0aW9ucy5hbmltYXRpb24gJiYgb3B0aW9ucy5hbmltYXRpb25zO1xuICAgIGNvbnN0IGFuaW1hdGlvbnMgPSBuZXcgQW5pbWF0aW9ucyh0aGlzLmNoYXJ0LCBvcHRzKTtcbiAgICBpZiAob3B0cy5fY2FjaGVhYmxlKSB7XG4gICAgICB0aGlzLl9jYWNoZWRBbmltYXRpb25zID0gT2JqZWN0LmZyZWV6ZShhbmltYXRpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5pbWF0aW9ucztcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBnZXRDb250ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLiRjb250ZXh0IHx8XG5cdFx0XHQodGhpcy4kY29udGV4dCA9IGNyZWF0ZVRvb2x0aXBDb250ZXh0KHRoaXMuY2hhcnQuZ2V0Q29udGV4dCgpLCB0aGlzLCB0aGlzLl90b29sdGlwSXRlbXMpKTtcbiAgfVxuXG4gIGdldFRpdGxlKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7Y2FsbGJhY2tzfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBiZWZvcmVUaXRsZSA9IGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKGNhbGxiYWNrcywgJ2JlZm9yZVRpdGxlJywgdGhpcywgY29udGV4dCk7XG4gICAgY29uc3QgdGl0bGUgPSBpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhjYWxsYmFja3MsICd0aXRsZScsIHRoaXMsIGNvbnRleHQpO1xuICAgIGNvbnN0IGFmdGVyVGl0bGUgPSBpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhjYWxsYmFja3MsICdhZnRlclRpdGxlJywgdGhpcywgY29udGV4dCk7XG5cbiAgICBsZXQgbGluZXMgPSBbXTtcbiAgICBsaW5lcyA9IHB1c2hPckNvbmNhdChsaW5lcywgc3BsaXROZXdsaW5lcyhiZWZvcmVUaXRsZSkpO1xuICAgIGxpbmVzID0gcHVzaE9yQ29uY2F0KGxpbmVzLCBzcGxpdE5ld2xpbmVzKHRpdGxlKSk7XG4gICAgbGluZXMgPSBwdXNoT3JDb25jYXQobGluZXMsIHNwbGl0TmV3bGluZXMoYWZ0ZXJUaXRsZSkpO1xuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgZ2V0QmVmb3JlQm9keSh0b29sdGlwSXRlbXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZ2V0QmVmb3JlQWZ0ZXJCb2R5TGluZXMoXG4gICAgICBpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhvcHRpb25zLmNhbGxiYWNrcywgJ2JlZm9yZUJvZHknLCB0aGlzLCB0b29sdGlwSXRlbXMpXG4gICAgKTtcbiAgfVxuXG4gIGdldEJvZHkodG9vbHRpcEl0ZW1zLCBvcHRpb25zKSB7XG4gICAgY29uc3Qge2NhbGxiYWNrc30gPSBvcHRpb25zO1xuICAgIGNvbnN0IGJvZHlJdGVtcyA9IFtdO1xuXG4gICAgZWFjaCh0b29sdGlwSXRlbXMsIChjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCBib2R5SXRlbSA9IHtcbiAgICAgICAgYmVmb3JlOiBbXSxcbiAgICAgICAgbGluZXM6IFtdLFxuICAgICAgICBhZnRlcjogW11cbiAgICAgIH07XG4gICAgICBjb25zdCBzY29wZWQgPSBvdmVycmlkZUNhbGxiYWNrcyhjYWxsYmFja3MsIGNvbnRleHQpO1xuICAgICAgcHVzaE9yQ29uY2F0KGJvZHlJdGVtLmJlZm9yZSwgc3BsaXROZXdsaW5lcyhpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhzY29wZWQsICdiZWZvcmVMYWJlbCcsIHRoaXMsIGNvbnRleHQpKSk7XG4gICAgICBwdXNoT3JDb25jYXQoYm9keUl0ZW0ubGluZXMsIGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHNjb3BlZCwgJ2xhYmVsJywgdGhpcywgY29udGV4dCkpO1xuICAgICAgcHVzaE9yQ29uY2F0KGJvZHlJdGVtLmFmdGVyLCBzcGxpdE5ld2xpbmVzKGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHNjb3BlZCwgJ2FmdGVyTGFiZWwnLCB0aGlzLCBjb250ZXh0KSkpO1xuXG4gICAgICBib2R5SXRlbXMucHVzaChib2R5SXRlbSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYm9keUl0ZW1zO1xuICB9XG5cbiAgZ2V0QWZ0ZXJCb2R5KHRvb2x0aXBJdGVtcywgb3B0aW9ucykge1xuICAgIHJldHVybiBnZXRCZWZvcmVBZnRlckJvZHlMaW5lcyhcbiAgICAgIGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKG9wdGlvbnMuY2FsbGJhY2tzLCAnYWZ0ZXJCb2R5JywgdGhpcywgdG9vbHRpcEl0ZW1zKVxuICAgICk7XG4gIH1cblxuICAvLyBHZXQgdGhlIGZvb3RlciBhbmQgYmVmb3JlRm9vdGVyIGFuZCBhZnRlckZvb3RlciBsaW5lc1xuICBnZXRGb290ZXIodG9vbHRpcEl0ZW1zLCBvcHRpb25zKSB7XG4gICAgY29uc3Qge2NhbGxiYWNrc30gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgYmVmb3JlRm9vdGVyID0gaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soY2FsbGJhY2tzLCAnYmVmb3JlRm9vdGVyJywgdGhpcywgdG9vbHRpcEl0ZW1zKTtcbiAgICBjb25zdCBmb290ZXIgPSBpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhjYWxsYmFja3MsICdmb290ZXInLCB0aGlzLCB0b29sdGlwSXRlbXMpO1xuICAgIGNvbnN0IGFmdGVyRm9vdGVyID0gaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soY2FsbGJhY2tzLCAnYWZ0ZXJGb290ZXInLCB0aGlzLCB0b29sdGlwSXRlbXMpO1xuXG4gICAgbGV0IGxpbmVzID0gW107XG4gICAgbGluZXMgPSBwdXNoT3JDb25jYXQobGluZXMsIHNwbGl0TmV3bGluZXMoYmVmb3JlRm9vdGVyKSk7XG4gICAgbGluZXMgPSBwdXNoT3JDb25jYXQobGluZXMsIHNwbGl0TmV3bGluZXMoZm9vdGVyKSk7XG4gICAgbGluZXMgPSBwdXNoT3JDb25jYXQobGluZXMsIHNwbGl0TmV3bGluZXMoYWZ0ZXJGb290ZXIpKTtcblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2NyZWF0ZUl0ZW1zKG9wdGlvbnMpIHtcbiAgICBjb25zdCBhY3RpdmUgPSB0aGlzLl9hY3RpdmU7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuY2hhcnQuZGF0YTtcbiAgICBjb25zdCBsYWJlbENvbG9ycyA9IFtdO1xuICAgIGNvbnN0IGxhYmVsUG9pbnRTdHlsZXMgPSBbXTtcbiAgICBjb25zdCBsYWJlbFRleHRDb2xvcnMgPSBbXTtcbiAgICBsZXQgdG9vbHRpcEl0ZW1zID0gW107XG4gICAgbGV0IGksIGxlbjtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGFjdGl2ZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgdG9vbHRpcEl0ZW1zLnB1c2goY3JlYXRlVG9vbHRpcEl0ZW0odGhpcy5jaGFydCwgYWN0aXZlW2ldKSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHVzZXIgcHJvdmlkZWQgYSBmaWx0ZXIgZnVuY3Rpb24sIHVzZSBpdCB0byBtb2RpZnkgdGhlIHRvb2x0aXAgaXRlbXNcbiAgICBpZiAob3B0aW9ucy5maWx0ZXIpIHtcbiAgICAgIHRvb2x0aXBJdGVtcyA9IHRvb2x0aXBJdGVtcy5maWx0ZXIoKGVsZW1lbnQsIGluZGV4LCBhcnJheSkgPT4gb3B0aW9ucy5maWx0ZXIoZWxlbWVudCwgaW5kZXgsIGFycmF5LCBkYXRhKSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHVzZXIgcHJvdmlkZWQgYSBzb3J0aW5nIGZ1bmN0aW9uLCB1c2UgaXQgdG8gbW9kaWZ5IHRoZSB0b29sdGlwIGl0ZW1zXG4gICAgaWYgKG9wdGlvbnMuaXRlbVNvcnQpIHtcbiAgICAgIHRvb2x0aXBJdGVtcyA9IHRvb2x0aXBJdGVtcy5zb3J0KChhLCBiKSA9PiBvcHRpb25zLml0ZW1Tb3J0KGEsIGIsIGRhdGEpKTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgY29sb3JzIGZvciBib3hlc1xuICAgIGVhY2godG9vbHRpcEl0ZW1zLCAoY29udGV4dCkgPT4ge1xuICAgICAgY29uc3Qgc2NvcGVkID0gb3ZlcnJpZGVDYWxsYmFja3Mob3B0aW9ucy5jYWxsYmFja3MsIGNvbnRleHQpO1xuICAgICAgbGFiZWxDb2xvcnMucHVzaChpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhzY29wZWQsICdsYWJlbENvbG9yJywgdGhpcywgY29udGV4dCkpO1xuICAgICAgbGFiZWxQb2ludFN0eWxlcy5wdXNoKGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHNjb3BlZCwgJ2xhYmVsUG9pbnRTdHlsZScsIHRoaXMsIGNvbnRleHQpKTtcbiAgICAgIGxhYmVsVGV4dENvbG9ycy5wdXNoKGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHNjb3BlZCwgJ2xhYmVsVGV4dENvbG9yJywgdGhpcywgY29udGV4dCkpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5sYWJlbENvbG9ycyA9IGxhYmVsQ29sb3JzO1xuICAgIHRoaXMubGFiZWxQb2ludFN0eWxlcyA9IGxhYmVsUG9pbnRTdHlsZXM7XG4gICAgdGhpcy5sYWJlbFRleHRDb2xvcnMgPSBsYWJlbFRleHRDb2xvcnM7XG4gICAgdGhpcy5kYXRhUG9pbnRzID0gdG9vbHRpcEl0ZW1zO1xuICAgIHJldHVybiB0b29sdGlwSXRlbXM7XG4gIH1cblxuICB1cGRhdGUoY2hhbmdlZCwgcmVwbGF5KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICBjb25zdCBhY3RpdmUgPSB0aGlzLl9hY3RpdmU7XG4gICAgbGV0IHByb3BlcnRpZXM7XG4gICAgbGV0IHRvb2x0aXBJdGVtcyA9IFtdO1xuXG4gICAgaWYgKCFhY3RpdmUubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5vcGFjaXR5ICE9PSAwKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHBvc2l0aW9uZXJzW29wdGlvbnMucG9zaXRpb25dLmNhbGwodGhpcywgYWN0aXZlLCB0aGlzLl9ldmVudFBvc2l0aW9uKTtcbiAgICAgIHRvb2x0aXBJdGVtcyA9IHRoaXMuX2NyZWF0ZUl0ZW1zKG9wdGlvbnMpO1xuXG4gICAgICB0aGlzLnRpdGxlID0gdGhpcy5nZXRUaXRsZSh0b29sdGlwSXRlbXMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5iZWZvcmVCb2R5ID0gdGhpcy5nZXRCZWZvcmVCb2R5KHRvb2x0aXBJdGVtcywgb3B0aW9ucyk7XG4gICAgICB0aGlzLmJvZHkgPSB0aGlzLmdldEJvZHkodG9vbHRpcEl0ZW1zLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuYWZ0ZXJCb2R5ID0gdGhpcy5nZXRBZnRlckJvZHkodG9vbHRpcEl0ZW1zLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuZm9vdGVyID0gdGhpcy5nZXRGb290ZXIodG9vbHRpcEl0ZW1zLCBvcHRpb25zKTtcblxuICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuX3NpemUgPSBnZXRUb29sdGlwU2l6ZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uQW5kU2l6ZSA9IE9iamVjdC5hc3NpZ24oe30sIHBvc2l0aW9uLCBzaXplKTtcbiAgICAgIGNvbnN0IGFsaWdubWVudCA9IGRldGVybWluZUFsaWdubWVudCh0aGlzLmNoYXJ0LCBvcHRpb25zLCBwb3NpdGlvbkFuZFNpemUpO1xuICAgICAgY29uc3QgYmFja2dyb3VuZFBvaW50ID0gZ2V0QmFja2dyb3VuZFBvaW50KG9wdGlvbnMsIHBvc2l0aW9uQW5kU2l6ZSwgYWxpZ25tZW50LCB0aGlzLmNoYXJ0KTtcblxuICAgICAgdGhpcy54QWxpZ24gPSBhbGlnbm1lbnQueEFsaWduO1xuICAgICAgdGhpcy55QWxpZ24gPSBhbGlnbm1lbnQueUFsaWduO1xuXG4gICAgICBwcm9wZXJ0aWVzID0ge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICB4OiBiYWNrZ3JvdW5kUG9pbnQueCxcbiAgICAgICAgeTogYmFja2dyb3VuZFBvaW50LnksXG4gICAgICAgIHdpZHRoOiBzaXplLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHNpemUuaGVpZ2h0LFxuICAgICAgICBjYXJldFg6IHBvc2l0aW9uLngsXG4gICAgICAgIGNhcmV0WTogcG9zaXRpb24ueVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLl90b29sdGlwSXRlbXMgPSB0b29sdGlwSXRlbXM7XG4gICAgdGhpcy4kY29udGV4dCA9IHVuZGVmaW5lZDtcblxuICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICB0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucygpLnVwZGF0ZSh0aGlzLCBwcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlZCAmJiBvcHRpb25zLmV4dGVybmFsKSB7XG4gICAgICBvcHRpb25zLmV4dGVybmFsLmNhbGwodGhpcywge2NoYXJ0OiB0aGlzLmNoYXJ0LCB0b29sdGlwOiB0aGlzLCByZXBsYXl9KTtcbiAgICB9XG4gIH1cblxuICBkcmF3Q2FyZXQodG9vbHRpcFBvaW50LCBjdHgsIHNpemUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjYXJldFBvc2l0aW9uID0gdGhpcy5nZXRDYXJldFBvc2l0aW9uKHRvb2x0aXBQb2ludCwgc2l6ZSwgb3B0aW9ucyk7XG5cbiAgICBjdHgubGluZVRvKGNhcmV0UG9zaXRpb24ueDEsIGNhcmV0UG9zaXRpb24ueTEpO1xuICAgIGN0eC5saW5lVG8oY2FyZXRQb3NpdGlvbi54MiwgY2FyZXRQb3NpdGlvbi55Mik7XG4gICAgY3R4LmxpbmVUbyhjYXJldFBvc2l0aW9uLngzLCBjYXJldFBvc2l0aW9uLnkzKTtcbiAgfVxuXG4gIGdldENhcmV0UG9zaXRpb24odG9vbHRpcFBvaW50LCBzaXplLCBvcHRpb25zKSB7XG4gICAgY29uc3Qge3hBbGlnbiwgeUFsaWdufSA9IHRoaXM7XG4gICAgY29uc3Qge2NhcmV0U2l6ZSwgY29ybmVyUmFkaXVzfSA9IG9wdGlvbnM7XG4gICAgY29uc3Qge3RvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBib3R0b21SaWdodH0gPSB0b1RSQkxDb3JuZXJzKGNvcm5lclJhZGl1cyk7XG4gICAgY29uc3Qge3g6IHB0WCwgeTogcHRZfSA9IHRvb2x0aXBQb2ludDtcbiAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBzaXplO1xuICAgIGxldCB4MSwgeDIsIHgzLCB5MSwgeTIsIHkzO1xuXG4gICAgaWYgKHlBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHkyID0gcHRZICsgKGhlaWdodCAvIDIpO1xuXG4gICAgICBpZiAoeEFsaWduID09PSAnbGVmdCcpIHtcbiAgICAgICAgeDEgPSBwdFg7XG4gICAgICAgIHgyID0geDEgLSBjYXJldFNpemU7XG5cbiAgICAgICAgLy8gTGVmdCBkcmF3cyBib3R0b20gLT4gdG9wLCB0aGlzIHkxIGlzIG9uIHRoZSBib3R0b21cbiAgICAgICAgeTEgPSB5MiArIGNhcmV0U2l6ZTtcbiAgICAgICAgeTMgPSB5MiAtIGNhcmV0U2l6ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHgxID0gcHRYICsgd2lkdGg7XG4gICAgICAgIHgyID0geDEgKyBjYXJldFNpemU7XG5cbiAgICAgICAgLy8gUmlnaHQgZHJhd3MgdG9wIC0+IGJvdHRvbSwgdGh1cyB5MSBpcyBvbiB0aGUgdG9wXG4gICAgICAgIHkxID0geTIgLSBjYXJldFNpemU7XG4gICAgICAgIHkzID0geTIgKyBjYXJldFNpemU7XG4gICAgICB9XG5cbiAgICAgIHgzID0geDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh4QWxpZ24gPT09ICdsZWZ0Jykge1xuICAgICAgICB4MiA9IHB0WCArIE1hdGgubWF4KHRvcExlZnQsIGJvdHRvbUxlZnQpICsgKGNhcmV0U2l6ZSk7XG4gICAgICB9IGVsc2UgaWYgKHhBbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICB4MiA9IHB0WCArIHdpZHRoIC0gTWF0aC5tYXgodG9wUmlnaHQsIGJvdHRvbVJpZ2h0KSAtIGNhcmV0U2l6ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHgyID0gdGhpcy5jYXJldFg7XG4gICAgICB9XG5cbiAgICAgIGlmICh5QWxpZ24gPT09ICd0b3AnKSB7XG4gICAgICAgIHkxID0gcHRZO1xuICAgICAgICB5MiA9IHkxIC0gY2FyZXRTaXplO1xuXG4gICAgICAgIC8vIFRvcCBkcmF3cyBsZWZ0IC0+IHJpZ2h0LCB0aHVzIHgxIGlzIG9uIHRoZSBsZWZ0XG4gICAgICAgIHgxID0geDIgLSBjYXJldFNpemU7XG4gICAgICAgIHgzID0geDIgKyBjYXJldFNpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB5MSA9IHB0WSArIGhlaWdodDtcbiAgICAgICAgeTIgPSB5MSArIGNhcmV0U2l6ZTtcblxuICAgICAgICAvLyBCb3R0b20gZHJhd3MgcmlnaHQgLT4gbGVmdCwgdGh1cyB4MSBpcyBvbiB0aGUgcmlnaHRcbiAgICAgICAgeDEgPSB4MiArIGNhcmV0U2l6ZTtcbiAgICAgICAgeDMgPSB4MiAtIGNhcmV0U2l6ZTtcbiAgICAgIH1cbiAgICAgIHkzID0geTE7XG4gICAgfVxuICAgIHJldHVybiB7eDEsIHgyLCB4MywgeTEsIHkyLCB5M307XG4gIH1cblxuICBkcmF3VGl0bGUocHQsIGN0eCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHRpdGxlID0gdGhpcy50aXRsZTtcbiAgICBjb25zdCBsZW5ndGggPSB0aXRsZS5sZW5ndGg7XG4gICAgbGV0IHRpdGxlRm9udCwgdGl0bGVTcGFjaW5nLCBpO1xuXG4gICAgaWYgKGxlbmd0aCkge1xuICAgICAgY29uc3QgcnRsSGVscGVyID0gZ2V0UnRsQWRhcHRlcihvcHRpb25zLnJ0bCwgdGhpcy54LCB0aGlzLndpZHRoKTtcblxuICAgICAgcHQueCA9IGdldEFsaWduZWRYKHRoaXMsIG9wdGlvbnMudGl0bGVBbGlnbiwgb3B0aW9ucyk7XG5cbiAgICAgIGN0eC50ZXh0QWxpZ24gPSBydGxIZWxwZXIudGV4dEFsaWduKG9wdGlvbnMudGl0bGVBbGlnbik7XG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG5cbiAgICAgIHRpdGxlRm9udCA9IHRvRm9udChvcHRpb25zLnRpdGxlRm9udCk7XG4gICAgICB0aXRsZVNwYWNpbmcgPSBvcHRpb25zLnRpdGxlU3BhY2luZztcblxuICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMudGl0bGVDb2xvcjtcbiAgICAgIGN0eC5mb250ID0gdGl0bGVGb250LnN0cmluZztcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIGN0eC5maWxsVGV4dCh0aXRsZVtpXSwgcnRsSGVscGVyLngocHQueCksIHB0LnkgKyB0aXRsZUZvbnQubGluZUhlaWdodCAvIDIpO1xuICAgICAgICBwdC55ICs9IHRpdGxlRm9udC5saW5lSGVpZ2h0ICsgdGl0bGVTcGFjaW5nOyAvLyBMaW5lIEhlaWdodCBhbmQgc3BhY2luZ1xuXG4gICAgICAgIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgcHQueSArPSBvcHRpb25zLnRpdGxlTWFyZ2luQm90dG9tIC0gdGl0bGVTcGFjaW5nOyAvLyBJZiBMYXN0LCBhZGQgbWFyZ2luLCByZW1vdmUgc3BhY2luZ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZHJhd0NvbG9yQm94KGN0eCwgcHQsIGksIHJ0bEhlbHBlciwgb3B0aW9ucykge1xuICAgIGNvbnN0IGxhYmVsQ29sb3IgPSB0aGlzLmxhYmVsQ29sb3JzW2ldO1xuICAgIGNvbnN0IGxhYmVsUG9pbnRTdHlsZSA9IHRoaXMubGFiZWxQb2ludFN0eWxlc1tpXTtcbiAgICBjb25zdCB7Ym94SGVpZ2h0LCBib3hXaWR0aH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGJvZHlGb250ID0gdG9Gb250KG9wdGlvbnMuYm9keUZvbnQpO1xuICAgIGNvbnN0IGNvbG9yWCA9IGdldEFsaWduZWRYKHRoaXMsICdsZWZ0Jywgb3B0aW9ucyk7XG4gICAgY29uc3QgcnRsQ29sb3JYID0gcnRsSGVscGVyLngoY29sb3JYKTtcbiAgICBjb25zdCB5T2ZmU2V0ID0gYm94SGVpZ2h0IDwgYm9keUZvbnQubGluZUhlaWdodCA/IChib2R5Rm9udC5saW5lSGVpZ2h0IC0gYm94SGVpZ2h0KSAvIDIgOiAwO1xuICAgIGNvbnN0IGNvbG9yWSA9IHB0LnkgKyB5T2ZmU2V0O1xuXG4gICAgaWYgKG9wdGlvbnMudXNlUG9pbnRTdHlsZSkge1xuICAgICAgY29uc3QgZHJhd09wdGlvbnMgPSB7XG4gICAgICAgIHJhZGl1czogTWF0aC5taW4oYm94V2lkdGgsIGJveEhlaWdodCkgLyAyLCAvLyBmaXQgdGhlIGNpcmNsZSBpbiB0aGUgYm94XG4gICAgICAgIHBvaW50U3R5bGU6IGxhYmVsUG9pbnRTdHlsZS5wb2ludFN0eWxlLFxuICAgICAgICByb3RhdGlvbjogbGFiZWxQb2ludFN0eWxlLnJvdGF0aW9uLFxuICAgICAgICBib3JkZXJXaWR0aDogMVxuICAgICAgfTtcbiAgICAgIC8vIFJlY2FsY3VsYXRlIHggYW5kIHkgZm9yIGRyYXdQb2ludCgpIGJlY2F1c2UgaXRzIGV4cGVjdGluZ1xuICAgICAgLy8geCBhbmQgeSB0byBiZSBjZW50ZXIgb2YgZmlndXJlIChpbnN0ZWFkIG9mIHRvcCBsZWZ0KVxuICAgICAgY29uc3QgY2VudGVyWCA9IHJ0bEhlbHBlci5sZWZ0Rm9yTHRyKHJ0bENvbG9yWCwgYm94V2lkdGgpICsgYm94V2lkdGggLyAyO1xuICAgICAgY29uc3QgY2VudGVyWSA9IGNvbG9yWSArIGJveEhlaWdodCAvIDI7XG5cbiAgICAgIC8vIEZpbGwgdGhlIHBvaW50IHdpdGggd2hpdGUgc28gdGhhdCBjb2xvdXJzIG1lcmdlIG5pY2VseSBpZiB0aGUgb3BhY2l0eSBpcyA8IDFcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IG9wdGlvbnMubXVsdGlLZXlCYWNrZ3JvdW5kO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMubXVsdGlLZXlCYWNrZ3JvdW5kO1xuICAgICAgZHJhd1BvaW50KGN0eCwgZHJhd09wdGlvbnMsIGNlbnRlclgsIGNlbnRlclkpO1xuXG4gICAgICAvLyBEcmF3IHRoZSBwb2ludFxuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gbGFiZWxDb2xvci5ib3JkZXJDb2xvcjtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBsYWJlbENvbG9yLmJhY2tncm91bmRDb2xvcjtcbiAgICAgIGRyYXdQb2ludChjdHgsIGRyYXdPcHRpb25zLCBjZW50ZXJYLCBjZW50ZXJZKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQm9yZGVyXG4gICAgICBjdHgubGluZVdpZHRoID0gaXNPYmplY3QobGFiZWxDb2xvci5ib3JkZXJXaWR0aCkgPyBNYXRoLm1heCguLi5PYmplY3QudmFsdWVzKGxhYmVsQ29sb3IuYm9yZGVyV2lkdGgpKSA6IChsYWJlbENvbG9yLmJvcmRlcldpZHRoIHx8IDEpOyAvLyBUT0RPLCB2NCByZW1vdmUgZmFsbGJhY2tcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGxhYmVsQ29sb3IuYm9yZGVyQ29sb3I7XG4gICAgICBjdHguc2V0TGluZURhc2gobGFiZWxDb2xvci5ib3JkZXJEYXNoIHx8IFtdKTtcbiAgICAgIGN0eC5saW5lRGFzaE9mZnNldCA9IGxhYmVsQ29sb3IuYm9yZGVyRGFzaE9mZnNldCB8fCAwO1xuXG4gICAgICAvLyBGaWxsIGEgd2hpdGUgcmVjdCBzbyB0aGF0IGNvbG91cnMgbWVyZ2UgbmljZWx5IGlmIHRoZSBvcGFjaXR5IGlzIDwgMVxuICAgICAgY29uc3Qgb3V0ZXJYID0gcnRsSGVscGVyLmxlZnRGb3JMdHIocnRsQ29sb3JYLCBib3hXaWR0aCk7XG4gICAgICBjb25zdCBpbm5lclggPSBydGxIZWxwZXIubGVmdEZvckx0cihydGxIZWxwZXIueFBsdXMocnRsQ29sb3JYLCAxKSwgYm94V2lkdGggLSAyKTtcbiAgICAgIGNvbnN0IGJvcmRlclJhZGl1cyA9IHRvVFJCTENvcm5lcnMobGFiZWxDb2xvci5ib3JkZXJSYWRpdXMpO1xuXG4gICAgICBpZiAoT2JqZWN0LnZhbHVlcyhib3JkZXJSYWRpdXMpLnNvbWUodiA9PiB2ICE9PSAwKSkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLm11bHRpS2V5QmFja2dyb3VuZDtcbiAgICAgICAgYWRkUm91bmRlZFJlY3RQYXRoKGN0eCwge1xuICAgICAgICAgIHg6IG91dGVyWCxcbiAgICAgICAgICB5OiBjb2xvclksXG4gICAgICAgICAgdzogYm94V2lkdGgsXG4gICAgICAgICAgaDogYm94SGVpZ2h0LFxuICAgICAgICAgIHJhZGl1czogYm9yZGVyUmFkaXVzLFxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIC8vIElubmVyIHNxdWFyZVxuICAgICAgICBjdHguZmlsbFN0eWxlID0gbGFiZWxDb2xvci5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgYWRkUm91bmRlZFJlY3RQYXRoKGN0eCwge1xuICAgICAgICAgIHg6IGlubmVyWCxcbiAgICAgICAgICB5OiBjb2xvclkgKyAxLFxuICAgICAgICAgIHc6IGJveFdpZHRoIC0gMixcbiAgICAgICAgICBoOiBib3hIZWlnaHQgLSAyLFxuICAgICAgICAgIHJhZGl1czogYm9yZGVyUmFkaXVzLFxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vcm1hbCByZWN0XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLm11bHRpS2V5QmFja2dyb3VuZDtcbiAgICAgICAgY3R4LmZpbGxSZWN0KG91dGVyWCwgY29sb3JZLCBib3hXaWR0aCwgYm94SGVpZ2h0KTtcbiAgICAgICAgY3R4LnN0cm9rZVJlY3Qob3V0ZXJYLCBjb2xvclksIGJveFdpZHRoLCBib3hIZWlnaHQpO1xuICAgICAgICAvLyBJbm5lciBzcXVhcmVcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGxhYmVsQ29sb3IuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICBjdHguZmlsbFJlY3QoaW5uZXJYLCBjb2xvclkgKyAxLCBib3hXaWR0aCAtIDIsIGJveEhlaWdodCAtIDIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlc3RvcmUgZmlsbFN0eWxlXG4gICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMubGFiZWxUZXh0Q29sb3JzW2ldO1xuICB9XG5cbiAgZHJhd0JvZHkocHQsIGN0eCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHtib2R5fSA9IHRoaXM7XG4gICAgY29uc3Qge2JvZHlTcGFjaW5nLCBib2R5QWxpZ24sIGRpc3BsYXlDb2xvcnMsIGJveEhlaWdodCwgYm94V2lkdGgsIGJveFBhZGRpbmd9ID0gb3B0aW9ucztcbiAgICBjb25zdCBib2R5Rm9udCA9IHRvRm9udChvcHRpb25zLmJvZHlGb250KTtcbiAgICBsZXQgYm9keUxpbmVIZWlnaHQgPSBib2R5Rm9udC5saW5lSGVpZ2h0O1xuICAgIGxldCB4TGluZVBhZGRpbmcgPSAwO1xuXG4gICAgY29uc3QgcnRsSGVscGVyID0gZ2V0UnRsQWRhcHRlcihvcHRpb25zLnJ0bCwgdGhpcy54LCB0aGlzLndpZHRoKTtcblxuICAgIGNvbnN0IGZpbGxMaW5lT2ZUZXh0ID0gZnVuY3Rpb24obGluZSkge1xuICAgICAgY3R4LmZpbGxUZXh0KGxpbmUsIHJ0bEhlbHBlci54KHB0LnggKyB4TGluZVBhZGRpbmcpLCBwdC55ICsgYm9keUxpbmVIZWlnaHQgLyAyKTtcbiAgICAgIHB0LnkgKz0gYm9keUxpbmVIZWlnaHQgKyBib2R5U3BhY2luZztcbiAgICB9O1xuXG4gICAgY29uc3QgYm9keUFsaWduRm9yQ2FsY3VsYXRpb24gPSBydGxIZWxwZXIudGV4dEFsaWduKGJvZHlBbGlnbik7XG4gICAgbGV0IGJvZHlJdGVtLCB0ZXh0Q29sb3IsIGxpbmVzLCBpLCBqLCBpbGVuLCBqbGVuO1xuXG4gICAgY3R4LnRleHRBbGlnbiA9IGJvZHlBbGlnbjtcbiAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgY3R4LmZvbnQgPSBib2R5Rm9udC5zdHJpbmc7XG5cbiAgICBwdC54ID0gZ2V0QWxpZ25lZFgodGhpcywgYm9keUFsaWduRm9yQ2FsY3VsYXRpb24sIG9wdGlvbnMpO1xuXG4gICAgLy8gQmVmb3JlIGJvZHkgbGluZXNcbiAgICBjdHguZmlsbFN0eWxlID0gb3B0aW9ucy5ib2R5Q29sb3I7XG4gICAgZWFjaCh0aGlzLmJlZm9yZUJvZHksIGZpbGxMaW5lT2ZUZXh0KTtcblxuICAgIHhMaW5lUGFkZGluZyA9IGRpc3BsYXlDb2xvcnMgJiYgYm9keUFsaWduRm9yQ2FsY3VsYXRpb24gIT09ICdyaWdodCdcbiAgICAgID8gYm9keUFsaWduID09PSAnY2VudGVyJyA/IChib3hXaWR0aCAvIDIgKyBib3hQYWRkaW5nKSA6IChib3hXaWR0aCArIDIgKyBib3hQYWRkaW5nKVxuICAgICAgOiAwO1xuXG4gICAgLy8gRHJhdyBib2R5IGxpbmVzIG5vd1xuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBib2R5Lmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgYm9keUl0ZW0gPSBib2R5W2ldO1xuICAgICAgdGV4dENvbG9yID0gdGhpcy5sYWJlbFRleHRDb2xvcnNbaV07XG5cbiAgICAgIGN0eC5maWxsU3R5bGUgPSB0ZXh0Q29sb3I7XG4gICAgICBlYWNoKGJvZHlJdGVtLmJlZm9yZSwgZmlsbExpbmVPZlRleHQpO1xuXG4gICAgICBsaW5lcyA9IGJvZHlJdGVtLmxpbmVzO1xuICAgICAgLy8gRHJhdyBMZWdlbmQtbGlrZSBib3hlcyBpZiBuZWVkZWRcbiAgICAgIGlmIChkaXNwbGF5Q29sb3JzICYmIGxpbmVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9kcmF3Q29sb3JCb3goY3R4LCBwdCwgaSwgcnRsSGVscGVyLCBvcHRpb25zKTtcbiAgICAgICAgYm9keUxpbmVIZWlnaHQgPSBNYXRoLm1heChib2R5Rm9udC5saW5lSGVpZ2h0LCBib3hIZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGogPSAwLCBqbGVuID0gbGluZXMubGVuZ3RoOyBqIDwgamxlbjsgKytqKSB7XG4gICAgICAgIGZpbGxMaW5lT2ZUZXh0KGxpbmVzW2pdKTtcbiAgICAgICAgLy8gUmVzZXQgZm9yIGFueSBsaW5lcyB0aGF0IGRvbid0IGluY2x1ZGUgY29sb3Jib3hcbiAgICAgICAgYm9keUxpbmVIZWlnaHQgPSBib2R5Rm9udC5saW5lSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBlYWNoKGJvZHlJdGVtLmFmdGVyLCBmaWxsTGluZU9mVGV4dCk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgYmFjayB0byAwIGZvciBhZnRlciBib2R5XG4gICAgeExpbmVQYWRkaW5nID0gMDtcbiAgICBib2R5TGluZUhlaWdodCA9IGJvZHlGb250LmxpbmVIZWlnaHQ7XG5cbiAgICAvLyBBZnRlciBib2R5IGxpbmVzXG4gICAgZWFjaCh0aGlzLmFmdGVyQm9keSwgZmlsbExpbmVPZlRleHQpO1xuICAgIHB0LnkgLT0gYm9keVNwYWNpbmc7IC8vIFJlbW92ZSBsYXN0IGJvZHkgc3BhY2luZ1xuICB9XG5cbiAgZHJhd0Zvb3RlcihwdCwgY3R4LCBvcHRpb25zKSB7XG4gICAgY29uc3QgZm9vdGVyID0gdGhpcy5mb290ZXI7XG4gICAgY29uc3QgbGVuZ3RoID0gZm9vdGVyLmxlbmd0aDtcbiAgICBsZXQgZm9vdGVyRm9udCwgaTtcblxuICAgIGlmIChsZW5ndGgpIHtcbiAgICAgIGNvbnN0IHJ0bEhlbHBlciA9IGdldFJ0bEFkYXB0ZXIob3B0aW9ucy5ydGwsIHRoaXMueCwgdGhpcy53aWR0aCk7XG5cbiAgICAgIHB0LnggPSBnZXRBbGlnbmVkWCh0aGlzLCBvcHRpb25zLmZvb3RlckFsaWduLCBvcHRpb25zKTtcbiAgICAgIHB0LnkgKz0gb3B0aW9ucy5mb290ZXJNYXJnaW5Ub3A7XG5cbiAgICAgIGN0eC50ZXh0QWxpZ24gPSBydGxIZWxwZXIudGV4dEFsaWduKG9wdGlvbnMuZm9vdGVyQWxpZ24pO1xuICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuXG4gICAgICBmb290ZXJGb250ID0gdG9Gb250KG9wdGlvbnMuZm9vdGVyRm9udCk7XG5cbiAgICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLmZvb3RlckNvbG9yO1xuICAgICAgY3R4LmZvbnQgPSBmb290ZXJGb250LnN0cmluZztcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIGN0eC5maWxsVGV4dChmb290ZXJbaV0sIHJ0bEhlbHBlci54KHB0LngpLCBwdC55ICsgZm9vdGVyRm9udC5saW5lSGVpZ2h0IC8gMik7XG4gICAgICAgIHB0LnkgKz0gZm9vdGVyRm9udC5saW5lSGVpZ2h0ICsgb3B0aW9ucy5mb290ZXJTcGFjaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRyYXdCYWNrZ3JvdW5kKHB0LCBjdHgsIHRvb2x0aXBTaXplLCBvcHRpb25zKSB7XG4gICAgY29uc3Qge3hBbGlnbiwgeUFsaWdufSA9IHRoaXM7XG4gICAgY29uc3Qge3gsIHl9ID0gcHQ7XG4gICAgY29uc3Qge3dpZHRoLCBoZWlnaHR9ID0gdG9vbHRpcFNpemU7XG4gICAgY29uc3Qge3RvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBib3R0b21SaWdodH0gPSB0b1RSQkxDb3JuZXJzKG9wdGlvbnMuY29ybmVyUmFkaXVzKTtcblxuICAgIGN0eC5maWxsU3R5bGUgPSBvcHRpb25zLmJhY2tncm91bmRDb2xvcjtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSBvcHRpb25zLmJvcmRlckNvbG9yO1xuICAgIGN0eC5saW5lV2lkdGggPSBvcHRpb25zLmJvcmRlcldpZHRoO1xuXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oeCArIHRvcExlZnQsIHkpO1xuICAgIGlmICh5QWxpZ24gPT09ICd0b3AnKSB7XG4gICAgICB0aGlzLmRyYXdDYXJldChwdCwgY3R4LCB0b29sdGlwU2l6ZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGN0eC5saW5lVG8oeCArIHdpZHRoIC0gdG9wUmlnaHQsIHkpO1xuICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSwgeCArIHdpZHRoLCB5ICsgdG9wUmlnaHQpO1xuICAgIGlmICh5QWxpZ24gPT09ICdjZW50ZXInICYmIHhBbGlnbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgdGhpcy5kcmF3Q2FyZXQocHQsIGN0eCwgdG9vbHRpcFNpemUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjdHgubGluZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCAtIGJvdHRvbVJpZ2h0KTtcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQsIHggKyB3aWR0aCAtIGJvdHRvbVJpZ2h0LCB5ICsgaGVpZ2h0KTtcbiAgICBpZiAoeUFsaWduID09PSAnYm90dG9tJykge1xuICAgICAgdGhpcy5kcmF3Q2FyZXQocHQsIGN0eCwgdG9vbHRpcFNpemUsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjdHgubGluZVRvKHggKyBib3R0b21MZWZ0LCB5ICsgaGVpZ2h0KTtcbiAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh4LCB5ICsgaGVpZ2h0LCB4LCB5ICsgaGVpZ2h0IC0gYm90dG9tTGVmdCk7XG4gICAgaWYgKHlBbGlnbiA9PT0gJ2NlbnRlcicgJiYgeEFsaWduID09PSAnbGVmdCcpIHtcbiAgICAgIHRoaXMuZHJhd0NhcmV0KHB0LCBjdHgsIHRvb2x0aXBTaXplLCBvcHRpb25zKTtcbiAgICB9XG4gICAgY3R4LmxpbmVUbyh4LCB5ICsgdG9wTGVmdCk7XG4gICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSwgeCArIHRvcExlZnQsIHkpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcblxuICAgIGN0eC5maWxsKCk7XG5cbiAgICBpZiAob3B0aW9ucy5ib3JkZXJXaWR0aCA+IDApIHtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogVXBkYXRlIHgveSBhbmltYXRpb24gdGFyZ2V0cyB3aGVuIF9hY3RpdmUgZWxlbWVudHMgYXJlIGFuaW1hdGluZyB0b29cblx0ICogQHByaXZhdGVcblx0ICovXG4gIF91cGRhdGVBbmltYXRpb25UYXJnZXQob3B0aW9ucykge1xuICAgIGNvbnN0IGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICBjb25zdCBhbmltcyA9IHRoaXMuJGFuaW1hdGlvbnM7XG4gICAgY29uc3QgYW5pbVggPSBhbmltcyAmJiBhbmltcy54O1xuICAgIGNvbnN0IGFuaW1ZID0gYW5pbXMgJiYgYW5pbXMueTtcbiAgICBpZiAoYW5pbVggfHwgYW5pbVkpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gcG9zaXRpb25lcnNbb3B0aW9ucy5wb3NpdGlvbl0uY2FsbCh0aGlzLCB0aGlzLl9hY3RpdmUsIHRoaXMuX2V2ZW50UG9zaXRpb24pO1xuICAgICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzaXplID0gdGhpcy5fc2l6ZSA9IGdldFRvb2x0aXBTaXplKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgY29uc3QgcG9zaXRpb25BbmRTaXplID0gT2JqZWN0LmFzc2lnbih7fSwgcG9zaXRpb24sIHRoaXMuX3NpemUpO1xuICAgICAgY29uc3QgYWxpZ25tZW50ID0gZGV0ZXJtaW5lQWxpZ25tZW50KGNoYXJ0LCBvcHRpb25zLCBwb3NpdGlvbkFuZFNpemUpO1xuICAgICAgY29uc3QgcG9pbnQgPSBnZXRCYWNrZ3JvdW5kUG9pbnQob3B0aW9ucywgcG9zaXRpb25BbmRTaXplLCBhbGlnbm1lbnQsIGNoYXJ0KTtcbiAgICAgIGlmIChhbmltWC5fdG8gIT09IHBvaW50LnggfHwgYW5pbVkuX3RvICE9PSBwb2ludC55KSB7XG4gICAgICAgIHRoaXMueEFsaWduID0gYWxpZ25tZW50LnhBbGlnbjtcbiAgICAgICAgdGhpcy55QWxpZ24gPSBhbGlnbm1lbnQueUFsaWduO1xuICAgICAgICB0aGlzLndpZHRoID0gc2l6ZS53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBzaXplLmhlaWdodDtcbiAgICAgICAgdGhpcy5jYXJldFggPSBwb3NpdGlvbi54O1xuICAgICAgICB0aGlzLmNhcmV0WSA9IHBvc2l0aW9uLnk7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVBbmltYXRpb25zKCkudXBkYXRlKHRoaXMsIHBvaW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIHRoZSB0b29sdGlwIHdpbGwgZHJhdyBhbnl0aGluZ1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdG9vbHRpcCB3aWxsIHJlbmRlclxuICAgKi9cbiAgX3dpbGxSZW5kZXIoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5vcGFjaXR5O1xuICB9XG5cbiAgZHJhdyhjdHgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zLnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KCkpO1xuICAgIGxldCBvcGFjaXR5ID0gdGhpcy5vcGFjaXR5O1xuXG4gICAgaWYgKCFvcGFjaXR5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdXBkYXRlQW5pbWF0aW9uVGFyZ2V0KG9wdGlvbnMpO1xuXG4gICAgY29uc3QgdG9vbHRpcFNpemUgPSB7XG4gICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcbiAgICB9O1xuICAgIGNvbnN0IHB0ID0ge1xuICAgICAgeDogdGhpcy54LFxuICAgICAgeTogdGhpcy55XG4gICAgfTtcblxuICAgIC8vIElFMTEvRWRnZSBkb2VzIG5vdCBsaWtlIHZlcnkgc21hbGwgb3BhY2l0aWVzLCBzbyBzbmFwIHRvIDBcbiAgICBvcGFjaXR5ID0gTWF0aC5hYnMob3BhY2l0eSkgPCAxZS0zID8gMCA6IG9wYWNpdHk7XG5cbiAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKG9wdGlvbnMucGFkZGluZyk7XG5cbiAgICAvLyBUcnV0aHkvZmFsc2V5IHZhbHVlIGZvciBlbXB0eSB0b29sdGlwXG4gICAgY29uc3QgaGFzVG9vbHRpcENvbnRlbnQgPSB0aGlzLnRpdGxlLmxlbmd0aCB8fCB0aGlzLmJlZm9yZUJvZHkubGVuZ3RoIHx8IHRoaXMuYm9keS5sZW5ndGggfHwgdGhpcy5hZnRlckJvZHkubGVuZ3RoIHx8IHRoaXMuZm9vdGVyLmxlbmd0aDtcblxuICAgIGlmIChvcHRpb25zLmVuYWJsZWQgJiYgaGFzVG9vbHRpcENvbnRlbnQpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHguZ2xvYmFsQWxwaGEgPSBvcGFjaXR5O1xuXG4gICAgICAvLyBEcmF3IEJhY2tncm91bmRcbiAgICAgIHRoaXMuZHJhd0JhY2tncm91bmQocHQsIGN0eCwgdG9vbHRpcFNpemUsIG9wdGlvbnMpO1xuXG4gICAgICBvdmVycmlkZVRleHREaXJlY3Rpb24oY3R4LCBvcHRpb25zLnRleHREaXJlY3Rpb24pO1xuXG4gICAgICBwdC55ICs9IHBhZGRpbmcudG9wO1xuXG4gICAgICAvLyBUaXRsZXNcbiAgICAgIHRoaXMuZHJhd1RpdGxlKHB0LCBjdHgsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBCb2R5XG4gICAgICB0aGlzLmRyYXdCb2R5KHB0LCBjdHgsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBGb290ZXJcbiAgICAgIHRoaXMuZHJhd0Zvb3RlcihwdCwgY3R4LCBvcHRpb25zKTtcblxuICAgICAgcmVzdG9yZVRleHREaXJlY3Rpb24oY3R4LCBvcHRpb25zLnRleHREaXJlY3Rpb24pO1xuXG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBHZXQgYWN0aXZlIGVsZW1lbnRzIGluIHRoZSB0b29sdGlwXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgZWxlbWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIHRoZSB0b29sdGlwXG5cdCAqL1xuICBnZXRBY3RpdmVFbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlIHx8IFtdO1xuICB9XG5cbiAgLyoqXG5cdCAqIFNldCBhY3RpdmUgZWxlbWVudHMgaW4gdGhlIHRvb2x0aXBcblx0ICogQHBhcmFtIHthcnJheX0gYWN0aXZlRWxlbWVudHMgQXJyYXkgb2YgYWN0aXZlIGRhdGFzZXRJbmRleC9pbmRleCBwYWlycy5cblx0ICogQHBhcmFtIHtvYmplY3R9IGV2ZW50UG9zaXRpb24gU3ludGhldGljIGV2ZW50IHBvc2l0aW9uIHVzZWQgaW4gcG9zaXRpb25pbmdcblx0ICovXG4gIHNldEFjdGl2ZUVsZW1lbnRzKGFjdGl2ZUVsZW1lbnRzLCBldmVudFBvc2l0aW9uKSB7XG4gICAgY29uc3QgbGFzdEFjdGl2ZSA9IHRoaXMuX2FjdGl2ZTtcbiAgICBjb25zdCBhY3RpdmUgPSBhY3RpdmVFbGVtZW50cy5tYXAoKHtkYXRhc2V0SW5kZXgsIGluZGV4fSkgPT4ge1xuICAgICAgY29uc3QgbWV0YSA9IHRoaXMuY2hhcnQuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KTtcblxuICAgICAgaWYgKCFtZXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgYSBkYXRhc2V0IGF0IGluZGV4ICcgKyBkYXRhc2V0SW5kZXgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhc2V0SW5kZXgsXG4gICAgICAgIGVsZW1lbnQ6IG1ldGEuZGF0YVtpbmRleF0sXG4gICAgICAgIGluZGV4LFxuICAgICAgfTtcbiAgICB9KTtcbiAgICBjb25zdCBjaGFuZ2VkID0gIV9lbGVtZW50c0VxdWFsKGxhc3RBY3RpdmUsIGFjdGl2ZSk7XG4gICAgY29uc3QgcG9zaXRpb25DaGFuZ2VkID0gdGhpcy5fcG9zaXRpb25DaGFuZ2VkKGFjdGl2ZSwgZXZlbnRQb3NpdGlvbik7XG5cbiAgICBpZiAoY2hhbmdlZCB8fCBwb3NpdGlvbkNoYW5nZWQpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgIHRoaXMuX2V2ZW50UG9zaXRpb24gPSBldmVudFBvc2l0aW9uO1xuICAgICAgdGhpcy5faWdub3JlUmVwbGF5RXZlbnRzID0gdHJ1ZTtcbiAgICAgIHRoaXMudXBkYXRlKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBIYW5kbGUgYW4gZXZlbnRcblx0ICogQHBhcmFtIHtDaGFydEV2ZW50fSBlIC0gVGhlIGV2ZW50IHRvIGhhbmRsZVxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtyZXBsYXldIC0gVGhpcyBpcyBhIHJlcGxheWVkIGV2ZW50IChmcm9tIHVwZGF0ZSlcblx0ICogQHBhcmFtIHtib29sZWFufSBbaW5DaGFydEFyZWFdIC0gVGhlIGV2ZW50IGlzIGluc2lkZSBjaGFydEFyZWFcblx0ICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgdGhlIHRvb2x0aXAgY2hhbmdlZFxuXHQgKi9cbiAgaGFuZGxlRXZlbnQoZSwgcmVwbGF5LCBpbkNoYXJ0QXJlYSA9IHRydWUpIHtcbiAgICBpZiAocmVwbGF5ICYmIHRoaXMuX2lnbm9yZVJlcGxheUV2ZW50cykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9pZ25vcmVSZXBsYXlFdmVudHMgPSBmYWxzZTtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgbGFzdEFjdGl2ZSA9IHRoaXMuX2FjdGl2ZSB8fCBbXTtcbiAgICBjb25zdCBhY3RpdmUgPSB0aGlzLl9nZXRBY3RpdmVFbGVtZW50cyhlLCBsYXN0QWN0aXZlLCByZXBsYXksIGluQ2hhcnRBcmVhKTtcblxuICAgIC8vIFdoZW4gdGhlcmUgYXJlIG11bHRpcGxlIGl0ZW1zIHNob3duLCBidXQgdGhlIHRvb2x0aXAgcG9zaXRpb24gaXMgbmVhcmVzdCBtb2RlXG4gICAgLy8gYW4gdXBkYXRlIG1heSBuZWVkIHRvIGJlIG1hZGUgYmVjYXVzZSBvdXIgcG9zaXRpb24gbWF5IGhhdmUgY2hhbmdlZCBldmVuIHRob3VnaFxuICAgIC8vIHRoZSBpdGVtcyBhcmUgdGhlIHNhbWUgYXMgYmVmb3JlLlxuICAgIGNvbnN0IHBvc2l0aW9uQ2hhbmdlZCA9IHRoaXMuX3Bvc2l0aW9uQ2hhbmdlZChhY3RpdmUsIGUpO1xuXG4gICAgLy8gUmVtZW1iZXIgTGFzdCBBY3RpdmVzXG4gICAgY29uc3QgY2hhbmdlZCA9IHJlcGxheSB8fCAhX2VsZW1lbnRzRXF1YWwoYWN0aXZlLCBsYXN0QWN0aXZlKSB8fCBwb3NpdGlvbkNoYW5nZWQ7XG5cbiAgICAvLyBPbmx5IGhhbmRsZSB0YXJnZXQgZXZlbnQgb24gdG9vbHRpcCBjaGFuZ2VcbiAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgdGhpcy5fYWN0aXZlID0gYWN0aXZlO1xuXG4gICAgICBpZiAob3B0aW9ucy5lbmFibGVkIHx8IG9wdGlvbnMuZXh0ZXJuYWwpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRQb3NpdGlvbiA9IHtcbiAgICAgICAgICB4OiBlLngsXG4gICAgICAgICAgeTogZS55XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy51cGRhdGUodHJ1ZSwgcmVwbGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlZDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBIZWxwZXIgZm9yIGRldGVybWluaW5nIHRoZSBhY3RpdmUgZWxlbWVudHMgZm9yIGV2ZW50XG5cdCAqIEBwYXJhbSB7Q2hhcnRFdmVudH0gZSAtIFRoZSBldmVudCB0byBoYW5kbGVcblx0ICogQHBhcmFtIHtJbnRlcmFjdGlvbkl0ZW1bXX0gbGFzdEFjdGl2ZSAtIFByZXZpb3VzbHkgYWN0aXZlIGVsZW1lbnRzXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlcGxheV0gLSBUaGlzIGlzIGEgcmVwbGF5ZWQgZXZlbnQgKGZyb20gdXBkYXRlKVxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtpbkNoYXJ0QXJlYV0gLSBUaGUgZXZlbnQgaXMgaW5zaWRlIGNoYXJ0QXJlYVxuXHQgKiBAcmV0dXJucyB7SW50ZXJhY3Rpb25JdGVtW119IC0gQWN0aXZlIGVsZW1lbnRzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0QWN0aXZlRWxlbWVudHMoZSwgbGFzdEFjdGl2ZSwgcmVwbGF5LCBpbkNoYXJ0QXJlYSkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBpZiAoZS50eXBlID09PSAnbW91c2VvdXQnKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgaWYgKCFpbkNoYXJ0QXJlYSkge1xuICAgICAgLy8gTGV0IHVzZXIgY29udHJvbCB0aGUgYWN0aXZlIGVsZW1lbnRzIG91dHNpZGUgY2hhcnRBcmVhLiBFZy4gdXNpbmcgTGVnZW5kLlxuICAgICAgcmV0dXJuIGxhc3RBY3RpdmU7XG4gICAgfVxuXG4gICAgLy8gRmluZCBBY3RpdmUgRWxlbWVudHMgZm9yIHRvb2x0aXBzXG4gICAgY29uc3QgYWN0aXZlID0gdGhpcy5jaGFydC5nZXRFbGVtZW50c0F0RXZlbnRGb3JNb2RlKGUsIG9wdGlvbnMubW9kZSwgb3B0aW9ucywgcmVwbGF5KTtcblxuICAgIGlmIChvcHRpb25zLnJldmVyc2UpIHtcbiAgICAgIGFjdGl2ZS5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjdGl2ZTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgdGhlIGFjdGl2ZSBlbGVtZW50cyArIGV2ZW50IGNvbWJpbmF0aW9uIGNoYW5nZXMgdGhlXG5cdCAqIHRvb2x0aXAgcG9zaXRpb25cblx0ICogQHBhcmFtIHthcnJheX0gYWN0aXZlIC0gQWN0aXZlIGVsZW1lbnRzXG5cdCAqIEBwYXJhbSB7Q2hhcnRFdmVudH0gZSAtIEV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSBwb3NpdGlvbiBjaGFuZ2Vcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBvc2l0aW9uIGhhcyBjaGFuZ2VkXG5cdCAqL1xuICBfcG9zaXRpb25DaGFuZ2VkKGFjdGl2ZSwgZSkge1xuICAgIGNvbnN0IHtjYXJldFgsIGNhcmV0WSwgb3B0aW9uc30gPSB0aGlzO1xuICAgIGNvbnN0IHBvc2l0aW9uID0gcG9zaXRpb25lcnNbb3B0aW9ucy5wb3NpdGlvbl0uY2FsbCh0aGlzLCBhY3RpdmUsIGUpO1xuICAgIHJldHVybiBwb3NpdGlvbiAhPT0gZmFsc2UgJiYgKGNhcmV0WCAhPT0gcG9zaXRpb24ueCB8fCBjYXJldFkgIT09IHBvc2l0aW9uLnkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaWQ6ICd0b29sdGlwJyxcbiAgX2VsZW1lbnQ6IFRvb2x0aXAsXG4gIHBvc2l0aW9uZXJzLFxuXG4gIGFmdGVySW5pdChjaGFydCwgX2FyZ3MsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgY2hhcnQudG9vbHRpcCA9IG5ldyBUb29sdGlwKHtjaGFydCwgb3B0aW9uc30pO1xuICAgIH1cbiAgfSxcblxuICBiZWZvcmVVcGRhdGUoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgaWYgKGNoYXJ0LnRvb2x0aXApIHtcbiAgICAgIGNoYXJ0LnRvb2x0aXAuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXQoY2hhcnQsIF9hcmdzLCBvcHRpb25zKSB7XG4gICAgaWYgKGNoYXJ0LnRvb2x0aXApIHtcbiAgICAgIGNoYXJ0LnRvb2x0aXAuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG4gIH0sXG5cbiAgYWZ0ZXJEcmF3KGNoYXJ0KSB7XG4gICAgY29uc3QgdG9vbHRpcCA9IGNoYXJ0LnRvb2x0aXA7XG5cbiAgICBpZiAodG9vbHRpcCAmJiB0b29sdGlwLl93aWxsUmVuZGVyKCkpIHtcbiAgICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICAgIHRvb2x0aXBcbiAgICAgIH07XG5cbiAgICAgIGlmIChjaGFydC5ub3RpZnlQbHVnaW5zKCdiZWZvcmVUb29sdGlwRHJhdycsIHsuLi5hcmdzLCBjYW5jZWxhYmxlOiB0cnVlfSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdG9vbHRpcC5kcmF3KGNoYXJ0LmN0eCk7XG5cbiAgICAgIGNoYXJ0Lm5vdGlmeVBsdWdpbnMoJ2FmdGVyVG9vbHRpcERyYXcnLCBhcmdzKTtcbiAgICB9XG4gIH0sXG5cbiAgYWZ0ZXJFdmVudChjaGFydCwgYXJncykge1xuICAgIGlmIChjaGFydC50b29sdGlwKSB7XG4gICAgICAvLyBJZiB0aGUgZXZlbnQgaXMgcmVwbGF5ZWQgZnJvbSBgdXBkYXRlYCwgd2Ugc2hvdWxkIGV2YWx1YXRlIHdpdGggdGhlIGZpbmFsIHBvc2l0aW9ucy5cbiAgICAgIGNvbnN0IHVzZUZpbmFsUG9zaXRpb24gPSBhcmdzLnJlcGxheTtcbiAgICAgIGlmIChjaGFydC50b29sdGlwLmhhbmRsZUV2ZW50KGFyZ3MuZXZlbnQsIHVzZUZpbmFsUG9zaXRpb24sIGFyZ3MuaW5DaGFydEFyZWEpKSB7XG4gICAgICAgIC8vIG5vdGlmeSBjaGFydCBhYm91dCB0aGUgY2hhbmdlLCBzbyBpdCB3aWxsIHJlbmRlclxuICAgICAgICBhcmdzLmNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBkZWZhdWx0czoge1xuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgZXh0ZXJuYWw6IG51bGwsXG4gICAgcG9zaXRpb246ICdhdmVyYWdlJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsMCwwLDAuOCknLFxuICAgIHRpdGxlQ29sb3I6ICcjZmZmJyxcbiAgICB0aXRsZUZvbnQ6IHtcbiAgICAgIHdlaWdodDogJ2JvbGQnLFxuICAgIH0sXG4gICAgdGl0bGVTcGFjaW5nOiAyLFxuICAgIHRpdGxlTWFyZ2luQm90dG9tOiA2LFxuICAgIHRpdGxlQWxpZ246ICdsZWZ0JyxcbiAgICBib2R5Q29sb3I6ICcjZmZmJyxcbiAgICBib2R5U3BhY2luZzogMixcbiAgICBib2R5Rm9udDoge1xuICAgIH0sXG4gICAgYm9keUFsaWduOiAnbGVmdCcsXG4gICAgZm9vdGVyQ29sb3I6ICcjZmZmJyxcbiAgICBmb290ZXJTcGFjaW5nOiAyLFxuICAgIGZvb3Rlck1hcmdpblRvcDogNixcbiAgICBmb290ZXJGb250OiB7XG4gICAgICB3ZWlnaHQ6ICdib2xkJyxcbiAgICB9LFxuICAgIGZvb3RlckFsaWduOiAnbGVmdCcsXG4gICAgcGFkZGluZzogNixcbiAgICBjYXJldFBhZGRpbmc6IDIsXG4gICAgY2FyZXRTaXplOiA1LFxuICAgIGNvcm5lclJhZGl1czogNixcbiAgICBib3hIZWlnaHQ6IChjdHgsIG9wdHMpID0+IG9wdHMuYm9keUZvbnQuc2l6ZSxcbiAgICBib3hXaWR0aDogKGN0eCwgb3B0cykgPT4gb3B0cy5ib2R5Rm9udC5zaXplLFxuICAgIG11bHRpS2V5QmFja2dyb3VuZDogJyNmZmYnLFxuICAgIGRpc3BsYXlDb2xvcnM6IHRydWUsXG4gICAgYm94UGFkZGluZzogMCxcbiAgICBib3JkZXJDb2xvcjogJ3JnYmEoMCwwLDAsMCknLFxuICAgIGJvcmRlcldpZHRoOiAwLFxuICAgIGFuaW1hdGlvbjoge1xuICAgICAgZHVyYXRpb246IDQwMCxcbiAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFydCcsXG4gICAgfSxcbiAgICBhbmltYXRpb25zOiB7XG4gICAgICBudW1iZXJzOiB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbJ3gnLCAneScsICd3aWR0aCcsICdoZWlnaHQnLCAnY2FyZXRYJywgJ2NhcmV0WSddLFxuICAgICAgfSxcbiAgICAgIG9wYWNpdHk6IHtcbiAgICAgICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICAgICAgZHVyYXRpb246IDIwMFxuICAgICAgfVxuICAgIH0sXG4gICAgY2FsbGJhY2tzOiBkZWZhdWx0Q2FsbGJhY2tzXG4gIH0sXG5cbiAgZGVmYXVsdFJvdXRlczoge1xuICAgIGJvZHlGb250OiAnZm9udCcsXG4gICAgZm9vdGVyRm9udDogJ2ZvbnQnLFxuICAgIHRpdGxlRm9udDogJ2ZvbnQnXG4gIH0sXG5cbiAgZGVzY3JpcHRvcnM6IHtcbiAgICBfc2NyaXB0YWJsZTogKG5hbWUpID0+IG5hbWUgIT09ICdmaWx0ZXInICYmIG5hbWUgIT09ICdpdGVtU29ydCcgJiYgbmFtZSAhPT0gJ2V4dGVybmFsJyxcbiAgICBfaW5kZXhhYmxlOiBmYWxzZSxcbiAgICBjYWxsYmFja3M6IHtcbiAgICAgIF9zY3JpcHRhYmxlOiBmYWxzZSxcbiAgICAgIF9pbmRleGFibGU6IGZhbHNlLFxuICAgIH0sXG4gICAgYW5pbWF0aW9uOiB7XG4gICAgICBfZmFsbGJhY2s6IGZhbHNlXG4gICAgfSxcbiAgICBhbmltYXRpb25zOiB7XG4gICAgICBfZmFsbGJhY2s6ICdhbmltYXRpb24nXG4gICAgfVxuICB9LFxuXG4gIC8vIFJlc29sdmUgYWRkaXRpb25hbGx5IGZyb20gYGludGVyYWN0aW9uYCBvcHRpb25zIGFuZCBkZWZhdWx0cy5cbiAgYWRkaXRpb25hbE9wdGlvblNjb3BlczogWydpbnRlcmFjdGlvbiddXG59O1xuIiwgImltcG9ydCBTY2FsZSBmcm9tICcuLi9jb3JlL2NvcmUuc2NhbGUuanMnO1xuaW1wb3J0IHtpc051bGxPclVuZGVmLCB2YWx1ZU9yRGVmYXVsdCwgX2xpbWl0VmFsdWV9IGZyb20gJy4uL2hlbHBlcnMvaW5kZXguanMnO1xuXG5jb25zdCBhZGRJZlN0cmluZyA9IChsYWJlbHMsIHJhdywgaW5kZXgsIGFkZGVkTGFiZWxzKSA9PiB7XG4gIGlmICh0eXBlb2YgcmF3ID09PSAnc3RyaW5nJykge1xuICAgIGluZGV4ID0gbGFiZWxzLnB1c2gocmF3KSAtIDE7XG4gICAgYWRkZWRMYWJlbHMudW5zaGlmdCh7aW5kZXgsIGxhYmVsOiByYXd9KTtcbiAgfSBlbHNlIGlmIChpc05hTihyYXcpKSB7XG4gICAgaW5kZXggPSBudWxsO1xuICB9XG4gIHJldHVybiBpbmRleDtcbn07XG5cbmZ1bmN0aW9uIGZpbmRPckFkZExhYmVsKGxhYmVscywgcmF3LCBpbmRleCwgYWRkZWRMYWJlbHMpIHtcbiAgY29uc3QgZmlyc3QgPSBsYWJlbHMuaW5kZXhPZihyYXcpO1xuICBpZiAoZmlyc3QgPT09IC0xKSB7XG4gICAgcmV0dXJuIGFkZElmU3RyaW5nKGxhYmVscywgcmF3LCBpbmRleCwgYWRkZWRMYWJlbHMpO1xuICB9XG4gIGNvbnN0IGxhc3QgPSBsYWJlbHMubGFzdEluZGV4T2YocmF3KTtcbiAgcmV0dXJuIGZpcnN0ICE9PSBsYXN0ID8gaW5kZXggOiBmaXJzdDtcbn1cblxuY29uc3QgdmFsaWRJbmRleCA9IChpbmRleCwgbWF4KSA9PiBpbmRleCA9PT0gbnVsbCA/IG51bGwgOiBfbGltaXRWYWx1ZShNYXRoLnJvdW5kKGluZGV4KSwgMCwgbWF4KTtcblxuZnVuY3Rpb24gX2dldExhYmVsRm9yVmFsdWUodmFsdWUpIHtcbiAgY29uc3QgbGFiZWxzID0gdGhpcy5nZXRMYWJlbHMoKTtcblxuICBpZiAodmFsdWUgPj0gMCAmJiB2YWx1ZSA8IGxhYmVscy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbGFiZWxzW3ZhbHVlXTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhdGVnb3J5U2NhbGUgZXh0ZW5kcyBTY2FsZSB7XG5cbiAgc3RhdGljIGlkID0gJ2NhdGVnb3J5JztcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICB0aWNrczoge1xuICAgICAgY2FsbGJhY2s6IF9nZXRMYWJlbEZvclZhbHVlXG4gICAgfVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKGNmZykge1xuICAgIHN1cGVyKGNmZyk7XG5cbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLl9zdGFydFZhbHVlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3ZhbHVlUmFuZ2UgPSAwO1xuICAgIHRoaXMuX2FkZGVkTGFiZWxzID0gW107XG4gIH1cblxuICBpbml0KHNjYWxlT3B0aW9ucykge1xuICAgIGNvbnN0IGFkZGVkID0gdGhpcy5fYWRkZWRMYWJlbHM7XG4gICAgaWYgKGFkZGVkLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFiZWxzID0gdGhpcy5nZXRMYWJlbHMoKTtcbiAgICAgIGZvciAoY29uc3Qge2luZGV4LCBsYWJlbH0gb2YgYWRkZWQpIHtcbiAgICAgICAgaWYgKGxhYmVsc1tpbmRleF0gPT09IGxhYmVsKSB7XG4gICAgICAgICAgbGFiZWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2FkZGVkTGFiZWxzID0gW107XG4gICAgfVxuICAgIHN1cGVyLmluaXQoc2NhbGVPcHRpb25zKTtcbiAgfVxuXG4gIHBhcnNlKHJhdywgaW5kZXgpIHtcbiAgICBpZiAoaXNOdWxsT3JVbmRlZihyYXcpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgbGFiZWxzID0gdGhpcy5nZXRMYWJlbHMoKTtcbiAgICBpbmRleCA9IGlzRmluaXRlKGluZGV4KSAmJiBsYWJlbHNbaW5kZXhdID09PSByYXcgPyBpbmRleFxuICAgICAgOiBmaW5kT3JBZGRMYWJlbChsYWJlbHMsIHJhdywgdmFsdWVPckRlZmF1bHQoaW5kZXgsIHJhdyksIHRoaXMuX2FkZGVkTGFiZWxzKTtcbiAgICByZXR1cm4gdmFsaWRJbmRleChpbmRleCwgbGFiZWxzLmxlbmd0aCAtIDEpO1xuICB9XG5cbiAgZGV0ZXJtaW5lRGF0YUxpbWl0cygpIHtcbiAgICBjb25zdCB7bWluRGVmaW5lZCwgbWF4RGVmaW5lZH0gPSB0aGlzLmdldFVzZXJCb3VuZHMoKTtcbiAgICBsZXQge21pbiwgbWF4fSA9IHRoaXMuZ2V0TWluTWF4KHRydWUpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5ib3VuZHMgPT09ICd0aWNrcycpIHtcbiAgICAgIGlmICghbWluRGVmaW5lZCkge1xuICAgICAgICBtaW4gPSAwO1xuICAgICAgfVxuICAgICAgaWYgKCFtYXhEZWZpbmVkKSB7XG4gICAgICAgIG1heCA9IHRoaXMuZ2V0TGFiZWxzKCkubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1pbiA9IG1pbjtcbiAgICB0aGlzLm1heCA9IG1heDtcbiAgfVxuXG4gIGJ1aWxkVGlja3MoKSB7XG4gICAgY29uc3QgbWluID0gdGhpcy5taW47XG4gICAgY29uc3QgbWF4ID0gdGhpcy5tYXg7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5vcHRpb25zLm9mZnNldDtcbiAgICBjb25zdCB0aWNrcyA9IFtdO1xuICAgIGxldCBsYWJlbHMgPSB0aGlzLmdldExhYmVscygpO1xuXG4gICAgLy8gSWYgd2UgYXJlIHZpZXdpbmcgc29tZSBzdWJzZXQgb2YgbGFiZWxzLCBzbGljZSB0aGUgb3JpZ2luYWwgYXJyYXlcbiAgICBsYWJlbHMgPSAobWluID09PSAwICYmIG1heCA9PT0gbGFiZWxzLmxlbmd0aCAtIDEpID8gbGFiZWxzIDogbGFiZWxzLnNsaWNlKG1pbiwgbWF4ICsgMSk7XG5cbiAgICB0aGlzLl92YWx1ZVJhbmdlID0gTWF0aC5tYXgobGFiZWxzLmxlbmd0aCAtIChvZmZzZXQgPyAwIDogMSksIDEpO1xuICAgIHRoaXMuX3N0YXJ0VmFsdWUgPSB0aGlzLm1pbiAtIChvZmZzZXQgPyAwLjUgOiAwKTtcblxuICAgIGZvciAobGV0IHZhbHVlID0gbWluOyB2YWx1ZSA8PSBtYXg7IHZhbHVlKyspIHtcbiAgICAgIHRpY2tzLnB1c2goe3ZhbHVlfSk7XG4gICAgfVxuICAgIHJldHVybiB0aWNrcztcbiAgfVxuXG4gIGdldExhYmVsRm9yVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gX2dldExhYmVsRm9yVmFsdWUuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgY29uZmlndXJlKCkge1xuICAgIHN1cGVyLmNvbmZpZ3VyZSgpO1xuXG4gICAgaWYgKCF0aGlzLmlzSG9yaXpvbnRhbCgpKSB7XG4gICAgICAvLyBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdmVydGljYWwgY2F0ZWdvcnkgc2NhbGUgcmV2ZXJzZSBpcyBpbnZlcnRlZC5cbiAgICAgIHRoaXMuX3JldmVyc2VQaXhlbHMgPSAhdGhpcy5fcmV2ZXJzZVBpeGVscztcbiAgICB9XG4gIH1cblxuICAvLyBVc2VkIHRvIGdldCBkYXRhIHZhbHVlIGxvY2F0aW9ucy4gVmFsdWUgY2FuIGVpdGhlciBiZSBhbiBpbmRleCBvciBhIG51bWVyaWNhbCB2YWx1ZVxuICBnZXRQaXhlbEZvclZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5wYXJzZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlID09PSBudWxsID8gTmFOIDogdGhpcy5nZXRQaXhlbEZvckRlY2ltYWwoKHZhbHVlIC0gdGhpcy5fc3RhcnRWYWx1ZSkgLyB0aGlzLl92YWx1ZVJhbmdlKTtcbiAgfVxuXG4gIC8vIE11c3Qgb3ZlcnJpZGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBiZWNhdXNlIGl0IGNhbGxzIGdldFBpeGVsRm9yVmFsdWVcbiAgLy8gYW5kIGNhdGVnb3J5IHNjYWxlIGNhbiBoYXZlIGR1cGxpY2F0ZSB2YWx1ZXNcbiAgZ2V0UGl4ZWxGb3JUaWNrKGluZGV4KSB7XG4gICAgY29uc3QgdGlja3MgPSB0aGlzLnRpY2tzO1xuICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiB0aWNrcy5sZW5ndGggLSAxKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0UGl4ZWxGb3JWYWx1ZSh0aWNrc1tpbmRleF0udmFsdWUpO1xuICB9XG5cbiAgZ2V0VmFsdWVGb3JQaXhlbChwaXhlbCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMuX3N0YXJ0VmFsdWUgKyB0aGlzLmdldERlY2ltYWxGb3JQaXhlbChwaXhlbCkgKiB0aGlzLl92YWx1ZVJhbmdlKTtcbiAgfVxuXG4gIGdldEJhc2VQaXhlbCgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3R0b207XG4gIH1cbn1cbiIsICJpbXBvcnQge2lzTnVsbE9yVW5kZWZ9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCB7YWxtb3N0RXF1YWxzLCBhbG1vc3RXaG9sZSwgbmljZU51bSwgX2RlY2ltYWxQbGFjZXMsIF9zZXRNaW5BbmRNYXhCeUtleSwgc2lnbiwgdG9SYWRpYW5zfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMubWF0aC5qcyc7XG5pbXBvcnQgU2NhbGUgZnJvbSAnLi4vY29yZS9jb3JlLnNjYWxlLmpzJztcbmltcG9ydCB7Zm9ybWF0TnVtYmVyfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuaW50bC5qcyc7XG5cbi8qKlxuICogR2VuZXJhdGUgYSBzZXQgb2YgbGluZWFyIHRpY2tzIGZvciBhbiBheGlzXG4gKiAxLiBJZiBnZW5lcmF0aW9uT3B0aW9ucy5taW4sIGdlbmVyYXRpb25PcHRpb25zLm1heCwgYW5kIGdlbmVyYXRpb25PcHRpb25zLnN0ZXAgYXJlIGRlZmluZWQ6XG4gKiAgICBpZiAobWF4IC0gbWluKSAvIHN0ZXAgaXMgYW4gaW50ZWdlciwgdGlja3MgYXJlIGdlbmVyYXRlZCBhcyBbbWluLCBtaW4gKyBzdGVwLCAuLi4sIG1heF1cbiAqICAgIE5vdGUgdGhhdCB0aGUgZ2VuZXJhdGlvbk9wdGlvbnMubWF4Q291bnQgc2V0dGluZyBpcyByZXNwZWN0ZWQgaW4gdGhpcyBzY2VuYXJpb1xuICpcbiAqIDIuIElmIGdlbmVyYXRpb25PcHRpb25zLm1pbiwgZ2VuZXJhdGlvbk9wdGlvbnMubWF4LCBhbmQgZ2VuZXJhdGlvbk9wdGlvbnMuY291bnQgaXMgZGVmaW5lZFxuICogICAgc3BhY2luZyA9IChtYXggLSBtaW4pIC8gY291bnRcbiAqICAgIFRpY2tzIGFyZSBnZW5lcmF0ZWQgYXMgW21pbiwgbWluICsgc3BhY2luZywgLi4uLCBtYXhdXG4gKlxuICogMy4gSWYgZ2VuZXJhdGlvbk9wdGlvbnMuY291bnQgaXMgZGVmaW5lZFxuICogICAgc3BhY2luZyA9IChuaWNlTWF4IC0gbmljZU1pbikgLyBjb3VudFxuICpcbiAqIDQuIENvbXB1dGUgb3B0aW1hbCBzcGFjaW5nIG9mIHRpY2tzIHVzaW5nIG5pY2VOdW0gYWxnb3JpdGhtXG4gKlxuICogQHBhcmFtIGdlbmVyYXRpb25PcHRpb25zIHRoZSBvcHRpb25zIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHRpY2tzXG4gKiBAcGFyYW0gZGF0YVJhbmdlIHRoZSByYW5nZSBvZiB0aGUgZGF0YVxuICogQHJldHVybnMge29iamVjdFtdfSBhcnJheSBvZiB0aWNrIG9iamVjdHNcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVUaWNrcyhnZW5lcmF0aW9uT3B0aW9ucywgZGF0YVJhbmdlKSB7XG4gIGNvbnN0IHRpY2tzID0gW107XG4gIC8vIFRvIGdldCBhIFwibmljZVwiIHZhbHVlIGZvciB0aGUgdGljayBzcGFjaW5nLCB3ZSB3aWxsIHVzZSB0aGUgYXBwcm9wcmlhdGVseSBuYW1lZFxuICAvLyBcIm5pY2UgbnVtYmVyXCIgYWxnb3JpdGhtLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODUwNjg4MS9uaWNlLWxhYmVsLWFsZ29yaXRobS1mb3ItY2hhcnRzLXdpdGgtbWluaW11bS10aWNrc1xuICAvLyBmb3IgZGV0YWlscy5cblxuICBjb25zdCBNSU5fU1BBQ0lORyA9IDFlLTE0O1xuICBjb25zdCB7Ym91bmRzLCBzdGVwLCBtaW4sIG1heCwgcHJlY2lzaW9uLCBjb3VudCwgbWF4VGlja3MsIG1heERpZ2l0cywgaW5jbHVkZUJvdW5kc30gPSBnZW5lcmF0aW9uT3B0aW9ucztcbiAgY29uc3QgdW5pdCA9IHN0ZXAgfHwgMTtcbiAgY29uc3QgbWF4U3BhY2VzID0gbWF4VGlja3MgLSAxO1xuICBjb25zdCB7bWluOiBybWluLCBtYXg6IHJtYXh9ID0gZGF0YVJhbmdlO1xuICBjb25zdCBtaW5EZWZpbmVkID0gIWlzTnVsbE9yVW5kZWYobWluKTtcbiAgY29uc3QgbWF4RGVmaW5lZCA9ICFpc051bGxPclVuZGVmKG1heCk7XG4gIGNvbnN0IGNvdW50RGVmaW5lZCA9ICFpc051bGxPclVuZGVmKGNvdW50KTtcbiAgY29uc3QgbWluU3BhY2luZyA9IChybWF4IC0gcm1pbikgLyAobWF4RGlnaXRzICsgMSk7XG4gIGxldCBzcGFjaW5nID0gbmljZU51bSgocm1heCAtIHJtaW4pIC8gbWF4U3BhY2VzIC8gdW5pdCkgKiB1bml0O1xuICBsZXQgZmFjdG9yLCBuaWNlTWluLCBuaWNlTWF4LCBudW1TcGFjZXM7XG5cbiAgLy8gQmV5b25kIE1JTl9TUEFDSU5HIGZsb2F0aW5nIHBvaW50IG51bWJlcnMgYmVpbmcgdG8gbG9zZSBwcmVjaXNpb25cbiAgLy8gc3VjaCB0aGF0IHdlIGNhbid0IGRvIHRoZSBtYXRoIG5lY2Vzc2FyeSB0byBnZW5lcmF0ZSB0aWNrc1xuICBpZiAoc3BhY2luZyA8IE1JTl9TUEFDSU5HICYmICFtaW5EZWZpbmVkICYmICFtYXhEZWZpbmVkKSB7XG4gICAgcmV0dXJuIFt7dmFsdWU6IHJtaW59LCB7dmFsdWU6IHJtYXh9XTtcbiAgfVxuXG4gIG51bVNwYWNlcyA9IE1hdGguY2VpbChybWF4IC8gc3BhY2luZykgLSBNYXRoLmZsb29yKHJtaW4gLyBzcGFjaW5nKTtcbiAgaWYgKG51bVNwYWNlcyA+IG1heFNwYWNlcykge1xuICAgIC8vIElmIHRoZSBjYWxjdWxhdGVkIG51bSBvZiBzcGFjZXMgZXhjZWVkcyBtYXhOdW1TcGFjZXMsIHJlY2FsY3VsYXRlIGl0XG4gICAgc3BhY2luZyA9IG5pY2VOdW0obnVtU3BhY2VzICogc3BhY2luZyAvIG1heFNwYWNlcyAvIHVuaXQpICogdW5pdDtcbiAgfVxuXG4gIGlmICghaXNOdWxsT3JVbmRlZihwcmVjaXNpb24pKSB7XG4gICAgLy8gSWYgdGhlIHVzZXIgc3BlY2lmaWVkIGEgcHJlY2lzaW9uLCByb3VuZCB0byB0aGF0IG51bWJlciBvZiBkZWNpbWFsIHBsYWNlc1xuICAgIGZhY3RvciA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pO1xuICAgIHNwYWNpbmcgPSBNYXRoLmNlaWwoc3BhY2luZyAqIGZhY3RvcikgLyBmYWN0b3I7XG4gIH1cblxuICBpZiAoYm91bmRzID09PSAndGlja3MnKSB7XG4gICAgbmljZU1pbiA9IE1hdGguZmxvb3Iocm1pbiAvIHNwYWNpbmcpICogc3BhY2luZztcbiAgICBuaWNlTWF4ID0gTWF0aC5jZWlsKHJtYXggLyBzcGFjaW5nKSAqIHNwYWNpbmc7XG4gIH0gZWxzZSB7XG4gICAgbmljZU1pbiA9IHJtaW47XG4gICAgbmljZU1heCA9IHJtYXg7XG4gIH1cblxuICBpZiAobWluRGVmaW5lZCAmJiBtYXhEZWZpbmVkICYmIHN0ZXAgJiYgYWxtb3N0V2hvbGUoKG1heCAtIG1pbikgLyBzdGVwLCBzcGFjaW5nIC8gMTAwMCkpIHtcbiAgICAvLyBDYXNlIDE6IElmIG1pbiwgbWF4IGFuZCBzdGVwU2l6ZSBhcmUgc2V0IGFuZCB0aGV5IG1ha2UgYW4gZXZlbmx5IHNwYWNlZCBzY2FsZSB1c2UgaXQuXG4gICAgLy8gc3BhY2luZyA9IHN0ZXA7XG4gICAgLy8gbnVtU3BhY2VzID0gKG1heCAtIG1pbikgLyBzcGFjaW5nO1xuICAgIC8vIE5vdGUgdGhhdCB3ZSByb3VuZCBoZXJlIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSBhbG1vc3RXaG9sZSB0cmFuc2xhdGVkIGFuIEZQIGVycm9yXG4gICAgbnVtU3BhY2VzID0gTWF0aC5yb3VuZChNYXRoLm1pbigobWF4IC0gbWluKSAvIHNwYWNpbmcsIG1heFRpY2tzKSk7XG4gICAgc3BhY2luZyA9IChtYXggLSBtaW4pIC8gbnVtU3BhY2VzO1xuICAgIG5pY2VNaW4gPSBtaW47XG4gICAgbmljZU1heCA9IG1heDtcbiAgfSBlbHNlIGlmIChjb3VudERlZmluZWQpIHtcbiAgICAvLyBDYXNlcyAyICYgMywgd2UgaGF2ZSBhIGNvdW50IHNwZWNpZmllZC4gSGFuZGxlIG9wdGlvbmFsIHVzZXIgZGVmaW5lZCBlZGdlcyB0byB0aGUgcmFuZ2UuXG4gICAgLy8gU29tZXRpbWVzIHRoZXNlIGFyZSBuby1vcHMsIGJ1dCBpdCBtYWtlcyB0aGUgY29kZSBhIGxvdCBjbGVhcmVyXG4gICAgLy8gYW5kIHdoZW4gYSB1c2VyIGRlZmluZWQgcmFuZ2UgaXMgc3BlY2lmaWVkLCB3ZSB3YW50IHRoZSBjb3JyZWN0IHRpY2tzXG4gICAgbmljZU1pbiA9IG1pbkRlZmluZWQgPyBtaW4gOiBuaWNlTWluO1xuICAgIG5pY2VNYXggPSBtYXhEZWZpbmVkID8gbWF4IDogbmljZU1heDtcbiAgICBudW1TcGFjZXMgPSBjb3VudCAtIDE7XG4gICAgc3BhY2luZyA9IChuaWNlTWF4IC0gbmljZU1pbikgLyBudW1TcGFjZXM7XG4gIH0gZWxzZSB7XG4gICAgLy8gQ2FzZSA0XG4gICAgbnVtU3BhY2VzID0gKG5pY2VNYXggLSBuaWNlTWluKSAvIHNwYWNpbmc7XG5cbiAgICAvLyBJZiB2ZXJ5IGNsb3NlIHRvIG91ciByb3VuZGVkIHZhbHVlLCB1c2UgaXQuXG4gICAgaWYgKGFsbW9zdEVxdWFscyhudW1TcGFjZXMsIE1hdGgucm91bmQobnVtU3BhY2VzKSwgc3BhY2luZyAvIDEwMDApKSB7XG4gICAgICBudW1TcGFjZXMgPSBNYXRoLnJvdW5kKG51bVNwYWNlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG51bVNwYWNlcyA9IE1hdGguY2VpbChudW1TcGFjZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoZSBzcGFjaW5nIHdpbGwgaGF2ZSBjaGFuZ2VkIGluIGNhc2VzIDEsIDIsIGFuZCAzIHNvIHRoZSBmYWN0b3IgY2Fubm90IGJlIGNvbXB1dGVkXG4gIC8vIHVudGlsIHRoaXMgcG9pbnRcbiAgY29uc3QgZGVjaW1hbFBsYWNlcyA9IE1hdGgubWF4KFxuICAgIF9kZWNpbWFsUGxhY2VzKHNwYWNpbmcpLFxuICAgIF9kZWNpbWFsUGxhY2VzKG5pY2VNaW4pXG4gICk7XG4gIGZhY3RvciA9IE1hdGgucG93KDEwLCBpc051bGxPclVuZGVmKHByZWNpc2lvbikgPyBkZWNpbWFsUGxhY2VzIDogcHJlY2lzaW9uKTtcbiAgbmljZU1pbiA9IE1hdGgucm91bmQobmljZU1pbiAqIGZhY3RvcikgLyBmYWN0b3I7XG4gIG5pY2VNYXggPSBNYXRoLnJvdW5kKG5pY2VNYXggKiBmYWN0b3IpIC8gZmFjdG9yO1xuXG4gIGxldCBqID0gMDtcbiAgaWYgKG1pbkRlZmluZWQpIHtcbiAgICBpZiAoaW5jbHVkZUJvdW5kcyAmJiBuaWNlTWluICE9PSBtaW4pIHtcbiAgICAgIHRpY2tzLnB1c2goe3ZhbHVlOiBtaW59KTtcblxuICAgICAgaWYgKG5pY2VNaW4gPCBtaW4pIHtcbiAgICAgICAgaisrOyAvLyBTa2lwIG5pY2VNaW5cbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSBuZXh0IG5pY2UgdGljayBpcyBjbG9zZSB0byBtaW4sIHNraXAgaXRcbiAgICAgIGlmIChhbG1vc3RFcXVhbHMoTWF0aC5yb3VuZCgobmljZU1pbiArIGogKiBzcGFjaW5nKSAqIGZhY3RvcikgLyBmYWN0b3IsIG1pbiwgcmVsYXRpdmVMYWJlbFNpemUobWluLCBtaW5TcGFjaW5nLCBnZW5lcmF0aW9uT3B0aW9ucykpKSB7XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5pY2VNaW4gPCBtaW4pIHtcbiAgICAgIGorKztcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgaiA8IG51bVNwYWNlczsgKytqKSB7XG4gICAgY29uc3QgdGlja1ZhbHVlID0gTWF0aC5yb3VuZCgobmljZU1pbiArIGogKiBzcGFjaW5nKSAqIGZhY3RvcikgLyBmYWN0b3I7XG4gICAgaWYgKG1heERlZmluZWQgJiYgdGlja1ZhbHVlID4gbWF4KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgdGlja3MucHVzaCh7dmFsdWU6IHRpY2tWYWx1ZX0pO1xuICB9XG5cbiAgaWYgKG1heERlZmluZWQgJiYgaW5jbHVkZUJvdW5kcyAmJiBuaWNlTWF4ICE9PSBtYXgpIHtcbiAgICAvLyBJZiB0aGUgcHJldmlvdXMgdGljayBpcyB0b28gY2xvc2UgdG8gbWF4LCByZXBsYWNlIGl0IHdpdGggbWF4LCBlbHNlIGFkZCBtYXhcbiAgICBpZiAodGlja3MubGVuZ3RoICYmIGFsbW9zdEVxdWFscyh0aWNrc1t0aWNrcy5sZW5ndGggLSAxXS52YWx1ZSwgbWF4LCByZWxhdGl2ZUxhYmVsU2l6ZShtYXgsIG1pblNwYWNpbmcsIGdlbmVyYXRpb25PcHRpb25zKSkpIHtcbiAgICAgIHRpY2tzW3RpY2tzLmxlbmd0aCAtIDFdLnZhbHVlID0gbWF4O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aWNrcy5wdXNoKHt2YWx1ZTogbWF4fSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKCFtYXhEZWZpbmVkIHx8IG5pY2VNYXggPT09IG1heCkge1xuICAgIHRpY2tzLnB1c2goe3ZhbHVlOiBuaWNlTWF4fSk7XG4gIH1cblxuICByZXR1cm4gdGlja3M7XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlTGFiZWxTaXplKHZhbHVlLCBtaW5TcGFjaW5nLCB7aG9yaXpvbnRhbCwgbWluUm90YXRpb259KSB7XG4gIGNvbnN0IHJhZCA9IHRvUmFkaWFucyhtaW5Sb3RhdGlvbik7XG4gIGNvbnN0IHJhdGlvID0gKGhvcml6b250YWwgPyBNYXRoLnNpbihyYWQpIDogTWF0aC5jb3MocmFkKSkgfHwgMC4wMDE7XG4gIGNvbnN0IGxlbmd0aCA9IDAuNzUgKiBtaW5TcGFjaW5nICogKCcnICsgdmFsdWUpLmxlbmd0aDtcbiAgcmV0dXJuIE1hdGgubWluKG1pblNwYWNpbmcgLyByYXRpbywgbGVuZ3RoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGluZWFyU2NhbGVCYXNlIGV4dGVuZHMgU2NhbGUge1xuXG4gIGNvbnN0cnVjdG9yKGNmZykge1xuICAgIHN1cGVyKGNmZyk7XG5cbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLnN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuZW5kID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuX3N0YXJ0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5fZW5kVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fdmFsdWVSYW5nZSA9IDA7XG4gIH1cblxuICBwYXJzZShyYXcsIGluZGV4KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBpZiAoaXNOdWxsT3JVbmRlZihyYXcpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCh0eXBlb2YgcmF3ID09PSAnbnVtYmVyJyB8fCByYXcgaW5zdGFuY2VvZiBOdW1iZXIpICYmICFpc0Zpbml0ZSgrcmF3KSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuICtyYXc7XG4gIH1cblxuICBoYW5kbGVUaWNrUmFuZ2VPcHRpb25zKCkge1xuICAgIGNvbnN0IHtiZWdpbkF0WmVyb30gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3Qge21pbkRlZmluZWQsIG1heERlZmluZWR9ID0gdGhpcy5nZXRVc2VyQm91bmRzKCk7XG4gICAgbGV0IHttaW4sIG1heH0gPSB0aGlzO1xuXG4gICAgY29uc3Qgc2V0TWluID0gdiA9PiAobWluID0gbWluRGVmaW5lZCA/IG1pbiA6IHYpO1xuICAgIGNvbnN0IHNldE1heCA9IHYgPT4gKG1heCA9IG1heERlZmluZWQgPyBtYXggOiB2KTtcblxuICAgIGlmIChiZWdpbkF0WmVybykge1xuICAgICAgY29uc3QgbWluU2lnbiA9IHNpZ24obWluKTtcbiAgICAgIGNvbnN0IG1heFNpZ24gPSBzaWduKG1heCk7XG5cbiAgICAgIGlmIChtaW5TaWduIDwgMCAmJiBtYXhTaWduIDwgMCkge1xuICAgICAgICBzZXRNYXgoMCk7XG4gICAgICB9IGVsc2UgaWYgKG1pblNpZ24gPiAwICYmIG1heFNpZ24gPiAwKSB7XG4gICAgICAgIHNldE1pbigwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWluID09PSBtYXgpIHtcbiAgICAgIGxldCBvZmZzZXQgPSBtYXggPT09IDAgPyAxIDogTWF0aC5hYnMobWF4ICogMC4wNSk7XG5cbiAgICAgIHNldE1heChtYXggKyBvZmZzZXQpO1xuXG4gICAgICBpZiAoIWJlZ2luQXRaZXJvKSB7XG4gICAgICAgIHNldE1pbihtaW4gLSBvZmZzZXQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm1pbiA9IG1pbjtcbiAgICB0aGlzLm1heCA9IG1heDtcbiAgfVxuXG4gIGdldFRpY2tMaW1pdCgpIHtcbiAgICBjb25zdCB0aWNrT3B0cyA9IHRoaXMub3B0aW9ucy50aWNrcztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgbGV0IHttYXhUaWNrc0xpbWl0LCBzdGVwU2l6ZX0gPSB0aWNrT3B0cztcbiAgICBsZXQgbWF4VGlja3M7XG5cbiAgICBpZiAoc3RlcFNpemUpIHtcbiAgICAgIG1heFRpY2tzID0gTWF0aC5jZWlsKHRoaXMubWF4IC8gc3RlcFNpemUpIC0gTWF0aC5mbG9vcih0aGlzLm1pbiAvIHN0ZXBTaXplKSArIDE7XG4gICAgICBpZiAobWF4VGlja3MgPiAxMDAwKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihgc2NhbGVzLiR7dGhpcy5pZH0udGlja3Muc3RlcFNpemU6ICR7c3RlcFNpemV9IHdvdWxkIHJlc3VsdCBnZW5lcmF0aW5nIHVwIHRvICR7bWF4VGlja3N9IHRpY2tzLiBMaW1pdGluZyB0byAxMDAwLmApO1xuICAgICAgICBtYXhUaWNrcyA9IDEwMDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heFRpY2tzID0gdGhpcy5jb21wdXRlVGlja0xpbWl0KCk7XG4gICAgICBtYXhUaWNrc0xpbWl0ID0gbWF4VGlja3NMaW1pdCB8fCAxMTtcbiAgICB9XG5cbiAgICBpZiAobWF4VGlja3NMaW1pdCkge1xuICAgICAgbWF4VGlja3MgPSBNYXRoLm1pbihtYXhUaWNrc0xpbWl0LCBtYXhUaWNrcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1heFRpY2tzO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIGNvbXB1dGVUaWNrTGltaXQoKSB7XG4gICAgcmV0dXJuIE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgfVxuXG4gIGJ1aWxkVGlja3MoKSB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCB0aWNrT3B0cyA9IG9wdHMudGlja3M7XG5cbiAgICAvLyBGaWd1cmUgb3V0IHdoYXQgdGhlIG1heCBudW1iZXIgb2YgdGlja3Mgd2UgY2FuIHN1cHBvcnQgaXQgaXMgYmFzZWQgb24gdGhlIHNpemUgb2ZcbiAgICAvLyB0aGUgYXhpcyBhcmVhLiBGb3Igbm93LCB3ZSBzYXkgdGhhdCB0aGUgbWluaW11bSB0aWNrIHNwYWNpbmcgaW4gcGl4ZWxzIG11c3QgYmUgNDBcbiAgICAvLyBXZSBhbHNvIGxpbWl0IHRoZSBtYXhpbXVtIG51bWJlciBvZiB0aWNrcyB0byAxMSB3aGljaCBnaXZlcyBhIG5pY2UgMTAgc3F1YXJlcyBvblxuICAgIC8vIHRoZSBncmFwaC4gTWFrZSBzdXJlIHdlIGFsd2F5cyBoYXZlIGF0IGxlYXN0IDIgdGlja3NcbiAgICBsZXQgbWF4VGlja3MgPSB0aGlzLmdldFRpY2tMaW1pdCgpO1xuICAgIG1heFRpY2tzID0gTWF0aC5tYXgoMiwgbWF4VGlja3MpO1xuXG4gICAgY29uc3QgbnVtZXJpY0dlbmVyYXRvck9wdGlvbnMgPSB7XG4gICAgICBtYXhUaWNrcyxcbiAgICAgIGJvdW5kczogb3B0cy5ib3VuZHMsXG4gICAgICBtaW46IG9wdHMubWluLFxuICAgICAgbWF4OiBvcHRzLm1heCxcbiAgICAgIHByZWNpc2lvbjogdGlja09wdHMucHJlY2lzaW9uLFxuICAgICAgc3RlcDogdGlja09wdHMuc3RlcFNpemUsXG4gICAgICBjb3VudDogdGlja09wdHMuY291bnQsXG4gICAgICBtYXhEaWdpdHM6IHRoaXMuX21heERpZ2l0cygpLFxuICAgICAgaG9yaXpvbnRhbDogdGhpcy5pc0hvcml6b250YWwoKSxcbiAgICAgIG1pblJvdGF0aW9uOiB0aWNrT3B0cy5taW5Sb3RhdGlvbiB8fCAwLFxuICAgICAgaW5jbHVkZUJvdW5kczogdGlja09wdHMuaW5jbHVkZUJvdW5kcyAhPT0gZmFsc2VcbiAgICB9O1xuICAgIGNvbnN0IGRhdGFSYW5nZSA9IHRoaXMuX3JhbmdlIHx8IHRoaXM7XG4gICAgY29uc3QgdGlja3MgPSBnZW5lcmF0ZVRpY2tzKG51bWVyaWNHZW5lcmF0b3JPcHRpb25zLCBkYXRhUmFuZ2UpO1xuXG4gICAgLy8gQXQgdGhpcyBwb2ludCwgd2UgbmVlZCB0byB1cGRhdGUgb3VyIG1heCBhbmQgbWluIGdpdmVuIHRoZSB0aWNrIHZhbHVlcyxcbiAgICAvLyBzaW5jZSB3ZSBwcm9iYWJseSBoYXZlIGV4cGFuZGVkIHRoZSByYW5nZSBvZiB0aGUgc2NhbGVcbiAgICBpZiAob3B0cy5ib3VuZHMgPT09ICd0aWNrcycpIHtcbiAgICAgIF9zZXRNaW5BbmRNYXhCeUtleSh0aWNrcywgdGhpcywgJ3ZhbHVlJyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMucmV2ZXJzZSkge1xuICAgICAgdGlja3MucmV2ZXJzZSgpO1xuXG4gICAgICB0aGlzLnN0YXJ0ID0gdGhpcy5tYXg7XG4gICAgICB0aGlzLmVuZCA9IHRoaXMubWluO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXJ0ID0gdGhpcy5taW47XG4gICAgICB0aGlzLmVuZCA9IHRoaXMubWF4O1xuICAgIH1cblxuICAgIHJldHVybiB0aWNrcztcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBjb25maWd1cmUoKSB7XG4gICAgY29uc3QgdGlja3MgPSB0aGlzLnRpY2tzO1xuICAgIGxldCBzdGFydCA9IHRoaXMubWluO1xuICAgIGxldCBlbmQgPSB0aGlzLm1heDtcblxuICAgIHN1cGVyLmNvbmZpZ3VyZSgpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5vZmZzZXQgJiYgdGlja3MubGVuZ3RoKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSAoZW5kIC0gc3RhcnQpIC8gTWF0aC5tYXgodGlja3MubGVuZ3RoIC0gMSwgMSkgLyAyO1xuICAgICAgc3RhcnQgLT0gb2Zmc2V0O1xuICAgICAgZW5kICs9IG9mZnNldDtcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRWYWx1ZSA9IHN0YXJ0O1xuICAgIHRoaXMuX2VuZFZhbHVlID0gZW5kO1xuICAgIHRoaXMuX3ZhbHVlUmFuZ2UgPSBlbmQgLSBzdGFydDtcbiAgfVxuXG4gIGdldExhYmVsRm9yVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gZm9ybWF0TnVtYmVyKHZhbHVlLCB0aGlzLmNoYXJ0Lm9wdGlvbnMubG9jYWxlLCB0aGlzLm9wdGlvbnMudGlja3MuZm9ybWF0KTtcbiAgfVxufVxuIiwgImltcG9ydCB7aXNGaW5pdGV9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCBMaW5lYXJTY2FsZUJhc2UgZnJvbSAnLi9zY2FsZS5saW5lYXJiYXNlLmpzJztcbmltcG9ydCBUaWNrcyBmcm9tICcuLi9jb3JlL2NvcmUudGlja3MuanMnO1xuaW1wb3J0IHt0b1JhZGlhbnN9IGZyb20gJy4uL2hlbHBlcnMvaW5kZXguanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaW5lYXJTY2FsZSBleHRlbmRzIExpbmVhclNjYWxlQmFzZSB7XG5cbiAgc3RhdGljIGlkID0gJ2xpbmVhcic7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHthbnl9XG4gICAqL1xuICBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgdGlja3M6IHtcbiAgICAgIGNhbGxiYWNrOiBUaWNrcy5mb3JtYXR0ZXJzLm51bWVyaWNcbiAgICB9XG4gIH07XG5cblxuICBkZXRlcm1pbmVEYXRhTGltaXRzKCkge1xuICAgIGNvbnN0IHttaW4sIG1heH0gPSB0aGlzLmdldE1pbk1heCh0cnVlKTtcblxuICAgIHRoaXMubWluID0gaXNGaW5pdGUobWluKSA/IG1pbiA6IDA7XG4gICAgdGhpcy5tYXggPSBpc0Zpbml0ZShtYXgpID8gbWF4IDogMTtcblxuICAgIC8vIENvbW1vbiBiYXNlIGltcGxlbWVudGF0aW9uIHRvIGhhbmRsZSBtaW4sIG1heCwgYmVnaW5BdFplcm9cbiAgICB0aGlzLmhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG51bWJlciBvZiB0aWNrcyBiYXNlZCBvbiB0aGUgc2NhbGUgZGltZW5zaW9uXG5cdCAqIEBwcm90ZWN0ZWRcbiBcdCAqL1xuICBjb21wdXRlVGlja0xpbWl0KCkge1xuICAgIGNvbnN0IGhvcml6b250YWwgPSB0aGlzLmlzSG9yaXpvbnRhbCgpO1xuICAgIGNvbnN0IGxlbmd0aCA9IGhvcml6b250YWwgPyB0aGlzLndpZHRoIDogdGhpcy5oZWlnaHQ7XG4gICAgY29uc3QgbWluUm90YXRpb24gPSB0b1JhZGlhbnModGhpcy5vcHRpb25zLnRpY2tzLm1pblJvdGF0aW9uKTtcbiAgICBjb25zdCByYXRpbyA9IChob3Jpem9udGFsID8gTWF0aC5zaW4obWluUm90YXRpb24pIDogTWF0aC5jb3MobWluUm90YXRpb24pKSB8fCAwLjAwMTtcbiAgICBjb25zdCB0aWNrRm9udCA9IHRoaXMuX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoMCk7XG4gICAgcmV0dXJuIE1hdGguY2VpbChsZW5ndGggLyBNYXRoLm1pbig0MCwgdGlja0ZvbnQubGluZUhlaWdodCAvIHJhdGlvKSk7XG4gIH1cblxuICAvLyBVdGlsc1xuICBnZXRQaXhlbEZvclZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBudWxsID8gTmFOIDogdGhpcy5nZXRQaXhlbEZvckRlY2ltYWwoKHZhbHVlIC0gdGhpcy5fc3RhcnRWYWx1ZSkgLyB0aGlzLl92YWx1ZVJhbmdlKTtcbiAgfVxuXG4gIGdldFZhbHVlRm9yUGl4ZWwocGl4ZWwpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhcnRWYWx1ZSArIHRoaXMuZ2V0RGVjaW1hbEZvclBpeGVsKHBpeGVsKSAqIHRoaXMuX3ZhbHVlUmFuZ2U7XG4gIH1cbn1cbiIsICJpbXBvcnQge2Zpbml0ZU9yRGVmYXVsdCwgaXNGaW5pdGV9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5jb3JlLmpzJztcbmltcG9ydCB7Zm9ybWF0TnVtYmVyfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuaW50bC5qcyc7XG5pbXBvcnQge19zZXRNaW5BbmRNYXhCeUtleSwgbG9nMTB9IGZyb20gJy4uL2hlbHBlcnMvaGVscGVycy5tYXRoLmpzJztcbmltcG9ydCBTY2FsZSBmcm9tICcuLi9jb3JlL2NvcmUuc2NhbGUuanMnO1xuaW1wb3J0IExpbmVhclNjYWxlQmFzZSBmcm9tICcuL3NjYWxlLmxpbmVhcmJhc2UuanMnO1xuaW1wb3J0IFRpY2tzIGZyb20gJy4uL2NvcmUvY29yZS50aWNrcy5qcyc7XG5cbmNvbnN0IGxvZzEwRmxvb3IgPSB2ID0+IE1hdGguZmxvb3IobG9nMTAodikpO1xuY29uc3QgY2hhbmdlRXhwb25lbnQgPSAodiwgbSkgPT4gTWF0aC5wb3coMTAsIGxvZzEwRmxvb3IodikgKyBtKTtcblxuZnVuY3Rpb24gaXNNYWpvcih0aWNrVmFsKSB7XG4gIGNvbnN0IHJlbWFpbiA9IHRpY2tWYWwgLyAoTWF0aC5wb3coMTAsIGxvZzEwRmxvb3IodGlja1ZhbCkpKTtcbiAgcmV0dXJuIHJlbWFpbiA9PT0gMTtcbn1cblxuZnVuY3Rpb24gc3RlcHMobWluLCBtYXgsIHJhbmdlRXhwKSB7XG4gIGNvbnN0IHJhbmdlU3RlcCA9IE1hdGgucG93KDEwLCByYW5nZUV4cCk7XG4gIGNvbnN0IHN0YXJ0ID0gTWF0aC5mbG9vcihtaW4gLyByYW5nZVN0ZXApO1xuICBjb25zdCBlbmQgPSBNYXRoLmNlaWwobWF4IC8gcmFuZ2VTdGVwKTtcbiAgcmV0dXJuIGVuZCAtIHN0YXJ0O1xufVxuXG5mdW5jdGlvbiBzdGFydEV4cChtaW4sIG1heCkge1xuICBjb25zdCByYW5nZSA9IG1heCAtIG1pbjtcbiAgbGV0IHJhbmdlRXhwID0gbG9nMTBGbG9vcihyYW5nZSk7XG4gIHdoaWxlIChzdGVwcyhtaW4sIG1heCwgcmFuZ2VFeHApID4gMTApIHtcbiAgICByYW5nZUV4cCsrO1xuICB9XG4gIHdoaWxlIChzdGVwcyhtaW4sIG1heCwgcmFuZ2VFeHApIDwgMTApIHtcbiAgICByYW5nZUV4cC0tO1xuICB9XG4gIHJldHVybiBNYXRoLm1pbihyYW5nZUV4cCwgbG9nMTBGbG9vcihtaW4pKTtcbn1cblxuXG4vKipcbiAqIEdlbmVyYXRlIGEgc2V0IG9mIGxvZ2FyaXRobWljIHRpY2tzXG4gKiBAcGFyYW0gZ2VuZXJhdGlvbk9wdGlvbnMgdGhlIG9wdGlvbnMgdXNlZCB0byBnZW5lcmF0ZSB0aGUgdGlja3NcbiAqIEBwYXJhbSBkYXRhUmFuZ2UgdGhlIHJhbmdlIG9mIHRoZSBkYXRhXG4gKiBAcmV0dXJucyB7b2JqZWN0W119IGFycmF5IG9mIHRpY2sgb2JqZWN0c1xuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVRpY2tzKGdlbmVyYXRpb25PcHRpb25zLCB7bWluLCBtYXh9KSB7XG4gIG1pbiA9IGZpbml0ZU9yRGVmYXVsdChnZW5lcmF0aW9uT3B0aW9ucy5taW4sIG1pbik7XG4gIGNvbnN0IHRpY2tzID0gW107XG4gIGNvbnN0IG1pbkV4cCA9IGxvZzEwRmxvb3IobWluKTtcbiAgbGV0IGV4cCA9IHN0YXJ0RXhwKG1pbiwgbWF4KTtcbiAgbGV0IHByZWNpc2lvbiA9IGV4cCA8IDAgPyBNYXRoLnBvdygxMCwgTWF0aC5hYnMoZXhwKSkgOiAxO1xuICBjb25zdCBzdGVwU2l6ZSA9IE1hdGgucG93KDEwLCBleHApO1xuICBjb25zdCBiYXNlID0gbWluRXhwID4gZXhwID8gTWF0aC5wb3coMTAsIG1pbkV4cCkgOiAwO1xuICBjb25zdCBzdGFydCA9IE1hdGgucm91bmQoKG1pbiAtIGJhc2UpICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgY29uc3Qgb2Zmc2V0ID0gTWF0aC5mbG9vcigobWluIC0gYmFzZSkgLyBzdGVwU2l6ZSAvIDEwKSAqIHN0ZXBTaXplICogMTA7XG4gIGxldCBzaWduaWZpY2FuZCA9IE1hdGguZmxvb3IoKHN0YXJ0IC0gb2Zmc2V0KSAvIE1hdGgucG93KDEwLCBleHApKTtcbiAgbGV0IHZhbHVlID0gZmluaXRlT3JEZWZhdWx0KGdlbmVyYXRpb25PcHRpb25zLm1pbiwgTWF0aC5yb3VuZCgoYmFzZSArIG9mZnNldCArIHNpZ25pZmljYW5kICogTWF0aC5wb3coMTAsIGV4cCkpICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbik7XG4gIHdoaWxlICh2YWx1ZSA8IG1heCkge1xuICAgIHRpY2tzLnB1c2goe3ZhbHVlLCBtYWpvcjogaXNNYWpvcih2YWx1ZSksIHNpZ25pZmljYW5kfSk7XG4gICAgaWYgKHNpZ25pZmljYW5kID49IDEwKSB7XG4gICAgICBzaWduaWZpY2FuZCA9IHNpZ25pZmljYW5kIDwgMTUgPyAxNSA6IDIwO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWduaWZpY2FuZCsrO1xuICAgIH1cbiAgICBpZiAoc2lnbmlmaWNhbmQgPj0gMjApIHtcbiAgICAgIGV4cCsrO1xuICAgICAgc2lnbmlmaWNhbmQgPSAyO1xuICAgICAgcHJlY2lzaW9uID0gZXhwID49IDAgPyAxIDogcHJlY2lzaW9uO1xuICAgIH1cbiAgICB2YWx1ZSA9IE1hdGgucm91bmQoKGJhc2UgKyBvZmZzZXQgKyBzaWduaWZpY2FuZCAqIE1hdGgucG93KDEwLCBleHApKSAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gIH1cbiAgY29uc3QgbGFzdFRpY2sgPSBmaW5pdGVPckRlZmF1bHQoZ2VuZXJhdGlvbk9wdGlvbnMubWF4LCB2YWx1ZSk7XG4gIHRpY2tzLnB1c2goe3ZhbHVlOiBsYXN0VGljaywgbWFqb3I6IGlzTWFqb3IobGFzdFRpY2spLCBzaWduaWZpY2FuZH0pO1xuXG4gIHJldHVybiB0aWNrcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9nYXJpdGhtaWNTY2FsZSBleHRlbmRzIFNjYWxlIHtcblxuICBzdGF0aWMgaWQgPSAnbG9nYXJpdGhtaWMnO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIGRlZmF1bHRzID0ge1xuICAgIHRpY2tzOiB7XG4gICAgICBjYWxsYmFjazogVGlja3MuZm9ybWF0dGVycy5sb2dhcml0aG1pYyxcbiAgICAgIG1ham9yOiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cblxuICBjb25zdHJ1Y3RvcihjZmcpIHtcbiAgICBzdXBlcihjZmcpO1xuXG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zdGFydCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLmVuZCA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLl9zdGFydFZhbHVlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3ZhbHVlUmFuZ2UgPSAwO1xuICB9XG5cbiAgcGFyc2UocmF3LCBpbmRleCkge1xuICAgIGNvbnN0IHZhbHVlID0gTGluZWFyU2NhbGVCYXNlLnByb3RvdHlwZS5wYXJzZS5hcHBseSh0aGlzLCBbcmF3LCBpbmRleF0pO1xuICAgIGlmICh2YWx1ZSA9PT0gMCkge1xuICAgICAgdGhpcy5femVybyA9IHRydWU7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gaXNGaW5pdGUodmFsdWUpICYmIHZhbHVlID4gMCA/IHZhbHVlIDogbnVsbDtcbiAgfVxuXG4gIGRldGVybWluZURhdGFMaW1pdHMoKSB7XG4gICAgY29uc3Qge21pbiwgbWF4fSA9IHRoaXMuZ2V0TWluTWF4KHRydWUpO1xuXG4gICAgdGhpcy5taW4gPSBpc0Zpbml0ZShtaW4pID8gTWF0aC5tYXgoMCwgbWluKSA6IG51bGw7XG4gICAgdGhpcy5tYXggPSBpc0Zpbml0ZShtYXgpID8gTWF0aC5tYXgoMCwgbWF4KSA6IG51bGw7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmJlZ2luQXRaZXJvKSB7XG4gICAgICB0aGlzLl96ZXJvID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBpZiBkYXRhIGhhcyBgMGAgaW4gaXQgb3IgYGJlZ2luQXRaZXJvYCBpcyB0cnVlLCBtaW4gKG5vbiB6ZXJvKSB2YWx1ZSBpcyBhdCBib3R0b21cbiAgICAvLyBvZiBzY2FsZSwgYW5kIGl0IGRvZXMgbm90IGVxdWFsIHN1Z2dlc3RlZE1pbiwgbG93ZXIgdGhlIG1pbiBib3VuZCBieSBvbmUgZXhwLlxuICAgIGlmICh0aGlzLl96ZXJvICYmIHRoaXMubWluICE9PSB0aGlzLl9zdWdnZXN0ZWRNaW4gJiYgIWlzRmluaXRlKHRoaXMuX3VzZXJNaW4pKSB7XG4gICAgICB0aGlzLm1pbiA9IG1pbiA9PT0gY2hhbmdlRXhwb25lbnQodGhpcy5taW4sIDApID8gY2hhbmdlRXhwb25lbnQodGhpcy5taW4sIC0xKSA6IGNoYW5nZUV4cG9uZW50KHRoaXMubWluLCAwKTtcbiAgICB9XG5cbiAgICB0aGlzLmhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKTtcbiAgfVxuXG4gIGhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKSB7XG4gICAgY29uc3Qge21pbkRlZmluZWQsIG1heERlZmluZWR9ID0gdGhpcy5nZXRVc2VyQm91bmRzKCk7XG4gICAgbGV0IG1pbiA9IHRoaXMubWluO1xuICAgIGxldCBtYXggPSB0aGlzLm1heDtcblxuICAgIGNvbnN0IHNldE1pbiA9IHYgPT4gKG1pbiA9IG1pbkRlZmluZWQgPyBtaW4gOiB2KTtcbiAgICBjb25zdCBzZXRNYXggPSB2ID0+IChtYXggPSBtYXhEZWZpbmVkID8gbWF4IDogdik7XG5cbiAgICBpZiAobWluID09PSBtYXgpIHtcbiAgICAgIGlmIChtaW4gPD0gMCkgeyAvLyBpbmNsdWRlcyBudWxsXG4gICAgICAgIHNldE1pbigxKTtcbiAgICAgICAgc2V0TWF4KDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldE1pbihjaGFuZ2VFeHBvbmVudChtaW4sIC0xKSk7XG4gICAgICAgIHNldE1heChjaGFuZ2VFeHBvbmVudChtYXgsICsxKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtaW4gPD0gMCkge1xuICAgICAgc2V0TWluKGNoYW5nZUV4cG9uZW50KG1heCwgLTEpKTtcbiAgICB9XG4gICAgaWYgKG1heCA8PSAwKSB7XG5cbiAgICAgIHNldE1heChjaGFuZ2VFeHBvbmVudChtaW4sICsxKSk7XG4gICAgfVxuXG4gICAgdGhpcy5taW4gPSBtaW47XG4gICAgdGhpcy5tYXggPSBtYXg7XG4gIH1cblxuICBidWlsZFRpY2tzKCkge1xuICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBjb25zdCBnZW5lcmF0aW9uT3B0aW9ucyA9IHtcbiAgICAgIG1pbjogdGhpcy5fdXNlck1pbixcbiAgICAgIG1heDogdGhpcy5fdXNlck1heFxuICAgIH07XG4gICAgY29uc3QgdGlja3MgPSBnZW5lcmF0ZVRpY2tzKGdlbmVyYXRpb25PcHRpb25zLCB0aGlzKTtcblxuICAgIC8vIEF0IHRoaXMgcG9pbnQsIHdlIG5lZWQgdG8gdXBkYXRlIG91ciBtYXggYW5kIG1pbiBnaXZlbiB0aGUgdGljayB2YWx1ZXMsXG4gICAgLy8gc2luY2Ugd2UgcHJvYmFibHkgaGF2ZSBleHBhbmRlZCB0aGUgcmFuZ2Ugb2YgdGhlIHNjYWxlXG4gICAgaWYgKG9wdHMuYm91bmRzID09PSAndGlja3MnKSB7XG4gICAgICBfc2V0TWluQW5kTWF4QnlLZXkodGlja3MsIHRoaXMsICd2YWx1ZScpO1xuICAgIH1cblxuICAgIGlmIChvcHRzLnJldmVyc2UpIHtcbiAgICAgIHRpY2tzLnJldmVyc2UoKTtcblxuICAgICAgdGhpcy5zdGFydCA9IHRoaXMubWF4O1xuICAgICAgdGhpcy5lbmQgPSB0aGlzLm1pbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydCA9IHRoaXMubWluO1xuICAgICAgdGhpcy5lbmQgPSB0aGlzLm1heDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGlja3M7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG4gIGdldExhYmVsRm9yVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZFxuICAgICAgPyAnMCdcbiAgICAgIDogZm9ybWF0TnVtYmVyKHZhbHVlLCB0aGlzLmNoYXJ0Lm9wdGlvbnMubG9jYWxlLCB0aGlzLm9wdGlvbnMudGlja3MuZm9ybWF0KTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBjb25maWd1cmUoKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLm1pbjtcblxuICAgIHN1cGVyLmNvbmZpZ3VyZSgpO1xuXG4gICAgdGhpcy5fc3RhcnRWYWx1ZSA9IGxvZzEwKHN0YXJ0KTtcbiAgICB0aGlzLl92YWx1ZVJhbmdlID0gbG9nMTAodGhpcy5tYXgpIC0gbG9nMTAoc3RhcnQpO1xuICB9XG5cbiAgZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSAwKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMubWluO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgaXNOYU4odmFsdWUpKSB7XG4gICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRQaXhlbEZvckRlY2ltYWwodmFsdWUgPT09IHRoaXMubWluXG4gICAgICA/IDBcbiAgICAgIDogKGxvZzEwKHZhbHVlKSAtIHRoaXMuX3N0YXJ0VmFsdWUpIC8gdGhpcy5fdmFsdWVSYW5nZSk7XG4gIH1cblxuICBnZXRWYWx1ZUZvclBpeGVsKHBpeGVsKSB7XG4gICAgY29uc3QgZGVjaW1hbCA9IHRoaXMuZ2V0RGVjaW1hbEZvclBpeGVsKHBpeGVsKTtcbiAgICByZXR1cm4gTWF0aC5wb3coMTAsIHRoaXMuX3N0YXJ0VmFsdWUgKyBkZWNpbWFsICogdGhpcy5fdmFsdWVSYW5nZSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi4vY29yZS9jb3JlLmRlZmF1bHRzLmpzJztcbmltcG9ydCB7X2xvbmdlc3RUZXh0LCBhZGRSb3VuZGVkUmVjdFBhdGgsIHJlbmRlclRleHQsIF9pc1BvaW50SW5BcmVhfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY2FudmFzLmpzJztcbmltcG9ydCB7SEFMRl9QSSwgVEFVLCB0b0RlZ3JlZXMsIHRvUmFkaWFucywgX25vcm1hbGl6ZUFuZ2xlLCBQSX0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLm1hdGguanMnO1xuaW1wb3J0IExpbmVhclNjYWxlQmFzZSBmcm9tICcuL3NjYWxlLmxpbmVhcmJhc2UuanMnO1xuaW1wb3J0IFRpY2tzIGZyb20gJy4uL2NvcmUvY29yZS50aWNrcy5qcyc7XG5pbXBvcnQge3ZhbHVlT3JEZWZhdWx0LCBpc0FycmF5LCBpc0Zpbml0ZSwgY2FsbGJhY2sgYXMgY2FsbENhbGxiYWNrLCBpc051bGxPclVuZGVmfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5pbXBvcnQge2NyZWF0ZUNvbnRleHQsIHRvRm9udCwgdG9QYWRkaW5nLCB0b1RSQkxDb3JuZXJzfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMub3B0aW9ucy5qcyc7XG5cbmZ1bmN0aW9uIGdldFRpY2tCYWNrZHJvcEhlaWdodChvcHRzKSB7XG4gIGNvbnN0IHRpY2tPcHRzID0gb3B0cy50aWNrcztcblxuICBpZiAodGlja09wdHMuZGlzcGxheSAmJiBvcHRzLmRpc3BsYXkpIHtcbiAgICBjb25zdCBwYWRkaW5nID0gdG9QYWRkaW5nKHRpY2tPcHRzLmJhY2tkcm9wUGFkZGluZyk7XG4gICAgcmV0dXJuIHZhbHVlT3JEZWZhdWx0KHRpY2tPcHRzLmZvbnQgJiYgdGlja09wdHMuZm9udC5zaXplLCBkZWZhdWx0cy5mb250LnNpemUpICsgcGFkZGluZy5oZWlnaHQ7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbmZ1bmN0aW9uIG1lYXN1cmVMYWJlbFNpemUoY3R4LCBmb250LCBsYWJlbCkge1xuICBsYWJlbCA9IGlzQXJyYXkobGFiZWwpID8gbGFiZWwgOiBbbGFiZWxdO1xuICByZXR1cm4ge1xuICAgIHc6IF9sb25nZXN0VGV4dChjdHgsIGZvbnQuc3RyaW5nLCBsYWJlbCksXG4gICAgaDogbGFiZWwubGVuZ3RoICogZm9udC5saW5lSGVpZ2h0XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRldGVybWluZUxpbWl0cyhhbmdsZSwgcG9zLCBzaXplLCBtaW4sIG1heCkge1xuICBpZiAoYW5nbGUgPT09IG1pbiB8fCBhbmdsZSA9PT0gbWF4KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBwb3MgLSAoc2l6ZSAvIDIpLFxuICAgICAgZW5kOiBwb3MgKyAoc2l6ZSAvIDIpXG4gICAgfTtcbiAgfSBlbHNlIGlmIChhbmdsZSA8IG1pbiB8fCBhbmdsZSA+IG1heCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogcG9zIC0gc2l6ZSxcbiAgICAgIGVuZDogcG9zXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IHBvcyxcbiAgICBlbmQ6IHBvcyArIHNpemVcbiAgfTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZml0IGEgcmFkaWFsIGxpbmVhciBzY2FsZSB3aXRoIHBvaW50IGxhYmVsc1xuICovXG5mdW5jdGlvbiBmaXRXaXRoUG9pbnRMYWJlbHMoc2NhbGUpIHtcblxuICAvLyBSaWdodCwgdGhpcyBpcyByZWFsbHkgY29uZnVzaW5nIGFuZCB0aGVyZSBpcyBhIGxvdCBvZiBtYXRocyBnb2luZyBvbiBoZXJlXG4gIC8vIFRoZSBnaXN0IG9mIHRoZSBwcm9ibGVtIGlzIGhlcmU6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL25ubmljay82OTZjYzljNTVmNGIwYmViOGZlOVxuICAvL1xuICAvLyBSZWFjdGlvbjogaHR0cHM6Ly9kbC5kcm9wYm94dXNlcmNvbnRlbnQuY29tL3UvMzQ2MDEzNjMvdG9vbXVjaHNjaWVuY2UuZ2lmXG4gIC8vXG4gIC8vIFNvbHV0aW9uOlxuICAvL1xuICAvLyBXZSBhc3N1bWUgdGhlIHJhZGl1cyBvZiB0aGUgcG9seWdvbiBpcyBoYWxmIHRoZSBzaXplIG9mIHRoZSBjYW52YXMgYXQgZmlyc3RcbiAgLy8gYXQgZWFjaCBpbmRleCB3ZSBjaGVjayBpZiB0aGUgdGV4dCBvdmVybGFwcy5cbiAgLy9cbiAgLy8gV2hlcmUgaXQgZG9lcywgd2Ugc3RvcmUgdGhhdCBhbmdsZSBhbmQgdGhhdCBpbmRleC5cbiAgLy9cbiAgLy8gQWZ0ZXIgZmluZGluZyB0aGUgbGFyZ2VzdCBpbmRleCBhbmQgYW5nbGUgd2UgY2FsY3VsYXRlIGhvdyBtdWNoIHdlIG5lZWQgdG8gcmVtb3ZlXG4gIC8vIGZyb20gdGhlIHNoYXBlIHJhZGl1cyB0byBtb3ZlIHRoZSBwb2ludCBpbndhcmRzIGJ5IHRoYXQgeC5cbiAgLy9cbiAgLy8gV2UgYXZlcmFnZSB0aGUgbGVmdCBhbmQgcmlnaHQgZGlzdGFuY2VzIHRvIGdldCB0aGUgbWF4aW11bSBzaGFwZSByYWRpdXMgdGhhdCBjYW4gZml0IGluIHRoZSBib3hcbiAgLy8gYWxvbmcgd2l0aCBsYWJlbHMuXG4gIC8vXG4gIC8vIE9uY2Ugd2UgaGF2ZSB0aGF0LCB3ZSBjYW4gZmluZCB0aGUgY2VudHJlIHBvaW50IGZvciB0aGUgY2hhcnQsIGJ5IHRha2luZyB0aGUgeCB0ZXh0IHByb3RydXNpb25cbiAgLy8gb24gZWFjaCBzaWRlLCByZW1vdmluZyB0aGF0IGZyb20gdGhlIHNpemUsIGhhbHZpbmcgaXQgYW5kIGFkZGluZyB0aGUgbGVmdCB4IHByb3RydXNpb24gd2lkdGguXG4gIC8vXG4gIC8vIFRoaXMgd2lsbCBtZWFuIHdlIGhhdmUgYSBzaGFwZSBmaXR0ZWQgdG8gdGhlIGNhbnZhcywgYXMgbGFyZ2UgYXMgaXQgY2FuIGJlIHdpdGggdGhlIGxhYmVsc1xuICAvLyBhbmQgcG9zaXRpb24gaXQgaW4gdGhlIG1vc3Qgc3BhY2UgZWZmaWNpZW50IG1hbm5lclxuICAvL1xuICAvLyBodHRwczovL2RsLmRyb3Bib3h1c2VyY29udGVudC5jb20vdS8zNDYwMTM2My95ZWFoc2NpZW5jZS5naWZcblxuICAvLyBHZXQgbWF4aW11bSByYWRpdXMgb2YgdGhlIHBvbHlnb24uIEVpdGhlciBoYWxmIHRoZSBoZWlnaHQgKG1pbnVzIHRoZSB0ZXh0IHdpZHRoKSBvciBoYWxmIHRoZSB3aWR0aC5cbiAgLy8gVXNlIHRoaXMgdG8gY2FsY3VsYXRlIHRoZSBvZmZzZXQgKyBjaGFuZ2UuIC0gTWFrZSBzdXJlIEwvUiBwcm90cnVzaW9uIGlzIGF0IGxlYXN0IDAgdG8gc3RvcCBpc3N1ZXMgd2l0aCBjZW50cmUgcG9pbnRzXG4gIGNvbnN0IG9yaWcgPSB7XG4gICAgbDogc2NhbGUubGVmdCArIHNjYWxlLl9wYWRkaW5nLmxlZnQsXG4gICAgcjogc2NhbGUucmlnaHQgLSBzY2FsZS5fcGFkZGluZy5yaWdodCxcbiAgICB0OiBzY2FsZS50b3AgKyBzY2FsZS5fcGFkZGluZy50b3AsXG4gICAgYjogc2NhbGUuYm90dG9tIC0gc2NhbGUuX3BhZGRpbmcuYm90dG9tXG4gIH07XG4gIGNvbnN0IGxpbWl0cyA9IE9iamVjdC5hc3NpZ24oe30sIG9yaWcpO1xuICBjb25zdCBsYWJlbFNpemVzID0gW107XG4gIGNvbnN0IHBhZGRpbmcgPSBbXTtcbiAgY29uc3QgdmFsdWVDb3VudCA9IHNjYWxlLl9wb2ludExhYmVscy5sZW5ndGg7XG4gIGNvbnN0IHBvaW50TGFiZWxPcHRzID0gc2NhbGUub3B0aW9ucy5wb2ludExhYmVscztcbiAgY29uc3QgYWRkaXRpb25hbEFuZ2xlID0gcG9pbnRMYWJlbE9wdHMuY2VudGVyUG9pbnRMYWJlbHMgPyBQSSAvIHZhbHVlQ291bnQgOiAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVDb3VudDsgaSsrKSB7XG4gICAgY29uc3Qgb3B0cyA9IHBvaW50TGFiZWxPcHRzLnNldENvbnRleHQoc2NhbGUuZ2V0UG9pbnRMYWJlbENvbnRleHQoaSkpO1xuICAgIHBhZGRpbmdbaV0gPSBvcHRzLnBhZGRpbmc7XG4gICAgY29uc3QgcG9pbnRQb3NpdGlvbiA9IHNjYWxlLmdldFBvaW50UG9zaXRpb24oaSwgc2NhbGUuZHJhd2luZ0FyZWEgKyBwYWRkaW5nW2ldLCBhZGRpdGlvbmFsQW5nbGUpO1xuICAgIGNvbnN0IHBsRm9udCA9IHRvRm9udChvcHRzLmZvbnQpO1xuICAgIGNvbnN0IHRleHRTaXplID0gbWVhc3VyZUxhYmVsU2l6ZShzY2FsZS5jdHgsIHBsRm9udCwgc2NhbGUuX3BvaW50TGFiZWxzW2ldKTtcbiAgICBsYWJlbFNpemVzW2ldID0gdGV4dFNpemU7XG5cbiAgICBjb25zdCBhbmdsZVJhZGlhbnMgPSBfbm9ybWFsaXplQW5nbGUoc2NhbGUuZ2V0SW5kZXhBbmdsZShpKSArIGFkZGl0aW9uYWxBbmdsZSk7XG4gICAgY29uc3QgYW5nbGUgPSBNYXRoLnJvdW5kKHRvRGVncmVlcyhhbmdsZVJhZGlhbnMpKTtcbiAgICBjb25zdCBoTGltaXRzID0gZGV0ZXJtaW5lTGltaXRzKGFuZ2xlLCBwb2ludFBvc2l0aW9uLngsIHRleHRTaXplLncsIDAsIDE4MCk7XG4gICAgY29uc3QgdkxpbWl0cyA9IGRldGVybWluZUxpbWl0cyhhbmdsZSwgcG9pbnRQb3NpdGlvbi55LCB0ZXh0U2l6ZS5oLCA5MCwgMjcwKTtcbiAgICB1cGRhdGVMaW1pdHMobGltaXRzLCBvcmlnLCBhbmdsZVJhZGlhbnMsIGhMaW1pdHMsIHZMaW1pdHMpO1xuICB9XG5cbiAgc2NhbGUuc2V0Q2VudGVyUG9pbnQoXG4gICAgb3JpZy5sIC0gbGltaXRzLmwsXG4gICAgbGltaXRzLnIgLSBvcmlnLnIsXG4gICAgb3JpZy50IC0gbGltaXRzLnQsXG4gICAgbGltaXRzLmIgLSBvcmlnLmJcbiAgKTtcblxuICAvLyBOb3cgdGhhdCB0ZXh0IHNpemUgaXMgZGV0ZXJtaW5lZCwgY29tcHV0ZSB0aGUgZnVsbCBwb3NpdGlvbnNcbiAgc2NhbGUuX3BvaW50TGFiZWxJdGVtcyA9IGJ1aWxkUG9pbnRMYWJlbEl0ZW1zKHNjYWxlLCBsYWJlbFNpemVzLCBwYWRkaW5nKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlTGltaXRzKGxpbWl0cywgb3JpZywgYW5nbGUsIGhMaW1pdHMsIHZMaW1pdHMpIHtcbiAgY29uc3Qgc2luID0gTWF0aC5hYnMoTWF0aC5zaW4oYW5nbGUpKTtcbiAgY29uc3QgY29zID0gTWF0aC5hYnMoTWF0aC5jb3MoYW5nbGUpKTtcbiAgbGV0IHggPSAwO1xuICBsZXQgeSA9IDA7XG4gIGlmIChoTGltaXRzLnN0YXJ0IDwgb3JpZy5sKSB7XG4gICAgeCA9IChvcmlnLmwgLSBoTGltaXRzLnN0YXJ0KSAvIHNpbjtcbiAgICBsaW1pdHMubCA9IE1hdGgubWluKGxpbWl0cy5sLCBvcmlnLmwgLSB4KTtcbiAgfSBlbHNlIGlmIChoTGltaXRzLmVuZCA+IG9yaWcucikge1xuICAgIHggPSAoaExpbWl0cy5lbmQgLSBvcmlnLnIpIC8gc2luO1xuICAgIGxpbWl0cy5yID0gTWF0aC5tYXgobGltaXRzLnIsIG9yaWcuciArIHgpO1xuICB9XG4gIGlmICh2TGltaXRzLnN0YXJ0IDwgb3JpZy50KSB7XG4gICAgeSA9IChvcmlnLnQgLSB2TGltaXRzLnN0YXJ0KSAvIGNvcztcbiAgICBsaW1pdHMudCA9IE1hdGgubWluKGxpbWl0cy50LCBvcmlnLnQgLSB5KTtcbiAgfSBlbHNlIGlmICh2TGltaXRzLmVuZCA+IG9yaWcuYikge1xuICAgIHkgPSAodkxpbWl0cy5lbmQgLSBvcmlnLmIpIC8gY29zO1xuICAgIGxpbWl0cy5iID0gTWF0aC5tYXgobGltaXRzLmIsIG9yaWcuYiArIHkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBvaW50TGFiZWxJdGVtKHNjYWxlLCBpbmRleCwgaXRlbU9wdHMpIHtcbiAgY29uc3Qgb3V0ZXJEaXN0YW5jZSA9IHNjYWxlLmRyYXdpbmdBcmVhO1xuICBjb25zdCB7ZXh0cmEsIGFkZGl0aW9uYWxBbmdsZSwgcGFkZGluZywgc2l6ZX0gPSBpdGVtT3B0cztcbiAgY29uc3QgcG9pbnRMYWJlbFBvc2l0aW9uID0gc2NhbGUuZ2V0UG9pbnRQb3NpdGlvbihpbmRleCwgb3V0ZXJEaXN0YW5jZSArIGV4dHJhICsgcGFkZGluZywgYWRkaXRpb25hbEFuZ2xlKTtcbiAgY29uc3QgYW5nbGUgPSBNYXRoLnJvdW5kKHRvRGVncmVlcyhfbm9ybWFsaXplQW5nbGUocG9pbnRMYWJlbFBvc2l0aW9uLmFuZ2xlICsgSEFMRl9QSSkpKTtcbiAgY29uc3QgeSA9IHlGb3JBbmdsZShwb2ludExhYmVsUG9zaXRpb24ueSwgc2l6ZS5oLCBhbmdsZSk7XG4gIGNvbnN0IHRleHRBbGlnbiA9IGdldFRleHRBbGlnbkZvckFuZ2xlKGFuZ2xlKTtcbiAgY29uc3QgbGVmdCA9IGxlZnRGb3JUZXh0QWxpZ24ocG9pbnRMYWJlbFBvc2l0aW9uLngsIHNpemUudywgdGV4dEFsaWduKTtcbiAgcmV0dXJuIHtcbiAgICAvLyBpZiB0byBkcmF3IG9yIG92ZXJsYXBwZWRcbiAgICB2aXNpYmxlOiB0cnVlLFxuXG4gICAgLy8gVGV4dCBwb3NpdGlvblxuICAgIHg6IHBvaW50TGFiZWxQb3NpdGlvbi54LFxuICAgIHksXG5cbiAgICAvLyBUZXh0IHJlbmRlcmluZyBkYXRhXG4gICAgdGV4dEFsaWduLFxuXG4gICAgLy8gQm91bmRpbmcgYm94XG4gICAgbGVmdCxcbiAgICB0b3A6IHksXG4gICAgcmlnaHQ6IGxlZnQgKyBzaXplLncsXG4gICAgYm90dG9tOiB5ICsgc2l6ZS5oXG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzTm90T3ZlcmxhcHBlZChpdGVtLCBhcmVhKSB7XG4gIGlmICghYXJlYSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IHtsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b219ID0gaXRlbTtcbiAgY29uc3QgYXBleGVzSW5BcmVhID0gX2lzUG9pbnRJbkFyZWEoe3g6IGxlZnQsIHk6IHRvcH0sIGFyZWEpIHx8IF9pc1BvaW50SW5BcmVhKHt4OiBsZWZ0LCB5OiBib3R0b219LCBhcmVhKSB8fFxuICAgIF9pc1BvaW50SW5BcmVhKHt4OiByaWdodCwgeTogdG9wfSwgYXJlYSkgfHwgX2lzUG9pbnRJbkFyZWEoe3g6IHJpZ2h0LCB5OiBib3R0b219LCBhcmVhKTtcbiAgcmV0dXJuICFhcGV4ZXNJbkFyZWE7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUG9pbnRMYWJlbEl0ZW1zKHNjYWxlLCBsYWJlbFNpemVzLCBwYWRkaW5nKSB7XG4gIGNvbnN0IGl0ZW1zID0gW107XG4gIGNvbnN0IHZhbHVlQ291bnQgPSBzY2FsZS5fcG9pbnRMYWJlbHMubGVuZ3RoO1xuICBjb25zdCBvcHRzID0gc2NhbGUub3B0aW9ucztcbiAgY29uc3Qge2NlbnRlclBvaW50TGFiZWxzLCBkaXNwbGF5fSA9IG9wdHMucG9pbnRMYWJlbHM7XG4gIGNvbnN0IGl0ZW1PcHRzID0ge1xuICAgIGV4dHJhOiBnZXRUaWNrQmFja2Ryb3BIZWlnaHQob3B0cykgLyAyLFxuICAgIGFkZGl0aW9uYWxBbmdsZTogY2VudGVyUG9pbnRMYWJlbHMgPyBQSSAvIHZhbHVlQ291bnQgOiAwXG4gIH07XG4gIGxldCBhcmVhO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVDb3VudDsgaSsrKSB7XG4gICAgaXRlbU9wdHMucGFkZGluZyA9IHBhZGRpbmdbaV07XG4gICAgaXRlbU9wdHMuc2l6ZSA9IGxhYmVsU2l6ZXNbaV07XG5cbiAgICBjb25zdCBpdGVtID0gY3JlYXRlUG9pbnRMYWJlbEl0ZW0oc2NhbGUsIGksIGl0ZW1PcHRzKTtcbiAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgIGlmIChkaXNwbGF5ID09PSAnYXV0bycpIHtcbiAgICAgIGl0ZW0udmlzaWJsZSA9IGlzTm90T3ZlcmxhcHBlZChpdGVtLCBhcmVhKTtcbiAgICAgIGlmIChpdGVtLnZpc2libGUpIHtcbiAgICAgICAgYXJlYSA9IGl0ZW07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBpdGVtcztcbn1cblxuZnVuY3Rpb24gZ2V0VGV4dEFsaWduRm9yQW5nbGUoYW5nbGUpIHtcbiAgaWYgKGFuZ2xlID09PSAwIHx8IGFuZ2xlID09PSAxODApIHtcbiAgICByZXR1cm4gJ2NlbnRlcic7XG4gIH0gZWxzZSBpZiAoYW5nbGUgPCAxODApIHtcbiAgICByZXR1cm4gJ2xlZnQnO1xuICB9XG5cbiAgcmV0dXJuICdyaWdodCc7XG59XG5cbmZ1bmN0aW9uIGxlZnRGb3JUZXh0QWxpZ24oeCwgdywgYWxpZ24pIHtcbiAgaWYgKGFsaWduID09PSAncmlnaHQnKSB7XG4gICAgeCAtPSB3O1xuICB9IGVsc2UgaWYgKGFsaWduID09PSAnY2VudGVyJykge1xuICAgIHggLT0gKHcgLyAyKTtcbiAgfVxuICByZXR1cm4geDtcbn1cblxuZnVuY3Rpb24geUZvckFuZ2xlKHksIGgsIGFuZ2xlKSB7XG4gIGlmIChhbmdsZSA9PT0gOTAgfHwgYW5nbGUgPT09IDI3MCkge1xuICAgIHkgLT0gKGggLyAyKTtcbiAgfSBlbHNlIGlmIChhbmdsZSA+IDI3MCB8fCBhbmdsZSA8IDkwKSB7XG4gICAgeSAtPSBoO1xuICB9XG4gIHJldHVybiB5O1xufVxuXG5mdW5jdGlvbiBkcmF3UG9pbnRMYWJlbEJveChjdHgsIG9wdHMsIGl0ZW0pIHtcbiAgY29uc3Qge2xlZnQsIHRvcCwgcmlnaHQsIGJvdHRvbX0gPSBpdGVtO1xuICBjb25zdCB7YmFja2Ryb3BDb2xvcn0gPSBvcHRzO1xuXG4gIGlmICghaXNOdWxsT3JVbmRlZihiYWNrZHJvcENvbG9yKSkge1xuICAgIGNvbnN0IGJvcmRlclJhZGl1cyA9IHRvVFJCTENvcm5lcnMob3B0cy5ib3JkZXJSYWRpdXMpO1xuICAgIGNvbnN0IHBhZGRpbmcgPSB0b1BhZGRpbmcob3B0cy5iYWNrZHJvcFBhZGRpbmcpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBiYWNrZHJvcENvbG9yO1xuXG4gICAgY29uc3QgYmFja2Ryb3BMZWZ0ID0gbGVmdCAtIHBhZGRpbmcubGVmdDtcbiAgICBjb25zdCBiYWNrZHJvcFRvcCA9IHRvcCAtIHBhZGRpbmcudG9wO1xuICAgIGNvbnN0IGJhY2tkcm9wV2lkdGggPSByaWdodCAtIGxlZnQgKyBwYWRkaW5nLndpZHRoO1xuICAgIGNvbnN0IGJhY2tkcm9wSGVpZ2h0ID0gYm90dG9tIC0gdG9wICsgcGFkZGluZy5oZWlnaHQ7XG5cbiAgICBpZiAoT2JqZWN0LnZhbHVlcyhib3JkZXJSYWRpdXMpLnNvbWUodiA9PiB2ICE9PSAwKSkge1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgYWRkUm91bmRlZFJlY3RQYXRoKGN0eCwge1xuICAgICAgICB4OiBiYWNrZHJvcExlZnQsXG4gICAgICAgIHk6IGJhY2tkcm9wVG9wLFxuICAgICAgICB3OiBiYWNrZHJvcFdpZHRoLFxuICAgICAgICBoOiBiYWNrZHJvcEhlaWdodCxcbiAgICAgICAgcmFkaXVzOiBib3JkZXJSYWRpdXMsXG4gICAgICB9KTtcbiAgICAgIGN0eC5maWxsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5maWxsUmVjdChiYWNrZHJvcExlZnQsIGJhY2tkcm9wVG9wLCBiYWNrZHJvcFdpZHRoLCBiYWNrZHJvcEhlaWdodCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRyYXdQb2ludExhYmVscyhzY2FsZSwgbGFiZWxDb3VudCkge1xuICBjb25zdCB7Y3R4LCBvcHRpb25zOiB7cG9pbnRMYWJlbHN9fSA9IHNjYWxlO1xuXG4gIGZvciAobGV0IGkgPSBsYWJlbENvdW50IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCBpdGVtID0gc2NhbGUuX3BvaW50TGFiZWxJdGVtc1tpXTtcbiAgICBpZiAoIWl0ZW0udmlzaWJsZSkge1xuICAgICAgLy8gb3ZlcmxhcHBpbmdcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBvcHRzQXRJbmRleCA9IHBvaW50TGFiZWxzLnNldENvbnRleHQoc2NhbGUuZ2V0UG9pbnRMYWJlbENvbnRleHQoaSkpO1xuICAgIGRyYXdQb2ludExhYmVsQm94KGN0eCwgb3B0c0F0SW5kZXgsIGl0ZW0pO1xuICAgIGNvbnN0IHBsRm9udCA9IHRvRm9udChvcHRzQXRJbmRleC5mb250KTtcbiAgICBjb25zdCB7eCwgeSwgdGV4dEFsaWdufSA9IGl0ZW07XG5cbiAgICByZW5kZXJUZXh0KFxuICAgICAgY3R4LFxuICAgICAgc2NhbGUuX3BvaW50TGFiZWxzW2ldLFxuICAgICAgeCxcbiAgICAgIHkgKyAocGxGb250LmxpbmVIZWlnaHQgLyAyKSxcbiAgICAgIHBsRm9udCxcbiAgICAgIHtcbiAgICAgICAgY29sb3I6IG9wdHNBdEluZGV4LmNvbG9yLFxuICAgICAgICB0ZXh0QWxpZ246IHRleHRBbGlnbixcbiAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJ1xuICAgICAgfVxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGF0aFJhZGl1c0xpbmUoc2NhbGUsIHJhZGl1cywgY2lyY3VsYXIsIGxhYmVsQ291bnQpIHtcbiAgY29uc3Qge2N0eH0gPSBzY2FsZTtcbiAgaWYgKGNpcmN1bGFyKSB7XG4gICAgLy8gRHJhdyBjaXJjdWxhciBhcmNzIGJldHdlZW4gdGhlIHBvaW50c1xuICAgIGN0eC5hcmMoc2NhbGUueENlbnRlciwgc2NhbGUueUNlbnRlciwgcmFkaXVzLCAwLCBUQVUpO1xuICB9IGVsc2Uge1xuICAgIC8vIERyYXcgc3RyYWlnaHQgbGluZXMgY29ubmVjdGluZyBlYWNoIGluZGV4XG4gICAgbGV0IHBvaW50UG9zaXRpb24gPSBzY2FsZS5nZXRQb2ludFBvc2l0aW9uKDAsIHJhZGl1cyk7XG4gICAgY3R4Lm1vdmVUbyhwb2ludFBvc2l0aW9uLngsIHBvaW50UG9zaXRpb24ueSk7XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxhYmVsQ291bnQ7IGkrKykge1xuICAgICAgcG9pbnRQb3NpdGlvbiA9IHNjYWxlLmdldFBvaW50UG9zaXRpb24oaSwgcmFkaXVzKTtcbiAgICAgIGN0eC5saW5lVG8ocG9pbnRQb3NpdGlvbi54LCBwb2ludFBvc2l0aW9uLnkpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkcmF3UmFkaXVzTGluZShzY2FsZSwgZ3JpZExpbmVPcHRzLCByYWRpdXMsIGxhYmVsQ291bnQsIGJvcmRlck9wdHMpIHtcbiAgY29uc3QgY3R4ID0gc2NhbGUuY3R4O1xuICBjb25zdCBjaXJjdWxhciA9IGdyaWRMaW5lT3B0cy5jaXJjdWxhcjtcblxuICBjb25zdCB7Y29sb3IsIGxpbmVXaWR0aH0gPSBncmlkTGluZU9wdHM7XG5cbiAgaWYgKCghY2lyY3VsYXIgJiYgIWxhYmVsQ291bnQpIHx8ICFjb2xvciB8fCAhbGluZVdpZHRoIHx8IHJhZGl1cyA8IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjdHguc2F2ZSgpO1xuICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgY3R4LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcbiAgY3R4LnNldExpbmVEYXNoKGJvcmRlck9wdHMuZGFzaCk7XG4gIGN0eC5saW5lRGFzaE9mZnNldCA9IGJvcmRlck9wdHMuZGFzaE9mZnNldDtcblxuICBjdHguYmVnaW5QYXRoKCk7XG4gIHBhdGhSYWRpdXNMaW5lKHNjYWxlLCByYWRpdXMsIGNpcmN1bGFyLCBsYWJlbENvdW50KTtcbiAgY3R4LmNsb3NlUGF0aCgpO1xuICBjdHguc3Ryb2tlKCk7XG4gIGN0eC5yZXN0b3JlKCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBvaW50TGFiZWxDb250ZXh0KHBhcmVudCwgaW5kZXgsIGxhYmVsKSB7XG4gIHJldHVybiBjcmVhdGVDb250ZXh0KHBhcmVudCwge1xuICAgIGxhYmVsLFxuICAgIGluZGV4LFxuICAgIHR5cGU6ICdwb2ludExhYmVsJ1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFkaWFsTGluZWFyU2NhbGUgZXh0ZW5kcyBMaW5lYXJTY2FsZUJhc2Uge1xuXG4gIHN0YXRpYyBpZCA9ICdyYWRpYWxMaW5lYXInO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7YW55fVxuICAgKi9cbiAgc3RhdGljIGRlZmF1bHRzID0ge1xuICAgIGRpc3BsYXk6IHRydWUsXG5cbiAgICAvLyBCb29sZWFuIC0gV2hldGhlciB0byBhbmltYXRlIHNjYWxpbmcgdGhlIGNoYXJ0IGZyb20gdGhlIGNlbnRyZVxuICAgIGFuaW1hdGU6IHRydWUsXG4gICAgcG9zaXRpb246ICdjaGFydEFyZWEnLFxuXG4gICAgYW5nbGVMaW5lczoge1xuICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgIGxpbmVXaWR0aDogMSxcbiAgICAgIGJvcmRlckRhc2g6IFtdLFxuICAgICAgYm9yZGVyRGFzaE9mZnNldDogMC4wXG4gICAgfSxcblxuICAgIGdyaWQ6IHtcbiAgICAgIGNpcmN1bGFyOiBmYWxzZVxuICAgIH0sXG5cbiAgICBzdGFydEFuZ2xlOiAwLFxuXG4gICAgLy8gbGFiZWwgc2V0dGluZ3NcbiAgICB0aWNrczoge1xuICAgICAgLy8gQm9vbGVhbiAtIFNob3cgYSBiYWNrZHJvcCB0byB0aGUgc2NhbGUgbGFiZWxcbiAgICAgIHNob3dMYWJlbEJhY2tkcm9wOiB0cnVlLFxuXG4gICAgICBjYWxsYmFjazogVGlja3MuZm9ybWF0dGVycy5udW1lcmljXG4gICAgfSxcblxuICAgIHBvaW50TGFiZWxzOiB7XG4gICAgICBiYWNrZHJvcENvbG9yOiB1bmRlZmluZWQsXG5cbiAgICAgIC8vIE51bWJlciAtIFRoZSBiYWNrZHJvcCBwYWRkaW5nIGFib3ZlICYgYmVsb3cgdGhlIGxhYmVsIGluIHBpeGVsc1xuICAgICAgYmFja2Ryb3BQYWRkaW5nOiAyLFxuXG4gICAgICAvLyBCb29sZWFuIC0gaWYgdHJ1ZSwgc2hvdyBwb2ludCBsYWJlbHNcbiAgICAgIGRpc3BsYXk6IHRydWUsXG5cbiAgICAgIC8vIE51bWJlciAtIFBvaW50IGxhYmVsIGZvbnQgc2l6ZSBpbiBwaXhlbHNcbiAgICAgIGZvbnQ6IHtcbiAgICAgICAgc2l6ZTogMTBcbiAgICAgIH0sXG5cbiAgICAgIC8vIEZ1bmN0aW9uIC0gVXNlZCB0byBjb252ZXJ0IHBvaW50IGxhYmVsc1xuICAgICAgY2FsbGJhY2sobGFiZWwpIHtcbiAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgICAgfSxcblxuICAgICAgLy8gTnVtYmVyIC0gQWRkaXRpb25sIHBhZGRpbmcgYmV0d2VlbiBzY2FsZSBhbmQgcG9pbnRMYWJlbFxuICAgICAgcGFkZGluZzogNSxcblxuICAgICAgLy8gQm9vbGVhbiAtIGlmIHRydWUsIGNlbnRlciBwb2ludCBsYWJlbHMgdG8gc2xpY2VzIGluIHBvbGFyIGNoYXJ0XG4gICAgICBjZW50ZXJQb2ludExhYmVsczogZmFsc2VcbiAgICB9XG4gIH07XG5cbiAgc3RhdGljIGRlZmF1bHRSb3V0ZXMgPSB7XG4gICAgJ2FuZ2xlTGluZXMuY29sb3InOiAnYm9yZGVyQ29sb3InLFxuICAgICdwb2ludExhYmVscy5jb2xvcic6ICdjb2xvcicsXG4gICAgJ3RpY2tzLmNvbG9yJzogJ2NvbG9yJ1xuICB9O1xuXG4gIHN0YXRpYyBkZXNjcmlwdG9ycyA9IHtcbiAgICBhbmdsZUxpbmVzOiB7XG4gICAgICBfZmFsbGJhY2s6ICdncmlkJ1xuICAgIH1cbiAgfTtcblxuICBjb25zdHJ1Y3RvcihjZmcpIHtcbiAgICBzdXBlcihjZmcpO1xuXG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy54Q2VudGVyID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMueUNlbnRlciA9IHVuZGVmaW5lZDtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLmRyYXdpbmdBcmVhID0gdW5kZWZpbmVkO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nW119ICovXG4gICAgdGhpcy5fcG9pbnRMYWJlbHMgPSBbXTtcbiAgICB0aGlzLl9wb2ludExhYmVsSXRlbXMgPSBbXTtcbiAgfVxuXG4gIHNldERpbWVuc2lvbnMoKSB7XG4gICAgLy8gU2V0IHRoZSB1bmNvbnN0cmFpbmVkIGRpbWVuc2lvbiBiZWZvcmUgbGFiZWwgcm90YXRpb25cbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5fcGFkZGluZyA9IHRvUGFkZGluZyhnZXRUaWNrQmFja2Ryb3BIZWlnaHQodGhpcy5vcHRpb25zKSAvIDIpO1xuICAgIGNvbnN0IHcgPSB0aGlzLndpZHRoID0gdGhpcy5tYXhXaWR0aCAtIHBhZGRpbmcud2lkdGg7XG4gICAgY29uc3QgaCA9IHRoaXMuaGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgLSBwYWRkaW5nLmhlaWdodDtcbiAgICB0aGlzLnhDZW50ZXIgPSBNYXRoLmZsb29yKHRoaXMubGVmdCArIHcgLyAyICsgcGFkZGluZy5sZWZ0KTtcbiAgICB0aGlzLnlDZW50ZXIgPSBNYXRoLmZsb29yKHRoaXMudG9wICsgaCAvIDIgKyBwYWRkaW5nLnRvcCk7XG4gICAgdGhpcy5kcmF3aW5nQXJlYSA9IE1hdGguZmxvb3IoTWF0aC5taW4odywgaCkgLyAyKTtcbiAgfVxuXG4gIGRldGVybWluZURhdGFMaW1pdHMoKSB7XG4gICAgY29uc3Qge21pbiwgbWF4fSA9IHRoaXMuZ2V0TWluTWF4KGZhbHNlKTtcblxuICAgIHRoaXMubWluID0gaXNGaW5pdGUobWluKSAmJiAhaXNOYU4obWluKSA/IG1pbiA6IDA7XG4gICAgdGhpcy5tYXggPSBpc0Zpbml0ZShtYXgpICYmICFpc05hTihtYXgpID8gbWF4IDogMDtcblxuICAgIC8vIENvbW1vbiBiYXNlIGltcGxlbWVudGF0aW9uIHRvIGhhbmRsZSBtaW4sIG1heCwgYmVnaW5BdFplcm9cbiAgICB0aGlzLmhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG51bWJlciBvZiB0aWNrcyBiYXNlZCBvbiB0aGUgc2NhbGUgZGltZW5zaW9uXG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIGNvbXB1dGVUaWNrTGltaXQoKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmRyYXdpbmdBcmVhIC8gZ2V0VGlja0JhY2tkcm9wSGVpZ2h0KHRoaXMub3B0aW9ucykpO1xuICB9XG5cbiAgZ2VuZXJhdGVUaWNrTGFiZWxzKHRpY2tzKSB7XG4gICAgTGluZWFyU2NhbGVCYXNlLnByb3RvdHlwZS5nZW5lcmF0ZVRpY2tMYWJlbHMuY2FsbCh0aGlzLCB0aWNrcyk7XG5cbiAgICAvLyBQb2ludCBsYWJlbHNcbiAgICB0aGlzLl9wb2ludExhYmVscyA9IHRoaXMuZ2V0TGFiZWxzKClcbiAgICAgIC5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGNhbGxDYWxsYmFjayh0aGlzLm9wdGlvbnMucG9pbnRMYWJlbHMuY2FsbGJhY2ssIFt2YWx1ZSwgaW5kZXhdLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIGxhYmVsIHx8IGxhYmVsID09PSAwID8gbGFiZWwgOiAnJztcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKCh2LCBpKSA9PiB0aGlzLmNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGkpKTtcbiAgfVxuXG4gIGZpdCgpIHtcbiAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuXG4gICAgaWYgKG9wdHMuZGlzcGxheSAmJiBvcHRzLnBvaW50TGFiZWxzLmRpc3BsYXkpIHtcbiAgICAgIGZpdFdpdGhQb2ludExhYmVscyh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDZW50ZXJQb2ludCgwLCAwLCAwLCAwKTtcbiAgICB9XG4gIH1cblxuICBzZXRDZW50ZXJQb2ludChsZWZ0TW92ZW1lbnQsIHJpZ2h0TW92ZW1lbnQsIHRvcE1vdmVtZW50LCBib3R0b21Nb3ZlbWVudCkge1xuICAgIHRoaXMueENlbnRlciArPSBNYXRoLmZsb29yKChsZWZ0TW92ZW1lbnQgLSByaWdodE1vdmVtZW50KSAvIDIpO1xuICAgIHRoaXMueUNlbnRlciArPSBNYXRoLmZsb29yKCh0b3BNb3ZlbWVudCAtIGJvdHRvbU1vdmVtZW50KSAvIDIpO1xuICAgIHRoaXMuZHJhd2luZ0FyZWEgLT0gTWF0aC5taW4odGhpcy5kcmF3aW5nQXJlYSAvIDIsIE1hdGgubWF4KGxlZnRNb3ZlbWVudCwgcmlnaHRNb3ZlbWVudCwgdG9wTW92ZW1lbnQsIGJvdHRvbU1vdmVtZW50KSk7XG4gIH1cblxuICBnZXRJbmRleEFuZ2xlKGluZGV4KSB7XG4gICAgY29uc3QgYW5nbGVNdWx0aXBsaWVyID0gVEFVIC8gKHRoaXMuX3BvaW50TGFiZWxzLmxlbmd0aCB8fCAxKTtcbiAgICBjb25zdCBzdGFydEFuZ2xlID0gdGhpcy5vcHRpb25zLnN0YXJ0QW5nbGUgfHwgMDtcblxuICAgIHJldHVybiBfbm9ybWFsaXplQW5nbGUoaW5kZXggKiBhbmdsZU11bHRpcGxpZXIgKyB0b1JhZGlhbnMoc3RhcnRBbmdsZSkpO1xuICB9XG5cbiAgZ2V0RGlzdGFuY2VGcm9tQ2VudGVyRm9yVmFsdWUodmFsdWUpIHtcbiAgICBpZiAoaXNOdWxsT3JVbmRlZih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBOYU47XG4gICAgfVxuXG4gICAgLy8gVGFrZSBpbnRvIGFjY291bnQgaGFsZiBmb250IHNpemUgKyB0aGUgeVBhZGRpbmcgb2YgdGhlIHRvcCB2YWx1ZVxuICAgIGNvbnN0IHNjYWxpbmdGYWN0b3IgPSB0aGlzLmRyYXdpbmdBcmVhIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pO1xuICAgIGlmICh0aGlzLm9wdGlvbnMucmV2ZXJzZSkge1xuICAgICAgcmV0dXJuICh0aGlzLm1heCAtIHZhbHVlKSAqIHNjYWxpbmdGYWN0b3I7XG4gICAgfVxuICAgIHJldHVybiAodmFsdWUgLSB0aGlzLm1pbikgKiBzY2FsaW5nRmFjdG9yO1xuICB9XG5cbiAgZ2V0VmFsdWVGb3JEaXN0YW5jZUZyb21DZW50ZXIoZGlzdGFuY2UpIHtcbiAgICBpZiAoaXNOdWxsT3JVbmRlZihkaXN0YW5jZSkpIHtcbiAgICAgIHJldHVybiBOYU47XG4gICAgfVxuXG4gICAgY29uc3Qgc2NhbGVkRGlzdGFuY2UgPSBkaXN0YW5jZSAvICh0aGlzLmRyYXdpbmdBcmVhIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pKTtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJldmVyc2UgPyB0aGlzLm1heCAtIHNjYWxlZERpc3RhbmNlIDogdGhpcy5taW4gKyBzY2FsZWREaXN0YW5jZTtcbiAgfVxuXG4gIGdldFBvaW50TGFiZWxDb250ZXh0KGluZGV4KSB7XG4gICAgY29uc3QgcG9pbnRMYWJlbHMgPSB0aGlzLl9wb2ludExhYmVscyB8fCBbXTtcblxuICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgcG9pbnRMYWJlbHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBwb2ludExhYmVsID0gcG9pbnRMYWJlbHNbaW5kZXhdO1xuICAgICAgcmV0dXJuIGNyZWF0ZVBvaW50TGFiZWxDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpLCBpbmRleCwgcG9pbnRMYWJlbCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UG9pbnRQb3NpdGlvbihpbmRleCwgZGlzdGFuY2VGcm9tQ2VudGVyLCBhZGRpdGlvbmFsQW5nbGUgPSAwKSB7XG4gICAgY29uc3QgYW5nbGUgPSB0aGlzLmdldEluZGV4QW5nbGUoaW5kZXgpIC0gSEFMRl9QSSArIGFkZGl0aW9uYWxBbmdsZTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogZGlzdGFuY2VGcm9tQ2VudGVyICsgdGhpcy54Q2VudGVyLFxuICAgICAgeTogTWF0aC5zaW4oYW5nbGUpICogZGlzdGFuY2VGcm9tQ2VudGVyICsgdGhpcy55Q2VudGVyLFxuICAgICAgYW5nbGVcbiAgICB9O1xuICB9XG5cbiAgZ2V0UG9pbnRQb3NpdGlvbkZvclZhbHVlKGluZGV4LCB2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmdldFBvaW50UG9zaXRpb24oaW5kZXgsIHRoaXMuZ2V0RGlzdGFuY2VGcm9tQ2VudGVyRm9yVmFsdWUodmFsdWUpKTtcbiAgfVxuXG4gIGdldEJhc2VQb3NpdGlvbihpbmRleCkge1xuICAgIHJldHVybiB0aGlzLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZShpbmRleCB8fCAwLCB0aGlzLmdldEJhc2VWYWx1ZSgpKTtcbiAgfVxuXG4gIGdldFBvaW50TGFiZWxQb3NpdGlvbihpbmRleCkge1xuICAgIGNvbnN0IHtsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b219ID0gdGhpcy5fcG9pbnRMYWJlbEl0ZW1zW2luZGV4XTtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdCxcbiAgICAgIHRvcCxcbiAgICAgIHJpZ2h0LFxuICAgICAgYm90dG9tLFxuICAgIH07XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZHJhd0JhY2tncm91bmQoKSB7XG4gICAgY29uc3Qge2JhY2tncm91bmRDb2xvciwgZ3JpZDoge2NpcmN1bGFyfX0gPSB0aGlzLm9wdGlvbnM7XG4gICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgcGF0aFJhZGl1c0xpbmUodGhpcywgdGhpcy5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZSh0aGlzLl9lbmRWYWx1ZSksIGNpcmN1bGFyLCB0aGlzLl9wb2ludExhYmVscy5sZW5ndGgpO1xuICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IGJhY2tncm91bmRDb2xvcjtcbiAgICAgIGN0eC5maWxsKCk7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBkcmF3R3JpZCgpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IHthbmdsZUxpbmVzLCBncmlkLCBib3JkZXJ9ID0gb3B0cztcbiAgICBjb25zdCBsYWJlbENvdW50ID0gdGhpcy5fcG9pbnRMYWJlbHMubGVuZ3RoO1xuXG4gICAgbGV0IGksIG9mZnNldCwgcG9zaXRpb247XG5cbiAgICBpZiAob3B0cy5wb2ludExhYmVscy5kaXNwbGF5KSB7XG4gICAgICBkcmF3UG9pbnRMYWJlbHModGhpcywgbGFiZWxDb3VudCk7XG4gICAgfVxuXG4gICAgaWYgKGdyaWQuZGlzcGxheSkge1xuICAgICAgdGhpcy50aWNrcy5mb3JFYWNoKCh0aWNrLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggIT09IDApIHtcbiAgICAgICAgICBvZmZzZXQgPSB0aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHRpY2sudmFsdWUpO1xuICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmdldENvbnRleHQoaW5kZXgpO1xuICAgICAgICAgIGNvbnN0IG9wdHNBdEluZGV4ID0gZ3JpZC5zZXRDb250ZXh0KGNvbnRleHQpO1xuICAgICAgICAgIGNvbnN0IG9wdHNBdEluZGV4Qm9yZGVyID0gYm9yZGVyLnNldENvbnRleHQoY29udGV4dCk7XG5cbiAgICAgICAgICBkcmF3UmFkaXVzTGluZSh0aGlzLCBvcHRzQXRJbmRleCwgb2Zmc2V0LCBsYWJlbENvdW50LCBvcHRzQXRJbmRleEJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChhbmdsZUxpbmVzLmRpc3BsYXkpIHtcbiAgICAgIGN0eC5zYXZlKCk7XG5cbiAgICAgIGZvciAoaSA9IGxhYmVsQ291bnQgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCBvcHRzQXRJbmRleCA9IGFuZ2xlTGluZXMuc2V0Q29udGV4dCh0aGlzLmdldFBvaW50TGFiZWxDb250ZXh0KGkpKTtcbiAgICAgICAgY29uc3Qge2NvbG9yLCBsaW5lV2lkdGh9ID0gb3B0c0F0SW5kZXg7XG5cbiAgICAgICAgaWYgKCFsaW5lV2lkdGggfHwgIWNvbG9yKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjdHgubGluZVdpZHRoID0gbGluZVdpZHRoO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcblxuICAgICAgICBjdHguc2V0TGluZURhc2gob3B0c0F0SW5kZXguYm9yZGVyRGFzaCk7XG4gICAgICAgIGN0eC5saW5lRGFzaE9mZnNldCA9IG9wdHNBdEluZGV4LmJvcmRlckRhc2hPZmZzZXQ7XG5cbiAgICAgICAgb2Zmc2V0ID0gdGhpcy5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZShvcHRzLnRpY2tzLnJldmVyc2UgPyB0aGlzLm1pbiA6IHRoaXMubWF4KTtcbiAgICAgICAgcG9zaXRpb24gPSB0aGlzLmdldFBvaW50UG9zaXRpb24oaSwgb2Zmc2V0KTtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKHRoaXMueENlbnRlciwgdGhpcy55Q2VudGVyKTtcbiAgICAgICAgY3R4LmxpbmVUbyhwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgfVxuXG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBkcmF3Qm9yZGVyKCkge31cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZHJhd0xhYmVscygpIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcbiAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IHRpY2tPcHRzID0gb3B0cy50aWNrcztcblxuICAgIGlmICghdGlja09wdHMuZGlzcGxheSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0QW5nbGUgPSB0aGlzLmdldEluZGV4QW5nbGUoMCk7XG4gICAgbGV0IG9mZnNldCwgd2lkdGg7XG5cbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC50cmFuc2xhdGUodGhpcy54Q2VudGVyLCB0aGlzLnlDZW50ZXIpO1xuICAgIGN0eC5yb3RhdGUoc3RhcnRBbmdsZSk7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuICAgIHRoaXMudGlja3MuZm9yRWFjaCgodGljaywgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCA9PT0gMCAmJiAhb3B0cy5yZXZlcnNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3B0c0F0SW5kZXggPSB0aWNrT3B0cy5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dChpbmRleCkpO1xuICAgICAgY29uc3QgdGlja0ZvbnQgPSB0b0ZvbnQob3B0c0F0SW5kZXguZm9udCk7XG4gICAgICBvZmZzZXQgPSB0aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHRoaXMudGlja3NbaW5kZXhdLnZhbHVlKTtcblxuICAgICAgaWYgKG9wdHNBdEluZGV4LnNob3dMYWJlbEJhY2tkcm9wKSB7XG4gICAgICAgIGN0eC5mb250ID0gdGlja0ZvbnQuc3RyaW5nO1xuICAgICAgICB3aWR0aCA9IGN0eC5tZWFzdXJlVGV4dCh0aWNrLmxhYmVsKS53aWR0aDtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdHNBdEluZGV4LmJhY2tkcm9wQ29sb3I7XG5cbiAgICAgICAgY29uc3QgcGFkZGluZyA9IHRvUGFkZGluZyhvcHRzQXRJbmRleC5iYWNrZHJvcFBhZGRpbmcpO1xuICAgICAgICBjdHguZmlsbFJlY3QoXG4gICAgICAgICAgLXdpZHRoIC8gMiAtIHBhZGRpbmcubGVmdCxcbiAgICAgICAgICAtb2Zmc2V0IC0gdGlja0ZvbnQuc2l6ZSAvIDIgLSBwYWRkaW5nLnRvcCxcbiAgICAgICAgICB3aWR0aCArIHBhZGRpbmcud2lkdGgsXG4gICAgICAgICAgdGlja0ZvbnQuc2l6ZSArIHBhZGRpbmcuaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJlbmRlclRleHQoY3R4LCB0aWNrLmxhYmVsLCAwLCAtb2Zmc2V0LCB0aWNrRm9udCwge1xuICAgICAgICBjb2xvcjogb3B0c0F0SW5kZXguY29sb3IsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZHJhd1RpdGxlKCkge31cbn1cbiIsICJpbXBvcnQgYWRhcHRlcnMgZnJvbSAnLi4vY29yZS9jb3JlLmFkYXB0ZXJzLmpzJztcbmltcG9ydCB7Y2FsbGJhY2sgYXMgY2FsbCwgaXNGaW5pdGUsIGlzTnVsbE9yVW5kZWYsIG1lcmdlSWYsIHZhbHVlT3JEZWZhdWx0fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29yZS5qcyc7XG5pbXBvcnQge3RvUmFkaWFucywgaXNOdW1iZXIsIF9saW1pdFZhbHVlfSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMubWF0aC5qcyc7XG5pbXBvcnQgU2NhbGUgZnJvbSAnLi4vY29yZS9jb3JlLnNjYWxlLmpzJztcbmltcG9ydCB7X2FycmF5VW5pcXVlLCBfZmlsdGVyQmV0d2VlbiwgX2xvb2t1cH0gZnJvbSAnLi4vaGVscGVycy9oZWxwZXJzLmNvbGxlY3Rpb24uanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi9jb3JlL2NvcmUuYWRhcHRlcnMuanMnKS5UaW1lVW5pdCB9IFVuaXRcbiAqIEB0eXBlZGVmIHt7Y29tbW9uOiBib29sZWFuLCBzaXplOiBudW1iZXIsIHN0ZXBzPzogbnVtYmVyfX0gSW50ZXJ2YWxcbiAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuLi9jb3JlL2NvcmUuYWRhcHRlcnMuanMnKS5EYXRlQWRhcHRlciB9IERhdGVBZGFwdGVyXG4gKi9cblxuLyoqXG4gKiBAdHlwZSB7T2JqZWN0PFVuaXQsIEludGVydmFsPn1cbiAqL1xuY29uc3QgSU5URVJWQUxTID0ge1xuICBtaWxsaXNlY29uZDoge2NvbW1vbjogdHJ1ZSwgc2l6ZTogMSwgc3RlcHM6IDEwMDB9LFxuICBzZWNvbmQ6IHtjb21tb246IHRydWUsIHNpemU6IDEwMDAsIHN0ZXBzOiA2MH0sXG4gIG1pbnV0ZToge2NvbW1vbjogdHJ1ZSwgc2l6ZTogNjAwMDAsIHN0ZXBzOiA2MH0sXG4gIGhvdXI6IHtjb21tb246IHRydWUsIHNpemU6IDM2MDAwMDAsIHN0ZXBzOiAyNH0sXG4gIGRheToge2NvbW1vbjogdHJ1ZSwgc2l6ZTogODY0MDAwMDAsIHN0ZXBzOiAzMH0sXG4gIHdlZWs6IHtjb21tb246IGZhbHNlLCBzaXplOiA2MDQ4MDAwMDAsIHN0ZXBzOiA0fSxcbiAgbW9udGg6IHtjb21tb246IHRydWUsIHNpemU6IDIuNjI4ZTksIHN0ZXBzOiAxMn0sXG4gIHF1YXJ0ZXI6IHtjb21tb246IGZhbHNlLCBzaXplOiA3Ljg4NGU5LCBzdGVwczogNH0sXG4gIHllYXI6IHtjb21tb246IHRydWUsIHNpemU6IDMuMTU0ZTEwfVxufTtcblxuLyoqXG4gKiBAdHlwZSB7VW5pdFtdfVxuICovXG5jb25zdCBVTklUUyA9IC8qKiBAdHlwZSBVbml0W10gKi8gLyogI19fUFVSRV9fICovIChPYmplY3Qua2V5cyhJTlRFUlZBTFMpKTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gYVxuICogQHBhcmFtIHtudW1iZXJ9IGJcbiAqL1xuZnVuY3Rpb24gc29ydGVyKGEsIGIpIHtcbiAgcmV0dXJuIGEgLSBiO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7VGltZVNjYWxlfSBzY2FsZVxuICogQHBhcmFtIHsqfSBpbnB1dFxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBwYXJzZShzY2FsZSwgaW5wdXQpIHtcbiAgaWYgKGlzTnVsbE9yVW5kZWYoaW5wdXQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBhZGFwdGVyID0gc2NhbGUuX2FkYXB0ZXI7XG4gIGNvbnN0IHtwYXJzZXIsIHJvdW5kLCBpc29XZWVrZGF5fSA9IHNjYWxlLl9wYXJzZU9wdHM7XG4gIGxldCB2YWx1ZSA9IGlucHV0O1xuXG4gIGlmICh0eXBlb2YgcGFyc2VyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFsdWUgPSBwYXJzZXIodmFsdWUpO1xuICB9XG5cbiAgLy8gT25seSBwYXJzZSBpZiBpdHMgbm90IGEgdGltZXN0YW1wIGFscmVhZHlcbiAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IHR5cGVvZiBwYXJzZXIgPT09ICdzdHJpbmcnXG4gICAgICA/IGFkYXB0ZXIucGFyc2UodmFsdWUsIC8qKiBAdHlwZSB7VW5pdH0gKi8gKHBhcnNlcikpXG4gICAgICA6IGFkYXB0ZXIucGFyc2UodmFsdWUpO1xuICB9XG5cbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAocm91bmQpIHtcbiAgICB2YWx1ZSA9IHJvdW5kID09PSAnd2VlaycgJiYgKGlzTnVtYmVyKGlzb1dlZWtkYXkpIHx8IGlzb1dlZWtkYXkgPT09IHRydWUpXG4gICAgICA/IGFkYXB0ZXIuc3RhcnRPZih2YWx1ZSwgJ2lzb1dlZWsnLCBpc29XZWVrZGF5KVxuICAgICAgOiBhZGFwdGVyLnN0YXJ0T2YodmFsdWUsIHJvdW5kKTtcbiAgfVxuXG4gIHJldHVybiArdmFsdWU7XG59XG5cbi8qKlxuICogRmlndXJlcyBvdXQgd2hhdCB1bml0IHJlc3VsdHMgaW4gYW4gYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGF1dG8tZ2VuZXJhdGVkIHRpY2tzXG4gKiBAcGFyYW0ge1VuaXR9IG1pblVuaXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBjYXBhY2l0eVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBkZXRlcm1pbmVVbml0Rm9yQXV0b1RpY2tzKG1pblVuaXQsIG1pbiwgbWF4LCBjYXBhY2l0eSkge1xuICBjb25zdCBpbGVuID0gVU5JVFMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSBVTklUUy5pbmRleE9mKG1pblVuaXQpOyBpIDwgaWxlbiAtIDE7ICsraSkge1xuICAgIGNvbnN0IGludGVydmFsID0gSU5URVJWQUxTW1VOSVRTW2ldXTtcbiAgICBjb25zdCBmYWN0b3IgPSBpbnRlcnZhbC5zdGVwcyA/IGludGVydmFsLnN0ZXBzIDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cbiAgICBpZiAoaW50ZXJ2YWwuY29tbW9uICYmIE1hdGguY2VpbCgobWF4IC0gbWluKSAvIChmYWN0b3IgKiBpbnRlcnZhbC5zaXplKSkgPD0gY2FwYWNpdHkpIHtcbiAgICAgIHJldHVybiBVTklUU1tpXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gVU5JVFNbaWxlbiAtIDFdO1xufVxuXG4vKipcbiAqIEZpZ3VyZXMgb3V0IHdoYXQgdW5pdCB0byBmb3JtYXQgYSBzZXQgb2YgdGlja3Mgd2l0aFxuICogQHBhcmFtIHtUaW1lU2NhbGV9IHNjYWxlXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtVGlja3NcbiAqIEBwYXJhbSB7VW5pdH0gbWluVW5pdFxuICogQHBhcmFtIHtudW1iZXJ9IG1pblxuICogQHBhcmFtIHtudW1iZXJ9IG1heFxuICogQHJldHVybiB7VW5pdH1cbiAqL1xuZnVuY3Rpb24gZGV0ZXJtaW5lVW5pdEZvckZvcm1hdHRpbmcoc2NhbGUsIG51bVRpY2tzLCBtaW5Vbml0LCBtaW4sIG1heCkge1xuICBmb3IgKGxldCBpID0gVU5JVFMubGVuZ3RoIC0gMTsgaSA+PSBVTklUUy5pbmRleE9mKG1pblVuaXQpOyBpLS0pIHtcbiAgICBjb25zdCB1bml0ID0gVU5JVFNbaV07XG4gICAgaWYgKElOVEVSVkFMU1t1bml0XS5jb21tb24gJiYgc2NhbGUuX2FkYXB0ZXIuZGlmZihtYXgsIG1pbiwgdW5pdCkgPj0gbnVtVGlja3MgLSAxKSB7XG4gICAgICByZXR1cm4gdW5pdDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gVU5JVFNbbWluVW5pdCA/IFVOSVRTLmluZGV4T2YobWluVW5pdCkgOiAwXTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1VuaXR9IHVuaXRcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gZGV0ZXJtaW5lTWFqb3JVbml0KHVuaXQpIHtcbiAgZm9yIChsZXQgaSA9IFVOSVRTLmluZGV4T2YodW5pdCkgKyAxLCBpbGVuID0gVU5JVFMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgaWYgKElOVEVSVkFMU1tVTklUU1tpXV0uY29tbW9uKSB7XG4gICAgICByZXR1cm4gVU5JVFNbaV07XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IHRpY2tzXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZVxuICogQHBhcmFtIHtudW1iZXJbXX0gW3RpbWVzdGFtcHNdIC0gaWYgZGVmaW5lZCwgc25hcCB0byB0aGVzZSB0aW1lc3RhbXBzXG4gKi9cbmZ1bmN0aW9uIGFkZFRpY2sodGlja3MsIHRpbWUsIHRpbWVzdGFtcHMpIHtcbiAgaWYgKCF0aW1lc3RhbXBzKSB7XG4gICAgdGlja3NbdGltZV0gPSB0cnVlO1xuICB9IGVsc2UgaWYgKHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgY29uc3Qge2xvLCBoaX0gPSBfbG9va3VwKHRpbWVzdGFtcHMsIHRpbWUpO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRpbWVzdGFtcHNbbG9dID49IHRpbWUgPyB0aW1lc3RhbXBzW2xvXSA6IHRpbWVzdGFtcHNbaGldO1xuICAgIHRpY2tzW3RpbWVzdGFtcF0gPSB0cnVlO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtUaW1lU2NhbGV9IHNjYWxlXG4gKiBAcGFyYW0ge29iamVjdFtdfSB0aWNrc1xuICogQHBhcmFtIHtvYmplY3R9IG1hcFxuICogQHBhcmFtIHtVbml0fSBtYWpvclVuaXRcbiAqIEByZXR1cm4ge29iamVjdFtdfVxuICovXG5mdW5jdGlvbiBzZXRNYWpvclRpY2tzKHNjYWxlLCB0aWNrcywgbWFwLCBtYWpvclVuaXQpIHtcbiAgY29uc3QgYWRhcHRlciA9IHNjYWxlLl9hZGFwdGVyO1xuICBjb25zdCBmaXJzdCA9ICthZGFwdGVyLnN0YXJ0T2YodGlja3NbMF0udmFsdWUsIG1ham9yVW5pdCk7XG4gIGNvbnN0IGxhc3QgPSB0aWNrc1t0aWNrcy5sZW5ndGggLSAxXS52YWx1ZTtcbiAgbGV0IG1ham9yLCBpbmRleDtcblxuICBmb3IgKG1ham9yID0gZmlyc3Q7IG1ham9yIDw9IGxhc3Q7IG1ham9yID0gK2FkYXB0ZXIuYWRkKG1ham9yLCAxLCBtYWpvclVuaXQpKSB7XG4gICAgaW5kZXggPSBtYXBbbWFqb3JdO1xuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICB0aWNrc1tpbmRleF0ubWFqb3IgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGlja3M7XG59XG5cbi8qKlxuICogQHBhcmFtIHtUaW1lU2NhbGV9IHNjYWxlXG4gKiBAcGFyYW0ge251bWJlcltdfSB2YWx1ZXNcbiAqIEBwYXJhbSB7VW5pdHx1bmRlZmluZWR9IFttYWpvclVuaXRdXG4gKiBAcmV0dXJuIHtvYmplY3RbXX1cbiAqL1xuZnVuY3Rpb24gdGlja3NGcm9tVGltZXN0YW1wcyhzY2FsZSwgdmFsdWVzLCBtYWpvclVuaXQpIHtcbiAgY29uc3QgdGlja3MgPSBbXTtcbiAgLyoqIEB0eXBlIHtPYmplY3Q8bnVtYmVyLG9iamVjdD59ICovXG4gIGNvbnN0IG1hcCA9IHt9O1xuICBjb25zdCBpbGVuID0gdmFsdWVzLmxlbmd0aDtcbiAgbGV0IGksIHZhbHVlO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBpbGVuOyArK2kpIHtcbiAgICB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICBtYXBbdmFsdWVdID0gaTtcblxuICAgIHRpY2tzLnB1c2goe1xuICAgICAgdmFsdWUsXG4gICAgICBtYWpvcjogZmFsc2VcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdlIHNldCB0aGUgbWFqb3IgdGlja3Mgc2VwYXJhdGVseSBmcm9tIHRoZSBhYm92ZSBsb29wIGJlY2F1c2UgY2FsbGluZyBzdGFydE9mIGZvciBldmVyeSB0aWNrXG4gIC8vIGlzIGV4cGVuc2l2ZSB3aGVuIHRoZXJlIGlzIGEgbGFyZ2UgbnVtYmVyIG9mIHRpY2tzXG4gIHJldHVybiAoaWxlbiA9PT0gMCB8fCAhbWFqb3JVbml0KSA/IHRpY2tzIDogc2V0TWFqb3JUaWNrcyhzY2FsZSwgdGlja3MsIG1hcCwgbWFqb3JVbml0KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZVNjYWxlIGV4dGVuZHMgU2NhbGUge1xuXG4gIHN0YXRpYyBpZCA9ICd0aW1lJztcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcbiAgICAvKipcbiAgICAgKiBTY2FsZSBib3VuZGFyeSBzdHJhdGVneSAoYnlwYXNzZWQgYnkgbWluL21heCB0aW1lIG9wdGlvbnMpXG4gICAgICogLSBgZGF0YWA6IG1ha2Ugc3VyZSBkYXRhIGFyZSBmdWxseSB2aXNpYmxlLCB0aWNrcyBvdXRzaWRlIGFyZSByZW1vdmVkXG4gICAgICogLSBgdGlja3NgOiBtYWtlIHN1cmUgdGlja3MgYXJlIGZ1bGx5IHZpc2libGUsIGRhdGEgb3V0c2lkZSBhcmUgdHJ1bmNhdGVkXG4gICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vY2hhcnRqcy9DaGFydC5qcy9wdWxsLzQ1NTZcbiAgICAgKiBAc2luY2UgMi43LjBcbiAgICAgKi9cbiAgICBib3VuZHM6ICdkYXRhJyxcblxuICAgIGFkYXB0ZXJzOiB7fSxcbiAgICB0aW1lOiB7XG4gICAgICBwYXJzZXI6IGZhbHNlLCAvLyBmYWxzZSA9PSBhIHBhdHRlcm4gc3RyaW5nIGZyb20gb3IgYSBjdXN0b20gY2FsbGJhY2sgdGhhdCBjb252ZXJ0cyBpdHMgYXJndW1lbnQgdG8gYSB0aW1lc3RhbXBcbiAgICAgIHVuaXQ6IGZhbHNlLCAvLyBmYWxzZSA9PSBhdXRvbWF0aWMgb3Igb3ZlcnJpZGUgd2l0aCB3ZWVrLCBtb250aCwgeWVhciwgZXRjLlxuICAgICAgcm91bmQ6IGZhbHNlLCAvLyBub25lLCBvciBvdmVycmlkZSB3aXRoIHdlZWssIG1vbnRoLCB5ZWFyLCBldGMuXG4gICAgICBpc29XZWVrZGF5OiBmYWxzZSwgLy8gb3ZlcnJpZGUgd2VlayBzdGFydCBkYXlcbiAgICAgIG1pblVuaXQ6ICdtaWxsaXNlY29uZCcsXG4gICAgICBkaXNwbGF5Rm9ybWF0czoge31cbiAgICB9LFxuICAgIHRpY2tzOiB7XG4gICAgICAvKipcbiAgICAgICAqIFRpY2tzIGdlbmVyYXRpb24gaW5wdXQgdmFsdWVzOlxuICAgICAgICogLSAnYXV0byc6IGdlbmVyYXRlcyBcIm9wdGltYWxcIiB0aWNrcyBiYXNlZCBvbiBzY2FsZSBzaXplIGFuZCB0aW1lIG9wdGlvbnMuXG4gICAgICAgKiAtICdkYXRhJzogZ2VuZXJhdGVzIHRpY2tzIGZyb20gZGF0YSAoaW5jbHVkaW5nIGxhYmVscyBmcm9tIGRhdGEge3R8eHx5fSBvYmplY3RzKS5cbiAgICAgICAqIC0gJ2xhYmVscyc6IGdlbmVyYXRlcyB0aWNrcyBmcm9tIHVzZXIgZ2l2ZW4gYGRhdGEubGFiZWxzYCB2YWx1ZXMgT05MWS5cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2NoYXJ0anMvQ2hhcnQuanMvcHVsbC80NTA3XG4gICAgICAgKiBAc2luY2UgMi43LjBcbiAgICAgICAqL1xuICAgICAgc291cmNlOiAnYXV0bycsXG5cbiAgICAgIGNhbGxiYWNrOiBmYWxzZSxcblxuICAgICAgbWFqb3I6IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuXHQgKi9cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAvKiogQHR5cGUge3tkYXRhOiBudW1iZXJbXSwgbGFiZWxzOiBudW1iZXJbXSwgYWxsOiBudW1iZXJbXX19ICovXG4gICAgdGhpcy5fY2FjaGUgPSB7XG4gICAgICBkYXRhOiBbXSxcbiAgICAgIGxhYmVsczogW10sXG4gICAgICBhbGw6IFtdXG4gICAgfTtcblxuICAgIC8qKiBAdHlwZSB7VW5pdH0gKi9cbiAgICB0aGlzLl91bml0ID0gJ2RheSc7XG4gICAgLyoqIEB0eXBlIHtVbml0PX0gKi9cbiAgICB0aGlzLl9tYWpvclVuaXQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fb2Zmc2V0cyA9IHt9O1xuICAgIHRoaXMuX25vcm1hbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9wYXJzZU9wdHMgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpbml0KHNjYWxlT3B0cywgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgdGltZSA9IHNjYWxlT3B0cy50aW1lIHx8IChzY2FsZU9wdHMudGltZSA9IHt9KTtcbiAgICAvKiogQHR5cGUge0RhdGVBZGFwdGVyfSAqL1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLl9hZGFwdGVyID0gbmV3IGFkYXB0ZXJzLl9kYXRlKHNjYWxlT3B0cy5hZGFwdGVycy5kYXRlKTtcblxuICAgIGFkYXB0ZXIuaW5pdChvcHRzKTtcblxuICAgIC8vIEJhY2t3YXJkIGNvbXBhdGliaWxpdHk6IGJlZm9yZSBpbnRyb2R1Y2luZyBhZGFwdGVyLCBgZGlzcGxheUZvcm1hdHNgIHdhc1xuICAgIC8vIHN1cHBvc2VkIHRvIGNvbnRhaW4gKmFsbCogdW5pdC9zdHJpbmcgcGFpcnMgYnV0IHRoaXMgY2FuJ3QgYmUgcmVzb2x2ZWRcbiAgICAvLyB3aGVuIGxvYWRpbmcgdGhlIHNjYWxlIChhZGFwdGVycyBhcmUgbG9hZGVkIGFmdGVyd2FyZCksIHNvIGxldCdzIHBvcHVsYXRlXG4gICAgLy8gbWlzc2luZyBmb3JtYXRzIG9uIHVwZGF0ZVxuICAgIG1lcmdlSWYodGltZS5kaXNwbGF5Rm9ybWF0cywgYWRhcHRlci5mb3JtYXRzKCkpO1xuXG4gICAgdGhpcy5fcGFyc2VPcHRzID0ge1xuICAgICAgcGFyc2VyOiB0aW1lLnBhcnNlcixcbiAgICAgIHJvdW5kOiB0aW1lLnJvdW5kLFxuICAgICAgaXNvV2Vla2RheTogdGltZS5pc29XZWVrZGF5XG4gICAgfTtcblxuICAgIHN1cGVyLmluaXQoc2NhbGVPcHRzKTtcblxuICAgIHRoaXMuX25vcm1hbGl6ZWQgPSBvcHRzLm5vcm1hbGl6ZWQ7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHsqfSByYXdcblx0ICogQHBhcmFtIHtudW1iZXI/fSBbaW5kZXhdXG5cdCAqIEByZXR1cm4ge251bWJlcn1cblx0ICovXG4gIHBhcnNlKHJhdywgaW5kZXgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIGlmIChyYXcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZSh0aGlzLCByYXcpO1xuICB9XG5cbiAgYmVmb3JlTGF5b3V0KCkge1xuICAgIHN1cGVyLmJlZm9yZUxheW91dCgpO1xuICAgIHRoaXMuX2NhY2hlID0ge1xuICAgICAgZGF0YTogW10sXG4gICAgICBsYWJlbHM6IFtdLFxuICAgICAgYWxsOiBbXVxuICAgIH07XG4gIH1cblxuICBkZXRlcm1pbmVEYXRhTGltaXRzKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgYWRhcHRlciA9IHRoaXMuX2FkYXB0ZXI7XG4gICAgY29uc3QgdW5pdCA9IG9wdGlvbnMudGltZS51bml0IHx8ICdkYXknO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICBsZXQge21pbiwgbWF4LCBtaW5EZWZpbmVkLCBtYXhEZWZpbmVkfSA9IHRoaXMuZ2V0VXNlckJvdW5kcygpO1xuXG4gICAgLyoqXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGJvdW5kc1xuXHRcdCAqL1xuICAgIGZ1bmN0aW9uIF9hcHBseUJvdW5kcyhib3VuZHMpIHtcbiAgICAgIGlmICghbWluRGVmaW5lZCAmJiAhaXNOYU4oYm91bmRzLm1pbikpIHtcbiAgICAgICAgbWluID0gTWF0aC5taW4obWluLCBib3VuZHMubWluKTtcbiAgICAgIH1cbiAgICAgIGlmICghbWF4RGVmaW5lZCAmJiAhaXNOYU4oYm91bmRzLm1heCkpIHtcbiAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBib3VuZHMubWF4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIHVzZXIgcHJvdmlkZWQgYG1pbmAgYW5kIGBtYXhgIGxhYmVscyAvIGRhdGEgYm91bmRzIGNhbiBiZSBpZ25vcmVkXG4gICAgaWYgKCFtaW5EZWZpbmVkIHx8ICFtYXhEZWZpbmVkKSB7XG4gICAgICAvLyBMYWJlbHMgYXJlIGFsd2F5cyBjb25zaWRlcmVkLCB3aGVuIHVzZXIgZGlkIG5vdCBmb3JjZSBib3VuZHNcbiAgICAgIF9hcHBseUJvdW5kcyh0aGlzLl9nZXRMYWJlbEJvdW5kcygpKTtcblxuICAgICAgLy8gSWYgYGJvdW5kc2AgaXMgYCd0aWNrcydgIGFuZCBgdGlja3Muc291cmNlYCBpcyBgJ2xhYmVscydgLFxuICAgICAgLy8gZGF0YSBib3VuZHMgYXJlIGlnbm9yZWQgKGFuZCBkb24ndCBuZWVkIHRvIGJlIGRldGVybWluZWQpXG4gICAgICBpZiAob3B0aW9ucy5ib3VuZHMgIT09ICd0aWNrcycgfHwgb3B0aW9ucy50aWNrcy5zb3VyY2UgIT09ICdsYWJlbHMnKSB7XG4gICAgICAgIF9hcHBseUJvdW5kcyh0aGlzLmdldE1pbk1heChmYWxzZSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1pbiA9IGlzRmluaXRlKG1pbikgJiYgIWlzTmFOKG1pbikgPyBtaW4gOiArYWRhcHRlci5zdGFydE9mKERhdGUubm93KCksIHVuaXQpO1xuICAgIG1heCA9IGlzRmluaXRlKG1heCkgJiYgIWlzTmFOKG1heCkgPyBtYXggOiArYWRhcHRlci5lbmRPZihEYXRlLm5vdygpLCB1bml0KSArIDE7XG5cbiAgICAvLyBNYWtlIHN1cmUgdGhhdCBtYXggaXMgc3RyaWN0bHkgaGlnaGVyIHRoYW4gbWluIChyZXF1aXJlZCBieSB0aGUgdGltZXNlcmllcyBsb29rdXAgdGFibGUpXG4gICAgdGhpcy5taW4gPSBNYXRoLm1pbihtaW4sIG1heCAtIDEpO1xuICAgIHRoaXMubWF4ID0gTWF0aC5tYXgobWluICsgMSwgbWF4KTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2dldExhYmVsQm91bmRzKCkge1xuICAgIGNvbnN0IGFyciA9IHRoaXMuZ2V0TGFiZWxUaW1lc3RhbXBzKCk7XG4gICAgbGV0IG1pbiA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICBsZXQgbWF4ID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuXG4gICAgaWYgKGFyci5sZW5ndGgpIHtcbiAgICAgIG1pbiA9IGFyclswXTtcbiAgICAgIG1heCA9IGFyclthcnIubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiB7bWluLCBtYXh9O1xuICB9XG5cbiAgLyoqXG5cdCAqIEByZXR1cm4ge29iamVjdFtdfVxuXHQgKi9cbiAgYnVpbGRUaWNrcygpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IHRpbWVPcHRzID0gb3B0aW9ucy50aW1lO1xuICAgIGNvbnN0IHRpY2tPcHRzID0gb3B0aW9ucy50aWNrcztcbiAgICBjb25zdCB0aW1lc3RhbXBzID0gdGlja09wdHMuc291cmNlID09PSAnbGFiZWxzJyA/IHRoaXMuZ2V0TGFiZWxUaW1lc3RhbXBzKCkgOiB0aGlzLl9nZW5lcmF0ZSgpO1xuXG4gICAgaWYgKG9wdGlvbnMuYm91bmRzID09PSAndGlja3MnICYmIHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLm1pbiA9IHRoaXMuX3VzZXJNaW4gfHwgdGltZXN0YW1wc1swXTtcbiAgICAgIHRoaXMubWF4ID0gdGhpcy5fdXNlck1heCB8fCB0aW1lc3RhbXBzW3RpbWVzdGFtcHMubGVuZ3RoIC0gMV07XG4gICAgfVxuXG4gICAgY29uc3QgbWluID0gdGhpcy5taW47XG4gICAgY29uc3QgbWF4ID0gdGhpcy5tYXg7XG5cbiAgICBjb25zdCB0aWNrcyA9IF9maWx0ZXJCZXR3ZWVuKHRpbWVzdGFtcHMsIG1pbiwgbWF4KTtcblxuICAgIC8vIFBSSVZBVEVcbiAgICAvLyBkZXRlcm1pbmVVbml0Rm9yRm9ybWF0dGluZyByZWxpZXMgb24gdGhlIG51bWJlciBvZiB0aWNrcyBzbyB3ZSBkb24ndCB1c2UgaXQgd2hlblxuICAgIC8vIGF1dG9Ta2lwIGlzIGVuYWJsZWQgYmVjYXVzZSB3ZSBkb24ndCB5ZXQga25vdyB3aGF0IHRoZSBmaW5hbCBudW1iZXIgb2YgdGlja3Mgd2lsbCBiZVxuICAgIHRoaXMuX3VuaXQgPSB0aW1lT3B0cy51bml0IHx8ICh0aWNrT3B0cy5hdXRvU2tpcFxuICAgICAgPyBkZXRlcm1pbmVVbml0Rm9yQXV0b1RpY2tzKHRpbWVPcHRzLm1pblVuaXQsIHRoaXMubWluLCB0aGlzLm1heCwgdGhpcy5fZ2V0TGFiZWxDYXBhY2l0eShtaW4pKVxuICAgICAgOiBkZXRlcm1pbmVVbml0Rm9yRm9ybWF0dGluZyh0aGlzLCB0aWNrcy5sZW5ndGgsIHRpbWVPcHRzLm1pblVuaXQsIHRoaXMubWluLCB0aGlzLm1heCkpO1xuICAgIHRoaXMuX21ham9yVW5pdCA9ICF0aWNrT3B0cy5tYWpvci5lbmFibGVkIHx8IHRoaXMuX3VuaXQgPT09ICd5ZWFyJyA/IHVuZGVmaW5lZFxuICAgICAgOiBkZXRlcm1pbmVNYWpvclVuaXQodGhpcy5fdW5pdCk7XG4gICAgdGhpcy5pbml0T2Zmc2V0cyh0aW1lc3RhbXBzKTtcblxuICAgIGlmIChvcHRpb25zLnJldmVyc2UpIHtcbiAgICAgIHRpY2tzLnJldmVyc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGlja3NGcm9tVGltZXN0YW1wcyh0aGlzLCB0aWNrcywgdGhpcy5fbWFqb3JVbml0KTtcbiAgfVxuXG4gIGFmdGVyQXV0b1NraXAoKSB7XG4gICAgLy8gT2Zmc2V0cyBmb3IgYmFyIGNoYXJ0cyBuZWVkIHRvIGJlIGhhbmRsZWQgd2l0aCB0aGUgYXV0byBza2lwcGVkXG4gICAgLy8gdGlja3MuIE9uY2UgdGlja3MgaGF2ZSBiZWVuIHNraXBwZWQsIHdlIHJlLWNvbXB1dGUgdGhlIG9mZnNldHMuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5vZmZzZXRBZnRlckF1dG9za2lwKSB7XG4gICAgICB0aGlzLmluaXRPZmZzZXRzKHRoaXMudGlja3MubWFwKHRpY2sgPT4gK3RpY2sudmFsdWUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogUmV0dXJucyB0aGUgc3RhcnQgYW5kIGVuZCBvZmZzZXRzIGZyb20gZWRnZXMgaW4gdGhlIGZvcm0gb2Yge3N0YXJ0LCBlbmR9XG5cdCAqIHdoZXJlIGVhY2ggdmFsdWUgaXMgYSByZWxhdGl2ZSB3aWR0aCB0byB0aGUgc2NhbGUgYW5kIHJhbmdlcyBiZXR3ZWVuIDAgYW5kIDEuXG5cdCAqIFRoZXkgYWRkIGV4dHJhIG1hcmdpbnMgb24gdGhlIGJvdGggc2lkZXMgYnkgc2NhbGluZyBkb3duIHRoZSBvcmlnaW5hbCBzY2FsZS5cblx0ICogT2Zmc2V0cyBhcmUgYWRkZWQgd2hlbiB0aGUgYG9mZnNldGAgb3B0aW9uIGlzIHRydWUuXG5cdCAqIEBwYXJhbSB7bnVtYmVyW119IHRpbWVzdGFtcHNcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgaW5pdE9mZnNldHModGltZXN0YW1wcyA9IFtdKSB7XG4gICAgbGV0IHN0YXJ0ID0gMDtcbiAgICBsZXQgZW5kID0gMDtcbiAgICBsZXQgZmlyc3QsIGxhc3Q7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLm9mZnNldCAmJiB0aW1lc3RhbXBzLmxlbmd0aCkge1xuICAgICAgZmlyc3QgPSB0aGlzLmdldERlY2ltYWxGb3JWYWx1ZSh0aW1lc3RhbXBzWzBdKTtcbiAgICAgIGlmICh0aW1lc3RhbXBzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBzdGFydCA9IDEgLSBmaXJzdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0ID0gKHRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHRpbWVzdGFtcHNbMV0pIC0gZmlyc3QpIC8gMjtcbiAgICAgIH1cbiAgICAgIGxhc3QgPSB0aGlzLmdldERlY2ltYWxGb3JWYWx1ZSh0aW1lc3RhbXBzW3RpbWVzdGFtcHMubGVuZ3RoIC0gMV0pO1xuICAgICAgaWYgKHRpbWVzdGFtcHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGVuZCA9IGxhc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQgPSAobGFzdCAtIHRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHRpbWVzdGFtcHNbdGltZXN0YW1wcy5sZW5ndGggLSAyXSkpIC8gMjtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbGltaXQgPSB0aW1lc3RhbXBzLmxlbmd0aCA8IDMgPyAwLjUgOiAwLjI1O1xuICAgIHN0YXJ0ID0gX2xpbWl0VmFsdWUoc3RhcnQsIDAsIGxpbWl0KTtcbiAgICBlbmQgPSBfbGltaXRWYWx1ZShlbmQsIDAsIGxpbWl0KTtcblxuICAgIHRoaXMuX29mZnNldHMgPSB7c3RhcnQsIGVuZCwgZmFjdG9yOiAxIC8gKHN0YXJ0ICsgMSArIGVuZCl9O1xuICB9XG5cbiAgLyoqXG5cdCAqIEdlbmVyYXRlcyBhIG1heGltdW0gb2YgYGNhcGFjaXR5YCB0aW1lc3RhbXBzIGJldHdlZW4gbWluIGFuZCBtYXgsIHJvdW5kZWQgdG8gdGhlXG5cdCAqIGBtaW5vcmAgdW5pdCB1c2luZyB0aGUgZ2l2ZW4gc2NhbGUgdGltZSBgb3B0aW9uc2AuXG5cdCAqIEltcG9ydGFudDogdGhpcyBtZXRob2QgY2FuIHJldHVybiB0aWNrcyBvdXRzaWRlIHRoZSBtaW4gYW5kIG1heCByYW5nZSwgaXQncyB0aGVcblx0ICogcmVzcG9uc2liaWxpdHkgb2YgdGhlIGNhbGxpbmcgY29kZSB0byBjbGFtcCB2YWx1ZXMgaWYgbmVlZGVkLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2dlbmVyYXRlKCkge1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLl9hZGFwdGVyO1xuICAgIGNvbnN0IG1pbiA9IHRoaXMubWluO1xuICAgIGNvbnN0IG1heCA9IHRoaXMubWF4O1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgdGltZU9wdHMgPSBvcHRpb25zLnRpbWU7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IG1pbm9yID0gdGltZU9wdHMudW5pdCB8fCBkZXRlcm1pbmVVbml0Rm9yQXV0b1RpY2tzKHRpbWVPcHRzLm1pblVuaXQsIG1pbiwgbWF4LCB0aGlzLl9nZXRMYWJlbENhcGFjaXR5KG1pbikpO1xuICAgIGNvbnN0IHN0ZXBTaXplID0gdmFsdWVPckRlZmF1bHQob3B0aW9ucy50aWNrcy5zdGVwU2l6ZSwgMSk7XG4gICAgY29uc3Qgd2Vla2RheSA9IG1pbm9yID09PSAnd2VlaycgPyB0aW1lT3B0cy5pc29XZWVrZGF5IDogZmFsc2U7XG4gICAgY29uc3QgaGFzV2Vla2RheSA9IGlzTnVtYmVyKHdlZWtkYXkpIHx8IHdlZWtkYXkgPT09IHRydWU7XG4gICAgY29uc3QgdGlja3MgPSB7fTtcbiAgICBsZXQgZmlyc3QgPSBtaW47XG4gICAgbGV0IHRpbWUsIGNvdW50O1xuXG4gICAgLy8gRm9yICd3ZWVrJyB1bml0LCBoYW5kbGUgdGhlIGZpcnN0IGRheSBvZiB3ZWVrIG9wdGlvblxuICAgIGlmIChoYXNXZWVrZGF5KSB7XG4gICAgICBmaXJzdCA9ICthZGFwdGVyLnN0YXJ0T2YoZmlyc3QsICdpc29XZWVrJywgd2Vla2RheSk7XG4gICAgfVxuXG4gICAgLy8gQWxpZ24gZmlyc3QgdGlja3Mgb24gdW5pdFxuICAgIGZpcnN0ID0gK2FkYXB0ZXIuc3RhcnRPZihmaXJzdCwgaGFzV2Vla2RheSA/ICdkYXknIDogbWlub3IpO1xuXG4gICAgLy8gUHJldmVudCBicm93c2VyIGZyb20gZnJlZXppbmcgaW4gY2FzZSB1c2VyIG9wdGlvbnMgcmVxdWVzdCBtaWxsaW9ucyBvZiBtaWxsaXNlY29uZHNcbiAgICBpZiAoYWRhcHRlci5kaWZmKG1heCwgbWluLCBtaW5vcikgPiAxMDAwMDAgKiBzdGVwU2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1pbiArICcgYW5kICcgKyBtYXggKyAnIGFyZSB0b28gZmFyIGFwYXJ0IHdpdGggc3RlcFNpemUgb2YgJyArIHN0ZXBTaXplICsgJyAnICsgbWlub3IpO1xuICAgIH1cblxuICAgIGNvbnN0IHRpbWVzdGFtcHMgPSBvcHRpb25zLnRpY2tzLnNvdXJjZSA9PT0gJ2RhdGEnICYmIHRoaXMuZ2V0RGF0YVRpbWVzdGFtcHMoKTtcbiAgICBmb3IgKHRpbWUgPSBmaXJzdCwgY291bnQgPSAwOyB0aW1lIDwgbWF4OyB0aW1lID0gK2FkYXB0ZXIuYWRkKHRpbWUsIHN0ZXBTaXplLCBtaW5vciksIGNvdW50KyspIHtcbiAgICAgIGFkZFRpY2sodGlja3MsIHRpbWUsIHRpbWVzdGFtcHMpO1xuICAgIH1cblxuICAgIGlmICh0aW1lID09PSBtYXggfHwgb3B0aW9ucy5ib3VuZHMgPT09ICd0aWNrcycgfHwgY291bnQgPT09IDEpIHtcbiAgICAgIGFkZFRpY2sodGlja3MsIHRpbWUsIHRpbWVzdGFtcHMpO1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGlja3MpLnNvcnQoKGEsIGIpID0+IGEgLSBiKS5tYXAoeCA9PiAreCk7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICovXG4gIGdldExhYmVsRm9yVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5fYWRhcHRlcjtcbiAgICBjb25zdCB0aW1lT3B0cyA9IHRoaXMub3B0aW9ucy50aW1lO1xuXG4gICAgaWYgKHRpbWVPcHRzLnRvb2x0aXBGb3JtYXQpIHtcbiAgICAgIHJldHVybiBhZGFwdGVyLmZvcm1hdCh2YWx1ZSwgdGltZU9wdHMudG9vbHRpcEZvcm1hdCk7XG4gICAgfVxuICAgIHJldHVybiBhZGFwdGVyLmZvcm1hdCh2YWx1ZSwgdGltZU9wdHMuZGlzcGxheUZvcm1hdHMuZGF0ZXRpbWUpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGZvcm1hdFxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAqL1xuICBmb3JtYXQodmFsdWUsIGZvcm1hdCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgZm9ybWF0cyA9IG9wdGlvbnMudGltZS5kaXNwbGF5Rm9ybWF0cztcbiAgICBjb25zdCB1bml0ID0gdGhpcy5fdW5pdDtcbiAgICBjb25zdCBmbXQgPSBmb3JtYXQgfHwgZm9ybWF0c1t1bml0XTtcbiAgICByZXR1cm4gdGhpcy5fYWRhcHRlci5mb3JtYXQodmFsdWUsIGZtdCk7XG4gIH1cblxuICAvKipcblx0ICogRnVuY3Rpb24gdG8gZm9ybWF0IGFuIGluZGl2aWR1YWwgdGljayBtYXJrXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0ge29iamVjdFtdfSB0aWNrc1xuXHQgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IFtmb3JtYXRdXG5cdCAqIEByZXR1cm4ge3N0cmluZ31cblx0ICogQHByaXZhdGVcblx0ICovXG4gIF90aWNrRm9ybWF0RnVuY3Rpb24odGltZSwgaW5kZXgsIHRpY2tzLCBmb3JtYXQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IGZvcm1hdHRlciA9IG9wdGlvbnMudGlja3MuY2FsbGJhY2s7XG5cbiAgICBpZiAoZm9ybWF0dGVyKSB7XG4gICAgICByZXR1cm4gY2FsbChmb3JtYXR0ZXIsIFt0aW1lLCBpbmRleCwgdGlja3NdLCB0aGlzKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXRzID0gb3B0aW9ucy50aW1lLmRpc3BsYXlGb3JtYXRzO1xuICAgIGNvbnN0IHVuaXQgPSB0aGlzLl91bml0O1xuICAgIGNvbnN0IG1ham9yVW5pdCA9IHRoaXMuX21ham9yVW5pdDtcbiAgICBjb25zdCBtaW5vckZvcm1hdCA9IHVuaXQgJiYgZm9ybWF0c1t1bml0XTtcbiAgICBjb25zdCBtYWpvckZvcm1hdCA9IG1ham9yVW5pdCAmJiBmb3JtYXRzW21ham9yVW5pdF07XG4gICAgY29uc3QgdGljayA9IHRpY2tzW2luZGV4XTtcbiAgICBjb25zdCBtYWpvciA9IG1ham9yVW5pdCAmJiBtYWpvckZvcm1hdCAmJiB0aWNrICYmIHRpY2subWFqb3I7XG5cbiAgICByZXR1cm4gdGhpcy5fYWRhcHRlci5mb3JtYXQodGltZSwgZm9ybWF0IHx8IChtYWpvciA/IG1ham9yRm9ybWF0IDogbWlub3JGb3JtYXQpKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge29iamVjdFtdfSB0aWNrc1xuXHQgKi9cbiAgZ2VuZXJhdGVUaWNrTGFiZWxzKHRpY2tzKSB7XG4gICAgbGV0IGksIGlsZW4sIHRpY2s7XG5cbiAgICBmb3IgKGkgPSAwLCBpbGVuID0gdGlja3MubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgICB0aWNrID0gdGlja3NbaV07XG4gICAgICB0aWNrLmxhYmVsID0gdGhpcy5fdGlja0Zvcm1hdEZ1bmN0aW9uKHRpY2sudmFsdWUsIGksIHRpY2tzKTtcbiAgICB9XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gTWlsbGlzZWNvbmRzIHNpbmNlIGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpXG5cdCAqIEByZXR1cm4ge251bWJlcn1cblx0ICovXG4gIGdldERlY2ltYWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCA/IE5hTiA6ICh2YWx1ZSAtIHRoaXMubWluKSAvICh0aGlzLm1heCAtIHRoaXMubWluKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBNaWxsaXNlY29uZHMgc2luY2UgZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQylcblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cbiAgZ2V0UGl4ZWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IG9mZnNldHMgPSB0aGlzLl9vZmZzZXRzO1xuICAgIGNvbnN0IHBvcyA9IHRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcy5nZXRQaXhlbEZvckRlY2ltYWwoKG9mZnNldHMuc3RhcnQgKyBwb3MpICogb2Zmc2V0cy5mYWN0b3IpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqL1xuICBnZXRWYWx1ZUZvclBpeGVsKHBpeGVsKSB7XG4gICAgY29uc3Qgb2Zmc2V0cyA9IHRoaXMuX29mZnNldHM7XG4gICAgY29uc3QgcG9zID0gdGhpcy5nZXREZWNpbWFsRm9yUGl4ZWwocGl4ZWwpIC8gb2Zmc2V0cy5mYWN0b3IgLSBvZmZzZXRzLmVuZDtcbiAgICByZXR1cm4gdGhpcy5taW4gKyBwb3MgKiAodGhpcy5tYXggLSB0aGlzLm1pbik7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsXG5cdCAqIEByZXR1cm4ge3t3Om51bWJlciwgaDpudW1iZXJ9fVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cbiAgX2dldExhYmVsU2l6ZShsYWJlbCkge1xuICAgIGNvbnN0IHRpY2tzT3B0cyA9IHRoaXMub3B0aW9ucy50aWNrcztcbiAgICBjb25zdCB0aWNrTGFiZWxXaWR0aCA9IHRoaXMuY3R4Lm1lYXN1cmVUZXh0KGxhYmVsKS53aWR0aDtcbiAgICBjb25zdCBhbmdsZSA9IHRvUmFkaWFucyh0aGlzLmlzSG9yaXpvbnRhbCgpID8gdGlja3NPcHRzLm1heFJvdGF0aW9uIDogdGlja3NPcHRzLm1pblJvdGF0aW9uKTtcbiAgICBjb25zdCBjb3NSb3RhdGlvbiA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICBjb25zdCBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICBjb25zdCB0aWNrRm9udFNpemUgPSB0aGlzLl9yZXNvbHZlVGlja0ZvbnRPcHRpb25zKDApLnNpemU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdzogKHRpY2tMYWJlbFdpZHRoICogY29zUm90YXRpb24pICsgKHRpY2tGb250U2l6ZSAqIHNpblJvdGF0aW9uKSxcbiAgICAgIGg6ICh0aWNrTGFiZWxXaWR0aCAqIHNpblJvdGF0aW9uKSArICh0aWNrRm9udFNpemUgKiBjb3NSb3RhdGlvbilcbiAgICB9O1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBleGFtcGxlVGltZVxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0TGFiZWxDYXBhY2l0eShleGFtcGxlVGltZSkge1xuICAgIGNvbnN0IHRpbWVPcHRzID0gdGhpcy5vcHRpb25zLnRpbWU7XG4gICAgY29uc3QgZGlzcGxheUZvcm1hdHMgPSB0aW1lT3B0cy5kaXNwbGF5Rm9ybWF0cztcblxuICAgIC8vIHBpY2sgdGhlIGxvbmdlc3QgZm9ybWF0IChtaWxsaXNlY29uZHMpIGZvciBndWVzc3RpbWF0aW9uXG4gICAgY29uc3QgZm9ybWF0ID0gZGlzcGxheUZvcm1hdHNbdGltZU9wdHMudW5pdF0gfHwgZGlzcGxheUZvcm1hdHMubWlsbGlzZWNvbmQ7XG4gICAgY29uc3QgZXhhbXBsZUxhYmVsID0gdGhpcy5fdGlja0Zvcm1hdEZ1bmN0aW9uKGV4YW1wbGVUaW1lLCAwLCB0aWNrc0Zyb21UaW1lc3RhbXBzKHRoaXMsIFtleGFtcGxlVGltZV0sIHRoaXMuX21ham9yVW5pdCksIGZvcm1hdCk7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuX2dldExhYmVsU2l6ZShleGFtcGxlTGFiZWwpO1xuICAgIC8vIHN1YnRyYWN0IDEgLSBpZiBvZmZzZXQgdGhlbiB0aGVyZSdzIG9uZSBsZXNzIGxhYmVsIHRoYW4gdGlja1xuICAgIC8vIGlmIG5vdCBvZmZzZXQgdGhlbiBvbmUgaGFsZiBsYWJlbCBwYWRkaW5nIGlzIGFkZGVkIHRvIGVhY2ggZW5kIGxlYXZpbmcgcm9vbSBmb3Igb25lIGxlc3MgbGFiZWxcbiAgICBjb25zdCBjYXBhY2l0eSA9IE1hdGguZmxvb3IodGhpcy5pc0hvcml6b250YWwoKSA/IHRoaXMud2lkdGggLyBzaXplLncgOiB0aGlzLmhlaWdodCAvIHNpemUuaCkgLSAxO1xuICAgIHJldHVybiBjYXBhY2l0eSA+IDAgPyBjYXBhY2l0eSA6IDE7XG4gIH1cblxuICAvKipcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgZ2V0RGF0YVRpbWVzdGFtcHMoKSB7XG4gICAgbGV0IHRpbWVzdGFtcHMgPSB0aGlzLl9jYWNoZS5kYXRhIHx8IFtdO1xuICAgIGxldCBpLCBpbGVuO1xuXG4gICAgaWYgKHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGltZXN0YW1wcztcbiAgICB9XG5cbiAgICBjb25zdCBtZXRhcyA9IHRoaXMuZ2V0TWF0Y2hpbmdWaXNpYmxlTWV0YXMoKTtcblxuICAgIGlmICh0aGlzLl9ub3JtYWxpemVkICYmIG1ldGFzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuICh0aGlzLl9jYWNoZS5kYXRhID0gbWV0YXNbMF0uY29udHJvbGxlci5nZXRBbGxQYXJzZWRWYWx1ZXModGhpcykpO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBtZXRhcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIHRpbWVzdGFtcHMgPSB0aW1lc3RhbXBzLmNvbmNhdChtZXRhc1tpXS5jb250cm9sbGVyLmdldEFsbFBhcnNlZFZhbHVlcyh0aGlzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9jYWNoZS5kYXRhID0gdGhpcy5ub3JtYWxpemUodGltZXN0YW1wcykpO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIGdldExhYmVsVGltZXN0YW1wcygpIHtcbiAgICBjb25zdCB0aW1lc3RhbXBzID0gdGhpcy5fY2FjaGUubGFiZWxzIHx8IFtdO1xuICAgIGxldCBpLCBpbGVuO1xuXG4gICAgaWYgKHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGltZXN0YW1wcztcbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbHMgPSB0aGlzLmdldExhYmVscygpO1xuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBsYWJlbHMubGVuZ3RoOyBpIDwgaWxlbjsgKytpKSB7XG4gICAgICB0aW1lc3RhbXBzLnB1c2gocGFyc2UodGhpcywgbGFiZWxzW2ldKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9jYWNoZS5sYWJlbHMgPSB0aGlzLl9ub3JtYWxpemVkID8gdGltZXN0YW1wcyA6IHRoaXMubm9ybWFsaXplKHRpbWVzdGFtcHMpKTtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcltdfSB2YWx1ZXNcblx0ICogQHByb3RlY3RlZFxuXHQgKi9cbiAgbm9ybWFsaXplKHZhbHVlcykge1xuICAgIC8vIEl0IHNlZW1zIHRvIGJlIHNvbWV3aGF0IGZhc3RlciB0byBkbyBzb3J0aW5nIGZpcnN0XG4gICAgcmV0dXJuIF9hcnJheVVuaXF1ZSh2YWx1ZXMuc29ydChzb3J0ZXIpKTtcbiAgfVxufVxuIiwgImltcG9ydCBUaW1lU2NhbGUgZnJvbSAnLi9zY2FsZS50aW1lLmpzJztcbmltcG9ydCB7X2xvb2t1cEJ5S2V5fSBmcm9tICcuLi9oZWxwZXJzL2hlbHBlcnMuY29sbGVjdGlvbi5qcyc7XG5cbi8qKlxuICogTGluZWFybHkgaW50ZXJwb2xhdGVzIHRoZSBnaXZlbiBzb3VyY2UgYHZhbGAgdXNpbmcgdGhlIHRhYmxlLiBJZiB2YWx1ZSBpcyBvdXQgb2YgYm91bmRzLCB2YWx1ZXNcbiAqIGF0IGVkZ2VzIGFyZSB1c2VkIGZvciB0aGUgaW50ZXJwb2xhdGlvbi5cbiAqIEBwYXJhbSB7b2JqZWN0fSB0YWJsZVxuICogQHBhcmFtIHtudW1iZXJ9IHZhbFxuICogQHBhcmFtIHtib29sZWFufSBbcmV2ZXJzZV0gbG9va3VwIHRpbWUgYmFzZWQgb24gcG9zaXRpb24gaW5zdGVhZCBvZiB2aWNlIHZlcnNhXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGludGVycG9sYXRlKHRhYmxlLCB2YWwsIHJldmVyc2UpIHtcbiAgbGV0IGxvID0gMDtcbiAgbGV0IGhpID0gdGFibGUubGVuZ3RoIC0gMTtcbiAgbGV0IHByZXZTb3VyY2UsIG5leHRTb3VyY2UsIHByZXZUYXJnZXQsIG5leHRUYXJnZXQ7XG4gIGlmIChyZXZlcnNlKSB7XG4gICAgaWYgKHZhbCA+PSB0YWJsZVtsb10ucG9zICYmIHZhbCA8PSB0YWJsZVtoaV0ucG9zKSB7XG4gICAgICAoe2xvLCBoaX0gPSBfbG9va3VwQnlLZXkodGFibGUsICdwb3MnLCB2YWwpKTtcbiAgICB9XG4gICAgKHtwb3M6IHByZXZTb3VyY2UsIHRpbWU6IHByZXZUYXJnZXR9ID0gdGFibGVbbG9dKTtcbiAgICAoe3BvczogbmV4dFNvdXJjZSwgdGltZTogbmV4dFRhcmdldH0gPSB0YWJsZVtoaV0pO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWwgPj0gdGFibGVbbG9dLnRpbWUgJiYgdmFsIDw9IHRhYmxlW2hpXS50aW1lKSB7XG4gICAgICAoe2xvLCBoaX0gPSBfbG9va3VwQnlLZXkodGFibGUsICd0aW1lJywgdmFsKSk7XG4gICAgfVxuICAgICh7dGltZTogcHJldlNvdXJjZSwgcG9zOiBwcmV2VGFyZ2V0fSA9IHRhYmxlW2xvXSk7XG4gICAgKHt0aW1lOiBuZXh0U291cmNlLCBwb3M6IG5leHRUYXJnZXR9ID0gdGFibGVbaGldKTtcbiAgfVxuXG4gIGNvbnN0IHNwYW4gPSBuZXh0U291cmNlIC0gcHJldlNvdXJjZTtcbiAgcmV0dXJuIHNwYW4gPyBwcmV2VGFyZ2V0ICsgKG5leHRUYXJnZXQgLSBwcmV2VGFyZ2V0KSAqICh2YWwgLSBwcmV2U291cmNlKSAvIHNwYW4gOiBwcmV2VGFyZ2V0O1xufVxuXG5jbGFzcyBUaW1lU2VyaWVzU2NhbGUgZXh0ZW5kcyBUaW1lU2NhbGUge1xuXG4gIHN0YXRpYyBpZCA9ICd0aW1lc2VyaWVzJztcblxuICAvKipcbiAgICogQHR5cGUge2FueX1cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyA9IFRpbWVTY2FsZS5kZWZhdWx0cztcblxuICAvKipcblx0ICogQHBhcmFtIHtvYmplY3R9IHByb3BzXG5cdCAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIC8qKiBAdHlwZSB7b2JqZWN0W119ICovXG4gICAgdGhpcy5fdGFibGUgPSBbXTtcbiAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICB0aGlzLl9taW5Qb3MgPSB1bmRlZmluZWQ7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5fdGFibGVSYW5nZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuXHQgKiBAcHJvdGVjdGVkXG5cdCAqL1xuICBpbml0T2Zmc2V0cygpIHtcbiAgICBjb25zdCB0aW1lc3RhbXBzID0gdGhpcy5fZ2V0VGltZXN0YW1wc0ZvclRhYmxlKCk7XG4gICAgY29uc3QgdGFibGUgPSB0aGlzLl90YWJsZSA9IHRoaXMuYnVpbGRMb29rdXBUYWJsZSh0aW1lc3RhbXBzKTtcbiAgICB0aGlzLl9taW5Qb3MgPSBpbnRlcnBvbGF0ZSh0YWJsZSwgdGhpcy5taW4pO1xuICAgIHRoaXMuX3RhYmxlUmFuZ2UgPSBpbnRlcnBvbGF0ZSh0YWJsZSwgdGhpcy5tYXgpIC0gdGhpcy5fbWluUG9zO1xuICAgIHN1cGVyLmluaXRPZmZzZXRzKHRpbWVzdGFtcHMpO1xuICB9XG5cbiAgLyoqXG5cdCAqIFJldHVybnMgYW4gYXJyYXkgb2Yge3RpbWUsIHBvc30gb2JqZWN0cyB1c2VkIHRvIGludGVycG9sYXRlIGEgc3BlY2lmaWMgYHRpbWVgIG9yIHBvc2l0aW9uXG5cdCAqIChgcG9zYCkgb24gdGhlIHNjYWxlLCBieSBzZWFyY2hpbmcgZW50cmllcyBiZWZvcmUgYW5kIGFmdGVyIHRoZSByZXF1ZXN0ZWQgdmFsdWUuIGBwb3NgIGlzXG5cdCAqIGEgZGVjaW1hbCBiZXR3ZWVuIDAgYW5kIDE6IDAgYmVpbmcgdGhlIHN0YXJ0IG9mIHRoZSBzY2FsZSAobGVmdCBvciB0b3ApIGFuZCAxIHRoZSBvdGhlclxuXHQgKiBleHRyZW1pdHkgKGxlZnQgKyB3aWR0aCBvciB0b3AgKyBoZWlnaHQpLiBOb3RlIHRoYXQgaXQgd291bGQgYmUgbW9yZSBvcHRpbWl6ZWQgdG8gZGlyZWN0bHlcblx0ICogc3RvcmUgcHJlLWNvbXB1dGVkIHBpeGVscywgYnV0IHRoZSBzY2FsZSBkaW1lbnNpb25zIGFyZSBub3QgZ3VhcmFudGVlZCBhdCB0aGUgdGltZSB3ZSBuZWVkXG5cdCAqIHRvIGNyZWF0ZSB0aGUgbG9va3VwIHRhYmxlLiBUaGUgdGFibGUgQUxXQVlTIGNvbnRhaW5zIGF0IGxlYXN0IHR3byBpdGVtczogbWluIGFuZCBtYXguXG5cdCAqIEBwYXJhbSB7bnVtYmVyW119IHRpbWVzdGFtcHNcblx0ICogQHJldHVybiB7b2JqZWN0W119XG5cdCAqIEBwcm90ZWN0ZWRcblx0ICovXG4gIGJ1aWxkTG9va3VwVGFibGUodGltZXN0YW1wcykge1xuICAgIGNvbnN0IHttaW4sIG1heH0gPSB0aGlzO1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3QgdGFibGUgPSBbXTtcbiAgICBsZXQgaSwgaWxlbiwgcHJldiwgY3VyciwgbmV4dDtcblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSB0aW1lc3RhbXBzLmxlbmd0aDsgaSA8IGlsZW47ICsraSkge1xuICAgICAgY3VyciA9IHRpbWVzdGFtcHNbaV07XG4gICAgICBpZiAoY3VyciA+PSBtaW4gJiYgY3VyciA8PSBtYXgpIHtcbiAgICAgICAgaXRlbXMucHVzaChjdXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXRlbXMubGVuZ3RoIDwgMikge1xuICAgICAgLy8gSW4gY2FzZSB0aGVyZSBpcyBsZXNzIHRoYXQgMiB0aW1lc3RhbXBzIGJldHdlZW4gbWluIGFuZCBtYXgsIHRoZSBzY2FsZSBpcyBkZWZpbmVkIGJ5IG1pbiBhbmQgbWF4XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7dGltZTogbWluLCBwb3M6IDB9LFxuICAgICAgICB7dGltZTogbWF4LCBwb3M6IDF9XG4gICAgICBdO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDAsIGlsZW4gPSBpdGVtcy5sZW5ndGg7IGkgPCBpbGVuOyArK2kpIHtcbiAgICAgIG5leHQgPSBpdGVtc1tpICsgMV07XG4gICAgICBwcmV2ID0gaXRlbXNbaSAtIDFdO1xuICAgICAgY3VyciA9IGl0ZW1zW2ldO1xuXG4gICAgICAvLyBvbmx5IGFkZCBwb2ludHMgdGhhdCBicmVha3MgdGhlIHNjYWxlIGxpbmVhcml0eVxuICAgICAgaWYgKE1hdGgucm91bmQoKG5leHQgKyBwcmV2KSAvIDIpICE9PSBjdXJyKSB7XG4gICAgICAgIHRhYmxlLnB1c2goe3RpbWU6IGN1cnIsIHBvczogaSAvIChpbGVuIC0gMSl9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhYmxlO1xuICB9XG5cbiAgLyoqXG5cdCAqIFJldHVybnMgYWxsIHRpbWVzdGFtcHNcblx0ICogQHJldHVybiB7bnVtYmVyW119XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuICBfZ2V0VGltZXN0YW1wc0ZvclRhYmxlKCkge1xuICAgIGxldCB0aW1lc3RhbXBzID0gdGhpcy5fY2FjaGUuYWxsIHx8IFtdO1xuXG4gICAgaWYgKHRpbWVzdGFtcHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGltZXN0YW1wcztcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5nZXREYXRhVGltZXN0YW1wcygpO1xuICAgIGNvbnN0IGxhYmVsID0gdGhpcy5nZXRMYWJlbFRpbWVzdGFtcHMoKTtcbiAgICBpZiAoZGF0YS5sZW5ndGggJiYgbGFiZWwubGVuZ3RoKSB7XG4gICAgICAvLyBJZiBjb21iaW5pbmcgbGFiZWxzIGFuZCBkYXRhIChkYXRhIG1pZ2h0IG5vdCBjb250YWluIGFsbCBsYWJlbHMpLFxuICAgICAgLy8gd2UgbmVlZCB0byByZWNoZWNrIHVuaXF1ZW5lc3MgYW5kIHNvcnRcbiAgICAgIHRpbWVzdGFtcHMgPSB0aGlzLm5vcm1hbGl6ZShkYXRhLmNvbmNhdChsYWJlbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lc3RhbXBzID0gZGF0YS5sZW5ndGggPyBkYXRhIDogbGFiZWw7XG4gICAgfVxuICAgIHRpbWVzdGFtcHMgPSB0aGlzLl9jYWNoZS5hbGwgPSB0aW1lc3RhbXBzO1xuXG4gICAgcmV0dXJuIHRpbWVzdGFtcHM7XG4gIH1cblxuICAvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gTWlsbGlzZWNvbmRzIHNpbmNlIGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpXG5cdCAqIEByZXR1cm4ge251bWJlcn1cblx0ICovXG4gIGdldERlY2ltYWxGb3JWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiAoaW50ZXJwb2xhdGUodGhpcy5fdGFibGUsIHZhbHVlKSAtIHRoaXMuX21pblBvcykgLyB0aGlzLl90YWJsZVJhbmdlO1xuICB9XG5cbiAgLyoqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFxuXHQgKiBAcmV0dXJuIHtudW1iZXJ9XG5cdCAqL1xuICBnZXRWYWx1ZUZvclBpeGVsKHBpeGVsKSB7XG4gICAgY29uc3Qgb2Zmc2V0cyA9IHRoaXMuX29mZnNldHM7XG4gICAgY29uc3QgZGVjaW1hbCA9IHRoaXMuZ2V0RGVjaW1hbEZvclBpeGVsKHBpeGVsKSAvIG9mZnNldHMuZmFjdG9yIC0gb2Zmc2V0cy5lbmQ7XG4gICAgcmV0dXJuIGludGVycG9sYXRlKHRoaXMuX3RhYmxlLCBkZWNpbWFsICogdGhpcy5fdGFibGVSYW5nZSArIHRoaXMuX21pblBvcywgdHJ1ZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGltZVNlcmllc1NjYWxlO1xuIiwgImV4cG9ydCAqIGZyb20gJy4vY29udHJvbGxlcnMvaW5kZXguanMnO1xuZXhwb3J0ICogZnJvbSAnLi9jb3JlL2luZGV4LmpzJztcbmV4cG9ydCAqIGZyb20gJy4vZWxlbWVudHMvaW5kZXguanMnO1xuZXhwb3J0ICogZnJvbSAnLi9wbGF0Zm9ybS9pbmRleC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsdWdpbnMvaW5kZXguanMnO1xuZXhwb3J0ICogZnJvbSAnLi9zY2FsZXMvaW5kZXguanMnO1xuXG5pbXBvcnQgKiBhcyBjb250cm9sbGVycyBmcm9tICcuL2NvbnRyb2xsZXJzL2luZGV4LmpzJztcbmltcG9ydCAqIGFzIGVsZW1lbnRzIGZyb20gJy4vZWxlbWVudHMvaW5kZXguanMnO1xuaW1wb3J0ICogYXMgcGx1Z2lucyBmcm9tICcuL3BsdWdpbnMvaW5kZXguanMnO1xuaW1wb3J0ICogYXMgc2NhbGVzIGZyb20gJy4vc2NhbGVzL2luZGV4LmpzJztcblxuZXhwb3J0IHtcbiAgY29udHJvbGxlcnMsXG4gIGVsZW1lbnRzLFxuICBwbHVnaW5zLFxuICBzY2FsZXMsXG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJhYmxlcyA9IFtcbiAgY29udHJvbGxlcnMsXG4gIGVsZW1lbnRzLFxuICBwbHVnaW5zLFxuICBzY2FsZXMsXG5dO1xuIiwgImltcG9ydCB7Q2hhcnQsIHJlZ2lzdGVyYWJsZXN9IGZyb20gJy4uL2Rpc3QvY2hhcnQuanMnO1xuXG5DaGFydC5yZWdpc3RlciguLi5yZWdpc3RlcmFibGVzKTtcblxuZXhwb3J0ICogZnJvbSAnLi4vZGlzdC9jaGFydC5qcyc7XG5leHBvcnQgZGVmYXVsdCBDaGFydDtcbiIsICIvLyB3cmFwcyB2YWx1ZSBpbiBjbG9zdXJlIG9yIHJldHVybnMgY2xvc3VyZVxuZXhwb3J0IGxldCBjbG9zdXJlID0gKHZhbHVlKSA9PiB7XG4gIGlmKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKXtcbiAgICByZXR1cm4gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICBsZXQgY2xvc3VyZSA9IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsdWUgfVxuICAgIHJldHVybiBjbG9zdXJlXG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgZ2xvYmFsU2VsZiA9IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IG51bGxcbmV4cG9ydCBjb25zdCBwaHhXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogbnVsbFxuZXhwb3J0IGNvbnN0IGdsb2JhbCA9IGdsb2JhbFNlbGYgfHwgcGh4V2luZG93IHx8IGdsb2JhbFxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVlNOID0gXCIyLjAuMFwiXG5leHBvcnQgY29uc3QgU09DS0VUX1NUQVRFUyA9IHtjb25uZWN0aW5nOiAwLCBvcGVuOiAxLCBjbG9zaW5nOiAyLCBjbG9zZWQ6IDN9XG5leHBvcnQgY29uc3QgREVGQVVMVF9USU1FT1VUID0gMTAwMDBcbmV4cG9ydCBjb25zdCBXU19DTE9TRV9OT1JNQUwgPSAxMDAwXG5leHBvcnQgY29uc3QgQ0hBTk5FTF9TVEFURVMgPSB7XG4gIGNsb3NlZDogXCJjbG9zZWRcIixcbiAgZXJyb3JlZDogXCJlcnJvcmVkXCIsXG4gIGpvaW5lZDogXCJqb2luZWRcIixcbiAgam9pbmluZzogXCJqb2luaW5nXCIsXG4gIGxlYXZpbmc6IFwibGVhdmluZ1wiLFxufVxuZXhwb3J0IGNvbnN0IENIQU5ORUxfRVZFTlRTID0ge1xuICBjbG9zZTogXCJwaHhfY2xvc2VcIixcbiAgZXJyb3I6IFwicGh4X2Vycm9yXCIsXG4gIGpvaW46IFwicGh4X2pvaW5cIixcbiAgcmVwbHk6IFwicGh4X3JlcGx5XCIsXG4gIGxlYXZlOiBcInBoeF9sZWF2ZVwiXG59XG5cbmV4cG9ydCBjb25zdCBUUkFOU1BPUlRTID0ge1xuICBsb25ncG9sbDogXCJsb25ncG9sbFwiLFxuICB3ZWJzb2NrZXQ6IFwid2Vic29ja2V0XCJcbn1cbmV4cG9ydCBjb25zdCBYSFJfU1RBVEVTID0ge1xuICBjb21wbGV0ZTogNFxufVxuIiwgIi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFB1c2hcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBUaGUgZXZlbnQsIGZvciBleGFtcGxlIGBcInBoeF9qb2luXCJgXG4gKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCAtIFRoZSBwYXlsb2FkLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IDEyM31gXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCAtIFRoZSBwdXNoIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1c2gge1xuICBjb25zdHJ1Y3RvcihjaGFubmVsLCBldmVudCwgcGF5bG9hZCwgdGltZW91dCl7XG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuZXZlbnQgPSBldmVudFxuICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQgfHwgZnVuY3Rpb24gKCl7IHJldHVybiB7fSB9XG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICAgIHRoaXMucmVjSG9va3MgPSBbXVxuICAgIHRoaXMuc2VudCA9IGZhbHNlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRcbiAgICovXG4gIHJlc2VuZCh0aW1lb3V0KXtcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy5yZXNldCgpXG4gICAgdGhpcy5zZW5kKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc2VuZCgpe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoXCJ0aW1lb3V0XCIpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnN0YXJ0VGltZW91dCgpXG4gICAgdGhpcy5zZW50ID0gdHJ1ZVxuICAgIHRoaXMuY2hhbm5lbC5zb2NrZXQucHVzaCh7XG4gICAgICB0b3BpYzogdGhpcy5jaGFubmVsLnRvcGljLFxuICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICBwYXlsb2FkOiB0aGlzLnBheWxvYWQoKSxcbiAgICAgIHJlZjogdGhpcy5yZWYsXG4gICAgICBqb2luX3JlZjogdGhpcy5jaGFubmVsLmpvaW5SZWYoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBzdGF0dXNcbiAgICogQHBhcmFtIHsqfSBjYWxsYmFja1xuICAgKi9cbiAgcmVjZWl2ZShzdGF0dXMsIGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLmhhc1JlY2VpdmVkKHN0YXR1cykpe1xuICAgICAgY2FsbGJhY2sodGhpcy5yZWNlaXZlZFJlc3AucmVzcG9uc2UpXG4gICAgfVxuXG4gICAgdGhpcy5yZWNIb29rcy5wdXNoKHtzdGF0dXMsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXNldCgpe1xuICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgIHRoaXMucmVmID0gbnVsbFxuICAgIHRoaXMucmVmRXZlbnQgPSBudWxsXG4gICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF0Y2hSZWNlaXZlKHtzdGF0dXMsIHJlc3BvbnNlLCBfcmVmfSl7XG4gICAgdGhpcy5yZWNIb29rcy5maWx0ZXIoaCA9PiBoLnN0YXR1cyA9PT0gc3RhdHVzKVxuICAgICAgLmZvckVhY2goaCA9PiBoLmNhbGxiYWNrKHJlc3BvbnNlKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuY2VsUmVmRXZlbnQoKXtcbiAgICBpZighdGhpcy5yZWZFdmVudCl7IHJldHVybiB9XG4gICAgdGhpcy5jaGFubmVsLm9mZih0aGlzLnJlZkV2ZW50KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFRpbWVyKVxuICAgIHRoaXMudGltZW91dFRpbWVyID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGFydFRpbWVvdXQoKXtcbiAgICBpZih0aGlzLnRpbWVvdXRUaW1lcil7IHRoaXMuY2FuY2VsVGltZW91dCgpIH1cbiAgICB0aGlzLnJlZiA9IHRoaXMuY2hhbm5lbC5zb2NrZXQubWFrZVJlZigpXG4gICAgdGhpcy5yZWZFdmVudCA9IHRoaXMuY2hhbm5lbC5yZXBseUV2ZW50TmFtZSh0aGlzLnJlZilcblxuICAgIHRoaXMuY2hhbm5lbC5vbih0aGlzLnJlZkV2ZW50LCBwYXlsb2FkID0+IHtcbiAgICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKVxuICAgICAgdGhpcy5jYW5jZWxUaW1lb3V0KClcbiAgICAgIHRoaXMucmVjZWl2ZWRSZXNwID0gcGF5bG9hZFxuICAgICAgdGhpcy5tYXRjaFJlY2VpdmUocGF5bG9hZClcbiAgICB9KVxuXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcihcInRpbWVvdXRcIiwge30pXG4gICAgfSwgdGhpcy50aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXNSZWNlaXZlZChzdGF0dXMpe1xuICAgIHJldHVybiB0aGlzLnJlY2VpdmVkUmVzcCAmJiB0aGlzLnJlY2VpdmVkUmVzcC5zdGF0dXMgPT09IHN0YXR1c1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKHN0YXR1cywgcmVzcG9uc2Upe1xuICAgIHRoaXMuY2hhbm5lbC50cmlnZ2VyKHRoaXMucmVmRXZlbnQsIHtzdGF0dXMsIHJlc3BvbnNlfSlcbiAgfVxufVxuIiwgIi8qKlxuICpcbiAqIENyZWF0ZXMgYSB0aW1lciB0aGF0IGFjY2VwdHMgYSBgdGltZXJDYWxjYCBmdW5jdGlvbiB0byBwZXJmb3JtXG4gKiBjYWxjdWxhdGVkIHRpbWVvdXQgcmV0cmllcywgc3VjaCBhcyBleHBvbmVudGlhbCBiYWNrb2ZmLlxuICpcbiAqIEBleGFtcGxlXG4gKiBsZXQgcmVjb25uZWN0VGltZXIgPSBuZXcgVGltZXIoKCkgPT4gdGhpcy5jb25uZWN0KCksIGZ1bmN0aW9uKHRyaWVzKXtcbiAqICAgcmV0dXJuIFsxMDAwLCA1MDAwLCAxMDAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICogfSlcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDUwMDBcbiAqIHJlY29ubmVjdFRpbWVyLnJlc2V0KClcbiAqIHJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpIC8vIGZpcmVzIGFmdGVyIDEwMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZXJDYWxjXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyIHtcbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHRpbWVyQ2FsYyl7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrXG4gICAgdGhpcy50aW1lckNhbGMgPSB0aW1lckNhbGNcbiAgICB0aGlzLnRpbWVyID0gbnVsbFxuICAgIHRoaXMudHJpZXMgPSAwXG4gIH1cblxuICByZXNldCgpe1xuICAgIHRoaXMudHJpZXMgPSAwXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyBhbnkgcHJldmlvdXMgc2NoZWR1bGVUaW1lb3V0IGFuZCBzY2hlZHVsZXMgY2FsbGJhY2tcbiAgICovXG4gIHNjaGVkdWxlVGltZW91dCgpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKVxuXG4gICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmllcyA9IHRoaXMudHJpZXMgKyAxXG4gICAgICB0aGlzLmNhbGxiYWNrKClcbiAgICB9LCB0aGlzLnRpbWVyQ2FsYyh0aGlzLnRyaWVzICsgMSkpXG4gIH1cbn1cbiIsICJpbXBvcnQge2Nsb3N1cmV9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTLFxuICBDSEFOTkVMX1NUQVRFUyxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IFB1c2ggZnJvbSBcIi4vcHVzaFwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9waWNcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IHBhcmFtc1xuICogQHBhcmFtIHtTb2NrZXR9IHNvY2tldFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFubmVsIHtcbiAgY29uc3RydWN0b3IodG9waWMsIHBhcmFtcywgc29ja2V0KXtcbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgdGhpcy50b3BpYyA9IHRvcGljXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKHBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLnNvY2tldCA9IHNvY2tldFxuICAgIHRoaXMuYmluZGluZ3MgPSBbXVxuICAgIHRoaXMuYmluZGluZ1JlZiA9IDBcbiAgICB0aGlzLnRpbWVvdXQgPSB0aGlzLnNvY2tldC50aW1lb3V0XG4gICAgdGhpcy5qb2luZWRPbmNlID0gZmFsc2VcbiAgICB0aGlzLmpvaW5QdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMuam9pbiwgdGhpcy5wYXJhbXMsIHRoaXMudGltZW91dClcbiAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VSZWZzID0gW11cblxuICAgIHRoaXMucmVqb2luVGltZXIgPSBuZXcgVGltZXIoKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luKCkgfVxuICAgIH0sIHRoaXMuc29ja2V0LnJlam9pbkFmdGVyTXMpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbkVycm9yKCgpID0+IHRoaXMucmVqb2luVGltZXIucmVzZXQoKSkpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMucHVzaCh0aGlzLnNvY2tldC5vbk9wZW4oKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLmlzRXJyb3JlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSlcbiAgICApXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5lZFxuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIuZm9yRWFjaChwdXNoRXZlbnQgPT4gcHVzaEV2ZW50LnNlbmQoKSlcbiAgICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJlcnJvclwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5vbkNsb3NlKCgpID0+IHtcbiAgICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGNsb3NlICR7dGhpcy50b3BpY30gJHt0aGlzLmpvaW5SZWYoKX1gKVxuICAgICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmNsb3NlZFxuICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlKHRoaXMpXG4gICAgfSlcbiAgICB0aGlzLm9uRXJyb3IocmVhc29uID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBlcnJvciAke3RoaXMudG9waWN9YCwgcmVhc29uKVxuICAgICAgaWYodGhpcy5pc0pvaW5pbmcoKSl7IHRoaXMuam9pblB1c2gucmVzZXQoKSB9XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgaWYodGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgfVxuICAgIH0pXG4gICAgdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgdGltZW91dCAke3RoaXMudG9waWN9ICgke3RoaXMuam9pblJlZigpfSlgLCB0aGlzLmpvaW5QdXNoLnRpbWVvdXQpXG4gICAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aGlzLnRpbWVvdXQpXG4gICAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZFxuICAgICAgdGhpcy5qb2luUHVzaC5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uKENIQU5ORUxfRVZFTlRTLnJlcGx5LCAocGF5bG9hZCwgcmVmKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXIodGhpcy5yZXBseUV2ZW50TmFtZShyZWYpLCBwYXlsb2FkKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSm9pbiB0aGUgY2hhbm5lbFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cmllZCB0byBqb2luIG11bHRpcGxlIHRpbWVzLiAnam9pbicgY2FuIG9ubHkgYmUgY2FsbGVkIGEgc2luZ2xlIHRpbWUgcGVyIGNoYW5uZWwgaW5zdGFuY2VcIilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dFxuICAgICAgdGhpcy5qb2luZWRPbmNlID0gdHJ1ZVxuICAgICAgdGhpcy5yZWpvaW4oKVxuICAgICAgcmV0dXJuIHRoaXMuam9pblB1c2hcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgY2xvc2VcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuY2xvc2UsIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIEhvb2sgaW50byBjaGFubmVsIGVycm9yc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgcmV0dXJuIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuZXJyb3IsIHJlYXNvbiA9PiBjYWxsYmFjayhyZWFzb24pKVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgb24gY2hhbm5lbCBldmVudHNcbiAgICpcbiAgICogU3Vic2NyaXB0aW9uIHJldHVybnMgYSByZWYgY291bnRlciwgd2hpY2ggY2FuIGJlIHVzZWQgbGF0ZXIgdG9cbiAgICogdW5zdWJzY3JpYmUgdGhlIGV4YWN0IGV2ZW50IGxpc3RlbmVyXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNvbnN0IHJlZjIgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fb3RoZXJfc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICogLy8gU2luY2UgdW5zdWJzY3JpcHRpb24sIGRvX3N0dWZmIHdvbid0IGZpcmUsXG4gICAqIC8vIHdoaWxlIGRvX290aGVyX3N0dWZmIHdpbGwga2VlcCBmaXJpbmcgb24gdGhlIFwiZXZlbnRcIlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHJldHVybnMge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5iaW5kaW5nUmVmKytcbiAgICB0aGlzLmJpbmRpbmdzLnB1c2goe2V2ZW50LCByZWYsIGNhbGxiYWNrfSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogVW5zdWJzY3JpYmVzIG9mZiBvZiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBVc2UgdGhlIHJlZiByZXR1cm5lZCBmcm9tIGEgY2hhbm5lbC5vbigpIHRvIHVuc3Vic2NyaWJlIG9uZVxuICAgKiBoYW5kbGVyLCBvciBwYXNzIG5vdGhpbmcgZm9yIHRoZSByZWYgdG8gdW5zdWJzY3JpYmUgYWxsXG4gICAqIGhhbmRsZXJzIGZvciB0aGUgZ2l2ZW4gZXZlbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIFVuc3Vic2NyaWJlIHRoZSBkb19zdHVmZiBoYW5kbGVyXG4gICAqIGNvbnN0IHJlZjEgPSBjaGFubmVsLm9uKFwiZXZlbnRcIiwgZG9fc3R1ZmYpXG4gICAqIGNoYW5uZWwub2ZmKFwiZXZlbnRcIiwgcmVmMSlcbiAgICpcbiAgICogLy8gVW5zdWJzY3JpYmUgYWxsIGhhbmRsZXJzIGZyb20gZXZlbnRcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiKVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSByZWZcbiAgICovXG4gIG9mZihldmVudCwgcmVmKXtcbiAgICB0aGlzLmJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoKGJpbmQpID0+IHtcbiAgICAgIHJldHVybiAhKGJpbmQuZXZlbnQgPT09IGV2ZW50ICYmICh0eXBlb2YgcmVmID09PSBcInVuZGVmaW5lZFwiIHx8IHJlZiA9PT0gYmluZC5yZWYpKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhblB1c2goKXsgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5pc0pvaW5lZCgpIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIGBldmVudGAgdG8gcGhvZW5peCB3aXRoIHRoZSBwYXlsb2FkIGBwYXlsb2FkYC5cbiAgICogUGhvZW5peCByZWNlaXZlcyB0aGlzIGluIHRoZSBgaGFuZGxlX2luKGV2ZW50LCBwYXlsb2FkLCBzb2NrZXQpYFxuICAgKiBmdW5jdGlvbi4gaWYgcGhvZW5peCByZXBsaWVzIG9yIGl0IHRpbWVzIG91dCAoZGVmYXVsdCAxMDAwMG1zKSxcbiAgICogdGhlbiBvcHRpb25hbGx5IHRoZSByZXBseSBjYW4gYmUgcmVjZWl2ZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwucHVzaChcImV2ZW50XCIpXG4gICAqICAgLnJlY2VpdmUoXCJva1wiLCBwYXlsb2FkID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCByZXBsaWVkOlwiLCBwYXlsb2FkKSlcbiAgICogICAucmVjZWl2ZShcImVycm9yXCIsIGVyciA9PiBjb25zb2xlLmxvZyhcInBob2VuaXggZXJyb3JlZFwiLCBlcnIpKVxuICAgKiAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiBjb25zb2xlLmxvZyhcInRpbWVkIG91dCBwdXNoaW5nXCIpKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt0aW1lb3V0XVxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIHB1c2goZXZlbnQsIHBheWxvYWQsIHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHBheWxvYWQgPSBwYXlsb2FkIHx8IHt9XG4gICAgaWYoIXRoaXMuam9pbmVkT25jZSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRyaWVkIHRvIHB1c2ggJyR7ZXZlbnR9JyB0byAnJHt0aGlzLnRvcGljfScgYmVmb3JlIGpvaW5pbmcuIFVzZSBjaGFubmVsLmpvaW4oKSBiZWZvcmUgcHVzaGluZyBldmVudHNgKVxuICAgIH1cbiAgICBsZXQgcHVzaEV2ZW50ID0gbmV3IFB1c2godGhpcywgZXZlbnQsIGZ1bmN0aW9uICgpeyByZXR1cm4gcGF5bG9hZCB9LCB0aW1lb3V0KVxuICAgIGlmKHRoaXMuY2FuUHVzaCgpKXtcbiAgICAgIHB1c2hFdmVudC5zZW5kKClcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaEV2ZW50LnN0YXJ0VGltZW91dCgpXG4gICAgICB0aGlzLnB1c2hCdWZmZXIucHVzaChwdXNoRXZlbnQpXG4gICAgfVxuXG4gICAgcmV0dXJuIHB1c2hFdmVudFxuICB9XG5cbiAgLyoqIExlYXZlcyB0aGUgY2hhbm5lbFxuICAgKlxuICAgKiBVbnN1YnNjcmliZXMgZnJvbSBzZXJ2ZXIgZXZlbnRzLCBhbmRcbiAgICogaW5zdHJ1Y3RzIGNoYW5uZWwgdG8gdGVybWluYXRlIG9uIHNlcnZlclxuICAgKlxuICAgKiBUcmlnZ2VycyBvbkNsb3NlKCkgaG9va3NcbiAgICpcbiAgICogVG8gcmVjZWl2ZSBsZWF2ZSBhY2tub3dsZWRnZW1lbnRzLCB1c2UgdGhlIGByZWNlaXZlYFxuICAgKiBob29rIHRvIGJpbmQgdG8gdGhlIHNlcnZlciBhY2ssIGllOlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjaGFubmVsLmxlYXZlKCkucmVjZWl2ZShcIm9rXCIsICgpID0+IGFsZXJ0KFwibGVmdCFcIikgKVxuICAgKlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHRpbWVvdXRcbiAgICogQHJldHVybnMge1B1c2h9XG4gICAqL1xuICBsZWF2ZSh0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICB0aGlzLmpvaW5QdXNoLmNhbmNlbFRpbWVvdXQoKVxuXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmxlYXZpbmdcbiAgICBsZXQgb25DbG9zZSA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGBsZWF2ZSAke3RoaXMudG9waWN9YClcbiAgICAgIHRoaXMudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgXCJsZWF2ZVwiKVxuICAgIH1cbiAgICBsZXQgbGVhdmVQdXNoID0gbmV3IFB1c2godGhpcywgQ0hBTk5FTF9FVkVOVFMubGVhdmUsIGNsb3N1cmUoe30pLCB0aW1lb3V0KVxuICAgIGxlYXZlUHVzaC5yZWNlaXZlKFwib2tcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IG9uQ2xvc2UoKSlcbiAgICBsZWF2ZVB1c2guc2VuZCgpXG4gICAgaWYoIXRoaXMuY2FuUHVzaCgpKXsgbGVhdmVQdXNoLnRyaWdnZXIoXCJva1wiLCB7fSkgfVxuXG4gICAgcmV0dXJuIGxlYXZlUHVzaFxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRhYmxlIG1lc3NhZ2UgaG9va1xuICAgKlxuICAgKiBSZWNlaXZlcyBhbGwgZXZlbnRzIGZvciBzcGVjaWFsaXplZCBtZXNzYWdlIGhhbmRsaW5nXG4gICAqIGJlZm9yZSBkaXNwYXRjaGluZyB0byB0aGUgY2hhbm5lbCBjYWxsYmFja3MuXG4gICAqXG4gICAqIE11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgb25NZXNzYWdlKF9ldmVudCwgcGF5bG9hZCwgX3JlZil7IHJldHVybiBwYXlsb2FkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzTWVtYmVyKHRvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZil7XG4gICAgaWYodGhpcy50b3BpYyAhPT0gdG9waWMpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgaWYoam9pblJlZiAmJiBqb2luUmVmICE9PSB0aGlzLmpvaW5SZWYoKSl7XG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBcImRyb3BwaW5nIG91dGRhdGVkIG1lc3NhZ2VcIiwge3RvcGljLCBldmVudCwgcGF5bG9hZCwgam9pblJlZn0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGpvaW5SZWYoKXsgcmV0dXJuIHRoaXMuam9pblB1c2gucmVmIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlam9pbih0aW1lb3V0ID0gdGhpcy50aW1lb3V0KXtcbiAgICBpZih0aGlzLmlzTGVhdmluZygpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnNvY2tldC5sZWF2ZU9wZW5Ub3BpYyh0aGlzLnRvcGljKVxuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luaW5nXG4gICAgdGhpcy5qb2luUHVzaC5yZXNlbmQodGltZW91dClcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKXtcbiAgICBsZXQgaGFuZGxlZFBheWxvYWQgPSB0aGlzLm9uTWVzc2FnZShldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luUmVmKVxuICAgIGlmKHBheWxvYWQgJiYgIWhhbmRsZWRQYXlsb2FkKXsgdGhyb3cgbmV3IEVycm9yKFwiY2hhbm5lbCBvbk1lc3NhZ2UgY2FsbGJhY2tzIG11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXCIpIH1cblxuICAgIGxldCBldmVudEJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5maWx0ZXIoYmluZCA9PiBiaW5kLmV2ZW50ID09PSBldmVudClcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBldmVudEJpbmRpbmdzLmxlbmd0aDsgaSsrKXtcbiAgICAgIGxldCBiaW5kID0gZXZlbnRCaW5kaW5nc1tpXVxuICAgICAgYmluZC5jYWxsYmFjayhoYW5kbGVkUGF5bG9hZCwgcmVmLCBqb2luUmVmIHx8IHRoaXMuam9pblJlZigpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVwbHlFdmVudE5hbWUocmVmKXsgcmV0dXJuIGBjaGFuX3JlcGx5XyR7cmVmfWAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNDbG9zZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmNsb3NlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Vycm9yZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmVycm9yZWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNKb2luZWQoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5lZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5pbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5pbmcgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNMZWF2aW5nKCl7IHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5sZWF2aW5nIH1cbn1cbiIsICJpbXBvcnQge1xuICBnbG9iYWwsXG4gIFhIUl9TVEFURVNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWpheCB7XG5cbiAgc3RhdGljIHJlcXVlc3QobWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICBpZihnbG9iYWwuWERvbWFpblJlcXVlc3Qpe1xuICAgICAgbGV0IHJlcSA9IG5ldyBnbG9iYWwuWERvbWFpblJlcXVlc3QoKSAvLyBJRTgsIElFOVxuICAgICAgcmV0dXJuIHRoaXMueGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpIC8vIElFNyssIEZpcmVmb3gsIENocm9tZSwgT3BlcmEsIFNhZmFyaVxuICAgICAgcmV0dXJuIHRoaXMueGhyUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGFjY2VwdCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjaylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgeGRvbWFpblJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEudGltZW91dCA9IHRpbWVvdXRcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50KVxuICAgIHJlcS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgLy8gV29yayBhcm91bmQgYnVnIGluIElFOSB0aGF0IHJlcXVpcmVzIGFuIGF0dGFjaGVkIG9ucHJvZ3Jlc3MgaGFuZGxlclxuICAgIHJlcS5vbnByb2dyZXNzID0gKCkgPT4geyB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyB4aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50LCB0cnVlKVxuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIGFjY2VwdClcbiAgICByZXEub25lcnJvciA9ICgpID0+IGNhbGxiYWNrICYmIGNhbGxiYWNrKG51bGwpXG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmKHJlcS5yZWFkeVN0YXRlID09PSBYSFJfU1RBVEVTLmNvbXBsZXRlICYmIGNhbGxiYWNrKXtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gdGhpcy5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dClcbiAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpXG4gICAgICB9XG4gICAgfVxuICAgIGlmKG9udGltZW91dCl7IHJlcS5vbnRpbWVvdXQgPSBvbnRpbWVvdXQgfVxuXG4gICAgcmVxLnNlbmQoYm9keSlcbiAgICByZXR1cm4gcmVxXG4gIH1cblxuICBzdGF0aWMgcGFyc2VKU09OKHJlc3Ape1xuICAgIGlmKCFyZXNwIHx8IHJlc3AgPT09IFwiXCIpeyByZXR1cm4gbnVsbCB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcClcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJmYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZVwiLCByZXNwKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplKG9iaiwgcGFyZW50S2V5KXtcbiAgICBsZXQgcXVlcnlTdHIgPSBbXVxuICAgIGZvcih2YXIga2V5IGluIG9iail7XG4gICAgICBpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSl7IGNvbnRpbnVlIH1cbiAgICAgIGxldCBwYXJhbUtleSA9IHBhcmVudEtleSA/IGAke3BhcmVudEtleX1bJHtrZXl9XWAgOiBrZXlcbiAgICAgIGxldCBwYXJhbVZhbCA9IG9ialtrZXldXG4gICAgICBpZih0eXBlb2YgcGFyYW1WYWwgPT09IFwib2JqZWN0XCIpe1xuICAgICAgICBxdWVyeVN0ci5wdXNoKHRoaXMuc2VyaWFsaXplKHBhcmFtVmFsLCBwYXJhbUtleSkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWVyeVN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwYXJhbUtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbVZhbCkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBxdWVyeVN0ci5qb2luKFwiJlwiKVxuICB9XG5cbiAgc3RhdGljIGFwcGVuZFBhcmFtcyh1cmwsIHBhcmFtcyl7XG4gICAgaWYoT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGggPT09IDApeyByZXR1cm4gdXJsIH1cblxuICAgIGxldCBwcmVmaXggPSB1cmwubWF0Y2goL1xcPy8pID8gXCImXCIgOiBcIj9cIlxuICAgIHJldHVybiBgJHt1cmx9JHtwcmVmaXh9JHt0aGlzLnNlcmlhbGl6ZShwYXJhbXMpfWBcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFNPQ0tFVF9TVEFURVMsXG4gIFRSQU5TUE9SVFNcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEFqYXggZnJvbSBcIi4vYWpheFwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvbmdQb2xsIHtcblxuICBjb25zdHJ1Y3RvcihlbmRQb2ludCl7XG4gICAgdGhpcy5lbmRQb2ludCA9IG51bGxcbiAgICB0aGlzLnRva2VuID0gbnVsbFxuICAgIHRoaXMuc2tpcEhlYXJ0YmVhdCA9IHRydWVcbiAgICB0aGlzLnJlcXMgPSBuZXcgU2V0KClcbiAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSBmYWxzZVxuICAgIHRoaXMuY3VycmVudEJhdGNoID0gbnVsbFxuICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBudWxsXG4gICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5vbm9wZW4gPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmVycm9yID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMub25tZXNzYWdlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMub25jbG9zZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLnBvbGxFbmRwb2ludCA9IHRoaXMubm9ybWFsaXplRW5kcG9pbnQoZW5kUG9pbnQpXG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nXG4gICAgdGhpcy5wb2xsKClcbiAgfVxuXG4gIG5vcm1hbGl6ZUVuZHBvaW50KGVuZFBvaW50KXtcbiAgICByZXR1cm4gKGVuZFBvaW50XG4gICAgICAucmVwbGFjZShcIndzOi8vXCIsIFwiaHR0cDovL1wiKVxuICAgICAgLnJlcGxhY2UoXCJ3c3M6Ly9cIiwgXCJodHRwczovL1wiKVxuICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cChcIiguKilcXC9cIiArIFRSQU5TUE9SVFMud2Vic29ja2V0KSwgXCIkMS9cIiArIFRSQU5TUE9SVFMubG9uZ3BvbGwpKVxuICB9XG5cbiAgZW5kcG9pbnRVUkwoKXtcbiAgICByZXR1cm4gQWpheC5hcHBlbmRQYXJhbXModGhpcy5wb2xsRW5kcG9pbnQsIHt0b2tlbjogdGhpcy50b2tlbn0pXG4gIH1cblxuICBjbG9zZUFuZFJldHJ5KGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIHRoaXMuY2xvc2UoY29kZSwgcmVhc29uLCB3YXNDbGVhbilcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgfVxuXG4gIG9udGltZW91dCgpe1xuICAgIHRoaXMub25lcnJvcihcInRpbWVvdXRcIilcbiAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAwNSwgXCJ0aW1lb3V0XCIsIGZhbHNlKVxuICB9XG5cbiAgaXNBY3RpdmUoKXsgcmV0dXJuIHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5vcGVuIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nIH1cblxuICBwb2xsKCl7XG4gICAgdGhpcy5hamF4KFwiR0VUXCIsIFwiYXBwbGljYXRpb24vanNvblwiLCBudWxsLCAoKSA9PiB0aGlzLm9udGltZW91dCgpLCByZXNwID0+IHtcbiAgICAgIGlmKHJlc3Ape1xuICAgICAgICB2YXIge3N0YXR1cywgdG9rZW4sIG1lc3NhZ2VzfSA9IHJlc3BcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXMgPSAwXG4gICAgICB9XG5cbiAgICAgIHN3aXRjaChzdGF0dXMpe1xuICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICBtZXNzYWdlcy5mb3JFYWNoKG1zZyA9PiB7XG4gICAgICAgICAgICAvLyBUYXNrcyBhcmUgd2hhdCB0aGluZ3MgbGlrZSBldmVudCBoYW5kbGVycywgc2V0VGltZW91dCBjYWxsYmFja3MsXG4gICAgICAgICAgICAvLyBwcm9taXNlIHJlc29sdmVzIGFuZCBtb3JlIGFyZSBydW4gd2l0aGluLlxuICAgICAgICAgICAgLy8gSW4gbW9kZXJuIGJyb3dzZXJzLCB0aGVyZSBhcmUgdHdvIGRpZmZlcmVudCBraW5kcyBvZiB0YXNrcyxcbiAgICAgICAgICAgIC8vIG1pY3JvdGFza3MgYW5kIG1hY3JvdGFza3MuXG4gICAgICAgICAgICAvLyBNaWNyb3Rhc2tzIGFyZSBtYWlubHkgdXNlZCBmb3IgUHJvbWlzZXMsIHdoaWxlIG1hY3JvdGFza3MgYXJlXG4gICAgICAgICAgICAvLyB1c2VkIGZvciBldmVyeXRoaW5nIGVsc2UuXG4gICAgICAgICAgICAvLyBNaWNyb3Rhc2tzIGFsd2F5cyBoYXZlIHByaW9yaXR5IG92ZXIgbWFjcm90YXNrcy4gSWYgdGhlIEpTIGVuZ2luZVxuICAgICAgICAgICAgLy8gaXMgbG9va2luZyBmb3IgYSB0YXNrIHRvIHJ1biwgaXQgd2lsbCBhbHdheXMgdHJ5IHRvIGVtcHR5IHRoZVxuICAgICAgICAgICAgLy8gbWljcm90YXNrIHF1ZXVlIGJlZm9yZSBhdHRlbXB0aW5nIHRvIHJ1biBhbnl0aGluZyBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gbWFjcm90YXNrIHF1ZXVlLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCwgbWVzc2FnZXMgYWx3YXlzIGFycml2ZSBpbiB0aGVpciBvd25cbiAgICAgICAgICAgIC8vIGV2ZW50LiBUaGlzIG1lYW5zIHRoYXQgaWYgYW55IHByb21pc2VzIGFyZSByZXNvbHZlZCBmcm9tIHdpdGhpbixcbiAgICAgICAgICAgIC8vIHRoZWlyIGNhbGxiYWNrcyB3aWxsIGFsd2F5cyBmaW5pc2ggZXhlY3V0aW9uIGJ5IHRoZSB0aW1lIHRoZVxuICAgICAgICAgICAgLy8gbmV4dCBtZXNzYWdlIGV2ZW50IGhhbmRsZXIgaXMgcnVuLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIGVtdWxhdGUgdGhpcyBiZWhhdmlvdXIsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGVhY2hcbiAgICAgICAgICAgIC8vIG9ubWVzc2FnZSBoYW5kbGVyIGlzIHJ1biB3aXRoaW4gaXRzIG93biBtYWNyb3Rhc2suXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMub25tZXNzYWdlKHtkYXRhOiBtc2d9KSwgMClcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyMDQ6XG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQxMDpcbiAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLm9wZW5cbiAgICAgICAgICB0aGlzLm9ub3Blbih7fSlcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDAzOlxuICAgICAgICAgIHRoaXMub25lcnJvcig0MDMpXG4gICAgICAgICAgdGhpcy5jbG9zZSgxMDA4LCBcImZvcmJpZGRlblwiLCBmYWxzZSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgNTAwOlxuICAgICAgICAgIHRoaXMub25lcnJvcig1MDApXG4gICAgICAgICAgdGhpcy5jbG9zZUFuZFJldHJ5KDEwMTEsIFwiaW50ZXJuYWwgc2VydmVyIGVycm9yXCIsIDUwMClcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYHVuaGFuZGxlZCBwb2xsIHN0YXR1cyAke3N0YXR1c31gKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyB3ZSBjb2xsZWN0IGFsbCBwdXNoZXMgd2l0aGluIHRoZSBjdXJyZW50IGV2ZW50IGxvb3AgYnlcbiAgLy8gc2V0VGltZW91dCAwLCB3aGljaCBvcHRpbWl6ZXMgYmFjay10by1iYWNrIHByb2NlZHVyYWxcbiAgLy8gcHVzaGVzIGFnYWluc3QgYW4gZW1wdHkgYnVmZmVyXG4gIHNlbmQoYm9keSl7XG4gICAgaWYodGhpcy5jdXJyZW50QmF0Y2gpe1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2gucHVzaChib2R5KVxuICAgIH0gZWxzZSBpZih0aGlzLmF3YWl0aW5nQmF0Y2hBY2spe1xuICAgICAgdGhpcy5iYXRjaEJ1ZmZlci5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gW2JvZHldXG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hTZW5kKHRoaXMuY3VycmVudEJhdGNoKVxuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaCA9IG51bGxcbiAgICAgIH0sIDApXG4gICAgfVxuICB9XG5cbiAgYmF0Y2hTZW5kKG1lc3NhZ2VzKXtcbiAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSB0cnVlXG4gICAgdGhpcy5hamF4KFwiUE9TVFwiLCBcImFwcGxpY2F0aW9uL3gtbmRqc29uXCIsIG1lc3NhZ2VzLmpvaW4oXCJcXG5cIiksICgpID0+IHRoaXMub25lcnJvcihcInRpbWVvdXRcIiksIHJlc3AgPT4ge1xuICAgICAgdGhpcy5hd2FpdGluZ0JhdGNoQWNrID0gZmFsc2VcbiAgICAgIGlmKCFyZXNwIHx8IHJlc3Auc3RhdHVzICE9PSAyMDApe1xuICAgICAgICB0aGlzLm9uZXJyb3IocmVzcCAmJiByZXNwLnN0YXR1cylcbiAgICAgICAgdGhpcy5jbG9zZUFuZFJldHJ5KDEwMTEsIFwiaW50ZXJuYWwgc2VydmVyIGVycm9yXCIsIGZhbHNlKVxuICAgICAgfSBlbHNlIGlmKHRoaXMuYmF0Y2hCdWZmZXIubGVuZ3RoID4gMCl7XG4gICAgICAgIHRoaXMuYmF0Y2hTZW5kKHRoaXMuYmF0Y2hCdWZmZXIpXG4gICAgICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKXtcbiAgICBmb3IobGV0IHJlcSBvZiB0aGlzLnJlcXMpeyByZXEuYWJvcnQoKSB9XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5jbG9zZWRcbiAgICBsZXQgb3B0cyA9IE9iamVjdC5hc3NpZ24oe2NvZGU6IDEwMDAsIHJlYXNvbjogdW5kZWZpbmVkLCB3YXNDbGVhbjogdHJ1ZX0sIHtjb2RlLCByZWFzb24sIHdhc0NsZWFufSlcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICBjbGVhclRpbWVvdXQodGhpcy5jdXJyZW50QmF0Y2hUaW1lcilcbiAgICB0aGlzLmN1cnJlbnRCYXRjaFRpbWVyID0gbnVsbFxuICAgIGlmKHR5cGVvZihDbG9zZUV2ZW50KSAhPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICB0aGlzLm9uY2xvc2UobmV3IENsb3NlRXZlbnQoXCJjbG9zZVwiLCBvcHRzKSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbmNsb3NlKG9wdHMpXG4gICAgfVxuICB9XG5cbiAgYWpheChtZXRob2QsIGNvbnRlbnRUeXBlLCBib2R5LCBvbkNhbGxlclRpbWVvdXQsIGNhbGxiYWNrKXtcbiAgICBsZXQgcmVxXG4gICAgbGV0IG9udGltZW91dCA9ICgpID0+IHtcbiAgICAgIHRoaXMucmVxcy5kZWxldGUocmVxKVxuICAgICAgb25DYWxsZXJUaW1lb3V0KClcbiAgICB9XG4gICAgcmVxID0gQWpheC5yZXF1ZXN0KG1ldGhvZCwgdGhpcy5lbmRwb2ludFVSTCgpLCBjb250ZW50VHlwZSwgYm9keSwgdGhpcy50aW1lb3V0LCBvbnRpbWVvdXQsIHJlc3AgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBpZih0aGlzLmlzQWN0aXZlKCkpeyBjYWxsYmFjayhyZXNwKSB9XG4gICAgfSlcbiAgICB0aGlzLnJlcXMuYWRkKHJlcSlcbiAgfVxufVxuIiwgIi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIFByZXNlbmNlXG4gKiBAcGFyYW0ge0NoYW5uZWx9IGNoYW5uZWwgLSBUaGUgQ2hhbm5lbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgb3B0aW9ucyxcbiAqICAgICAgICBmb3IgZXhhbXBsZSBge2V2ZW50czoge3N0YXRlOiBcInN0YXRlXCIsIGRpZmY6IFwiZGlmZlwifX1gXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXNlbmNlIHtcblxuICBjb25zdHJ1Y3RvcihjaGFubmVsLCBvcHRzID0ge30pe1xuICAgIGxldCBldmVudHMgPSBvcHRzLmV2ZW50cyB8fCB7c3RhdGU6IFwicHJlc2VuY2Vfc3RhdGVcIiwgZGlmZjogXCJwcmVzZW5jZV9kaWZmXCJ9XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuY2hhbm5lbCA9IGNoYW5uZWxcbiAgICB0aGlzLmpvaW5SZWYgPSBudWxsXG4gICAgdGhpcy5jYWxsZXIgPSB7XG4gICAgICBvbkpvaW46IGZ1bmN0aW9uICgpeyB9LFxuICAgICAgb25MZWF2ZTogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvblN5bmM6IGZ1bmN0aW9uICgpeyB9XG4gICAgfVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKGV2ZW50cy5zdGF0ZSwgbmV3U3RhdGUgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICB0aGlzLmpvaW5SZWYgPSB0aGlzLmNoYW5uZWwuam9pblJlZigpXG4gICAgICB0aGlzLnN0YXRlID0gUHJlc2VuY2Uuc3luY1N0YXRlKHRoaXMuc3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpXG5cbiAgICAgIHRoaXMucGVuZGluZ0RpZmZzLmZvckVhY2goZGlmZiA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jRGlmZih0aGlzLnN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpXG4gICAgICB9KVxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgICAgb25TeW5jKClcbiAgICB9KVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKGV2ZW50cy5kaWZmLCBkaWZmID0+IHtcbiAgICAgIGxldCB7b25Kb2luLCBvbkxlYXZlLCBvblN5bmN9ID0gdGhpcy5jYWxsZXJcblxuICAgICAgaWYodGhpcy5pblBlbmRpbmdTeW5jU3RhdGUoKSl7XG4gICAgICAgIHRoaXMucGVuZGluZ0RpZmZzLnB1c2goZGlmZilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jRGlmZih0aGlzLnN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpXG4gICAgICAgIG9uU3luYygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIG9uSm9pbihjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uSm9pbiA9IGNhbGxiYWNrIH1cblxuICBvbkxlYXZlKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25MZWF2ZSA9IGNhbGxiYWNrIH1cblxuICBvblN5bmMoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vblN5bmMgPSBjYWxsYmFjayB9XG5cbiAgbGlzdChieSl7IHJldHVybiBQcmVzZW5jZS5saXN0KHRoaXMuc3RhdGUsIGJ5KSB9XG5cbiAgaW5QZW5kaW5nU3luY1N0YXRlKCl7XG4gICAgcmV0dXJuICF0aGlzLmpvaW5SZWYgfHwgKHRoaXMuam9pblJlZiAhPT0gdGhpcy5jaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8vIGxvd2VyLWxldmVsIHB1YmxpYyBzdGF0aWMgQVBJXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gc3luYyB0aGUgbGlzdCBvZiBwcmVzZW5jZXMgb24gdGhlIHNlcnZlclxuICAgKiB3aXRoIHRoZSBjbGllbnQncyBzdGF0ZS4gQW4gb3B0aW9uYWwgYG9uSm9pbmAgYW5kIGBvbkxlYXZlYCBjYWxsYmFjayBjYW5cbiAgICogYmUgcHJvdmlkZWQgdG8gcmVhY3QgdG8gY2hhbmdlcyBpbiB0aGUgY2xpZW50J3MgbG9jYWwgcHJlc2VuY2VzIGFjcm9zc1xuICAgKiBkaXNjb25uZWN0cyBhbmQgcmVjb25uZWN0cyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBzeW5jU3RhdGUoY3VycmVudFN0YXRlLCBuZXdTdGF0ZSwgb25Kb2luLCBvbkxlYXZlKXtcbiAgICBsZXQgc3RhdGUgPSB0aGlzLmNsb25lKGN1cnJlbnRTdGF0ZSlcbiAgICBsZXQgam9pbnMgPSB7fVxuICAgIGxldCBsZWF2ZXMgPSB7fVxuXG4gICAgdGhpcy5tYXAoc3RhdGUsIChrZXksIHByZXNlbmNlKSA9PiB7XG4gICAgICBpZighbmV3U3RhdGVba2V5XSl7XG4gICAgICAgIGxlYXZlc1trZXldID0gcHJlc2VuY2VcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMubWFwKG5ld1N0YXRlLCAoa2V5LCBuZXdQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBuZXdSZWZzID0gbmV3UHJlc2VuY2UubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgICBsZXQgY3VyUmVmcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBqb2luZWRNZXRhcyA9IG5ld1ByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IGN1clJlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgbGV0IGxlZnRNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBuZXdSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIGlmKGpvaW5lZE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGpvaW5zW2tleV0gPSBuZXdQcmVzZW5jZVxuICAgICAgICAgIGpvaW5zW2tleV0ubWV0YXMgPSBqb2luZWRNZXRhc1xuICAgICAgICB9XG4gICAgICAgIGlmKGxlZnRNZXRhcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICBsZWF2ZXNba2V5XSA9IHRoaXMuY2xvbmUoY3VycmVudFByZXNlbmNlKVxuICAgICAgICAgIGxlYXZlc1trZXldLm1ldGFzID0gbGVmdE1ldGFzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpvaW5zW2tleV0gPSBuZXdQcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMuc3luY0RpZmYoc3RhdGUsIHtqb2luczogam9pbnMsIGxlYXZlczogbGVhdmVzfSwgb25Kb2luLCBvbkxlYXZlKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIFVzZWQgdG8gc3luYyBhIGRpZmYgb2YgcHJlc2VuY2Ugam9pbiBhbmQgbGVhdmVcbiAgICogZXZlbnRzIGZyb20gdGhlIHNlcnZlciwgYXMgdGhleSBoYXBwZW4uIExpa2UgYHN5bmNTdGF0ZWAsIGBzeW5jRGlmZmBcbiAgICogYWNjZXB0cyBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrcyB0byByZWFjdCB0byBhIHVzZXJcbiAgICogam9pbmluZyBvciBsZWF2aW5nIGZyb20gYSBkZXZpY2UuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBzeW5jRGlmZihzdGF0ZSwgZGlmZiwgb25Kb2luLCBvbkxlYXZlKXtcbiAgICBsZXQge2pvaW5zLCBsZWF2ZXN9ID0gdGhpcy5jbG9uZShkaWZmKVxuICAgIGlmKCFvbkpvaW4peyBvbkpvaW4gPSBmdW5jdGlvbiAoKXsgfSB9XG4gICAgaWYoIW9uTGVhdmUpeyBvbkxlYXZlID0gZnVuY3Rpb24gKCl7IH0gfVxuXG4gICAgdGhpcy5tYXAoam9pbnMsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgc3RhdGVba2V5XSA9IHRoaXMuY2xvbmUobmV3UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2Upe1xuICAgICAgICBsZXQgam9pbmVkUmVmcyA9IHN0YXRlW2tleV0ubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgICBsZXQgY3VyTWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gam9pbmVkUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBzdGF0ZVtrZXldLm1ldGFzLnVuc2hpZnQoLi4uY3VyTWV0YXMpXG4gICAgICB9XG4gICAgICBvbkpvaW4oa2V5LCBjdXJyZW50UHJlc2VuY2UsIG5ld1ByZXNlbmNlKVxuICAgIH0pXG4gICAgdGhpcy5tYXAobGVhdmVzLCAoa2V5LCBsZWZ0UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBpZighY3VycmVudFByZXNlbmNlKXsgcmV0dXJuIH1cbiAgICAgIGxldCByZWZzVG9SZW1vdmUgPSBsZWZ0UHJlc2VuY2UubWV0YXMubWFwKG0gPT4gbS5waHhfcmVmKVxuICAgICAgY3VycmVudFByZXNlbmNlLm1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihwID0+IHtcbiAgICAgICAgcmV0dXJuIHJlZnNUb1JlbW92ZS5pbmRleE9mKHAucGh4X3JlZikgPCAwXG4gICAgICB9KVxuICAgICAgb25MZWF2ZShrZXksIGN1cnJlbnRQcmVzZW5jZSwgbGVmdFByZXNlbmNlKVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlLm1ldGFzLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGRlbGV0ZSBzdGF0ZVtrZXldXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gc3RhdGVcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcmVzZW5jZXMsIHdpdGggc2VsZWN0ZWQgbWV0YWRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcmVzZW5jZXNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2hvb3NlclxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJlc2VuY2V9XG4gICAqL1xuICBzdGF0aWMgbGlzdChwcmVzZW5jZXMsIGNob29zZXIpe1xuICAgIGlmKCFjaG9vc2VyKXsgY2hvb3NlciA9IGZ1bmN0aW9uIChrZXksIHByZXMpeyByZXR1cm4gcHJlcyB9IH1cblxuICAgIHJldHVybiB0aGlzLm1hcChwcmVzZW5jZXMsIChrZXksIHByZXNlbmNlKSA9PiB7XG4gICAgICByZXR1cm4gY2hvb3NlcihrZXksIHByZXNlbmNlKVxuICAgIH0pXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgc3RhdGljIG1hcChvYmosIGZ1bmMpe1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLm1hcChrZXkgPT4gZnVuYyhrZXksIG9ialtrZXldKSlcbiAgfVxuXG4gIHN0YXRpYyBjbG9uZShvYmopeyByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKSB9XG59XG4iLCAiLyogVGhlIGRlZmF1bHQgc2VyaWFsaXplciBmb3IgZW5jb2RpbmcgYW5kIGRlY29kaW5nIG1lc3NhZ2VzICovXG5pbXBvcnQge1xuICBDSEFOTkVMX0VWRU5UU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIEhFQURFUl9MRU5HVEg6IDEsXG4gIE1FVEFfTEVOR1RIOiA0LFxuICBLSU5EUzoge3B1c2g6IDAsIHJlcGx5OiAxLCBicm9hZGNhc3Q6IDJ9LFxuXG4gIGVuY29kZShtc2csIGNhbGxiYWNrKXtcbiAgICBpZihtc2cucGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RW5jb2RlKG1zZykpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwYXlsb2FkID0gW21zZy5qb2luX3JlZiwgbXNnLnJlZiwgbXNnLnRvcGljLCBtc2cuZXZlbnQsIG1zZy5wYXlsb2FkXVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGUocmF3UGF5bG9hZCwgY2FsbGJhY2spe1xuICAgIGlmKHJhd1BheWxvYWQuY29uc3RydWN0b3IgPT09IEFycmF5QnVmZmVyKXtcbiAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzLmJpbmFyeURlY29kZShyYXdQYXlsb2FkKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IFtqb2luX3JlZiwgcmVmLCB0b3BpYywgZXZlbnQsIHBheWxvYWRdID0gSlNPTi5wYXJzZShyYXdQYXlsb2FkKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKHtqb2luX3JlZiwgcmVmLCB0b3BpYywgZXZlbnQsIHBheWxvYWR9KVxuICAgIH1cbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgYmluYXJ5RW5jb2RlKG1lc3NhZ2Upe1xuICAgIGxldCB7am9pbl9yZWYsIHJlZiwgZXZlbnQsIHRvcGljLCBwYXlsb2FkfSA9IG1lc3NhZ2VcbiAgICBsZXQgbWV0YUxlbmd0aCA9IHRoaXMuTUVUQV9MRU5HVEggKyBqb2luX3JlZi5sZW5ndGggKyByZWYubGVuZ3RoICsgdG9waWMubGVuZ3RoICsgZXZlbnQubGVuZ3RoXG4gICAgbGV0IGhlYWRlciA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLkhFQURFUl9MRU5HVEggKyBtZXRhTGVuZ3RoKVxuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGhlYWRlcilcbiAgICBsZXQgb2Zmc2V0ID0gMFxuXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdGhpcy5LSU5EUy5wdXNoKSAvLyBraW5kXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgam9pbl9yZWYubGVuZ3RoKVxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIHJlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgdG9waWMubGVuZ3RoKVxuICAgIHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGV2ZW50Lmxlbmd0aClcbiAgICBBcnJheS5mcm9tKGpvaW5fcmVmLCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG4gICAgQXJyYXkuZnJvbShyZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHRvcGljLCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG4gICAgQXJyYXkuZnJvbShldmVudCwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuXG4gICAgdmFyIGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyLmJ5dGVMZW5ndGggKyBwYXlsb2FkLmJ5dGVMZW5ndGgpXG4gICAgY29tYmluZWQuc2V0KG5ldyBVaW50OEFycmF5KGhlYWRlciksIDApXG4gICAgY29tYmluZWQuc2V0KG5ldyBVaW50OEFycmF5KHBheWxvYWQpLCBoZWFkZXIuYnl0ZUxlbmd0aClcblxuICAgIHJldHVybiBjb21iaW5lZC5idWZmZXJcbiAgfSxcblxuICBiaW5hcnlEZWNvZGUoYnVmZmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpXG4gICAgbGV0IGtpbmQgPSB2aWV3LmdldFVpbnQ4KDApXG4gICAgbGV0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKVxuICAgIHN3aXRjaChraW5kKXtcbiAgICAgIGNhc2UgdGhpcy5LSU5EUy5wdXNoOiByZXR1cm4gdGhpcy5kZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2RlcilcbiAgICAgIGNhc2UgdGhpcy5LSU5EUy5yZXBseTogcmV0dXJuIHRoaXMuZGVjb2RlUmVwbHkoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLmJyb2FkY2FzdDogcmV0dXJuIHRoaXMuZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2RlcilcbiAgICB9XG4gIH0sXG5cbiAgZGVjb2RlUHVzaChidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCBqb2luUmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgdG9waWNTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuSEVBREVSX0xFTkdUSCArIHRoaXMuTUVUQV9MRU5HVEggLSAxIC8vIHB1c2hlcyBoYXZlIG5vIHJlZlxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG4gICAgcmV0dXJuIHtqb2luX3JlZjogam9pblJlZiwgcmVmOiBudWxsLCB0b3BpYzogdG9waWMsIGV2ZW50OiBldmVudCwgcGF5bG9hZDogZGF0YX1cbiAgfSxcblxuICBkZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCBqb2luUmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgcmVmU2l6ZSA9IHZpZXcuZ2V0VWludDgoMilcbiAgICBsZXQgdG9waWNTaXplID0gdmlldy5nZXRVaW50OCgzKVxuICAgIGxldCBldmVudFNpemUgPSB2aWV3LmdldFVpbnQ4KDQpXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuSEVBREVSX0xFTkdUSCArIHRoaXMuTUVUQV9MRU5HVEhcbiAgICBsZXQgam9pblJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGpvaW5SZWZTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBqb2luUmVmU2l6ZVxuICAgIGxldCByZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyByZWZTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyByZWZTaXplXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG4gICAgbGV0IHBheWxvYWQgPSB7c3RhdHVzOiBldmVudCwgcmVzcG9uc2U6IGRhdGF9XG4gICAgcmV0dXJuIHtqb2luX3JlZjogam9pblJlZiwgcmVmOiByZWYsIHRvcGljOiB0b3BpYywgZXZlbnQ6IENIQU5ORUxfRVZFTlRTLnJlcGx5LCBwYXlsb2FkOiBwYXlsb2FkfVxuICB9LFxuXG4gIGRlY29kZUJyb2FkY2FzdChidWZmZXIsIHZpZXcsIGRlY29kZXIpe1xuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDEpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMilcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgMlxuICAgIGxldCB0b3BpYyA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHRvcGljU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdG9waWNTaXplXG4gICAgbGV0IGV2ZW50ID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgZXZlbnRTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyBldmVudFNpemVcbiAgICBsZXQgZGF0YSA9IGJ1ZmZlci5zbGljZShvZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIHtqb2luX3JlZjogbnVsbCwgcmVmOiBudWxsLCB0b3BpYzogdG9waWMsIGV2ZW50OiBldmVudCwgcGF5bG9hZDogZGF0YX1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIGdsb2JhbCxcbiAgcGh4V2luZG93LFxuICBDSEFOTkVMX0VWRU5UUyxcbiAgREVGQVVMVF9USU1FT1VULFxuICBERUZBVUxUX1ZTTixcbiAgU09DS0VUX1NUQVRFUyxcbiAgVFJBTlNQT1JUUyxcbiAgV1NfQ0xPU0VfTk9STUFMXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb3N1cmVcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQWpheCBmcm9tIFwiLi9hamF4XCJcbmltcG9ydCBDaGFubmVsIGZyb20gXCIuL2NoYW5uZWxcIlxuaW1wb3J0IExvbmdQb2xsIGZyb20gXCIuL2xvbmdwb2xsXCJcbmltcG9ydCBTZXJpYWxpemVyIGZyb20gXCIuL3NlcmlhbGl6ZXJcIlxuaW1wb3J0IFRpbWVyIGZyb20gXCIuL3RpbWVyXCJcblxuLyoqIEluaXRpYWxpemVzIHRoZSBTb2NrZXQgKlxuICpcbiAqIEZvciBJRTggc3VwcG9ydCB1c2UgYW4gRVM1LXNoaW0gKGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIGBcIndzOi8vZXhhbXBsZS5jb20vc29ja2V0XCJgLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIndzczovL2V4YW1wbGUuY29tXCJgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiL3NvY2tldFwiYCAoaW5oZXJpdGVkIGhvc3QgJiBwcm90b2NvbClcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBPcHRpb25hbCBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy50cmFuc3BvcnRdIC0gVGhlIFdlYnNvY2tldCBUcmFuc3BvcnQsIGZvciBleGFtcGxlIFdlYlNvY2tldCBvciBQaG9lbml4LkxvbmdQb2xsLlxuICpcbiAqIERlZmF1bHRzIHRvIFdlYlNvY2tldCB3aXRoIGF1dG9tYXRpYyBMb25nUG9sbCBmYWxsYmFjay5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmVuY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZW5jb2RlIG91dGdvaW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT04gZW5jb2Rlci5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5kZWNvZGVdIC0gVGhlIGZ1bmN0aW9uIHRvIGRlY29kZSBpbmNvbWluZyBtZXNzYWdlcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBKU09OOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIChwYXlsb2FkLCBjYWxsYmFjaykgPT4gY2FsbGJhY2soSlNPTi5wYXJzZShwYXlsb2FkKSlcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy50aW1lb3V0XSAtIFRoZSBkZWZhdWx0IHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIHRyaWdnZXIgcHVzaCB0aW1lb3V0cy5cbiAqXG4gKiBEZWZhdWx0cyBgREVGQVVMVF9USU1FT1VUYFxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmhlYXJ0YmVhdEludGVydmFsTXNdIC0gVGhlIG1pbGxpc2VjIGludGVydmFsIHRvIHNlbmQgYSBoZWFydGJlYXQgbWVzc2FnZVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnJlY29ubmVjdEFmdGVyTXNdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWlsbGlzZWNcbiAqIHNvY2tldCByZWNvbm5lY3QgaW50ZXJ2YWwuXG4gKlxuICogRGVmYXVsdHMgdG8gc3RlcHBlZCBiYWNrb2ZmIG9mOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGZ1bmN0aW9uKHRyaWVzKXtcbiAqICAgcmV0dXJuIFsxMCwgNTAsIDEwMCwgMTUwLCAyMDAsIDI1MCwgNTAwLCAxMDAwLCAyMDAwXVt0cmllcyAtIDFdIHx8IDUwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVqb2luQWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogcmVqb2luIGludGVydmFsIGZvciBpbmRpdmlkdWFsIGNoYW5uZWxzLlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGZ1bmN0aW9uKHRyaWVzKXtcbiAqICAgcmV0dXJuIFsxMDAwLCAyMDAwLCA1MDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gKiB9XG4gKiBgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMubG9nZ2VyXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiBmb3Igc3BlY2lhbGl6ZWQgbG9nZ2luZywgaWU6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24oa2luZCwgbXNnLCBkYXRhKSB7XG4gKiAgIGNvbnNvbGUubG9nKGAke2tpbmR9OiAke21zZ31gLCBkYXRhKVxuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmxvbmdwb2xsZXJUaW1lb3V0XSAtIFRoZSBtYXhpbXVtIHRpbWVvdXQgb2YgYSBsb25nIHBvbGwgQUpBWCByZXF1ZXN0LlxuICpcbiAqIERlZmF1bHRzIHRvIDIwcyAoZG91YmxlIHRoZSBzZXJ2ZXIgbG9uZyBwb2xsIHRpbWVyKS5cbiAqXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24pfSBbb3B0cy5wYXJhbXNdIC0gVGhlIG9wdGlvbmFsIHBhcmFtcyB0byBwYXNzIHdoZW4gY29ubmVjdGluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmJpbmFyeVR5cGVdIC0gVGhlIGJpbmFyeSB0eXBlIHRvIHVzZSBmb3IgYmluYXJ5IFdlYlNvY2tldCBmcmFtZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gXCJhcnJheWJ1ZmZlclwiXG4gKlxuICogQHBhcmFtIHt2c259IFtvcHRzLnZzbl0gLSBUaGUgc2VyaWFsaXplcidzIHByb3RvY29sIHZlcnNpb24gdG8gc2VuZCBvbiBjb25uZWN0LlxuICpcbiAqIERlZmF1bHRzIHRvIERFRkFVTFRfVlNOLlxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50LCBvcHRzID0ge30pe1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MgPSB7b3BlbjogW10sIGNsb3NlOiBbXSwgZXJyb3I6IFtdLCBtZXNzYWdlOiBbXX1cbiAgICB0aGlzLmNoYW5uZWxzID0gW11cbiAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXVxuICAgIHRoaXMucmVmID0gMFxuICAgIHRoaXMudGltZW91dCA9IG9wdHMudGltZW91dCB8fCBERUZBVUxUX1RJTUVPVVRcbiAgICB0aGlzLnRyYW5zcG9ydCA9IG9wdHMudHJhbnNwb3J0IHx8IGdsb2JhbC5XZWJTb2NrZXQgfHwgTG9uZ1BvbGxcbiAgICB0aGlzLmVzdGFibGlzaGVkQ29ubmVjdGlvbnMgPSAwXG4gICAgdGhpcy5kZWZhdWx0RW5jb2RlciA9IFNlcmlhbGl6ZXIuZW5jb2RlLmJpbmQoU2VyaWFsaXplcilcbiAgICB0aGlzLmRlZmF1bHREZWNvZGVyID0gU2VyaWFsaXplci5kZWNvZGUuYmluZChTZXJpYWxpemVyKVxuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5iaW5hcnlUeXBlID0gb3B0cy5iaW5hcnlUeXBlIHx8IFwiYXJyYXlidWZmZXJcIlxuICAgIHRoaXMuY29ubmVjdENsb2NrID0gMVxuICAgIGlmKHRoaXMudHJhbnNwb3J0ICE9PSBMb25nUG9sbCl7XG4gICAgICB0aGlzLmVuY29kZSA9IG9wdHMuZW5jb2RlIHx8IHRoaXMuZGVmYXVsdEVuY29kZXJcbiAgICAgIHRoaXMuZGVjb2RlID0gb3B0cy5kZWNvZGUgfHwgdGhpcy5kZWZhdWx0RGVjb2RlclxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuY29kZSA9IHRoaXMuZGVmYXVsdEVuY29kZXJcbiAgICAgIHRoaXMuZGVjb2RlID0gdGhpcy5kZWZhdWx0RGVjb2RlclxuICAgIH1cbiAgICBsZXQgYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9IG51bGxcbiAgICBpZihwaHhXaW5kb3cgJiYgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe1xuICAgICAgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCBfZSA9PiB7XG4gICAgICAgIGlmKHRoaXMuY29ubil7XG4gICAgICAgICAgdGhpcy5kaXNjb25uZWN0KClcbiAgICAgICAgICBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gdGhpcy5jb25uZWN0Q2xvY2tcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHBoeFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIiwgX2UgPT4ge1xuICAgICAgICBpZihhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID09PSB0aGlzLmNvbm5lY3RDbG9jayl7XG4gICAgICAgICAgYXdhaXRpbmdDb25uZWN0aW9uT25QYWdlU2hvdyA9IG51bGxcbiAgICAgICAgICB0aGlzLmNvbm5lY3QoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMgPSBvcHRzLmhlYXJ0YmVhdEludGVydmFsTXMgfHwgMzAwMDBcbiAgICB0aGlzLnJlam9pbkFmdGVyTXMgPSAodHJpZXMpID0+IHtcbiAgICAgIGlmKG9wdHMucmVqb2luQWZ0ZXJNcyl7XG4gICAgICAgIHJldHVybiBvcHRzLnJlam9pbkFmdGVyTXModHJpZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZWNvbm5lY3RBZnRlck1zID0gKHRyaWVzKSA9PiB7XG4gICAgICBpZihvcHRzLnJlY29ubmVjdEFmdGVyTXMpe1xuICAgICAgICByZXR1cm4gb3B0cy5yZWNvbm5lY3RBZnRlck1zKHRyaWVzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsxMCwgNTAsIDEwMCwgMTUwLCAyMDAsIDI1MCwgNTAwLCAxMDAwLCAyMDAwXVt0cmllcyAtIDFdIHx8IDUwMDBcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5sb2dnZXIgPSBvcHRzLmxvZ2dlciB8fCBudWxsXG4gICAgdGhpcy5sb25ncG9sbGVyVGltZW91dCA9IG9wdHMubG9uZ3BvbGxlclRpbWVvdXQgfHwgMjAwMDBcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUob3B0cy5wYXJhbXMgfHwge30pXG4gICAgdGhpcy5lbmRQb2ludCA9IGAke2VuZFBvaW50fS8ke1RSQU5TUE9SVFMud2Vic29ja2V0fWBcbiAgICB0aGlzLnZzbiA9IG9wdHMudnNuIHx8IERFRkFVTFRfVlNOXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIgPSBudWxsXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IG51bGxcbiAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lciA9IG5ldyBUaW1lcigoKSA9PiB7XG4gICAgICB0aGlzLnRlYXJkb3duKCgpID0+IHRoaXMuY29ubmVjdCgpKVxuICAgIH0sIHRoaXMucmVjb25uZWN0QWZ0ZXJNcylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBMb25nUG9sbCB0cmFuc3BvcnQgcmVmZXJlbmNlXG4gICAqL1xuICBnZXRMb25nUG9sbFRyYW5zcG9ydCgpeyByZXR1cm4gTG9uZ1BvbGwgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyBhbmQgcmVwbGFjZXMgdGhlIGFjdGl2ZSB0cmFuc3BvcnRcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV3VHJhbnNwb3J0IC0gVGhlIG5ldyB0cmFuc3BvcnQgY2xhc3MgdG8gaW5zdGFudGlhdGVcbiAgICpcbiAgICovXG4gIHJlcGxhY2VUcmFuc3BvcnQobmV3VHJhbnNwb3J0KXtcbiAgICB0aGlzLmNvbm5lY3RDbG9jaysrXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gdHJ1ZVxuICAgIHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKVxuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgaWYodGhpcy5jb25uKXtcbiAgICAgIHRoaXMuY29ubi5jbG9zZSgpXG4gICAgICB0aGlzLmNvbm4gPSBudWxsXG4gICAgfVxuICAgIHRoaXMudHJhbnNwb3J0ID0gbmV3VHJhbnNwb3J0XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc29ja2V0IHByb3RvY29sXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBwcm90b2NvbCgpeyByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wubWF0Y2goL15odHRwcy8pID8gXCJ3c3NcIiA6IFwid3NcIiB9XG5cbiAgLyoqXG4gICAqIFRoZSBmdWxseSBxdWFsaWZpZWQgc29ja2V0IHVybFxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZW5kUG9pbnRVUkwoKXtcbiAgICBsZXQgdXJpID0gQWpheC5hcHBlbmRQYXJhbXMoXG4gICAgICBBamF4LmFwcGVuZFBhcmFtcyh0aGlzLmVuZFBvaW50LCB0aGlzLnBhcmFtcygpKSwge3ZzbjogdGhpcy52c259KVxuICAgIGlmKHVyaS5jaGFyQXQoMCkgIT09IFwiL1wiKXsgcmV0dXJuIHVyaSB9XG4gICAgaWYodXJpLmNoYXJBdCgxKSA9PT0gXCIvXCIpeyByZXR1cm4gYCR7dGhpcy5wcm90b2NvbCgpfToke3VyaX1gIH1cblxuICAgIHJldHVybiBgJHt0aGlzLnByb3RvY29sKCl9Oi8vJHtsb2NhdGlvbi5ob3N0fSR7dXJpfWBcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyB0aGUgc29ja2V0XG4gICAqXG4gICAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2xvc2VFdmVudCNTdGF0dXNfY29kZXMgZm9yIHZhbGlkIHN0YXR1cyBjb2Rlcy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBPcHRpb25hbCBjYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgYWZ0ZXIgc29ja2V0IGlzIGRpc2Nvbm5lY3RlZC5cbiAgICogQHBhcmFtIHtpbnRlZ2VyfSBjb2RlIC0gQSBzdGF0dXMgY29kZSBmb3IgZGlzY29ubmVjdGlvbiAoT3B0aW9uYWwpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gQSB0ZXh0dWFsIGRlc2NyaXB0aW9uIG9mIHRoZSByZWFzb24gdG8gZGlzY29ubmVjdC4gKE9wdGlvbmFsKVxuICAgKi9cbiAgZGlzY29ubmVjdChjYWxsYmFjaywgY29kZSwgcmVhc29uKXtcbiAgICB0aGlzLmNvbm5lY3RDbG9jaysrXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gdHJ1ZVxuICAgIHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKVxuICAgIHRoaXMudGVhcmRvd24oY2FsbGJhY2ssIGNvZGUsIHJlYXNvbilcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIHBhcmFtcyB0byBzZW5kIHdoZW4gY29ubmVjdGluZywgZm9yIGV4YW1wbGUgYHt1c2VyX2lkOiB1c2VyVG9rZW59YFxuICAgKlxuICAgKiBQYXNzaW5nIHBhcmFtcyB0byBjb25uZWN0IGlzIGRlcHJlY2F0ZWQ7IHBhc3MgdGhlbSBpbiB0aGUgU29ja2V0IGNvbnN0cnVjdG9yIGluc3RlYWQ6XG4gICAqIGBuZXcgU29ja2V0KFwiL3NvY2tldFwiLCB7cGFyYW1zOiB7dXNlcl9pZDogdXNlclRva2VufX0pYC5cbiAgICovXG4gIGNvbm5lY3QocGFyYW1zKXtcbiAgICBpZihwYXJhbXMpe1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhcInBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCBwYXNzIDpwYXJhbXMgdG8gdGhlIFNvY2tldCBjb25zdHJ1Y3RvclwiKVxuICAgICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKHBhcmFtcylcbiAgICB9XG4gICAgaWYodGhpcy5jb25uKXsgcmV0dXJuIH1cblxuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgIHRoaXMuY29ubiA9IG5ldyB0aGlzLnRyYW5zcG9ydCh0aGlzLmVuZFBvaW50VVJMKCkpXG4gICAgdGhpcy5jb25uLmJpbmFyeVR5cGUgPSB0aGlzLmJpbmFyeVR5cGVcbiAgICB0aGlzLmNvbm4udGltZW91dCA9IHRoaXMubG9uZ3BvbGxlclRpbWVvdXRcbiAgICB0aGlzLmNvbm4ub25vcGVuID0gKCkgPT4gdGhpcy5vbkNvbm5PcGVuKClcbiAgICB0aGlzLmNvbm4ub25lcnJvciA9IGVycm9yID0+IHRoaXMub25Db25uRXJyb3IoZXJyb3IpXG4gICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGV2ZW50ID0+IHRoaXMub25Db25uTWVzc2FnZShldmVudClcbiAgICB0aGlzLmNvbm4ub25jbG9zZSA9IGV2ZW50ID0+IHRoaXMub25Db25uQ2xvc2UoZXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogTG9ncyB0aGUgbWVzc2FnZS4gT3ZlcnJpZGUgYHRoaXMubG9nZ2VyYCBmb3Igc3BlY2lhbGl6ZWQgbG9nZ2luZy4gbm9vcHMgYnkgZGVmYXVsdFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2luZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gbXNnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqL1xuICBsb2coa2luZCwgbXNnLCBkYXRhKXsgdGhpcy5sb2dnZXIoa2luZCwgbXNnLCBkYXRhKSB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBhIGxvZ2dlciBoYXMgYmVlbiBzZXQgb24gdGhpcyBzb2NrZXQuXG4gICAqL1xuICBoYXNMb2dnZXIoKXsgcmV0dXJuIHRoaXMubG9nZ2VyICE9PSBudWxsIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBvcGVuIGV2ZW50c1xuICAgKlxuICAgKiBAZXhhbXBsZSBzb2NrZXQub25PcGVuKGZ1bmN0aW9uKCl7IGNvbnNvbGUuaW5mbyhcInRoZSBzb2NrZXQgd2FzIG9wZW5lZFwiKSB9KVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25PcGVuKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm9wZW4ucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gY2xvc2UgZXZlbnRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkNsb3NlKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmNsb3NlLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIGVycm9yIGV2ZW50c1xuICAgKlxuICAgKiBAZXhhbXBsZSBzb2NrZXQub25FcnJvcihmdW5jdGlvbihlcnJvcil7IGFsZXJ0KFwiQW4gZXJyb3Igb2NjdXJyZWRcIikgfSlcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uRXJyb3IoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gbWVzc2FnZSBldmVudHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uTWVzc2FnZShjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlLnB1c2goW3JlZiwgY2FsbGJhY2tdKVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBQaW5ncyB0aGUgc2VydmVyIGFuZCBpbnZva2VzIHRoZSBjYWxsYmFjayB3aXRoIHRoZSBSVFQgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGluZyB3YXMgcHVzaGVkIG9yIGZhbHNlIGlmIHVuYWJsZSB0byBiZSBwdXNoZWQuXG4gICAqL1xuICBwaW5nKGNhbGxiYWNrKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICBsZXQgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIHRoaXMucHVzaCh7dG9waWM6IFwicGhvZW5peFwiLCBldmVudDogXCJoZWFydGJlYXRcIiwgcGF5bG9hZDoge30sIHJlZjogcmVmfSlcbiAgICBsZXQgb25Nc2dSZWYgPSB0aGlzLm9uTWVzc2FnZShtc2cgPT4ge1xuICAgICAgaWYobXNnLnJlZiA9PT0gcmVmKXtcbiAgICAgICAgdGhpcy5vZmYoW29uTXNnUmVmXSlcbiAgICAgICAgY2FsbGJhY2soRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgY2xlYXJIZWFydGJlYXRzKCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGVhcnRiZWF0VGltZXIpXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaGVhcnRiZWF0VGltZW91dFRpbWVyKVxuICB9XG5cbiAgb25Db25uT3Blbigpe1xuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGBjb25uZWN0ZWQgdG8gJHt0aGlzLmVuZFBvaW50VVJMKCl9YClcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgIHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9ucysrXG4gICAgdGhpcy5mbHVzaFNlbmRCdWZmZXIoKVxuICAgIHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKVxuICAgIHRoaXMucmVzZXRIZWFydGJlYXQoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IGNhbGxiYWNrKCkpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgaGVhcnRiZWF0VGltZW91dCgpe1xuICAgIGlmKHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZil7XG4gICAgICB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgPSBudWxsXG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKXsgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgXCJoZWFydGJlYXQgdGltZW91dC4gQXR0ZW1wdGluZyB0byByZS1lc3RhYmxpc2ggY29ubmVjdGlvblwiKSB9XG4gICAgICB0aGlzLnRyaWdnZXJDaGFuRXJyb3IoKVxuICAgICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5yZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSwgV1NfQ0xPU0VfTk9STUFMLCBcImhlYXJ0YmVhdCB0aW1lb3V0XCIpXG4gICAgfVxuICB9XG5cbiAgcmVzZXRIZWFydGJlYXQoKXtcbiAgICBpZih0aGlzLmNvbm4gJiYgdGhpcy5jb25uLnNraXBIZWFydGJlYXQpeyByZXR1cm4gfVxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLmNsZWFySGVhcnRiZWF0cygpXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZW5kSGVhcnRiZWF0KCksIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcylcbiAgfVxuXG4gIHRlYXJkb3duKGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIGlmKCF0aGlzLmNvbm4pe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcbiAgICB9XG5cbiAgICB0aGlzLndhaXRGb3JCdWZmZXJEb25lKCgpID0+IHtcbiAgICAgIGlmKHRoaXMuY29ubil7XG4gICAgICAgIGlmKGNvZGUpeyB0aGlzLmNvbm4uY2xvc2UoY29kZSwgcmVhc29uIHx8IFwiXCIpIH0gZWxzZSB7IHRoaXMuY29ubi5jbG9zZSgpIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy53YWl0Rm9yU29ja2V0Q2xvc2VkKCgpID0+IHtcbiAgICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgICB0aGlzLmNvbm4ub25vcGVuID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubi5vbmVycm9yID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgICAgICAgIHRoaXMuY29ubi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uID0gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgd2FpdEZvckJ1ZmZlckRvbmUoY2FsbGJhY2ssIHRyaWVzID0gMSl7XG4gICAgaWYodHJpZXMgPT09IDUgfHwgIXRoaXMuY29ubiB8fCAhdGhpcy5jb25uLmJ1ZmZlcmVkQW1vdW50KXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YWl0Rm9yQnVmZmVyRG9uZShjYWxsYmFjaywgdHJpZXMgKyAxKVxuICAgIH0sIDE1MCAqIHRyaWVzKVxuICB9XG5cbiAgd2FpdEZvclNvY2tldENsb3NlZChjYWxsYmFjaywgdHJpZXMgPSAxKXtcbiAgICBpZih0cmllcyA9PT0gNSB8fCAhdGhpcy5jb25uIHx8IHRoaXMuY29ubi5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLmNsb3NlZCl7XG4gICAgICBjYWxsYmFjaygpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMud2FpdEZvclNvY2tldENsb3NlZChjYWxsYmFjaywgdHJpZXMgKyAxKVxuICAgIH0sIDE1MCAqIHRyaWVzKVxuICB9XG5cbiAgb25Db25uQ2xvc2UoZXZlbnQpe1xuICAgIGxldCBjbG9zZUNvZGUgPSBldmVudCAmJiBldmVudC5jb2RlXG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgXCJjbG9zZVwiLCBldmVudClcbiAgICB0aGlzLnRyaWdnZXJDaGFuRXJyb3IoKVxuICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICBpZighdGhpcy5jbG9zZVdhc0NsZWFuICYmIGNsb3NlQ29kZSAhPT0gMTAwMCl7XG4gICAgICB0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpXG4gICAgfVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UuZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiBjYWxsYmFjayhldmVudCkpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uQ29ubkVycm9yKGVycm9yKXtcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBlcnJvcilcbiAgICBsZXQgdHJhbnNwb3J0QmVmb3JlID0gdGhpcy50cmFuc3BvcnRcbiAgICBsZXQgZXN0YWJsaXNoZWRCZWZvcmUgPSB0aGlzLmVzdGFibGlzaGVkQ29ubmVjdGlvbnNcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmVycm9yLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4ge1xuICAgICAgY2FsbGJhY2soZXJyb3IsIHRyYW5zcG9ydEJlZm9yZSwgZXN0YWJsaXNoZWRCZWZvcmUpXG4gICAgfSlcbiAgICBpZih0cmFuc3BvcnRCZWZvcmUgPT09IHRoaXMudHJhbnNwb3J0IHx8IGVzdGFibGlzaGVkQmVmb3JlID4gMCl7XG4gICAgICB0aGlzLnRyaWdnZXJDaGFuRXJyb3IoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJpZ2dlckNoYW5FcnJvcigpe1xuICAgIHRoaXMuY2hhbm5lbHMuZm9yRWFjaChjaGFubmVsID0+IHtcbiAgICAgIGlmKCEoY2hhbm5lbC5pc0Vycm9yZWQoKSB8fCBjaGFubmVsLmlzTGVhdmluZygpIHx8IGNoYW5uZWwuaXNDbG9zZWQoKSkpe1xuICAgICAgICBjaGFubmVsLnRyaWdnZXIoQ0hBTk5FTF9FVkVOVFMuZXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgY29ubmVjdGlvblN0YXRlKCl7XG4gICAgc3dpdGNoKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4ucmVhZHlTdGF0ZSl7XG4gICAgICBjYXNlIFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZzogcmV0dXJuIFwiY29ubmVjdGluZ1wiXG4gICAgICBjYXNlIFNPQ0tFVF9TVEFURVMub3BlbjogcmV0dXJuIFwib3BlblwiXG4gICAgICBjYXNlIFNPQ0tFVF9TVEFURVMuY2xvc2luZzogcmV0dXJuIFwiY2xvc2luZ1wiXG4gICAgICBkZWZhdWx0OiByZXR1cm4gXCJjbG9zZWRcIlxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLmNvbm5lY3Rpb25TdGF0ZSgpID09PSBcIm9wZW5cIiB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEBwYXJhbSB7Q2hhbm5lbH1cbiAgICovXG4gIHJlbW92ZShjaGFubmVsKXtcbiAgICB0aGlzLm9mZihjaGFubmVsLnN0YXRlQ2hhbmdlUmVmcylcbiAgICB0aGlzLmNoYW5uZWxzID0gdGhpcy5jaGFubmVscy5maWx0ZXIoYyA9PiBjLmpvaW5SZWYoKSAhPT0gY2hhbm5lbC5qb2luUmVmKCkpXG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBgb25PcGVuYCwgYG9uQ2xvc2VgLCBgb25FcnJvcixgIGFuZCBgb25NZXNzYWdlYCByZWdpc3RyYXRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge3JlZnN9IC0gbGlzdCBvZiByZWZzIHJldHVybmVkIGJ5IGNhbGxzIHRvXG4gICAqICAgICAgICAgICAgICAgICBgb25PcGVuYCwgYG9uQ2xvc2VgLCBgb25FcnJvcixgIGFuZCBgb25NZXNzYWdlYFxuICAgKi9cbiAgb2ZmKHJlZnMpe1xuICAgIGZvcihsZXQga2V5IGluIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mpe1xuICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrc1trZXldID0gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrc1trZXldLmZpbHRlcigoW3JlZl0pID0+IHtcbiAgICAgICAgcmV0dXJuIHJlZnMuaW5kZXhPZihyZWYpID09PSAtMVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhdGVzIGEgbmV3IGNoYW5uZWwgZm9yIHRoZSBnaXZlbiB0b3BpY1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9waWNcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYW5QYXJhbXMgLSBQYXJhbWV0ZXJzIGZvciB0aGUgY2hhbm5lbFxuICAgKiBAcmV0dXJucyB7Q2hhbm5lbH1cbiAgICovXG4gIGNoYW5uZWwodG9waWMsIGNoYW5QYXJhbXMgPSB7fSl7XG4gICAgbGV0IGNoYW4gPSBuZXcgQ2hhbm5lbCh0b3BpYywgY2hhblBhcmFtcywgdGhpcylcbiAgICB0aGlzLmNoYW5uZWxzLnB1c2goY2hhbilcbiAgICByZXR1cm4gY2hhblxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAqL1xuICBwdXNoKGRhdGEpe1xuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpe1xuICAgICAgbGV0IHt0b3BpYywgZXZlbnQsIHBheWxvYWQsIHJlZiwgam9pbl9yZWZ9ID0gZGF0YVxuICAgICAgdGhpcy5sb2coXCJwdXNoXCIsIGAke3RvcGljfSAke2V2ZW50fSAoJHtqb2luX3JlZn0sICR7cmVmfSlgLCBwYXlsb2FkKVxuICAgIH1cblxuICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSl7XG4gICAgICB0aGlzLmVuY29kZShkYXRhLCByZXN1bHQgPT4gdGhpcy5jb25uLnNlbmQocmVzdWx0KSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZW5kQnVmZmVyLnB1c2goKCkgPT4gdGhpcy5lbmNvZGUoZGF0YSwgcmVzdWx0ID0+IHRoaXMuY29ubi5zZW5kKHJlc3VsdCkpKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG5leHQgbWVzc2FnZSByZWYsIGFjY291bnRpbmcgZm9yIG92ZXJmbG93c1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgbWFrZVJlZigpe1xuICAgIGxldCBuZXdSZWYgPSB0aGlzLnJlZiArIDFcbiAgICBpZihuZXdSZWYgPT09IHRoaXMucmVmKXsgdGhpcy5yZWYgPSAwIH0gZWxzZSB7IHRoaXMucmVmID0gbmV3UmVmIH1cblxuICAgIHJldHVybiB0aGlzLnJlZi50b1N0cmluZygpXG4gIH1cblxuICBzZW5kSGVhcnRiZWF0KCl7XG4gICAgaWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmICYmICF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5wdXNoKHt0b3BpYzogXCJwaG9lbml4XCIsIGV2ZW50OiBcImhlYXJ0YmVhdFwiLCBwYXlsb2FkOiB7fSwgcmVmOiB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWZ9KVxuICAgIHRoaXMuaGVhcnRiZWF0VGltZW91dFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmhlYXJ0YmVhdFRpbWVvdXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICB9XG5cbiAgZmx1c2hTZW5kQnVmZmVyKCl7XG4gICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpICYmIHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGggPiAwKXtcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlci5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKCkpXG4gICAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXVxuICAgIH1cbiAgfVxuXG4gIG9uQ29ubk1lc3NhZ2UocmF3TWVzc2FnZSl7XG4gICAgdGhpcy5kZWNvZGUocmF3TWVzc2FnZS5kYXRhLCBtc2cgPT4ge1xuICAgICAgbGV0IHt0b3BpYywgZXZlbnQsIHBheWxvYWQsIHJlZiwgam9pbl9yZWZ9ID0gbXNnXG4gICAgICBpZihyZWYgJiYgcmVmID09PSB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYpe1xuICAgICAgICB0aGlzLmNsZWFySGVhcnRiZWF0cygpXG4gICAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICAgICAgdGhpcy5oZWFydGJlYXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZW5kSGVhcnRiZWF0KCksIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcylcbiAgICAgIH1cblxuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJyZWNlaXZlXCIsIGAke3BheWxvYWQuc3RhdHVzIHx8IFwiXCJ9ICR7dG9waWN9ICR7ZXZlbnR9ICR7cmVmICYmIFwiKFwiICsgcmVmICsgXCIpXCIgfHwgXCJcIn1gLCBwYXlsb2FkKVxuXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGFubmVscy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLmNoYW5uZWxzW2ldXG4gICAgICAgIGlmKCFjaGFubmVsLmlzTWVtYmVyKHRvcGljLCBldmVudCwgcGF5bG9hZCwgam9pbl9yZWYpKXsgY29udGludWUgfVxuICAgICAgICBjaGFubmVsLnRyaWdnZXIoZXZlbnQsIHBheWxvYWQsIHJlZiwgam9pbl9yZWYpXG4gICAgICB9XG5cbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UubGVuZ3RoOyBpKyspe1xuICAgICAgICBsZXQgWywgY2FsbGJhY2tdID0gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlW2ldXG4gICAgICAgIGNhbGxiYWNrKG1zZylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgbGVhdmVPcGVuVG9waWModG9waWMpe1xuICAgIGxldCBkdXBDaGFubmVsID0gdGhpcy5jaGFubmVscy5maW5kKGMgPT4gYy50b3BpYyA9PT0gdG9waWMgJiYgKGMuaXNKb2luZWQoKSB8fCBjLmlzSm9pbmluZygpKSlcbiAgICBpZihkdXBDaGFubmVsKXtcbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGBsZWF2aW5nIGR1cGxpY2F0ZSB0b3BpYyBcIiR7dG9waWN9XCJgKVxuICAgICAgZHVwQ2hhbm5lbC5sZWF2ZSgpXG4gICAgfVxuICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IENPTlNFQ1VUSVZFX1JFTE9BRFMgPSBcImNvbnNlY3V0aXZlLXJlbG9hZHNcIlxuZXhwb3J0IGNvbnN0IE1BWF9SRUxPQURTID0gMTBcbmV4cG9ydCBjb25zdCBSRUxPQURfSklUVEVSX01JTiA9IDUwMDBcbmV4cG9ydCBjb25zdCBSRUxPQURfSklUVEVSX01BWCA9IDEwMDAwXG5leHBvcnQgY29uc3QgRkFJTFNBRkVfSklUVEVSID0gMzAwMDBcbmV4cG9ydCBjb25zdCBQSFhfRVZFTlRfQ0xBU1NFUyA9IFtcbiAgXCJwaHgtY2xpY2stbG9hZGluZ1wiLCBcInBoeC1jaGFuZ2UtbG9hZGluZ1wiLCBcInBoeC1zdWJtaXQtbG9hZGluZ1wiLFxuICBcInBoeC1rZXlkb3duLWxvYWRpbmdcIiwgXCJwaHgta2V5dXAtbG9hZGluZ1wiLCBcInBoeC1ibHVyLWxvYWRpbmdcIiwgXCJwaHgtZm9jdXMtbG9hZGluZ1wiXG5dXG5leHBvcnQgY29uc3QgUEhYX0NPTVBPTkVOVCA9IFwiZGF0YS1waHgtY29tcG9uZW50XCJcbmV4cG9ydCBjb25zdCBQSFhfTElWRV9MSU5LID0gXCJkYXRhLXBoeC1saW5rXCJcbmV4cG9ydCBjb25zdCBQSFhfVFJBQ0tfU1RBVElDID0gXCJ0cmFjay1zdGF0aWNcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSU5LX1NUQVRFID0gXCJkYXRhLXBoeC1saW5rLXN0YXRlXCJcbmV4cG9ydCBjb25zdCBQSFhfUkVGID0gXCJkYXRhLXBoeC1yZWZcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUZfU1JDID0gXCJkYXRhLXBoeC1yZWYtc3JjXCJcbmV4cG9ydCBjb25zdCBQSFhfVFJBQ0tfVVBMT0FEUyA9IFwidHJhY2stdXBsb2Fkc1wiXG5leHBvcnQgY29uc3QgUEhYX1VQTE9BRF9SRUYgPSBcImRhdGEtcGh4LXVwbG9hZC1yZWZcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUkVGTElHSFRFRF9SRUZTID0gXCJkYXRhLXBoeC1wcmVmbGlnaHRlZC1yZWZzXCJcbmV4cG9ydCBjb25zdCBQSFhfRE9ORV9SRUZTID0gXCJkYXRhLXBoeC1kb25lLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9EUk9QX1RBUkdFVCA9IFwiZHJvcC10YXJnZXRcIlxuZXhwb3J0IGNvbnN0IFBIWF9BQ1RJVkVfRU5UUllfUkVGUyA9IFwiZGF0YS1waHgtYWN0aXZlLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0ZJTEVfVVBEQVRFRCA9IFwicGh4OmxpdmUtZmlsZTp1cGRhdGVkXCJcbmV4cG9ydCBjb25zdCBQSFhfU0tJUCA9IFwiZGF0YS1waHgtc2tpcFwiXG5leHBvcnQgY29uc3QgUEhYX1BSVU5FID0gXCJkYXRhLXBoeC1wcnVuZVwiXG5leHBvcnQgY29uc3QgUEhYX1BBR0VfTE9BRElORyA9IFwicGFnZS1sb2FkaW5nXCJcbmV4cG9ydCBjb25zdCBQSFhfQ09OTkVDVEVEX0NMQVNTID0gXCJwaHgtY29ubmVjdGVkXCJcbmV4cG9ydCBjb25zdCBQSFhfTE9BRElOR19DTEFTUyA9IFwicGh4LWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9OT19GRUVEQkFDS19DTEFTUyA9IFwicGh4LW5vLWZlZWRiYWNrXCJcbmV4cG9ydCBjb25zdCBQSFhfRVJST1JfQ0xBU1MgPSBcInBoeC1lcnJvclwiXG5leHBvcnQgY29uc3QgUEhYX0NMSUVOVF9FUlJPUl9DTEFTUyA9IFwicGh4LWNsaWVudC1lcnJvclwiXG5leHBvcnQgY29uc3QgUEhYX1NFUlZFUl9FUlJPUl9DTEFTUyA9IFwicGh4LXNlcnZlci1lcnJvclwiXG5leHBvcnQgY29uc3QgUEhYX1BBUkVOVF9JRCA9IFwiZGF0YS1waHgtcGFyZW50LWlkXCJcbmV4cG9ydCBjb25zdCBQSFhfTUFJTiA9IFwiZGF0YS1waHgtbWFpblwiXG5leHBvcnQgY29uc3QgUEhYX1JPT1RfSUQgPSBcImRhdGEtcGh4LXJvb3QtaWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9WSUVXUE9SVF9UT1AgPSBcInZpZXdwb3J0LXRvcFwiXG5leHBvcnQgY29uc3QgUEhYX1ZJRVdQT1JUX0JPVFRPTSA9IFwidmlld3BvcnQtYm90dG9tXCJcbmV4cG9ydCBjb25zdCBQSFhfVFJJR0dFUl9BQ1RJT04gPSBcInRyaWdnZXItYWN0aW9uXCJcbmV4cG9ydCBjb25zdCBQSFhfRkVFREJBQ0tfRk9SID0gXCJmZWVkYmFjay1mb3JcIlxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfRk9DVVNFRCA9IFwicGh4LWhhcy1mb2N1c2VkXCJcbmV4cG9ydCBjb25zdCBGT0NVU0FCTEVfSU5QVVRTID0gW1widGV4dFwiLCBcInRleHRhcmVhXCIsIFwibnVtYmVyXCIsIFwiZW1haWxcIiwgXCJwYXNzd29yZFwiLCBcInNlYXJjaFwiLCBcInRlbFwiLCBcInVybFwiLCBcImRhdGVcIiwgXCJ0aW1lXCIsIFwiZGF0ZXRpbWUtbG9jYWxcIiwgXCJjb2xvclwiLCBcInJhbmdlXCJdXG5leHBvcnQgY29uc3QgQ0hFQ0tBQkxFX0lOUFVUUyA9IFtcImNoZWNrYm94XCIsIFwicmFkaW9cIl1cbmV4cG9ydCBjb25zdCBQSFhfSEFTX1NVQk1JVFRFRCA9IFwicGh4LWhhcy1zdWJtaXR0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TRVNTSU9OID0gXCJkYXRhLXBoeC1zZXNzaW9uXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV19TRUxFQ1RPUiA9IGBbJHtQSFhfU0VTU0lPTn1dYFxuZXhwb3J0IGNvbnN0IFBIWF9TVElDS1kgPSBcImRhdGEtcGh4LXN0aWNreVwiXG5leHBvcnQgY29uc3QgUEhYX1NUQVRJQyA9IFwiZGF0YS1waHgtc3RhdGljXCJcbmV4cG9ydCBjb25zdCBQSFhfUkVBRE9OTFkgPSBcImRhdGEtcGh4LXJlYWRvbmx5XCJcbmV4cG9ydCBjb25zdCBQSFhfRElTQUJMRUQgPSBcImRhdGEtcGh4LWRpc2FibGVkXCJcbmV4cG9ydCBjb25zdCBQSFhfRElTQUJMRV9XSVRIID0gXCJkaXNhYmxlLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSA9IFwiZGF0YS1waHgtZGlzYWJsZS13aXRoLXJlc3RvcmVcIlxuZXhwb3J0IGNvbnN0IFBIWF9IT09LID0gXCJob29rXCJcbmV4cG9ydCBjb25zdCBQSFhfREVCT1VOQ0UgPSBcImRlYm91bmNlXCJcbmV4cG9ydCBjb25zdCBQSFhfVEhST1RUTEUgPSBcInRocm90dGxlXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBEQVRFID0gXCJ1cGRhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9TVFJFQU0gPSBcInN0cmVhbVwiXG5leHBvcnQgY29uc3QgUEhYX1NUUkVBTV9SRUYgPSBcImRhdGEtcGh4LXN0cmVhbVwiXG5leHBvcnQgY29uc3QgUEhYX0tFWSA9IFwia2V5XCJcbmV4cG9ydCBjb25zdCBQSFhfUFJJVkFURSA9IFwicGh4UHJpdmF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX0FVVE9fUkVDT1ZFUiA9IFwiYXV0by1yZWNvdmVyXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfREVCVUcgPSBcInBoeDpsaXZlLXNvY2tldDpkZWJ1Z1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX1BST0ZJTEUgPSBcInBoeDpsaXZlLXNvY2tldDpwcm9maWxpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9MQVRFTkNZX1NJTSA9IFwicGh4OmxpdmUtc29ja2V0OmxhdGVuY3ktc2ltXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJPR1JFU1MgPSBcInByb2dyZXNzXCJcbmV4cG9ydCBjb25zdCBQSFhfTU9VTlRFRCA9IFwibW91bnRlZFwiXG5leHBvcnQgY29uc3QgTE9BREVSX1RJTUVPVVQgPSAxXG5leHBvcnQgY29uc3QgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCA9IDIwMFxuZXhwb3J0IGNvbnN0IEJJTkRJTkdfUFJFRklYID0gXCJwaHgtXCJcbmV4cG9ydCBjb25zdCBQVVNIX1RJTUVPVVQgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IExJTktfSEVBREVSID0gXCJ4LXJlcXVlc3RlZC13aXRoXCJcbmV4cG9ydCBjb25zdCBSRVNQT05TRV9VUkxfSEVBREVSID0gXCJ4LXJlc3BvbnNlLXVybFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfVFJJR0dFUiA9IFwiZGVib3VuY2UtdHJpZ2dlclwiXG5leHBvcnQgY29uc3QgVEhST1RUTEVEID0gXCJ0aHJvdHRsZWRcIlxuZXhwb3J0IGNvbnN0IERFQk9VTkNFX1BSRVZfS0VZID0gXCJkZWJvdW5jZS1wcmV2LWtleVwiXG5leHBvcnQgY29uc3QgREVGQVVMVFMgPSB7XG4gIGRlYm91bmNlOiAzMDAsXG4gIHRocm90dGxlOiAzMDBcbn1cblxuLy8gUmVuZGVyZWRcbmV4cG9ydCBjb25zdCBEWU5BTUlDUyA9IFwiZFwiXG5leHBvcnQgY29uc3QgU1RBVElDID0gXCJzXCJcbmV4cG9ydCBjb25zdCBDT01QT05FTlRTID0gXCJjXCJcbmV4cG9ydCBjb25zdCBFVkVOVFMgPSBcImVcIlxuZXhwb3J0IGNvbnN0IFJFUExZID0gXCJyXCJcbmV4cG9ydCBjb25zdCBUSVRMRSA9IFwidFwiXG5leHBvcnQgY29uc3QgVEVNUExBVEVTID0gXCJwXCJcbmV4cG9ydCBjb25zdCBTVFJFQU0gPSBcInN0cmVhbVwiXG4iLCAiaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRyeVVwbG9hZGVyIHtcbiAgY29uc3RydWN0b3IoZW50cnksIGNodW5rU2l6ZSwgbGl2ZVNvY2tldCl7XG4gICAgdGhpcy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuICAgIHRoaXMuZW50cnkgPSBlbnRyeVxuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHRoaXMuY2h1bmtTaXplID0gY2h1bmtTaXplXG4gICAgdGhpcy5jaHVua1RpbWVyID0gbnVsbFxuICAgIHRoaXMudXBsb2FkQ2hhbm5lbCA9IGxpdmVTb2NrZXQuY2hhbm5lbChgbHZ1OiR7ZW50cnkucmVmfWAsIHt0b2tlbjogZW50cnkubWV0YWRhdGEoKX0pXG4gIH1cblxuICBlcnJvcihyZWFzb24pe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmNodW5rVGltZXIpXG4gICAgdGhpcy51cGxvYWRDaGFubmVsLmxlYXZlKClcbiAgICB0aGlzLmVudHJ5LmVycm9yKHJlYXNvbilcbiAgfVxuXG4gIHVwbG9hZCgpe1xuICAgIHRoaXMudXBsb2FkQ2hhbm5lbC5vbkVycm9yKHJlYXNvbiA9PiB0aGlzLmVycm9yKHJlYXNvbikpXG4gICAgdGhpcy51cGxvYWRDaGFubmVsLmpvaW4oKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBfZGF0YSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSlcbiAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgfVxuXG4gIGlzRG9uZSgpeyByZXR1cm4gdGhpcy5vZmZzZXQgPj0gdGhpcy5lbnRyeS5maWxlLnNpemUgfVxuXG4gIHJlYWROZXh0Q2h1bmsoKXtcbiAgICBsZXQgcmVhZGVyID0gbmV3IHdpbmRvdy5GaWxlUmVhZGVyKClcbiAgICBsZXQgYmxvYiA9IHRoaXMuZW50cnkuZmlsZS5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5jaHVua1NpemUgKyB0aGlzLm9mZnNldClcbiAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgIGlmKGUudGFyZ2V0LmVycm9yID09PSBudWxsKXtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gZS50YXJnZXQucmVzdWx0LmJ5dGVMZW5ndGhcbiAgICAgICAgdGhpcy5wdXNoQ2h1bmsoZS50YXJnZXQucmVzdWx0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGxvZ0Vycm9yKFwiUmVhZCBlcnJvcjogXCIgKyBlLnRhcmdldC5lcnJvcilcbiAgICAgIH1cbiAgICB9XG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpXG4gIH1cblxuICBwdXNoQ2h1bmsoY2h1bmspe1xuICAgIGlmKCF0aGlzLnVwbG9hZENoYW5uZWwuaXNKb2luZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLnB1c2goXCJjaHVua1wiLCBjaHVuaylcbiAgICAgIC5yZWNlaXZlKFwib2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmVudHJ5LnByb2dyZXNzKCh0aGlzLm9mZnNldCAvIHRoaXMuZW50cnkuZmlsZS5zaXplKSAqIDEwMClcbiAgICAgICAgaWYoIXRoaXMuaXNEb25lKCkpe1xuICAgICAgICAgIHRoaXMuY2h1bmtUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZWFkTmV4dENodW5rKCksIHRoaXMubGl2ZVNvY2tldC5nZXRMYXRlbmN5U2ltKCkgfHwgMClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9WSUVXX1NFTEVDVE9SXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCBFbnRyeVVwbG9hZGVyIGZyb20gXCIuL2VudHJ5X3VwbG9hZGVyXCJcblxuZXhwb3J0IGxldCBsb2dFcnJvciA9IChtc2csIG9iaikgPT4gY29uc29sZS5lcnJvciAmJiBjb25zb2xlLmVycm9yKG1zZywgb2JqKVxuXG5leHBvcnQgbGV0IGlzQ2lkID0gKGNpZCkgPT4ge1xuICBsZXQgdHlwZSA9IHR5cGVvZihjaWQpXG4gIHJldHVybiB0eXBlID09PSBcIm51bWJlclwiIHx8ICh0eXBlID09PSBcInN0cmluZ1wiICYmIC9eKDB8WzEtOV1cXGQqKSQvLnRlc3QoY2lkKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdER1cGxpY2F0ZUlkcygpe1xuICBsZXQgaWRzID0gbmV3IFNldCgpXG4gIGxldCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqW2lkXVwiKVxuICBmb3IobGV0IGkgPSAwLCBsZW4gPSBlbGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKyl7XG4gICAgaWYoaWRzLmhhcyhlbGVtc1tpXS5pZCkpe1xuICAgICAgY29uc29sZS5lcnJvcihgTXVsdGlwbGUgSURzIGRldGVjdGVkOiAke2VsZW1zW2ldLmlkfS4gRW5zdXJlIHVuaXF1ZSBlbGVtZW50IGlkcy5gKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZHMuYWRkKGVsZW1zW2ldLmlkKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgbGV0IGRlYnVnID0gKHZpZXcsIGtpbmQsIG1zZywgb2JqKSA9PiB7XG4gIGlmKHZpZXcubGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICBjb25zb2xlLmxvZyhgJHt2aWV3LmlkfSAke2tpbmR9OiAke21zZ30gLSBgLCBvYmopXG4gIH1cbn1cblxuLy8gd3JhcHMgdmFsdWUgaW4gY2xvc3VyZSBvciByZXR1cm5zIGNsb3N1cmVcbmV4cG9ydCBsZXQgY2xvc3VyZSA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiA/IHZhbCA6IGZ1bmN0aW9uICgpeyByZXR1cm4gdmFsIH1cblxuZXhwb3J0IGxldCBjbG9uZSA9IChvYmopID0+IHsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSkgfVxuXG5leHBvcnQgbGV0IGNsb3Nlc3RQaHhCaW5kaW5nID0gKGVsLCBiaW5kaW5nLCBib3JkZXJFbCkgPT4ge1xuICBkbyB7XG4gICAgaWYoZWwubWF0Y2hlcyhgWyR7YmluZGluZ31dYCkgJiYgIWVsLmRpc2FibGVkKXsgcmV0dXJuIGVsIH1cbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQgfHwgZWwucGFyZW50Tm9kZVxuICB9IHdoaWxlKGVsICE9PSBudWxsICYmIGVsLm5vZGVUeXBlID09PSAxICYmICEoKGJvcmRlckVsICYmIGJvcmRlckVsLmlzU2FtZU5vZGUoZWwpKSB8fCBlbC5tYXRjaGVzKFBIWF9WSUVXX1NFTEVDVE9SKSkpXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBsZXQgaXNPYmplY3QgPSAob2JqKSA9PiB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiAhKG9iaiBpbnN0YW5jZW9mIEFycmF5KVxufVxuXG5leHBvcnQgbGV0IGlzRXF1YWxPYmogPSAob2JqMSwgb2JqMikgPT4gSlNPTi5zdHJpbmdpZnkob2JqMSkgPT09IEpTT04uc3RyaW5naWZ5KG9iajIpXG5cbmV4cG9ydCBsZXQgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgZm9yKGxldCB4IGluIG9iail7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBsZXQgbWF5YmUgPSAoZWwsIGNhbGxiYWNrKSA9PiBlbCAmJiBjYWxsYmFjayhlbClcblxuZXhwb3J0IGxldCBjaGFubmVsVXBsb2FkZXIgPSBmdW5jdGlvbiAoZW50cmllcywgb25FcnJvciwgcmVzcCwgbGl2ZVNvY2tldCl7XG4gIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgbGV0IGVudHJ5VXBsb2FkZXIgPSBuZXcgRW50cnlVcGxvYWRlcihlbnRyeSwgcmVzcC5jb25maWcuY2h1bmtfc2l6ZSwgbGl2ZVNvY2tldClcbiAgICBlbnRyeVVwbG9hZGVyLnVwbG9hZCgpXG4gIH0pXG59XG4iLCAibGV0IEJyb3dzZXIgPSB7XG4gIGNhblB1c2hTdGF0ZSgpeyByZXR1cm4gKHR5cGVvZiAoaGlzdG9yeS5wdXNoU3RhdGUpICE9PSBcInVuZGVmaW5lZFwiKSB9LFxuXG4gIGRyb3BMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpXG4gIH0sXG5cbiAgdXBkYXRlTG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSwgaW5pdGlhbCwgZnVuYyl7XG4gICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IGtleSA9IHRoaXMubG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpXG4gICAgbGV0IG5ld1ZhbCA9IGN1cnJlbnQgPT09IG51bGwgPyBpbml0aWFsIDogZnVuYyhjdXJyZW50KVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsKSlcbiAgICByZXR1cm4gbmV3VmFsXG4gIH0sXG5cbiAgZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSl7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSkpKVxuICB9LFxuXG4gIHVwZGF0ZUN1cnJlbnRTdGF0ZShjYWxsYmFjayl7XG4gICAgaWYoIXRoaXMuY2FuUHVzaFN0YXRlKCkpeyByZXR1cm4gfVxuICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGNhbGxiYWNrKGhpc3Rvcnkuc3RhdGUgfHwge30pLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgfSxcblxuICBwdXNoU3RhdGUoa2luZCwgbWV0YSwgdG8pe1xuICAgIGlmKHRoaXMuY2FuUHVzaFN0YXRlKCkpe1xuICAgICAgaWYodG8gIT09IHdpbmRvdy5sb2NhdGlvbi5ocmVmKXtcbiAgICAgICAgaWYobWV0YS50eXBlID09IFwicmVkaXJlY3RcIiAmJiBtZXRhLnNjcm9sbCl7XG4gICAgICAgICAgLy8gSWYgd2UncmUgcmVkaXJlY3Rpbmcgc3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsWSBmb3IgdGhlIGN1cnJlbnQgaGlzdG9yeSBzdGF0ZS5cbiAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gaGlzdG9yeS5zdGF0ZSB8fCB7fVxuICAgICAgICAgIGN1cnJlbnRTdGF0ZS5zY3JvbGwgPSBtZXRhLnNjcm9sbFxuICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGN1cnJlbnRTdGF0ZSwgXCJcIiwgd2luZG93LmxvY2F0aW9uLmhyZWYpXG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgbWV0YS5zY3JvbGwgLy8gT25seSBzdG9yZSB0aGUgc2Nyb2xsIGluIHRoZSByZWRpcmVjdCBjYXNlLlxuICAgICAgICBoaXN0b3J5W2tpbmQgKyBcIlN0YXRlXCJdKG1ldGEsIFwiXCIsIHRvIHx8IG51bGwpIC8vIElFIHdpbGwgY29lcmNlIHVuZGVmaW5lZCB0byBzdHJpbmdcbiAgICAgICAgbGV0IGhhc2hFbCA9IHRoaXMuZ2V0SGFzaFRhcmdldEVsKHdpbmRvdy5sb2NhdGlvbi5oYXNoKVxuXG4gICAgICAgIGlmKGhhc2hFbCl7XG4gICAgICAgICAgaGFzaEVsLnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgfSBlbHNlIGlmKG1ldGEudHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsKDAsIDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWRpcmVjdCh0bylcbiAgICB9XG4gIH0sXG5cbiAgc2V0Q29va2llKG5hbWUsIHZhbHVlKXtcbiAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT0ke3ZhbHVlfWBcbiAgfSxcblxuICBnZXRDb29raWUobmFtZSl7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKG5ldyBSZWdFeHAoYCg/Oig/Ol58Lio7XFxzKikke25hbWV9XFxzKlxcPVxccyooW147XSopLiokKXxeLiokYCksIFwiJDFcIilcbiAgfSxcblxuICByZWRpcmVjdCh0b1VSTCwgZmxhc2gpe1xuICAgIGlmKGZsYXNoKXsgQnJvd3Nlci5zZXRDb29raWUoXCJfX3Bob2VuaXhfZmxhc2hfX1wiLCBmbGFzaCArIFwiOyBtYXgtYWdlPTYwMDAwOyBwYXRoPS9cIikgfVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRvVVJMXG4gIH0sXG5cbiAgbG9jYWxLZXkobmFtZXNwYWNlLCBzdWJrZXkpeyByZXR1cm4gYCR7bmFtZXNwYWNlfS0ke3N1YmtleX1gIH0sXG5cbiAgZ2V0SGFzaFRhcmdldEVsKG1heWJlSGFzaCl7XG4gICAgbGV0IGhhc2ggPSBtYXliZUhhc2gudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSlcbiAgICBpZihoYXNoID09PSBcIlwiKXsgcmV0dXJuIH1cbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaGFzaCkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtuYW1lPVwiJHtoYXNofVwiXWApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnJvd3NlclxuIiwgImltcG9ydCB7XG4gIENIRUNLQUJMRV9JTlBVVFMsXG4gIERFQk9VTkNFX1BSRVZfS0VZLFxuICBERUJPVU5DRV9UUklHR0VSLFxuICBGT0NVU0FCTEVfSU5QVVRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0hBU19GT0NVU0VELFxuICBQSFhfSEFTX1NVQk1JVFRFRCxcbiAgUEhYX01BSU4sXG4gIFBIWF9OT19GRUVEQkFDS19DTEFTUyxcbiAgUEhYX1BBUkVOVF9JRCxcbiAgUEhYX1BSSVZBVEUsXG4gIFBIWF9SRUYsXG4gIFBIWF9SRUZfU1JDLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9VUExPQURfUkVGLFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1NUSUNLWSxcbiAgVEhST1RUTEVEXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGxvZ0Vycm9yXG59IGZyb20gXCIuL3V0aWxzXCJcblxubGV0IERPTSA9IHtcbiAgYnlJZChpZCl7IHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgfHwgbG9nRXJyb3IoYG5vIGlkIGZvdW5kIGZvciAke2lkfWApIH0sXG5cbiAgcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSl7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpXG4gICAgaWYoZWwuY2xhc3NMaXN0Lmxlbmd0aCA9PT0gMCl7IGVsLnJlbW92ZUF0dHJpYnV0ZShcImNsYXNzXCIpIH1cbiAgfSxcblxuICBhbGwobm9kZSwgcXVlcnksIGNhbGxiYWNrKXtcbiAgICBpZighbm9kZSl7IHJldHVybiBbXSB9XG4gICAgbGV0IGFycmF5ID0gQXJyYXkuZnJvbShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpKVxuICAgIHJldHVybiBjYWxsYmFjayA/IGFycmF5LmZvckVhY2goY2FsbGJhY2spIDogYXJyYXlcbiAgfSxcblxuICBjaGlsZE5vZGVMZW5ndGgoaHRtbCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkRWxlbWVudENvdW50XG4gIH0sXG5cbiAgaXNVcGxvYWRJbnB1dChlbCl7IHJldHVybiBlbC50eXBlID09PSBcImZpbGVcIiAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpICE9PSBudWxsIH0sXG5cbiAgZmluZFVwbG9hZElucHV0cyhub2RlKXsgcmV0dXJuIHRoaXMuYWxsKG5vZGUsIGBpbnB1dFt0eXBlPVwiZmlsZVwiXVske1BIWF9VUExPQURfUkVGfV1gKSB9LFxuXG4gIGZpbmRDb21wb25lbnROb2RlTGlzdChub2RlLCBjaWQpe1xuICAgIHJldHVybiB0aGlzLmZpbHRlcldpdGhpblNhbWVMaXZlVmlldyh0aGlzLmFsbChub2RlLCBgWyR7UEhYX0NPTVBPTkVOVH09XCIke2NpZH1cIl1gKSwgbm9kZSlcbiAgfSxcblxuICBpc1BoeERlc3Ryb3llZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5pZCAmJiBET00ucHJpdmF0ZShub2RlLCBcImRlc3Ryb3llZFwiKSA/IHRydWUgOiBmYWxzZVxuICB9LFxuXG4gIHdhbnRzTmV3VGFiKGUpe1xuICAgIGxldCB3YW50c05ld1RhYiA9IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5IHx8IGUubWV0YUtleSB8fCAoZS5idXR0b24gJiYgZS5idXR0b24gPT09IDEpXG4gICAgbGV0IGlzRG93bmxvYWQgPSAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlLnRhcmdldC5oYXNBdHRyaWJ1dGUoXCJkb3dubG9hZFwiKSlcbiAgICBsZXQgaXNUYXJnZXRCbGFuayA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKSA9PT0gXCJfYmxhbmtcIlxuICAgIHJldHVybiB3YW50c05ld1RhYiB8fCBpc1RhcmdldEJsYW5rIHx8IGlzRG93bmxvYWRcbiAgfSxcblxuICBpc1VubG9hZGFibGVGb3JtU3VibWl0KGUpe1xuICAgIHJldHVybiAhZS5kZWZhdWx0UHJldmVudGVkICYmICF0aGlzLndhbnRzTmV3VGFiKGUpXG4gIH0sXG5cbiAgaXNOZXdQYWdlSHJlZihocmVmLCBjdXJyZW50TG9jYXRpb24pe1xuICAgIGlmKGhyZWYuc3RhcnRzV2l0aChcIm1haWx0bzpcIikgfHwgaHJlZi5zdGFydHNXaXRoKFwidGVsOlwiKSl7IHJldHVybiBmYWxzZSB9XG5cbiAgICBsZXQgdXJsXG4gICAgdHJ5IHtcbiAgICAgIHVybCA9IG5ldyBVUkwoaHJlZilcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwoaHJlZiwgY3VycmVudExvY2F0aW9uKVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIC8vIGJhZCBVUkwsIGZhbGxiYWNrIHRvIGxldCBicm93c2VyIHRyeSBpdCBhcyBleHRlcm5hbFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmKHVybC5ob3N0ID09PSBjdXJyZW50TG9jYXRpb24uaG9zdCAmJiB1cmwucHJvdG9jb2wgPT09IGN1cnJlbnRMb2NhdGlvbi5wcm90b2NvbCl7XG4gICAgICBpZih1cmwucGF0aG5hbWUgPT09IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZSAmJiB1cmwuc2VhcmNoID09PSBjdXJyZW50TG9jYXRpb24uc2VhcmNoKXtcbiAgICAgICAgcmV0dXJuIHVybC5oYXNoID09PSBcIlwiICYmICF1cmwuaHJlZi5lbmRzV2l0aChcIiNcIilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfSxcblxuICBtYXJrUGh4Q2hpbGREZXN0cm95ZWQoZWwpe1xuICAgIGlmKHRoaXMuaXNQaHhDaGlsZChlbCkpeyBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIFwiXCIpIH1cbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIFwiZGVzdHJveWVkXCIsIHRydWUpXG4gIH0sXG5cbiAgZmluZFBoeENoaWxkcmVuSW5GcmFnbWVudChodG1sLCBwYXJlbnRJZCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0aGlzLmZpbmRQaHhDaGlsZHJlbih0ZW1wbGF0ZS5jb250ZW50LCBwYXJlbnRJZClcbiAgfSxcblxuICBpc0lnbm9yZWQoZWwsIHBoeFVwZGF0ZSl7XG4gICAgcmV0dXJuIChlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSB8fCBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC11cGRhdGVcIikpID09PSBcImlnbm9yZVwiXG4gIH0sXG5cbiAgaXNQaHhVcGRhdGUoZWwsIHBoeFVwZGF0ZSwgdXBkYXRlVHlwZXMpe1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgdXBkYXRlVHlwZXMuaW5kZXhPZihlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSkgPj0gMFxuICB9LFxuXG4gIGZpbmRQaHhTdGlja3koZWwpeyByZXR1cm4gdGhpcy5hbGwoZWwsIGBbJHtQSFhfU1RJQ0tZfV1gKSB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbihlbCwgcGFyZW50SWQpe1xuICAgIHJldHVybiB0aGlzLmFsbChlbCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9WyR7UEhYX1BBUkVOVF9JRH09XCIke3BhcmVudElkfVwiXWApXG4gIH0sXG5cbiAgZmluZFBhcmVudENJRHMobm9kZSwgY2lkcyl7XG4gICAgbGV0IGluaXRpYWwgPSBuZXcgU2V0KGNpZHMpXG4gICAgbGV0IHBhcmVudENpZHMgPVxuICAgICAgY2lkcy5yZWR1Y2UoKGFjYywgY2lkKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY3RvciA9IGBbJHtQSFhfQ09NUE9ORU5UfT1cIiR7Y2lkfVwiXSBbJHtQSFhfQ09NUE9ORU5UfV1gXG5cbiAgICAgICAgdGhpcy5maWx0ZXJXaXRoaW5TYW1lTGl2ZVZpZXcodGhpcy5hbGwobm9kZSwgc2VsZWN0b3IpLCBub2RlKVxuICAgICAgICAgIC5tYXAoZWwgPT4gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKSlcbiAgICAgICAgICAuZm9yRWFjaChjaGlsZENJRCA9PiBhY2MuZGVsZXRlKGNoaWxkQ0lEKSlcblxuICAgICAgICByZXR1cm4gYWNjXG4gICAgICB9LCBpbml0aWFsKVxuXG4gICAgcmV0dXJuIHBhcmVudENpZHMuc2l6ZSA9PT0gMCA/IG5ldyBTZXQoY2lkcykgOiBwYXJlbnRDaWRzXG4gIH0sXG5cbiAgZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KG5vZGVzLCBwYXJlbnQpe1xuICAgIGlmKHBhcmVudC5xdWVyeVNlbGVjdG9yKFBIWF9WSUVXX1NFTEVDVE9SKSl7XG4gICAgICByZXR1cm4gbm9kZXMuZmlsdGVyKGVsID0+IHRoaXMud2l0aGluU2FtZUxpdmVWaWV3KGVsLCBwYXJlbnQpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZXNcbiAgICB9XG4gIH0sXG5cbiAgd2l0aGluU2FtZUxpdmVWaWV3KG5vZGUsIHBhcmVudCl7XG4gICAgd2hpbGUobm9kZSA9IG5vZGUucGFyZW50Tm9kZSl7XG4gICAgICBpZihub2RlLmlzU2FtZU5vZGUocGFyZW50KSl7IHJldHVybiB0cnVlIH1cbiAgICAgIGlmKG5vZGUuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKSAhPT0gbnVsbCl7IHJldHVybiBmYWxzZSB9XG4gICAgfVxuICB9LFxuXG4gIHByaXZhdGUoZWwsIGtleSl7IHJldHVybiBlbFtQSFhfUFJJVkFURV0gJiYgZWxbUEhYX1BSSVZBVEVdW2tleV0gfSxcblxuICBkZWxldGVQcml2YXRlKGVsLCBrZXkpeyBlbFtQSFhfUFJJVkFURV0gJiYgZGVsZXRlIChlbFtQSFhfUFJJVkFURV1ba2V5XSkgfSxcblxuICBwdXRQcml2YXRlKGVsLCBrZXksIHZhbHVlKXtcbiAgICBpZighZWxbUEhYX1BSSVZBVEVdKXsgZWxbUEhYX1BSSVZBVEVdID0ge30gfVxuICAgIGVsW1BIWF9QUklWQVRFXVtrZXldID0gdmFsdWVcbiAgfSxcblxuICB1cGRhdGVQcml2YXRlKGVsLCBrZXksIGRlZmF1bHRWYWwsIHVwZGF0ZUZ1bmMpe1xuICAgIGxldCBleGlzdGluZyA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKGV4aXN0aW5nID09PSB1bmRlZmluZWQpe1xuICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIHVwZGF0ZUZ1bmMoZGVmYXVsdFZhbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGV4aXN0aW5nKSlcbiAgICB9XG4gIH0sXG5cbiAgY29weVByaXZhdGVzKHRhcmdldCwgc291cmNlKXtcbiAgICBpZihzb3VyY2VbUEhYX1BSSVZBVEVdKXtcbiAgICAgIHRhcmdldFtQSFhfUFJJVkFURV0gPSBzb3VyY2VbUEhYX1BSSVZBVEVdXG4gICAgfVxuICB9LFxuXG4gIHB1dFRpdGxlKHN0cil7XG4gICAgbGV0IHRpdGxlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGl0bGVcIilcbiAgICBpZih0aXRsZUVsKXtcbiAgICAgIGxldCB7cHJlZml4LCBzdWZmaXh9ID0gdGl0bGVFbC5kYXRhc2V0XG4gICAgICBkb2N1bWVudC50aXRsZSA9IGAke3ByZWZpeCB8fCBcIlwifSR7c3RyfSR7c3VmZml4IHx8IFwiXCJ9YFxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IHN0clxuICAgIH1cbiAgfSxcblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCBjYWxsYmFjayl7XG4gICAgbGV0IGRlYm91bmNlID0gZWwuZ2V0QXR0cmlidXRlKHBoeERlYm91bmNlKVxuICAgIGxldCB0aHJvdHRsZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhUaHJvdHRsZSlcblxuICAgIGlmKGRlYm91bmNlID09PSBcIlwiKXsgZGVib3VuY2UgPSBkZWZhdWx0RGVib3VuY2UgfVxuICAgIGlmKHRocm90dGxlID09PSBcIlwiKXsgdGhyb3R0bGUgPSBkZWZhdWx0VGhyb3R0bGUgfVxuICAgIGxldCB2YWx1ZSA9IGRlYm91bmNlIHx8IHRocm90dGxlXG4gICAgc3dpdGNoKHZhbHVlKXtcbiAgICAgIGNhc2UgbnVsbDogcmV0dXJuIGNhbGxiYWNrKClcblxuICAgICAgY2FzZSBcImJsdXJcIjpcbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImRlYm91bmNlLWJsdXJcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IGNhbGxiYWNrKCkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGxldCB0aW1lb3V0ID0gcGFyc2VJbnQodmFsdWUpXG4gICAgICAgIGxldCB0cmlnZ2VyID0gKCkgPT4gdGhyb3R0bGUgPyB0aGlzLmRlbGV0ZVByaXZhdGUoZWwsIFRIUk9UVExFRCkgOiBjYWxsYmFjaygpXG4gICAgICAgIGxldCBjdXJyZW50Q3ljbGUgPSB0aGlzLmluY0N5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSLCB0cmlnZ2VyKVxuICAgICAgICBpZihpc05hTih0aW1lb3V0KSl7IHJldHVybiBsb2dFcnJvcihgaW52YWxpZCB0aHJvdHRsZS9kZWJvdW5jZSB2YWx1ZTogJHt2YWx1ZX1gKSB9XG4gICAgICAgIGlmKHRocm90dGxlKXtcbiAgICAgICAgICBsZXQgbmV3S2V5RG93biA9IGZhbHNlXG4gICAgICAgICAgaWYoZXZlbnQudHlwZSA9PT0gXCJrZXlkb3duXCIpe1xuICAgICAgICAgICAgbGV0IHByZXZLZXkgPSB0aGlzLnByaXZhdGUoZWwsIERFQk9VTkNFX1BSRVZfS0VZKVxuICAgICAgICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBERUJPVU5DRV9QUkVWX0tFWSwgZXZlbnQua2V5KVxuICAgICAgICAgICAgbmV3S2V5RG93biA9IHByZXZLZXkgIT09IGV2ZW50LmtleVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmKCFuZXdLZXlEb3duICYmIHRoaXMucHJpdmF0ZShlbCwgVEhST1RUTEVEKSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBUSFJPVFRMRUQsIHRydWUpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSKSB9XG4gICAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmKGFzeW5jRmlsdGVyKCkpeyB0aGlzLnRyaWdnZXJDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUiwgY3VycmVudEN5Y2xlKSB9XG4gICAgICAgICAgfSwgdGltZW91dClcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmb3JtID0gZWwuZm9ybVxuICAgICAgICBpZihmb3JtICYmIHRoaXMub25jZShmb3JtLCBcImJpbmQtZGVib3VuY2VcIikpe1xuICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBBcnJheS5mcm9tKChuZXcgRm9ybURhdGEoZm9ybSkpLmVudHJpZXMoKSwgKFtuYW1lXSkgPT4ge1xuICAgICAgICAgICAgICBsZXQgaW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYFtuYW1lPVwiJHtuYW1lfVwiXWApXG4gICAgICAgICAgICAgIHRoaXMuaW5jQ3ljbGUoaW5wdXQsIERFQk9VTkNFX1RSSUdHRVIpXG4gICAgICAgICAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgVEhST1RUTEVEKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMub25jZShlbCwgXCJiaW5kLWRlYm91bmNlXCIpKXtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoKSA9PiB0aGlzLnRyaWdnZXJDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUikpXG4gICAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdHJpZ2dlckN5Y2xlKGVsLCBrZXksIGN1cnJlbnRDeWNsZSl7XG4gICAgbGV0IFtjeWNsZSwgdHJpZ2dlcl0gPSB0aGlzLnByaXZhdGUoZWwsIGtleSlcbiAgICBpZighY3VycmVudEN5Y2xlKXsgY3VycmVudEN5Y2xlID0gY3ljbGUgfVxuICAgIGlmKGN1cnJlbnRDeWNsZSA9PT0gY3ljbGUpe1xuICAgICAgdGhpcy5pbmNDeWNsZShlbCwga2V5KVxuICAgICAgdHJpZ2dlcigpXG4gICAgfVxuICB9LFxuXG4gIG9uY2UoZWwsIGtleSl7XG4gICAgaWYodGhpcy5wcml2YXRlKGVsLCBrZXkpID09PSB0cnVlKXsgcmV0dXJuIGZhbHNlIH1cbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgdHJ1ZSlcbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxuXG4gIGluY0N5Y2xlKGVsLCBrZXksIHRyaWdnZXIgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgbGV0IFtjdXJyZW50Q3ljbGVdID0gdGhpcy5wcml2YXRlKGVsLCBrZXkpIHx8IFswLCB0cmlnZ2VyXVxuICAgIGN1cnJlbnRDeWNsZSsrXG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIFtjdXJyZW50Q3ljbGUsIHRyaWdnZXJdKVxuICAgIHJldHVybiBjdXJyZW50Q3ljbGVcbiAgfSxcblxuICBtYXliZUFkZFByaXZhdGVIb29rcyhlbCwgcGh4Vmlld3BvcnRUb3AsIHBoeFZpZXdwb3J0Qm90dG9tKXtcbiAgICBpZihlbC5oYXNBdHRyaWJ1dGUgJiYgKGVsLmhhc0F0dHJpYnV0ZShwaHhWaWV3cG9ydFRvcCkgfHwgZWwuaGFzQXR0cmlidXRlKHBoeFZpZXdwb3J0Qm90dG9tKSkpe1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1waHgtaG9va1wiLCBcIlBob2VuaXguSW5maW5pdGVTY3JvbGxcIilcbiAgICB9XG4gIH0sXG5cbiAgbWF5YmVIaWRlRmVlZGJhY2soY29udGFpbmVyLCBpbnB1dCwgcGh4RmVlZGJhY2tGb3Ipe1xuICAgIGlmKCEodGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQpIHx8IHRoaXMucHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQpKSl7XG4gICAgICBsZXQgZmVlZGJhY2tzID0gW2lucHV0Lm5hbWVdXG4gICAgICBpZihpbnB1dC5uYW1lLmVuZHNXaXRoKFwiW11cIikpeyBmZWVkYmFja3MucHVzaChpbnB1dC5uYW1lLnNsaWNlKDAsIC0yKSkgfVxuICAgICAgbGV0IHNlbGVjdG9yID0gZmVlZGJhY2tzLm1hcChmID0+IGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2Z9XCJdYCkuam9pbihcIiwgXCIpXG4gICAgICBET00uYWxsKGNvbnRhaW5lciwgc2VsZWN0b3IsIGVsID0+IGVsLmNsYXNzTGlzdC5hZGQoUEhYX05PX0ZFRURCQUNLX0NMQVNTKSlcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXRGb3JtKGZvcm0sIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgbGV0IHF1ZXJ5ID0gYFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQuaWR9XCJdLFxuICAgICAgICAgICAgICAgICAgIFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQubmFtZX1cIl0sXG4gICAgICAgICAgICAgICAgICAgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5uYW1lLnJlcGxhY2UoL1xcW1xcXSQvLCBcIlwiKX1cIl1gXG5cbiAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VEKVxuICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRClcbiAgICAgIHRoaXMuYWxsKGRvY3VtZW50LCBxdWVyeSwgZmVlZGJhY2tFbCA9PiB7XG4gICAgICAgIGZlZWRiYWNrRWwuY2xhc3NMaXN0LmFkZChQSFhfTk9fRkVFREJBQ0tfQ0xBU1MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2hvd0Vycm9yKGlucHV0RWwsIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBpZihpbnB1dEVsLmlkIHx8IGlucHV0RWwubmFtZSl7XG4gICAgICB0aGlzLmFsbChpbnB1dEVsLmZvcm0sIGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwuaWR9XCJdLCBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwubmFtZX1cIl1gLCAoZWwpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhlbCwgUEhYX05PX0ZFRURCQUNLX0NMQVNTKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgaXNQaHhDaGlsZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRClcbiAgfSxcblxuICBpc1BoeFN0aWNreShub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1NUSUNLWSkgIT09IG51bGxcbiAgfSxcblxuICBmaXJzdFBoeENoaWxkKGVsKXtcbiAgICByZXR1cm4gdGhpcy5pc1BoeENoaWxkKGVsKSA/IGVsIDogdGhpcy5hbGwoZWwsIGBbJHtQSFhfUEFSRU5UX0lEfV1gKVswXVxuICB9LFxuXG4gIGRpc3BhdGNoRXZlbnQodGFyZ2V0LCBuYW1lLCBvcHRzID0ge30pe1xuICAgIGxldCBidWJibGVzID0gb3B0cy5idWJibGVzID09PSB1bmRlZmluZWQgPyB0cnVlIDogISFvcHRzLmJ1YmJsZXNcbiAgICBsZXQgZXZlbnRPcHRzID0ge2J1YmJsZXM6IGJ1YmJsZXMsIGNhbmNlbGFibGU6IHRydWUsIGRldGFpbDogb3B0cy5kZXRhaWwgfHwge319XG4gICAgbGV0IGV2ZW50ID0gbmFtZSA9PT0gXCJjbGlja1wiID8gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiLCBldmVudE9wdHMpIDogbmV3IEN1c3RvbUV2ZW50KG5hbWUsIGV2ZW50T3B0cylcbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfSxcblxuICBjbG9uZU5vZGUobm9kZSwgaHRtbCl7XG4gICAgaWYodHlwZW9mIChodG1sKSA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNsb25lZCA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKVxuICAgICAgY2xvbmVkLmlubmVySFRNTCA9IGh0bWxcbiAgICAgIHJldHVybiBjbG9uZWRcbiAgICB9XG4gIH0sXG5cbiAgbWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZXhjbHVkZSA9IG9wdHMuZXhjbHVkZSB8fCBbXVxuICAgIGxldCBpc0lnbm9yZWQgPSBvcHRzLmlzSWdub3JlZFxuICAgIGxldCBzb3VyY2VBdHRycyA9IHNvdXJjZS5hdHRyaWJ1dGVzXG4gICAgZm9yKGxldCBpID0gc291cmNlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgbGV0IG5hbWUgPSBzb3VyY2VBdHRyc1tpXS5uYW1lXG4gICAgICBpZihleGNsdWRlLmluZGV4T2YobmFtZSkgPCAwKXsgdGFyZ2V0LnNldEF0dHJpYnV0ZShuYW1lLCBzb3VyY2UuZ2V0QXR0cmlidXRlKG5hbWUpKSB9XG4gICAgfVxuXG4gICAgbGV0IHRhcmdldEF0dHJzID0gdGFyZ2V0LmF0dHJpYnV0ZXNcbiAgICBmb3IobGV0IGkgPSB0YXJnZXRBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG4gICAgICBsZXQgbmFtZSA9IHRhcmdldEF0dHJzW2ldLm5hbWVcbiAgICAgIGlmKGlzSWdub3JlZCl7XG4gICAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChcImRhdGEtXCIpICYmICFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZighc291cmNlLmhhc0F0dHJpYnV0ZShuYW1lKSl7IHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUobmFtZSkgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBtZXJnZUZvY3VzZWRJbnB1dCh0YXJnZXQsIHNvdXJjZSl7XG4gICAgLy8gc2tpcCBzZWxlY3RzIGJlY2F1c2UgRkYgd2lsbCByZXNldCBoaWdobGlnaHRlZCBpbmRleCBmb3IgYW55IHNldEF0dHJpYnV0ZVxuICAgIGlmKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpKXsgRE9NLm1lcmdlQXR0cnModGFyZ2V0LCBzb3VyY2UsIHtleGNsdWRlOiBbXCJ2YWx1ZVwiXX0pIH1cbiAgICBpZihzb3VyY2UucmVhZE9ubHkpe1xuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKVxuICAgIH1cbiAgfSxcblxuICBoYXNTZWxlY3Rpb25SYW5nZShlbCl7XG4gICAgcmV0dXJuIGVsLnNldFNlbGVjdGlvblJhbmdlICYmIChlbC50eXBlID09PSBcInRleHRcIiB8fCBlbC50eXBlID09PSBcInRleHRhcmVhXCIpXG4gIH0sXG5cbiAgcmVzdG9yZUZvY3VzKGZvY3VzZWQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpe1xuICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoZm9jdXNlZCkpeyByZXR1cm4gfVxuICAgIGxldCB3YXNGb2N1c2VkID0gZm9jdXNlZC5tYXRjaGVzKFwiOmZvY3VzXCIpXG4gICAgaWYoZm9jdXNlZC5yZWFkT25seSl7IGZvY3VzZWQuYmx1cigpIH1cbiAgICBpZighd2FzRm9jdXNlZCl7IGZvY3VzZWQuZm9jdXMoKSB9XG4gICAgaWYodGhpcy5oYXNTZWxlY3Rpb25SYW5nZShmb2N1c2VkKSl7XG4gICAgICBmb2N1c2VkLnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpXG4gICAgfVxuICB9LFxuXG4gIGlzRm9ybUlucHV0KGVsKXsgcmV0dXJuIC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KGVsLnRhZ05hbWUpICYmIGVsLnR5cGUgIT09IFwiYnV0dG9uXCIgfSxcblxuICBzeW5jQXR0cnNUb1Byb3BzKGVsKXtcbiAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSkgPj0gMCl7XG4gICAgICBlbC5jaGVja2VkID0gZWwuZ2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiKSAhPT0gbnVsbFxuICAgIH1cbiAgfSxcblxuICBpc1RleHR1YWxJbnB1dChlbCl7IHJldHVybiBGT0NVU0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCB9LFxuXG4gIGlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShwaHhUcmlnZ2VyRXh0ZXJuYWwpICE9PSBudWxsXG4gIH0sXG5cbiAgc3luY1BlbmRpbmdSZWYoZnJvbUVsLCB0b0VsLCBkaXNhYmxlV2l0aCl7XG4gICAgbGV0IHJlZiA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICBpZihyZWYgPT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgbGV0IHJlZlNyYyA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG5cbiAgICBpZihET00uaXNGb3JtSW5wdXQoZnJvbUVsKSB8fCBmcm9tRWwuZ2V0QXR0cmlidXRlKGRpc2FibGVXaXRoKSAhPT0gbnVsbCl7XG4gICAgICBpZihET00uaXNVcGxvYWRJbnB1dChmcm9tRWwpKXsgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7aXNJZ25vcmVkOiB0cnVlfSkgfVxuICAgICAgRE9NLnB1dFByaXZhdGUoZnJvbUVsLCBQSFhfUkVGLCB0b0VsKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIFBIWF9FVkVOVF9DTEFTU0VTLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgZnJvbUVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpICYmIHRvRWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXG4gICAgICB9KVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRiwgcmVmKVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMsIHJlZlNyYylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9LFxuXG4gIGNsZWFuQ2hpbGROb2Rlcyhjb250YWluZXIsIHBoeFVwZGF0ZSl7XG4gICAgaWYoRE9NLmlzUGh4VXBkYXRlKGNvbnRhaW5lciwgcGh4VXBkYXRlLCBbXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICBsZXQgdG9SZW1vdmUgPSBbXVxuICAgICAgY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZE5vZGUgPT4ge1xuICAgICAgICBpZighY2hpbGROb2RlLmlkKXtcbiAgICAgICAgICAvLyBTa2lwIHdhcm5pbmcgaWYgaXQncyBhbiBlbXB0eSB0ZXh0IG5vZGUgKGUuZy4gYSBuZXctbGluZSlcbiAgICAgICAgICBsZXQgaXNFbXB0eVRleHROb2RlID0gY2hpbGROb2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBjaGlsZE5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gXCJcIlxuICAgICAgICAgIGlmKCFpc0VtcHR5VGV4dE5vZGUpe1xuICAgICAgICAgICAgbG9nRXJyb3IoXCJvbmx5IEhUTUwgZWxlbWVudCB0YWdzIHdpdGggYW4gaWQgYXJlIGFsbG93ZWQgaW5zaWRlIGNvbnRhaW5lcnMgd2l0aCBwaHgtdXBkYXRlLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYHJlbW92aW5nIGlsbGVnYWwgbm9kZTogXCIkeyhjaGlsZE5vZGUub3V0ZXJIVE1MIHx8IGNoaWxkTm9kZS5ub2RlVmFsdWUpLnRyaW0oKX1cIlxcblxcbmApXG4gICAgICAgICAgfVxuICAgICAgICAgIHRvUmVtb3ZlLnB1c2goY2hpbGROb2RlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdG9SZW1vdmUuZm9yRWFjaChjaGlsZE5vZGUgPT4gY2hpbGROb2RlLnJlbW92ZSgpKVxuICAgIH1cbiAgfSxcblxuICByZXBsYWNlUm9vdENvbnRhaW5lcihjb250YWluZXIsIHRhZ05hbWUsIGF0dHJzKXtcbiAgICBsZXQgcmV0YWluZWRBdHRycyA9IG5ldyBTZXQoW1wiaWRcIiwgUEhYX1NFU1NJT04sIFBIWF9TVEFUSUMsIFBIWF9NQUlOLCBQSFhfUk9PVF9JRF0pXG4gICAgaWYoY29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtcbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmF0dHJpYnV0ZXMpXG4gICAgICAgIC5maWx0ZXIoYXR0ciA9PiAhcmV0YWluZWRBdHRycy5oYXMoYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKSlcblxuICAgICAgT2JqZWN0LmtleXMoYXR0cnMpXG4gICAgICAgIC5maWx0ZXIobmFtZSA9PiAhcmV0YWluZWRBdHRycy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgLmZvckVhY2goYXR0ciA9PiBjb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKSlcblxuICAgICAgcmV0dXJuIGNvbnRhaW5lclxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpXG4gICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChhdHRyID0+IG5ld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuICAgICAgcmV0YWluZWRBdHRycy5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBjb250YWluZXIuZ2V0QXR0cmlidXRlKGF0dHIpKSlcbiAgICAgIG5ld0NvbnRhaW5lci5pbm5lckhUTUwgPSBjb250YWluZXIuaW5uZXJIVE1MXG4gICAgICBjb250YWluZXIucmVwbGFjZVdpdGgobmV3Q29udGFpbmVyKVxuICAgICAgcmV0dXJuIG5ld0NvbnRhaW5lclxuICAgIH1cbiAgfSxcblxuICBnZXRTdGlja3koZWwsIG5hbWUsIGRlZmF1bHRWYWwpe1xuICAgIGxldCBvcCA9IChET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIikgfHwgW10pLmZpbmQoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICBpZihvcCl7XG4gICAgICBsZXQgW19uYW1lLCBfb3AsIHN0YXNoZWRSZXN1bHRdID0gb3BcbiAgICAgIHJldHVybiBzdGFzaGVkUmVzdWx0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0eXBlb2YoZGVmYXVsdFZhbCkgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWwoKSA6IGRlZmF1bHRWYWxcbiAgICB9XG4gIH0sXG5cbiAgZGVsZXRlU3RpY2t5KGVsLCBuYW1lKXtcbiAgICB0aGlzLnVwZGF0ZVByaXZhdGUoZWwsIFwic3RpY2t5XCIsIFtdLCBvcHMgPT4ge1xuICAgICAgcmV0dXJuIG9wcy5maWx0ZXIoKFtleGlzdGluZ05hbWUsIF9dKSA9PiBleGlzdGluZ05hbWUgIT09IG5hbWUpXG4gICAgfSlcbiAgfSxcblxuICBwdXRTdGlja3koZWwsIG5hbWUsIG9wKXtcbiAgICBsZXQgc3Rhc2hlZFJlc3VsdCA9IG9wKGVsKVxuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICBsZXQgZXhpc3RpbmdJbmRleCA9IG9wcy5maW5kSW5kZXgoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICAgIGlmKGV4aXN0aW5nSW5kZXggPj0gMCl7XG4gICAgICAgIG9wc1tleGlzdGluZ0luZGV4XSA9IFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wcy5wdXNoKFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF0pXG4gICAgICB9XG4gICAgICByZXR1cm4gb3BzXG4gICAgfSlcbiAgfSxcblxuICBhcHBseVN0aWNreU9wZXJhdGlvbnMoZWwpe1xuICAgIGxldCBvcHMgPSBET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIilcbiAgICBpZighb3BzKXsgcmV0dXJuIH1cblxuICAgIG9wcy5mb3JFYWNoKChbbmFtZSwgb3AsIF9zdGFzaGVkXSkgPT4gdGhpcy5wdXRTdGlja3koZWwsIG5hbWUsIG9wKSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBET00iLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNoYW5uZWxVcGxvYWRlcixcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVcGxvYWRFbnRyeSB7XG4gIHN0YXRpYyBpc0FjdGl2ZShmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBpc05ldyA9IGZpbGUuX3BoeFJlZiA9PT0gdW5kZWZpbmVkXG4gICAgbGV0IGFjdGl2ZVJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzQWN0aXZlID0gYWN0aXZlUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGZpbGUuc2l6ZSA+IDAgJiYgKGlzTmV3IHx8IGlzQWN0aXZlKVxuICB9XG5cbiAgc3RhdGljIGlzUHJlZmxpZ2h0ZWQoZmlsZUVsLCBmaWxlKXtcbiAgICBsZXQgcHJlZmxpZ2h0ZWRSZWZzID0gZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfUFJFRkxJR0hURURfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzUHJlZmxpZ2h0ZWQgPSBwcmVmbGlnaHRlZFJlZnMuaW5kZXhPZihMaXZlVXBsb2FkZXIuZ2VuRmlsZVJlZihmaWxlKSkgPj0gMFxuICAgIHJldHVybiBpc1ByZWZsaWdodGVkICYmIHRoaXMuaXNBY3RpdmUoZmlsZUVsLCBmaWxlKVxuICB9XG5cbiAgY29uc3RydWN0b3IoZmlsZUVsLCBmaWxlLCB2aWV3KXtcbiAgICB0aGlzLnJlZiA9IExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpXG4gICAgdGhpcy5maWxlRWwgPSBmaWxlRWxcbiAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubWV0YSA9IG51bGxcbiAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2VcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDBcbiAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gLTFcbiAgICB0aGlzLl9vbkRvbmUgPSBmdW5jdGlvbiAoKXsgfVxuICAgIHRoaXMuX29uRWxVcGRhdGVkID0gdGhpcy5vbkVsVXBkYXRlZC5iaW5kKHRoaXMpXG4gICAgdGhpcy5maWxlRWwuYWRkRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICB9XG5cbiAgbWV0YWRhdGEoKXsgcmV0dXJuIHRoaXMubWV0YSB9XG5cbiAgcHJvZ3Jlc3MocHJvZ3Jlc3Mpe1xuICAgIHRoaXMuX3Byb2dyZXNzID0gTWF0aC5mbG9vcihwcm9ncmVzcylcbiAgICBpZih0aGlzLl9wcm9ncmVzcyA+IHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQpe1xuICAgICAgaWYodGhpcy5fcHJvZ3Jlc3MgPj0gMTAwKXtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IDEwMFxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgMTAwLCAoKSA9PiB7XG4gICAgICAgICAgTGl2ZVVwbG9hZGVyLnVudHJhY2tGaWxlKHRoaXMuZmlsZUVsLCB0aGlzLmZpbGUpXG4gICAgICAgICAgdGhpcy5fb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSB0aGlzLl9wcm9ncmVzc1xuICAgICAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHRoaXMuX3Byb2dyZXNzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpe1xuICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gdHJ1ZVxuICAgIHRoaXMuX2lzRG9uZSA9IHRydWVcbiAgICB0aGlzLl9vbkRvbmUoKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLl9pc0RvbmUgfVxuXG4gIGVycm9yKHJlYXNvbiA9IFwiZmFpbGVkXCIpe1xuICAgIHRoaXMuZmlsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoUEhYX0xJVkVfRklMRV9VUERBVEVELCB0aGlzLl9vbkVsVXBkYXRlZClcbiAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHtlcnJvcjogcmVhc29ufSlcbiAgICBMaXZlVXBsb2FkZXIuY2xlYXJGaWxlcyh0aGlzLmZpbGVFbClcbiAgfVxuXG4gIC8vcHJpdmF0ZVxuXG4gIG9uRG9uZShjYWxsYmFjayl7XG4gICAgdGhpcy5fb25Eb25lID0gKCkgPT4ge1xuICAgICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIG9uRWxVcGRhdGVkKCl7XG4gICAgbGV0IGFjdGl2ZVJlZnMgPSB0aGlzLmZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBpZihhY3RpdmVSZWZzLmluZGV4T2YodGhpcy5yZWYpID09PSAtMSl7IHRoaXMuY2FuY2VsKCkgfVxuICB9XG5cbiAgdG9QcmVmbGlnaHRQYXlsb2FkKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhc3RfbW9kaWZpZWQ6IHRoaXMuZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICBuYW1lOiB0aGlzLmZpbGUubmFtZSxcbiAgICAgIHJlbGF0aXZlX3BhdGg6IHRoaXMuZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGgsXG4gICAgICBzaXplOiB0aGlzLmZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IHRoaXMuZmlsZS50eXBlLFxuICAgICAgcmVmOiB0aGlzLnJlZlxuICAgIH1cbiAgfVxuXG4gIHVwbG9hZGVyKHVwbG9hZGVycyl7XG4gICAgaWYodGhpcy5tZXRhLnVwbG9hZGVyKXtcbiAgICAgIGxldCBjYWxsYmFjayA9IHVwbG9hZGVyc1t0aGlzLm1ldGEudXBsb2FkZXJdIHx8IGxvZ0Vycm9yKGBubyB1cGxvYWRlciBjb25maWd1cmVkIGZvciAke3RoaXMubWV0YS51cGxvYWRlcn1gKVxuICAgICAgcmV0dXJuIHtuYW1lOiB0aGlzLm1ldGEudXBsb2FkZXIsIGNhbGxiYWNrOiBjYWxsYmFja31cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtuYW1lOiBcImNoYW5uZWxcIiwgY2FsbGJhY2s6IGNoYW5uZWxVcGxvYWRlcn1cbiAgICB9XG4gIH1cblxuICB6aXBQb3N0RmxpZ2h0KHJlc3Ape1xuICAgIHRoaXMubWV0YSA9IHJlc3AuZW50cmllc1t0aGlzLnJlZl1cbiAgICBpZighdGhpcy5tZXRhKXsgbG9nRXJyb3IoYG5vIHByZWZsaWdodCB1cGxvYWQgcmVzcG9uc2UgcmV0dXJuZWQgd2l0aCByZWYgJHt0aGlzLnJlZn1gLCB7aW5wdXQ6IHRoaXMuZmlsZUVsLCByZXNwb25zZTogcmVzcH0pIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9ET05FX1JFRlMsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBVcGxvYWRFbnRyeSBmcm9tIFwiLi91cGxvYWRfZW50cnlcIlxuXG5sZXQgbGl2ZVVwbG9hZGVyRmlsZVJlZiA9IDBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVVwbG9hZGVyIHtcbiAgc3RhdGljIGdlbkZpbGVSZWYoZmlsZSl7XG4gICAgbGV0IHJlZiA9IGZpbGUuX3BoeFJlZlxuICAgIGlmKHJlZiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiByZWZcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZS5fcGh4UmVmID0gKGxpdmVVcGxvYWRlckZpbGVSZWYrKykudG9TdHJpbmcoKVxuICAgICAgcmV0dXJuIGZpbGUuX3BoeFJlZlxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRFbnRyeURhdGFVUkwoaW5wdXRFbCwgcmVmLCBjYWxsYmFjayl7XG4gICAgbGV0IGZpbGUgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZmlsZSA9PiB0aGlzLmdlbkZpbGVSZWYoZmlsZSkgPT09IHJlZilcbiAgICBjYWxsYmFjayhVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKVxuICB9XG5cbiAgc3RhdGljIGhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCl7XG4gICAgbGV0IGFjdGl2ZSA9IDBcbiAgICBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSAhPT0gaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9ET05FX1JFRlMpKXtcbiAgICAgICAgYWN0aXZlKytcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBhY3RpdmUgPiAwXG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKXtcbiAgICBsZXQgZmlsZXMgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpXG4gICAgbGV0IGZpbGVEYXRhID0ge31cbiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgbGV0IGVudHJ5ID0ge3BhdGg6IGlucHV0RWwubmFtZX1cbiAgICAgIGxldCB1cGxvYWRSZWYgPSBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRilcbiAgICAgIGZpbGVEYXRhW3VwbG9hZFJlZl0gPSBmaWxlRGF0YVt1cGxvYWRSZWZdIHx8IFtdXG4gICAgICBlbnRyeS5yZWYgPSB0aGlzLmdlbkZpbGVSZWYoZmlsZSlcbiAgICAgIGVudHJ5Lmxhc3RfbW9kaWZpZWQgPSBmaWxlLmxhc3RNb2RpZmllZFxuICAgICAgZW50cnkubmFtZSA9IGZpbGUubmFtZSB8fCBlbnRyeS5yZWZcbiAgICAgIGVudHJ5LnJlbGF0aXZlX3BhdGggPSBmaWxlLndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgZW50cnkudHlwZSA9IGZpbGUudHlwZVxuICAgICAgZW50cnkuc2l6ZSA9IGZpbGUuc2l6ZVxuICAgICAgZmlsZURhdGFbdXBsb2FkUmVmXS5wdXNoKGVudHJ5KVxuICAgIH0pXG4gICAgcmV0dXJuIGZpbGVEYXRhXG4gIH1cblxuICBzdGF0aWMgY2xlYXJGaWxlcyhpbnB1dEVsKXtcbiAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIGlucHV0RWwucmVtb3ZlQXR0cmlidXRlKFBIWF9VUExPQURfUkVGKVxuICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgW10pXG4gIH1cblxuICBzdGF0aWMgdW50cmFja0ZpbGUoaW5wdXRFbCwgZmlsZSl7XG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBET00ucHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIpLmZpbHRlcihmID0+ICFPYmplY3QuaXMoZiwgZmlsZSkpKVxuICB9XG5cbiAgc3RhdGljIHRyYWNrRmlsZXMoaW5wdXRFbCwgZmlsZXMsIGRhdGFUcmFuc2Zlcil7XG4gICAgaWYoaW5wdXRFbC5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKSAhPT0gbnVsbCl7XG4gICAgICBsZXQgbmV3RmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiAhdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5maW5kKGYgPT4gT2JqZWN0LmlzKGYsIGZpbGUpKSlcbiAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5jb25jYXQobmV3RmlsZXMpKVxuICAgICAgaW5wdXRFbC52YWx1ZSA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVzZXQgaW5wdXRFbCBmaWxlcyB0byBhbGlnbiBvdXRwdXQgd2l0aCBwcm9ncmFtbWF0aWMgY2hhbmdlcyAoaS5lLiBkcmFnIGFuZCBkcm9wKVxuICAgICAgaWYoZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKXsgaW5wdXRFbC5maWxlcyA9IGRhdGFUcmFuc2Zlci5maWxlcyB9XG4gICAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIGZpbGVzKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlSW5wdXRzKGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGVsID0+IGVsLmZpbGVzICYmIHRoaXMuYWN0aXZlRmlsZXMoZWwpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgYWN0aXZlRmlsZXMoaW5wdXQpe1xuICAgIHJldHVybiAoRE9NLnByaXZhdGUoaW5wdXQsIFwiZmlsZXNcIikgfHwgW10pLmZpbHRlcihmID0+IFVwbG9hZEVudHJ5LmlzQWN0aXZlKGlucHV0LCBmKSlcbiAgfVxuXG4gIHN0YXRpYyBpbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpe1xuICAgIGxldCBmaWxlSW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHMoZm9ybUVsKVxuICAgIHJldHVybiBBcnJheS5mcm9tKGZpbGVJbnB1dHMpLmZpbHRlcihpbnB1dCA9PiB0aGlzLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXQpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCl7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRmlsZXMoaW5wdXQpLmZpbHRlcihmID0+ICFVcGxvYWRFbnRyeS5pc1ByZWZsaWdodGVkKGlucHV0LCBmKSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGlucHV0RWwsIHZpZXcsIG9uQ29tcGxldGUpe1xuICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlXG4gICAgdGhpcy5fZW50cmllcyA9XG4gICAgICBBcnJheS5mcm9tKExpdmVVcGxvYWRlci5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0RWwpIHx8IFtdKVxuICAgICAgICAubWFwKGZpbGUgPT4gbmV3IFVwbG9hZEVudHJ5KGlucHV0RWwsIGZpbGUsIHZpZXcpKVxuXG4gICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9IHRoaXMuX2VudHJpZXMubGVuZ3RoXG4gIH1cblxuICBlbnRyaWVzKCl7IHJldHVybiB0aGlzLl9lbnRyaWVzIH1cblxuICBpbml0QWRhcHRlclVwbG9hZChyZXNwLCBvbkVycm9yLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIHRoaXMuX2VudHJpZXMubWFwKGVudHJ5ID0+IHtcbiAgICAgICAgZW50cnkuemlwUG9zdEZsaWdodChyZXNwKVxuICAgICAgICBlbnRyeS5vbkRvbmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MtLVxuICAgICAgICAgIGlmKHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MgPT09IDApeyB0aGlzLm9uQ29tcGxldGUoKSB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBlbnRyeVxuICAgICAgfSlcblxuICAgIGxldCBncm91cGVkRW50cmllcyA9IHRoaXMuX2VudHJpZXMucmVkdWNlKChhY2MsIGVudHJ5KSA9PiB7XG4gICAgICBsZXQge25hbWUsIGNhbGxiYWNrfSA9IGVudHJ5LnVwbG9hZGVyKGxpdmVTb2NrZXQudXBsb2FkZXJzKVxuICAgICAgYWNjW25hbWVdID0gYWNjW25hbWVdIHx8IHtjYWxsYmFjazogY2FsbGJhY2ssIGVudHJpZXM6IFtdfVxuICAgICAgYWNjW25hbWVdLmVudHJpZXMucHVzaChlbnRyeSlcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSlcblxuICAgIGZvcihsZXQgbmFtZSBpbiBncm91cGVkRW50cmllcyl7XG4gICAgICBsZXQge2NhbGxiYWNrLCBlbnRyaWVzfSA9IGdyb3VwZWRFbnRyaWVzW25hbWVdXG4gICAgICBjYWxsYmFjayhlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KVxuICAgIH1cbiAgfVxufVxuIiwgImxldCBBUklBID0ge1xuICBmb2N1c01haW4oKXtcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDEsIG1haW4sIGgxXCIpXG4gICAgaWYodGFyZ2V0KXtcbiAgICAgIGxldCBvcmlnVGFiSW5kZXggPSB0YXJnZXQudGFiSW5kZXhcbiAgICAgIHRhcmdldC50YWJJbmRleCA9IC0xXG4gICAgICB0YXJnZXQuZm9jdXMoKVxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gb3JpZ1RhYkluZGV4XG4gICAgfVxuICB9LFxuXG4gIGFueU9mKGluc3RhbmNlLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZmluZChuYW1lID0+IGluc3RhbmNlIGluc3RhbmNlb2YgbmFtZSkgfSxcblxuICBpc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICByZXR1cm4oXG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlbC5yZWwgIT09IFwiaWdub3JlXCIpIHx8XG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQXJlYUVsZW1lbnQgJiYgZWwuaHJlZiAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKCFlbC5kaXNhYmxlZCAmJiAodGhpcy5hbnlPZihlbCwgW0hUTUxJbnB1dEVsZW1lbnQsIEhUTUxTZWxlY3RFbGVtZW50LCBIVE1MVGV4dEFyZWFFbGVtZW50LCBIVE1MQnV0dG9uRWxlbWVudF0pKSkgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSB8fFxuICAgICAgKGVsLnRhYkluZGV4ID4gMCB8fCAoIWludGVyYWN0aXZlT25seSAmJiBlbC50YWJJbmRleCA9PT0gMCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSAhPT0gbnVsbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSAhPT0gXCJ0cnVlXCIpKVxuICAgIClcbiAgfSxcblxuICBhdHRlbXB0Rm9jdXMoZWwsIGludGVyYWN0aXZlT25seSl7XG4gICAgaWYodGhpcy5pc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KSl7IHRyeXsgZWwuZm9jdXMoKSB9IGNhdGNoKGUpe30gfVxuICAgIHJldHVybiAhIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKVxuICB9LFxuXG4gIGZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCwgdHJ1ZSkgfHwgdGhpcy5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoY2hpbGQsIHRydWUpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgfVxuICB9LFxuXG4gIGZvY3VzRmlyc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNGaXJzdChjaGlsZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNMYXN0KGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5sYXN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNMYXN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFSSUEiLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBIb29rcyA9IHtcbiAgTGl2ZUZpbGVVcGxvYWQ6IHtcbiAgICBhY3RpdmVSZWZzKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpIH0sXG5cbiAgICBwcmVmbGlnaHRlZFJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSB9LFxuXG4gICAgbW91bnRlZCgpeyB0aGlzLnByZWZsaWdodGVkV2FzID0gdGhpcy5wcmVmbGlnaHRlZFJlZnMoKSB9LFxuXG4gICAgdXBkYXRlZCgpe1xuICAgICAgbGV0IG5ld1ByZWZsaWdodHMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpXG4gICAgICBpZih0aGlzLnByZWZsaWdodGVkV2FzICE9PSBuZXdQcmVmbGlnaHRzKXtcbiAgICAgICAgdGhpcy5wcmVmbGlnaHRlZFdhcyA9IG5ld1ByZWZsaWdodHNcbiAgICAgICAgaWYobmV3UHJlZmxpZ2h0cyA9PT0gXCJcIil7XG4gICAgICAgICAgdGhpcy5fX3ZpZXcuY2FuY2VsU3VibWl0KHRoaXMuZWwuZm9ybSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmFjdGl2ZVJlZnMoKSA9PT0gXCJcIil7IHRoaXMuZWwudmFsdWUgPSBudWxsIH1cbiAgICAgIHRoaXMuZWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoUEhYX0xJVkVfRklMRV9VUERBVEVEKSlcbiAgICB9XG4gIH0sXG5cbiAgTGl2ZUltZ1ByZXZpZXc6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLnJlZiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtZW50cnktcmVmXCIpXG4gICAgICB0aGlzLmlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikpXG4gICAgICBMaXZlVXBsb2FkZXIuZ2V0RW50cnlEYXRhVVJMKHRoaXMuaW5wdXRFbCwgdGhpcy5yZWYsIHVybCA9PiB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsXG4gICAgICAgIHRoaXMuZWwuc3JjID0gdXJsXG4gICAgICB9KVxuICAgIH0sXG4gICAgZGVzdHJveWVkKCl7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMudXJsKVxuICAgIH1cbiAgfSxcbiAgRm9jdXNXcmFwOiB7XG4gICAgbW91bnRlZCgpe1xuICAgICAgdGhpcy5mb2N1c1N0YXJ0ID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c0VuZCA9IHRoaXMuZWwubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c1N0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiBBUklBLmZvY3VzTGFzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZm9jdXNFbmQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpzaG93LWVuZFwiLCAoKSA9PiB0aGlzLmVsLmZvY3VzKCkpXG4gICAgICBpZih3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5kaXNwbGF5ICE9PSBcIm5vbmVcIil7XG4gICAgICAgIEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5sZXQgc2Nyb2xsVG9wID0gKCkgPT4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxubGV0IHdpbkhlaWdodCA9ICgpID0+IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG5cbmxldCBpc0F0Vmlld3BvcnRUb3AgPSAoZWwpID0+IHtcbiAgbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4gcmVjdC50b3AgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LnRvcCA8PSB3aW5IZWlnaHQoKVxufVxuXG5sZXQgaXNBdFZpZXdwb3J0Qm90dG9tID0gKGVsKSA9PiB7XG4gIGxldCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHJlY3QucmlnaHQgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LmJvdHRvbSA8PSB3aW5IZWlnaHQoKVxufVxuXG5sZXQgaXNXaXRoaW5WaWV3cG9ydCA9IChlbCkgPT4ge1xuICBsZXQgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIHJldHVybiByZWN0LnRvcCA+PSAwICYmIHJlY3QubGVmdCA+PSAwICYmIHJlY3QudG9wIDw9IHdpbkhlaWdodCgpXG59XG5cbkhvb2tzLkluZmluaXRlU2Nyb2xsID0ge1xuICBtb3VudGVkKCl7XG4gICAgbGV0IHNjcm9sbEJlZm9yZSA9IHNjcm9sbFRvcCgpXG4gICAgbGV0IHRvcE92ZXJyYW4gPSBmYWxzZVxuICAgIGxldCB0aHJvdHRsZUludGVydmFsID0gNTAwXG4gICAgbGV0IHBlbmRpbmdPcCA9IG51bGxcblxuICAgIGxldCBvblRvcE92ZXJydW4gPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gdHJ1ZVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIHRvcEV2ZW50LCB7aWQ6IGZpcnN0Q2hpbGQuaWQsIF9vdmVycmFuOiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICBwZW5kaW5nT3AgPSBudWxsXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25GaXJzdENoaWxkQXRUb3AgPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gZmlyc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwic3RhcnRcIn0pXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTSG9va1B1c2godGhpcy5lbCwgdG9wRXZlbnQsIHtpZDogZmlyc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChmaXJzdENoaWxkKSl7IGZpcnN0Q2hpbGQuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiBcInN0YXJ0XCJ9KSB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25MYXN0Q2hpbGRBdEJvdHRvbSA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKGJvdHRvbUV2ZW50LCBsYXN0Q2hpbGQpID0+IHtcbiAgICAgIHBlbmRpbmdPcCA9ICgpID0+IGxhc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwiZW5kXCJ9KVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIGJvdHRvbUV2ZW50LCB7aWQ6IGxhc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChsYXN0Q2hpbGQpKXsgbGFzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJlbmRcIn0pIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMub25TY3JvbGwgPSAoZSkgPT4ge1xuICAgICAgbGV0IHNjcm9sbE5vdyA9IHNjcm9sbFRvcCgpXG5cbiAgICAgIGlmKHBlbmRpbmdPcCl7XG4gICAgICAgIHNjcm9sbEJlZm9yZSA9IHNjcm9sbE5vd1xuICAgICAgICByZXR1cm4gcGVuZGluZ09wKClcbiAgICAgIH1cbiAgICAgIGxldCByZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgbGV0IHRvcEV2ZW50ID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUodGhpcy5saXZlU29ja2V0LmJpbmRpbmcoXCJ2aWV3cG9ydC10b3BcIikpXG4gICAgICBsZXQgYm90dG9tRXZlbnQgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSh0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInZpZXdwb3J0LWJvdHRvbVwiKSlcbiAgICAgIGxldCBsYXN0Q2hpbGQgPSB0aGlzLmVsLmxhc3RFbGVtZW50Q2hpbGRcbiAgICAgIGxldCBmaXJzdENoaWxkID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgbGV0IGlzU2Nyb2xsaW5nVXAgPSBzY3JvbGxOb3cgPCBzY3JvbGxCZWZvcmVcbiAgICAgIGxldCBpc1Njcm9sbGluZ0Rvd24gPSBzY3JvbGxOb3cgPiBzY3JvbGxCZWZvcmVcblxuICAgICAgLy8gZWwgb3ZlcnJhbiB3aGlsZSBzY3JvbGxpbmcgdXBcbiAgICAgIGlmKGlzU2Nyb2xsaW5nVXAgJiYgdG9wRXZlbnQgJiYgIXRvcE92ZXJyYW4gJiYgcmVjdC50b3AgPj0gMCl7XG4gICAgICAgIHRvcE92ZXJyYW4gPSB0cnVlXG4gICAgICAgIG9uVG9wT3ZlcnJ1bih0b3BFdmVudCwgZmlyc3RDaGlsZClcbiAgICAgIH0gZWxzZSBpZihpc1Njcm9sbGluZ0Rvd24gJiYgdG9wT3ZlcnJhbiAmJiByZWN0LnRvcCA8PSAwKXtcbiAgICAgICAgdG9wT3ZlcnJhbiA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmKHRvcEV2ZW50ICYmIGlzU2Nyb2xsaW5nVXAgJiYgaXNBdFZpZXdwb3J0VG9wKGZpcnN0Q2hpbGQpKXtcbiAgICAgICAgb25GaXJzdENoaWxkQXRUb3AodG9wRXZlbnQsIGZpcnN0Q2hpbGQpXG4gICAgICB9IGVsc2UgaWYoYm90dG9tRXZlbnQgJiYgaXNTY3JvbGxpbmdEb3duICYmIGlzQXRWaWV3cG9ydEJvdHRvbShsYXN0Q2hpbGQpKXtcbiAgICAgICAgb25MYXN0Q2hpbGRBdEJvdHRvbShib3R0b21FdmVudCwgbGFzdENoaWxkKVxuICAgICAgfVxuICAgICAgc2Nyb2xsQmVmb3JlID0gc2Nyb2xsTm93XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpXG4gIH0sXG4gIGRlc3Ryb3llZCgpeyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKSB9LFxuXG4gIHRocm90dGxlKGludGVydmFsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxhc3RDYWxsQXQgPSAwXG4gICAgbGV0IHRpbWVyXG5cbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBsZXQgcmVtYWluaW5nVGltZSA9IGludGVydmFsIC0gKG5vdyAtIGxhc3RDYWxsQXQpXG5cbiAgICAgIGlmKHJlbWFpbmluZ1RpbWUgPD0gMCB8fCByZW1haW5pbmdUaW1lID4gaW50ZXJ2YWwpe1xuICAgICAgICBpZih0aW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgICAgICB0aW1lciA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBsYXN0Q2FsbEF0ID0gbm93XG4gICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICB9IGVsc2UgaWYoIXRpbWVyKXtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBsYXN0Q2FsbEF0ID0gRGF0ZS5ub3coKVxuICAgICAgICAgIHRpbWVyID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICAgIH0sIHJlbWFpbmluZ1RpbWUpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBIb29rc1xuIiwgImltcG9ydCB7XG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01Qb3N0TW9ycGhSZXN0b3JlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckJlZm9yZSwgY29udGFpbmVyQWZ0ZXIsIHVwZGF0ZVR5cGUpe1xuICAgIGxldCBpZHNCZWZvcmUgPSBuZXcgU2V0KClcbiAgICBsZXQgaWRzQWZ0ZXIgPSBuZXcgU2V0KFsuLi5jb250YWluZXJBZnRlci5jaGlsZHJlbl0ubWFwKGNoaWxkID0+IGNoaWxkLmlkKSlcblxuICAgIGxldCBlbGVtZW50c1RvTW9kaWZ5ID0gW11cblxuICAgIEFycmF5LmZyb20oY29udGFpbmVyQmVmb3JlLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmKGNoaWxkLmlkKXsgLy8gYWxsIG9mIG91ciBjaGlsZHJlbiBzaG91bGQgYmUgZWxlbWVudHMgd2l0aCBpZHNcbiAgICAgICAgaWRzQmVmb3JlLmFkZChjaGlsZC5pZClcbiAgICAgICAgaWYoaWRzQWZ0ZXIuaGFzKGNoaWxkLmlkKSl7XG4gICAgICAgICAgbGV0IHByZXZpb3VzRWxlbWVudElkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXG4gICAgICAgICAgZWxlbWVudHNUb01vZGlmeS5wdXNoKHtlbGVtZW50SWQ6IGNoaWxkLmlkLCBwcmV2aW91c0VsZW1lbnRJZDogcHJldmlvdXNFbGVtZW50SWR9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJBZnRlci5pZFxuICAgIHRoaXMudXBkYXRlVHlwZSA9IHVwZGF0ZVR5cGVcbiAgICB0aGlzLmVsZW1lbnRzVG9Nb2RpZnkgPSBlbGVtZW50c1RvTW9kaWZ5XG4gICAgdGhpcy5lbGVtZW50SWRzVG9BZGQgPSBbLi4uaWRzQWZ0ZXJdLmZpbHRlcihpZCA9PiAhaWRzQmVmb3JlLmhhcyhpZCkpXG4gIH1cblxuICAvLyBXZSBkbyB0aGUgZm9sbG93aW5nIHRvIG9wdGltaXplIGFwcGVuZC9wcmVwZW5kIG9wZXJhdGlvbnM6XG4gIC8vICAgMSkgVHJhY2sgaWRzIG9mIG1vZGlmaWVkIGVsZW1lbnRzICYgb2YgbmV3IGVsZW1lbnRzXG4gIC8vICAgMikgQWxsIHRoZSBtb2RpZmllZCBlbGVtZW50cyBhcmUgcHV0IGJhY2sgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gaW4gdGhlIERPTSB0cmVlXG4gIC8vICAgICAgYnkgc3RvcmluZyB0aGUgaWQgb2YgdGhlaXIgcHJldmlvdXMgc2libGluZ1xuICAvLyAgIDMpIE5ldyBlbGVtZW50cyBhcmUgZ29pbmcgdG8gYmUgcHV0IGluIHRoZSByaWdodCBwbGFjZSBieSBtb3JwaGRvbSBkdXJpbmcgYXBwZW5kLlxuICAvLyAgICAgIEZvciBwcmVwZW5kLCB3ZSBtb3ZlIHRoZW0gdG8gdGhlIGZpcnN0IHBvc2l0aW9uIGluIHRoZSBjb250YWluZXJcbiAgcGVyZm9ybSgpe1xuICAgIGxldCBjb250YWluZXIgPSBET00uYnlJZCh0aGlzLmNvbnRhaW5lcklkKVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeS5mb3JFYWNoKGVsZW1lbnRUb01vZGlmeSA9PiB7XG4gICAgICBpZihlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpe1xuICAgICAgICBtYXliZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpLCBwcmV2aW91c0VsZW0gPT4ge1xuICAgICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWQgPT0gcHJldmlvdXNFbGVtLmlkXG4gICAgICAgICAgICBpZighaXNJblJpZ2h0UGxhY2Upe1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyXG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICBsZXQgaXNJblJpZ2h0UGxhY2UgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT0gbnVsbFxuICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYodGhpcy51cGRhdGVUeXBlID09IFwicHJlcGVuZFwiKXtcbiAgICAgIHRoaXMuZWxlbWVudElkc1RvQWRkLnJldmVyc2UoKS5mb3JFYWNoKGVsZW1JZCA9PiB7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1JZCksIGVsZW0gPT4gY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgZWxlbSkpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwgInZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFID0gMTE7XG5cbmZ1bmN0aW9uIG1vcnBoQXR0cnMoZnJvbU5vZGUsIHRvTm9kZSkge1xuICAgIHZhciB0b05vZGVBdHRycyA9IHRvTm9kZS5hdHRyaWJ1dGVzO1xuICAgIHZhciBhdHRyO1xuICAgIHZhciBhdHRyTmFtZTtcbiAgICB2YXIgYXR0ck5hbWVzcGFjZVVSSTtcbiAgICB2YXIgYXR0clZhbHVlO1xuICAgIHZhciBmcm9tVmFsdWU7XG5cbiAgICAvLyBkb2N1bWVudC1mcmFnbWVudHMgZG9udCBoYXZlIGF0dHJpYnV0ZXMgc28gbGV0cyBub3QgZG8gYW55dGhpbmdcbiAgICBpZiAodG9Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFIHx8IGZyb21Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZXMgb24gb3JpZ2luYWwgRE9NIGVsZW1lbnRcbiAgICBmb3IgKHZhciBpID0gdG9Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgYXR0ciA9IHRvTm9kZUF0dHJzW2ldO1xuICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgYXR0ck5hbWVzcGFjZVVSSSA9IGF0dHIubmFtZXNwYWNlVVJJO1xuICAgICAgICBhdHRyVmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubG9jYWxOYW1lIHx8IGF0dHJOYW1lO1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5wcmVmaXggPT09ICd4bWxucycpe1xuICAgICAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTsgLy8gSXQncyBub3QgYWxsb3dlZCB0byBzZXQgYW4gYXR0cmlidXRlIHdpdGggdGhlIFhNTE5TIG5hbWVzcGFjZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGB4bWxuc2AgcHJlZml4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnNldEF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcblxuICAgICAgICAgICAgaWYgKGZyb21WYWx1ZSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFueSBleHRyYSBhdHRyaWJ1dGVzIGZvdW5kIG9uIHRoZSBvcmlnaW5hbCBET00gZWxlbWVudCB0aGF0XG4gICAgLy8gd2VyZW4ndCBmb3VuZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuXG4gICAgdmFyIGZyb21Ob2RlQXR0cnMgPSBmcm9tTm9kZS5hdHRyaWJ1dGVzO1xuXG4gICAgZm9yICh2YXIgZCA9IGZyb21Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgYXR0ciA9IGZyb21Ob2RlQXR0cnNbZF07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG5cbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgcmFuZ2U7IC8vIENyZWF0ZSBhIHJhbmdlIG9iamVjdCBmb3IgZWZmaWNlbnRseSByZW5kZXJpbmcgc3RyaW5ncyB0byBlbGVtZW50cy5cbnZhciBOU19YSFRNTCA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcblxudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBkb2N1bWVudDtcbnZhciBIQVNfVEVNUExBVEVfU1VQUE9SVCA9ICEhZG9jICYmICdjb250ZW50JyBpbiBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnZhciBIQVNfUkFOR0VfU1VQUE9SVCA9ICEhZG9jICYmIGRvYy5jcmVhdGVSYW5nZSAmJiAnY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JyBpbiBkb2MuY3JlYXRlUmFuZ2UoKTtcblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gc3RyO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVJhbmdlKHN0cikge1xuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShkb2MuYm9keSk7XG4gICAgfVxuXG4gICAgdmFyIGZyYWdtZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHN0cik7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVdyYXAoc3RyKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICBmcmFnbWVudC5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbi8qKlxuICogVGhpcyBpcyBhYm91dCB0aGUgc2FtZVxuICogdmFyIGh0bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN0ciwgJ3RleHQvaHRtbCcpO1xuICogcmV0dXJuIGh0bWwuYm9keS5maXJzdENoaWxkO1xuICpcbiAqIEBtZXRob2QgdG9FbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cbmZ1bmN0aW9uIHRvRWxlbWVudChzdHIpIHtcbiAgICBzdHIgPSBzdHIudHJpbSgpO1xuICAgIGlmIChIQVNfVEVNUExBVEVfU1VQUE9SVCkge1xuICAgICAgLy8gYXZvaWQgcmVzdHJpY3Rpb25zIG9uIGNvbnRlbnQgZm9yIHRoaW5ncyBsaWtlIGA8dHI+PHRoPkhpPC90aD48L3RyPmAgd2hpY2hcbiAgICAgIC8vIGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCBkb2Vzbid0IHN1cHBvcnRcbiAgICAgIC8vIDx0ZW1wbGF0ZT4gc3VwcG9ydCBub3QgYXZhaWxhYmxlIGluIElFXG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKTtcbiAgICB9IGVsc2UgaWYgKEhBU19SQU5HRV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0d28gbm9kZSdzIG5hbWVzIGFyZSB0aGUgc2FtZS5cbiAqXG4gKiBOT1RFOiBXZSBkb24ndCBib3RoZXIgY2hlY2tpbmcgYG5hbWVzcGFjZVVSSWAgYmVjYXVzZSB5b3Ugd2lsbCBuZXZlciBmaW5kIHR3byBIVE1MIGVsZW1lbnRzIHdpdGggdGhlIHNhbWVcbiAqICAgICAgIG5vZGVOYW1lIGFuZCBkaWZmZXJlbnQgbmFtZXNwYWNlIFVSSXMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGIgVGhlIHRhcmdldCBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBjb21wYXJlTm9kZU5hbWVzKGZyb21FbCwgdG9FbCkge1xuICAgIHZhciBmcm9tTm9kZU5hbWUgPSBmcm9tRWwubm9kZU5hbWU7XG4gICAgdmFyIHRvTm9kZU5hbWUgPSB0b0VsLm5vZGVOYW1lO1xuICAgIHZhciBmcm9tQ29kZVN0YXJ0LCB0b0NvZGVTdGFydDtcblxuICAgIGlmIChmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbUNvZGVTdGFydCA9IGZyb21Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuICAgIHRvQ29kZVN0YXJ0ID0gdG9Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgdmlydHVhbCBET00gbm9kZSBvciBTVkcgbm9kZSB0aGVuIHdlIG1heVxuICAgIC8vIG5lZWQgdG8gbm9ybWFsaXplIHRoZSB0YWcgbmFtZSBiZWZvcmUgY29tcGFyaW5nLiBOb3JtYWwgSFRNTCBlbGVtZW50cyB0aGF0IGFyZVxuICAgIC8vIGluIHRoZSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIlxuICAgIC8vIGFyZSBjb252ZXJ0ZWQgdG8gdXBwZXIgY2FzZVxuICAgIGlmIChmcm9tQ29kZVN0YXJ0IDw9IDkwICYmIHRvQ29kZVN0YXJ0ID49IDk3KSB7IC8vIGZyb20gaXMgdXBwZXIgYW5kIHRvIGlzIGxvd2VyXG4gICAgICAgIHJldHVybiBmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKHRvQ29kZVN0YXJ0IDw9IDkwICYmIGZyb21Db2RlU3RhcnQgPj0gOTcpIHsgLy8gdG8gaXMgdXBwZXIgYW5kIGZyb20gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIHRvTm9kZU5hbWUgPT09IGZyb21Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVsZW1lbnQsIG9wdGlvbmFsbHkgd2l0aCBhIGtub3duIG5hbWVzcGFjZSBVUkkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIGVsZW1lbnQgbmFtZSwgZS5nLiAnZGl2JyBvciAnc3ZnJ1xuICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lc3BhY2VVUkldIHRoZSBlbGVtZW50J3MgbmFtZXNwYWNlIFVSSSwgaS5lLiB0aGUgdmFsdWUgb2ZcbiAqIGl0cyBgeG1sbnNgIGF0dHJpYnV0ZSBvciBpdHMgaW5mZXJyZWQgbmFtZXNwYWNlLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyhuYW1lLCBuYW1lc3BhY2VVUkkpIHtcbiAgICByZXR1cm4gIW5hbWVzcGFjZVVSSSB8fCBuYW1lc3BhY2VVUkkgPT09IE5TX1hIVE1MID9cbiAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnQobmFtZSkgOlxuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgbmFtZSk7XG59XG5cbi8qKlxuICogQ29waWVzIHRoZSBjaGlsZHJlbiBvZiBvbmUgRE9NIGVsZW1lbnQgdG8gYW5vdGhlciBET00gZWxlbWVudFxuICovXG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgdG9FbC5hcHBlbmRDaGlsZChjdXJDaGlsZCk7XG4gICAgICAgIGN1ckNoaWxkID0gbmV4dENoaWxkO1xuICAgIH1cbiAgICByZXR1cm4gdG9FbDtcbn1cblxuZnVuY3Rpb24gc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsIG5hbWUpIHtcbiAgICBpZiAoZnJvbUVsW25hbWVdICE9PSB0b0VsW25hbWVdKSB7XG4gICAgICAgIGZyb21FbFtuYW1lXSA9IHRvRWxbbmFtZV07XG4gICAgICAgIGlmIChmcm9tRWxbbmFtZV0pIHtcbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUobmFtZSwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIHNwZWNpYWxFbEhhbmRsZXJzID0ge1xuICAgIE9QVElPTjogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gZnJvbUVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50TmFtZSA9IHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gcGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gJ1NFTEVDVCcgJiYgIXBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyb21FbC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgJiYgIXRvRWwuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgTVMgRWRnZSBidWcgd2hlcmUgdGhlICdzZWxlY3RlZCcgYXR0cmlidXRlIGNhbiBvbmx5IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgc2V0IHRvIGEgbm9uLWVtcHR5IHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMjA4NzY3OS9cbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byByZXNldCBzZWxlY3QgZWxlbWVudCdzIHNlbGVjdGVkSW5kZXggdG8gLTEsIG90aGVyd2lzZSBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gZnJvbUVsLnNlbGVjdGVkIHVzaW5nIHRoZSBzeW5jQm9vbGVhbkF0dHJQcm9wIGJlbG93IGhhcyBubyBlZmZlY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNvcnJlY3Qgc2VsZWN0ZWRJbmRleCB3aWxsIGJlIHNldCBpbiB0aGUgU0VMRUNUIHNwZWNpYWwgaGFuZGxlciBiZWxvdy5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ3NlbGVjdGVkJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBpcyBzcGVjaWFsIGZvciB0aGUgPGlucHV0PiBlbGVtZW50IHNpbmNlIGl0IHNldHNcbiAgICAgKiB0aGUgaW5pdGlhbCB2YWx1ZS4gQ2hhbmdpbmcgdGhlIFwidmFsdWVcIiBhdHRyaWJ1dGUgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgKiBcInZhbHVlXCIgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdCBzaW5jZSBpdCBpcyBvbmx5IHVzZWQgdG8gdGhlIHNldCB0aGVcbiAgICAgKiBpbml0aWFsIHZhbHVlLiAgU2ltaWxhciBmb3IgdGhlIFwiY2hlY2tlZFwiIGF0dHJpYnV0ZSwgYW5kIFwiZGlzYWJsZWRcIi5cbiAgICAgKi9cbiAgICBJTlBVVDogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnY2hlY2tlZCcpO1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGZyb21FbC52YWx1ZSAhPT0gdG9FbC52YWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gdG9FbC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdG9FbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIGZyb21FbC5yZW1vdmVBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgVEVYVEFSRUE6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgLy8gTmVlZGVkIGZvciBJRS4gQXBwYXJlbnRseSBJRSBzZXRzIHRoZSBwbGFjZWhvbGRlciBhcyB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUgdmFsdWUgYW5kIHZpc2UgdmVyc2EuIFRoaXMgaWdub3JlcyBhbiBlbXB0eSB1cGRhdGUuXG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBmaXJzdENoaWxkLm5vZGVWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09IG5ld1ZhbHVlIHx8ICghbmV3VmFsdWUgJiYgb2xkVmFsdWUgPT0gZnJvbUVsLnBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgU0VMRUNUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgdG8gbG9vcCB0aHJvdWdoIGNoaWxkcmVuIG9mIGZyb21FbCwgbm90IHRvRWwgc2luY2Ugbm9kZXMgY2FuIGJlIG1vdmVkXG4gICAgICAgICAgICAvLyBmcm9tIHRvRWwgdG8gZnJvbUVsIGRpcmVjdGx5IHdoZW4gbW9ycGhpbmcuXG4gICAgICAgICAgICAvLyBBdCB0aGUgdGltZSB0aGlzIHNwZWNpYWwgaGFuZGxlciBpcyBpbnZva2VkLCBhbGwgY2hpbGRyZW4gaGF2ZSBhbHJlYWR5IGJlZW4gbW9ycGhlZFxuICAgICAgICAgICAgLy8gYW5kIGFwcGVuZGVkIHRvIC8gcmVtb3ZlZCBmcm9tIGZyb21FbCwgc28gdXNpbmcgZnJvbUVsIGhlcmUgaXMgc2FmZSBhbmQgY29ycmVjdC5cbiAgICAgICAgICAgIHZhciBjdXJDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIG9wdGdyb3VwO1xuICAgICAgICAgICAgdmFyIG5vZGVOYW1lO1xuICAgICAgICAgICAgd2hpbGUoY3VyQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBub2RlTmFtZSA9IGN1ckNoaWxkLm5vZGVOYW1lICYmIGN1ckNoaWxkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ckNoaWxkID0gb3B0Z3JvdXAuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ2hpbGQuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJDaGlsZCAmJiBvcHRncm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJvbUVsLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEVMRU1FTlRfTk9ERSA9IDE7XG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxID0gMTE7XG52YXIgVEVYVF9OT0RFID0gMztcbnZhciBDT01NRU5UX05PREUgPSA4O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gZGVmYXVsdEdldE5vZGVLZXkobm9kZSkge1xuICBpZiAobm9kZSkge1xuICAgIHJldHVybiAobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHx8IG5vZGUuaWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpIHtcblxuICByZXR1cm4gZnVuY3Rpb24gbW9ycGhkb20oZnJvbU5vZGUsIHRvTm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9Ob2RlID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGZyb21Ob2RlLm5vZGVOYW1lID09PSAnI2RvY3VtZW50JyB8fCBmcm9tTm9kZS5ub2RlTmFtZSA9PT0gJ0hUTUwnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgdmFyIHRvTm9kZUh0bWwgPSB0b05vZGU7XG4gICAgICAgIHRvTm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgICAgIHRvTm9kZS5pbm5lckhUTUwgPSB0b05vZGVIdG1sO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9Ob2RlID0gdG9FbGVtZW50KHRvTm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgdG9Ob2RlID0gdG9Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cblxuICAgIHZhciBnZXROb2RlS2V5ID0gb3B0aW9ucy5nZXROb2RlS2V5IHx8IGRlZmF1bHRHZXROb2RlS2V5O1xuICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZCA9IG9wdGlvbnMub25CZWZvcmVOb2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlQWRkZWQgPSBvcHRpb25zLm9uTm9kZUFkZGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uQmVmb3JlRWxVcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkVsVXBkYXRlZCA9IG9wdGlvbnMub25FbFVwZGF0ZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVOb2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbk5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCA9IG9wdGlvbnMub25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBza2lwRnJvbUNoaWxkcmVuID0gb3B0aW9ucy5za2lwRnJvbUNoaWxkcmVuIHx8IG5vb3A7XG4gICAgdmFyIGFkZENoaWxkID0gb3B0aW9ucy5hZGRDaGlsZCB8fCBmdW5jdGlvbihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7IH07XG4gICAgdmFyIGNoaWxkcmVuT25seSA9IG9wdGlvbnMuY2hpbGRyZW5Pbmx5ID09PSB0cnVlO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGxvb2t1cCB0byBxdWlja2x5IGZpbmQgYWxsIGtleWVkIGVsZW1lbnRzIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICB2YXIgZnJvbU5vZGVzTG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIga2V5ZWRSZW1vdmFsTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkS2V5ZWRSZW1vdmFsKGtleSkge1xuICAgICAga2V5ZWRSZW1vdmFsTGlzdC5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgdmFyIGN1ckNoaWxkID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcblxuICAgICAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoc2tpcEtleWVkTm9kZXMgJiYgKGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpKSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHNraXBwaW5nIGtleWVkIG5vZGVzIHRoZW4gd2UgYWRkIHRoZSBrZXlcbiAgICAgICAgICAgIC8vIHRvIGEgbGlzdCBzbyB0aGF0IGl0IGNhbiBiZSBoYW5kbGVkIGF0IHRoZSB2ZXJ5IGVuZC5cbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbmx5IHJlcG9ydCB0aGUgbm9kZSBhcyBkaXNjYXJkZWQgaWYgaXQgaXMgbm90IGtleWVkLiBXZSBkbyB0aGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGF0IHRoZSBlbmQgd2UgbG9vcCB0aHJvdWdoIGFsbCBrZXllZCBlbGVtZW50cyB0aGF0IHdlcmUgdW5tYXRjaGVkXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiBkaXNjYXJkIHRoZW0gaW4gb25lIGZpbmFsIHBhc3MuXG4gICAgICAgICAgICBvbk5vZGVEaXNjYXJkZWQoY3VyQ2hpbGQpO1xuICAgICAgICAgICAgaWYgKGN1ckNoaWxkLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMoY3VyQ2hpbGQsIHNraXBLZXllZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZW1vdmVzIGEgRE9NIG5vZGUgb3V0IG9mIHRoZSBvcmlnaW5hbCBET01cbiAgICAqXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuICAgICogQHBhcmFtICB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgbm9kZXMgcGFyZW50XG4gICAgKiBAcGFyYW0gIHtCb29sZWFufSBza2lwS2V5ZWROb2RlcyBJZiB0cnVlIHRoZW4gZWxlbWVudHMgd2l0aCBrZXlzIHdpbGwgYmUgc2tpcHBlZCBhbmQgbm90IGRpc2NhcmRlZC5cbiAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSwgcGFyZW50Tm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChvbkJlZm9yZU5vZGVEaXNjYXJkZWQobm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgb25Ob2RlRGlzY2FyZGVkKG5vZGUpO1xuICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpO1xuICAgIH1cblxuICAgIC8vIC8vIFRyZWVXYWxrZXIgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKHJvb3QpIHtcbiAgICAvLyAgICAgdmFyIHRyZWVXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgIC8vICAgICAgICAgcm9vdCxcbiAgICAvLyAgICAgICAgIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZWw7XG4gICAgLy8gICAgIHdoaWxlKChlbCA9IHRyZWVXYWxrZXIubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gLy8gTm9kZUl0ZXJhdG9yIGltcGxlbWVudGF0aW9uIGlzIG5vIGZhc3RlciwgYnV0IGtlZXBpbmcgdGhpcyBhcm91bmQgaW4gY2FzZSB0aGlzIGNoYW5nZXMgaW4gdGhlIGZ1dHVyZVxuICAgIC8vXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGVJdGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcihub2RlLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCk7XG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpKSB7XG4gICAgLy8gICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShlbCk7XG4gICAgLy8gICAgICAgICBpZiAoa2V5KSB7XG4gICAgLy8gICAgICAgICAgICAgZnJvbU5vZGVzTG9va3VwW2tleV0gPSBlbDtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIGZ1bmN0aW9uIGluZGV4VHJlZShub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGN1ckNoaWxkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFdhbGsgcmVjdXJzaXZlbHlcbiAgICAgICAgICBpbmRleFRyZWUoY3VyQ2hpbGQpO1xuXG4gICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGluZGV4VHJlZShmcm9tTm9kZSk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVOb2RlQWRkZWQoZWwpIHtcbiAgICAgIG9uTm9kZUFkZGVkKGVsKTtcblxuICAgICAgdmFyIGN1ckNoaWxkID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBjdXJDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB2YXIgdW5tYXRjaGVkRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2tleV07XG4gICAgICAgICAgLy8gaWYgd2UgZmluZCBhIGR1cGxpY2F0ZSAjaWQgbm9kZSBpbiBjYWNoZSwgcmVwbGFjZSBgZWxgIHdpdGggY2FjaGUgdmFsdWVcbiAgICAgICAgICAvLyBhbmQgbW9ycGggaXQgdG8gdGhlIGNoaWxkIG5vZGUuXG4gICAgICAgICAgaWYgKHVubWF0Y2hlZEZyb21FbCAmJiBjb21wYXJlTm9kZU5hbWVzKGN1ckNoaWxkLCB1bm1hdGNoZWRGcm9tRWwpKSB7XG4gICAgICAgICAgICBjdXJDaGlsZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICAgIG1vcnBoRWwodW5tYXRjaGVkRnJvbUVsLCBjdXJDaGlsZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNhbGwgZm9yIGN1ckNoaWxkIGFuZCBpdCdzIGNoaWxkcmVuIHRvIHNlZSBpZiB3ZSBmaW5kIHNvbWV0aGluZyBpblxuICAgICAgICAgIC8vIGZyb21Ob2Rlc0xvb2t1cFxuICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJDaGlsZCA9IG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSkge1xuICAgICAgLy8gV2UgaGF2ZSBwcm9jZXNzZWQgYWxsIG9mIHRoZSBcInRvIG5vZGVzXCIuIElmIGN1ckZyb21Ob2RlQ2hpbGQgaXNcbiAgICAgIC8vIG5vbi1udWxsIHRoZW4gd2Ugc3RpbGwgaGF2ZSBzb21lIGZyb20gbm9kZXMgbGVmdCBvdmVyIHRoYXQgbmVlZFxuICAgICAgLy8gdG8gYmUgcmVtb3ZlZFxuICAgICAgd2hpbGUgKGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgdmFyIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICgoY3VyRnJvbU5vZGVLZXkgPSBnZXROb2RlS2V5KGN1ckZyb21Ob2RlQ2hpbGQpKSkge1xuICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICBhZGRLZXllZFJlbW92YWwoY3VyRnJvbU5vZGVLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgIC8vICAgICAgIHN0aWxsIGEgY2hhbmNlIHRoZXkgd2lsbCBiZSBtYXRjaGVkIHVwIGxhdGVyXG4gICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3JwaEVsKGZyb21FbCwgdG9FbCwgY2hpbGRyZW5Pbmx5KSB7XG4gICAgICB2YXIgdG9FbEtleSA9IGdldE5vZGVLZXkodG9FbCk7XG5cbiAgICAgIGlmICh0b0VsS2V5KSB7XG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBpcyBiZWluZyBtb3JwaGVkIHRoZW4gaXQgd2lsbCBiZSBpbiB0aGUgZmluYWxcbiAgICAgICAgLy8gRE9NIHNvIGNsZWFyIGl0IG91dCBvZiB0aGUgc2F2ZWQgZWxlbWVudHMgY29sbGVjdGlvblxuICAgICAgICBkZWxldGUgZnJvbU5vZGVzTG9va3VwW3RvRWxLZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgICAvLyBvcHRpb25hbFxuICAgICAgICBpZiAob25CZWZvcmVFbFVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudCBmaXJzdFxuICAgICAgICBtb3JwaEF0dHJzKGZyb21FbCwgdG9FbCk7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIG9uRWxVcGRhdGVkKGZyb21FbCk7XG5cbiAgICAgICAgaWYgKG9uQmVmb3JlRWxDaGlsZHJlblVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZyb21FbC5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBtb3JwaENoaWxkcmVuKGZyb21FbCwgdG9FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVjaWFsRWxIYW5kbGVycy5URVhUQVJFQShmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgICB2YXIgc2tpcEZyb20gPSBza2lwRnJvbUNoaWxkcmVuKGZyb21FbCk7XG4gICAgICB2YXIgY3VyVG9Ob2RlQ2hpbGQgPSB0b0VsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgdmFyIGN1clRvTm9kZUtleTtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUtleTtcblxuICAgICAgdmFyIGZyb21OZXh0U2libGluZztcbiAgICAgIHZhciB0b05leHRTaWJsaW5nO1xuICAgICAgdmFyIG1hdGNoaW5nRnJvbUVsO1xuXG4gICAgICAvLyB3YWxrIHRoZSBjaGlsZHJlblxuICAgICAgb3V0ZXI6IHdoaWxlIChjdXJUb05vZGVDaGlsZCkge1xuICAgICAgICB0b05leHRTaWJsaW5nID0gY3VyVG9Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGN1clRvTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyVG9Ob2RlQ2hpbGQpO1xuXG4gICAgICAgIC8vIHdhbGsgdGhlIGZyb21Ob2RlIGNoaWxkcmVuIGFsbCB0aGUgd2F5IHRocm91Z2hcbiAgICAgICAgd2hpbGUgKCFza2lwRnJvbSAmJiBjdXJGcm9tTm9kZUNoaWxkKSB7XG4gICAgICAgICAgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5pc1NhbWVOb2RlICYmIGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCkpIHtcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICB2YXIgY3VyRnJvbU5vZGVUeXBlID0gY3VyRnJvbU5vZGVDaGlsZC5ub2RlVHlwZTtcblxuICAgICAgICAgIC8vIHRoaXMgbWVhbnMgaWYgdGhlIGN1ckZyb21Ob2RlQ2hpbGQgZG9lc250IGhhdmUgYSBtYXRjaCB3aXRoIHRoZSBjdXJUb05vZGVDaGlsZFxuICAgICAgICAgIHZhciBpc0NvbXBhdGlibGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBjdXJUb05vZGVDaGlsZC5ub2RlVHlwZSkge1xuICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIEVsZW1lbnQgbm9kZXNcblxuICAgICAgICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHRhcmdldCBub2RlIGhhcyBhIGtleSBzbyB3ZSB3YW50IHRvIG1hdGNoIGl0IHVwIHdpdGggdGhlIGNvcnJlY3QgZWxlbWVudFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZVxuICAgICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkgIT09IGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbCBET00gdHJlZSBkb2VzIG5vdCBoYXZlIGEgbWF0Y2hpbmcga2V5IHNvXG4gICAgICAgICAgICAgICAgICAvLyBsZXQncyBjaGVjayBvdXIgbG9va3VwIHRvIHNlZSBpZiB0aGVyZSBpcyBhIG1hdGNoaW5nIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAvLyBET00gdHJlZVxuICAgICAgICAgICAgICAgICAgaWYgKChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbU5leHRTaWJsaW5nID09PSBtYXRjaGluZ0Zyb21FbCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3Igc2luZ2xlIGVsZW1lbnQgcmVtb3ZhbHMuIFRvIGF2b2lkIHJlbW92aW5nIHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIERPTSBub2RlIG91dCBvZiB0aGUgdHJlZSAoc2luY2UgdGhhdCBjYW4gYnJlYWsgQ1NTIHRyYW5zaXRpb25zLCBldGMuKSxcbiAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGluc3RlYWQgZGlzY2FyZCB0aGUgY3VycmVudCBub2RlIGFuZCB3YWl0IHVudGlsIHRoZSBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIHRvIHByb3Blcmx5IG1hdGNoIHVwIHRoZSBrZXllZCB0YXJnZXQgZWxlbWVudCB3aXRoIGl0cyBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIG1hdGNoaW5nIGtleWVkIGVsZW1lbnQgc29tZXdoZXJlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBMZXQncyBtb3ZlIHRoZSBvcmlnaW5hbCBET00gbm9kZSBpbnRvIHRoZSBjdXJyZW50IHBvc2l0aW9uIGFuZCBtb3JwaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGl0LlxuXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogV2UgdXNlIGluc2VydEJlZm9yZSBpbnN0ZWFkIG9mIHJlcGxhY2VDaGlsZCBiZWNhdXNlIHdlIHdhbnQgdG8gZ28gdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgcmVtb3ZlTm9kZSgpYCBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgdGhhdCBpcyBiZWluZyBkaXNjYXJkZWQgc28gdGhhdFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBsaWZlY3ljbGUgaG9va3MgYXJlIGNvcnJlY3RseSBpbnZva2VkXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUVsLmluc2VydEJlZm9yZShtYXRjaGluZ0Zyb21FbCwgY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBtYXRjaGluZ0Zyb21FbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5vZGVzIGFyZSBub3QgY29tcGF0aWJsZSBzaW5jZSB0aGUgXCJ0b1wiIG5vZGUgaGFzIGEga2V5IGFuZCB0aGVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBubyBtYXRjaGluZyBrZXllZCBub2RlIGluIHRoZSBzb3VyY2UgdHJlZVxuICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgaGFzIGEga2V5XG4gICAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBpc0NvbXBhdGlibGUgIT09IGZhbHNlICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICBpZiAoaXNDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgY29tcGF0aWJsZSBET00gZWxlbWVudHMgc28gdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgXCJmcm9tXCIgbm9kZSB0byBtYXRjaCB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHRhcmdldCBET00gbm9kZS5cbiAgICAgICAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgICAgICAgIG1vcnBoRWwoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBURVhUX05PREUgfHwgY3VyRnJvbU5vZGVUeXBlID09IENPTU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAvLyBCb3RoIG5vZGVzIGJlaW5nIGNvbXBhcmVkIGFyZSBUZXh0IG9yIENvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgLy8gU2ltcGx5IHVwZGF0ZSBub2RlVmFsdWUgb24gdGhlIG9yaWdpbmFsIG5vZGUgdG9cbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSB0ZXh0IHZhbHVlXG4gICAgICAgICAgICAgIGlmIChjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSAhPT0gY3VyVG9Ob2RlQ2hpbGQubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZC5ub2RlVmFsdWUgPSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgYm90aCB0aGUgXCJ0b1wiIGNoaWxkIGFuZCB0aGUgXCJmcm9tXCIgY2hpbGQgc2luY2Ugd2UgZm91bmQgYSBtYXRjaFxuICAgICAgICAgICAgLy8gTm90aGluZyBlbHNlIHRvIGRvIGFzIHdlIGFscmVhZHkgcmVjdXJzaXZlbHkgY2FsbGVkIG1vcnBoQ2hpbGRyZW4gYWJvdmVcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBjb21wYXRpYmxlIG1hdGNoIHNvIHJlbW92ZSB0aGUgb2xkIG5vZGUgZnJvbSB0aGUgRE9NIGFuZCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhXG4gICAgICAgICAgLy8gbWF0Y2ggaW4gdGhlIG9yaWdpbmFsIERPTS4gSG93ZXZlciwgd2Ugb25seSBkbyB0aGlzIGlmIHRoZSBmcm9tIG5vZGUgaXMgbm90IGtleWVkXG4gICAgICAgICAgLy8gc2luY2UgaXQgaXMgcG9zc2libGUgdGhhdCBhIGtleWVkIG5vZGUgbWlnaHQgbWF0Y2ggdXAgd2l0aCBhIG5vZGUgc29tZXdoZXJlIGVsc2UgaW4gdGhlXG4gICAgICAgICAgLy8gdGFyZ2V0IHRyZWUgYW5kIHdlIGRvbid0IHdhbnQgdG8gZGlzY2FyZCBpdCBqdXN0IHlldCBzaW5jZSBpdCBzdGlsbCBtaWdodCBmaW5kIGFcbiAgICAgICAgICAvLyBob21lIGluIHRoZSBmaW5hbCBET00gdHJlZS4gQWZ0ZXIgZXZlcnl0aGluZyBpcyBkb25lIHdlIHdpbGwgcmVtb3ZlIGFueSBrZXllZCBub2Rlc1xuICAgICAgICAgIC8vIHRoYXQgZGlkbid0IGZpbmQgYSBob21lXG4gICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgIH0gLy8gRU5EOiB3aGlsZShjdXJGcm9tTm9kZUNoaWxkKSB7fVxuXG4gICAgICAgIC8vIElmIHdlIGdvdCB0aGlzIGZhciB0aGVuIHdlIGRpZCBub3QgZmluZCBhIGNhbmRpZGF0ZSBtYXRjaCBmb3JcbiAgICAgICAgLy8gb3VyIFwidG8gbm9kZVwiIGFuZCB3ZSBleGhhdXN0ZWQgYWxsIG9mIHRoZSBjaGlsZHJlbiBcImZyb21cIlxuICAgICAgICAvLyBub2Rlcy4gVGhlcmVmb3JlLCB3ZSB3aWxsIGp1c3QgYXBwZW5kIHRoZSBjdXJyZW50IFwidG9cIiBub2RlXG4gICAgICAgIC8vIHRvIHRoZSBlbmRcbiAgICAgICAgaWYgKGN1clRvTm9kZUtleSAmJiAobWF0Y2hpbmdGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBbY3VyVG9Ob2RlS2V5XSkgJiYgY29tcGFyZU5vZGVOYW1lcyhtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gTU9SUEhcbiAgICAgICAgICBpZighc2tpcEZyb20peyBhZGRDaGlsZChmcm9tRWwsIG1hdGNoaW5nRnJvbUVsKTsgfVxuICAgICAgICAgIG1vcnBoRWwobWF0Y2hpbmdGcm9tRWwsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgPSBvbkJlZm9yZU5vZGVBZGRlZChjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUoZnJvbUVsLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENoaWxkKGZyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJUb05vZGVDaGlsZCA9IHRvTmV4dFNpYmxpbmc7XG4gICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSk7XG5cbiAgICAgIHZhciBzcGVjaWFsRWxIYW5kbGVyID0gc3BlY2lhbEVsSGFuZGxlcnNbZnJvbUVsLm5vZGVOYW1lXTtcbiAgICAgIGlmIChzcGVjaWFsRWxIYW5kbGVyKSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXIoZnJvbUVsLCB0b0VsKTtcbiAgICAgIH1cbiAgICB9IC8vIEVORDogbW9ycGhDaGlsZHJlbiguLi4pXG5cbiAgICB2YXIgbW9ycGhlZE5vZGUgPSBmcm9tTm9kZTtcbiAgICB2YXIgbW9ycGhlZE5vZGVUeXBlID0gbW9ycGhlZE5vZGUubm9kZVR5cGU7XG4gICAgdmFyIHRvTm9kZVR5cGUgPSB0b05vZGUubm9kZVR5cGU7XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHdlIGFyZSBnaXZlbiB0d28gRE9NIG5vZGVzIHRoYXQgYXJlIG5vdFxuICAgICAgLy8gY29tcGF0aWJsZSAoZS5nLiA8ZGl2PiAtLT4gPHNwYW4+IG9yIDxkaXY+IC0tPiBURVhUKVxuICAgICAgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICBpZiAoIWNvbXBhcmVOb2RlTmFtZXMoZnJvbU5vZGUsIHRvTm9kZSkpIHtcbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChmcm9tTm9kZSk7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZSA9IG1vdmVDaGlsZHJlbihmcm9tTm9kZSwgY3JlYXRlRWxlbWVudE5TKHRvTm9kZS5ub2RlTmFtZSwgdG9Ob2RlLm5hbWVzcGFjZVVSSSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHb2luZyBmcm9tIGFuIGVsZW1lbnQgbm9kZSB0byBhIHRleHQgbm9kZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gVEVYVF9OT0RFIHx8IG1vcnBoZWROb2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFKSB7IC8vIFRleHQgb3IgY29tbWVudCBub2RlXG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBtb3JwaGVkTm9kZVR5cGUpIHtcbiAgICAgICAgICBpZiAobW9ycGhlZE5vZGUubm9kZVZhbHVlICE9PSB0b05vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZS5ub2RlVmFsdWUgPSB0b05vZGUubm9kZVZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUZXh0IG5vZGUgdG8gc29tZXRoaW5nIGVsc2VcbiAgICAgICAgICBtb3JwaGVkTm9kZSA9IHRvTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb3JwaGVkTm9kZSA9PT0gdG9Ob2RlKSB7XG4gICAgICAvLyBUaGUgXCJ0byBub2RlXCIgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIFwiZnJvbSBub2RlXCIgc28gd2UgaGFkIHRvXG4gICAgICAvLyB0b3NzIG91dCB0aGUgXCJmcm9tIG5vZGVcIiBhbmQgdXNlIHRoZSBcInRvIG5vZGVcIlxuICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRvTm9kZS5pc1NhbWVOb2RlICYmIHRvTm9kZS5pc1NhbWVOb2RlKG1vcnBoZWROb2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1vcnBoRWwobW9ycGhlZE5vZGUsIHRvTm9kZSwgY2hpbGRyZW5Pbmx5KTtcblxuICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gbG9vcCBvdmVyIGFueSBrZXllZCBub2RlcyB0aGF0IG1pZ2h0IG5lZWQgdG8gYmVcbiAgICAgIC8vIHJlbW92ZWQuIFdlIG9ubHkgZG8gdGhlIHJlbW92YWwgaWYgd2Uga25vdyB0aGF0IHRoZSBrZXllZCBub2RlXG4gICAgICAvLyBuZXZlciBmb3VuZCBhIG1hdGNoLiBXaGVuIGEga2V5ZWQgbm9kZSBpcyBtYXRjaGVkIHVwIHdlIHJlbW92ZVxuICAgICAgLy8gaXQgb3V0IG9mIGZyb21Ob2Rlc0xvb2t1cCBhbmQgd2UgdXNlIGZyb21Ob2Rlc0xvb2t1cCB0byBkZXRlcm1pbmVcbiAgICAgIC8vIGlmIGEga2V5ZWQgbm9kZSBoYXMgYmVlbiBtYXRjaGVkIHVwIG9yIG5vdFxuICAgICAgaWYgKGtleWVkUmVtb3ZhbExpc3QpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49a2V5ZWRSZW1vdmFsTGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZWxUb1JlbW92ZSA9IGZyb21Ob2Rlc0xvb2t1cFtrZXllZFJlbW92YWxMaXN0W2ldXTtcbiAgICAgICAgICBpZiAoZWxUb1JlbW92ZSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShlbFRvUmVtb3ZlLCBlbFRvUmVtb3ZlLnBhcmVudE5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSAmJiBtb3JwaGVkTm9kZSAhPT0gZnJvbU5vZGUgJiYgZnJvbU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKG1vcnBoZWROb2RlLmFjdHVhbGl6ZSkge1xuICAgICAgICBtb3JwaGVkTm9kZSA9IG1vcnBoZWROb2RlLmFjdHVhbGl6ZShmcm9tTm9kZS5vd25lckRvY3VtZW50IHx8IGRvYyk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBoYWQgdG8gc3dhcCBvdXQgdGhlIGZyb20gbm9kZSB3aXRoIGEgbmV3IG5vZGUgYmVjYXVzZSB0aGUgb2xkXG4gICAgICAvLyBub2RlIHdhcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB0YXJnZXQgbm9kZSB0aGVuIHdlIG5lZWQgdG9cbiAgICAgIC8vIHJlcGxhY2UgdGhlIG9sZCBET00gbm9kZSBpbiB0aGUgb3JpZ2luYWwgRE9NIHRyZWUuIFRoaXMgaXMgb25seVxuICAgICAgLy8gcG9zc2libGUgaWYgdGhlIG9yaWdpbmFsIERPTSBub2RlIHdhcyBwYXJ0IG9mIGEgRE9NIHRyZWUgd2hpY2hcbiAgICAgIC8vIHdlIGtub3cgaXMgdGhlIGNhc2UgaWYgaXQgaGFzIGEgcGFyZW50IG5vZGUuXG4gICAgICBmcm9tTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChtb3JwaGVkTm9kZSwgZnJvbU5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgfTtcbn1cblxudmFyIG1vcnBoZG9tID0gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3JwaGRvbTtcbiIsICJpbXBvcnQge1xuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRElTQUJMRV9XSVRILFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfUFJVTkUsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NLSVAsXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUklHR0VSX0FDVElPTixcbiAgUEhYX1VQREFURSxcbiAgUEhYX1NUUkVBTSxcbiAgUEhYX1NUUkVBTV9SRUYsXG4gIFBIWF9WSUVXUE9SVF9UT1AsXG4gIFBIWF9WSUVXUE9SVF9CT1RUT00sXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGRldGVjdER1cGxpY2F0ZUlkcyxcbiAgaXNDaWRcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgRE9NUG9zdE1vcnBoUmVzdG9yZXIgZnJvbSBcIi4vZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXJcIlxuaW1wb3J0IG1vcnBoZG9tIGZyb20gXCJtb3JwaGRvbVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERPTVBhdGNoIHtcbiAgc3RhdGljIHBhdGNoRWwoZnJvbUVsLCB0b0VsLCBhY3RpdmVFbGVtZW50KXtcbiAgICBtb3JwaGRvbShmcm9tRWwsIHRvRWwsIHtcbiAgICAgIGNoaWxkcmVuT25seTogZmFsc2UsXG4gICAgICBvbkJlZm9yZUVsVXBkYXRlZDogKGZyb21FbCwgdG9FbCkgPT4ge1xuICAgICAgICBpZihhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQuaXNTYW1lTm9kZShmcm9tRWwpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpKXtcbiAgICAgICAgICBET00ubWVyZ2VGb2N1c2VkSW5wdXQoZnJvbUVsLCB0b0VsKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGNvbnRhaW5lciwgaWQsIGh0bWwsIHN0cmVhbXMsIHRhcmdldENJRCl7XG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubGl2ZVNvY2tldCA9IHZpZXcubGl2ZVNvY2tldFxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyXG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy5yb290SUQgPSB2aWV3LnJvb3QuaWRcbiAgICB0aGlzLmh0bWwgPSBodG1sXG4gICAgdGhpcy5zdHJlYW1zID0gc3RyZWFtc1xuICAgIHRoaXMuc3RyZWFtSW5zZXJ0cyA9IHt9XG4gICAgdGhpcy50YXJnZXRDSUQgPSB0YXJnZXRDSURcbiAgICB0aGlzLmNpZFBhdGNoID0gaXNDaWQodGhpcy50YXJnZXRDSUQpXG4gICAgdGhpcy5wZW5kaW5nUmVtb3ZlcyA9IFtdXG4gICAgdGhpcy5waHhSZW1vdmUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInJlbW92ZVwiKVxuICAgIHRoaXMuY2FsbGJhY2tzID0ge1xuICAgICAgYmVmb3JlYWRkZWQ6IFtdLCBiZWZvcmV1cGRhdGVkOiBbXSwgYmVmb3JlcGh4Q2hpbGRBZGRlZDogW10sXG4gICAgICBhZnRlcmFkZGVkOiBbXSwgYWZ0ZXJ1cGRhdGVkOiBbXSwgYWZ0ZXJkaXNjYXJkZWQ6IFtdLCBhZnRlcnBoeENoaWxkQWRkZWQ6IFtdLFxuICAgICAgYWZ0ZXJ0cmFuc2l0aW9uc0Rpc2NhcmRlZDogW11cbiAgICB9XG4gIH1cblxuICBiZWZvcmUoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYmVmb3JlJHtraW5kfWBdLnB1c2goY2FsbGJhY2spIH1cbiAgYWZ0ZXIoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYWZ0ZXIke2tpbmR9YF0ucHVzaChjYWxsYmFjaykgfVxuXG4gIHRyYWNrQmVmb3JlKGtpbmQsIC4uLmFyZ3Mpe1xuICAgIHRoaXMuY2FsbGJhY2tzW2BiZWZvcmUke2tpbmR9YF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayguLi5hcmdzKSlcbiAgfVxuXG4gIHRyYWNrQWZ0ZXIoa2luZCwgLi4uYXJncyl7XG4gICAgdGhpcy5jYWxsYmFja3NbYGFmdGVyJHtraW5kfWBdLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soLi4uYXJncykpXG4gIH1cblxuICBtYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpe1xuICAgIGxldCBwaHhVcGRhdGUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfVVBEQVRFKVxuICAgIERPTS5hbGwodGhpcy5jb250YWluZXIsIGBbJHtwaHhVcGRhdGV9PSR7UEhYX1NUUkVBTX1dYCwgZWwgPT4gZWwuaW5uZXJIVE1MID0gXCJcIilcbiAgICBET00uYWxsKHRoaXMuY29udGFpbmVyLCBgWyR7cGh4VXBkYXRlfT1hcHBlbmRdID4gKiwgWyR7cGh4VXBkYXRlfT1wcmVwZW5kXSA+ICpgLCBlbCA9PiB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1BSVU5FLCBcIlwiKVxuICAgIH0pXG4gIH1cblxuICBwZXJmb3JtKCl7XG4gICAgbGV0IHt2aWV3LCBsaXZlU29ja2V0LCBjb250YWluZXIsIGh0bWx9ID0gdGhpc1xuICAgIGxldCB0YXJnZXRDb250YWluZXIgPSB0aGlzLmlzQ0lEUGF0Y2goKSA/IHRoaXMudGFyZ2V0Q0lEQ29udGFpbmVyKGh0bWwpIDogY29udGFpbmVyXG4gICAgaWYodGhpcy5pc0NJRFBhdGNoKCkgJiYgIXRhcmdldENvbnRhaW5lcil7IHJldHVybiB9XG5cbiAgICBsZXQgZm9jdXNlZCA9IGxpdmVTb2NrZXQuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgbGV0IHtzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kfSA9IGZvY3VzZWQgJiYgRE9NLmhhc1NlbGVjdGlvblJhbmdlKGZvY3VzZWQpID8gZm9jdXNlZCA6IHt9XG4gICAgbGV0IHBoeFVwZGF0ZSA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVVBEQVRFKVxuICAgIGxldCBwaHhGZWVkYmFja0ZvciA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGxldCBkaXNhYmxlV2l0aCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKVxuICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgIGxldCBwaHhWaWV3cG9ydEJvdHRvbSA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfQk9UVE9NKVxuICAgIGxldCBwaHhUcmlnZ2VyRXh0ZXJuYWwgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX1RSSUdHRVJfQUNUSU9OKVxuICAgIGxldCBhZGRlZCA9IFtdXG4gICAgbGV0IHRyYWNrZWRJbnB1dHMgPSBbXVxuICAgIGxldCB1cGRhdGVzID0gW11cbiAgICBsZXQgYXBwZW5kUHJlcGVuZFVwZGF0ZXMgPSBbXVxuXG4gICAgbGV0IGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IG51bGxcblxuICAgIGxldCBkaWZmSFRNTCA9IGxpdmVTb2NrZXQudGltZShcInByZW1vcnBoIGNvbnRhaW5lciBwcmVwXCIsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkRGlmZkhUTUwoY29udGFpbmVyLCBodG1sLCBwaHhVcGRhdGUsIHRhcmdldENvbnRhaW5lcilcbiAgICB9KVxuXG4gICAgdGhpcy50cmFja0JlZm9yZShcImFkZGVkXCIsIGNvbnRhaW5lcilcbiAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBjb250YWluZXIsIGNvbnRhaW5lcilcblxuICAgIGxpdmVTb2NrZXQudGltZShcIm1vcnBoZG9tXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RyZWFtcy5mb3JFYWNoKChbcmVmLCBpbnNlcnRzLCBkZWxldGVJZHMsIHJlc2V0XSkgPT4ge1xuICAgICAgICBPYmplY3QuZW50cmllcyhpbnNlcnRzKS5mb3JFYWNoKChba2V5LCBbc3RyZWFtQXQsIGxpbWl0XV0pID0+IHtcbiAgICAgICAgICB0aGlzLnN0cmVhbUluc2VydHNba2V5XSA9IHtyZWYsIHN0cmVhbUF0LCBsaW1pdH1cbiAgICAgICAgfSlcbiAgICAgICAgaWYocmVzZXQgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgRE9NLmFsbChjb250YWluZXIsIGBbJHtQSFhfU1RSRUFNX1JFRn09XCIke3JlZn1cIl1gLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZUlkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtpZH1cIl1gKVxuICAgICAgICAgIGlmKGNoaWxkKXsgdGhpcy5yZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIG1vcnBoZG9tKHRhcmdldENvbnRhaW5lciwgZGlmZkhUTUwsIHtcbiAgICAgICAgY2hpbGRyZW5Pbmx5OiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSBudWxsLFxuICAgICAgICBnZXROb2RlS2V5OiAobm9kZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uaXNQaHhEZXN0cm95ZWQobm9kZSkgPyBudWxsIDogbm9kZS5pZFxuICAgICAgICB9LFxuICAgICAgICAvLyBza2lwIGluZGV4aW5nIGZyb20gY2hpbGRyZW4gd2hlbiBjb250YWluZXIgaXMgc3RyZWFtXG4gICAgICAgIHNraXBGcm9tQ2hpbGRyZW46IChmcm9tKSA9PiB7IHJldHVybiBmcm9tLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpID09PSBQSFhfU1RSRUFNIH0sXG4gICAgICAgIC8vIHRlbGwgbW9ycGhkb20gaG93IHRvIGFkZCBhIGNoaWxkXG4gICAgICAgIGFkZENoaWxkOiAocGFyZW50LCBjaGlsZCkgPT4ge1xuICAgICAgICAgIGxldCB7cmVmLCBzdHJlYW1BdCwgbGltaXR9ID0gdGhpcy5nZXRTdHJlYW1JbnNlcnQoY2hpbGQpXG4gICAgICAgICAgaWYocmVmID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCkgfVxuXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShjaGlsZCwgUEhYX1NUUkVBTV9SRUYsIGVsID0+IGVsLnNldEF0dHJpYnV0ZShQSFhfU1RSRUFNX1JFRiwgcmVmKSlcblxuICAgICAgICAgIC8vIHN0cmVhbWluZ1xuICAgICAgICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA9PT0gLTEpe1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgICAgICAgbGV0IHNpYmxpbmcgPSBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilbc3RyZWFtQXRdXG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBzaWJsaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY2hpbGRyZW4gPSBsaW1pdCAhPT0gbnVsbCAmJiBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilcbiAgICAgICAgICBpZihsaW1pdCAmJiBsaW1pdCA8IDAgJiYgY2hpbGRyZW4ubGVuZ3RoID4gbGltaXQgKiAtMSl7XG4gICAgICAgICAgICBjaGlsZHJlbi5zbGljZSgwLCBjaGlsZHJlbi5sZW5ndGggKyBsaW1pdCkuZm9yRWFjaChjaGlsZCA9PiB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZCkpXG4gICAgICAgICAgfSBlbHNlIGlmKGxpbWl0ICYmIGxpbWl0ID49IDAgJiYgY2hpbGRyZW4ubGVuZ3RoID4gbGltaXQpe1xuICAgICAgICAgICAgY2hpbGRyZW4uc2xpY2UobGltaXQpLmZvckVhY2goY2hpbGQgPT4gdGhpcy5yZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25CZWZvcmVOb2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyhlbCwgcGh4Vmlld3BvcnRUb3AsIHBoeFZpZXdwb3J0Qm90dG9tKVxuICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJhZGRlZFwiLCBlbClcbiAgICAgICAgICByZXR1cm4gZWxcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlQWRkZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSl7IHRoaXMubWF5YmVSZU9yZGVyU3RyZWFtKGVsKSB9XG5cbiAgICAgICAgICAvLyBoYWNrIHRvIGZpeCBTYWZhcmkgaGFuZGxpbmcgb2YgaW1nIHNyY3NldCBhbmQgdmlkZW8gdGFnc1xuICAgICAgICAgIGlmKGVsIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCAmJiBlbC5zcmNzZXQpe1xuICAgICAgICAgICAgZWwuc3Jjc2V0ID0gZWwuc3Jjc2V0XG4gICAgICAgICAgfSBlbHNlIGlmKGVsIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCAmJiBlbC5hdXRvcGxheSl7XG4gICAgICAgICAgICBlbC5wbGF5KClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoRE9NLmlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKSl7XG4gICAgICAgICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQgPSBlbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpKXtcbiAgICAgICAgICAgIHRyYWNrZWRJbnB1dHMucHVzaChlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICAgICAgICBpZigoRE9NLmlzUGh4Q2hpbGQoZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwpKSB8fCBET00uaXNQaHhTdGlja3koZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwucGFyZW50Tm9kZSkpe1xuICAgICAgICAgICAgdGhpcy50cmFja0FmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkZWQucHVzaChlbClcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlRGlzY2FyZGVkOiAoZWwpID0+IHRoaXMub25Ob2RlRGlzY2FyZGVkKGVsKSxcbiAgICAgICAgb25CZWZvcmVOb2RlRGlzY2FyZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9QUlVORSkgIT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICAgICAgaWYoZWwucGFyZW50RWxlbWVudCAhPT0gbnVsbCAmJiBlbC5pZCAmJlxuICAgICAgICAgICAgRE9NLmlzUGh4VXBkYXRlKGVsLnBhcmVudEVsZW1lbnQsIHBoeFVwZGF0ZSwgW1BIWF9TVFJFQU0sIFwiYXBwZW5kXCIsIFwicHJlcGVuZFwiXSkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHRoaXMubWF5YmVQZW5kaW5nUmVtb3ZlKGVsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyhlbCkpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgb25FbFVwZGF0ZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIGlmKERPTS5pc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCkpe1xuICAgICAgICAgICAgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gZWxcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlcy5wdXNoKGVsKVxuICAgICAgICAgIHRoaXMubWF5YmVSZU9yZGVyU3RyZWFtKGVsKVxuICAgICAgICB9LFxuICAgICAgICBvbkJlZm9yZUVsVXBkYXRlZDogKGZyb21FbCwgdG9FbCkgPT4ge1xuICAgICAgICAgIERPTS5jbGVhbkNoaWxkTm9kZXModG9FbCwgcGh4VXBkYXRlKVxuICAgICAgICAgIGlmKHRoaXMuc2tpcENJRFNpYmxpbmcodG9FbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKERPTS5pc1BoeFN0aWNreShmcm9tRWwpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZihET00uaXNJZ25vcmVkKGZyb21FbCwgcGh4VXBkYXRlKSB8fCAoZnJvbUVsLmZvcm0gJiYgZnJvbUVsLmZvcm0uaXNTYW1lTm9kZShleHRlcm5hbEZvcm1UcmlnZ2VyZWQpKSl7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00ubWVyZ2VBdHRycyhmcm9tRWwsIHRvRWwsIHtpc0lnbm9yZWQ6IHRydWV9KVxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKGZyb21FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKGZyb21FbC50eXBlID09PSBcIm51bWJlclwiICYmIChmcm9tRWwudmFsaWRpdHkgJiYgZnJvbUVsLnZhbGlkaXR5LmJhZElucHV0KSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYoIURPTS5zeW5jUGVuZGluZ1JlZihmcm9tRWwsIHRvRWwsIGRpc2FibGVXaXRoKSl7XG4gICAgICAgICAgICBpZihET00uaXNVcGxvYWRJbnB1dChmcm9tRWwpKXtcbiAgICAgICAgICAgICAgdGhpcy50cmFja0JlZm9yZShcInVwZGF0ZWRcIiwgZnJvbUVsLCB0b0VsKVxuICAgICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBuZXN0ZWQgdmlldyBoYW5kbGluZ1xuICAgICAgICAgIGlmKERPTS5pc1BoeENoaWxkKHRvRWwpKXtcbiAgICAgICAgICAgIGxldCBwcmV2U2Vzc2lvbiA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pXG4gICAgICAgICAgICBET00ubWVyZ2VBdHRycyhmcm9tRWwsIHRvRWwsIHtleGNsdWRlOiBbUEhYX1NUQVRJQ119KVxuICAgICAgICAgICAgaWYocHJldlNlc3Npb24gIT09IFwiXCIpeyBmcm9tRWwuc2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OLCBwcmV2U2Vzc2lvbikgfVxuICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCwgdGhpcy5yb290SUQpXG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlucHV0IGhhbmRsaW5nXG4gICAgICAgICAgRE9NLmNvcHlQcml2YXRlcyh0b0VsLCBmcm9tRWwpXG5cbiAgICAgICAgICBsZXQgaXNGb2N1c2VkRm9ybUVsID0gZm9jdXNlZCAmJiBmcm9tRWwuaXNTYW1lTm9kZShmb2N1c2VkKSAmJiBET00uaXNGb3JtSW5wdXQoZnJvbUVsKVxuICAgICAgICAgIGlmKGlzRm9jdXNlZEZvcm1FbCAmJiBmcm9tRWwudHlwZSAhPT0gXCJoaWRkZW5cIil7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00ubWVyZ2VGb2N1c2VkSW5wdXQoZnJvbUVsLCB0b0VsKVxuICAgICAgICAgICAgRE9NLnN5bmNBdHRyc1RvUHJvcHMoZnJvbUVsKVxuICAgICAgICAgICAgdXBkYXRlcy5wdXNoKGZyb21FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgdHJhY2tlZElucHV0cy5wdXNoKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZihET00uaXNQaHhVcGRhdGUodG9FbCwgcGh4VXBkYXRlLCBbXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICAgICAgICAgIGFwcGVuZFByZXBlbmRVcGRhdGVzLnB1c2gobmV3IERPTVBvc3RNb3JwaFJlc3RvcmVyKGZyb21FbCwgdG9FbCwgdG9FbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyh0b0VsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pXG4gICAgICAgICAgICBET00uc3luY0F0dHJzVG9Qcm9wcyh0b0VsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyh0b0VsKVxuICAgICAgICAgICAgaWYodG9FbC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpKXtcbiAgICAgICAgICAgICAgdHJhY2tlZElucHV0cy5wdXNoKHRvRWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaWYobGl2ZVNvY2tldC5pc0RlYnVnRW5hYmxlZCgpKXsgZGV0ZWN0RHVwbGljYXRlSWRzKCkgfVxuXG4gICAgaWYoYXBwZW5kUHJlcGVuZFVwZGF0ZXMubGVuZ3RoID4gMCl7XG4gICAgICBsaXZlU29ja2V0LnRpbWUoXCJwb3N0LW1vcnBoIGFwcGVuZC9wcmVwZW5kIHJlc3RvcmF0aW9uXCIsICgpID0+IHtcbiAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMuZm9yRWFjaCh1cGRhdGUgPT4gdXBkYXRlLnBlcmZvcm0oKSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdHJhY2tlZElucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIERPTS5tYXliZUhpZGVGZWVkYmFjayh0YXJnZXRDb250YWluZXIsIGlucHV0LCBwaHhGZWVkYmFja0ZvcilcbiAgICB9KVxuXG4gICAgbGl2ZVNvY2tldC5zaWxlbmNlRXZlbnRzKCgpID0+IERPTS5yZXN0b3JlRm9jdXMoZm9jdXNlZCwgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCkpXG4gICAgRE9NLmRpc3BhdGNoRXZlbnQoZG9jdW1lbnQsIFwicGh4OnVwZGF0ZVwiKVxuICAgIGFkZGVkLmZvckVhY2goZWwgPT4gdGhpcy50cmFja0FmdGVyKFwiYWRkZWRcIiwgZWwpKVxuICAgIHVwZGF0ZXMuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsKSlcblxuICAgIHRoaXMudHJhbnNpdGlvblBlbmRpbmdSZW1vdmVzKClcblxuICAgIGlmKGV4dGVybmFsRm9ybVRyaWdnZXJlZCl7XG4gICAgICBsaXZlU29ja2V0LnVubG9hZCgpXG4gICAgICBleHRlcm5hbEZvcm1UcmlnZ2VyZWQuc3VibWl0KClcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIG9uTm9kZURpc2NhcmRlZChlbCl7XG4gICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICBpZihET00uaXNQaHhDaGlsZChlbCkgfHwgRE9NLmlzUGh4U3RpY2t5KGVsKSl7IHRoaXMubGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoZWwpIH1cbiAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJkaXNjYXJkZWRcIiwgZWwpXG4gIH1cblxuICBtYXliZVBlbmRpbmdSZW1vdmUobm9kZSl7XG4gICAgaWYobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUodGhpcy5waHhSZW1vdmUpICE9PSBudWxsKXtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92ZXMucHVzaChub2RlKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KGNoaWxkKXtcbiAgICBpZighdGhpcy5tYXliZVBlbmRpbmdSZW1vdmUoY2hpbGQpKXtcbiAgICAgIGNoaWxkLnJlbW92ZSgpXG4gICAgICB0aGlzLm9uTm9kZURpc2NhcmRlZChjaGlsZClcbiAgICB9XG4gIH1cblxuICBnZXRTdHJlYW1JbnNlcnQoZWwpe1xuICAgIGxldCBpbnNlcnQgPSBlbC5pZCA/IHRoaXMuc3RyZWFtSW5zZXJ0c1tlbC5pZF0gOiB7fVxuICAgIHJldHVybiBpbnNlcnQgfHwge31cbiAgfVxuXG4gIG1heWJlUmVPcmRlclN0cmVhbShlbCl7XG4gICAgbGV0IHtyZWYsIHN0cmVhbUF0LCBsaW1pdH0gPSB0aGlzLmdldFN0cmVhbUluc2VydChlbClcbiAgICBpZihzdHJlYW1BdCA9PT0gdW5kZWZpbmVkKXsgcmV0dXJuIH1cblxuICAgIC8vIHdlIG5lZWQgdG8gdGhlIFBIWF9TVFJFQU1fUkVGIGhlcmUgYXMgd2VsbCBhcyBhZGRDaGlsZCBpcyBpbnZva2VkIG9ubHkgZm9yIHBhcmVudHNcbiAgICBET00ucHV0U3RpY2t5KGVsLCBQSFhfU1RSRUFNX1JFRiwgZWwgPT4gZWwuc2V0QXR0cmlidXRlKFBIWF9TVFJFQU1fUkVGLCByZWYpKVxuXG4gICAgaWYoc3RyZWFtQXQgPT09IDApe1xuICAgICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIGVsLnBhcmVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpXG4gICAgfSBlbHNlIGlmKHN0cmVhbUF0ID4gMCl7XG4gICAgICBsZXQgY2hpbGRyZW4gPSBBcnJheS5mcm9tKGVsLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4pXG4gICAgICBsZXQgb2xkSW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKGVsKVxuICAgICAgaWYoc3RyZWFtQXQgPj0gY2hpbGRyZW4ubGVuZ3RoIC0gMSl7XG4gICAgICAgIGVsLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgc2libGluZyA9IGNoaWxkcmVuW3N0cmVhbUF0XVxuICAgICAgICBpZihvbGRJbmRleCA+IHN0cmVhbUF0KXtcbiAgICAgICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgc2libGluZylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgc2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0cmFuc2l0aW9uUGVuZGluZ1JlbW92ZXMoKXtcbiAgICBsZXQge3BlbmRpbmdSZW1vdmVzLCBsaXZlU29ja2V0fSA9IHRoaXNcbiAgICBpZihwZW5kaW5nUmVtb3Zlcy5sZW5ndGggPiAwKXtcbiAgICAgIGxpdmVTb2NrZXQudHJhbnNpdGlvblJlbW92ZXMocGVuZGluZ1JlbW92ZXMpXG4gICAgICBsaXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBwZW5kaW5nUmVtb3Zlcy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBET00uZmlyc3RQaHhDaGlsZChlbClcbiAgICAgICAgICBpZihjaGlsZCl7IGxpdmVTb2NrZXQuZGVzdHJveVZpZXdCeUVsKGNoaWxkKSB9XG4gICAgICAgICAgZWwucmVtb3ZlKClcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy50cmFja0FmdGVyKFwidHJhbnNpdGlvbnNEaXNjYXJkZWRcIiwgcGVuZGluZ1JlbW92ZXMpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGlzQ0lEUGF0Y2goKXsgcmV0dXJuIHRoaXMuY2lkUGF0Y2ggfVxuXG4gIHNraXBDSURTaWJsaW5nKGVsKXtcbiAgICByZXR1cm4gZWwubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfU0tJUCkgIT09IG51bGxcbiAgfVxuXG4gIHRhcmdldENJRENvbnRhaW5lcihodG1sKXtcbiAgICBpZighdGhpcy5pc0NJRFBhdGNoKCkpeyByZXR1cm4gfVxuICAgIGxldCBbZmlyc3QsIC4uLnJlc3RdID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmNvbnRhaW5lciwgdGhpcy50YXJnZXRDSUQpXG4gICAgaWYocmVzdC5sZW5ndGggPT09IDAgJiYgRE9NLmNoaWxkTm9kZUxlbmd0aChodG1sKSA9PT0gMSl7XG4gICAgICByZXR1cm4gZmlyc3RcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpcnN0ICYmIGZpcnN0LnBhcmVudE5vZGVcbiAgICB9XG4gIH1cblxuICAvLyBidWlsZHMgSFRNTCBmb3IgbW9ycGhkb20gcGF0Y2hcbiAgLy8gLSBmb3IgZnVsbCBwYXRjaGVzIG9mIExpdmVWaWV3IG9yIGEgY29tcG9uZW50IHdpdGggYSBzaW5nbGVcbiAgLy8gICByb290IG5vZGUsIHNpbXBseSByZXR1cm5zIHRoZSBIVE1MXG4gIC8vIC0gZm9yIHBhdGNoZXMgb2YgYSBjb21wb25lbnQgd2l0aCBtdWx0aXBsZSByb290IG5vZGVzLCB0aGVcbiAgLy8gICBwYXJlbnQgbm9kZSBiZWNvbWVzIHRoZSB0YXJnZXQgY29udGFpbmVyIGFuZCBub24tY29tcG9uZW50XG4gIC8vICAgc2libGluZ3MgYXJlIG1hcmtlZCBhcyBza2lwLlxuICBidWlsZERpZmZIVE1MKGNvbnRhaW5lciwgaHRtbCwgcGh4VXBkYXRlLCB0YXJnZXRDb250YWluZXIpe1xuICAgIGxldCBpc0NJRFBhdGNoID0gdGhpcy5pc0NJRFBhdGNoKClcbiAgICBsZXQgaXNDSURXaXRoU2luZ2xlUm9vdCA9IGlzQ0lEUGF0Y2ggJiYgdGFyZ2V0Q29udGFpbmVyLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSA9PT0gdGhpcy50YXJnZXRDSUQudG9TdHJpbmcoKVxuICAgIGlmKCFpc0NJRFBhdGNoIHx8IGlzQ0lEV2l0aFNpbmdsZVJvb3Qpe1xuICAgICAgcmV0dXJuIGh0bWxcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29tcG9uZW50IHBhdGNoIHdpdGggbXVsdGlwbGUgQ0lEIHJvb3RzXG4gICAgICBsZXQgZGlmZkNvbnRhaW5lciA9IG51bGxcbiAgICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgICAgZGlmZkNvbnRhaW5lciA9IERPTS5jbG9uZU5vZGUodGFyZ2V0Q29udGFpbmVyKVxuICAgICAgbGV0IFtmaXJzdENvbXBvbmVudCwgLi4ucmVzdF0gPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KGRpZmZDb250YWluZXIsIHRoaXMudGFyZ2V0Q0lEKVxuICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgICAgcmVzdC5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKVxuICAgICAgQXJyYXkuZnJvbShkaWZmQ29udGFpbmVyLmNoaWxkTm9kZXMpLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICAvLyB3ZSBjYW4gb25seSBza2lwIHRyYWNrYWJsZSBub2RlcyB3aXRoIGFuIElEXG4gICAgICAgIGlmKGNoaWxkLmlkICYmIGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiBjaGlsZC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkgIT09IHRoaXMudGFyZ2V0Q0lELnRvU3RyaW5nKCkpe1xuICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShQSFhfU0tJUCwgXCJcIilcbiAgICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSBcIlwiXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBBcnJheS5mcm9tKHRlbXBsYXRlLmNvbnRlbnQuY2hpbGROb2RlcykuZm9yRWFjaChlbCA9PiBkaWZmQ29udGFpbmVyLmluc2VydEJlZm9yZShlbCwgZmlyc3RDb21wb25lbnQpKVxuICAgICAgZmlyc3RDb21wb25lbnQucmVtb3ZlKClcbiAgICAgIHJldHVybiBkaWZmQ29udGFpbmVyLm91dGVySFRNTFxuICAgIH1cbiAgfVxuXG4gIGluZGV4T2YocGFyZW50LCBjaGlsZCl7IHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbikuaW5kZXhPZihjaGlsZCkgfVxufVxuIiwgImltcG9ydCB7XG4gIENPTVBPTkVOVFMsXG4gIERZTkFNSUNTLFxuICBURU1QTEFURVMsXG4gIEVWRU5UUyxcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX1NLSVAsXG4gIFJFUExZLFxuICBTVEFUSUMsXG4gIFRJVExFLFxuICBTVFJFQU0sXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGlzT2JqZWN0LFxuICBsb2dFcnJvcixcbiAgaXNDaWQsXG59IGZyb20gXCIuL3V0aWxzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZWQge1xuICBzdGF0aWMgZXh0cmFjdChkaWZmKXtcbiAgICBsZXQge1tSRVBMWV06IHJlcGx5LCBbRVZFTlRTXTogZXZlbnRzLCBbVElUTEVdOiB0aXRsZX0gPSBkaWZmXG4gICAgZGVsZXRlIGRpZmZbUkVQTFldXG4gICAgZGVsZXRlIGRpZmZbRVZFTlRTXVxuICAgIGRlbGV0ZSBkaWZmW1RJVExFXVxuICAgIHJldHVybiB7ZGlmZiwgdGl0bGUsIHJlcGx5OiByZXBseSB8fCBudWxsLCBldmVudHM6IGV2ZW50cyB8fCBbXX1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXdJZCwgcmVuZGVyZWQpe1xuICAgIHRoaXMudmlld0lkID0gdmlld0lkXG4gICAgdGhpcy5yZW5kZXJlZCA9IHt9XG4gICAgdGhpcy5tZXJnZURpZmYocmVuZGVyZWQpXG4gIH1cblxuICBwYXJlbnRWaWV3SWQoKXsgcmV0dXJuIHRoaXMudmlld0lkIH1cblxuICB0b1N0cmluZyhvbmx5Q2lkcyl7XG4gICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVUb1N0cmluZyh0aGlzLnJlbmRlcmVkLCB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdLCBvbmx5Q2lkcylcbiAgICByZXR1cm4gW3N0ciwgc3RyZWFtc11cbiAgfVxuXG4gIHJlY3Vyc2l2ZVRvU3RyaW5nKHJlbmRlcmVkLCBjb21wb25lbnRzID0gcmVuZGVyZWRbQ09NUE9ORU5UU10sIG9ubHlDaWRzKXtcbiAgICBvbmx5Q2lkcyA9IG9ubHlDaWRzID8gbmV3IFNldChvbmx5Q2lkcykgOiBudWxsXG4gICAgbGV0IG91dHB1dCA9IHtidWZmZXI6IFwiXCIsIGNvbXBvbmVudHM6IGNvbXBvbmVudHMsIG9ubHlDaWRzOiBvbmx5Q2lkcywgc3RyZWFtczogbmV3IFNldCgpfVxuICAgIHRoaXMudG9PdXRwdXRCdWZmZXIocmVuZGVyZWQsIG51bGwsIG91dHB1dClcbiAgICByZXR1cm4gW291dHB1dC5idWZmZXIsIG91dHB1dC5zdHJlYW1zXVxuICB9XG5cbiAgY29tcG9uZW50Q0lEcyhkaWZmKXsgcmV0dXJuIE9iamVjdC5rZXlzKGRpZmZbQ09NUE9ORU5UU10gfHwge30pLm1hcChpID0+IHBhcnNlSW50KGkpKSB9XG5cbiAgaXNDb21wb25lbnRPbmx5RGlmZihkaWZmKXtcbiAgICBpZighZGlmZltDT01QT05FTlRTXSl7IHJldHVybiBmYWxzZSB9XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGRpZmYpLmxlbmd0aCA9PT0gMVxuICB9XG5cbiAgZ2V0Q29tcG9uZW50KGRpZmYsIGNpZCl7IHJldHVybiBkaWZmW0NPTVBPTkVOVFNdW2NpZF0gfVxuXG4gIG1lcmdlRGlmZihkaWZmKXtcbiAgICBsZXQgbmV3YyA9IGRpZmZbQ09NUE9ORU5UU11cbiAgICBsZXQgY2FjaGUgPSB7fVxuICAgIGRlbGV0ZSBkaWZmW0NPTVBPTkVOVFNdXG4gICAgdGhpcy5yZW5kZXJlZCA9IHRoaXMubXV0YWJsZU1lcmdlKHRoaXMucmVuZGVyZWQsIGRpZmYpXG4gICAgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSA9IHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10gfHwge31cblxuICAgIGlmKG5ld2Mpe1xuICAgICAgbGV0IG9sZGMgPSB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdXG5cbiAgICAgIGZvcihsZXQgY2lkIGluIG5ld2Mpe1xuICAgICAgICBuZXdjW2NpZF0gPSB0aGlzLmNhY2hlZEZpbmRDb21wb25lbnQoY2lkLCBuZXdjW2NpZF0sIG9sZGMsIG5ld2MsIGNhY2hlKVxuICAgICAgfVxuXG4gICAgICBmb3IobGV0IGNpZCBpbiBuZXdjKXsgb2xkY1tjaWRdID0gbmV3Y1tjaWRdIH1cbiAgICAgIGRpZmZbQ09NUE9ORU5UU10gPSBuZXdjXG4gICAgfVxuICB9XG5cbiAgY2FjaGVkRmluZENvbXBvbmVudChjaWQsIGNkaWZmLCBvbGRjLCBuZXdjLCBjYWNoZSl7XG4gICAgaWYoY2FjaGVbY2lkXSl7XG4gICAgICByZXR1cm4gY2FjaGVbY2lkXVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbmRpZmYsIHN0YXQsIHNjaWQgPSBjZGlmZltTVEFUSUNdXG5cbiAgICAgIGlmKGlzQ2lkKHNjaWQpKXtcbiAgICAgICAgbGV0IHRkaWZmXG5cbiAgICAgICAgaWYoc2NpZCA+IDApe1xuICAgICAgICAgIHRkaWZmID0gdGhpcy5jYWNoZWRGaW5kQ29tcG9uZW50KHNjaWQsIG5ld2Nbc2NpZF0sIG9sZGMsIG5ld2MsIGNhY2hlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRkaWZmID0gb2xkY1stc2NpZF1cbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXQgPSB0ZGlmZltTVEFUSUNdXG4gICAgICAgIG5kaWZmID0gdGhpcy5jbG9uZU1lcmdlKHRkaWZmLCBjZGlmZilcbiAgICAgICAgbmRpZmZbU1RBVElDXSA9IHN0YXRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5kaWZmID0gY2RpZmZbU1RBVElDXSAhPT0gdW5kZWZpbmVkID8gY2RpZmYgOiB0aGlzLmNsb25lTWVyZ2Uob2xkY1tjaWRdIHx8IHt9LCBjZGlmZilcbiAgICAgIH1cblxuICAgICAgY2FjaGVbY2lkXSA9IG5kaWZmXG4gICAgICByZXR1cm4gbmRpZmZcbiAgICB9XG4gIH1cblxuICBtdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGlmKHNvdXJjZVtTVEFUSUNdICE9PSB1bmRlZmluZWQpe1xuICAgICAgcmV0dXJuIHNvdXJjZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvTXV0YWJsZU1lcmdlKHRhcmdldCwgc291cmNlKVxuICAgICAgcmV0dXJuIHRhcmdldFxuICAgIH1cbiAgfVxuXG4gIGRvTXV0YWJsZU1lcmdlKHRhcmdldCwgc291cmNlKXtcbiAgICBmb3IobGV0IGtleSBpbiBzb3VyY2Upe1xuICAgICAgbGV0IHZhbCA9IHNvdXJjZVtrZXldXG4gICAgICBsZXQgdGFyZ2V0VmFsID0gdGFyZ2V0W2tleV1cbiAgICAgIGxldCBpc09ialZhbCA9IGlzT2JqZWN0KHZhbClcbiAgICAgIGlmKGlzT2JqVmFsICYmIHZhbFtTVEFUSUNdID09PSB1bmRlZmluZWQgJiYgaXNPYmplY3QodGFyZ2V0VmFsKSl7XG4gICAgICAgIHRoaXMuZG9NdXRhYmxlTWVyZ2UodGFyZ2V0VmFsLCB2YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHZhbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb25lTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGxldCBtZXJnZWQgPSB7Li4udGFyZ2V0LCAuLi5zb3VyY2V9XG4gICAgZm9yKGxldCBrZXkgaW4gbWVyZ2VkKXtcbiAgICAgIGxldCB2YWwgPSBzb3VyY2Vba2V5XVxuICAgICAgbGV0IHRhcmdldFZhbCA9IHRhcmdldFtrZXldXG4gICAgICBpZihpc09iamVjdCh2YWwpICYmIHZhbFtTVEFUSUNdID09PSB1bmRlZmluZWQgJiYgaXNPYmplY3QodGFyZ2V0VmFsKSl7XG4gICAgICAgIG1lcmdlZFtrZXldID0gdGhpcy5jbG9uZU1lcmdlKHRhcmdldFZhbCwgdmFsKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkXG4gIH1cblxuICBjb21wb25lbnRUb1N0cmluZyhjaWQpe1xuICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlQ0lEVG9TdHJpbmcodGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSwgY2lkKVxuICAgIHJldHVybiBbc3RyLCBzdHJlYW1zXVxuICB9XG5cbiAgcHJ1bmVDSURzKGNpZHMpe1xuICAgIGNpZHMuZm9yRWFjaChjaWQgPT4gZGVsZXRlIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11bY2lkXSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBnZXQoKXsgcmV0dXJuIHRoaXMucmVuZGVyZWQgfVxuXG4gIGlzTmV3RmluZ2VycHJpbnQoZGlmZiA9IHt9KXsgcmV0dXJuICEhZGlmZltTVEFUSUNdIH1cblxuICB0ZW1wbGF0ZVN0YXRpYyhwYXJ0LCB0ZW1wbGF0ZXMpe1xuICAgIGlmKHR5cGVvZiAocGFydCkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZXNbcGFydF1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnRcbiAgICB9XG4gIH1cblxuICB0b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGlmKHJlbmRlcmVkW0RZTkFNSUNTXSl7IHJldHVybiB0aGlzLmNvbXByZWhlbnNpb25Ub0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpIH1cbiAgICBsZXQge1tTVEFUSUNdOiBzdGF0aWNzfSA9IHJlbmRlcmVkXG4gICAgc3RhdGljcyA9IHRoaXMudGVtcGxhdGVTdGF0aWMoc3RhdGljcywgdGVtcGxhdGVzKVxuXG4gICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzWzBdXG4gICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIocmVuZGVyZWRbaSAtIDFdLCB0ZW1wbGF0ZXMsIG91dHB1dClcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1tpXVxuICAgIH1cbiAgfVxuXG4gIGNvbXByZWhlbnNpb25Ub0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGxldCB7W0RZTkFNSUNTXTogZHluYW1pY3MsIFtTVEFUSUNdOiBzdGF0aWNzLCBbU1RSRUFNXTogc3RyZWFtfSA9IHJlbmRlcmVkXG4gICAgbGV0IFtfcmVmLCBfaW5zZXJ0cywgZGVsZXRlSWRzLCByZXNldF0gPSBzdHJlYW0gfHwgW251bGwsIHt9LCBbXSwgbnVsbF1cbiAgICBzdGF0aWNzID0gdGhpcy50ZW1wbGF0ZVN0YXRpYyhzdGF0aWNzLCB0ZW1wbGF0ZXMpXG4gICAgbGV0IGNvbXBUZW1wbGF0ZXMgPSB0ZW1wbGF0ZXMgfHwgcmVuZGVyZWRbVEVNUExBVEVTXVxuICAgIGZvcihsZXQgZCA9IDA7IGQgPCBkeW5hbWljcy5sZW5ndGg7IGQrKyl7XG4gICAgICBsZXQgZHluYW1pYyA9IGR5bmFtaWNzW2RdXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbMF1cbiAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCBzdGF0aWNzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgdGhpcy5keW5hbWljVG9CdWZmZXIoZHluYW1pY1tpIC0gMV0sIGNvbXBUZW1wbGF0ZXMsIG91dHB1dClcbiAgICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzW2ldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoc3RyZWFtICE9PSB1bmRlZmluZWQgJiYgKHJlbmRlcmVkW0RZTkFNSUNTXS5sZW5ndGggPiAwIHx8IGRlbGV0ZUlkcy5sZW5ndGggPiAwIHx8IHJlc2V0KSl7XG4gICAgICBkZWxldGUgcmVuZGVyZWRbU1RSRUFNXVxuICAgICAgb3V0cHV0LnN0cmVhbXMuYWRkKHN0cmVhbSlcbiAgICB9XG4gIH1cblxuICBkeW5hbWljVG9CdWZmZXIocmVuZGVyZWQsIHRlbXBsYXRlcywgb3V0cHV0KXtcbiAgICBpZih0eXBlb2YgKHJlbmRlcmVkKSA9PT0gXCJudW1iZXJcIil7XG4gICAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZUNJRFRvU3RyaW5nKG91dHB1dC5jb21wb25lbnRzLCByZW5kZXJlZCwgb3V0cHV0Lm9ubHlDaWRzKVxuICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdHJcbiAgICAgIG91dHB1dC5zdHJlYW1zID0gbmV3IFNldChbLi4ub3V0cHV0LnN0cmVhbXMsIC4uLnN0cmVhbXNdKVxuICAgIH0gZWxzZSBpZihpc09iamVjdChyZW5kZXJlZCkpe1xuICAgICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpXG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5idWZmZXIgKz0gcmVuZGVyZWRcbiAgICB9XG4gIH1cblxuICByZWN1cnNpdmVDSURUb1N0cmluZyhjb21wb25lbnRzLCBjaWQsIG9ubHlDaWRzKXtcbiAgICBsZXQgY29tcG9uZW50ID0gY29tcG9uZW50c1tjaWRdIHx8IGxvZ0Vycm9yKGBubyBjb21wb25lbnQgZm9yIENJRCAke2NpZH1gLCBjb21wb25lbnRzKVxuICAgIGxldCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKVxuICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZVRvU3RyaW5nKGNvbXBvbmVudCwgY29tcG9uZW50cywgb25seUNpZHMpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIGxldCBjb250YWluZXIgPSB0ZW1wbGF0ZS5jb250ZW50XG4gICAgbGV0IHNraXAgPSBvbmx5Q2lkcyAmJiAhb25seUNpZHMuaGFzKGNpZClcblxuICAgIGxldCBbaGFzQ2hpbGROb2RlcywgaGFzQ2hpbGRDb21wb25lbnRzXSA9XG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZE5vZGVzKS5yZWR1Y2UoKFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c10sIGNoaWxkLCBpKSA9PiB7XG4gICAgICAgIGlmKGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSl7XG4gICAgICAgICAgaWYoY2hpbGQuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKXtcbiAgICAgICAgICAgIHJldHVybiBbaGFzTm9kZXMsIHRydWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5ULCBjaWQpXG4gICAgICAgICAgaWYoIWNoaWxkLmlkKXsgY2hpbGQuaWQgPSBgJHt0aGlzLnBhcmVudFZpZXdJZCgpfS0ke2NpZH0tJHtpfWAgfVxuICAgICAgICAgIGlmKHNraXApe1xuICAgICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9TS0lQLCBcIlwiKVxuICAgICAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gW3RydWUsIGhhc0NvbXBvbmVudHNdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYoY2hpbGQubm9kZVZhbHVlLnRyaW0oKSAhPT0gXCJcIil7XG4gICAgICAgICAgICBsb2dFcnJvcihcIm9ubHkgSFRNTCBlbGVtZW50IHRhZ3MgYXJlIGFsbG93ZWQgYXQgdGhlIHJvb3Qgb2YgY29tcG9uZW50cy5cXG5cXG5cIiArXG4gICAgICAgICAgICAgIGBnb3Q6IFwiJHtjaGlsZC5ub2RlVmFsdWUudHJpbSgpfVwiXFxuXFxuYCArXG4gICAgICAgICAgICAgIFwid2l0aGluOlxcblwiLCB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgICAgICAgY2hpbGQucmVwbGFjZVdpdGgodGhpcy5jcmVhdGVTcGFuKGNoaWxkLm5vZGVWYWx1ZSwgY2lkKSlcbiAgICAgICAgICAgIHJldHVybiBbdHJ1ZSwgaGFzQ29tcG9uZW50c11cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hpbGQucmVtb3ZlKClcbiAgICAgICAgICAgIHJldHVybiBbaGFzTm9kZXMsIGhhc0NvbXBvbmVudHNdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBbZmFsc2UsIGZhbHNlXSlcblxuICAgIGlmKCFoYXNDaGlsZE5vZGVzICYmICFoYXNDaGlsZENvbXBvbmVudHMpe1xuICAgICAgbG9nRXJyb3IoXCJleHBlY3RlZCBhdCBsZWFzdCBvbmUgSFRNTCBlbGVtZW50IHRhZyBpbnNpZGUgYSBjb21wb25lbnQsIGJ1dCB0aGUgY29tcG9uZW50IGlzIGVtcHR5OlxcblwiLFxuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgcmV0dXJuIFt0aGlzLmNyZWF0ZVNwYW4oXCJcIiwgY2lkKS5vdXRlckhUTUwsIHN0cmVhbXNdXG4gICAgfSBlbHNlIGlmKCFoYXNDaGlsZE5vZGVzICYmIGhhc0NoaWxkQ29tcG9uZW50cyl7XG4gICAgICBsb2dFcnJvcihcImV4cGVjdGVkIGF0IGxlYXN0IG9uZSBIVE1MIGVsZW1lbnQgdGFnIGRpcmVjdGx5IGluc2lkZSBhIGNvbXBvbmVudCwgYnV0IG9ubHkgc3ViY29tcG9uZW50cyB3ZXJlIGZvdW5kLiBBIGNvbXBvbmVudCBtdXN0IHJlbmRlciBhdCBsZWFzdCBvbmUgSFRNTCB0YWcgZGlyZWN0bHkgaW5zaWRlIGl0c2VsZi5cIixcbiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MLnRyaW0oKSlcbiAgICAgIHJldHVybiBbdGVtcGxhdGUuaW5uZXJIVE1MLCBzdHJlYW1zXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW3RlbXBsYXRlLmlubmVySFRNTCwgc3RyZWFtc11cbiAgICB9XG4gIH1cblxuICBjcmVhdGVTcGFuKHRleHQsIGNpZCl7XG4gICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKVxuICAgIHNwYW4uaW5uZXJUZXh0ID0gdGV4dFxuICAgIHNwYW4uc2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQsIGNpZClcbiAgICByZXR1cm4gc3BhblxuICB9XG59XG4iLCAibGV0IHZpZXdIb29rSUQgPSAxXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3SG9vayB7XG4gIHN0YXRpYyBtYWtlSUQoKXsgcmV0dXJuIHZpZXdIb29rSUQrKyB9XG4gIHN0YXRpYyBlbGVtZW50SUQoZWwpeyByZXR1cm4gZWwucGh4SG9va0lkIH1cblxuICBjb25zdHJ1Y3Rvcih2aWV3LCBlbCwgY2FsbGJhY2tzKXtcbiAgICB0aGlzLl9fdmlldyA9IHZpZXdcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSB2aWV3LmxpdmVTb2NrZXRcbiAgICB0aGlzLl9fY2FsbGJhY2tzID0gY2FsbGJhY2tzXG4gICAgdGhpcy5fX2xpc3RlbmVycyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgdGhpcy5lbCA9IGVsXG4gICAgdGhpcy5lbC5waHhIb29rSWQgPSB0aGlzLmNvbnN0cnVjdG9yLm1ha2VJRCgpXG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5fX2NhbGxiYWNrcyl7IHRoaXNba2V5XSA9IHRoaXMuX19jYWxsYmFja3Nba2V5XSB9XG4gIH1cblxuICBfX21vdW50ZWQoKXsgdGhpcy5tb3VudGVkICYmIHRoaXMubW91bnRlZCgpIH1cbiAgX191cGRhdGVkKCl7IHRoaXMudXBkYXRlZCAmJiB0aGlzLnVwZGF0ZWQoKSB9XG4gIF9fYmVmb3JlVXBkYXRlKCl7IHRoaXMuYmVmb3JlVXBkYXRlICYmIHRoaXMuYmVmb3JlVXBkYXRlKCkgfVxuICBfX2Rlc3Ryb3llZCgpeyB0aGlzLmRlc3Ryb3llZCAmJiB0aGlzLmRlc3Ryb3llZCgpIH1cbiAgX19yZWNvbm5lY3RlZCgpe1xuICAgIGlmKHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCl7XG4gICAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5yZWNvbm5lY3RlZCAmJiB0aGlzLnJlY29ubmVjdGVkKClcbiAgICB9XG4gIH1cbiAgX19kaXNjb25uZWN0ZWQoKXtcbiAgICB0aGlzLl9faXNEaXNjb25uZWN0ZWQgPSB0cnVlXG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgJiYgdGhpcy5kaXNjb25uZWN0ZWQoKVxuICB9XG5cbiAgcHVzaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LnB1c2hIb29rRXZlbnQodGhpcy5lbCwgbnVsbCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gIH1cblxuICBwdXNoRXZlbnRUbyhwaHhUYXJnZXQsIGV2ZW50LCBwYXlsb2FkID0ge30sIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICByZXR1cm4gdmlldy5wdXNoSG9va0V2ZW50KHRoaXMuZWwsIHRhcmdldEN0eCwgZXZlbnQsIHBheWxvYWQsIG9uUmVwbHkpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUV2ZW50KGV2ZW50LCBjYWxsYmFjayl7XG4gICAgbGV0IGNhbGxiYWNrUmVmID0gKGN1c3RvbUV2ZW50LCBieXBhc3MpID0+IGJ5cGFzcyA/IGV2ZW50IDogY2FsbGJhY2soY3VzdG9tRXZlbnQuZGV0YWlsKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmFkZChjYWxsYmFja1JlZilcbiAgICByZXR1cm4gY2FsbGJhY2tSZWZcbiAgfVxuXG4gIHJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKXtcbiAgICBsZXQgZXZlbnQgPSBjYWxsYmFja1JlZihudWxsLCB0cnVlKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGBwaHg6JHtldmVudH1gLCBjYWxsYmFja1JlZilcbiAgICB0aGlzLl9fbGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFja1JlZilcbiAgfVxuXG4gIHVwbG9hZChuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LmRpc3BhdGNoVXBsb2FkcyhuYW1lLCBmaWxlcylcbiAgfVxuXG4gIHVwbG9hZFRvKHBoeFRhcmdldCwgbmFtZSwgZmlsZXMpe1xuICAgIHJldHVybiB0aGlzLl9fdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgdmlldyA9PiB2aWV3LmRpc3BhdGNoVXBsb2FkcyhuYW1lLCBmaWxlcykpXG4gIH1cblxuICBfX2NsZWFudXBfXygpe1xuICAgIHRoaXMuX19saXN0ZW5lcnMuZm9yRWFjaChjYWxsYmFja1JlZiA9PiB0aGlzLnJlbW92ZUhhbmRsZUV2ZW50KGNhbGxiYWNrUmVmKSlcbiAgfVxufVxuIiwgImltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBBUklBIGZyb20gXCIuL2FyaWFcIlxuXG5sZXQgZm9jdXNTdGFjayA9IG51bGxcblxubGV0IEpTID0ge1xuICBleGVjKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBkZWZhdWx0cyl7XG4gICAgbGV0IFtkZWZhdWx0S2luZCwgZGVmYXVsdEFyZ3NdID0gZGVmYXVsdHMgfHwgW251bGwsIHtjYWxsYmFjazogZGVmYXVsdHMgJiYgZGVmYXVsdHMuY2FsbGJhY2t9XVxuICAgIGxldCBjb21tYW5kcyA9IHBoeEV2ZW50LmNoYXJBdCgwKSA9PT0gXCJbXCIgP1xuICAgICAgSlNPTi5wYXJzZShwaHhFdmVudCkgOiBbW2RlZmF1bHRLaW5kLCBkZWZhdWx0QXJnc11dXG5cblxuXG4gICAgY29tbWFuZHMuZm9yRWFjaCgoW2tpbmQsIGFyZ3NdKSA9PiB7XG4gICAgICBpZihraW5kID09PSBkZWZhdWx0S2luZCAmJiBkZWZhdWx0QXJncy5kYXRhKXtcbiAgICAgICAgYXJncy5kYXRhID0gT2JqZWN0LmFzc2lnbihhcmdzLmRhdGEgfHwge30sIGRlZmF1bHRBcmdzLmRhdGEpXG4gICAgICAgIGFyZ3MuY2FsbGJhY2sgPSBhcmdzLmNhbGxiYWNrIHx8IGRlZmF1bHRBcmdzLmNhbGxiYWNrXG4gICAgICB9XG4gICAgICB0aGlzLmZpbHRlclRvRWxzKHNvdXJjZUVsLCBhcmdzKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgdGhpc1tgZXhlY18ke2tpbmR9YF0oZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCBhcmdzKVxuICAgICAgfSlcbiAgICB9KVxuICB9LFxuXG4gIGlzVmlzaWJsZShlbCl7XG4gICAgcmV0dXJuICEhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCA+IDApXG4gIH0sXG5cbiAgLy8gcHJpdmF0ZVxuXG4gIC8vIGNvbW1hbmRzXG5cbiAgZXhlY19leGVjKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwgW2F0dHIsIHRvXSl7XG4gICAgbGV0IG5vZGVzID0gdG8gPyBET00uYWxsKGRvY3VtZW50LCB0bykgOiBbc291cmNlRWxdXG4gICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIGxldCBlbmNvZGVkSlMgPSBub2RlLmdldEF0dHJpYnV0ZShhdHRyKVxuICAgICAgaWYoIWVuY29kZWRKUyl7IHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHthdHRyfSB0byBjb250YWluIEpTIGNvbW1hbmQgb24gXCIke3RvfVwiYCkgfVxuICAgICAgdmlldy5saXZlU29ja2V0LmV4ZWNKUyhub2RlLCBlbmNvZGVkSlMsIGV2ZW50VHlwZSlcbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfZGlzcGF0Y2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7dG8sIGV2ZW50LCBkZXRhaWwsIGJ1YmJsZXN9KXtcbiAgICBkZXRhaWwgPSBkZXRhaWwgfHwge31cbiAgICBkZXRhaWwuZGlzcGF0Y2hlciA9IHNvdXJjZUVsXG4gICAgRE9NLmRpc3BhdGNoRXZlbnQoZWwsIGV2ZW50LCB7ZGV0YWlsLCBidWJibGVzfSlcbiAgfSxcblxuICBleGVjX3B1c2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCBhcmdzKXtcbiAgICBpZighdmlldy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cblxuICAgIGxldCB7ZXZlbnQsIGRhdGEsIHRhcmdldCwgcGFnZV9sb2FkaW5nLCBsb2FkaW5nLCB2YWx1ZSwgZGlzcGF0Y2hlciwgY2FsbGJhY2t9ID0gYXJnc1xuICAgIGxldCBwdXNoT3B0cyA9IHtsb2FkaW5nLCB2YWx1ZSwgdGFyZ2V0LCBwYWdlX2xvYWRpbmc6ICEhcGFnZV9sb2FkaW5nfVxuICAgIGxldCB0YXJnZXRTcmMgPSBldmVudFR5cGUgPT09IFwiY2hhbmdlXCIgJiYgZGlzcGF0Y2hlciA/IGRpc3BhdGNoZXIgOiBzb3VyY2VFbFxuICAgIGxldCBwaHhUYXJnZXQgPSB0YXJnZXQgfHwgdGFyZ2V0U3JjLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoXCJ0YXJnZXRcIikpIHx8IHRhcmdldFNyY1xuICAgIHZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh0YXJnZXRWaWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJjaGFuZ2VcIil7XG4gICAgICAgIGxldCB7bmV3Q2lkLCBfdGFyZ2V0fSA9IGFyZ3NcbiAgICAgICAgX3RhcmdldCA9IF90YXJnZXQgfHwgKERPTS5pc0Zvcm1JbnB1dChzb3VyY2VFbCkgPyBzb3VyY2VFbC5uYW1lIDogdW5kZWZpbmVkKVxuICAgICAgICBpZihfdGFyZ2V0KXsgcHVzaE9wdHMuX3RhcmdldCA9IF90YXJnZXQgfVxuICAgICAgICB0YXJnZXRWaWV3LnB1c2hJbnB1dChzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBuZXdDaWQsIGV2ZW50IHx8IHBoeEV2ZW50LCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9IGVsc2UgaWYoZXZlbnRUeXBlID09PSBcInN1Ym1pdFwiKXtcbiAgICAgICAgbGV0IHtzdWJtaXR0ZXJ9ID0gYXJnc1xuICAgICAgICB0YXJnZXRWaWV3LnN1Ym1pdEZvcm0oc291cmNlRWwsIHRhcmdldEN0eCwgZXZlbnQgfHwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgcHVzaE9wdHMsIGNhbGxiYWNrKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0Vmlldy5wdXNoRXZlbnQoZXZlbnRUeXBlLCBzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBldmVudCB8fCBwaHhFdmVudCwgZGF0YSwgcHVzaE9wdHMsIGNhbGxiYWNrKVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgZXhlY19uYXZpZ2F0ZShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtocmVmLCByZXBsYWNlfSl7XG4gICAgdmlldy5saXZlU29ja2V0Lmhpc3RvcnlSZWRpcmVjdChocmVmLCByZXBsYWNlID8gXCJyZXBsYWNlXCIgOiBcInB1c2hcIilcbiAgfSxcblxuICBleGVjX3BhdGNoKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2hyZWYsIHJlcGxhY2V9KXtcbiAgICB2aWV3LmxpdmVTb2NrZXQucHVzaEhpc3RvcnlQYXRjaChocmVmLCByZXBsYWNlID8gXCJyZXBsYWNlXCIgOiBcInB1c2hcIiwgc291cmNlRWwpXG4gIH0sXG5cbiAgZXhlY19mb2N1cyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gQVJJQS5hdHRlbXB0Rm9jdXMoZWwpKVxuICB9LFxuXG4gIGV4ZWNfZm9jdXNfZmlyc3QoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IEFSSUEuZm9jdXNGaXJzdEludGVyYWN0aXZlKGVsKSB8fCBBUklBLmZvY3VzRmlyc3QoZWwpKVxuICB9LFxuXG4gIGV4ZWNfcHVzaF9mb2N1cyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gZm9jdXNTdGFjayA9IGVsIHx8IHNvdXJjZUVsKVxuICB9LFxuXG4gIGV4ZWNfcG9wX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZihmb2N1c1N0YWNrKXsgZm9jdXNTdGFjay5mb2N1cygpIH1cbiAgICAgIGZvY3VzU3RhY2sgPSBudWxsXG4gICAgfSlcbiAgfSxcblxuICBleGVjX2FkZF9jbGFzcyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtuYW1lcywgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBuYW1lcywgW10sIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY19yZW1vdmVfY2xhc3MoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7bmFtZXMsIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIG5hbWVzLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdHJhbnNpdGlvbihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHt0aW1lLCB0cmFuc2l0aW9ufSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBbXSwgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3RvZ2dsZShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCBpbnMsIG91dHMsIHRpbWV9KXtcbiAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBpbnMsIG91dHMsIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19zaG93KGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIHRyYW5zaXRpb24sIHRpbWV9KXtcbiAgICB0aGlzLnNob3coZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSlcbiAgfSxcblxuICBleGVjX2hpZGUoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuaGlkZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfc2V0X2F0dHIoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7YXR0cjogW2F0dHIsIHZhbF19KXtcbiAgICB0aGlzLnNldE9yUmVtb3ZlQXR0cnMoZWwsIFtbYXR0ciwgdmFsXV0sIFtdKVxuICB9LFxuXG4gIGV4ZWNfcmVtb3ZlX2F0dHIoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7YXR0cn0pe1xuICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW10sIFthdHRyXSlcbiAgfSxcblxuICAvLyB1dGlscyBmb3IgY29tbWFuZHNcblxuICBzaG93KGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpe1xuICAgIGlmKCF0aGlzLmlzVmlzaWJsZShlbCkpe1xuICAgICAgdGhpcy50b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgbnVsbCwgdGltZSlcbiAgICB9XG4gIH0sXG5cbiAgaGlkZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKXtcbiAgICBpZih0aGlzLmlzVmlzaWJsZShlbCkpe1xuICAgICAgdGhpcy50b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgbnVsbCwgdHJhbnNpdGlvbiwgdGltZSlcbiAgICB9XG4gIH0sXG5cbiAgdG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIGlucywgb3V0cywgdGltZSl7XG4gICAgbGV0IFtpbkNsYXNzZXMsIGluU3RhcnRDbGFzc2VzLCBpbkVuZENsYXNzZXNdID0gaW5zIHx8IFtbXSwgW10sIFtdXVxuICAgIGxldCBbb3V0Q2xhc3Nlcywgb3V0U3RhcnRDbGFzc2VzLCBvdXRFbmRDbGFzc2VzXSA9IG91dHMgfHwgW1tdLCBbXSwgW11dXG4gICAgaWYoaW5DbGFzc2VzLmxlbmd0aCA+IDAgfHwgb3V0Q2xhc3Nlcy5sZW5ndGggPiAwKXtcbiAgICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRTdGFydENsYXNzZXMsIGluQ2xhc3Nlcy5jb25jYXQoaW5TdGFydENsYXNzZXMpLmNvbmNhdChpbkVuZENsYXNzZXMpKVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dENsYXNzZXMsIFtdKVxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0RW5kQ2xhc3Nlcywgb3V0U3RhcnRDbGFzc2VzKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtc3RhcnRcIikpXG4gICAgICAgIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBvdXRDbGFzc2VzLmNvbmNhdChvdXRFbmRDbGFzc2VzKSlcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIilcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLWVuZFwiKSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJyZW1vdmVcIil7IHJldHVybiB9XG4gICAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpblN0YXJ0Q2xhc3Nlcywgb3V0Q2xhc3Nlcy5jb25jYXQob3V0U3RhcnRDbGFzc2VzKS5jb25jYXQob3V0RW5kQ2xhc3NlcykpXG4gICAgICAgICAgbGV0IHN0aWNreURpc3BsYXkgPSBkaXNwbGF5IHx8IHRoaXMuZGVmYXVsdERpc3BsYXkoZWwpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gc3RpY2t5RGlzcGxheSlcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpbkNsYXNzZXMsIFtdKVxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgaW5FbmRDbGFzc2VzLCBpblN0YXJ0Q2xhc3NlcykpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LXN0YXJ0XCIpKVxuICAgICAgICB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgaW5DbGFzc2VzLmNvbmNhdChpbkVuZENsYXNzZXMpKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZih0aGlzLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpoaWRlLXN0YXJ0XCIpKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1zdGFydFwiKSlcbiAgICAgICAgICBsZXQgc3RpY2t5RGlzcGxheSA9IGRpc3BsYXkgfHwgdGhpcy5kZWZhdWx0RGlzcGxheShlbClcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBzdGlja3lEaXNwbGF5KVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBhZGRPclJlbW92ZUNsYXNzZXMoZWwsIGFkZHMsIHJlbW92ZXMsIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpe1xuICAgIGxldCBbdHJhbnNpdGlvbl9ydW4sIHRyYW5zaXRpb25fc3RhcnQsIHRyYW5zaXRpb25fZW5kXSA9IHRyYW5zaXRpb24gfHwgW1tdLCBbXSwgW11dXG4gICAgaWYodHJhbnNpdGlvbl9ydW4ubGVuZ3RoID4gMCl7XG4gICAgICBsZXQgb25TdGFydCA9ICgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCB0cmFuc2l0aW9uX3N0YXJ0LmNvbmNhdCh0cmFuc2l0aW9uX3J1biksIFtdKVxuICAgICAgbGV0IG9uRG9uZSA9ICgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBhZGRzLmNvbmNhdCh0cmFuc2l0aW9uX2VuZCksIHJlbW92ZXMuY29uY2F0KHRyYW5zaXRpb25fcnVuKS5jb25jYXQodHJhbnNpdGlvbl9zdGFydCkpXG4gICAgICByZXR1cm4gdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgICB9XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBsZXQgW3ByZXZBZGRzLCBwcmV2UmVtb3Zlc10gPSBET00uZ2V0U3RpY2t5KGVsLCBcImNsYXNzZXNcIiwgW1tdLCBbXV0pXG4gICAgICBsZXQga2VlcEFkZHMgPSBhZGRzLmZpbHRlcihuYW1lID0+IHByZXZBZGRzLmluZGV4T2YobmFtZSkgPCAwICYmICFlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpXG4gICAgICBsZXQga2VlcFJlbW92ZXMgPSByZW1vdmVzLmZpbHRlcihuYW1lID0+IHByZXZSZW1vdmVzLmluZGV4T2YobmFtZSkgPCAwICYmIGVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIGxldCBuZXdBZGRzID0gcHJldkFkZHMuZmlsdGVyKG5hbWUgPT4gcmVtb3Zlcy5pbmRleE9mKG5hbWUpIDwgMCkuY29uY2F0KGtlZXBBZGRzKVxuICAgICAgbGV0IG5ld1JlbW92ZXMgPSBwcmV2UmVtb3Zlcy5maWx0ZXIobmFtZSA9PiBhZGRzLmluZGV4T2YobmFtZSkgPCAwKS5jb25jYXQoa2VlcFJlbW92ZXMpXG5cbiAgICAgIERPTS5wdXRTdGlja3koZWwsIFwiY2xhc3Nlc1wiLCBjdXJyZW50RWwgPT4ge1xuICAgICAgICBjdXJyZW50RWwuY2xhc3NMaXN0LnJlbW92ZSguLi5uZXdSZW1vdmVzKVxuICAgICAgICBjdXJyZW50RWwuY2xhc3NMaXN0LmFkZCguLi5uZXdBZGRzKVxuICAgICAgICByZXR1cm4gW25ld0FkZHMsIG5ld1JlbW92ZXNdXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2V0T3JSZW1vdmVBdHRycyhlbCwgc2V0cywgcmVtb3Zlcyl7XG4gICAgbGV0IFtwcmV2U2V0cywgcHJldlJlbW92ZXNdID0gRE9NLmdldFN0aWNreShlbCwgXCJhdHRyc1wiLCBbW10sIFtdXSlcblxuICAgIGxldCBhbHRlcmVkQXR0cnMgPSBzZXRzLm1hcCgoW2F0dHIsIF92YWxdKSA9PiBhdHRyKS5jb25jYXQocmVtb3Zlcyk7XG4gICAgbGV0IG5ld1NldHMgPSBwcmV2U2V0cy5maWx0ZXIoKFthdHRyLCBfdmFsXSkgPT4gIWFsdGVyZWRBdHRycy5pbmNsdWRlcyhhdHRyKSkuY29uY2F0KHNldHMpO1xuICAgIGxldCBuZXdSZW1vdmVzID0gcHJldlJlbW92ZXMuZmlsdGVyKChhdHRyKSA9PiAhYWx0ZXJlZEF0dHJzLmluY2x1ZGVzKGF0dHIpKS5jb25jYXQocmVtb3Zlcyk7XG5cbiAgICBET00ucHV0U3RpY2t5KGVsLCBcImF0dHJzXCIsIGN1cnJlbnRFbCA9PiB7XG4gICAgICBuZXdSZW1vdmVzLmZvckVhY2goYXR0ciA9PiBjdXJyZW50RWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpKVxuICAgICAgbmV3U2V0cy5mb3JFYWNoKChbYXR0ciwgdmFsXSkgPT4gY3VycmVudEVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWwpKVxuICAgICAgcmV0dXJuIFtuZXdTZXRzLCBuZXdSZW1vdmVzXVxuICAgIH0pXG4gIH0sXG5cbiAgaGFzQWxsQ2xhc3NlcyhlbCwgY2xhc3Nlcyl7IHJldHVybiBjbGFzc2VzLmV2ZXJ5KG5hbWUgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKSB9LFxuXG4gIGlzVG9nZ2xlZE91dChlbCwgb3V0Q2xhc3Nlcyl7XG4gICAgcmV0dXJuICF0aGlzLmlzVmlzaWJsZShlbCkgfHwgdGhpcy5oYXNBbGxDbGFzc2VzKGVsLCBvdXRDbGFzc2VzKVxuICB9LFxuXG4gIGZpbHRlclRvRWxzKHNvdXJjZUVsLCB7dG99KXtcbiAgICByZXR1cm4gdG8gPyBET00uYWxsKGRvY3VtZW50LCB0bykgOiBbc291cmNlRWxdXG4gIH0sXG5cbiAgZGVmYXVsdERpc3BsYXkoZWwpe1xuICAgIHJldHVybiB7dHI6IFwidGFibGUtcm93XCIsIHRkOiBcInRhYmxlLWNlbGxcIn1bZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBcImJsb2NrXCJcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBKU1xuIiwgImltcG9ydCB7XG4gIEJFRk9SRV9VTkxPQURfTE9BREVSX1RJTUVPVVQsXG4gIENIRUNLQUJMRV9JTlBVVFMsXG4gIENPTlNFQ1VUSVZFX1JFTE9BRFMsXG4gIFBIWF9BVVRPX1JFQ09WRVIsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9DT05ORUNURURfQ0xBU1MsXG4gIFBIWF9ESVNBQkxFX1dJVEgsXG4gIFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSxcbiAgUEhYX0RJU0FCTEVELFxuICBQSFhfTE9BRElOR19DTEFTUyxcbiAgUEhYX0VWRU5UX0NMQVNTRVMsXG4gIFBIWF9FUlJPUl9DTEFTUyxcbiAgUEhYX0NMSUVOVF9FUlJPUl9DTEFTUyxcbiAgUEhYX1NFUlZFUl9FUlJPUl9DTEFTUyxcbiAgUEhYX0ZFRURCQUNLX0ZPUixcbiAgUEhYX0hBU19TVUJNSVRURUQsXG4gIFBIWF9IT09LLFxuICBQSFhfUEFHRV9MT0FESU5HLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfUFJPR1JFU1MsXG4gIFBIWF9SRUFET05MWSxcbiAgUEhYX1JFRixcbiAgUEhYX1JFRl9TUkMsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1RSQUNLX1NUQVRJQyxcbiAgUEhYX1RSQUNLX1VQTE9BRFMsXG4gIFBIWF9VUERBVEUsXG4gIFBIWF9VUExPQURfUkVGLFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX01BSU4sXG4gIFBIWF9NT1VOVEVELFxuICBQVVNIX1RJTUVPVVQsXG4gIFBIWF9WSUVXUE9SVF9UT1AsXG4gIFBIWF9WSUVXUE9SVF9CT1RUT00sXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb25lLFxuICBjbG9zZXN0UGh4QmluZGluZyxcbiAgaXNFbXB0eSxcbiAgaXNFcXVhbE9iaixcbiAgbG9nRXJyb3IsXG4gIG1heWJlLFxuICBpc0NpZCxcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgQnJvd3NlciBmcm9tIFwiLi9icm93c2VyXCJcbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBET01QYXRjaCBmcm9tIFwiLi9kb21fcGF0Y2hcIlxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBSZW5kZXJlZCBmcm9tIFwiLi9yZW5kZXJlZFwiXG5pbXBvcnQgVmlld0hvb2sgZnJvbSBcIi4vdmlld19ob29rXCJcbmltcG9ydCBKUyBmcm9tIFwiLi9qc1wiXG5cbmxldCBzZXJpYWxpemVGb3JtID0gKGZvcm0sIG1ldGFkYXRhLCBvbmx5TmFtZXMgPSBbXSkgPT4ge1xuICBsZXQge3N1Ym1pdHRlciwgLi4ubWV0YX0gPSBtZXRhZGF0YVxuXG4gIC8vIFRPRE86IFJlcGxhY2Ugd2l0aCBgbmV3IEZvcm1EYXRhKGZvcm0sIHN1Ym1pdHRlcilgIHdoZW4gc3VwcG9ydGVkIGJ5IGxhdGVzdCBicm93c2VycyxcbiAgLy8gICAgICAgYW5kIG1lbnRpb24gYGZvcm1kYXRhLXN1Ym1pdHRlci1wb2x5ZmlsbGAgaW4gdGhlIGRvY3MuXG4gIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKVxuXG4gIC8vIFRPRE86IFJlbW92ZSB3aGVuIEZvcm1EYXRhIGNvbnN0cnVjdG9yIHN1cHBvcnRzIHRoZSBzdWJtaXR0ZXIgYXJndW1lbnQuXG4gIGlmKHN1Ym1pdHRlciAmJiBzdWJtaXR0ZXIuaGFzQXR0cmlidXRlKFwibmFtZVwiKSAmJiBzdWJtaXR0ZXIuZm9ybSAmJiBzdWJtaXR0ZXIuZm9ybSA9PT0gZm9ybSl7XG4gICAgZm9ybURhdGEuYXBwZW5kKHN1Ym1pdHRlci5uYW1lLCBzdWJtaXR0ZXIudmFsdWUpXG4gIH1cblxuICBsZXQgdG9SZW1vdmUgPSBbXVxuXG4gIGZvcm1EYXRhLmZvckVhY2goKHZhbCwga2V5LCBfaW5kZXgpID0+IHtcbiAgICBpZih2YWwgaW5zdGFuY2VvZiBGaWxlKXsgdG9SZW1vdmUucHVzaChrZXkpIH1cbiAgfSlcblxuICAvLyBDbGVhbnVwIGFmdGVyIGJ1aWxkaW5nIGZpbGVEYXRhXG4gIHRvUmVtb3ZlLmZvckVhY2goa2V5ID0+IGZvcm1EYXRhLmRlbGV0ZShrZXkpKVxuXG4gIGxldCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKClcbiAgZm9yKGxldCBba2V5LCB2YWxdIG9mIGZvcm1EYXRhLmVudHJpZXMoKSl7XG4gICAgaWYob25seU5hbWVzLmxlbmd0aCA9PT0gMCB8fCBvbmx5TmFtZXMuaW5kZXhPZihrZXkpID49IDApe1xuICAgICAgcGFyYW1zLmFwcGVuZChrZXksIHZhbClcbiAgICB9XG4gIH1cbiAgZm9yKGxldCBtZXRhS2V5IGluIG1ldGEpeyBwYXJhbXMuYXBwZW5kKG1ldGFLZXksIG1ldGFbbWV0YUtleV0pIH1cblxuICByZXR1cm4gcGFyYW1zLnRvU3RyaW5nKClcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XG4gIGNvbnN0cnVjdG9yKGVsLCBsaXZlU29ja2V0LCBwYXJlbnRWaWV3LCBmbGFzaCwgbGl2ZVJlZmVyZXIpe1xuICAgIHRoaXMuaXNEZWFkID0gZmFsc2VcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG4gICAgdGhpcy5mbGFzaCA9IGZsYXNoXG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnRWaWV3XG4gICAgdGhpcy5yb290ID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcucm9vdCA6IHRoaXNcbiAgICB0aGlzLmVsID0gZWxcbiAgICB0aGlzLmlkID0gdGhpcy5lbC5pZFxuICAgIHRoaXMucmVmID0gMFxuICAgIHRoaXMuY2hpbGRKb2lucyA9IDBcbiAgICB0aGlzLmxvYWRlclRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0RpZmZzID0gW11cbiAgICB0aGlzLnBydW5pbmdDSURzID0gW11cbiAgICB0aGlzLnJlZGlyZWN0ID0gZmFsc2VcbiAgICB0aGlzLmhyZWYgPSBudWxsXG4gICAgdGhpcy5qb2luQ291bnQgPSB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmpvaW5Db3VudCAtIDEgOiAwXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IHRydWVcbiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlXG4gICAgdGhpcy5qb2luQ2FsbGJhY2sgPSBmdW5jdGlvbihvbkRvbmUpeyBvbkRvbmUgJiYgb25Eb25lKCkgfVxuICAgIHRoaXMuc3RvcENhbGxiYWNrID0gZnVuY3Rpb24oKXsgfVxuICAgIHRoaXMucGVuZGluZ0pvaW5PcHMgPSB0aGlzLnBhcmVudCA/IG51bGwgOiBbXVxuICAgIHRoaXMudmlld0hvb2tzID0ge31cbiAgICB0aGlzLnVwbG9hZGVycyA9IHt9XG4gICAgdGhpcy5mb3JtU3VibWl0cyA9IFtdXG4gICAgdGhpcy5jaGlsZHJlbiA9IHRoaXMucGFyZW50ID8gbnVsbCA6IHt9XG4gICAgdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdID0ge31cbiAgICB0aGlzLmNoYW5uZWwgPSB0aGlzLmxpdmVTb2NrZXQuY2hhbm5lbChgbHY6JHt0aGlzLmlkfWAsICgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlZGlyZWN0OiB0aGlzLnJlZGlyZWN0ID8gdGhpcy5ocmVmIDogdW5kZWZpbmVkLFxuICAgICAgICB1cmw6IHRoaXMucmVkaXJlY3QgPyB1bmRlZmluZWQgOiB0aGlzLmhyZWYgfHwgdW5kZWZpbmVkLFxuICAgICAgICBwYXJhbXM6IHRoaXMuY29ubmVjdFBhcmFtcyhsaXZlUmVmZXJlciksXG4gICAgICAgIHNlc3Npb246IHRoaXMuZ2V0U2Vzc2lvbigpLFxuICAgICAgICBzdGF0aWM6IHRoaXMuZ2V0U3RhdGljKCksXG4gICAgICAgIGZsYXNoOiB0aGlzLmZsYXNoLFxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzZXRIcmVmKGhyZWYpeyB0aGlzLmhyZWYgPSBocmVmIH1cblxuICBzZXRSZWRpcmVjdChocmVmKXtcbiAgICB0aGlzLnJlZGlyZWN0ID0gdHJ1ZVxuICAgIHRoaXMuaHJlZiA9IGhyZWZcbiAgfVxuXG4gIGlzTWFpbigpeyByZXR1cm4gdGhpcy5lbC5oYXNBdHRyaWJ1dGUoUEhYX01BSU4pIH1cblxuICBjb25uZWN0UGFyYW1zKGxpdmVSZWZlcmVyKXtcbiAgICBsZXQgcGFyYW1zID0gdGhpcy5saXZlU29ja2V0LnBhcmFtcyh0aGlzLmVsKVxuICAgIGxldCBtYW5pZmVzdCA9XG4gICAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9UUkFDS19TVEFUSUMpfV1gKVxuICAgICAgICAubWFwKG5vZGUgPT4gbm9kZS5zcmMgfHwgbm9kZS5ocmVmKS5maWx0ZXIodXJsID0+IHR5cGVvZiAodXJsKSA9PT0gXCJzdHJpbmdcIilcblxuICAgIGlmKG1hbmlmZXN0Lmxlbmd0aCA+IDApeyBwYXJhbXNbXCJfdHJhY2tfc3RhdGljXCJdID0gbWFuaWZlc3QgfVxuICAgIHBhcmFtc1tcIl9tb3VudHNcIl0gPSB0aGlzLmpvaW5Db3VudFxuICAgIHBhcmFtc1tcIl9saXZlX3JlZmVyZXJcIl0gPSBsaXZlUmVmZXJlclxuXG4gICAgcmV0dXJuIHBhcmFtc1xuICB9XG5cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuY2hhbm5lbC5jYW5QdXNoKCkgfVxuXG4gIGdldFNlc3Npb24oKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKSB9XG5cbiAgZ2V0U3RhdGljKCl7XG4gICAgbGV0IHZhbCA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9TVEFUSUMpXG4gICAgcmV0dXJuIHZhbCA9PT0gXCJcIiA/IG51bGwgOiB2YWxcbiAgfVxuXG4gIGRlc3Ryb3koY2FsbGJhY2sgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgdGhpcy5kZXN0cm95QWxsQ2hpbGRyZW4oKVxuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZVxuICAgIGRlbGV0ZSB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF1cbiAgICBpZih0aGlzLnBhcmVudCl7IGRlbGV0ZSB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5wYXJlbnQuaWRdW3RoaXMuaWRdIH1cbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICBsZXQgb25GaW5pc2hlZCA9ICgpID0+IHtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIGZvcihsZXQgaWQgaW4gdGhpcy52aWV3SG9va3Mpe1xuICAgICAgICB0aGlzLmRlc3Ryb3lIb29rKHRoaXMudmlld0hvb2tzW2lkXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBET00ubWFya1BoeENoaWxkRGVzdHJveWVkKHRoaXMuZWwpXG5cbiAgICB0aGlzLmxvZyhcImRlc3Ryb3llZFwiLCAoKSA9PiBbXCJ0aGUgY2hpbGQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBwYXJlbnRcIl0pXG4gICAgdGhpcy5jaGFubmVsLmxlYXZlKClcbiAgICAgIC5yZWNlaXZlKFwib2tcIiwgb25GaW5pc2hlZClcbiAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgb25GaW5pc2hlZClcbiAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCBvbkZpbmlzaGVkKVxuICB9XG5cbiAgc2V0Q29udGFpbmVyQ2xhc3NlcyguLi5jbGFzc2VzKXtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICBQSFhfQ09OTkVDVEVEX0NMQVNTLFxuICAgICAgUEhYX0xPQURJTkdfQ0xBU1MsXG4gICAgICBQSFhfRVJST1JfQ0xBU1MsXG4gICAgICBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTLFxuICAgICAgUEhYX1NFUlZFUl9FUlJPUl9DTEFTU1xuICAgIClcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoLi4uY2xhc3NlcylcbiAgfVxuXG4gIHNob3dMb2FkZXIodGltZW91dCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMubG9hZGVyVGltZXIpXG4gICAgaWYodGltZW91dCl7XG4gICAgICB0aGlzLmxvYWRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNob3dMb2FkZXIoKSwgdGltZW91dClcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7IHRoaXMudmlld0hvb2tzW2lkXS5fX2Rpc2Nvbm5lY3RlZCgpIH1cbiAgICAgIHRoaXMuc2V0Q29udGFpbmVyQ2xhc3NlcyhQSFhfTE9BRElOR19DTEFTUylcbiAgICB9XG4gIH1cblxuICBleGVjQWxsKGJpbmRpbmcpe1xuICAgIERPTS5hbGwodGhpcy5lbCwgYFske2JpbmRpbmd9XWAsIGVsID0+IHRoaXMubGl2ZVNvY2tldC5leGVjSlMoZWwsIGVsLmdldEF0dHJpYnV0ZShiaW5kaW5nKSkpXG4gIH1cblxuICBoaWRlTG9hZGVyKCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMubG9hZGVyVGltZXIpXG4gICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9DT05ORUNURURfQ0xBU1MpXG4gICAgdGhpcy5leGVjQWxsKHRoaXMuYmluZGluZyhcImNvbm5lY3RlZFwiKSlcbiAgfVxuXG4gIHRyaWdnZXJSZWNvbm5lY3RlZCgpe1xuICAgIGZvcihsZXQgaWQgaW4gdGhpcy52aWV3SG9va3MpeyB0aGlzLnZpZXdIb29rc1tpZF0uX19yZWNvbm5lY3RlZCgpIH1cbiAgfVxuXG4gIGxvZyhraW5kLCBtc2dDYWxsYmFjayl7XG4gICAgdGhpcy5saXZlU29ja2V0LmxvZyh0aGlzLCBraW5kLCBtc2dDYWxsYmFjaylcbiAgfVxuXG4gIHRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lID0gZnVuY3Rpb24oKXt9KXtcbiAgICB0aGlzLmxpdmVTb2NrZXQudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpXG4gIH1cblxuICB3aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgY2FsbGJhY2spe1xuICAgIGlmKHBoeFRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHBoeFRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpe1xuICAgICAgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5vd25lcihwaHhUYXJnZXQsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgcGh4VGFyZ2V0KSlcbiAgICB9XG5cbiAgICBpZihpc0NpZChwaHhUYXJnZXQpKXtcbiAgICAgIGxldCB0YXJnZXRzID0gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCBwaHhUYXJnZXQpXG4gICAgICBpZih0YXJnZXRzLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGxvZ0Vycm9yKGBubyBjb21wb25lbnQgZm91bmQgbWF0Y2hpbmcgcGh4LXRhcmdldCBvZiAke3BoeFRhcmdldH1gKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcywgcGFyc2VJbnQocGh4VGFyZ2V0KSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHRhcmdldHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocGh4VGFyZ2V0KSlcbiAgICAgIGlmKHRhcmdldHMubGVuZ3RoID09PSAwKXsgbG9nRXJyb3IoYG5vdGhpbmcgZm91bmQgbWF0Y2hpbmcgdGhlIHBoeC10YXJnZXQgc2VsZWN0b3IgXCIke3BoeFRhcmdldH1cImApIH1cbiAgICAgIHRhcmdldHMuZm9yRWFjaCh0YXJnZXQgPT4gdGhpcy5saXZlU29ja2V0Lm93bmVyKHRhcmdldCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCB0YXJnZXQpKSlcbiAgICB9XG4gIH1cblxuICBhcHBseURpZmYodHlwZSwgcmF3RGlmZiwgY2FsbGJhY2spe1xuICAgIHRoaXMubG9nKHR5cGUsICgpID0+IFtcIlwiLCBjbG9uZShyYXdEaWZmKV0pXG4gICAgbGV0IHtkaWZmLCByZXBseSwgZXZlbnRzLCB0aXRsZX0gPSBSZW5kZXJlZC5leHRyYWN0KHJhd0RpZmYpXG4gICAgY2FsbGJhY2soe2RpZmYsIHJlcGx5LCBldmVudHN9KVxuICAgIGlmKHRpdGxlKXsgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBET00ucHV0VGl0bGUodGl0bGUpKSB9XG4gIH1cblxuICBvbkpvaW4ocmVzcCl7XG4gICAgbGV0IHtyZW5kZXJlZCwgY29udGFpbmVyfSA9IHJlc3BcbiAgICBpZihjb250YWluZXIpe1xuICAgICAgbGV0IFt0YWcsIGF0dHJzXSA9IGNvbnRhaW5lclxuICAgICAgdGhpcy5lbCA9IERPTS5yZXBsYWNlUm9vdENvbnRhaW5lcih0aGlzLmVsLCB0YWcsIGF0dHJzKVxuICAgIH1cbiAgICB0aGlzLmNoaWxkSm9pbnMgPSAwXG4gICAgdGhpcy5qb2luUGVuZGluZyA9IHRydWVcbiAgICB0aGlzLmZsYXNoID0gbnVsbFxuXG4gICAgQnJvd3Nlci5kcm9wTG9jYWwodGhpcy5saXZlU29ja2V0LmxvY2FsU3RvcmFnZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCBDT05TRUNVVElWRV9SRUxPQURTKVxuICAgIHRoaXMuYXBwbHlEaWZmKFwibW91bnRcIiwgcmVuZGVyZWQsICh7ZGlmZiwgZXZlbnRzfSkgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJlZCA9IG5ldyBSZW5kZXJlZCh0aGlzLmlkLCBkaWZmKVxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKG51bGwsIFwiam9pblwiKVxuICAgICAgdGhpcy5kcm9wUGVuZGluZ1JlZnMoKVxuICAgICAgbGV0IGZvcm1zID0gdGhpcy5mb3Jtc0ZvclJlY292ZXJ5KGh0bWwpXG4gICAgICB0aGlzLmpvaW5Db3VudCsrXG5cbiAgICAgIGlmKGZvcm1zLmxlbmd0aCA+IDApe1xuICAgICAgICBmb3Jtcy5mb3JFYWNoKChbZm9ybSwgbmV3Rm9ybSwgbmV3Q2lkXSwgaSkgPT4ge1xuICAgICAgICAgIHRoaXMucHVzaEZvcm1SZWNvdmVyeShmb3JtLCBuZXdDaWQsIHJlc3AgPT4ge1xuICAgICAgICAgICAgaWYoaSA9PT0gZm9ybXMubGVuZ3RoIC0gMSl7XG4gICAgICAgICAgICAgIHRoaXMub25Kb2luQ29tcGxldGUocmVzcCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uSm9pbkNvbXBsZXRlKHJlc3AsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZHJvcFBlbmRpbmdSZWZzKCl7XG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske1BIWF9SRUZfU1JDfT1cIiR7dGhpcy5pZH1cIl1bJHtQSFhfUkVGfV1gLCBlbCA9PiB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGX1NSQylcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luQ29tcGxldGUoe2xpdmVfcGF0Y2h9LCBodG1sLCBzdHJlYW1zLCBldmVudHMpe1xuICAgIC8vIEluIG9yZGVyIHRvIHByb3ZpZGUgYSBiZXR0ZXIgZXhwZXJpZW5jZSwgd2Ugd2FudCB0byBqb2luXG4gICAgLy8gYWxsIExpdmVWaWV3cyBmaXJzdCBhbmQgb25seSB0aGVuIGFwcGx5IHRoZWlyIHBhdGNoZXMuXG4gICAgaWYodGhpcy5qb2luQ291bnQgPiAxIHx8ICh0aGlzLnBhcmVudCAmJiAhdGhpcy5wYXJlbnQuaXNKb2luUGVuZGluZygpKSl7XG4gICAgICByZXR1cm4gdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgfVxuXG4gICAgLy8gT25lIGRvd25zaWRlIG9mIHRoaXMgYXBwcm9hY2ggaXMgdGhhdCB3ZSBuZWVkIHRvIGZpbmQgcGh4Q2hpbGRyZW5cbiAgICAvLyBpbiB0aGUgaHRtbCBmcmFnbWVudCwgaW5zdGVhZCBvZiBkaXJlY3RseSBvbiB0aGUgRE9NLiBUaGUgZnJhZ21lbnRcbiAgICAvLyBhbHNvIGRvZXMgbm90IGluY2x1ZGUgUEhYX1NUQVRJQywgc28gd2UgbmVlZCB0byBjb3B5IGl0IG92ZXIgZnJvbVxuICAgIC8vIHRoZSBET00uXG4gICAgbGV0IG5ld0NoaWxkcmVuID0gRE9NLmZpbmRQaHhDaGlsZHJlbkluRnJhZ21lbnQoaHRtbCwgdGhpcy5pZCkuZmlsdGVyKHRvRWwgPT4ge1xuICAgICAgbGV0IGZyb21FbCA9IHRvRWwuaWQgJiYgdGhpcy5lbC5xdWVyeVNlbGVjdG9yKGBbaWQ9XCIke3RvRWwuaWR9XCJdYClcbiAgICAgIGxldCBwaHhTdGF0aWMgPSBmcm9tRWwgJiYgZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU1RBVElDKVxuICAgICAgaWYocGh4U3RhdGljKXsgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQywgcGh4U3RhdGljKSB9XG4gICAgICByZXR1cm4gdGhpcy5qb2luQ2hpbGQodG9FbClcbiAgICB9KVxuXG4gICAgaWYobmV3Q2hpbGRyZW4ubGVuZ3RoID09PSAwKXtcbiAgICAgIGlmKHRoaXMucGFyZW50KXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKV0pXG4gICAgICAgIHRoaXMucGFyZW50LmFja0pvaW4odGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKVxuICAgICAgICB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKV0pXG4gICAgfVxuICB9XG5cbiAgYXR0YWNoVHJ1ZURvY0VsKCl7XG4gICAgdGhpcy5lbCA9IERPTS5ieUlkKHRoaXMuaWQpXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQsIHRoaXMucm9vdC5pZClcbiAgfVxuXG4gIGV4ZWNOZXdNb3VudGVkKCl7XG4gICAgbGV0IHBoeFZpZXdwb3J0VG9wID0gdGhpcy5iaW5kaW5nKFBIWF9WSUVXUE9SVF9UT1ApXG4gICAgbGV0IHBoeFZpZXdwb3J0Qm90dG9tID0gdGhpcy5iaW5kaW5nKFBIWF9WSUVXUE9SVF9CT1RUT00pXG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7cGh4Vmlld3BvcnRUb3B9XSwgWyR7cGh4Vmlld3BvcnRCb3R0b219XWAsIGhvb2tFbCA9PiB7XG4gICAgICBET00ubWF5YmVBZGRQcml2YXRlSG9va3MoaG9va0VsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pXG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhob29rRWwpXG4gICAgfSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX0hPT0spfV0sIFtkYXRhLXBoeC0ke1BIWF9IT09LfV1gLCBob29rRWwgPT4ge1xuICAgICAgdGhpcy5tYXliZUFkZE5ld0hvb2soaG9va0VsKVxuICAgIH0pXG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9NT1VOVEVEKX1dYCwgZWwgPT4gdGhpcy5tYXliZU1vdW50ZWQoZWwpKVxuICB9XG5cbiAgYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKXtcbiAgICB0aGlzLmF0dGFjaFRydWVEb2NFbCgpXG4gICAgbGV0IHBhdGNoID0gbmV3IERPTVBhdGNoKHRoaXMsIHRoaXMuZWwsIHRoaXMuaWQsIGh0bWwsIHN0cmVhbXMsIG51bGwpXG4gICAgcGF0Y2gubWFya1BydW5hYmxlQ29udGVudEZvclJlbW92YWwoKVxuICAgIHRoaXMucGVyZm9ybVBhdGNoKHBhdGNoLCBmYWxzZSlcbiAgICB0aGlzLmpvaW5OZXdDaGlsZHJlbigpXG4gICAgdGhpcy5leGVjTmV3TW91bnRlZCgpXG5cbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gZmFsc2VcbiAgICB0aGlzLmxpdmVTb2NrZXQuZGlzcGF0Y2hFdmVudHMoZXZlbnRzKVxuICAgIHRoaXMuYXBwbHlQZW5kaW5nVXBkYXRlcygpXG5cbiAgICBpZihsaXZlX3BhdGNoKXtcbiAgICAgIGxldCB7a2luZCwgdG99ID0gbGl2ZV9wYXRjaFxuICAgICAgdGhpcy5saXZlU29ja2V0Lmhpc3RvcnlQYXRjaCh0bywga2luZClcbiAgICB9XG4gICAgdGhpcy5oaWRlTG9hZGVyKClcbiAgICBpZih0aGlzLmpvaW5Db3VudCA+IDEpeyB0aGlzLnRyaWdnZXJSZWNvbm5lY3RlZCgpIH1cbiAgICB0aGlzLnN0b3BDYWxsYmFjaygpXG4gIH1cblxuICB0cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhmcm9tRWwsIHRvRWwpe1xuICAgIHRoaXMubGl2ZVNvY2tldC50cmlnZ2VyRE9NKFwib25CZWZvcmVFbFVwZGF0ZWRcIiwgW2Zyb21FbCwgdG9FbF0pXG4gICAgbGV0IGhvb2sgPSB0aGlzLmdldEhvb2soZnJvbUVsKVxuICAgIGxldCBpc0lnbm9yZWQgPSBob29rICYmIERPTS5pc0lnbm9yZWQoZnJvbUVsLCB0aGlzLmJpbmRpbmcoUEhYX1VQREFURSkpXG4gICAgaWYoaG9vayAmJiAhZnJvbUVsLmlzRXF1YWxOb2RlKHRvRWwpICYmICEoaXNJZ25vcmVkICYmIGlzRXF1YWxPYmooZnJvbUVsLmRhdGFzZXQsIHRvRWwuZGF0YXNldCkpKXtcbiAgICAgIGhvb2suX19iZWZvcmVVcGRhdGUoKVxuICAgICAgcmV0dXJuIGhvb2tcbiAgICB9XG4gIH1cblxuICBtYXliZU1vdW50ZWQoZWwpe1xuICAgIGxldCBwaHhNb3VudGVkID0gZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfTU9VTlRFRCkpXG4gICAgbGV0IGhhc0JlZW5JbnZva2VkID0gcGh4TW91bnRlZCAmJiBET00ucHJpdmF0ZShlbCwgXCJtb3VudGVkXCIpXG4gICAgaWYocGh4TW91bnRlZCAmJiAhaGFzQmVlbkludm9rZWQpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKUyhlbCwgcGh4TW91bnRlZClcbiAgICAgIERPTS5wdXRQcml2YXRlKGVsLCBcIm1vdW50ZWRcIiwgdHJ1ZSlcbiAgICB9XG4gIH1cblxuICBtYXliZUFkZE5ld0hvb2soZWwsIGZvcmNlKXtcbiAgICBsZXQgbmV3SG9vayA9IHRoaXMuYWRkSG9vayhlbClcbiAgICBpZihuZXdIb29rKXsgbmV3SG9vay5fX21vdW50ZWQoKSB9XG4gIH1cblxuICBwZXJmb3JtUGF0Y2gocGF0Y2gsIHBydW5lQ2lkcyl7XG4gICAgbGV0IHJlbW92ZWRFbHMgPSBbXVxuICAgIGxldCBwaHhDaGlsZHJlbkFkZGVkID0gZmFsc2VcbiAgICBsZXQgdXBkYXRlZEhvb2tJZHMgPSBuZXcgU2V0KClcblxuICAgIHBhdGNoLmFmdGVyKFwiYWRkZWRcIiwgZWwgPT4ge1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRyaWdnZXJET00oXCJvbk5vZGVBZGRlZFwiLCBbZWxdKVxuICAgICAgdGhpcy5tYXliZUFkZE5ld0hvb2soZWwpXG4gICAgICBpZihlbC5nZXRBdHRyaWJ1dGUpeyB0aGlzLm1heWJlTW91bnRlZChlbCkgfVxuICAgIH0pXG5cbiAgICBwYXRjaC5hZnRlcihcInBoeENoaWxkQWRkZWRcIiwgZWwgPT4ge1xuICAgICAgaWYoRE9NLmlzUGh4U3RpY2t5KGVsKSl7XG4gICAgICAgIHRoaXMubGl2ZVNvY2tldC5qb2luUm9vdFZpZXdzKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBoeENoaWxkcmVuQWRkZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSlcblxuICAgIHBhdGNoLmJlZm9yZShcInVwZGF0ZWRcIiwgKGZyb21FbCwgdG9FbCkgPT4ge1xuICAgICAgbGV0IGhvb2sgPSB0aGlzLnRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGZyb21FbCwgdG9FbClcbiAgICAgIGlmKGhvb2speyB1cGRhdGVkSG9va0lkcy5hZGQoZnJvbUVsLmlkKSB9XG4gICAgfSlcblxuICAgIHBhdGNoLmFmdGVyKFwidXBkYXRlZFwiLCBlbCA9PiB7XG4gICAgICBpZih1cGRhdGVkSG9va0lkcy5oYXMoZWwuaWQpKXsgdGhpcy5nZXRIb29rKGVsKS5fX3VwZGF0ZWQoKSB9XG4gICAgfSlcblxuICAgIHBhdGNoLmFmdGVyKFwiZGlzY2FyZGVkXCIsIChlbCkgPT4ge1xuICAgICAgaWYoZWwubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKXsgcmVtb3ZlZEVscy5wdXNoKGVsKSB9XG4gICAgfSlcblxuICAgIHBhdGNoLmFmdGVyKFwidHJhbnNpdGlvbnNEaXNjYXJkZWRcIiwgZWxzID0+IHRoaXMuYWZ0ZXJFbGVtZW50c1JlbW92ZWQoZWxzLCBwcnVuZUNpZHMpKVxuICAgIHBhdGNoLnBlcmZvcm0oKVxuICAgIHRoaXMuYWZ0ZXJFbGVtZW50c1JlbW92ZWQocmVtb3ZlZEVscywgcHJ1bmVDaWRzKVxuXG4gICAgcmV0dXJuIHBoeENoaWxkcmVuQWRkZWRcbiAgfVxuXG4gIGFmdGVyRWxlbWVudHNSZW1vdmVkKGVsZW1lbnRzLCBwcnVuZUNpZHMpe1xuICAgIGxldCBkZXN0cm95ZWRDSURzID0gW11cbiAgICBlbGVtZW50cy5mb3JFYWNoKHBhcmVudCA9PiB7XG4gICAgICBsZXQgY29tcG9uZW50cyA9IERPTS5hbGwocGFyZW50LCBgWyR7UEhYX0NPTVBPTkVOVH1dYClcbiAgICAgIGxldCBob29rcyA9IERPTS5hbGwocGFyZW50LCBgWyR7dGhpcy5iaW5kaW5nKFBIWF9IT09LKX1dYClcbiAgICAgIGNvbXBvbmVudHMuY29uY2F0KHBhcmVudCkuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGxldCBjaWQgPSB0aGlzLmNvbXBvbmVudElEKGVsKVxuICAgICAgICBpZihpc0NpZChjaWQpICYmIGRlc3Ryb3llZENJRHMuaW5kZXhPZihjaWQpID09PSAtMSl7IGRlc3Ryb3llZENJRHMucHVzaChjaWQpIH1cbiAgICAgIH0pXG4gICAgICBob29rcy5jb25jYXQocGFyZW50KS5mb3JFYWNoKGhvb2tFbCA9PiB7XG4gICAgICAgIGxldCBob29rID0gdGhpcy5nZXRIb29rKGhvb2tFbClcbiAgICAgICAgaG9vayAmJiB0aGlzLmRlc3Ryb3lIb29rKGhvb2spXG4gICAgICB9KVxuICAgIH0pXG4gICAgLy8gV2Ugc2hvdWxkIG5vdCBwcnVuZUNpZHMgb24gam9pbnMuIE90aGVyd2lzZSwgaW4gY2FzZSBvZlxuICAgIC8vIHJlam9pbnMsIHdlIG1heSBub3RpZnkgY2lkcyB0aGF0IG5vIGxvbmdlciBiZWxvbmcgdG8gdGhlXG4gICAgLy8gY3VycmVudCBMaXZlVmlldyB0byBiZSByZW1vdmVkLlxuICAgIGlmKHBydW5lQ2lkcyl7XG4gICAgICB0aGlzLm1heWJlUHVzaENvbXBvbmVudHNEZXN0cm95ZWQoZGVzdHJveWVkQ0lEcylcbiAgICB9XG4gIH1cblxuICBqb2luTmV3Q2hpbGRyZW4oKXtcbiAgICBET00uZmluZFBoeENoaWxkcmVuKHRoaXMuZWwsIHRoaXMuaWQpLmZvckVhY2goZWwgPT4gdGhpcy5qb2luQ2hpbGQoZWwpKVxuICB9XG5cbiAgZ2V0Q2hpbGRCeUlkKGlkKXsgcmV0dXJuIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVtpZF0gfVxuXG4gIGdldERlc2NlbmRlbnRCeUVsKGVsKXtcbiAgICBpZihlbC5pZCA9PT0gdGhpcy5pZCl7XG4gICAgICByZXR1cm4gdGhpc1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbltlbC5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRCldW2VsLmlkXVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lEZXNjZW5kZW50KGlkKXtcbiAgICBmb3IobGV0IHBhcmVudElkIGluIHRoaXMucm9vdC5jaGlsZHJlbil7XG4gICAgICBmb3IobGV0IGNoaWxkSWQgaW4gdGhpcy5yb290LmNoaWxkcmVuW3BhcmVudElkXSl7XG4gICAgICAgIGlmKGNoaWxkSWQgPT09IGlkKXsgcmV0dXJuIHRoaXMucm9vdC5jaGlsZHJlbltwYXJlbnRJZF1bY2hpbGRJZF0uZGVzdHJveSgpIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBqb2luQ2hpbGQoZWwpe1xuICAgIGxldCBjaGlsZCA9IHRoaXMuZ2V0Q2hpbGRCeUlkKGVsLmlkKVxuICAgIGlmKCFjaGlsZCl7XG4gICAgICBsZXQgdmlldyA9IG5ldyBWaWV3KGVsLCB0aGlzLmxpdmVTb2NrZXQsIHRoaXMpXG4gICAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF1bdmlldy5pZF0gPSB2aWV3XG4gICAgICB2aWV3LmpvaW4oKVxuICAgICAgdGhpcy5jaGlsZEpvaW5zKytcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgaXNKb2luUGVuZGluZygpeyByZXR1cm4gdGhpcy5qb2luUGVuZGluZyB9XG5cbiAgYWNrSm9pbihfY2hpbGQpe1xuICAgIHRoaXMuY2hpbGRKb2lucy0tXG5cbiAgICBpZih0aGlzLmNoaWxkSm9pbnMgPT09IDApe1xuICAgICAgaWYodGhpcy5wYXJlbnQpe1xuICAgICAgICB0aGlzLnBhcmVudC5hY2tKb2luKHRoaXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkFsbENoaWxkSm9pbnNDb21wbGV0ZSgpe1xuICAgIHRoaXMuam9pbkNhbGxiYWNrKCgpID0+IHtcbiAgICAgIHRoaXMucGVuZGluZ0pvaW5PcHMuZm9yRWFjaCgoW3ZpZXcsIG9wXSkgPT4ge1xuICAgICAgICBpZighdmlldy5pc0Rlc3Ryb3llZCgpKXsgb3AoKSB9XG4gICAgICB9KVxuICAgICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IFtdXG4gICAgfSlcbiAgfVxuXG4gIHVwZGF0ZShkaWZmLCBldmVudHMpe1xuICAgIGlmKHRoaXMuaXNKb2luUGVuZGluZygpIHx8ICh0aGlzLmxpdmVTb2NrZXQuaGFzUGVuZGluZ0xpbmsoKSAmJiB0aGlzLnJvb3QuaXNNYWluKCkpKXtcbiAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdEaWZmcy5wdXNoKHtkaWZmLCBldmVudHN9KVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyZWQubWVyZ2VEaWZmKGRpZmYpXG4gICAgbGV0IHBoeENoaWxkcmVuQWRkZWQgPSBmYWxzZVxuXG4gICAgLy8gV2hlbiB0aGUgZGlmZiBvbmx5IGNvbnRhaW5zIGNvbXBvbmVudCBkaWZmcywgdGhlbiB3YWxrIGNvbXBvbmVudHNcbiAgICAvLyBhbmQgcGF0Y2ggb25seSB0aGUgcGFyZW50IGNvbXBvbmVudCBjb250YWluZXJzIGZvdW5kIGluIHRoZSBkaWZmLlxuICAgIC8vIE90aGVyd2lzZSwgcGF0Y2ggZW50aXJlIExWIGNvbnRhaW5lci5cbiAgICBpZih0aGlzLnJlbmRlcmVkLmlzQ29tcG9uZW50T25seURpZmYoZGlmZikpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRpbWUoXCJjb21wb25lbnQgcGF0Y2ggY29tcGxldGVcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgcGFyZW50Q2lkcyA9IERPTS5maW5kUGFyZW50Q0lEcyh0aGlzLmVsLCB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudENJRHMoZGlmZikpXG4gICAgICAgIHBhcmVudENpZHMuZm9yRWFjaChwYXJlbnRDSUQgPT4ge1xuICAgICAgICAgIGlmKHRoaXMuY29tcG9uZW50UGF0Y2godGhpcy5yZW5kZXJlZC5nZXRDb21wb25lbnQoZGlmZiwgcGFyZW50Q0lEKSwgcGFyZW50Q0lEKSl7IHBoeENoaWxkcmVuQWRkZWQgPSB0cnVlIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmKCFpc0VtcHR5KGRpZmYpKXtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC50aW1lKFwiZnVsbCBwYXRjaCBjb21wbGV0ZVwiLCAoKSA9PiB7XG4gICAgICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlckNvbnRhaW5lcihkaWZmLCBcInVwZGF0ZVwiKVxuICAgICAgICBsZXQgcGF0Y2ggPSBuZXcgRE9NUGF0Y2godGhpcywgdGhpcy5lbCwgdGhpcy5pZCwgaHRtbCwgc3RyZWFtcywgbnVsbClcbiAgICAgICAgcGh4Q2hpbGRyZW5BZGRlZCA9IHRoaXMucGVyZm9ybVBhdGNoKHBhdGNoLCB0cnVlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLmxpdmVTb2NrZXQuZGlzcGF0Y2hFdmVudHMoZXZlbnRzKVxuICAgIGlmKHBoeENoaWxkcmVuQWRkZWQpeyB0aGlzLmpvaW5OZXdDaGlsZHJlbigpIH1cbiAgfVxuXG4gIHJlbmRlckNvbnRhaW5lcihkaWZmLCBraW5kKXtcbiAgICByZXR1cm4gdGhpcy5saXZlU29ja2V0LnRpbWUoYHRvU3RyaW5nIGRpZmYgKCR7a2luZH0pYCwgKCkgPT4ge1xuICAgICAgbGV0IHRhZyA9IHRoaXMuZWwudGFnTmFtZVxuICAgICAgLy8gRG9uJ3Qgc2tpcCBhbnkgY29tcG9uZW50IGluIHRoZSBkaWZmIG5vciBhbnkgbWFya2VkIGFzIHBydW5lZFxuICAgICAgLy8gKGFzIHRoZXkgbWF5IGhhdmUgYmVlbiBhZGRlZCBiYWNrKVxuICAgICAgbGV0IGNpZHMgPSBkaWZmID8gdGhpcy5yZW5kZXJlZC5jb21wb25lbnRDSURzKGRpZmYpLmNvbmNhdCh0aGlzLnBydW5pbmdDSURzKSA6IG51bGxcbiAgICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlcmVkLnRvU3RyaW5nKGNpZHMpXG4gICAgICByZXR1cm4gW2A8JHt0YWd9PiR7aHRtbH08LyR7dGFnfT5gLCBzdHJlYW1zXVxuICAgIH0pXG4gIH1cblxuICBjb21wb25lbnRQYXRjaChkaWZmLCBjaWQpe1xuICAgIGlmKGlzRW1wdHkoZGlmZikpIHJldHVybiBmYWxzZVxuICAgIGxldCBbaHRtbCwgc3RyZWFtc10gPSB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudFRvU3RyaW5nKGNpZClcbiAgICBsZXQgcGF0Y2ggPSBuZXcgRE9NUGF0Y2godGhpcywgdGhpcy5lbCwgdGhpcy5pZCwgaHRtbCwgc3RyZWFtcywgY2lkKVxuICAgIGxldCBjaGlsZHJlbkFkZGVkID0gdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIHRydWUpXG4gICAgcmV0dXJuIGNoaWxkcmVuQWRkZWRcbiAgfVxuXG4gIGdldEhvb2soZWwpeyByZXR1cm4gdGhpcy52aWV3SG9va3NbVmlld0hvb2suZWxlbWVudElEKGVsKV0gfVxuXG4gIGFkZEhvb2soZWwpe1xuICAgIGlmKFZpZXdIb29rLmVsZW1lbnRJRChlbCkgfHwgIWVsLmdldEF0dHJpYnV0ZSl7IHJldHVybiB9XG4gICAgbGV0IGhvb2tOYW1lID0gZWwuZ2V0QXR0cmlidXRlKGBkYXRhLXBoeC0ke1BIWF9IT09LfWApIHx8IGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0hPT0spKVxuICAgIGlmKGhvb2tOYW1lICYmICF0aGlzLm93bnNFbGVtZW50KGVsKSl7IHJldHVybiB9XG4gICAgbGV0IGNhbGxiYWNrcyA9IHRoaXMubGl2ZVNvY2tldC5nZXRIb29rQ2FsbGJhY2tzKGhvb2tOYW1lKVxuXG4gICAgaWYoY2FsbGJhY2tzKXtcbiAgICAgIGlmKCFlbC5pZCl7IGxvZ0Vycm9yKGBubyBET00gSUQgZm9yIGhvb2sgXCIke2hvb2tOYW1lfVwiLiBIb29rcyByZXF1aXJlIGEgdW5pcXVlIElEIG9uIGVhY2ggZWxlbWVudC5gLCBlbCkgfVxuICAgICAgbGV0IGhvb2sgPSBuZXcgVmlld0hvb2sodGhpcywgZWwsIGNhbGxiYWNrcylcbiAgICAgIHRoaXMudmlld0hvb2tzW1ZpZXdIb29rLmVsZW1lbnRJRChob29rLmVsKV0gPSBob29rXG4gICAgICByZXR1cm4gaG9va1xuICAgIH0gZWxzZSBpZihob29rTmFtZSAhPT0gbnVsbCl7XG4gICAgICBsb2dFcnJvcihgdW5rbm93biBob29rIGZvdW5kIGZvciBcIiR7aG9va05hbWV9XCJgLCBlbClcbiAgICB9XG4gIH1cblxuICBkZXN0cm95SG9vayhob29rKXtcbiAgICBob29rLl9fZGVzdHJveWVkKClcbiAgICBob29rLl9fY2xlYW51cF9fKClcbiAgICBkZWxldGUgdGhpcy52aWV3SG9va3NbVmlld0hvb2suZWxlbWVudElEKGhvb2suZWwpXVxuICB9XG5cbiAgYXBwbHlQZW5kaW5nVXBkYXRlcygpe1xuICAgIHRoaXMucGVuZGluZ0RpZmZzLmZvckVhY2goKHtkaWZmLCBldmVudHN9KSA9PiB0aGlzLnVwZGF0ZShkaWZmLCBldmVudHMpKVxuICAgIHRoaXMucGVuZGluZ0RpZmZzID0gW11cbiAgICB0aGlzLmVhY2hDaGlsZChjaGlsZCA9PiBjaGlsZC5hcHBseVBlbmRpbmdVcGRhdGVzKCkpXG4gIH1cblxuICBlYWNoQ2hpbGQoY2FsbGJhY2spe1xuICAgIGxldCBjaGlsZHJlbiA9IHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXSB8fCB7fVxuICAgIGZvcihsZXQgaWQgaW4gY2hpbGRyZW4peyBjYWxsYmFjayh0aGlzLmdldENoaWxkQnlJZChpZCkpIH1cbiAgfVxuXG4gIG9uQ2hhbm5lbChldmVudCwgY2Ipe1xuICAgIHRoaXMubGl2ZVNvY2tldC5vbkNoYW5uZWwodGhpcy5jaGFubmVsLCBldmVudCwgcmVzcCA9PiB7XG4gICAgICBpZih0aGlzLmlzSm9pblBlbmRpbmcoKSl7XG4gICAgICAgIHRoaXMucm9vdC5wZW5kaW5nSm9pbk9wcy5wdXNoKFt0aGlzLCAoKSA9PiBjYihyZXNwKV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiBjYihyZXNwKSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYmluZENoYW5uZWwoKXtcbiAgICAvLyBUaGUgZGlmZiBldmVudCBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGUgcmVndWxhciB1cGRhdGUgb3BlcmF0aW9ucy5cbiAgICAvLyBBbGwgb3RoZXIgb3BlcmF0aW9ucyBhcmUgcXVldWVkIHRvIGJlIGFwcGxpZWQgb25seSBhZnRlciBqb2luLlxuICAgIHRoaXMubGl2ZVNvY2tldC5vbkNoYW5uZWwodGhpcy5jaGFubmVsLCBcImRpZmZcIiwgKHJhd0RpZmYpID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgdGhpcy5hcHBseURpZmYoXCJ1cGRhdGVcIiwgcmF3RGlmZiwgKHtkaWZmLCBldmVudHN9KSA9PiB0aGlzLnVwZGF0ZShkaWZmLCBldmVudHMpKVxuICAgICAgfSlcbiAgICB9KVxuICAgIHRoaXMub25DaGFubmVsKFwicmVkaXJlY3RcIiwgKHt0bywgZmxhc2h9KSA9PiB0aGlzLm9uUmVkaXJlY3Qoe3RvLCBmbGFzaH0pKVxuICAgIHRoaXMub25DaGFubmVsKFwibGl2ZV9wYXRjaFwiLCAocmVkaXIpID0+IHRoaXMub25MaXZlUGF0Y2gocmVkaXIpKVxuICAgIHRoaXMub25DaGFubmVsKFwibGl2ZV9yZWRpcmVjdFwiLCAocmVkaXIpID0+IHRoaXMub25MaXZlUmVkaXJlY3QocmVkaXIpKVxuICAgIHRoaXMuY2hhbm5lbC5vbkVycm9yKHJlYXNvbiA9PiB0aGlzLm9uRXJyb3IocmVhc29uKSlcbiAgICB0aGlzLmNoYW5uZWwub25DbG9zZShyZWFzb24gPT4gdGhpcy5vbkNsb3NlKHJlYXNvbikpXG4gIH1cblxuICBkZXN0cm95QWxsQ2hpbGRyZW4oKXsgdGhpcy5lYWNoQ2hpbGQoY2hpbGQgPT4gY2hpbGQuZGVzdHJveSgpKSB9XG5cbiAgb25MaXZlUmVkaXJlY3QocmVkaXIpe1xuICAgIGxldCB7dG8sIGtpbmQsIGZsYXNofSA9IHJlZGlyXG4gICAgbGV0IHVybCA9IHRoaXMuZXhwYW5kVVJMKHRvKVxuICAgIHRoaXMubGl2ZVNvY2tldC5oaXN0b3J5UmVkaXJlY3QodXJsLCBraW5kLCBmbGFzaClcbiAgfVxuXG4gIG9uTGl2ZVBhdGNoKHJlZGlyKXtcbiAgICBsZXQge3RvLCBraW5kfSA9IHJlZGlyXG4gICAgdGhpcy5ocmVmID0gdGhpcy5leHBhbmRVUkwodG8pXG4gICAgdGhpcy5saXZlU29ja2V0Lmhpc3RvcnlQYXRjaCh0bywga2luZClcbiAgfVxuXG4gIGV4cGFuZFVSTCh0byl7XG4gICAgcmV0dXJuIHRvLnN0YXJ0c1dpdGgoXCIvXCIpID8gYCR7d2luZG93LmxvY2F0aW9uLnByb3RvY29sfS8vJHt3aW5kb3cubG9jYXRpb24uaG9zdH0ke3RvfWAgOiB0b1xuICB9XG5cbiAgb25SZWRpcmVjdCh7dG8sIGZsYXNofSl7IHRoaXMubGl2ZVNvY2tldC5yZWRpcmVjdCh0bywgZmxhc2gpIH1cblxuICBpc0Rlc3Ryb3llZCgpeyByZXR1cm4gdGhpcy5kZXN0cm95ZWQgfVxuXG4gIGpvaW5EZWFkKCl7IHRoaXMuaXNEZWFkID0gdHJ1ZSB9XG5cbiAgam9pbihjYWxsYmFjayl7XG4gICAgdGhpcy5zaG93TG9hZGVyKHRoaXMubGl2ZVNvY2tldC5sb2FkZXJUaW1lb3V0KVxuICAgIHRoaXMuYmluZENoYW5uZWwoKVxuICAgIGlmKHRoaXMuaXNNYWluKCkpe1xuICAgICAgdGhpcy5zdG9wQ2FsbGJhY2sgPSB0aGlzLmxpdmVTb2NrZXQud2l0aFBhZ2VMb2FkaW5nKHt0bzogdGhpcy5ocmVmLCBraW5kOiBcImluaXRpYWxcIn0pXG4gICAgfVxuICAgIHRoaXMuam9pbkNhbGxiYWNrID0gKG9uRG9uZSkgPT4ge1xuICAgICAgb25Eb25lID0gb25Eb25lIHx8IGZ1bmN0aW9uKCl7fVxuICAgICAgY2FsbGJhY2sgPyBjYWxsYmFjayh0aGlzLmpvaW5Db3VudCwgb25Eb25lKSA6IG9uRG9uZSgpXG4gICAgfVxuICAgIHRoaXMubGl2ZVNvY2tldC53cmFwUHVzaCh0aGlzLCB7dGltZW91dDogZmFsc2V9LCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5jaGFubmVsLmpvaW4oKVxuICAgICAgICAucmVjZWl2ZShcIm9rXCIsIGRhdGEgPT4ge1xuICAgICAgICAgIGlmKCF0aGlzLmlzRGVzdHJveWVkKCkpe1xuICAgICAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4gdGhpcy5vbkpvaW4oZGF0YSkpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAucmVjZWl2ZShcImVycm9yXCIsIHJlc3AgPT4gIXRoaXMuaXNEZXN0cm95ZWQoKSAmJiB0aGlzLm9uSm9pbkVycm9yKHJlc3ApKVxuICAgICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4gIXRoaXMuaXNEZXN0cm95ZWQoKSAmJiB0aGlzLm9uSm9pbkVycm9yKHtyZWFzb246IFwidGltZW91dFwifSkpXG4gICAgfSlcbiAgfVxuXG4gIG9uSm9pbkVycm9yKHJlc3Ape1xuICAgIGlmKHJlc3AucmVhc29uID09PSBcInJlbG9hZFwiKXtcbiAgICAgIHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW2BmYWlsZWQgbW91bnQgd2l0aCAke3Jlc3Auc3RhdHVzfS4gRmFsbGluZyBiYWNrIHRvIHBhZ2UgcmVxdWVzdGAsIHJlc3BdKVxuICAgICAgcmV0dXJuIHRoaXMub25SZWRpcmVjdCh7dG86IHRoaXMuaHJlZn0pXG4gICAgfSBlbHNlIGlmKHJlc3AucmVhc29uID09PSBcInVuYXV0aG9yaXplZFwiIHx8IHJlc3AucmVhc29uID09PSBcInN0YWxlXCIpe1xuICAgICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ1bmF1dGhvcml6ZWQgbGl2ZV9yZWRpcmVjdC4gRmFsbGluZyBiYWNrIHRvIHBhZ2UgcmVxdWVzdFwiLCByZXNwXSlcbiAgICAgIHJldHVybiB0aGlzLm9uUmVkaXJlY3Qoe3RvOiB0aGlzLmhyZWZ9KVxuICAgIH1cbiAgICBpZihyZXNwLnJlZGlyZWN0IHx8IHJlc3AubGl2ZV9yZWRpcmVjdCl7XG4gICAgICB0aGlzLmpvaW5QZW5kaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuY2hhbm5lbC5sZWF2ZSgpXG4gICAgfVxuICAgIGlmKHJlc3AucmVkaXJlY3QpeyByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHJlc3AucmVkaXJlY3QpIH1cbiAgICBpZihyZXNwLmxpdmVfcmVkaXJlY3QpeyByZXR1cm4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICB0aGlzLmRpc3BsYXlFcnJvcihbUEhYX0xPQURJTkdfQ0xBU1MsIFBIWF9FUlJPUl9DTEFTUywgUEhYX1NFUlZFUl9FUlJPUl9DTEFTU10pXG4gICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ1bmFibGUgdG8gam9pblwiLCByZXNwXSlcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubGl2ZVNvY2tldC5yZWxvYWRXaXRoSml0dGVyKHRoaXMpIH1cbiAgfVxuXG4gIG9uQ2xvc2UocmVhc29uKXtcbiAgICBpZih0aGlzLmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHJlYXNvbiAhPT0gXCJsZWF2ZVwiKXtcbiAgICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQucmVsb2FkV2l0aEppdHRlcih0aGlzKVxuICAgIH1cbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5saXZlU29ja2V0LmRyb3BBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gYmUgbnVsbCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMVxuICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpeyBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKSB9XG4gICAgaWYodGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7XG4gICAgICB0aGlzLnNob3dMb2FkZXIoQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVClcbiAgICB9XG4gIH1cblxuICBvbkVycm9yKHJlYXNvbil7XG4gICAgdGhpcy5vbkNsb3NlKHJlYXNvbilcbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKFwiZXJyb3JcIiwgKCkgPT4gW1widmlldyBjcmFzaGVkXCIsIHJlYXNvbl0pIH1cbiAgICBpZighdGhpcy5saXZlU29ja2V0LmlzVW5sb2FkZWQoKSl7XG4gICAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNDb25uZWN0ZWQoKSl7XG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkaXNwbGF5RXJyb3IoY2xhc3Nlcyl7XG4gICAgaWYodGhpcy5pc01haW4oKSl7IERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0YXJ0XCIsIHtkZXRhaWw6IHt0bzogdGhpcy5ocmVmLCBraW5kOiBcImVycm9yXCJ9fSkgfVxuICAgIHRoaXMuc2hvd0xvYWRlcigpXG4gICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpXG4gICAgdGhpcy5leGVjQWxsKHRoaXMuYmluZGluZyhcImRpc2Nvbm5lY3RlZFwiKSlcbiAgfVxuXG4gIHB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cblxuICAgIGxldCBbcmVmLCBbZWxdLCBvcHRzXSA9IHJlZkdlbmVyYXRvciA/IHJlZkdlbmVyYXRvcigpIDogW251bGwsIFtdLCB7fV1cbiAgICBsZXQgb25Mb2FkaW5nRG9uZSA9IGZ1bmN0aW9uKCl7IH1cbiAgICBpZihvcHRzLnBhZ2VfbG9hZGluZyB8fCAoZWwgJiYgKGVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORykpICE9PSBudWxsKSkpe1xuICAgICAgb25Mb2FkaW5nRG9uZSA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe2tpbmQ6IFwiZWxlbWVudFwiLCB0YXJnZXQ6IGVsfSlcbiAgICB9XG5cbiAgICBpZih0eXBlb2YgKHBheWxvYWQuY2lkKSAhPT0gXCJudW1iZXJcIil7IGRlbGV0ZSBwYXlsb2FkLmNpZCB9XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubGl2ZVNvY2tldC53cmFwUHVzaCh0aGlzLCB7dGltZW91dDogdHJ1ZX0sICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbC5wdXNoKGV2ZW50LCBwYXlsb2FkLCBQVVNIX1RJTUVPVVQpLnJlY2VpdmUoXCJva1wiLCByZXNwID0+IHtcbiAgICAgICAgICBsZXQgZmluaXNoID0gKGhvb2tSZXBseSkgPT4ge1xuICAgICAgICAgICAgaWYocmVzcC5yZWRpcmVjdCl7IHRoaXMub25SZWRpcmVjdChyZXNwLnJlZGlyZWN0KSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcGF0Y2gpeyB0aGlzLm9uTGl2ZVBhdGNoKHJlc3AubGl2ZV9wYXRjaCkgfVxuICAgICAgICAgICAgaWYocmVzcC5saXZlX3JlZGlyZWN0KXsgdGhpcy5vbkxpdmVSZWRpcmVjdChyZXNwLmxpdmVfcmVkaXJlY3QpIH1cbiAgICAgICAgICAgIG9uTG9hZGluZ0RvbmUoKVxuICAgICAgICAgICAgb25SZXBseShyZXNwLCBob29rUmVwbHkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHJlc3AuZGlmZil7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuYXBwbHlEaWZmKFwidXBkYXRlXCIsIHJlc3AuZGlmZiwgKHtkaWZmLCByZXBseSwgZXZlbnRzfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoZGlmZiwgZXZlbnRzKVxuICAgICAgICAgICAgICAgIGZpbmlzaChyZXBseSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHJlZiAhPT0gbnVsbCl7IHRoaXMudW5kb1JlZnMocmVmKSB9XG4gICAgICAgICAgICBmaW5pc2gobnVsbClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHVuZG9SZWZzKHJlZil7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9IC8vIGV4aXQgaWYgZXh0ZXJuYWwgZm9ybSB0cmlnZ2VyZWRcblxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtQSFhfUkVGX1NSQ309XCIke3RoaXMuaWR9XCJdWyR7UEhYX1JFRn09XCIke3JlZn1cIl1gLCBlbCA9PiB7XG4gICAgICBsZXQgZGlzYWJsZWRWYWwgPSBlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVEKVxuICAgICAgLy8gcmVtb3ZlIHJlZnNcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuICAgICAgLy8gcmVzdG9yZSBpbnB1dHNcbiAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZShQSFhfUkVBRE9OTFkpICE9PSBudWxsKXtcbiAgICAgICAgZWwucmVhZE9ubHkgPSBmYWxzZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFQURPTkxZKVxuICAgICAgfVxuICAgICAgaWYoZGlzYWJsZWRWYWwgIT09IG51bGwpe1xuICAgICAgICBlbC5kaXNhYmxlZCA9IGRpc2FibGVkVmFsID09PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZVxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX0RJU0FCTEVEKVxuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIGNsYXNzZXNcbiAgICAgIFBIWF9FVkVOVF9DTEFTU0VTLmZvckVhY2goY2xhc3NOYW1lID0+IERPTS5yZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKSlcbiAgICAgIC8vIHJlc3RvcmUgZGlzYWJsZXNcbiAgICAgIGxldCBkaXNhYmxlUmVzdG9yZSA9IGVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpXG4gICAgICBpZihkaXNhYmxlUmVzdG9yZSAhPT0gbnVsbCl7XG4gICAgICAgIGVsLmlubmVyVGV4dCA9IGRpc2FibGVSZXN0b3JlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUpXG4gICAgICB9XG4gICAgICBsZXQgdG9FbCA9IERPTS5wcml2YXRlKGVsLCBQSFhfUkVGKVxuICAgICAgaWYodG9FbCl7XG4gICAgICAgIGxldCBob29rID0gdGhpcy50cmlnZ2VyQmVmb3JlVXBkYXRlSG9vayhlbCwgdG9FbClcbiAgICAgICAgRE9NUGF0Y2gucGF0Y2hFbChlbCwgdG9FbCwgdGhpcy5saXZlU29ja2V0LmdldEFjdGl2ZUVsZW1lbnQoKSlcbiAgICAgICAgaWYoaG9vayl7IGhvb2suX191cGRhdGVkKCkgfVxuICAgICAgICBET00uZGVsZXRlUHJpdmF0ZShlbCwgUEhYX1JFRilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHV0UmVmKGVsZW1lbnRzLCBldmVudCwgb3B0cyA9IHt9KXtcbiAgICBsZXQgbmV3UmVmID0gdGhpcy5yZWYrK1xuICAgIGxldCBkaXNhYmxlV2l0aCA9IHRoaXMuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKVxuICAgIGlmKG9wdHMubG9hZGluZyl7IGVsZW1lbnRzID0gZWxlbWVudHMuY29uY2F0KERPTS5hbGwoZG9jdW1lbnQsIG9wdHMubG9hZGluZykpfVxuXG4gICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKGBwaHgtJHtldmVudH0tbG9hZGluZ2ApXG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRiwgbmV3UmVmKVxuICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9SRUZfU1JDLCB0aGlzLmVsLmlkKVxuICAgICAgbGV0IGRpc2FibGVUZXh0ID0gZWwuZ2V0QXR0cmlidXRlKGRpc2FibGVXaXRoKVxuICAgICAgaWYoZGlzYWJsZVRleHQgIT09IG51bGwpe1xuICAgICAgICBpZighZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSkpe1xuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRV9XSVRIX1JFU1RPUkUsIGVsLmlubmVyVGV4dClcbiAgICAgICAgfVxuICAgICAgICBpZihkaXNhYmxlVGV4dCAhPT0gXCJcIil7IGVsLmlubmVyVGV4dCA9IGRpc2FibGVUZXh0IH1cbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIilcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBbbmV3UmVmLCBlbGVtZW50cywgb3B0c11cbiAgfVxuXG4gIGNvbXBvbmVudElEKGVsKXtcbiAgICBsZXQgY2lkID0gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKVxuICAgIHJldHVybiBjaWQgPyBwYXJzZUludChjaWQpIDogbnVsbFxuICB9XG5cbiAgdGFyZ2V0Q29tcG9uZW50SUQodGFyZ2V0LCB0YXJnZXRDdHgsIG9wdHMgPSB7fSl7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7IHJldHVybiB0YXJnZXRDdHggfVxuXG4gICAgbGV0IGNpZE9yU2VsZWN0b3IgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInRhcmdldFwiKSlcbiAgICBpZihpc0NpZChjaWRPclNlbGVjdG9yKSl7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoY2lkT3JTZWxlY3RvcilcbiAgICB9IGVsc2UgaWYodGFyZ2V0Q3R4ICYmIChjaWRPclNlbGVjdG9yICE9PSBudWxsIHx8IG9wdHMudGFyZ2V0KSl7XG4gICAgICByZXR1cm4gdGhpcy5jbG9zZXN0Q29tcG9uZW50SUQodGFyZ2V0Q3R4KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpe1xuICAgIGlmKGlzQ2lkKHRhcmdldEN0eCkpe1xuICAgICAgcmV0dXJuIHRhcmdldEN0eFxuICAgIH0gZWxzZSBpZih0YXJnZXRDdHgpe1xuICAgICAgcmV0dXJuIG1heWJlKHRhcmdldEN0eC5jbG9zZXN0KGBbJHtQSFhfQ09NUE9ORU5UfV1gKSwgZWwgPT4gdGhpcy5vd25zRWxlbWVudChlbCkgJiYgdGhpcy5jb21wb25lbnRJRChlbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgcHVzaEhvb2tFdmVudChlbCwgdGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSl7XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7XG4gICAgICB0aGlzLmxvZyhcImhvb2tcIiwgKCkgPT4gW1widW5hYmxlIHRvIHB1c2ggaG9vayBldmVudC4gTGl2ZVZpZXcgbm90IGNvbm5lY3RlZFwiLCBldmVudCwgcGF5bG9hZF0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgbGV0IFtyZWYsIGVscywgb3B0c10gPSB0aGlzLnB1dFJlZihbZWxdLCBcImhvb2tcIilcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gW3JlZiwgZWxzLCBvcHRzXSwgXCJldmVudFwiLCB7XG4gICAgICB0eXBlOiBcImhvb2tcIixcbiAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgIHZhbHVlOiBwYXlsb2FkLFxuICAgICAgY2lkOiB0aGlzLmNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpXG4gICAgfSwgKHJlc3AsIHJlcGx5KSA9PiBvblJlcGx5KHJlcGx5LCByZWYpKVxuXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgZXh0cmFjdE1ldGEoZWwsIG1ldGEsIHZhbHVlKXtcbiAgICBsZXQgcHJlZml4ID0gdGhpcy5iaW5kaW5nKFwidmFsdWUtXCIpXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGVsLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgbGV0IG5hbWUgPSBlbC5hdHRyaWJ1dGVzW2ldLm5hbWVcbiAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChwcmVmaXgpKXsgbWV0YVtuYW1lLnJlcGxhY2UocHJlZml4LCBcIlwiKV0gPSBlbC5nZXRBdHRyaWJ1dGUobmFtZSkgfVxuICAgIH1cbiAgICBpZihlbC52YWx1ZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIG1ldGEudmFsdWUgPSBlbC52YWx1ZVxuXG4gICAgICBpZihlbC50YWdOYW1lID09PSBcIklOUFVUXCIgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUpID49IDAgJiYgIWVsLmNoZWNrZWQpe1xuICAgICAgICBkZWxldGUgbWV0YS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZih2YWx1ZSl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBmb3IobGV0IGtleSBpbiB2YWx1ZSl7IG1ldGFba2V5XSA9IHZhbHVlW2tleV0gfVxuICAgIH1cbiAgICByZXR1cm4gbWV0YVxuICB9XG5cblxuICBwdXNoRXZlbnQodHlwZSwgZWwsIHRhcmdldEN0eCwgcGh4RXZlbnQsIG1ldGEsIG9wdHMgPSB7fSwgb25SZXBseSl7XG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KCgpID0+IHRoaXMucHV0UmVmKFtlbF0sIHR5cGUsIG9wdHMpLCBcImV2ZW50XCIsIHtcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICB2YWx1ZTogdGhpcy5leHRyYWN0TWV0YShlbCwgbWV0YSwgb3B0cy52YWx1ZSksXG4gICAgICBjaWQ6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZWwsIHRhcmdldEN0eCwgb3B0cylcbiAgICB9LCAocmVzcCwgcmVwbHkpID0+IG9uUmVwbHkgJiYgb25SZXBseShyZXBseSkpXG4gIH1cblxuICBwdXNoRmlsZVByb2dyZXNzKGZpbGVFbCwgZW50cnlSZWYsIHByb2dyZXNzLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIHRoaXMubGl2ZVNvY2tldC53aXRoaW5Pd25lcnMoZmlsZUVsLmZvcm0sICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHZpZXcucHVzaFdpdGhSZXBseShudWxsLCBcInByb2dyZXNzXCIsIHtcbiAgICAgICAgZXZlbnQ6IGZpbGVFbC5nZXRBdHRyaWJ1dGUodmlldy5iaW5kaW5nKFBIWF9QUk9HUkVTUykpLFxuICAgICAgICByZWY6IGZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyeV9yZWY6IGVudHJ5UmVmLFxuICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3MsXG4gICAgICAgIGNpZDogdmlldy50YXJnZXRDb21wb25lbnRJRChmaWxlRWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgICAgfSwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgcHVzaElucHV0KGlucHV0RWwsIHRhcmdldEN0eCwgZm9yY2VDaWQsIHBoeEV2ZW50LCBvcHRzLCBjYWxsYmFjayl7XG4gICAgbGV0IHVwbG9hZHNcbiAgICBsZXQgY2lkID0gaXNDaWQoZm9yY2VDaWQpID8gZm9yY2VDaWQgOiB0aGlzLnRhcmdldENvbXBvbmVudElEKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4KVxuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLnB1dFJlZihbaW5wdXRFbCwgaW5wdXRFbC5mb3JtXSwgXCJjaGFuZ2VcIiwgb3B0cylcbiAgICBsZXQgZm9ybURhdGFcbiAgICBsZXQgbWV0YSAgPSB0aGlzLmV4dHJhY3RNZXRhKGlucHV0RWwuZm9ybSlcbiAgICBpZihpbnB1dEVsLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpKXtcbiAgICAgIGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShpbnB1dEVsLmZvcm0sIHtfdGFyZ2V0OiBvcHRzLl90YXJnZXQsIC4uLm1ldGF9LCBbaW5wdXRFbC5uYW1lXSlcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldCwgLi4ubWV0YX0pXG4gICAgfVxuICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGlucHV0RWwpICYmIGlucHV0RWwuZmlsZXMgJiYgaW5wdXRFbC5maWxlcy5sZW5ndGggPiAwKXtcbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGlucHV0RWwsIEFycmF5LmZyb20oaW5wdXRFbC5maWxlcykpXG4gICAgfVxuICAgIHVwbG9hZHMgPSBMaXZlVXBsb2FkZXIuc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKVxuXG4gICAgbGV0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICB1cGxvYWRzOiB1cGxvYWRzLFxuICAgICAgY2lkOiBjaWRcbiAgICB9XG4gICAgdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbmVyYXRvciwgXCJldmVudFwiLCBldmVudCwgcmVzcCA9PiB7XG4gICAgICBET00uc2hvd0Vycm9yKGlucHV0RWwsIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKFBIWF9GRUVEQkFDS19GT1IpKVxuICAgICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoaW5wdXRFbCkgJiYgaW5wdXRFbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC1hdXRvLXVwbG9hZFwiKSAhPT0gbnVsbCl7XG4gICAgICAgIGlmKExpdmVVcGxvYWRlci5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0RWwpLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxldCBbcmVmLCBfZWxzXSA9IHJlZkdlbmVyYXRvcigpXG4gICAgICAgICAgdGhpcy51cGxvYWRGaWxlcyhpbnB1dEVsLmZvcm0sIHRhcmdldEN0eCwgcmVmLCBjaWQsIChfdXBsb2FkcykgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcClcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckF3YWl0aW5nU3VibWl0KGlucHV0RWwuZm9ybSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmlnZ2VyQXdhaXRpbmdTdWJtaXQoZm9ybUVsKXtcbiAgICBsZXQgYXdhaXRpbmdTdWJtaXQgPSB0aGlzLmdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpXG4gICAgaWYoYXdhaXRpbmdTdWJtaXQpe1xuICAgICAgbGV0IFtfZWwsIF9yZWYsIF9vcHRzLCBjYWxsYmFja10gPSBhd2FpdGluZ1N1Ym1pdFxuICAgICAgdGhpcy5jYW5jZWxTdWJtaXQoZm9ybUVsKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIGdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpe1xuICAgIHJldHVybiB0aGlzLmZvcm1TdWJtaXRzLmZpbmQoKFtlbCwgX3JlZiwgX29wdHMsIF9jYWxsYmFja10pID0+IGVsLmlzU2FtZU5vZGUoZm9ybUVsKSlcbiAgfVxuXG4gIHNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFjayl7XG4gICAgaWYodGhpcy5nZXRTY2hlZHVsZWRTdWJtaXQoZm9ybUVsKSl7IHJldHVybiB0cnVlIH1cbiAgICB0aGlzLmZvcm1TdWJtaXRzLnB1c2goW2Zvcm1FbCwgcmVmLCBvcHRzLCBjYWxsYmFja10pXG4gIH1cblxuICBjYW5jZWxTdWJtaXQoZm9ybUVsKXtcbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gdGhpcy5mb3JtU3VibWl0cy5maWx0ZXIoKFtlbCwgcmVmLCBfY2FsbGJhY2tdKSA9PiB7XG4gICAgICBpZihlbC5pc1NhbWVOb2RlKGZvcm1FbCkpe1xuICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBkaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGZpbHRlcklnbm9yZWQgPSBlbCA9PiB7XG4gICAgICBsZXQgdXNlcklnbm9yZWQgPSBjbG9zZXN0UGh4QmluZGluZyhlbCwgYCR7dGhpcy5iaW5kaW5nKFBIWF9VUERBVEUpfT1pZ25vcmVgLCBlbC5mb3JtKVxuICAgICAgcmV0dXJuICEodXNlcklnbm9yZWQgfHwgY2xvc2VzdFBoeEJpbmRpbmcoZWwsIFwiZGF0YS1waHgtdXBkYXRlPWlnbm9yZVwiLCBlbC5mb3JtKSlcbiAgICB9XG4gICAgbGV0IGZpbHRlckRpc2FibGVzID0gZWwgPT4ge1xuICAgICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0RJU0FCTEVfV0lUSCkpXG4gICAgfVxuICAgIGxldCBmaWx0ZXJCdXR0b24gPSBlbCA9PiBlbC50YWdOYW1lID09IFwiQlVUVE9OXCJcblxuICAgIGxldCBmaWx0ZXJJbnB1dCA9IGVsID0+IFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJTRUxFQ1RcIl0uaW5jbHVkZXMoZWwudGFnTmFtZSlcblxuICAgIGxldCBmb3JtRWxlbWVudHMgPSBBcnJheS5mcm9tKGZvcm1FbC5lbGVtZW50cylcbiAgICBsZXQgZGlzYWJsZXMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlckRpc2FibGVzKVxuICAgIGxldCBidXR0b25zID0gZm9ybUVsZW1lbnRzLmZpbHRlcihmaWx0ZXJCdXR0b24pLmZpbHRlcihmaWx0ZXJJZ25vcmVkKVxuICAgIGxldCBpbnB1dHMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlcklucHV0KS5maWx0ZXIoZmlsdGVySWdub3JlZClcblxuICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGJ1dHRvbi5kaXNhYmxlZClcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICB9KVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfUkVBRE9OTFksIGlucHV0LnJlYWRPbmx5KVxuICAgICAgaW5wdXQucmVhZE9ubHkgPSB0cnVlXG4gICAgICBpZihpbnB1dC5maWxlcyl7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQsIGlucHV0LmRpc2FibGVkKVxuICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIGZvcm1FbC5zZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9QQUdFX0xPQURJTkcpLCBcIlwiKVxuICAgIHJldHVybiB0aGlzLnB1dFJlZihbZm9ybUVsXS5jb25jYXQoZGlzYWJsZXMpLmNvbmNhdChidXR0b25zKS5jb25jYXQoaW5wdXRzKSwgXCJzdWJtaXRcIiwgb3B0cylcbiAgfVxuXG4gIHB1c2hGb3JtU3VibWl0KGZvcm1FbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgc3VibWl0dGVyLCBvcHRzLCBvblJlcGx5KXtcbiAgICBsZXQgcmVmR2VuZXJhdG9yID0gKCkgPT4gdGhpcy5kaXNhYmxlRm9ybShmb3JtRWwsIG9wdHMpXG4gICAgbGV0IGNpZCA9IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZm9ybUVsLCB0YXJnZXRDdHgpXG4gICAgaWYoTGl2ZVVwbG9hZGVyLmhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCkpe1xuICAgICAgbGV0IFtyZWYsIF9lbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwdXNoID0gKCkgPT4gdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtRWwsIHN1Ym1pdHRlciwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgb3B0cywgb25SZXBseSlcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlU3VibWl0KGZvcm1FbCwgcmVmLCBvcHRzLCBwdXNoKVxuICAgIH0gZWxzZSBpZihMaXZlVXBsb2FkZXIuaW5wdXRzQXdhaXRpbmdQcmVmbGlnaHQoZm9ybUVsKS5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBbcmVmLCBlbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgIGxldCBwcm94eVJlZkdlbiA9ICgpID0+IFtyZWYsIGVscywgb3B0c11cbiAgICAgIHRoaXMudXBsb2FkRmlsZXMoZm9ybUVsLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCAoX3VwbG9hZHMpID0+IHtcbiAgICAgICAgbGV0IG1ldGEgPSB0aGlzLmV4dHJhY3RNZXRhKGZvcm1FbClcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShmb3JtRWwsIHtzdWJtaXR0ZXIsIC4uLm1ldGF9KVxuICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocHJveHlSZWZHZW4sIFwiZXZlbnRcIiwge1xuICAgICAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgICB2YWx1ZTogZm9ybURhdGEsXG4gICAgICAgICAgY2lkOiBjaWRcbiAgICAgICAgfSwgb25SZXBseSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmKCEoZm9ybUVsLmhhc0F0dHJpYnV0ZShQSFhfUkVGKSAmJiBmb3JtRWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIpKSl7XG4gICAgICBsZXQgbWV0YSA9IHRoaXMuZXh0cmFjdE1ldGEoZm9ybUVsKVxuICAgICAgbGV0IGZvcm1EYXRhID0gc2VyaWFsaXplRm9ybShmb3JtRWwsIHtzdWJtaXR0ZXIsIC4uLm1ldGF9KVxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbmVyYXRvciwgXCJldmVudFwiLCB7XG4gICAgICAgIHR5cGU6IFwiZm9ybVwiLFxuICAgICAgICBldmVudDogcGh4RXZlbnQsXG4gICAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgICAgY2lkOiBjaWRcbiAgICAgIH0sIG9uUmVwbHkpXG4gICAgfVxuICB9XG5cbiAgdXBsb2FkRmlsZXMoZm9ybUVsLCB0YXJnZXRDdHgsIHJlZiwgY2lkLCBvbkNvbXBsZXRlKXtcbiAgICBsZXQgam9pbkNvdW50QXRVcGxvYWQgPSB0aGlzLmpvaW5Db3VudFxuICAgIGxldCBpbnB1dEVscyA9IExpdmVVcGxvYWRlci5hY3RpdmVGaWxlSW5wdXRzKGZvcm1FbClcbiAgICBsZXQgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MgPSBpbnB1dEVscy5sZW5ndGhcblxuICAgIC8vIGdldCBlYWNoIGZpbGUgaW5wdXRcbiAgICBpbnB1dEVscy5mb3JFYWNoKGlucHV0RWwgPT4ge1xuICAgICAgbGV0IHVwbG9hZGVyID0gbmV3IExpdmVVcGxvYWRlcihpbnB1dEVsLCB0aGlzLCAoKSA9PiB7XG4gICAgICAgIG51bUZpbGVJbnB1dHNJblByb2dyZXNzLS1cbiAgICAgICAgaWYobnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MgPT09IDApeyBvbkNvbXBsZXRlKCkgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudXBsb2FkZXJzW2lucHV0RWxdID0gdXBsb2FkZXJcbiAgICAgIGxldCBlbnRyaWVzID0gdXBsb2FkZXIuZW50cmllcygpLm1hcChlbnRyeSA9PiBlbnRyeS50b1ByZWZsaWdodFBheWxvYWQoKSlcblxuICAgICAgbGV0IHBheWxvYWQgPSB7XG4gICAgICAgIHJlZjogaW5wdXRFbC5nZXRBdHRyaWJ1dGUoUEhYX1VQTE9BRF9SRUYpLFxuICAgICAgICBlbnRyaWVzOiBlbnRyaWVzLFxuICAgICAgICBjaWQ6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nKFwidXBsb2FkXCIsICgpID0+IFtcInNlbmRpbmcgcHJlZmxpZ2h0IHJlcXVlc3RcIiwgcGF5bG9hZF0pXG5cbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImFsbG93X3VwbG9hZFwiLCBwYXlsb2FkLCByZXNwID0+IHtcbiAgICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wiZ290IHByZWZsaWdodCByZXNwb25zZVwiLCByZXNwXSlcbiAgICAgICAgaWYocmVzcC5lcnJvcil7XG4gICAgICAgICAgdGhpcy51bmRvUmVmcyhyZWYpXG4gICAgICAgICAgbGV0IFtlbnRyeV9yZWYsIHJlYXNvbl0gPSByZXNwLmVycm9yXG4gICAgICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW2BlcnJvciBmb3IgZW50cnkgJHtlbnRyeV9yZWZ9YCwgcmVhc29uXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgb25FcnJvciA9IChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsLm9uRXJyb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBpZih0aGlzLmpvaW5Db3VudCA9PT0gam9pbkNvdW50QXRVcGxvYWQpeyBjYWxsYmFjaygpIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwbG9hZGVyLmluaXRBZGFwdGVyVXBsb2FkKHJlc3AsIG9uRXJyb3IsIHRoaXMubGl2ZVNvY2tldClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZGlzcGF0Y2hVcGxvYWRzKG5hbWUsIGZpbGVzT3JCbG9icyl7XG4gICAgbGV0IGlucHV0cyA9IERPTS5maW5kVXBsb2FkSW5wdXRzKHRoaXMuZWwpLmZpbHRlcihlbCA9PiBlbC5uYW1lID09PSBuYW1lKVxuICAgIGlmKGlucHV0cy5sZW5ndGggPT09IDApeyBsb2dFcnJvcihgbm8gbGl2ZSBmaWxlIGlucHV0cyBmb3VuZCBtYXRjaGluZyB0aGUgbmFtZSBcIiR7bmFtZX1cImApIH1cbiAgICBlbHNlIGlmKGlucHV0cy5sZW5ndGggPiAxKXsgbG9nRXJyb3IoYGR1cGxpY2F0ZSBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgeyBET00uZGlzcGF0Y2hFdmVudChpbnB1dHNbMF0sIFBIWF9UUkFDS19VUExPQURTLCB7ZGV0YWlsOiB7ZmlsZXM6IGZpbGVzT3JCbG9ic319KSB9XG4gIH1cblxuICBwdXNoRm9ybVJlY292ZXJ5KGZvcm0sIG5ld0NpZCwgY2FsbGJhY2spe1xuICAgIHRoaXMubGl2ZVNvY2tldC53aXRoaW5Pd25lcnMoZm9ybSwgKHZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgbGV0IHBoeENoYW5nZSA9IHRoaXMuYmluZGluZyhcImNoYW5nZVwiKVxuICAgICAgbGV0IGlucHV0cyA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZmlsdGVyKGVsID0+IERPTS5pc0Zvcm1JbnB1dChlbCkgJiYgZWwubmFtZSAmJiAhZWwuaGFzQXR0cmlidXRlKHBoeENoYW5nZSkpXG4gICAgICBpZihpbnB1dHMubGVuZ3RoID09PSAwKXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGlucHV0ID0gaW5wdXRzLmZpbmQoZWwgPT4gZWwudHlwZSAhPT0gXCJoaWRkZW5cIikgfHwgaW5wdXRbMF1cbiAgICAgIGxldCBwaHhFdmVudCA9IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgfHwgZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpKVxuICAgICAgSlMuZXhlYyhcImNoYW5nZVwiLCBwaHhFdmVudCwgdmlldywgaW5wdXQsIFtcInB1c2hcIiwge190YXJnZXQ6IGlucHV0Lm5hbWUsIG5ld0NpZDogbmV3Q2lkLCBjYWxsYmFjazogY2FsbGJhY2t9XSlcbiAgICB9KVxuICB9XG5cbiAgcHVzaExpbmtQYXRjaChocmVmLCB0YXJnZXRFbCwgY2FsbGJhY2spe1xuICAgIGxldCBsaW5rUmVmID0gdGhpcy5saXZlU29ja2V0LnNldFBlbmRpbmdMaW5rKGhyZWYpXG4gICAgbGV0IHJlZkdlbiA9IHRhcmdldEVsID8gKCkgPT4gdGhpcy5wdXRSZWYoW3RhcmdldEVsXSwgXCJjbGlja1wiKSA6IG51bGxcbiAgICBsZXQgZmFsbGJhY2sgPSAoKSA9PiB0aGlzLmxpdmVTb2NrZXQucmVkaXJlY3Qod2luZG93LmxvY2F0aW9uLmhyZWYpXG5cbiAgICBsZXQgcHVzaCA9IHRoaXMucHVzaFdpdGhSZXBseShyZWZHZW4sIFwibGl2ZV9wYXRjaFwiLCB7dXJsOiBocmVmfSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHJlc3AubGlua19yZWRpcmVjdCl7XG4gICAgICAgICAgdGhpcy5saXZlU29ja2V0LnJlcGxhY2VNYWluKGhyZWYsIG51bGwsIGNhbGxiYWNrLCBsaW5rUmVmKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmKHRoaXMubGl2ZVNvY2tldC5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7XG4gICAgICAgICAgICB0aGlzLmhyZWYgPSBocmVmXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYXBwbHlQZW5kaW5nVXBkYXRlcygpXG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sobGlua1JlZilcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaWYocHVzaCl7XG4gICAgICBwdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIGZhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBmYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgZm9ybXNGb3JSZWNvdmVyeShodG1sKXtcbiAgICBpZih0aGlzLmpvaW5Db3VudCA9PT0gMCl7IHJldHVybiBbXSB9XG5cbiAgICBsZXQgcGh4Q2hhbmdlID0gdGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpXG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuXG4gICAgcmV0dXJuIChcbiAgICAgIERPTS5hbGwodGhpcy5lbCwgYGZvcm1bJHtwaHhDaGFuZ2V9XWApXG4gICAgICAgIC5maWx0ZXIoZm9ybSA9PiBmb3JtLmlkICYmIHRoaXMub3duc0VsZW1lbnQoZm9ybSkpXG4gICAgICAgIC5maWx0ZXIoZm9ybSA9PiBmb3JtLmVsZW1lbnRzLmxlbmd0aCA+IDApXG4gICAgICAgIC5maWx0ZXIoZm9ybSA9PiBmb3JtLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0FVVE9fUkVDT1ZFUikpICE9PSBcImlnbm9yZVwiKVxuICAgICAgICAubWFwKGZvcm0gPT4ge1xuICAgICAgICAgIGxldCBuZXdGb3JtID0gdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKGBmb3JtW2lkPVwiJHtmb3JtLmlkfVwiXVske3BoeENoYW5nZX09XCIke2Zvcm0uZ2V0QXR0cmlidXRlKHBoeENoYW5nZSl9XCJdYClcbiAgICAgICAgICBpZihuZXdGb3JtKXtcbiAgICAgICAgICAgIHJldHVybiBbZm9ybSwgbmV3Rm9ybSwgdGhpcy50YXJnZXRDb21wb25lbnRJRChuZXdGb3JtKV1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtmb3JtLCBmb3JtLCB0aGlzLnRhcmdldENvbXBvbmVudElEKGZvcm0pXVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcigoW2Zvcm0sIG5ld0Zvcm0sIG5ld0NpZF0pID0+IG5ld0Zvcm0pXG4gICAgKVxuICB9XG5cbiAgbWF5YmVQdXNoQ29tcG9uZW50c0Rlc3Ryb3llZChkZXN0cm95ZWRDSURzKXtcbiAgICBsZXQgd2lsbERlc3Ryb3lDSURzID0gZGVzdHJveWVkQ0lEcy5maWx0ZXIoY2lkID0+IHtcbiAgICAgIHJldHVybiBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIGNpZCkubGVuZ3RoID09PSAwXG4gICAgfSlcbiAgICBpZih3aWxsRGVzdHJveUNJRHMubGVuZ3RoID4gMCl7XG4gICAgICB0aGlzLnBydW5pbmdDSURzLnB1c2goLi4ud2lsbERlc3Ryb3lDSURzKVxuXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJjaWRzX3dpbGxfZGVzdHJveVwiLCB7Y2lkczogd2lsbERlc3Ryb3lDSURzfSwgKCkgPT4ge1xuICAgICAgICAvLyBUaGUgY2lkcyBhcmUgZWl0aGVyIGJhY2sgb24gdGhlIHBhZ2Ugb3IgdGhleSB3aWxsIGJlIGZ1bGx5IHJlbW92ZWQsXG4gICAgICAgIC8vIHNvIHdlIGNhbiByZW1vdmUgdGhlbSBmcm9tIHRoZSBwcnVuaW5nQ0lEcy5cbiAgICAgICAgdGhpcy5wcnVuaW5nQ0lEcyA9IHRoaXMucHJ1bmluZ0NJRHMuZmlsdGVyKGNpZCA9PiB3aWxsRGVzdHJveUNJRHMuaW5kZXhPZihjaWQpICE9PSAtMSlcblxuICAgICAgICAvLyBTZWUgaWYgYW55IG9mIHRoZSBjaWRzIHdlIHdhbnRlZCB0byBkZXN0cm95IHdlcmUgYWRkZWQgYmFjayxcbiAgICAgICAgLy8gaWYgdGhleSB3ZXJlIGFkZGVkIGJhY2ssIHdlIGRvbid0IGFjdHVhbGx5IGRlc3Ryb3kgdGhlbS5cbiAgICAgICAgbGV0IGNvbXBsZXRlbHlEZXN0cm95Q0lEcyA9IHdpbGxEZXN0cm95Q0lEcy5maWx0ZXIoY2lkID0+IHtcbiAgICAgICAgICByZXR1cm4gRE9NLmZpbmRDb21wb25lbnROb2RlTGlzdCh0aGlzLmVsLCBjaWQpLmxlbmd0aCA9PT0gMFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmKGNvbXBsZXRlbHlEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICB0aGlzLnB1c2hXaXRoUmVwbHkobnVsbCwgXCJjaWRzX2Rlc3Ryb3llZFwiLCB7Y2lkczogY29tcGxldGVseURlc3Ryb3lDSURzfSwgKHJlc3ApID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWQucHJ1bmVDSURzKHJlc3AuY2lkcylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG93bnNFbGVtZW50KGVsKXtcbiAgICBsZXQgcGFyZW50Vmlld0VsID0gZWwuY2xvc2VzdChQSFhfVklFV19TRUxFQ1RPUilcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKFBIWF9QQVJFTlRfSUQpID09PSB0aGlzLmlkIHx8XG4gICAgICAocGFyZW50Vmlld0VsICYmIHBhcmVudFZpZXdFbC5pZCA9PT0gdGhpcy5pZCkgfHxcbiAgICAgICghcGFyZW50Vmlld0VsICYmIHRoaXMuaXNEZWFkKVxuICB9XG5cbiAgc3VibWl0Rm9ybShmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMgPSB7fSl7XG4gICAgRE9NLnB1dFByaXZhdGUoZm9ybSwgUEhYX0hBU19TVUJNSVRURUQsIHRydWUpXG4gICAgbGV0IHBoeEZlZWRiYWNrID0gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUilcbiAgICBsZXQgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5wdXRQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSkpXG4gICAgdGhpcy5saXZlU29ja2V0LmJsdXJBY3RpdmVFbGVtZW50KHRoaXMpXG4gICAgdGhpcy5wdXNoRm9ybVN1Ym1pdChmb3JtLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsICgpID0+IHtcbiAgICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IERPTS5zaG93RXJyb3IoaW5wdXQsIHBoeEZlZWRiYWNrKSlcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXN0b3JlUHJldmlvdXNseUFjdGl2ZUZvY3VzKClcbiAgICB9KVxuICB9XG5cbiAgYmluZGluZyhraW5kKXsgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5iaW5kaW5nKGtpbmQpIH1cbn1cbiIsICIvKiogSW5pdGlhbGl6ZXMgdGhlIExpdmVTb2NrZXRcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVuZFBvaW50IC0gVGhlIHN0cmluZyBXZWJTb2NrZXQgZW5kcG9pbnQsIGllLCBgXCJ3c3M6Ly9leGFtcGxlLmNvbS9saXZlXCJgLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcIi9saXZlXCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtQaG9lbml4LlNvY2tldH0gc29ja2V0IC0gdGhlIHJlcXVpcmVkIFBob2VuaXggU29ja2V0IGNsYXNzIGltcG9ydGVkIGZyb20gXCJwaG9lbml4XCIuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuICogICAgIGltcG9ydCB7TGl2ZVNvY2tldH0gZnJvbSBcInBob2VuaXhfbGl2ZV92aWV3XCJcbiAqICAgICBsZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7Li4ufSlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvbi4gT3V0c2lkZSBvZiBrZXlzIGxpc3RlZCBiZWxvdywgYWxsXG4gKiBjb25maWd1cmF0aW9uIGlzIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgUGhvZW5peCBTb2NrZXQgY29uc3RydWN0b3IuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuZGVmYXVsdHNdIC0gVGhlIG9wdGlvbmFsIGRlZmF1bHRzIHRvIHVzZSBmb3IgdmFyaW91cyBiaW5kaW5ncyxcbiAqIHN1Y2ggYXMgYHBoeC1kZWJvdW5jZWAuIFN1cHBvcnRzIHRoZSBmb2xsb3dpbmcga2V5czpcbiAqXG4gKiAgIC0gZGVib3VuY2UgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LWRlYm91bmNlIHRpbWUuIERlZmF1bHRzIDMwMFxuICogICAtIHRocm90dGxlIC0gdGhlIG1pbGxpc2Vjb25kIHBoeC10aHJvdHRsZSB0aW1lLiBEZWZhdWx0cyAzMDBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5wYXJhbXNdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBwYXNzaW5nIGNvbm5lY3QgcGFyYW1zLlxuICogVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIExpdmVWaWV3LiBGb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgKGVsKSA9PiB7dmlldzogZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1teS12aWV3LW5hbWVcIiwgdG9rZW46IHdpbmRvdy5teVRva2VufVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iaW5kaW5nUHJlZml4XSAtIFRoZSBvcHRpb25hbCBwcmVmaXggdG8gdXNlIGZvciBhbGwgcGh4IERPTSBhbm5vdGF0aW9ucy5cbiAqIERlZmF1bHRzIHRvIFwicGh4LVwiLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmhvb2tzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IGhvb2sgY2FsbGJhY2tzLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnVwbG9hZGVyc10gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IGZvciByZWZlcmVuY2luZyBMaXZlVmlldyB1cGxvYWRlciBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmxvYWRlclRpbWVvdXRdIC0gVGhlIG9wdGlvbmFsIGRlbGF5IGluIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBhcHBseVxuICogbG9hZGluZyBzdGF0ZXMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLm1heFJlbG9hZHNdIC0gVGhlIG1heGltdW0gcmVsb2FkcyBiZWZvcmUgZW50ZXJpbmcgZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMucmVsb2FkSml0dGVyTWluXSAtIFRoZSBtaW5pbXVtIHRpbWUgYmV0d2VlbiBub3JtYWwgcmVsb2FkIGF0dGVtcHRzLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNYXhdIC0gVGhlIG1heGltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLmZhaWxzYWZlSml0dGVyXSAtIFRoZSB0aW1lIGJldHdlZW4gcmVsb2FkIGF0dGVtcHRzIGluIGZhaWxzYWZlIG1vZGUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy52aWV3TG9nZ2VyXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0byBsb2cgZGVidWcgaW5mb3JtYXRpb24uIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAodmlldywga2luZCwgbXNnLCBvYmopID0+IGNvbnNvbGUubG9nKGAke3ZpZXcuaWR9ICR7a2luZH06ICR7bXNnfSAtIGAsIG9iailcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubWV0YWRhdGFdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBtYXBwaW5nIGV2ZW50IG5hbWVzIHRvIGZ1bmN0aW9ucyBmb3JcbiAqIHBvcHVsYXRpbmcgZXZlbnQgbWV0YWRhdGEuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICBtZXRhZGF0YToge1xuICogICAgICAgY2xpY2s6IChlLCBlbCkgPT4ge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgZGV0YWlsOiBlLmRldGFpbCB8fCAxLFxuICogICAgICAgICB9XG4gKiAgICAgICB9LFxuICogICAgICAga2V5ZG93bjogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAga2V5OiBlLmtleSxcbiAqICAgICAgICAgICBjdHJsS2V5OiBlLmN0cmxLZXksXG4gKiAgICAgICAgICAgbWV0YUtleTogZS5tZXRhS2V5LFxuICogICAgICAgICAgIHNoaWZ0S2V5OiBlLnNoaWZ0S2V5XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuc2Vzc2lvblN0b3JhZ2VdIC0gQW4gb3B0aW9uYWwgU3RvcmFnZSBjb21wYXRpYmxlIG9iamVjdFxuICogVXNlZnVsIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYHNlc3Npb25TdG9yYWdlYC4gIEZvciBleGFtcGxlLCBUaGlzIGNvdWxkXG4gKiBoYXBwZW4gaWYgYSBzaXRlIGxvYWRzIGEgY3Jvc3MtZG9tYWluIExpdmVWaWV3IGluIGFuIGlmcmFtZS4gIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICAgIGNsYXNzIEluTWVtb3J5U3RvcmFnZSB7XG4gKiAgICAgICBjb25zdHJ1Y3RvcigpIHsgdGhpcy5zdG9yYWdlID0ge30gfVxuICogICAgICAgZ2V0SXRlbShrZXlOYW1lKSB7IHJldHVybiB0aGlzLnN0b3JhZ2Vba2V5TmFtZV0gfHwgbnVsbCB9XG4gKiAgICAgICByZW1vdmVJdGVtKGtleU5hbWUpIHsgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB9XG4gKiAgICAgICBzZXRJdGVtKGtleU5hbWUsIGtleVZhbHVlKSB7IHRoaXMuc3RvcmFnZVtrZXlOYW1lXSA9IGtleVZhbHVlIH1cbiAqICAgICB9XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmxvY2FsU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgZm9yIHdoZW4gTGl2ZVZpZXcgd29uJ3QgaGF2ZSBhY2Nlc3MgdG8gYGxvY2FsU3RvcmFnZWAuXG4gKiBTZWUgYG9wdHMuc2Vzc2lvblN0b3JhZ2VgIGZvciBleGFtcGxlcy5cbiovXG5cbmltcG9ydCB7XG4gIEJJTkRJTkdfUFJFRklYLFxuICBDT05TRUNVVElWRV9SRUxPQURTLFxuICBERUZBVUxUUyxcbiAgRkFJTFNBRkVfSklUVEVSLFxuICBMT0FERVJfVElNRU9VVCxcbiAgTUFYX1JFTE9BRFMsXG4gIFBIWF9ERUJPVU5DRSxcbiAgUEhYX0RST1BfVEFSR0VULFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9LRVksXG4gIFBIWF9MSU5LX1NUQVRFLFxuICBQSFhfTElWRV9MSU5LLFxuICBQSFhfTFZfREVCVUcsXG4gIFBIWF9MVl9MQVRFTkNZX1NJTSxcbiAgUEhYX0xWX1BST0ZJTEUsXG4gIFBIWF9NQUlOLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfVklFV19TRUxFQ1RPUixcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9USFJPVFRMRSxcbiAgUEhYX1RSQUNLX1VQTE9BRFMsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBSRUxPQURfSklUVEVSX01JTixcbiAgUkVMT0FEX0pJVFRFUl9NQVgsXG4gIFBIWF9SRUYsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNsb25lLFxuICBjbG9zZXN0UGh4QmluZGluZyxcbiAgY2xvc3VyZSxcbiAgZGVidWcsXG4gIGlzT2JqZWN0LFxuICBtYXliZVxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBCcm93c2VyIGZyb20gXCIuL2Jyb3dzZXJcIlxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IEhvb2tzIGZyb20gXCIuL2hvb2tzXCJcbmltcG9ydCBMaXZlVXBsb2FkZXIgZnJvbSBcIi4vbGl2ZV91cGxvYWRlclwiXG5pbXBvcnQgVmlldyBmcm9tIFwiLi92aWV3XCJcbmltcG9ydCBKUyBmcm9tIFwiLi9qc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpdmVTb2NrZXQge1xuICBjb25zdHJ1Y3Rvcih1cmwsIHBoeFNvY2tldCwgb3B0cyA9IHt9KXtcbiAgICB0aGlzLnVubG9hZGVkID0gZmFsc2VcbiAgICBpZighcGh4U29ja2V0IHx8IHBoeFNvY2tldC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk9iamVjdFwiKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXG4gICAgICBhIHBob2VuaXggU29ja2V0IG11c3QgYmUgcHJvdmlkZWQgYXMgdGhlIHNlY29uZCBhcmd1bWVudCB0byB0aGUgTGl2ZVNvY2tldCBjb25zdHJ1Y3Rvci4gRm9yIGV4YW1wbGU6XG5cbiAgICAgICAgICBpbXBvcnQge1NvY2tldH0gZnJvbSBcInBob2VuaXhcIlxuICAgICAgICAgIGltcG9ydCB7TGl2ZVNvY2tldH0gZnJvbSBcInBob2VuaXhfbGl2ZV92aWV3XCJcbiAgICAgICAgICBsZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7Li4ufSlcbiAgICAgIGApXG4gICAgfVxuICAgIHRoaXMuc29ja2V0ID0gbmV3IHBoeFNvY2tldCh1cmwsIG9wdHMpXG4gICAgdGhpcy5iaW5kaW5nUHJlZml4ID0gb3B0cy5iaW5kaW5nUHJlZml4IHx8IEJJTkRJTkdfUFJFRklYXG4gICAgdGhpcy5vcHRzID0gb3B0c1xuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLnZpZXdMb2dnZXIgPSBvcHRzLnZpZXdMb2dnZXJcbiAgICB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzID0gb3B0cy5tZXRhZGF0YSB8fCB7fVxuICAgIHRoaXMuZGVmYXVsdHMgPSBPYmplY3QuYXNzaWduKGNsb25lKERFRkFVTFRTKSwgb3B0cy5kZWZhdWx0cyB8fCB7fSlcbiAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsXG4gICAgdGhpcy5wcmV2QWN0aXZlID0gbnVsbFxuICAgIHRoaXMuc2lsZW5jZWQgPSBmYWxzZVxuICAgIHRoaXMubWFpbiA9IG51bGxcbiAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gbnVsbFxuICAgIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBudWxsXG4gICAgdGhpcy5saW5rUmVmID0gMVxuICAgIHRoaXMucm9vdHMgPSB7fVxuICAgIHRoaXMuaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG4gICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGNsb25lKHdpbmRvdy5sb2NhdGlvbilcbiAgICB0aGlzLmhvb2tzID0gb3B0cy5ob29rcyB8fCB7fVxuICAgIHRoaXMudXBsb2FkZXJzID0gb3B0cy51cGxvYWRlcnMgfHwge31cbiAgICB0aGlzLmxvYWRlclRpbWVvdXQgPSBvcHRzLmxvYWRlclRpbWVvdXQgfHwgTE9BREVSX1RJTUVPVVRcbiAgICB0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lciA9IG51bGxcbiAgICB0aGlzLm1heFJlbG9hZHMgPSBvcHRzLm1heFJlbG9hZHMgfHwgTUFYX1JFTE9BRFNcbiAgICB0aGlzLnJlbG9hZEppdHRlck1pbiA9IG9wdHMucmVsb2FkSml0dGVyTWluIHx8IFJFTE9BRF9KSVRURVJfTUlOXG4gICAgdGhpcy5yZWxvYWRKaXR0ZXJNYXggPSBvcHRzLnJlbG9hZEppdHRlck1heCB8fCBSRUxPQURfSklUVEVSX01BWFxuICAgIHRoaXMuZmFpbHNhZmVKaXR0ZXIgPSBvcHRzLmZhaWxzYWZlSml0dGVyIHx8IEZBSUxTQUZFX0pJVFRFUlxuICAgIHRoaXMubG9jYWxTdG9yYWdlID0gb3B0cy5sb2NhbFN0b3JhZ2UgfHwgd2luZG93LmxvY2FsU3RvcmFnZVxuICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2UgPSBvcHRzLnNlc3Npb25TdG9yYWdlIHx8IHdpbmRvdy5zZXNzaW9uU3RvcmFnZVxuICAgIHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyA9IGZhbHNlXG4gICAgdGhpcy5kb21DYWxsYmFja3MgPSBPYmplY3QuYXNzaWduKHtvbk5vZGVBZGRlZDogY2xvc3VyZSgpLCBvbkJlZm9yZUVsVXBkYXRlZDogY2xvc3VyZSgpfSwgb3B0cy5kb20gfHwge30pXG4gICAgdGhpcy50cmFuc2l0aW9ucyA9IG5ldyBUcmFuc2l0aW9uU2V0KClcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIF9lID0+IHtcbiAgICAgIHRoaXMudW5sb2FkZWQgPSB0cnVlXG4gICAgfSlcbiAgICB0aGlzLnNvY2tldC5vbk9wZW4oKCkgPT4ge1xuICAgICAgaWYodGhpcy5pc1VubG9hZGVkKCkpe1xuICAgICAgICAvLyByZWxvYWQgcGFnZSBpZiBiZWluZyByZXN0b3JlZCBmcm9tIGJhY2svZm9yd2FyZCBjYWNoZSBhbmQgYnJvd3NlciBkb2VzIG5vdCBlbWl0IFwicGFnZXNob3dcIlxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gcHVibGljXG5cbiAgaXNQcm9maWxlRW5hYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9QUk9GSUxFKSA9PT0gXCJ0cnVlXCIgfVxuXG4gIGlzRGVidWdFbmFibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0RFQlVHKSA9PT0gXCJ0cnVlXCIgfVxuXG4gIGlzRGVidWdEaXNhYmxlZCgpeyByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBIWF9MVl9ERUJVRykgPT09IFwiZmFsc2VcIiB9XG5cbiAgZW5hYmxlRGVidWcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9ERUJVRywgXCJ0cnVlXCIpIH1cblxuICBlbmFibGVQcm9maWxpbmcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBIWF9MVl9QUk9GSUxFLCBcInRydWVcIikgfVxuXG4gIGRpc2FibGVEZWJ1ZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0RFQlVHLCBcImZhbHNlXCIpIH1cblxuICBkaXNhYmxlUHJvZmlsaW5nKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShQSFhfTFZfUFJPRklMRSkgfVxuXG4gIGVuYWJsZUxhdGVuY3lTaW0odXBwZXJCb3VuZE1zKXtcbiAgICB0aGlzLmVuYWJsZURlYnVnKClcbiAgICBjb25zb2xlLmxvZyhcImxhdGVuY3kgc2ltdWxhdG9yIGVuYWJsZWQgZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGlzIGJyb3dzZXIgc2Vzc2lvbi4gQ2FsbCBkaXNhYmxlTGF0ZW5jeVNpbSgpIHRvIGRpc2FibGVcIilcbiAgICB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNLCB1cHBlckJvdW5kTXMpXG4gIH1cblxuICBkaXNhYmxlTGF0ZW5jeVNpbSgpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNKSB9XG5cbiAgZ2V0TGF0ZW5jeVNpbSgpe1xuICAgIGxldCBzdHIgPSB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0xBVEVOQ1lfU0lNKVxuICAgIHJldHVybiBzdHIgPyBwYXJzZUludChzdHIpIDogbnVsbFxuICB9XG5cbiAgZ2V0U29ja2V0KCl7IHJldHVybiB0aGlzLnNvY2tldCB9XG5cbiAgY29ubmVjdCgpe1xuICAgIC8vIGVuYWJsZSBkZWJ1ZyBieSBkZWZhdWx0IGlmIG9uIGxvY2FsaG9zdCBhbmQgbm90IGV4cGxpY2l0bHkgZGlzYWJsZWRcbiAgICBpZih3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09IFwibG9jYWxob3N0XCIgJiYgIXRoaXMuaXNEZWJ1Z0Rpc2FibGVkKCkpeyB0aGlzLmVuYWJsZURlYnVnKCkgfVxuICAgIGxldCBkb0Nvbm5lY3QgPSAoKSA9PiB7XG4gICAgICBpZih0aGlzLmpvaW5Sb290Vmlld3MoKSl7XG4gICAgICAgIHRoaXMuYmluZFRvcExldmVsRXZlbnRzKClcbiAgICAgICAgdGhpcy5zb2NrZXQuY29ubmVjdCgpXG4gICAgICB9IGVsc2UgaWYodGhpcy5tYWluKXtcbiAgICAgICAgdGhpcy5zb2NrZXQuY29ubmVjdCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJpbmRUb3BMZXZlbEV2ZW50cyh7ZGVhZDogdHJ1ZX0pXG4gICAgICB9XG4gICAgICB0aGlzLmpvaW5EZWFkVmlldygpXG4gICAgfVxuICAgIGlmKFtcImNvbXBsZXRlXCIsIFwibG9hZGVkXCIsIFwiaW50ZXJhY3RpdmVcIl0uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKSA+PSAwKXtcbiAgICAgIGRvQ29ubmVjdCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IGRvQ29ubmVjdCgpKVxuICAgIH1cbiAgfVxuXG4gIGRpc2Nvbm5lY3QoY2FsbGJhY2spe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lcilcbiAgICB0aGlzLnNvY2tldC5kaXNjb25uZWN0KGNhbGxiYWNrKVxuICB9XG5cbiAgcmVwbGFjZVRyYW5zcG9ydCh0cmFuc3BvcnQpe1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbG9hZFdpdGhKaXR0ZXJUaW1lcilcbiAgICB0aGlzLnNvY2tldC5yZXBsYWNlVHJhbnNwb3J0KHRyYW5zcG9ydClcbiAgICB0aGlzLmNvbm5lY3QoKVxuICB9XG5cbiAgZXhlY0pTKGVsLCBlbmNvZGVkSlMsIGV2ZW50VHlwZSA9IG51bGwpe1xuICAgIHRoaXMub3duZXIoZWwsIHZpZXcgPT4gSlMuZXhlYyhldmVudFR5cGUsIGVuY29kZWRKUywgdmlldywgZWwpKVxuICB9XG5cbiAgLy8gcHJpdmF0ZVxuXG4gIGV4ZWNKU0hvb2tQdXNoKGVsLCBwaHhFdmVudCwgZGF0YSwgY2FsbGJhY2spe1xuICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgIEpTLmV4ZWMoXCJob29rXCIsIHBoeEV2ZW50LCB2aWV3LCBlbCwgW1wicHVzaFwiLCB7ZGF0YSwgY2FsbGJhY2t9XSlcbiAgICB9KVxuICB9XG5cbiAgdW5sb2FkKCl7XG4gICAgaWYodGhpcy51bmxvYWRlZCl7IHJldHVybiB9XG4gICAgaWYodGhpcy5tYWluICYmIHRoaXMuaXNDb25uZWN0ZWQoKSl7IHRoaXMubG9nKHRoaXMubWFpbiwgXCJzb2NrZXRcIiwgKCkgPT4gW1wiZGlzY29ubmVjdCBmb3IgcGFnZSBuYXZcIl0pIH1cbiAgICB0aGlzLnVubG9hZGVkID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveUFsbFZpZXdzKClcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICB9XG5cbiAgdHJpZ2dlckRPTShraW5kLCBhcmdzKXsgdGhpcy5kb21DYWxsYmFja3Nba2luZF0oLi4uYXJncykgfVxuXG4gIHRpbWUobmFtZSwgZnVuYyl7XG4gICAgaWYoIXRoaXMuaXNQcm9maWxlRW5hYmxlZCgpIHx8ICFjb25zb2xlLnRpbWUpeyByZXR1cm4gZnVuYygpIH1cbiAgICBjb25zb2xlLnRpbWUobmFtZSlcbiAgICBsZXQgcmVzdWx0ID0gZnVuYygpXG4gICAgY29uc29sZS50aW1lRW5kKG5hbWUpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgbG9nKHZpZXcsIGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICBpZih0aGlzLnZpZXdMb2dnZXIpe1xuICAgICAgbGV0IFttc2csIG9ial0gPSBtc2dDYWxsYmFjaygpXG4gICAgICB0aGlzLnZpZXdMb2dnZXIodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfSBlbHNlIGlmKHRoaXMuaXNEZWJ1Z0VuYWJsZWQoKSl7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIGRlYnVnKHZpZXcsIGtpbmQsIG1zZywgb2JqKVxuICAgIH1cbiAgfVxuXG4gIHJlcXVlc3RET01VcGRhdGUoY2FsbGJhY2spe1xuICAgIHRoaXMudHJhbnNpdGlvbnMuYWZ0ZXIoY2FsbGJhY2spXG4gIH1cblxuICB0cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSA9IGZ1bmN0aW9uKCl7fSl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGRUcmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIG9uQ2hhbm5lbChjaGFubmVsLCBldmVudCwgY2Ipe1xuICAgIGNoYW5uZWwub24oZXZlbnQsIGRhdGEgPT4ge1xuICAgICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgICAgaWYoIWxhdGVuY3kpe1xuICAgICAgICBjYihkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYihkYXRhKSwgbGF0ZW5jeSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgd3JhcFB1c2godmlldywgb3B0cywgcHVzaCl7XG4gICAgbGV0IGxhdGVuY3kgPSB0aGlzLmdldExhdGVuY3lTaW0oKVxuICAgIGxldCBvbGRKb2luQ291bnQgPSB2aWV3LmpvaW5Db3VudFxuICAgIGlmKCFsYXRlbmN5KXtcbiAgICAgIGlmKHRoaXMuaXNDb25uZWN0ZWQoKSAmJiBvcHRzLnRpbWVvdXQpe1xuICAgICAgICByZXR1cm4gcHVzaCgpLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgICAgICBpZih2aWV3LmpvaW5Db3VudCA9PT0gb2xkSm9pbkNvdW50ICYmICF2aWV3LmlzRGVzdHJveWVkKCkpe1xuICAgICAgICAgICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyKHZpZXcsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2codmlldywgXCJ0aW1lb3V0XCIsICgpID0+IFtcInJlY2VpdmVkIHRpbWVvdXQgd2hpbGUgY29tbXVuaWNhdGluZyB3aXRoIHNlcnZlci4gRmFsbGluZyBiYWNrIHRvIGhhcmQgcmVmcmVzaCBmb3IgcmVjb3ZlcnlcIl0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBwdXNoKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZmFrZVB1c2ggPSB7XG4gICAgICByZWNlaXZlczogW10sXG4gICAgICByZWNlaXZlKGtpbmQsIGNiKXsgdGhpcy5yZWNlaXZlcy5wdXNoKFtraW5kLCBjYl0pIH1cbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkpeyByZXR1cm4gfVxuICAgICAgZmFrZVB1c2gucmVjZWl2ZXMucmVkdWNlKChhY2MsIFtraW5kLCBjYl0pID0+IGFjYy5yZWNlaXZlKGtpbmQsIGNiKSwgcHVzaCgpKVxuICAgIH0sIGxhdGVuY3kpXG4gICAgcmV0dXJuIGZha2VQdXNoXG4gIH1cblxuICByZWxvYWRXaXRoSml0dGVyKHZpZXcsIGxvZyl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gICAgbGV0IG1pbk1zID0gdGhpcy5yZWxvYWRKaXR0ZXJNaW5cbiAgICBsZXQgbWF4TXMgPSB0aGlzLnJlbG9hZEppdHRlck1heFxuICAgIGxldCBhZnRlck1zID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heE1zIC0gbWluTXMgKyAxKSkgKyBtaW5Nc1xuICAgIGxldCB0cmllcyA9IEJyb3dzZXIudXBkYXRlTG9jYWwodGhpcy5sb2NhbFN0b3JhZ2UsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgQ09OU0VDVVRJVkVfUkVMT0FEUywgMCwgY291bnQgPT4gY291bnQgKyAxKVxuICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgIGFmdGVyTXMgPSB0aGlzLmZhaWxzYWZlSml0dGVyXG4gICAgfVxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBpZiB2aWV3IGhhcyByZWNvdmVyZWQsIHN1Y2ggYXMgdHJhbnNwb3J0IHJlcGxhY2VkLCB0aGVuIGNhbmNlbFxuICAgICAgaWYodmlldy5pc0Rlc3Ryb3llZCgpIHx8IHZpZXcuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgICB2aWV3LmRlc3Ryb3koKVxuICAgICAgbG9nID8gbG9nKCkgOiB0aGlzLmxvZyh2aWV3LCBcImpvaW5cIiwgKCkgPT4gW2BlbmNvdW50ZXJlZCAke3RyaWVzfSBjb25zZWN1dGl2ZSByZWxvYWRzYF0pXG4gICAgICBpZih0cmllcyA+IHRoaXMubWF4UmVsb2Fkcyl7XG4gICAgICAgIHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGV4Y2VlZGVkICR7dGhpcy5tYXhSZWxvYWRzfSBjb25zZWN1dGl2ZSByZWxvYWRzLiBFbnRlcmluZyBmYWlsc2FmZSBtb2RlYF0pXG4gICAgICB9XG4gICAgICBpZih0aGlzLmhhc1BlbmRpbmdMaW5rKCkpe1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgIH1cbiAgICB9LCBhZnRlck1zKVxuICB9XG5cbiAgZ2V0SG9va0NhbGxiYWNrcyhuYW1lKXtcbiAgICByZXR1cm4gbmFtZSAmJiBuYW1lLnN0YXJ0c1dpdGgoXCJQaG9lbml4LlwiKSA/IEhvb2tzW25hbWUuc3BsaXQoXCIuXCIpWzFdXSA6IHRoaXMuaG9va3NbbmFtZV1cbiAgfVxuXG4gIGlzVW5sb2FkZWQoKXsgcmV0dXJuIHRoaXMudW5sb2FkZWQgfVxuXG4gIGlzQ29ubmVjdGVkKCl7IHJldHVybiB0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpIH1cblxuICBnZXRCaW5kaW5nUHJlZml4KCl7IHJldHVybiB0aGlzLmJpbmRpbmdQcmVmaXggfVxuXG4gIGJpbmRpbmcoa2luZCl7IHJldHVybiBgJHt0aGlzLmdldEJpbmRpbmdQcmVmaXgoKX0ke2tpbmR9YCB9XG5cbiAgY2hhbm5lbCh0b3BpYywgcGFyYW1zKXsgcmV0dXJuIHRoaXMuc29ja2V0LmNoYW5uZWwodG9waWMsIHBhcmFtcykgfVxuXG4gIGpvaW5EZWFkVmlldygpe1xuICAgIGxldCBib2R5ID0gZG9jdW1lbnQuYm9keVxuICAgIGlmKGJvZHkgJiYgIXRoaXMuaXNQaHhWaWV3KGJvZHkpICYmICF0aGlzLmlzUGh4Vmlldyhkb2N1bWVudC5maXJzdEVsZW1lbnRDaGlsZCkpe1xuICAgICAgbGV0IHZpZXcgPSB0aGlzLm5ld1Jvb3RWaWV3KGJvZHkpXG4gICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICB2aWV3LmpvaW5EZWFkKClcbiAgICAgIGlmKCF0aGlzLm1haW4peyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdmlldy5leGVjTmV3TW91bnRlZCgpKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5Sb290Vmlld3MoKXtcbiAgICBsZXQgcm9vdHNGb3VuZCA9IGZhbHNlXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9Om5vdChbJHtQSFhfUEFSRU5UX0lEfV0pYCwgcm9vdEVsID0+IHtcbiAgICAgIGlmKCF0aGlzLmdldFJvb3RCeUlkKHJvb3RFbC5pZCkpe1xuICAgICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcocm9vdEVsKVxuICAgICAgICB2aWV3LnNldEhyZWYodGhpcy5nZXRIcmVmKCkpXG4gICAgICAgIHZpZXcuam9pbigpXG4gICAgICAgIGlmKHJvb3RFbC5oYXNBdHRyaWJ1dGUoUEhYX01BSU4pKXsgdGhpcy5tYWluID0gdmlldyB9XG4gICAgICB9XG4gICAgICByb290c0ZvdW5kID0gdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIHJvb3RzRm91bmRcbiAgfVxuXG4gIHJlZGlyZWN0KHRvLCBmbGFzaCl7XG4gICAgdGhpcy51bmxvYWQoKVxuICAgIEJyb3dzZXIucmVkaXJlY3QodG8sIGZsYXNoKVxuICB9XG5cbiAgcmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsIGNhbGxiYWNrID0gbnVsbCwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGxldCBsaXZlUmVmZXJlciA9IHRoaXMuY3VycmVudExvY2F0aW9uLmhyZWZcbiAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gdGhpcy5vdXRnb2luZ01haW5FbCB8fCB0aGlzLm1haW4uZWxcbiAgICBsZXQgbmV3TWFpbkVsID0gRE9NLmNsb25lTm9kZSh0aGlzLm91dGdvaW5nTWFpbkVsLCBcIlwiKVxuICAgIHRoaXMubWFpbi5zaG93TG9hZGVyKHRoaXMubG9hZGVyVGltZW91dClcbiAgICB0aGlzLm1haW4uZGVzdHJveSgpXG5cbiAgICB0aGlzLm1haW4gPSB0aGlzLm5ld1Jvb3RWaWV3KG5ld01haW5FbCwgZmxhc2gsIGxpdmVSZWZlcmVyKVxuICAgIHRoaXMubWFpbi5zZXRSZWRpcmVjdChocmVmKVxuICAgIHRoaXMudHJhbnNpdGlvblJlbW92ZXMoKVxuICAgIHRoaXMubWFpbi5qb2luKChqb2luQ291bnQsIG9uRG9uZSkgPT4ge1xuICAgICAgaWYoam9pbkNvdW50ID09PSAxICYmIHRoaXMuY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZikpe1xuICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICAgIERPTS5maW5kUGh4U3RpY2t5KGRvY3VtZW50KS5mb3JFYWNoKGVsID0+IG5ld01haW5FbC5hcHBlbmRDaGlsZChlbCkpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbC5yZXBsYWNlV2l0aChuZXdNYWluRWwpXG4gICAgICAgICAgdGhpcy5vdXRnb2luZ01haW5FbCA9IG51bGxcbiAgICAgICAgICBjYWxsYmFjayAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spXG4gICAgICAgICAgb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgdHJhbnNpdGlvblJlbW92ZXMoZWxlbWVudHMpe1xuICAgIGxldCByZW1vdmVBdHRyID0gdGhpcy5iaW5kaW5nKFwicmVtb3ZlXCIpXG4gICAgZWxlbWVudHMgPSBlbGVtZW50cyB8fCBET00uYWxsKGRvY3VtZW50LCBgWyR7cmVtb3ZlQXR0cn1dYClcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIHRoaXMuZXhlY0pTKGVsLCBlbC5nZXRBdHRyaWJ1dGUocmVtb3ZlQXR0ciksIFwicmVtb3ZlXCIpXG4gICAgfSlcbiAgfVxuXG4gIGlzUGh4VmlldyhlbCl7IHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKSAhPT0gbnVsbCB9XG5cbiAgbmV3Um9vdFZpZXcoZWwsIGZsYXNoLCBsaXZlUmVmZXJlcil7XG4gICAgbGV0IHZpZXcgPSBuZXcgVmlldyhlbCwgdGhpcywgbnVsbCwgZmxhc2gsIGxpdmVSZWZlcmVyKVxuICAgIHRoaXMucm9vdHNbdmlldy5pZF0gPSB2aWV3XG4gICAgcmV0dXJuIHZpZXdcbiAgfVxuXG4gIG93bmVyKGNoaWxkRWwsIGNhbGxiYWNrKXtcbiAgICBsZXQgdmlldyA9IG1heWJlKGNoaWxkRWwuY2xvc2VzdChQSFhfVklFV19TRUxFQ1RPUiksIGVsID0+IHRoaXMuZ2V0Vmlld0J5RWwoZWwpKSB8fCB0aGlzLm1haW5cbiAgICBpZih2aWV3KXsgY2FsbGJhY2sodmlldykgfVxuICB9XG5cbiAgd2l0aGluT3duZXJzKGNoaWxkRWwsIGNhbGxiYWNrKXtcbiAgICB0aGlzLm93bmVyKGNoaWxkRWwsIHZpZXcgPT4gY2FsbGJhY2sodmlldywgY2hpbGRFbCkpXG4gIH1cblxuICBnZXRWaWV3QnlFbChlbCl7XG4gICAgbGV0IHJvb3RJZCA9IGVsLmdldEF0dHJpYnV0ZShQSFhfUk9PVF9JRClcbiAgICByZXR1cm4gbWF5YmUodGhpcy5nZXRSb290QnlJZChyb290SWQpLCByb290ID0+IHJvb3QuZ2V0RGVzY2VuZGVudEJ5RWwoZWwpKVxuICB9XG5cbiAgZ2V0Um9vdEJ5SWQoaWQpeyByZXR1cm4gdGhpcy5yb290c1tpZF0gfVxuXG4gIGRlc3Ryb3lBbGxWaWV3cygpe1xuICAgIGZvcihsZXQgaWQgaW4gdGhpcy5yb290cyl7XG4gICAgICB0aGlzLnJvb3RzW2lkXS5kZXN0cm95KClcbiAgICAgIGRlbGV0ZSB0aGlzLnJvb3RzW2lkXVxuICAgIH1cbiAgICB0aGlzLm1haW4gPSBudWxsXG4gIH1cblxuICBkZXN0cm95Vmlld0J5RWwoZWwpe1xuICAgIGxldCByb290ID0gdGhpcy5nZXRSb290QnlJZChlbC5nZXRBdHRyaWJ1dGUoUEhYX1JPT1RfSUQpKVxuICAgIGlmKHJvb3QgJiYgcm9vdC5pZCA9PT0gZWwuaWQpe1xuICAgICAgcm9vdC5kZXN0cm95KClcbiAgICAgIGRlbGV0ZSB0aGlzLnJvb3RzW3Jvb3QuaWRdXG4gICAgfSBlbHNlIGlmKHJvb3Qpe1xuICAgICAgcm9vdC5kZXN0cm95RGVzY2VuZGVudChlbC5pZClcbiAgICB9XG4gIH1cblxuICBzZXRBY3RpdmVFbGVtZW50KHRhcmdldCl7XG4gICAgaWYodGhpcy5hY3RpdmVFbGVtZW50ID09PSB0YXJnZXQpeyByZXR1cm4gfVxuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IHRhcmdldFxuICAgIGxldCBjYW5jZWwgPSAoKSA9PiB7XG4gICAgICBpZih0YXJnZXQgPT09IHRoaXMuYWN0aXZlRWxlbWVudCl7IHRoaXMuYWN0aXZlRWxlbWVudCA9IG51bGwgfVxuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMpXG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMpXG4gICAgfVxuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBjYW5jZWwpXG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBjYW5jZWwpXG4gIH1cblxuICBnZXRBY3RpdmVFbGVtZW50KCl7XG4gICAgaWYoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSl7XG4gICAgICByZXR1cm4gdGhpcy5hY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gYmUgbnVsbCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMVxuICAgICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keVxuICAgIH1cbiAgfVxuXG4gIGRyb3BBY3RpdmVFbGVtZW50KHZpZXcpe1xuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAmJiB2aWV3Lm93bnNFbGVtZW50KHRoaXMucHJldkFjdGl2ZSkpe1xuICAgICAgdGhpcy5wcmV2QWN0aXZlID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHJlc3RvcmVQcmV2aW91c2x5QWN0aXZlRm9jdXMoKXtcbiAgICBpZih0aGlzLnByZXZBY3RpdmUgJiYgdGhpcy5wcmV2QWN0aXZlICE9PSBkb2N1bWVudC5ib2R5KXtcbiAgICAgIHRoaXMucHJldkFjdGl2ZS5mb2N1cygpXG4gICAgfVxuICB9XG5cbiAgYmx1ckFjdGl2ZUVsZW1lbnQoKXtcbiAgICB0aGlzLnByZXZBY3RpdmUgPSB0aGlzLmdldEFjdGl2ZUVsZW1lbnQoKVxuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAhPT0gZG9jdW1lbnQuYm9keSl7IHRoaXMucHJldkFjdGl2ZS5ibHVyKCkgfVxuICB9XG5cbiAgYmluZFRvcExldmVsRXZlbnRzKHtkZWFkfSA9IHt9KXtcbiAgICBpZih0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMpeyByZXR1cm4gfVxuXG4gICAgdGhpcy5ib3VuZFRvcExldmVsRXZlbnRzID0gdHJ1ZVxuICAgIC8vIGVudGVyIGZhaWxzYWZlIHJlbG9hZCBpZiBzZXJ2ZXIgaGFzIGdvbmUgYXdheSBpbnRlbnRpb25hbGx5LCBzdWNoIGFzIFwiZGlzY29ubmVjdFwiIGJyb2FkY2FzdFxuICAgIHRoaXMuc29ja2V0Lm9uQ2xvc2UoZXZlbnQgPT4ge1xuICAgICAgLy8gZmFpbHNhZmUgcmVsb2FkIGlmIG5vcm1hbCBjbG9zdXJlIGFuZCB3ZSBzdGlsbCBoYXZlIGEgbWFpbiBMVlxuICAgICAgaWYoZXZlbnQgJiYgZXZlbnQuY29kZSA9PT0gMTAwMCAmJiB0aGlzLm1haW4peyByZXR1cm4gdGhpcy5yZWxvYWRXaXRoSml0dGVyKHRoaXMubWFpbikgfVxuICAgIH0pXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCl7IH0pIC8vIGVuc3VyZSBhbGwgY2xpY2sgZXZlbnRzIGJ1YmJsZSBmb3IgbW9iaWxlIFNhZmFyaVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIiwgZSA9PiB7XG4gICAgICBpZihlLnBlcnNpc3RlZCl7IC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlXG4gICAgICAgIHRoaXMuZ2V0U29ja2V0KCkuZGlzY29ubmVjdCgpXG4gICAgICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogd2luZG93LmxvY2F0aW9uLmhyZWYsIGtpbmQ6IFwicmVkaXJlY3RcIn0pXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0sIHRydWUpXG4gICAgaWYoIWRlYWQpeyB0aGlzLmJpbmROYXYoKSB9XG4gICAgdGhpcy5iaW5kQ2xpY2tzKClcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZEZvcm1zKCkgfVxuICAgIHRoaXMuYmluZCh7a2V5dXA6IFwia2V5dXBcIiwga2V5ZG93bjogXCJrZXlkb3duXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgbGV0IG1hdGNoS2V5ID0gdGFyZ2V0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfS0VZKSlcbiAgICAgIGxldCBwcmVzc2VkS2V5ID0gZS5rZXkgJiYgZS5rZXkudG9Mb3dlckNhc2UoKSAvLyBjaHJvbWUgY2xpY2tlZCBhdXRvY29tcGxldGVzIHNlbmQgYSBrZXlkb3duIHdpdGhvdXQga2V5XG4gICAgICBpZihtYXRjaEtleSAmJiBtYXRjaEtleS50b0xvd2VyQ2FzZSgpICE9PSBwcmVzc2VkS2V5KXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICB9KVxuICAgIHRoaXMuYmluZCh7Ymx1cjogXCJmb2N1c291dFwiLCBmb2N1czogXCJmb2N1c2luXCJ9LCAoZSwgdHlwZSwgdmlldywgdGFyZ2V0RWwsIHBoeEV2ZW50LCBldmVudFRhcmdldCkgPT4ge1xuICAgICAgaWYoIWV2ZW50VGFyZ2V0KXtcbiAgICAgICAgbGV0IGRhdGEgPSB7a2V5OiBlLmtleSwgLi4udGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpfVxuICAgICAgICBKUy5leGVjKHR5cGUsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXRFbCwgW1wicHVzaFwiLCB7ZGF0YX1dKVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5iaW5kKHtibHVyOiBcImJsdXJcIiwgZm9jdXM6IFwiZm9jdXNcIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgcGh4VGFyZ2V0KSA9PiB7XG4gICAgICAvLyBibHVyIGFuZCBmb2N1cyBhcmUgdHJpZ2dlcmVkIG9uIGRvY3VtZW50IGFuZCB3aW5kb3cuIERpc2NhcmQgb25lIHRvIGF2b2lkIGR1cHNcbiAgICAgIGlmKHBoeFRhcmdldCA9PT0gXCJ3aW5kb3dcIil7XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5ldmVudE1ldGEodHlwZSwgZSwgdGFyZ2V0RWwpXG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgbGV0IGRyb3BUYXJnZXRJZCA9IG1heWJlKGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCB0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSksIHRydWVUYXJnZXQgPT4ge1xuICAgICAgICByZXR1cm4gdHJ1ZVRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9EUk9QX1RBUkdFVCkpXG4gICAgICB9KVxuICAgICAgbGV0IGRyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZHJvcFRhcmdldElkKVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyB8fCBbXSlcbiAgICAgIGlmKCFkcm9wVGFyZ2V0IHx8IGRyb3BUYXJnZXQuZGlzYWJsZWQgfHwgZmlsZXMubGVuZ3RoID09PSAwIHx8ICEoZHJvcFRhcmdldC5maWxlcyBpbnN0YW5jZW9mIEZpbGVMaXN0KSl7IHJldHVybiB9XG5cbiAgICAgIExpdmVVcGxvYWRlci50cmFja0ZpbGVzKGRyb3BUYXJnZXQsIGZpbGVzLCBlLmRhdGFUcmFuc2ZlcilcbiAgICAgIGRyb3BUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKVxuICAgIH0pXG4gICAgdGhpcy5vbihQSFhfVFJBQ0tfVVBMT0FEUywgZSA9PiB7XG4gICAgICBsZXQgdXBsb2FkVGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgIGlmKCFET00uaXNVcGxvYWRJbnB1dCh1cGxvYWRUYXJnZXQpKXsgcmV0dXJuIH1cbiAgICAgIGxldCBmaWxlcyA9IEFycmF5LmZyb20oZS5kZXRhaWwuZmlsZXMgfHwgW10pLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBGaWxlIHx8IGYgaW5zdGFuY2VvZiBCbG9iKVxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXModXBsb2FkVGFyZ2V0LCBmaWxlcylcbiAgICAgIHVwbG9hZFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgfVxuXG4gIGV2ZW50TWV0YShldmVudE5hbWUsIGUsIHRhcmdldEVsKXtcbiAgICBsZXQgY2FsbGJhY2sgPSB0aGlzLm1ldGFkYXRhQ2FsbGJhY2tzW2V2ZW50TmFtZV1cbiAgICByZXR1cm4gY2FsbGJhY2sgPyBjYWxsYmFjayhlLCB0YXJnZXRFbCkgOiB7fVxuICB9XG5cbiAgc2V0UGVuZGluZ0xpbmsoaHJlZil7XG4gICAgdGhpcy5saW5rUmVmKytcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gaHJlZlxuICAgIHJldHVybiB0aGlzLmxpbmtSZWZcbiAgfVxuXG4gIGNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpe1xuICAgIGlmKHRoaXMubGlua1JlZiAhPT0gbGlua1JlZil7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ocmVmID0gdGhpcy5wZW5kaW5nTGlua1xuICAgICAgdGhpcy5wZW5kaW5nTGluayA9IG51bGxcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZ2V0SHJlZigpeyByZXR1cm4gdGhpcy5ocmVmIH1cblxuICBoYXNQZW5kaW5nTGluaygpeyByZXR1cm4gISF0aGlzLnBlbmRpbmdMaW5rIH1cblxuICBiaW5kKGV2ZW50cywgY2FsbGJhY2spe1xuICAgIGZvcihsZXQgZXZlbnQgaW4gZXZlbnRzKXtcbiAgICAgIGxldCBicm93c2VyRXZlbnROYW1lID0gZXZlbnRzW2V2ZW50XVxuXG4gICAgICB0aGlzLm9uKGJyb3dzZXJFdmVudE5hbWUsIGUgPT4ge1xuICAgICAgICBsZXQgYmluZGluZyA9IHRoaXMuYmluZGluZyhldmVudClcbiAgICAgICAgbGV0IHdpbmRvd0JpbmRpbmcgPSB0aGlzLmJpbmRpbmcoYHdpbmRvdy0ke2V2ZW50fWApXG4gICAgICAgIGxldCB0YXJnZXRQaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoYmluZGluZylcbiAgICAgICAgaWYodGFyZ2V0UGh4RXZlbnQpe1xuICAgICAgICAgIHRoaXMuZGVib3VuY2UoZS50YXJnZXQsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgY2FsbGJhY2soZSwgZXZlbnQsIHZpZXcsIGUudGFyZ2V0LCB0YXJnZXRQaHhFdmVudCwgbnVsbClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7d2luZG93QmluZGluZ31dYCwgZWwgPT4ge1xuICAgICAgICAgICAgbGV0IHBoeEV2ZW50ID0gZWwuZ2V0QXR0cmlidXRlKHdpbmRvd0JpbmRpbmcpXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlKGVsLCBlLCBicm93c2VyRXZlbnROYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZWwsIHBoeEV2ZW50LCBcIndpbmRvd1wiKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGJpbmRDbGlja3MoKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IGUudGFyZ2V0KVxuICAgIHRoaXMuYmluZENsaWNrKFwiY2xpY2tcIiwgXCJjbGlja1wiLCBmYWxzZSlcbiAgICB0aGlzLmJpbmRDbGljayhcIm1vdXNlZG93blwiLCBcImNhcHR1cmUtY2xpY2tcIiwgdHJ1ZSlcbiAgfVxuXG4gIGJpbmRDbGljayhldmVudE5hbWUsIGJpbmRpbmdOYW1lLCBjYXB0dXJlKXtcbiAgICBsZXQgY2xpY2sgPSB0aGlzLmJpbmRpbmcoYmluZGluZ05hbWUpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBudWxsXG4gICAgICBpZihjYXB0dXJlKXtcbiAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQubWF0Y2hlcyhgWyR7Y2xpY2t9XWApID8gZS50YXJnZXQgOiBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKGBbJHtjbGlja31dYClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBjbGlja1N0YXJ0ZWRBdFRhcmdldCA9IHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgfHwgZS50YXJnZXRcbiAgICAgICAgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoY2xpY2tTdGFydGVkQXRUYXJnZXQsIGNsaWNrKVxuICAgICAgICB0aGlzLmRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0VGFyZ2V0KVxuICAgICAgICB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gbnVsbFxuICAgICAgfVxuICAgICAgbGV0IHBoeEV2ZW50ID0gdGFyZ2V0ICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoY2xpY2spXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBsZXQgaHJlZiA9IGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgPyBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpIDogbnVsbFxuICAgICAgICBpZighY2FwdHVyZSAmJiBocmVmICE9PSBudWxsICYmICFET00ud2FudHNOZXdUYWIoZSkgJiYgRE9NLmlzTmV3UGFnZUhyZWYoaHJlZiwgd2luZG93LmxvY2F0aW9uKSl7XG4gICAgICAgICAgdGhpcy51bmxvYWQoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYodGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiKXsgZS5wcmV2ZW50RGVmYXVsdCgpIH1cbiAgICAgIC8vIG5vb3AgaWYgd2UgYXJlIGluIHRoZSBtaWRkbGUgb2YgYXdhaXRpbmcgYW4gYWNrIGZvciB0aGlzIGVsIGFscmVhZHlcbiAgICAgIGlmKHRhcmdldC5oYXNBdHRyaWJ1dGUoUEhYX1JFRikpeyByZXR1cm4gfVxuXG4gICAgICB0aGlzLmRlYm91bmNlKHRhcmdldCwgZSwgXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMud2l0aGluT3duZXJzKHRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgICAgSlMuZXhlYyhcImNsaWNrXCIsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXQsIFtcInB1c2hcIiwge2RhdGE6IHRoaXMuZXZlbnRNZXRhKFwiY2xpY2tcIiwgZSwgdGFyZ2V0KX1dKVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LCBjYXB0dXJlKVxuICB9XG5cbiAgZGlzcGF0Y2hDbGlja0F3YXkoZSwgY2xpY2tTdGFydGVkQXQpe1xuICAgIGxldCBwaHhDbGlja0F3YXkgPSB0aGlzLmJpbmRpbmcoXCJjbGljay1hd2F5XCIpXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske3BoeENsaWNrQXdheX1dYCwgZWwgPT4ge1xuICAgICAgaWYoIShlbC5pc1NhbWVOb2RlKGNsaWNrU3RhcnRlZEF0KSB8fCBlbC5jb250YWlucyhjbGlja1N0YXJ0ZWRBdCkpKXtcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIGxldCBwaHhFdmVudCA9IGVsLmdldEF0dHJpYnV0ZShwaHhDbGlja0F3YXkpXG4gICAgICAgICAgaWYoSlMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgICAgICBKUy5leGVjKFwiY2xpY2tcIiwgcGh4RXZlbnQsIHZpZXcsIGVsLCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIGUudGFyZ2V0KX1dKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYmluZE5hdigpe1xuICAgIGlmKCFCcm93c2VyLmNhblB1c2hTdGF0ZSgpKXsgcmV0dXJuIH1cbiAgICBpZihoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uKXsgaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9IFwibWFudWFsXCIgfVxuICAgIGxldCBzY3JvbGxUaW1lciA9IG51bGxcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBfZSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsVGltZXIpXG4gICAgICBzY3JvbGxUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBCcm93c2VyLnVwZGF0ZUN1cnJlbnRTdGF0ZShzdGF0ZSA9PiBPYmplY3QuYXNzaWduKHN0YXRlLCB7c2Nyb2xsOiB3aW5kb3cuc2Nyb2xsWX0pKVxuICAgICAgfSwgMTAwKVxuICAgIH0pXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBldmVudCA9PiB7XG4gICAgICBpZighdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbikpeyByZXR1cm4gfVxuICAgICAgbGV0IHt0eXBlLCBpZCwgcm9vdCwgc2Nyb2xsfSA9IGV2ZW50LnN0YXRlIHx8IHt9XG4gICAgICBsZXQgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG5cbiAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHRoaXMubWFpbi5pc0Nvbm5lY3RlZCgpICYmICh0eXBlID09PSBcInBhdGNoXCIgJiYgaWQgPT09IHRoaXMubWFpbi5pZCkpe1xuICAgICAgICAgIHRoaXMubWFpbi5wdXNoTGlua1BhdGNoKGhyZWYsIG51bGwsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubWF5YmVTY3JvbGwoc2Nyb2xsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZXBsYWNlTWFpbihocmVmLCBudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICBpZihyb290KXsgdGhpcy5yZXBsYWNlUm9vdEhpc3RvcnkoKSB9XG4gICAgICAgICAgICB0aGlzLm1heWJlU2Nyb2xsKHNjcm9sbClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gY2xvc2VzdFBoeEJpbmRpbmcoZS50YXJnZXQsIFBIWF9MSVZFX0xJTkspXG4gICAgICBsZXQgdHlwZSA9IHRhcmdldCAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSVZFX0xJTkspXG4gICAgICBpZighdHlwZSB8fCAhdGhpcy5pc0Nvbm5lY3RlZCgpIHx8ICF0aGlzLm1haW4gfHwgRE9NLndhbnRzTmV3VGFiKGUpKXsgcmV0dXJuIH1cblxuICAgICAgbGV0IGhyZWYgPSB0YXJnZXQuaHJlZlxuICAgICAgbGV0IGxpbmtTdGF0ZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoUEhYX0xJTktfU1RBVEUpXG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkgLy8gZG8gbm90IGJ1YmJsZSBjbGljayB0byByZWd1bGFyIHBoeC1jbGljayBiaW5kaW5nc1xuICAgICAgaWYodGhpcy5wZW5kaW5nTGluayA9PT0gaHJlZil7IHJldHVybiB9XG5cbiAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIGlmKHR5cGUgPT09IFwicGF0Y2hcIil7XG4gICAgICAgICAgdGhpcy5wdXNoSGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgdGFyZ2V0KVxuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJyZWRpcmVjdFwiKXtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlSZWRpcmVjdChocmVmLCBsaW5rU3RhdGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBleHBlY3RlZCAke1BIWF9MSVZFX0xJTkt9IHRvIGJlIFwicGF0Y2hcIiBvciBcInJlZGlyZWN0XCIsIGdvdDogJHt0eXBlfWApXG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBoeENsaWNrID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjbGlja1wiKSlcbiAgICAgICAgaWYocGh4Q2xpY2spe1xuICAgICAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB0aGlzLmV4ZWNKUyh0YXJnZXQsIHBoeENsaWNrLCBcImNsaWNrXCIpKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuICB9XG5cbiAgbWF5YmVTY3JvbGwoc2Nyb2xsKSB7XG4gICAgaWYodHlwZW9mKHNjcm9sbCkgPT09IFwibnVtYmVyXCIpe1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbClcbiAgICAgIH0pIC8vIHRoZSBib2R5IG5lZWRzIHRvIHJlbmRlciBiZWZvcmUgd2Ugc2Nyb2xsLlxuICAgIH1cbiAgfVxuXG4gIGRpc3BhdGNoRXZlbnQoZXZlbnQsIHBheWxvYWQgPSB7fSl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBgcGh4OiR7ZXZlbnR9YCwge2RldGFpbDogcGF5bG9hZH0pXG4gIH1cblxuICBkaXNwYXRjaEV2ZW50cyhldmVudHMpe1xuICAgIGV2ZW50cy5mb3JFYWNoKChbZXZlbnQsIHBheWxvYWRdKSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQsIHBheWxvYWQpKVxuICB9XG5cbiAgd2l0aFBhZ2VMb2FkaW5nKGluZm8sIGNhbGxiYWNrKXtcbiAgICBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCB7ZGV0YWlsOiBpbmZvfSlcbiAgICBsZXQgZG9uZSA9ICgpID0+IERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgXCJwaHg6cGFnZS1sb2FkaW5nLXN0b3BcIiwge2RldGFpbDogaW5mb30pXG4gICAgcmV0dXJuIGNhbGxiYWNrID8gY2FsbGJhY2soZG9uZSkgOiBkb25lXG4gIH1cblxuICBwdXNoSGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgdGFyZ2V0RWwpe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gQnJvd3Nlci5yZWRpcmVjdChocmVmKSB9XG5cbiAgICB0aGlzLndpdGhQYWdlTG9hZGluZyh7dG86IGhyZWYsIGtpbmQ6IFwicGF0Y2hcIn0sIGRvbmUgPT4ge1xuICAgICAgdGhpcy5tYWluLnB1c2hMaW5rUGF0Y2goaHJlZiwgdGFyZ2V0RWwsIGxpbmtSZWYgPT4ge1xuICAgICAgICB0aGlzLmhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIGxpbmtSZWYpXG4gICAgICAgIGRvbmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaGlzdG9yeVBhdGNoKGhyZWYsIGxpbmtTdGF0ZSwgbGlua1JlZiA9IHRoaXMuc2V0UGVuZGluZ0xpbmsoaHJlZikpe1xuICAgIGlmKCF0aGlzLmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXsgcmV0dXJuIH1cblxuICAgIEJyb3dzZXIucHVzaFN0YXRlKGxpbmtTdGF0ZSwge3R5cGU6IFwicGF0Y2hcIiwgaWQ6IHRoaXMubWFpbi5pZH0sIGhyZWYpXG4gICAgdGhpcy5yZWdpc3Rlck5ld0xvY2F0aW9uKHdpbmRvdy5sb2NhdGlvbilcbiAgfVxuXG4gIGhpc3RvcnlSZWRpcmVjdChocmVmLCBsaW5rU3RhdGUsIGZsYXNoKXtcbiAgICAvLyBjb252ZXJ0IHRvIGZ1bGwgaHJlZiBpZiBvbmx5IHBhdGggcHJlZml4XG4gICAgaWYoIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiBCcm93c2VyLnJlZGlyZWN0KGhyZWYsIGZsYXNoKSB9XG4gICAgaWYoL15cXC8kfF5cXC9bXlxcL10rLiokLy50ZXN0KGhyZWYpKXtcbiAgICAgIGxldCB7cHJvdG9jb2wsIGhvc3R9ID0gd2luZG93LmxvY2F0aW9uXG4gICAgICBocmVmID0gYCR7cHJvdG9jb2x9Ly8ke2hvc3R9JHtocmVmfWBcbiAgICB9XG4gICAgbGV0IHNjcm9sbCA9IHdpbmRvdy5zY3JvbGxZXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInJlZGlyZWN0XCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgZmxhc2gsICgpID0+IHtcbiAgICAgICAgQnJvd3Nlci5wdXNoU3RhdGUobGlua1N0YXRlLCB7dHlwZTogXCJyZWRpcmVjdFwiLCBpZDogdGhpcy5tYWluLmlkLCBzY3JvbGw6IHNjcm9sbH0sIGhyZWYpXG4gICAgICAgIHRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pXG4gICAgICAgIGRvbmUoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgcmVwbGFjZVJvb3RIaXN0b3J5KCl7XG4gICAgQnJvd3Nlci5wdXNoU3RhdGUoXCJyZXBsYWNlXCIsIHtyb290OiB0cnVlLCB0eXBlOiBcInBhdGNoXCIsIGlkOiB0aGlzLm1haW4uaWR9KVxuICB9XG5cbiAgcmVnaXN0ZXJOZXdMb2NhdGlvbihuZXdMb2NhdGlvbil7XG4gICAgbGV0IHtwYXRobmFtZSwgc2VhcmNofSA9IHRoaXMuY3VycmVudExvY2F0aW9uXG4gICAgaWYocGF0aG5hbWUgKyBzZWFyY2ggPT09IG5ld0xvY2F0aW9uLnBhdGhuYW1lICsgbmV3TG9jYXRpb24uc2VhcmNoKXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IGNsb25lKG5ld0xvY2F0aW9uKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBiaW5kRm9ybXMoKXtcbiAgICBsZXQgaXRlcmF0aW9ucyA9IDBcbiAgICBsZXQgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gZmFsc2VcblxuICAgIC8vIGRpc2FibGUgZm9ybXMgb24gc3VibWl0IHRoYXQgdHJhY2sgcGh4LWNoYW5nZSBidXQgcGVyZm9ybSBleHRlcm5hbCBzdWJtaXRcbiAgICB0aGlzLm9uKFwic3VibWl0XCIsIGUgPT4ge1xuICAgICAgbGV0IHBoeFN1Ym1pdCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBsZXQgcGh4Q2hhbmdlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSlcbiAgICAgIGlmKCFleHRlcm5hbEZvcm1TdWJtaXR0ZWQgJiYgcGh4Q2hhbmdlICYmICFwaHhTdWJtaXQpe1xuICAgICAgICBleHRlcm5hbEZvcm1TdWJtaXR0ZWQgPSB0cnVlXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgICAgdmlldy5kaXNhYmxlRm9ybShlLnRhcmdldClcbiAgICAgICAgICAvLyBzYWZhcmkgbmVlZHMgbmV4dCB0aWNrXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICAgICAgZS50YXJnZXQuc3VibWl0KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sIHRydWUpXG5cbiAgICB0aGlzLm9uKFwic3VibWl0XCIsIGUgPT4ge1xuICAgICAgbGV0IHBoeEV2ZW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcInN1Ym1pdFwiKSlcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGlmKERPTS5pc1VubG9hZGFibGVGb3JtU3VibWl0KGUpKXsgdGhpcy51bmxvYWQoKSB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnRhcmdldC5kaXNhYmxlZCA9IHRydWVcbiAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgSlMuZXhlYyhcInN1Ym1pdFwiLCBwaHhFdmVudCwgdmlldywgZS50YXJnZXQsIFtcInB1c2hcIiwge3N1Ym1pdHRlcjogZS5zdWJtaXR0ZXJ9XSlcbiAgICAgIH0pXG4gICAgfSwgZmFsc2UpXG5cbiAgICBmb3IobGV0IHR5cGUgb2YgW1wiY2hhbmdlXCIsIFwiaW5wdXRcIl0pe1xuICAgICAgdGhpcy5vbih0eXBlLCBlID0+IHtcbiAgICAgICAgbGV0IHBoeENoYW5nZSA9IHRoaXMuYmluZGluZyhcImNoYW5nZVwiKVxuICAgICAgICBsZXQgaW5wdXQgPSBlLnRhcmdldFxuICAgICAgICBsZXQgaW5wdXRFdmVudCA9IGlucHV0LmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBmb3JtRXZlbnQgPSBpbnB1dC5mb3JtICYmIGlucHV0LmZvcm0uZ2V0QXR0cmlidXRlKHBoeENoYW5nZSlcbiAgICAgICAgbGV0IHBoeEV2ZW50ID0gaW5wdXRFdmVudCB8fCBmb3JtRXZlbnRcbiAgICAgICAgaWYoIXBoeEV2ZW50KXsgcmV0dXJuIH1cbiAgICAgICAgaWYoaW5wdXQudHlwZSA9PT0gXCJudW1iZXJcIiAmJiBpbnB1dC52YWxpZGl0eSAmJiBpbnB1dC52YWxpZGl0eS5iYWRJbnB1dCl7IHJldHVybiB9XG5cbiAgICAgICAgbGV0IGRpc3BhdGNoZXIgPSBpbnB1dEV2ZW50ID8gaW5wdXQgOiBpbnB1dC5mb3JtXG4gICAgICAgIGxldCBjdXJyZW50SXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnNcbiAgICAgICAgaXRlcmF0aW9ucysrXG4gICAgICAgIGxldCB7YXQ6IGF0LCB0eXBlOiBsYXN0VHlwZX0gPSBET00ucHJpdmF0ZShpbnB1dCwgXCJwcmV2LWl0ZXJhdGlvblwiKSB8fCB7fVxuICAgICAgICAvLyBkZXRlY3QgZHVwIGJlY2F1c2Ugc29tZSBicm93c2VycyBkaXNwYXRjaCBib3RoIFwiaW5wdXRcIiBhbmQgXCJjaGFuZ2VcIlxuICAgICAgICBpZihhdCA9PT0gY3VycmVudEl0ZXJhdGlvbnMgLSAxICYmIHR5cGUgIT09IGxhc3RUeXBlKXsgcmV0dXJuIH1cblxuICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgXCJwcmV2LWl0ZXJhdGlvblwiLCB7YXQ6IGN1cnJlbnRJdGVyYXRpb25zLCB0eXBlOiB0eXBlfSlcblxuICAgICAgICB0aGlzLmRlYm91bmNlKGlucHV0LCBlLCB0eXBlLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZGlzcGF0Y2hlciwgdmlldyA9PiB7XG4gICAgICAgICAgICBET00ucHV0UHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VELCB0cnVlKVxuICAgICAgICAgICAgaWYoIURPTS5pc1RleHR1YWxJbnB1dChpbnB1dCkpe1xuICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUVsZW1lbnQoaW5wdXQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogZS50YXJnZXQubmFtZSwgZGlzcGF0Y2hlcjogZGlzcGF0Y2hlcn1dKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9LCBmYWxzZSlcbiAgICB9XG4gICAgdGhpcy5vbihcInJlc2V0XCIsIChlKSA9PiB7XG4gICAgICBsZXQgZm9ybSA9IGUudGFyZ2V0XG4gICAgICBET00ucmVzZXRGb3JtKGZvcm0sIHRoaXMuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKSlcbiAgICAgIGxldCBpbnB1dCA9IEFycmF5LmZyb20oZm9ybS5lbGVtZW50cykuZmluZChlbCA9PiBlbC50eXBlID09PSBcInJlc2V0XCIpXG4gICAgICAvLyB3YWl0IHVudGlsIG5leHQgdGljayB0byBnZXQgdXBkYXRlZCBpbnB1dCB2YWx1ZVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IGZhbHNlfSkpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIGV2ZW50VHlwZSwgY2FsbGJhY2spe1xuICAgIGlmKGV2ZW50VHlwZSA9PT0gXCJibHVyXCIgfHwgZXZlbnRUeXBlID09PSBcImZvY3Vzb3V0XCIpeyByZXR1cm4gY2FsbGJhY2soKSB9XG5cbiAgICBsZXQgcGh4RGVib3VuY2UgPSB0aGlzLmJpbmRpbmcoUEhYX0RFQk9VTkNFKVxuICAgIGxldCBwaHhUaHJvdHRsZSA9IHRoaXMuYmluZGluZyhQSFhfVEhST1RUTEUpXG4gICAgbGV0IGRlZmF1bHREZWJvdW5jZSA9IHRoaXMuZGVmYXVsdHMuZGVib3VuY2UudG9TdHJpbmcoKVxuICAgIGxldCBkZWZhdWx0VGhyb3R0bGUgPSB0aGlzLmRlZmF1bHRzLnRocm90dGxlLnRvU3RyaW5nKClcblxuICAgIHRoaXMud2l0aGluT3duZXJzKGVsLCB2aWV3ID0+IHtcbiAgICAgIGxldCBhc3luY0ZpbHRlciA9ICgpID0+ICF2aWV3LmlzRGVzdHJveWVkKCkgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyhlbClcbiAgICAgIERPTS5kZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCAoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHNpbGVuY2VFdmVudHMoY2FsbGJhY2spe1xuICAgIHRoaXMuc2lsZW5jZWQgPSB0cnVlXG4gICAgY2FsbGJhY2soKVxuICAgIHRoaXMuc2lsZW5jZWQgPSBmYWxzZVxuICB9XG5cbiAgb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZSA9PiB7XG4gICAgICBpZighdGhpcy5zaWxlbmNlZCl7IGNhbGxiYWNrKGUpIH1cbiAgICB9KVxuICB9XG59XG5cbmNsYXNzIFRyYW5zaXRpb25TZXQge1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMudHJhbnNpdGlvbnMgPSBuZXcgU2V0KClcbiAgICB0aGlzLnBlbmRpbmdPcHMgPSBbXVxuICB9XG5cbiAgcmVzZXQoKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmZvckVhY2godGltZXIgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgfSlcbiAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gIH1cblxuICBhZnRlcihjYWxsYmFjayl7XG4gICAgaWYodGhpcy5zaXplKCkgPT09IDApe1xuICAgICAgY2FsbGJhY2soKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnB1c2hQZW5kaW5nT3AoY2FsbGJhY2spXG4gICAgfVxuICB9XG5cbiAgYWRkVHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUpe1xuICAgIG9uU3RhcnQoKVxuICAgIGxldCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmFuc2l0aW9ucy5kZWxldGUodGltZXIpXG4gICAgICBvbkRvbmUoKVxuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICAgIH0sIHRpbWUpXG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZGQodGltZXIpXG4gIH1cblxuICBwdXNoUGVuZGluZ09wKG9wKXsgdGhpcy5wZW5kaW5nT3BzLnB1c2gob3ApIH1cblxuICBzaXplKCl7IHJldHVybiB0aGlzLnRyYW5zaXRpb25zLnNpemUgfVxuXG4gIGZsdXNoUGVuZGluZ09wcygpe1xuICAgIGlmKHRoaXMuc2l6ZSgpID4gMCl7IHJldHVybiB9XG4gICAgbGV0IG9wID0gdGhpcy5wZW5kaW5nT3BzLnNoaWZ0KClcbiAgICBpZihvcCl7XG4gICAgICBvcCgpXG4gICAgICB0aGlzLmZsdXNoUGVuZGluZ09wcygpXG4gICAgfVxuICB9XG59XG4iLCAiZXhwb3J0IHZhciB0b3AgPSAndG9wJztcbmV4cG9ydCB2YXIgYm90dG9tID0gJ2JvdHRvbSc7XG5leHBvcnQgdmFyIHJpZ2h0ID0gJ3JpZ2h0JztcbmV4cG9ydCB2YXIgbGVmdCA9ICdsZWZ0JztcbmV4cG9ydCB2YXIgYXV0byA9ICdhdXRvJztcbmV4cG9ydCB2YXIgYmFzZVBsYWNlbWVudHMgPSBbdG9wLCBib3R0b20sIHJpZ2h0LCBsZWZ0XTtcbmV4cG9ydCB2YXIgc3RhcnQgPSAnc3RhcnQnO1xuZXhwb3J0IHZhciBlbmQgPSAnZW5kJztcbmV4cG9ydCB2YXIgY2xpcHBpbmdQYXJlbnRzID0gJ2NsaXBwaW5nUGFyZW50cyc7XG5leHBvcnQgdmFyIHZpZXdwb3J0ID0gJ3ZpZXdwb3J0JztcbmV4cG9ydCB2YXIgcG9wcGVyID0gJ3BvcHBlcic7XG5leHBvcnQgdmFyIHJlZmVyZW5jZSA9ICdyZWZlcmVuY2UnO1xuZXhwb3J0IHZhciB2YXJpYXRpb25QbGFjZW1lbnRzID0gLyojX19QVVJFX18qL2Jhc2VQbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCArIFwiLVwiICsgc3RhcnQsIHBsYWNlbWVudCArIFwiLVwiICsgZW5kXSk7XG59LCBbXSk7XG5leHBvcnQgdmFyIHBsYWNlbWVudHMgPSAvKiNfX1BVUkVfXyovW10uY29uY2F0KGJhc2VQbGFjZW1lbnRzLCBbYXV0b10pLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCwgcGxhY2VtZW50ICsgXCItXCIgKyBzdGFydCwgcGxhY2VtZW50ICsgXCItXCIgKyBlbmRdKTtcbn0sIFtdKTsgLy8gbW9kaWZpZXJzIHRoYXQgbmVlZCB0byByZWFkIHRoZSBET01cblxuZXhwb3J0IHZhciBiZWZvcmVSZWFkID0gJ2JlZm9yZVJlYWQnO1xuZXhwb3J0IHZhciByZWFkID0gJ3JlYWQnO1xuZXhwb3J0IHZhciBhZnRlclJlYWQgPSAnYWZ0ZXJSZWFkJzsgLy8gcHVyZS1sb2dpYyBtb2RpZmllcnNcblxuZXhwb3J0IHZhciBiZWZvcmVNYWluID0gJ2JlZm9yZU1haW4nO1xuZXhwb3J0IHZhciBtYWluID0gJ21haW4nO1xuZXhwb3J0IHZhciBhZnRlck1haW4gPSAnYWZ0ZXJNYWluJzsgLy8gbW9kaWZpZXIgd2l0aCB0aGUgcHVycG9zZSB0byB3cml0ZSB0byB0aGUgRE9NIChvciB3cml0ZSBpbnRvIGEgZnJhbWV3b3JrIHN0YXRlKVxuXG5leHBvcnQgdmFyIGJlZm9yZVdyaXRlID0gJ2JlZm9yZVdyaXRlJztcbmV4cG9ydCB2YXIgd3JpdGUgPSAnd3JpdGUnO1xuZXhwb3J0IHZhciBhZnRlcldyaXRlID0gJ2FmdGVyV3JpdGUnO1xuZXhwb3J0IHZhciBtb2RpZmllclBoYXNlcyA9IFtiZWZvcmVSZWFkLCByZWFkLCBhZnRlclJlYWQsIGJlZm9yZU1haW4sIG1haW4sIGFmdGVyTWFpbiwgYmVmb3JlV3JpdGUsIHdyaXRlLCBhZnRlcldyaXRlXTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZU5hbWUoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudCA/IChlbGVtZW50Lm5vZGVOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpIDogbnVsbDtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93KG5vZGUpIHtcbiAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cblxuICBpZiAobm9kZS50b1N0cmluZygpICE9PSAnW29iamVjdCBXaW5kb3ddJykge1xuICAgIHZhciBvd25lckRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50O1xuICAgIHJldHVybiBvd25lckRvY3VtZW50ID8gb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cgOiB3aW5kb3c7XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcblxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuRWxlbWVudDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBpc0hUTUxFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuSFRNTEVsZW1lbnQ7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzU2hhZG93Um9vdChub2RlKSB7XG4gIC8vIElFIDExIGhhcyBubyBTaGFkb3dSb290XG4gIGlmICh0eXBlb2YgU2hhZG93Um9vdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5TaGFkb3dSb290O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q7XG59XG5cbmV4cG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCwgaXNTaGFkb3dSb290IH07IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7IC8vIFRoaXMgbW9kaWZpZXIgdGFrZXMgdGhlIHN0eWxlcyBwcmVwYXJlZCBieSB0aGUgYGNvbXB1dGVTdHlsZXNgIG1vZGlmaWVyXG4vLyBhbmQgYXBwbGllcyB0aGVtIHRvIHRoZSBIVE1MRWxlbWVudHMgc3VjaCBhcyBwb3BwZXIgYW5kIGFycm93XG5cbmZ1bmN0aW9uIGFwcGx5U3R5bGVzKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZTtcbiAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgc3R5bGUgPSBzdGF0ZS5zdHlsZXNbbmFtZV0gfHwge307XG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBzdGF0ZS5hdHRyaWJ1dGVzW25hbWVdIHx8IHt9O1xuICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07IC8vIGFycm93IGlzIG9wdGlvbmFsICsgdmlydHVhbCBlbGVtZW50c1xuXG4gICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gRmxvdyBkb2Vzbid0IHN1cHBvcnQgdG8gZXh0ZW5kIHRoaXMgcHJvcGVydHksIGJ1dCBpdCdzIHRoZSBtb3N0XG4gICAgLy8gZWZmZWN0aXZlIHdheSB0byBhcHBseSBzdHlsZXMgdG8gYW4gSFRNTEVsZW1lbnRcbiAgICAvLyAkRmxvd0ZpeE1lW2Nhbm5vdC13cml0ZV1cblxuXG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZSk7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gYXR0cmlidXRlc1tuYW1lXTtcblxuICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGU7XG4gIHZhciBpbml0aWFsU3R5bGVzID0ge1xuICAgIHBvcHBlcjoge1xuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBsZWZ0OiAnMCcsXG4gICAgICB0b3A6ICcwJyxcbiAgICAgIG1hcmdpbjogJzAnXG4gICAgfSxcbiAgICBhcnJvdzoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9LFxuICAgIHJlZmVyZW5jZToge31cbiAgfTtcbiAgT2JqZWN0LmFzc2lnbihzdGF0ZS5lbGVtZW50cy5wb3BwZXIuc3R5bGUsIGluaXRpYWxTdHlsZXMucG9wcGVyKTtcbiAgc3RhdGUuc3R5bGVzID0gaW5pdGlhbFN0eWxlcztcblxuICBpZiAoc3RhdGUuZWxlbWVudHMuYXJyb3cpIHtcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLmVsZW1lbnRzLmFycm93LnN0eWxlLCBpbml0aWFsU3R5bGVzLmFycm93KTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07XG4gICAgICB2YXIgYXR0cmlidXRlcyA9IHN0YXRlLmF0dHJpYnV0ZXNbbmFtZV0gfHwge307XG4gICAgICB2YXIgc3R5bGVQcm9wZXJ0aWVzID0gT2JqZWN0LmtleXMoc3RhdGUuc3R5bGVzLmhhc093blByb3BlcnR5KG5hbWUpID8gc3RhdGUuc3R5bGVzW25hbWVdIDogaW5pdGlhbFN0eWxlc1tuYW1lXSk7IC8vIFNldCBhbGwgdmFsdWVzIHRvIGFuIGVtcHR5IHN0cmluZyB0byB1bnNldCB0aGVtXG5cbiAgICAgIHZhciBzdHlsZSA9IHN0eWxlUHJvcGVydGllcy5yZWR1Y2UoZnVuY3Rpb24gKHN0eWxlLCBwcm9wZXJ0eSkge1xuICAgICAgICBzdHlsZVtwcm9wZXJ0eV0gPSAnJztcbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfSwge30pOyAvLyBhcnJvdyBpcyBvcHRpb25hbCArIHZpcnR1YWwgZWxlbWVudHNcblxuICAgICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgc3R5bGUpO1xuICAgICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2FwcGx5U3R5bGVzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICd3cml0ZScsXG4gIGZuOiBhcHBseVN0eWxlcyxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIHJlcXVpcmVzOiBbJ2NvbXB1dGVTdHlsZXMnXVxufTsiLCAiaW1wb3J0IHsgYXV0byB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzBdO1xufSIsICJleHBvcnQgdmFyIG1heCA9IE1hdGgubWF4O1xuZXhwb3J0IHZhciBtaW4gPSBNYXRoLm1pbjtcbmV4cG9ydCB2YXIgcm91bmQgPSBNYXRoLnJvdW5kOyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRVQVN0cmluZygpIHtcbiAgdmFyIHVhRGF0YSA9IG5hdmlnYXRvci51c2VyQWdlbnREYXRhO1xuXG4gIGlmICh1YURhdGEgIT0gbnVsbCAmJiB1YURhdGEuYnJhbmRzKSB7XG4gICAgcmV0dXJuIHVhRGF0YS5icmFuZHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5icmFuZCArIFwiL1wiICsgaXRlbS52ZXJzaW9uO1xuICAgIH0pLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50O1xufSIsICJpbXBvcnQgZ2V0VUFTdHJpbmcgZnJvbSBcIi4uL3V0aWxzL3VzZXJBZ2VudC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNMYXlvdXRWaWV3cG9ydCgpIHtcbiAgcmV0dXJuICEvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xufSIsICJpbXBvcnQgeyBpc0VsZW1lbnQsIGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGlzTGF5b3V0Vmlld3BvcnQgZnJvbSBcIi4vaXNMYXlvdXRWaWV3cG9ydC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIGluY2x1ZGVTY2FsZSwgaXNGaXhlZFN0cmF0ZWd5KSB7XG4gIGlmIChpbmNsdWRlU2NhbGUgPT09IHZvaWQgMCkge1xuICAgIGluY2x1ZGVTY2FsZSA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGlzRml4ZWRTdHJhdGVneSA9PT0gdm9pZCAwKSB7XG4gICAgaXNGaXhlZFN0cmF0ZWd5ID0gZmFsc2U7XG4gIH1cblxuICB2YXIgY2xpZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciBzY2FsZVggPSAxO1xuICB2YXIgc2NhbGVZID0gMTtcblxuICBpZiAoaW5jbHVkZVNjYWxlICYmIGlzSFRNTEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICBzY2FsZVggPSBlbGVtZW50Lm9mZnNldFdpZHRoID4gMCA/IHJvdW5kKGNsaWVudFJlY3Qud2lkdGgpIC8gZWxlbWVudC5vZmZzZXRXaWR0aCB8fCAxIDogMTtcbiAgICBzY2FsZVkgPSBlbGVtZW50Lm9mZnNldEhlaWdodCA+IDAgPyByb3VuZChjbGllbnRSZWN0LmhlaWdodCkgLyBlbGVtZW50Lm9mZnNldEhlaWdodCB8fCAxIDogMTtcbiAgfVxuXG4gIHZhciBfcmVmID0gaXNFbGVtZW50KGVsZW1lbnQpID8gZ2V0V2luZG93KGVsZW1lbnQpIDogd2luZG93LFxuICAgICAgdmlzdWFsVmlld3BvcnQgPSBfcmVmLnZpc3VhbFZpZXdwb3J0O1xuXG4gIHZhciBhZGRWaXN1YWxPZmZzZXRzID0gIWlzTGF5b3V0Vmlld3BvcnQoKSAmJiBpc0ZpeGVkU3RyYXRlZ3k7XG4gIHZhciB4ID0gKGNsaWVudFJlY3QubGVmdCArIChhZGRWaXN1YWxPZmZzZXRzICYmIHZpc3VhbFZpZXdwb3J0ID8gdmlzdWFsVmlld3BvcnQub2Zmc2V0TGVmdCA6IDApKSAvIHNjYWxlWDtcbiAgdmFyIHkgPSAoY2xpZW50UmVjdC50b3AgKyAoYWRkVmlzdWFsT2Zmc2V0cyAmJiB2aXN1YWxWaWV3cG9ydCA/IHZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcCA6IDApKSAvIHNjYWxlWTtcbiAgdmFyIHdpZHRoID0gY2xpZW50UmVjdC53aWR0aCAvIHNjYWxlWDtcbiAgdmFyIGhlaWdodCA9IGNsaWVudFJlY3QuaGVpZ2h0IC8gc2NhbGVZO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICB0b3A6IHksXG4gICAgcmlnaHQ6IHggKyB3aWR0aCxcbiAgICBib3R0b206IHkgKyBoZWlnaHQsXG4gICAgbGVmdDogeCxcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcbn0iLCAiaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjsgLy8gUmV0dXJucyB0aGUgbGF5b3V0IHJlY3Qgb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byBpdHMgb2Zmc2V0UGFyZW50LiBMYXlvdXRcbi8vIG1lYW5zIGl0IGRvZXNuJ3QgdGFrZSBpbnRvIGFjY291bnQgdHJhbnNmb3Jtcy5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0TGF5b3V0UmVjdChlbGVtZW50KSB7XG4gIHZhciBjbGllbnRSZWN0ID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQpOyAvLyBVc2UgdGhlIGNsaWVudFJlY3Qgc2l6ZXMgaWYgaXQncyBub3QgYmVlbiB0cmFuc2Zvcm1lZC5cbiAgLy8gRml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy8xMjIzXG5cbiAgdmFyIHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXG4gIGlmIChNYXRoLmFicyhjbGllbnRSZWN0LndpZHRoIC0gd2lkdGgpIDw9IDEpIHtcbiAgICB3aWR0aCA9IGNsaWVudFJlY3Qud2lkdGg7XG4gIH1cblxuICBpZiAoTWF0aC5hYnMoY2xpZW50UmVjdC5oZWlnaHQgLSBoZWlnaHQpIDw9IDEpIHtcbiAgICBoZWlnaHQgPSBjbGllbnRSZWN0LmhlaWdodDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgeDogZWxlbWVudC5vZmZzZXRMZWZ0LFxuICAgIHk6IGVsZW1lbnQub2Zmc2V0VG9wLFxuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodFxuICB9O1xufSIsICJpbXBvcnQgeyBpc1NoYWRvd1Jvb3QgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb250YWlucyhwYXJlbnQsIGNoaWxkKSB7XG4gIHZhciByb290Tm9kZSA9IGNoaWxkLmdldFJvb3ROb2RlICYmIGNoaWxkLmdldFJvb3ROb2RlKCk7IC8vIEZpcnN0LCBhdHRlbXB0IHdpdGggZmFzdGVyIG5hdGl2ZSBtZXRob2RcblxuICBpZiAocGFyZW50LmNvbnRhaW5zKGNoaWxkKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IC8vIHRoZW4gZmFsbGJhY2sgdG8gY3VzdG9tIGltcGxlbWVudGF0aW9uIHdpdGggU2hhZG93IERPTSBzdXBwb3J0XG4gIGVsc2UgaWYgKHJvb3ROb2RlICYmIGlzU2hhZG93Um9vdChyb290Tm9kZSkpIHtcbiAgICAgIHZhciBuZXh0ID0gY2hpbGQ7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKG5leHQgJiYgcGFyZW50LmlzU2FtZU5vZGUobmV4dCkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ106IG5lZWQgYSBiZXR0ZXIgd2F5IHRvIGhhbmRsZSB0aGlzLi4uXG5cblxuICAgICAgICBuZXh0ID0gbmV4dC5wYXJlbnROb2RlIHx8IG5leHQuaG9zdDtcbiAgICAgIH0gd2hpbGUgKG5leHQpO1xuICAgIH0gLy8gR2l2ZSB1cCwgdGhlIHJlc3VsdCBpcyBmYWxzZVxuXG5cbiAgcmV0dXJuIGZhbHNlO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSB7XG4gIHJldHVybiBnZXRXaW5kb3coZWxlbWVudCkuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbn0iLCAiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RhYmxlRWxlbWVudChlbGVtZW50KSB7XG4gIHJldHVybiBbJ3RhYmxlJywgJ3RkJywgJ3RoJ10uaW5kZXhPZihnZXROb2RlTmFtZShlbGVtZW50KSkgPj0gMDtcbn0iLCAiaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpIHtcbiAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogYXNzdW1lIGJvZHkgaXMgYWx3YXlzIGF2YWlsYWJsZVxuICByZXR1cm4gKChpc0VsZW1lbnQoZWxlbWVudCkgPyBlbGVtZW50Lm93bmVyRG9jdW1lbnQgOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgZWxlbWVudC5kb2N1bWVudCkgfHwgd2luZG93LmRvY3VtZW50KS5kb2N1bWVudEVsZW1lbnQ7XG59IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IGlzU2hhZG93Um9vdCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFBhcmVudE5vZGUoZWxlbWVudCkge1xuICBpZiAoZ2V0Tm9kZU5hbWUoZWxlbWVudCkgPT09ICdodG1sJykge1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuICgvLyB0aGlzIGlzIGEgcXVpY2tlciAoYnV0IGxlc3MgdHlwZSBzYWZlKSB3YXkgdG8gc2F2ZSBxdWl0ZSBzb21lIGJ5dGVzIGZyb20gdGhlIGJ1bmRsZVxuICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl1cbiAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICBlbGVtZW50LmFzc2lnbmVkU2xvdCB8fCAvLyBzdGVwIGludG8gdGhlIHNoYWRvdyBET00gb2YgdGhlIHBhcmVudCBvZiBhIHNsb3R0ZWQgbm9kZVxuICAgIGVsZW1lbnQucGFyZW50Tm9kZSB8fCAoIC8vIERPTSBFbGVtZW50IGRldGVjdGVkXG4gICAgaXNTaGFkb3dSb290KGVsZW1lbnQpID8gZWxlbWVudC5ob3N0IDogbnVsbCkgfHwgLy8gU2hhZG93Um9vdCBkZXRlY3RlZFxuICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdOiBIVE1MRWxlbWVudCBpcyBhIE5vZGVcbiAgICBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkgLy8gZmFsbGJhY2tcblxuICApO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50LCBpc1NoYWRvd1Jvb3QgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgaXNUYWJsZUVsZW1lbnQgZnJvbSBcIi4vaXNUYWJsZUVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBnZXRVQVN0cmluZyBmcm9tIFwiLi4vdXRpbHMvdXNlckFnZW50LmpzXCI7XG5cbmZ1bmN0aW9uIGdldFRydWVPZmZzZXRQYXJlbnQoZWxlbWVudCkge1xuICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy84MzdcbiAgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0UGFyZW50O1xufSAvLyBgLm9mZnNldFBhcmVudGAgcmVwb3J0cyBgbnVsbGAgZm9yIGZpeGVkIGVsZW1lbnRzLCB3aGlsZSBhYnNvbHV0ZSBlbGVtZW50c1xuLy8gcmV0dXJuIHRoZSBjb250YWluaW5nIGJsb2NrXG5cblxuZnVuY3Rpb24gZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHtcbiAgdmFyIGlzRmlyZWZveCA9IC9maXJlZm94L2kudGVzdChnZXRVQVN0cmluZygpKTtcbiAgdmFyIGlzSUUgPSAvVHJpZGVudC9pLnRlc3QoZ2V0VUFTdHJpbmcoKSk7XG5cbiAgaWYgKGlzSUUgJiYgaXNIVE1MRWxlbWVudChlbGVtZW50KSkge1xuICAgIC8vIEluIElFIDksIDEwIGFuZCAxMSBmaXhlZCBlbGVtZW50cyBjb250YWluaW5nIGJsb2NrIGlzIGFsd2F5cyBlc3RhYmxpc2hlZCBieSB0aGUgdmlld3BvcnRcbiAgICB2YXIgZWxlbWVudENzcyA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cbiAgICBpZiAoZWxlbWVudENzcy5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgdmFyIGN1cnJlbnROb2RlID0gZ2V0UGFyZW50Tm9kZShlbGVtZW50KTtcblxuICBpZiAoaXNTaGFkb3dSb290KGN1cnJlbnROb2RlKSkge1xuICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUuaG9zdDtcbiAgfVxuXG4gIHdoaWxlIChpc0hUTUxFbGVtZW50KGN1cnJlbnROb2RlKSAmJiBbJ2h0bWwnLCAnYm9keSddLmluZGV4T2YoZ2V0Tm9kZU5hbWUoY3VycmVudE5vZGUpKSA8IDApIHtcbiAgICB2YXIgY3NzID0gZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50Tm9kZSk7IC8vIFRoaXMgaXMgbm9uLWV4aGF1c3RpdmUgYnV0IGNvdmVycyB0aGUgbW9zdCBjb21tb24gQ1NTIHByb3BlcnRpZXMgdGhhdFxuICAgIC8vIGNyZWF0ZSBhIGNvbnRhaW5pbmcgYmxvY2suXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL0NvbnRhaW5pbmdfYmxvY2sjaWRlbnRpZnlpbmdfdGhlX2NvbnRhaW5pbmdfYmxvY2tcblxuICAgIGlmIChjc3MudHJhbnNmb3JtICE9PSAnbm9uZScgfHwgY3NzLnBlcnNwZWN0aXZlICE9PSAnbm9uZScgfHwgY3NzLmNvbnRhaW4gPT09ICdwYWludCcgfHwgWyd0cmFuc2Zvcm0nLCAncGVyc3BlY3RpdmUnXS5pbmRleE9mKGNzcy53aWxsQ2hhbmdlKSAhPT0gLTEgfHwgaXNGaXJlZm94ICYmIGNzcy53aWxsQ2hhbmdlID09PSAnZmlsdGVyJyB8fCBpc0ZpcmVmb3ggJiYgY3NzLmZpbHRlciAmJiBjc3MuZmlsdGVyICE9PSAnbm9uZScpIHtcbiAgICAgIHJldHVybiBjdXJyZW50Tm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufSAvLyBHZXRzIHRoZSBjbG9zZXN0IGFuY2VzdG9yIHBvc2l0aW9uZWQgZWxlbWVudC4gSGFuZGxlcyBzb21lIGVkZ2UgY2FzZXMsXG4vLyBzdWNoIGFzIHRhYmxlIGFuY2VzdG9ycyBhbmQgY3Jvc3MgYnJvd3NlciBidWdzLlxuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE9mZnNldFBhcmVudChlbGVtZW50KSB7XG4gIHZhciB3aW5kb3cgPSBnZXRXaW5kb3coZWxlbWVudCk7XG4gIHZhciBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KGVsZW1lbnQpO1xuXG4gIHdoaWxlIChvZmZzZXRQYXJlbnQgJiYgaXNUYWJsZUVsZW1lbnQob2Zmc2V0UGFyZW50KSAmJiBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCkucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgb2Zmc2V0UGFyZW50ID0gZ2V0VHJ1ZU9mZnNldFBhcmVudChvZmZzZXRQYXJlbnQpO1xuICB9XG5cbiAgaWYgKG9mZnNldFBhcmVudCAmJiAoZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSA9PT0gJ2h0bWwnIHx8IGdldE5vZGVOYW1lKG9mZnNldFBhcmVudCkgPT09ICdib2R5JyAmJiBnZXRDb21wdXRlZFN0eWxlKG9mZnNldFBhcmVudCkucG9zaXRpb24gPT09ICdzdGF0aWMnKSkge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cblxuICByZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGdldENvbnRhaW5pbmdCbG9jayhlbGVtZW50KSB8fCB3aW5kb3c7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIFsndG9wJywgJ2JvdHRvbSddLmluZGV4T2YocGxhY2VtZW50KSA+PSAwID8gJ3gnIDogJ3knO1xufSIsICJpbXBvcnQgeyBtYXggYXMgbWF0aE1heCwgbWluIGFzIG1hdGhNaW4gfSBmcm9tIFwiLi9tYXRoLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gd2l0aGluKG1pbiwgdmFsdWUsIG1heCkge1xuICByZXR1cm4gbWF0aE1heChtaW4sIG1hdGhNaW4odmFsdWUsIG1heCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhpbk1heENsYW1wKG1pbiwgdmFsdWUsIG1heCkge1xuICB2YXIgdiA9IHdpdGhpbihtaW4sIHZhbHVlLCBtYXgpO1xuICByZXR1cm4gdiA+IG1heCA/IG1heCA6IHY7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEZyZXNoU2lkZU9iamVjdCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0b3A6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGxlZnQ6IDBcbiAgfTtcbn0iLCAiaW1wb3J0IGdldEZyZXNoU2lkZU9iamVjdCBmcm9tIFwiLi9nZXRGcmVzaFNpZGVPYmplY3QuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlUGFkZGluZ09iamVjdChwYWRkaW5nT2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBnZXRGcmVzaFNpZGVPYmplY3QoKSwgcGFkZGluZ09iamVjdCk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGV4cGFuZFRvSGFzaE1hcCh2YWx1ZSwga2V5cykge1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGhhc2hNYXAsIGtleSkge1xuICAgIGhhc2hNYXBba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiBoYXNoTWFwO1xuICB9LCB7fSk7XG59IiwgImltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0TGF5b3V0UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBjb250YWlucyBmcm9tIFwiLi4vZG9tLXV0aWxzL2NvbnRhaW5zLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IHdpdGhpbiB9IGZyb20gXCIuLi91dGlscy93aXRoaW4uanNcIjtcbmltcG9ydCBtZXJnZVBhZGRpbmdPYmplY3QgZnJvbSBcIi4uL3V0aWxzL21lcmdlUGFkZGluZ09iamVjdC5qc1wiO1xuaW1wb3J0IGV4cGFuZFRvSGFzaE1hcCBmcm9tIFwiLi4vdXRpbHMvZXhwYW5kVG9IYXNoTWFwLmpzXCI7XG5pbXBvcnQgeyBsZWZ0LCByaWdodCwgYmFzZVBsYWNlbWVudHMsIHRvcCwgYm90dG9tIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHRvUGFkZGluZ09iamVjdCA9IGZ1bmN0aW9uIHRvUGFkZGluZ09iamVjdChwYWRkaW5nLCBzdGF0ZSkge1xuICBwYWRkaW5nID0gdHlwZW9mIHBhZGRpbmcgPT09ICdmdW5jdGlvbicgPyBwYWRkaW5nKE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnJlY3RzLCB7XG4gICAgcGxhY2VtZW50OiBzdGF0ZS5wbGFjZW1lbnRcbiAgfSkpIDogcGFkZGluZztcbiAgcmV0dXJuIG1lcmdlUGFkZGluZ09iamVjdCh0eXBlb2YgcGFkZGluZyAhPT0gJ251bWJlcicgPyBwYWRkaW5nIDogZXhwYW5kVG9IYXNoTWFwKHBhZGRpbmcsIGJhc2VQbGFjZW1lbnRzKSk7XG59O1xuXG5mdW5jdGlvbiBhcnJvdyhfcmVmKSB7XG4gIHZhciBfc3RhdGUkbW9kaWZpZXJzRGF0YSQ7XG5cbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zO1xuICB2YXIgYXJyb3dFbGVtZW50ID0gc3RhdGUuZWxlbWVudHMuYXJyb3c7XG4gIHZhciBwb3BwZXJPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzO1xuICB2YXIgYmFzZVBsYWNlbWVudCA9IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KTtcbiAgdmFyIGF4aXMgPSBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCk7XG4gIHZhciBpc1ZlcnRpY2FsID0gW2xlZnQsIHJpZ2h0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpID49IDA7XG4gIHZhciBsZW4gPSBpc1ZlcnRpY2FsID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gIGlmICghYXJyb3dFbGVtZW50IHx8ICFwb3BwZXJPZmZzZXRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHBhZGRpbmdPYmplY3QgPSB0b1BhZGRpbmdPYmplY3Qob3B0aW9ucy5wYWRkaW5nLCBzdGF0ZSk7XG4gIHZhciBhcnJvd1JlY3QgPSBnZXRMYXlvdXRSZWN0KGFycm93RWxlbWVudCk7XG4gIHZhciBtaW5Qcm9wID0gYXhpcyA9PT0gJ3knID8gdG9wIDogbGVmdDtcbiAgdmFyIG1heFByb3AgPSBheGlzID09PSAneScgPyBib3R0b20gOiByaWdodDtcbiAgdmFyIGVuZERpZmYgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2VbbGVuXSArIHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtheGlzXSAtIHBvcHBlck9mZnNldHNbYXhpc10gLSBzdGF0ZS5yZWN0cy5wb3BwZXJbbGVuXTtcbiAgdmFyIHN0YXJ0RGlmZiA9IHBvcHBlck9mZnNldHNbYXhpc10gLSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2VbYXhpc107XG4gIHZhciBhcnJvd09mZnNldFBhcmVudCA9IGdldE9mZnNldFBhcmVudChhcnJvd0VsZW1lbnQpO1xuICB2YXIgY2xpZW50U2l6ZSA9IGFycm93T2Zmc2V0UGFyZW50ID8gYXhpcyA9PT0gJ3knID8gYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50SGVpZ2h0IHx8IDAgOiBhcnJvd09mZnNldFBhcmVudC5jbGllbnRXaWR0aCB8fCAwIDogMDtcbiAgdmFyIGNlbnRlclRvUmVmZXJlbmNlID0gZW5kRGlmZiAvIDIgLSBzdGFydERpZmYgLyAyOyAvLyBNYWtlIHN1cmUgdGhlIGFycm93IGRvZXNuJ3Qgb3ZlcmZsb3cgdGhlIHBvcHBlciBpZiB0aGUgY2VudGVyIHBvaW50IGlzXG4gIC8vIG91dHNpZGUgb2YgdGhlIHBvcHBlciBib3VuZHNcblxuICB2YXIgbWluID0gcGFkZGluZ09iamVjdFttaW5Qcm9wXTtcbiAgdmFyIG1heCA9IGNsaWVudFNpemUgLSBhcnJvd1JlY3RbbGVuXSAtIHBhZGRpbmdPYmplY3RbbWF4UHJvcF07XG4gIHZhciBjZW50ZXIgPSBjbGllbnRTaXplIC8gMiAtIGFycm93UmVjdFtsZW5dIC8gMiArIGNlbnRlclRvUmVmZXJlbmNlO1xuICB2YXIgb2Zmc2V0ID0gd2l0aGluKG1pbiwgY2VudGVyLCBtYXgpOyAvLyBQcmV2ZW50cyBicmVha2luZyBzeW50YXggaGlnaGxpZ2h0aW5nLi4uXG5cbiAgdmFyIGF4aXNQcm9wID0gYXhpcztcbiAgc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXSA9IChfc3RhdGUkbW9kaWZpZXJzRGF0YSQgPSB7fSwgX3N0YXRlJG1vZGlmaWVyc0RhdGEkW2F4aXNQcm9wXSA9IG9mZnNldCwgX3N0YXRlJG1vZGlmaWVyc0RhdGEkLmNlbnRlck9mZnNldCA9IG9mZnNldCAtIGNlbnRlciwgX3N0YXRlJG1vZGlmaWVyc0RhdGEkKTtcbn1cblxuZnVuY3Rpb24gZWZmZWN0KF9yZWYyKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlLFxuICAgICAgb3B0aW9ucyA9IF9yZWYyLm9wdGlvbnM7XG4gIHZhciBfb3B0aW9ucyRlbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50LFxuICAgICAgYXJyb3dFbGVtZW50ID0gX29wdGlvbnMkZWxlbWVudCA9PT0gdm9pZCAwID8gJ1tkYXRhLXBvcHBlci1hcnJvd10nIDogX29wdGlvbnMkZWxlbWVudDtcblxuICBpZiAoYXJyb3dFbGVtZW50ID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gQ1NTIHNlbGVjdG9yXG5cblxuICBpZiAodHlwZW9mIGFycm93RWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5wb3BwZXIucXVlcnlTZWxlY3RvcihhcnJvd0VsZW1lbnQpO1xuXG4gICAgaWYgKCFhcnJvd0VsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgaWYgKCFpc0hUTUxFbGVtZW50KGFycm93RWxlbWVudCkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoWydQb3BwZXI6IFwiYXJyb3dcIiBlbGVtZW50IG11c3QgYmUgYW4gSFRNTEVsZW1lbnQgKG5vdCBhbiBTVkdFbGVtZW50KS4nLCAnVG8gdXNlIGFuIFNWRyBhcnJvdywgd3JhcCBpdCBpbiBhbiBIVE1MRWxlbWVudCB0aGF0IHdpbGwgYmUgdXNlZCBhcycsICd0aGUgYXJyb3cuJ10uam9pbignICcpKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbnRhaW5zKHN0YXRlLmVsZW1lbnRzLnBvcHBlciwgYXJyb3dFbGVtZW50KSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoWydQb3BwZXI6IFwiYXJyb3dcIiBtb2RpZmllclxcJ3MgYGVsZW1lbnRgIG11c3QgYmUgYSBjaGlsZCBvZiB0aGUgcG9wcGVyJywgJ2VsZW1lbnQuJ10uam9pbignICcpKTtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBzdGF0ZS5lbGVtZW50cy5hcnJvdyA9IGFycm93RWxlbWVudDtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2Fycm93JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IGFycm93LFxuICBlZmZlY3Q6IGVmZmVjdCxcbiAgcmVxdWlyZXM6IFsncG9wcGVyT2Zmc2V0cyddLFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ3ByZXZlbnRPdmVyZmxvdyddXG59OyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQuc3BsaXQoJy0nKVsxXTtcbn0iLCAiaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgYm90dG9tLCBlbmQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IHsgcm91bmQgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbnZhciB1bnNldFNpZGVzID0ge1xuICB0b3A6ICdhdXRvJyxcbiAgcmlnaHQ6ICdhdXRvJyxcbiAgYm90dG9tOiAnYXV0bycsXG4gIGxlZnQ6ICdhdXRvJ1xufTsgLy8gUm91bmQgdGhlIG9mZnNldHMgdG8gdGhlIG5lYXJlc3Qgc3VpdGFibGUgc3VicGl4ZWwgYmFzZWQgb24gdGhlIERQUi5cbi8vIFpvb21pbmcgY2FuIGNoYW5nZSB0aGUgRFBSLCBidXQgaXQgc2VlbXMgdG8gcmVwb3J0IGEgdmFsdWUgdGhhdCB3aWxsXG4vLyBjbGVhbmx5IGRpdmlkZSB0aGUgdmFsdWVzIGludG8gdGhlIGFwcHJvcHJpYXRlIHN1YnBpeGVscy5cblxuZnVuY3Rpb24gcm91bmRPZmZzZXRzQnlEUFIoX3JlZikge1xuICB2YXIgeCA9IF9yZWYueCxcbiAgICAgIHkgPSBfcmVmLnk7XG4gIHZhciB3aW4gPSB3aW5kb3c7XG4gIHZhciBkcHIgPSB3aW4uZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICByZXR1cm4ge1xuICAgIHg6IHJvdW5kKHggKiBkcHIpIC8gZHByIHx8IDAsXG4gICAgeTogcm91bmQoeSAqIGRwcikgLyBkcHIgfHwgMFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwVG9TdHlsZXMoX3JlZjIpIHtcbiAgdmFyIF9PYmplY3QkYXNzaWduMjtcblxuICB2YXIgcG9wcGVyID0gX3JlZjIucG9wcGVyLFxuICAgICAgcG9wcGVyUmVjdCA9IF9yZWYyLnBvcHBlclJlY3QsXG4gICAgICBwbGFjZW1lbnQgPSBfcmVmMi5wbGFjZW1lbnQsXG4gICAgICB2YXJpYXRpb24gPSBfcmVmMi52YXJpYXRpb24sXG4gICAgICBvZmZzZXRzID0gX3JlZjIub2Zmc2V0cyxcbiAgICAgIHBvc2l0aW9uID0gX3JlZjIucG9zaXRpb24sXG4gICAgICBncHVBY2NlbGVyYXRpb24gPSBfcmVmMi5ncHVBY2NlbGVyYXRpb24sXG4gICAgICBhZGFwdGl2ZSA9IF9yZWYyLmFkYXB0aXZlLFxuICAgICAgcm91bmRPZmZzZXRzID0gX3JlZjIucm91bmRPZmZzZXRzLFxuICAgICAgaXNGaXhlZCA9IF9yZWYyLmlzRml4ZWQ7XG4gIHZhciBfb2Zmc2V0cyR4ID0gb2Zmc2V0cy54LFxuICAgICAgeCA9IF9vZmZzZXRzJHggPT09IHZvaWQgMCA/IDAgOiBfb2Zmc2V0cyR4LFxuICAgICAgX29mZnNldHMkeSA9IG9mZnNldHMueSxcbiAgICAgIHkgPSBfb2Zmc2V0cyR5ID09PSB2b2lkIDAgPyAwIDogX29mZnNldHMkeTtcblxuICB2YXIgX3JlZjMgPSB0eXBlb2Ygcm91bmRPZmZzZXRzID09PSAnZnVuY3Rpb24nID8gcm91bmRPZmZzZXRzKHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfSkgOiB7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG5cbiAgeCA9IF9yZWYzLng7XG4gIHkgPSBfcmVmMy55O1xuICB2YXIgaGFzWCA9IG9mZnNldHMuaGFzT3duUHJvcGVydHkoJ3gnKTtcbiAgdmFyIGhhc1kgPSBvZmZzZXRzLmhhc093blByb3BlcnR5KCd5Jyk7XG4gIHZhciBzaWRlWCA9IGxlZnQ7XG4gIHZhciBzaWRlWSA9IHRvcDtcbiAgdmFyIHdpbiA9IHdpbmRvdztcblxuICBpZiAoYWRhcHRpdmUpIHtcbiAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KHBvcHBlcik7XG4gICAgdmFyIGhlaWdodFByb3AgPSAnY2xpZW50SGVpZ2h0JztcbiAgICB2YXIgd2lkdGhQcm9wID0gJ2NsaWVudFdpZHRoJztcblxuICAgIGlmIChvZmZzZXRQYXJlbnQgPT09IGdldFdpbmRvdyhwb3BwZXIpKSB7XG4gICAgICBvZmZzZXRQYXJlbnQgPSBnZXREb2N1bWVudEVsZW1lbnQocG9wcGVyKTtcblxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiAhPT0gJ3N0YXRpYycgJiYgcG9zaXRpb24gPT09ICdhYnNvbHV0ZScpIHtcbiAgICAgICAgaGVpZ2h0UHJvcCA9ICdzY3JvbGxIZWlnaHQnO1xuICAgICAgICB3aWR0aFByb3AgPSAnc2Nyb2xsV2lkdGgnO1xuICAgICAgfVxuICAgIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FzdF06IGZvcmNlIHR5cGUgcmVmaW5lbWVudCwgd2UgY29tcGFyZSBvZmZzZXRQYXJlbnQgd2l0aCB3aW5kb3cgYWJvdmUsIGJ1dCBGbG93IGRvZXNuJ3QgZGV0ZWN0IGl0XG5cblxuICAgIG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudDtcblxuICAgIGlmIChwbGFjZW1lbnQgPT09IHRvcCB8fCAocGxhY2VtZW50ID09PSBsZWZ0IHx8IHBsYWNlbWVudCA9PT0gcmlnaHQpICYmIHZhcmlhdGlvbiA9PT0gZW5kKSB7XG4gICAgICBzaWRlWSA9IGJvdHRvbTtcbiAgICAgIHZhciBvZmZzZXRZID0gaXNGaXhlZCAmJiBvZmZzZXRQYXJlbnQgPT09IHdpbiAmJiB3aW4udmlzdWFsVmlld3BvcnQgPyB3aW4udmlzdWFsVmlld3BvcnQuaGVpZ2h0IDogLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICBvZmZzZXRQYXJlbnRbaGVpZ2h0UHJvcF07XG4gICAgICB5IC09IG9mZnNldFkgLSBwb3BwZXJSZWN0LmhlaWdodDtcbiAgICAgIHkgKj0gZ3B1QWNjZWxlcmF0aW9uID8gMSA6IC0xO1xuICAgIH1cblxuICAgIGlmIChwbGFjZW1lbnQgPT09IGxlZnQgfHwgKHBsYWNlbWVudCA9PT0gdG9wIHx8IHBsYWNlbWVudCA9PT0gYm90dG9tKSAmJiB2YXJpYXRpb24gPT09IGVuZCkge1xuICAgICAgc2lkZVggPSByaWdodDtcbiAgICAgIHZhciBvZmZzZXRYID0gaXNGaXhlZCAmJiBvZmZzZXRQYXJlbnQgPT09IHdpbiAmJiB3aW4udmlzdWFsVmlld3BvcnQgPyB3aW4udmlzdWFsVmlld3BvcnQud2lkdGggOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgIG9mZnNldFBhcmVudFt3aWR0aFByb3BdO1xuICAgICAgeCAtPSBvZmZzZXRYIC0gcG9wcGVyUmVjdC53aWR0aDtcbiAgICAgIHggKj0gZ3B1QWNjZWxlcmF0aW9uID8gMSA6IC0xO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjb21tb25TdHlsZXMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBwb3NpdGlvbjogcG9zaXRpb25cbiAgfSwgYWRhcHRpdmUgJiYgdW5zZXRTaWRlcyk7XG5cbiAgdmFyIF9yZWY0ID0gcm91bmRPZmZzZXRzID09PSB0cnVlID8gcm91bmRPZmZzZXRzQnlEUFIoe1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9KSA6IHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcblxuICB4ID0gX3JlZjQueDtcbiAgeSA9IF9yZWY0Lnk7XG5cbiAgaWYgKGdwdUFjY2VsZXJhdGlvbikge1xuICAgIHZhciBfT2JqZWN0JGFzc2lnbjtcblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIChfT2JqZWN0JGFzc2lnbiA9IHt9LCBfT2JqZWN0JGFzc2lnbltzaWRlWV0gPSBoYXNZID8gJzAnIDogJycsIF9PYmplY3QkYXNzaWduW3NpZGVYXSA9IGhhc1ggPyAnMCcgOiAnJywgX09iamVjdCRhc3NpZ24udHJhbnNmb3JtID0gKHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpIDw9IDEgPyBcInRyYW5zbGF0ZShcIiArIHggKyBcInB4LCBcIiArIHkgKyBcInB4KVwiIDogXCJ0cmFuc2xhdGUzZChcIiArIHggKyBcInB4LCBcIiArIHkgKyBcInB4LCAwKVwiLCBfT2JqZWN0JGFzc2lnbikpO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywgKF9PYmplY3QkYXNzaWduMiA9IHt9LCBfT2JqZWN0JGFzc2lnbjJbc2lkZVldID0gaGFzWSA/IHkgKyBcInB4XCIgOiAnJywgX09iamVjdCRhc3NpZ24yW3NpZGVYXSA9IGhhc1ggPyB4ICsgXCJweFwiIDogJycsIF9PYmplY3QkYXNzaWduMi50cmFuc2Zvcm0gPSAnJywgX09iamVjdCRhc3NpZ24yKSk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVTdHlsZXMoX3JlZjUpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjUuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjUub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJGdwdUFjY2VsZXJhdCA9IG9wdGlvbnMuZ3B1QWNjZWxlcmF0aW9uLFxuICAgICAgZ3B1QWNjZWxlcmF0aW9uID0gX29wdGlvbnMkZ3B1QWNjZWxlcmF0ID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkZ3B1QWNjZWxlcmF0LFxuICAgICAgX29wdGlvbnMkYWRhcHRpdmUgPSBvcHRpb25zLmFkYXB0aXZlLFxuICAgICAgYWRhcHRpdmUgPSBfb3B0aW9ucyRhZGFwdGl2ZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGFkYXB0aXZlLFxuICAgICAgX29wdGlvbnMkcm91bmRPZmZzZXRzID0gb3B0aW9ucy5yb3VuZE9mZnNldHMsXG4gICAgICByb3VuZE9mZnNldHMgPSBfb3B0aW9ucyRyb3VuZE9mZnNldHMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRyb3VuZE9mZnNldHM7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIHZhciB0cmFuc2l0aW9uUHJvcGVydHkgPSBnZXRDb21wdXRlZFN0eWxlKHN0YXRlLmVsZW1lbnRzLnBvcHBlcikudHJhbnNpdGlvblByb3BlcnR5IHx8ICcnO1xuXG4gICAgaWYgKGFkYXB0aXZlICYmIFsndHJhbnNmb3JtJywgJ3RvcCcsICdyaWdodCcsICdib3R0b20nLCAnbGVmdCddLnNvbWUoZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gdHJhbnNpdGlvblByb3BlcnR5LmluZGV4T2YocHJvcGVydHkpID49IDA7XG4gICAgfSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihbJ1BvcHBlcjogRGV0ZWN0ZWQgQ1NTIHRyYW5zaXRpb25zIG9uIGF0IGxlYXN0IG9uZSBvZiB0aGUgZm9sbG93aW5nJywgJ0NTUyBwcm9wZXJ0aWVzOiBcInRyYW5zZm9ybVwiLCBcInRvcFwiLCBcInJpZ2h0XCIsIFwiYm90dG9tXCIsIFwibGVmdFwiLicsICdcXG5cXG4nLCAnRGlzYWJsZSB0aGUgXCJjb21wdXRlU3R5bGVzXCIgbW9kaWZpZXJcXCdzIGBhZGFwdGl2ZWAgb3B0aW9uIHRvIGFsbG93JywgJ2ZvciBzbW9vdGggdHJhbnNpdGlvbnMsIG9yIHJlbW92ZSB0aGVzZSBwcm9wZXJ0aWVzIGZyb20gdGhlIENTUycsICd0cmFuc2l0aW9uIGRlY2xhcmF0aW9uIG9uIHRoZSBwb3BwZXIgZWxlbWVudCBpZiBvbmx5IHRyYW5zaXRpb25pbmcnLCAnb3BhY2l0eSBvciBiYWNrZ3JvdW5kLWNvbG9yIGZvciBleGFtcGxlLicsICdcXG5cXG4nLCAnV2UgcmVjb21tZW5kIHVzaW5nIHRoZSBwb3BwZXIgZWxlbWVudCBhcyBhIHdyYXBwZXIgYXJvdW5kIGFuIGlubmVyJywgJ2VsZW1lbnQgdGhhdCBjYW4gaGF2ZSBhbnkgQ1NTIHByb3BlcnR5IHRyYW5zaXRpb25lZCBmb3IgYW5pbWF0aW9ucy4nXS5qb2luKCcgJykpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjb21tb25TdHlsZXMgPSB7XG4gICAgcGxhY2VtZW50OiBnZXRCYXNlUGxhY2VtZW50KHN0YXRlLnBsYWNlbWVudCksXG4gICAgdmFyaWF0aW9uOiBnZXRWYXJpYXRpb24oc3RhdGUucGxhY2VtZW50KSxcbiAgICBwb3BwZXI6IHN0YXRlLmVsZW1lbnRzLnBvcHBlcixcbiAgICBwb3BwZXJSZWN0OiBzdGF0ZS5yZWN0cy5wb3BwZXIsXG4gICAgZ3B1QWNjZWxlcmF0aW9uOiBncHVBY2NlbGVyYXRpb24sXG4gICAgaXNGaXhlZDogc3RhdGUub3B0aW9ucy5zdHJhdGVneSA9PT0gJ2ZpeGVkJ1xuICB9O1xuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMgIT0gbnVsbCkge1xuICAgIHN0YXRlLnN0eWxlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5zdHlsZXMucG9wcGVyLCBtYXBUb1N0eWxlcyhPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIHtcbiAgICAgIG9mZnNldHM6IHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyxcbiAgICAgIHBvc2l0aW9uOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgYWRhcHRpdmU6IGFkYXB0aXZlLFxuICAgICAgcm91bmRPZmZzZXRzOiByb3VuZE9mZnNldHNcbiAgICB9KSkpO1xuICB9XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEuYXJyb3cgIT0gbnVsbCkge1xuICAgIHN0YXRlLnN0eWxlcy5hcnJvdyA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnN0eWxlcy5hcnJvdywgbWFwVG9TdHlsZXMoT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCB7XG4gICAgICBvZmZzZXRzOiBzdGF0ZS5tb2RpZmllcnNEYXRhLmFycm93LFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBhZGFwdGl2ZTogZmFsc2UsXG4gICAgICByb3VuZE9mZnNldHM6IHJvdW5kT2Zmc2V0c1xuICAgIH0pKSk7XG4gIH1cblxuICBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyLCB7XG4gICAgJ2RhdGEtcG9wcGVyLXBsYWNlbWVudCc6IHN0YXRlLnBsYWNlbWVudFxuICB9KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2NvbXB1dGVTdHlsZXMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ2JlZm9yZVdyaXRlJyxcbiAgZm46IGNvbXB1dGVTdHlsZXMsXG4gIGRhdGE6IHt9XG59OyIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0V2luZG93LmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHBhc3NpdmUgPSB7XG4gIHBhc3NpdmU6IHRydWVcbn07XG5cbmZ1bmN0aW9uIGVmZmVjdChfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBpbnN0YW5jZSA9IF9yZWYuaW5zdGFuY2UsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkc2Nyb2xsID0gb3B0aW9ucy5zY3JvbGwsXG4gICAgICBzY3JvbGwgPSBfb3B0aW9ucyRzY3JvbGwgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRzY3JvbGwsXG4gICAgICBfb3B0aW9ucyRyZXNpemUgPSBvcHRpb25zLnJlc2l6ZSxcbiAgICAgIHJlc2l6ZSA9IF9vcHRpb25zJHJlc2l6ZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHJlc2l6ZTtcbiAgdmFyIHdpbmRvdyA9IGdldFdpbmRvdyhzdGF0ZS5lbGVtZW50cy5wb3BwZXIpO1xuICB2YXIgc2Nyb2xsUGFyZW50cyA9IFtdLmNvbmNhdChzdGF0ZS5zY3JvbGxQYXJlbnRzLnJlZmVyZW5jZSwgc3RhdGUuc2Nyb2xsUGFyZW50cy5wb3BwZXIpO1xuXG4gIGlmIChzY3JvbGwpIHtcbiAgICBzY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHNjcm9sbFBhcmVudCkge1xuICAgICAgc2Nyb2xsUGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAocmVzaXplKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChzY3JvbGwpIHtcbiAgICAgIHNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAoc2Nyb2xsUGFyZW50KSB7XG4gICAgICAgIHNjcm9sbFBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc2l6ZSkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gICAgfVxuICB9O1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnZXZlbnRMaXN0ZW5lcnMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ3dyaXRlJyxcbiAgZm46IGZ1bmN0aW9uIGZuKCkge30sXG4gIGVmZmVjdDogZWZmZWN0LFxuICBkYXRhOiB7fVxufTsiLCAidmFyIGhhc2ggPSB7XG4gIGxlZnQ6ICdyaWdodCcsXG4gIHJpZ2h0OiAnbGVmdCcsXG4gIGJvdHRvbTogJ3RvcCcsXG4gIHRvcDogJ2JvdHRvbSdcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5yZXBsYWNlKC9sZWZ0fHJpZ2h0fGJvdHRvbXx0b3AvZywgZnVuY3Rpb24gKG1hdGNoZWQpIHtcbiAgICByZXR1cm4gaGFzaFttYXRjaGVkXTtcbiAgfSk7XG59IiwgInZhciBoYXNoID0ge1xuICBzdGFydDogJ2VuZCcsXG4gIGVuZDogJ3N0YXJ0J1xufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL3N0YXJ0fGVuZC9nLCBmdW5jdGlvbiAobWF0Y2hlZCkge1xuICAgIHJldHVybiBoYXNoW21hdGNoZWRdO1xuICB9KTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdpbmRvd1Njcm9sbChub2RlKSB7XG4gIHZhciB3aW4gPSBnZXRXaW5kb3cobm9kZSk7XG4gIHZhciBzY3JvbGxMZWZ0ID0gd2luLnBhZ2VYT2Zmc2V0O1xuICB2YXIgc2Nyb2xsVG9wID0gd2luLnBhZ2VZT2Zmc2V0O1xuICByZXR1cm4ge1xuICAgIHNjcm9sbExlZnQ6IHNjcm9sbExlZnQsXG4gICAgc2Nyb2xsVG9wOiBzY3JvbGxUb3BcbiAgfTtcbn0iLCAiaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KSB7XG4gIC8vIElmIDxodG1sPiBoYXMgYSBDU1Mgd2lkdGggZ3JlYXRlciB0aGFuIHRoZSB2aWV3cG9ydCwgdGhlbiB0aGlzIHdpbGwgYmVcbiAgLy8gaW5jb3JyZWN0IGZvciBSVEwuXG4gIC8vIFBvcHBlciAxIGlzIGJyb2tlbiBpbiB0aGlzIGNhc2UgYW5kIG5ldmVyIGhhZCBhIGJ1ZyByZXBvcnQgc28gbGV0J3MgYXNzdW1lXG4gIC8vIGl0J3Mgbm90IGFuIGlzc3VlLiBJIGRvbid0IHRoaW5rIGFueW9uZSBldmVyIHNwZWNpZmllcyB3aWR0aCBvbiA8aHRtbD5cbiAgLy8gYW55d2F5LlxuICAvLyBCcm93c2VycyB3aGVyZSB0aGUgbGVmdCBzY3JvbGxiYXIgZG9lc24ndCBjYXVzZSBhbiBpc3N1ZSByZXBvcnQgYDBgIGZvclxuICAvLyB0aGlzIChlLmcuIEVkZ2UgMjAxOSwgSUUxMSwgU2FmYXJpKVxuICByZXR1cm4gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSkubGVmdCArIGdldFdpbmRvd1Njcm9sbChlbGVtZW50KS5zY3JvbGxMZWZ0O1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGxCYXJYIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbEJhclguanNcIjtcbmltcG9ydCBpc0xheW91dFZpZXdwb3J0IGZyb20gXCIuL2lzTGF5b3V0Vmlld3BvcnQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFZpZXdwb3J0UmVjdChlbGVtZW50LCBzdHJhdGVneSkge1xuICB2YXIgd2luID0gZ2V0V2luZG93KGVsZW1lbnQpO1xuICB2YXIgaHRtbCA9IGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KTtcbiAgdmFyIHZpc3VhbFZpZXdwb3J0ID0gd2luLnZpc3VhbFZpZXdwb3J0O1xuICB2YXIgd2lkdGggPSBodG1sLmNsaWVudFdpZHRoO1xuICB2YXIgaGVpZ2h0ID0gaHRtbC5jbGllbnRIZWlnaHQ7XG4gIHZhciB4ID0gMDtcbiAgdmFyIHkgPSAwO1xuXG4gIGlmICh2aXN1YWxWaWV3cG9ydCkge1xuICAgIHdpZHRoID0gdmlzdWFsVmlld3BvcnQud2lkdGg7XG4gICAgaGVpZ2h0ID0gdmlzdWFsVmlld3BvcnQuaGVpZ2h0O1xuICAgIHZhciBsYXlvdXRWaWV3cG9ydCA9IGlzTGF5b3V0Vmlld3BvcnQoKTtcblxuICAgIGlmIChsYXlvdXRWaWV3cG9ydCB8fCAhbGF5b3V0Vmlld3BvcnQgJiYgc3RyYXRlZ3kgPT09ICdmaXhlZCcpIHtcbiAgICAgIHggPSB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0O1xuICAgICAgeSA9IHZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICB4OiB4ICsgZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KSxcbiAgICB5OiB5XG4gIH07XG59IiwgImltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuaW1wb3J0IHsgbWF4IH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjsgLy8gR2V0cyB0aGUgZW50aXJlIHNpemUgb2YgdGhlIHNjcm9sbGFibGUgZG9jdW1lbnQgYXJlYSwgZXZlbiBleHRlbmRpbmcgb3V0c2lkZVxuLy8gb2YgdGhlIGA8aHRtbD5gIGFuZCBgPGJvZHk+YCByZWN0IGJvdW5kcyBpZiBob3Jpem9udGFsbHkgc2Nyb2xsYWJsZVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXREb2N1bWVudFJlY3QoZWxlbWVudCkge1xuICB2YXIgX2VsZW1lbnQkb3duZXJEb2N1bWVuO1xuXG4gIHZhciBodG1sID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICB2YXIgd2luU2Nyb2xsID0gZ2V0V2luZG93U2Nyb2xsKGVsZW1lbnQpO1xuICB2YXIgYm9keSA9IChfZWxlbWVudCRvd25lckRvY3VtZW4gPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZWxlbWVudCRvd25lckRvY3VtZW4uYm9keTtcbiAgdmFyIHdpZHRoID0gbWF4KGh0bWwuc2Nyb2xsV2lkdGgsIGh0bWwuY2xpZW50V2lkdGgsIGJvZHkgPyBib2R5LnNjcm9sbFdpZHRoIDogMCwgYm9keSA/IGJvZHkuY2xpZW50V2lkdGggOiAwKTtcbiAgdmFyIGhlaWdodCA9IG1heChodG1sLnNjcm9sbEhlaWdodCwgaHRtbC5jbGllbnRIZWlnaHQsIGJvZHkgPyBib2R5LnNjcm9sbEhlaWdodCA6IDAsIGJvZHkgPyBib2R5LmNsaWVudEhlaWdodCA6IDApO1xuICB2YXIgeCA9IC13aW5TY3JvbGwuc2Nyb2xsTGVmdCArIGdldFdpbmRvd1Njcm9sbEJhclgoZWxlbWVudCk7XG4gIHZhciB5ID0gLXdpblNjcm9sbC5zY3JvbGxUb3A7XG5cbiAgaWYgKGdldENvbXB1dGVkU3R5bGUoYm9keSB8fCBodG1sKS5kaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgeCArPSBtYXgoaHRtbC5jbGllbnRXaWR0aCwgYm9keSA/IGJvZHkuY2xpZW50V2lkdGggOiAwKSAtIHdpZHRoO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG59IiwgImltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2Nyb2xsUGFyZW50KGVsZW1lbnQpIHtcbiAgLy8gRmlyZWZveCB3YW50cyB1cyB0byBjaGVjayBgLXhgIGFuZCBgLXlgIHZhcmlhdGlvbnMgYXMgd2VsbFxuICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgb3ZlcmZsb3cgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvdyxcbiAgICAgIG92ZXJmbG93WCA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WCxcbiAgICAgIG92ZXJmbG93WSA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WTtcblxuICByZXR1cm4gL2F1dG98c2Nyb2xsfG92ZXJsYXl8aGlkZGVuLy50ZXN0KG92ZXJmbG93ICsgb3ZlcmZsb3dZICsgb3ZlcmZsb3dYKTtcbn0iLCAiaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnQobm9kZSkge1xuICBpZiAoWydodG1sJywgJ2JvZHknLCAnI2RvY3VtZW50J10uaW5kZXhPZihnZXROb2RlTmFtZShub2RlKSkgPj0gMCkge1xuICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl06IGFzc3VtZSBib2R5IGlzIGFsd2F5cyBhdmFpbGFibGVcbiAgICByZXR1cm4gbm9kZS5vd25lckRvY3VtZW50LmJvZHk7XG4gIH1cblxuICBpZiAoaXNIVE1MRWxlbWVudChub2RlKSAmJiBpc1Njcm9sbFBhcmVudChub2RlKSkge1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgcmV0dXJuIGdldFNjcm9sbFBhcmVudChnZXRQYXJlbnROb2RlKG5vZGUpKTtcbn0iLCAiaW1wb3J0IGdldFNjcm9sbFBhcmVudCBmcm9tIFwiLi9nZXRTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbi8qXG5naXZlbiBhIERPTSBlbGVtZW50LCByZXR1cm4gdGhlIGxpc3Qgb2YgYWxsIHNjcm9sbCBwYXJlbnRzLCB1cCB0aGUgbGlzdCBvZiBhbmNlc29yc1xudW50aWwgd2UgZ2V0IHRvIHRoZSB0b3Agd2luZG93IG9iamVjdC4gVGhpcyBsaXN0IGlzIHdoYXQgd2UgYXR0YWNoIHNjcm9sbCBsaXN0ZW5lcnNcbnRvLCBiZWNhdXNlIGlmIGFueSBvZiB0aGVzZSBwYXJlbnQgZWxlbWVudHMgc2Nyb2xsLCB3ZSdsbCBuZWVkIHRvIHJlLWNhbGN1bGF0ZSB0aGVcbnJlZmVyZW5jZSBlbGVtZW50J3MgcG9zaXRpb24uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsaXN0U2Nyb2xsUGFyZW50cyhlbGVtZW50LCBsaXN0KSB7XG4gIHZhciBfZWxlbWVudCRvd25lckRvY3VtZW47XG5cbiAgaWYgKGxpc3QgPT09IHZvaWQgMCkge1xuICAgIGxpc3QgPSBbXTtcbiAgfVxuXG4gIHZhciBzY3JvbGxQYXJlbnQgPSBnZXRTY3JvbGxQYXJlbnQoZWxlbWVudCk7XG4gIHZhciBpc0JvZHkgPSBzY3JvbGxQYXJlbnQgPT09ICgoX2VsZW1lbnQkb3duZXJEb2N1bWVuID0gZWxlbWVudC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2VsZW1lbnQkb3duZXJEb2N1bWVuLmJvZHkpO1xuICB2YXIgd2luID0gZ2V0V2luZG93KHNjcm9sbFBhcmVudCk7XG4gIHZhciB0YXJnZXQgPSBpc0JvZHkgPyBbd2luXS5jb25jYXQod2luLnZpc3VhbFZpZXdwb3J0IHx8IFtdLCBpc1Njcm9sbFBhcmVudChzY3JvbGxQYXJlbnQpID8gc2Nyb2xsUGFyZW50IDogW10pIDogc2Nyb2xsUGFyZW50O1xuICB2YXIgdXBkYXRlZExpc3QgPSBsaXN0LmNvbmNhdCh0YXJnZXQpO1xuICByZXR1cm4gaXNCb2R5ID8gdXBkYXRlZExpc3QgOiAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXTogaXNCb2R5IHRlbGxzIHVzIHRhcmdldCB3aWxsIGJlIGFuIEhUTUxFbGVtZW50IGhlcmVcbiAgdXBkYXRlZExpc3QuY29uY2F0KGxpc3RTY3JvbGxQYXJlbnRzKGdldFBhcmVudE5vZGUodGFyZ2V0KSkpO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZWN0VG9DbGllbnRSZWN0KHJlY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlY3QsIHtcbiAgICBsZWZ0OiByZWN0LngsXG4gICAgdG9wOiByZWN0LnksXG4gICAgcmlnaHQ6IHJlY3QueCArIHJlY3Qud2lkdGgsXG4gICAgYm90dG9tOiByZWN0LnkgKyByZWN0LmhlaWdodFxuICB9KTtcbn0iLCAiaW1wb3J0IHsgdmlld3BvcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRWaWV3cG9ydFJlY3QgZnJvbSBcIi4vZ2V0Vmlld3BvcnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRSZWN0IGZyb20gXCIuL2dldERvY3VtZW50UmVjdC5qc1wiO1xuaW1wb3J0IGxpc3RTY3JvbGxQYXJlbnRzIGZyb20gXCIuL2xpc3RTY3JvbGxQYXJlbnRzLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgY29udGFpbnMgZnJvbSBcIi4vY29udGFpbnMuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHJlY3RUb0NsaWVudFJlY3QgZnJvbSBcIi4uL3V0aWxzL3JlY3RUb0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCB7IG1heCwgbWluIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gZ2V0SW5uZXJCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgc3RyYXRlZ3kpIHtcbiAgdmFyIHJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgZmFsc2UsIHN0cmF0ZWd5ID09PSAnZml4ZWQnKTtcbiAgcmVjdC50b3AgPSByZWN0LnRvcCArIGVsZW1lbnQuY2xpZW50VG9wO1xuICByZWN0LmxlZnQgPSByZWN0LmxlZnQgKyBlbGVtZW50LmNsaWVudExlZnQ7XG4gIHJlY3QuYm90dG9tID0gcmVjdC50b3AgKyBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgcmVjdC5yaWdodCA9IHJlY3QubGVmdCArIGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIHJlY3Qud2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoO1xuICByZWN0LmhlaWdodCA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICByZWN0LnggPSByZWN0LmxlZnQ7XG4gIHJlY3QueSA9IHJlY3QudG9wO1xuICByZXR1cm4gcmVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KSB7XG4gIHJldHVybiBjbGlwcGluZ1BhcmVudCA9PT0gdmlld3BvcnQgPyByZWN0VG9DbGllbnRSZWN0KGdldFZpZXdwb3J0UmVjdChlbGVtZW50LCBzdHJhdGVneSkpIDogaXNFbGVtZW50KGNsaXBwaW5nUGFyZW50KSA/IGdldElubmVyQm91bmRpbmdDbGllbnRSZWN0KGNsaXBwaW5nUGFyZW50LCBzdHJhdGVneSkgOiByZWN0VG9DbGllbnRSZWN0KGdldERvY3VtZW50UmVjdChnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkpKTtcbn0gLy8gQSBcImNsaXBwaW5nIHBhcmVudFwiIGlzIGFuIG92ZXJmbG93YWJsZSBjb250YWluZXIgd2l0aCB0aGUgY2hhcmFjdGVyaXN0aWMgb2Zcbi8vIGNsaXBwaW5nIChvciBoaWRpbmcpIG92ZXJmbG93aW5nIGVsZW1lbnRzIHdpdGggYSBwb3NpdGlvbiBkaWZmZXJlbnQgZnJvbVxuLy8gYGluaXRpYWxgXG5cblxuZnVuY3Rpb24gZ2V0Q2xpcHBpbmdQYXJlbnRzKGVsZW1lbnQpIHtcbiAgdmFyIGNsaXBwaW5nUGFyZW50cyA9IGxpc3RTY3JvbGxQYXJlbnRzKGdldFBhcmVudE5vZGUoZWxlbWVudCkpO1xuICB2YXIgY2FuRXNjYXBlQ2xpcHBpbmcgPSBbJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5kZXhPZihnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uKSA+PSAwO1xuICB2YXIgY2xpcHBlckVsZW1lbnQgPSBjYW5Fc2NhcGVDbGlwcGluZyAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpID8gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIDogZWxlbWVudDtcblxuICBpZiAoIWlzRWxlbWVudChjbGlwcGVyRWxlbWVudCkpIHtcbiAgICByZXR1cm4gW107XG4gIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzE0MTRcblxuXG4gIHJldHVybiBjbGlwcGluZ1BhcmVudHMuZmlsdGVyKGZ1bmN0aW9uIChjbGlwcGluZ1BhcmVudCkge1xuICAgIHJldHVybiBpc0VsZW1lbnQoY2xpcHBpbmdQYXJlbnQpICYmIGNvbnRhaW5zKGNsaXBwaW5nUGFyZW50LCBjbGlwcGVyRWxlbWVudCkgJiYgZ2V0Tm9kZU5hbWUoY2xpcHBpbmdQYXJlbnQpICE9PSAnYm9keSc7XG4gIH0pO1xufSAvLyBHZXRzIHRoZSBtYXhpbXVtIGFyZWEgdGhhdCB0aGUgZWxlbWVudCBpcyB2aXNpYmxlIGluIGR1ZSB0byBhbnkgbnVtYmVyIG9mXG4vLyBjbGlwcGluZyBwYXJlbnRzXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q2xpcHBpbmdSZWN0KGVsZW1lbnQsIGJvdW5kYXJ5LCByb290Qm91bmRhcnksIHN0cmF0ZWd5KSB7XG4gIHZhciBtYWluQ2xpcHBpbmdQYXJlbnRzID0gYm91bmRhcnkgPT09ICdjbGlwcGluZ1BhcmVudHMnID8gZ2V0Q2xpcHBpbmdQYXJlbnRzKGVsZW1lbnQpIDogW10uY29uY2F0KGJvdW5kYXJ5KTtcbiAgdmFyIGNsaXBwaW5nUGFyZW50cyA9IFtdLmNvbmNhdChtYWluQ2xpcHBpbmdQYXJlbnRzLCBbcm9vdEJvdW5kYXJ5XSk7XG4gIHZhciBmaXJzdENsaXBwaW5nUGFyZW50ID0gY2xpcHBpbmdQYXJlbnRzWzBdO1xuICB2YXIgY2xpcHBpbmdSZWN0ID0gY2xpcHBpbmdQYXJlbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjUmVjdCwgY2xpcHBpbmdQYXJlbnQpIHtcbiAgICB2YXIgcmVjdCA9IGdldENsaWVudFJlY3RGcm9tTWl4ZWRUeXBlKGVsZW1lbnQsIGNsaXBwaW5nUGFyZW50LCBzdHJhdGVneSk7XG4gICAgYWNjUmVjdC50b3AgPSBtYXgocmVjdC50b3AsIGFjY1JlY3QudG9wKTtcbiAgICBhY2NSZWN0LnJpZ2h0ID0gbWluKHJlY3QucmlnaHQsIGFjY1JlY3QucmlnaHQpO1xuICAgIGFjY1JlY3QuYm90dG9tID0gbWluKHJlY3QuYm90dG9tLCBhY2NSZWN0LmJvdHRvbSk7XG4gICAgYWNjUmVjdC5sZWZ0ID0gbWF4KHJlY3QubGVmdCwgYWNjUmVjdC5sZWZ0KTtcbiAgICByZXR1cm4gYWNjUmVjdDtcbiAgfSwgZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgZmlyc3RDbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpKTtcbiAgY2xpcHBpbmdSZWN0LndpZHRoID0gY2xpcHBpbmdSZWN0LnJpZ2h0IC0gY2xpcHBpbmdSZWN0LmxlZnQ7XG4gIGNsaXBwaW5nUmVjdC5oZWlnaHQgPSBjbGlwcGluZ1JlY3QuYm90dG9tIC0gY2xpcHBpbmdSZWN0LnRvcDtcbiAgY2xpcHBpbmdSZWN0LnggPSBjbGlwcGluZ1JlY3QubGVmdDtcbiAgY2xpcHBpbmdSZWN0LnkgPSBjbGlwcGluZ1JlY3QudG9wO1xuICByZXR1cm4gY2xpcHBpbmdSZWN0O1xufSIsICJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudCBmcm9tIFwiLi9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCwgc3RhcnQsIGVuZCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcHV0ZU9mZnNldHMoX3JlZikge1xuICB2YXIgcmVmZXJlbmNlID0gX3JlZi5yZWZlcmVuY2UsXG4gICAgICBlbGVtZW50ID0gX3JlZi5lbGVtZW50LFxuICAgICAgcGxhY2VtZW50ID0gX3JlZi5wbGFjZW1lbnQ7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gcGxhY2VtZW50ID8gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIDogbnVsbDtcbiAgdmFyIHZhcmlhdGlvbiA9IHBsYWNlbWVudCA/IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpIDogbnVsbDtcbiAgdmFyIGNvbW1vblggPSByZWZlcmVuY2UueCArIHJlZmVyZW5jZS53aWR0aCAvIDIgLSBlbGVtZW50LndpZHRoIC8gMjtcbiAgdmFyIGNvbW1vblkgPSByZWZlcmVuY2UueSArIHJlZmVyZW5jZS5oZWlnaHQgLyAyIC0gZWxlbWVudC5oZWlnaHQgLyAyO1xuICB2YXIgb2Zmc2V0cztcblxuICBzd2l0Y2ggKGJhc2VQbGFjZW1lbnQpIHtcbiAgICBjYXNlIHRvcDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IGNvbW1vblgsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55IC0gZWxlbWVudC5oZWlnaHRcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgYm90dG9tOlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogY29tbW9uWCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnkgKyByZWZlcmVuY2UuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIHJpZ2h0OlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogcmVmZXJlbmNlLnggKyByZWZlcmVuY2Uud2lkdGgsXG4gICAgICAgIHk6IGNvbW1vbllcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgbGVmdDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54IC0gZWxlbWVudC53aWR0aCxcbiAgICAgICAgeTogY29tbW9uWVxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54LFxuICAgICAgICB5OiByZWZlcmVuY2UueVxuICAgICAgfTtcbiAgfVxuXG4gIHZhciBtYWluQXhpcyA9IGJhc2VQbGFjZW1lbnQgPyBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCkgOiBudWxsO1xuXG4gIGlmIChtYWluQXhpcyAhPSBudWxsKSB7XG4gICAgdmFyIGxlbiA9IG1haW5BeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgICBzd2l0Y2ggKHZhcmlhdGlvbikge1xuICAgICAgY2FzZSBzdGFydDpcbiAgICAgICAgb2Zmc2V0c1ttYWluQXhpc10gPSBvZmZzZXRzW21haW5BeGlzXSAtIChyZWZlcmVuY2VbbGVuXSAvIDIgLSBlbGVtZW50W2xlbl0gLyAyKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgZW5kOlxuICAgICAgICBvZmZzZXRzW21haW5BeGlzXSA9IG9mZnNldHNbbWFpbkF4aXNdICsgKHJlZmVyZW5jZVtsZW5dIC8gMiAtIGVsZW1lbnRbbGVuXSAvIDIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2Zmc2V0cztcbn0iLCAiaW1wb3J0IGdldENsaXBwaW5nUmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldENsaXBwaW5nUmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGNvbXB1dGVPZmZzZXRzIGZyb20gXCIuL2NvbXB1dGVPZmZzZXRzLmpzXCI7XG5pbXBvcnQgcmVjdFRvQ2xpZW50UmVjdCBmcm9tIFwiLi9yZWN0VG9DbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgeyBjbGlwcGluZ1BhcmVudHMsIHJlZmVyZW5jZSwgcG9wcGVyLCBib3R0b20sIHRvcCwgcmlnaHQsIGJhc2VQbGFjZW1lbnRzLCB2aWV3cG9ydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgbWVyZ2VQYWRkaW5nT2JqZWN0IGZyb20gXCIuL21lcmdlUGFkZGluZ09iamVjdC5qc1wiO1xuaW1wb3J0IGV4cGFuZFRvSGFzaE1hcCBmcm9tIFwiLi9leHBhbmRUb0hhc2hNYXAuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIF9vcHRpb25zJHBsYWNlbWVudCA9IF9vcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIHBsYWNlbWVudCA9IF9vcHRpb25zJHBsYWNlbWVudCA9PT0gdm9pZCAwID8gc3RhdGUucGxhY2VtZW50IDogX29wdGlvbnMkcGxhY2VtZW50LFxuICAgICAgX29wdGlvbnMkc3RyYXRlZ3kgPSBfb3B0aW9ucy5zdHJhdGVneSxcbiAgICAgIHN0cmF0ZWd5ID0gX29wdGlvbnMkc3RyYXRlZ3kgPT09IHZvaWQgMCA/IHN0YXRlLnN0cmF0ZWd5IDogX29wdGlvbnMkc3RyYXRlZ3ksXG4gICAgICBfb3B0aW9ucyRib3VuZGFyeSA9IF9vcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgYm91bmRhcnkgPSBfb3B0aW9ucyRib3VuZGFyeSA9PT0gdm9pZCAwID8gY2xpcHBpbmdQYXJlbnRzIDogX29wdGlvbnMkYm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRyb290Qm91bmRhcnkgPSBfb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBfb3B0aW9ucyRyb290Qm91bmRhcnkgPT09IHZvaWQgMCA/IHZpZXdwb3J0IDogX29wdGlvbnMkcm9vdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkZWxlbWVudENvbnRlID0gX29wdGlvbnMuZWxlbWVudENvbnRleHQsXG4gICAgICBlbGVtZW50Q29udGV4dCA9IF9vcHRpb25zJGVsZW1lbnRDb250ZSA9PT0gdm9pZCAwID8gcG9wcGVyIDogX29wdGlvbnMkZWxlbWVudENvbnRlLFxuICAgICAgX29wdGlvbnMkYWx0Qm91bmRhcnkgPSBfb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gX29wdGlvbnMkYWx0Qm91bmRhcnkgPT09IHZvaWQgMCA/IGZhbHNlIDogX29wdGlvbnMkYWx0Qm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRwYWRkaW5nID0gX29wdGlvbnMucGFkZGluZyxcbiAgICAgIHBhZGRpbmcgPSBfb3B0aW9ucyRwYWRkaW5nID09PSB2b2lkIDAgPyAwIDogX29wdGlvbnMkcGFkZGluZztcbiAgdmFyIHBhZGRpbmdPYmplY3QgPSBtZXJnZVBhZGRpbmdPYmplY3QodHlwZW9mIHBhZGRpbmcgIT09ICdudW1iZXInID8gcGFkZGluZyA6IGV4cGFuZFRvSGFzaE1hcChwYWRkaW5nLCBiYXNlUGxhY2VtZW50cykpO1xuICB2YXIgYWx0Q29udGV4dCA9IGVsZW1lbnRDb250ZXh0ID09PSBwb3BwZXIgPyByZWZlcmVuY2UgOiBwb3BwZXI7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgZWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzW2FsdEJvdW5kYXJ5ID8gYWx0Q29udGV4dCA6IGVsZW1lbnRDb250ZXh0XTtcbiAgdmFyIGNsaXBwaW5nQ2xpZW50UmVjdCA9IGdldENsaXBwaW5nUmVjdChpc0VsZW1lbnQoZWxlbWVudCkgPyBlbGVtZW50IDogZWxlbWVudC5jb250ZXh0RWxlbWVudCB8fCBnZXREb2N1bWVudEVsZW1lbnQoc3RhdGUuZWxlbWVudHMucG9wcGVyKSwgYm91bmRhcnksIHJvb3RCb3VuZGFyeSwgc3RyYXRlZ3kpO1xuICB2YXIgcmVmZXJlbmNlQ2xpZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChzdGF0ZS5lbGVtZW50cy5yZWZlcmVuY2UpO1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IGNvbXB1dGVPZmZzZXRzKHtcbiAgICByZWZlcmVuY2U6IHJlZmVyZW5jZUNsaWVudFJlY3QsXG4gICAgZWxlbWVudDogcG9wcGVyUmVjdCxcbiAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudFxuICB9KTtcbiAgdmFyIHBvcHBlckNsaWVudFJlY3QgPSByZWN0VG9DbGllbnRSZWN0KE9iamVjdC5hc3NpZ24oe30sIHBvcHBlclJlY3QsIHBvcHBlck9mZnNldHMpKTtcbiAgdmFyIGVsZW1lbnRDbGllbnRSZWN0ID0gZWxlbWVudENvbnRleHQgPT09IHBvcHBlciA/IHBvcHBlckNsaWVudFJlY3QgOiByZWZlcmVuY2VDbGllbnRSZWN0OyAvLyBwb3NpdGl2ZSA9IG92ZXJmbG93aW5nIHRoZSBjbGlwcGluZyByZWN0XG4gIC8vIDAgb3IgbmVnYXRpdmUgPSB3aXRoaW4gdGhlIGNsaXBwaW5nIHJlY3RcblxuICB2YXIgb3ZlcmZsb3dPZmZzZXRzID0ge1xuICAgIHRvcDogY2xpcHBpbmdDbGllbnRSZWN0LnRvcCAtIGVsZW1lbnRDbGllbnRSZWN0LnRvcCArIHBhZGRpbmdPYmplY3QudG9wLFxuICAgIGJvdHRvbTogZWxlbWVudENsaWVudFJlY3QuYm90dG9tIC0gY2xpcHBpbmdDbGllbnRSZWN0LmJvdHRvbSArIHBhZGRpbmdPYmplY3QuYm90dG9tLFxuICAgIGxlZnQ6IGNsaXBwaW5nQ2xpZW50UmVjdC5sZWZ0IC0gZWxlbWVudENsaWVudFJlY3QubGVmdCArIHBhZGRpbmdPYmplY3QubGVmdCxcbiAgICByaWdodDogZWxlbWVudENsaWVudFJlY3QucmlnaHQgLSBjbGlwcGluZ0NsaWVudFJlY3QucmlnaHQgKyBwYWRkaW5nT2JqZWN0LnJpZ2h0XG4gIH07XG4gIHZhciBvZmZzZXREYXRhID0gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQ7IC8vIE9mZnNldHMgY2FuIGJlIGFwcGxpZWQgb25seSB0byB0aGUgcG9wcGVyIGVsZW1lbnRcblxuICBpZiAoZWxlbWVudENvbnRleHQgPT09IHBvcHBlciAmJiBvZmZzZXREYXRhKSB7XG4gICAgdmFyIG9mZnNldCA9IG9mZnNldERhdGFbcGxhY2VtZW50XTtcbiAgICBPYmplY3Qua2V5cyhvdmVyZmxvd09mZnNldHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIG11bHRpcGx5ID0gW3JpZ2h0LCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gMSA6IC0xO1xuICAgICAgdmFyIGF4aXMgPSBbdG9wLCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gJ3knIDogJ3gnO1xuICAgICAgb3ZlcmZsb3dPZmZzZXRzW2tleV0gKz0gb2Zmc2V0W2F4aXNdICogbXVsdGlwbHk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb3ZlcmZsb3dPZmZzZXRzO1xufSIsICJpbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IHsgdmFyaWF0aW9uUGxhY2VtZW50cywgYmFzZVBsYWNlbWVudHMsIHBsYWNlbWVudHMgYXMgYWxsUGxhY2VtZW50cyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21wdXRlQXV0b1BsYWNlbWVudChzdGF0ZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIHBsYWNlbWVudCA9IF9vcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5ID0gX29wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBfb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nID0gX29wdGlvbnMucGFkZGluZyxcbiAgICAgIGZsaXBWYXJpYXRpb25zID0gX29wdGlvbnMuZmxpcFZhcmlhdGlvbnMsXG4gICAgICBfb3B0aW9ucyRhbGxvd2VkQXV0b1AgPSBfb3B0aW9ucy5hbGxvd2VkQXV0b1BsYWNlbWVudHMsXG4gICAgICBhbGxvd2VkQXV0b1BsYWNlbWVudHMgPSBfb3B0aW9ucyRhbGxvd2VkQXV0b1AgPT09IHZvaWQgMCA/IGFsbFBsYWNlbWVudHMgOiBfb3B0aW9ucyRhbGxvd2VkQXV0b1A7XG4gIHZhciB2YXJpYXRpb24gPSBnZXRWYXJpYXRpb24ocGxhY2VtZW50KTtcbiAgdmFyIHBsYWNlbWVudHMgPSB2YXJpYXRpb24gPyBmbGlwVmFyaWF0aW9ucyA/IHZhcmlhdGlvblBsYWNlbWVudHMgOiB2YXJpYXRpb25QbGFjZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGdldFZhcmlhdGlvbihwbGFjZW1lbnQpID09PSB2YXJpYXRpb247XG4gIH0pIDogYmFzZVBsYWNlbWVudHM7XG4gIHZhciBhbGxvd2VkUGxhY2VtZW50cyA9IHBsYWNlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gYWxsb3dlZEF1dG9QbGFjZW1lbnRzLmluZGV4T2YocGxhY2VtZW50KSA+PSAwO1xuICB9KTtcblxuICBpZiAoYWxsb3dlZFBsYWNlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgYWxsb3dlZFBsYWNlbWVudHMgPSBwbGFjZW1lbnRzO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgY29uc29sZS5lcnJvcihbJ1BvcHBlcjogVGhlIGBhbGxvd2VkQXV0b1BsYWNlbWVudHNgIG9wdGlvbiBkaWQgbm90IGFsbG93IGFueScsICdwbGFjZW1lbnRzLiBFbnN1cmUgdGhlIGBwbGFjZW1lbnRgIG9wdGlvbiBtYXRjaGVzIHRoZSB2YXJpYXRpb24nLCAnb2YgdGhlIGFsbG93ZWQgcGxhY2VtZW50cy4nLCAnRm9yIGV4YW1wbGUsIFwiYXV0b1wiIGNhbm5vdCBiZSB1c2VkIHRvIGFsbG93IFwiYm90dG9tLXN0YXJ0XCIuJywgJ1VzZSBcImF1dG8tc3RhcnRcIiBpbnN0ZWFkLiddLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdOiBGbG93IHNlZW1zIHRvIGhhdmUgcHJvYmxlbXMgd2l0aCB0d28gYXJyYXkgdW5pb25zLi4uXG5cblxuICB2YXIgb3ZlcmZsb3dzID0gYWxsb3dlZFBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIGFjY1twbGFjZW1lbnRdID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgfSlbZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpXTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvdmVyZmxvd3MpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gb3ZlcmZsb3dzW2FdIC0gb3ZlcmZsb3dzW2JdO1xuICB9KTtcbn0iLCAiaW1wb3J0IGdldE9wcG9zaXRlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBjb21wdXRlQXV0b1BsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IGJvdHRvbSwgdG9wLCBzdGFydCwgcmlnaHQsIGxlZnQsIGF1dG8gfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmZ1bmN0aW9uIGdldEV4cGFuZGVkRmFsbGJhY2tQbGFjZW1lbnRzKHBsYWNlbWVudCkge1xuICBpZiAoZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpID09PSBhdXRvKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgdmFyIG9wcG9zaXRlUGxhY2VtZW50ID0gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KTtcbiAgcmV0dXJuIFtnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudChwbGFjZW1lbnQpLCBvcHBvc2l0ZVBsYWNlbWVudCwgZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQob3Bwb3NpdGVQbGFjZW1lbnQpXTtcbn1cblxuZnVuY3Rpb24gZmxpcChfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXS5fc2tpcCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyRtYWluQXhpcyA9IG9wdGlvbnMubWFpbkF4aXMsXG4gICAgICBjaGVja01haW5BeGlzID0gX29wdGlvbnMkbWFpbkF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRtYWluQXhpcyxcbiAgICAgIF9vcHRpb25zJGFsdEF4aXMgPSBvcHRpb25zLmFsdEF4aXMsXG4gICAgICBjaGVja0FsdEF4aXMgPSBfb3B0aW9ucyRhbHRBeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkYWx0QXhpcyxcbiAgICAgIHNwZWNpZmllZEZhbGxiYWNrUGxhY2VtZW50cyA9IG9wdGlvbnMuZmFsbGJhY2tQbGFjZW1lbnRzLFxuICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyxcbiAgICAgIGJvdW5kYXJ5ID0gb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IG9wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnkgPSBvcHRpb25zLmFsdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkZmxpcFZhcmlhdGlvID0gb3B0aW9ucy5mbGlwVmFyaWF0aW9ucyxcbiAgICAgIGZsaXBWYXJpYXRpb25zID0gX29wdGlvbnMkZmxpcFZhcmlhdGlvID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkZmxpcFZhcmlhdGlvLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzID0gb3B0aW9ucy5hbGxvd2VkQXV0b1BsYWNlbWVudHM7XG4gIHZhciBwcmVmZXJyZWRQbGFjZW1lbnQgPSBzdGF0ZS5vcHRpb25zLnBsYWNlbWVudDtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHByZWZlcnJlZFBsYWNlbWVudCk7XG4gIHZhciBpc0Jhc2VQbGFjZW1lbnQgPSBiYXNlUGxhY2VtZW50ID09PSBwcmVmZXJyZWRQbGFjZW1lbnQ7XG4gIHZhciBmYWxsYmFja1BsYWNlbWVudHMgPSBzcGVjaWZpZWRGYWxsYmFja1BsYWNlbWVudHMgfHwgKGlzQmFzZVBsYWNlbWVudCB8fCAhZmxpcFZhcmlhdGlvbnMgPyBbZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocHJlZmVycmVkUGxhY2VtZW50KV0gOiBnZXRFeHBhbmRlZEZhbGxiYWNrUGxhY2VtZW50cyhwcmVmZXJyZWRQbGFjZW1lbnQpKTtcbiAgdmFyIHBsYWNlbWVudHMgPSBbcHJlZmVycmVkUGxhY2VtZW50XS5jb25jYXQoZmFsbGJhY2tQbGFjZW1lbnRzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpID09PSBhdXRvID8gY29tcHV0ZUF1dG9QbGFjZW1lbnQoc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nLFxuICAgICAgZmxpcFZhcmlhdGlvbnM6IGZsaXBWYXJpYXRpb25zLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzOiBhbGxvd2VkQXV0b1BsYWNlbWVudHNcbiAgICB9KSA6IHBsYWNlbWVudCk7XG4gIH0sIFtdKTtcbiAgdmFyIHJlZmVyZW5jZVJlY3QgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2U7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgY2hlY2tzTWFwID0gbmV3IE1hcCgpO1xuICB2YXIgbWFrZUZhbGxiYWNrQ2hlY2tzID0gdHJ1ZTtcbiAgdmFyIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IHBsYWNlbWVudHNbMF07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGFjZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBsYWNlbWVudCA9IHBsYWNlbWVudHNbaV07XG5cbiAgICB2YXIgX2Jhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCk7XG5cbiAgICB2YXIgaXNTdGFydFZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpID09PSBzdGFydDtcbiAgICB2YXIgaXNWZXJ0aWNhbCA9IFt0b3AsIGJvdHRvbV0uaW5kZXhPZihfYmFzZVBsYWNlbWVudCkgPj0gMDtcbiAgICB2YXIgbGVuID0gaXNWZXJ0aWNhbCA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcbiAgICB2YXIgb3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5OiBhbHRCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmdcbiAgICB9KTtcbiAgICB2YXIgbWFpblZhcmlhdGlvblNpZGUgPSBpc1ZlcnRpY2FsID8gaXNTdGFydFZhcmlhdGlvbiA/IHJpZ2h0IDogbGVmdCA6IGlzU3RhcnRWYXJpYXRpb24gPyBib3R0b20gOiB0b3A7XG5cbiAgICBpZiAocmVmZXJlbmNlUmVjdFtsZW5dID4gcG9wcGVyUmVjdFtsZW5dKSB7XG4gICAgICBtYWluVmFyaWF0aW9uU2lkZSA9IGdldE9wcG9zaXRlUGxhY2VtZW50KG1haW5WYXJpYXRpb25TaWRlKTtcbiAgICB9XG5cbiAgICB2YXIgYWx0VmFyaWF0aW9uU2lkZSA9IGdldE9wcG9zaXRlUGxhY2VtZW50KG1haW5WYXJpYXRpb25TaWRlKTtcbiAgICB2YXIgY2hlY2tzID0gW107XG5cbiAgICBpZiAoY2hlY2tNYWluQXhpcykge1xuICAgICAgY2hlY2tzLnB1c2gob3ZlcmZsb3dbX2Jhc2VQbGFjZW1lbnRdIDw9IDApO1xuICAgIH1cblxuICAgIGlmIChjaGVja0FsdEF4aXMpIHtcbiAgICAgIGNoZWNrcy5wdXNoKG92ZXJmbG93W21haW5WYXJpYXRpb25TaWRlXSA8PSAwLCBvdmVyZmxvd1thbHRWYXJpYXRpb25TaWRlXSA8PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tzLmV2ZXJ5KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgcmV0dXJuIGNoZWNrO1xuICAgIH0pKSB7XG4gICAgICBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnQ7XG4gICAgICBtYWtlRmFsbGJhY2tDaGVja3MgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNoZWNrc01hcC5zZXQocGxhY2VtZW50LCBjaGVja3MpO1xuICB9XG5cbiAgaWYgKG1ha2VGYWxsYmFja0NoZWNrcykge1xuICAgIC8vIGAyYCBtYXkgYmUgZGVzaXJlZCBpbiBzb21lIGNhc2VzIFx1MjAxMyByZXNlYXJjaCBsYXRlclxuICAgIHZhciBudW1iZXJPZkNoZWNrcyA9IGZsaXBWYXJpYXRpb25zID8gMyA6IDE7XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaSkge1xuICAgICAgdmFyIGZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnRzLmZpbmQoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgICAgICB2YXIgY2hlY2tzID0gY2hlY2tzTWFwLmdldChwbGFjZW1lbnQpO1xuXG4gICAgICAgIGlmIChjaGVja3MpIHtcbiAgICAgICAgICByZXR1cm4gY2hlY2tzLnNsaWNlKDAsIF9pKS5ldmVyeShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChmaXR0aW5nUGxhY2VtZW50KSB7XG4gICAgICAgIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IGZpdHRpbmdQbGFjZW1lbnQ7XG4gICAgICAgIHJldHVybiBcImJyZWFrXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvciAodmFyIF9pID0gbnVtYmVyT2ZDaGVja3M7IF9pID4gMDsgX2ktLSkge1xuICAgICAgdmFyIF9yZXQgPSBfbG9vcChfaSk7XG5cbiAgICAgIGlmIChfcmV0ID09PSBcImJyZWFrXCIpIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZS5wbGFjZW1lbnQgIT09IGZpcnN0Rml0dGluZ1BsYWNlbWVudCkge1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0uX3NraXAgPSB0cnVlO1xuICAgIHN0YXRlLnBsYWNlbWVudCA9IGZpcnN0Rml0dGluZ1BsYWNlbWVudDtcbiAgICBzdGF0ZS5yZXNldCA9IHRydWU7XG4gIH1cbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2ZsaXAnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogZmxpcCxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydvZmZzZXQnXSxcbiAgZGF0YToge1xuICAgIF9za2lwOiBmYWxzZVxuICB9XG59OyIsICJpbXBvcnQgeyB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcblxuZnVuY3Rpb24gZ2V0U2lkZU9mZnNldHMob3ZlcmZsb3csIHJlY3QsIHByZXZlbnRlZE9mZnNldHMpIHtcbiAgaWYgKHByZXZlbnRlZE9mZnNldHMgPT09IHZvaWQgMCkge1xuICAgIHByZXZlbnRlZE9mZnNldHMgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRvcDogb3ZlcmZsb3cudG9wIC0gcmVjdC5oZWlnaHQgLSBwcmV2ZW50ZWRPZmZzZXRzLnksXG4gICAgcmlnaHQ6IG92ZXJmbG93LnJpZ2h0IC0gcmVjdC53aWR0aCArIHByZXZlbnRlZE9mZnNldHMueCxcbiAgICBib3R0b206IG92ZXJmbG93LmJvdHRvbSAtIHJlY3QuaGVpZ2h0ICsgcHJldmVudGVkT2Zmc2V0cy55LFxuICAgIGxlZnQ6IG92ZXJmbG93LmxlZnQgLSByZWN0LndpZHRoIC0gcHJldmVudGVkT2Zmc2V0cy54XG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChvdmVyZmxvdykge1xuICByZXR1cm4gW3RvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdF0uc29tZShmdW5jdGlvbiAoc2lkZSkge1xuICAgIHJldHVybiBvdmVyZmxvd1tzaWRlXSA+PSAwO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGlkZShfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBwcmV2ZW50ZWRPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wcmV2ZW50T3ZlcmZsb3c7XG4gIHZhciByZWZlcmVuY2VPdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgZWxlbWVudENvbnRleHQ6ICdyZWZlcmVuY2UnXG4gIH0pO1xuICB2YXIgcG9wcGVyQWx0T3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGFsdEJvdW5kYXJ5OiB0cnVlXG4gIH0pO1xuICB2YXIgcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzID0gZ2V0U2lkZU9mZnNldHMocmVmZXJlbmNlT3ZlcmZsb3csIHJlZmVyZW5jZVJlY3QpO1xuICB2YXIgcG9wcGVyRXNjYXBlT2Zmc2V0cyA9IGdldFNpZGVPZmZzZXRzKHBvcHBlckFsdE92ZXJmbG93LCBwb3BwZXJSZWN0LCBwcmV2ZW50ZWRPZmZzZXRzKTtcbiAgdmFyIGlzUmVmZXJlbmNlSGlkZGVuID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyk7XG4gIHZhciBoYXNQb3BwZXJFc2NhcGVkID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHBvcHBlckVzY2FwZU9mZnNldHMpO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0ge1xuICAgIHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0czogcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzLFxuICAgIHBvcHBlckVzY2FwZU9mZnNldHM6IHBvcHBlckVzY2FwZU9mZnNldHMsXG4gICAgaXNSZWZlcmVuY2VIaWRkZW46IGlzUmVmZXJlbmNlSGlkZGVuLFxuICAgIGhhc1BvcHBlckVzY2FwZWQ6IGhhc1BvcHBlckVzY2FwZWRcbiAgfTtcbiAgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciwge1xuICAgICdkYXRhLXBvcHBlci1yZWZlcmVuY2UtaGlkZGVuJzogaXNSZWZlcmVuY2VIaWRkZW4sXG4gICAgJ2RhdGEtcG9wcGVyLWVzY2FwZWQnOiBoYXNQb3BwZXJFc2NhcGVkXG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnaGlkZScsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsncHJldmVudE92ZXJmbG93J10sXG4gIGZuOiBoaWRlXG59OyIsICJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgcGxhY2VtZW50cyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZUFuZFNraWRkaW5nVG9YWShwbGFjZW1lbnQsIHJlY3RzLCBvZmZzZXQpIHtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCk7XG4gIHZhciBpbnZlcnREaXN0YW5jZSA9IFtsZWZ0LCB0b3BdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMCA/IC0xIDogMTtcblxuICB2YXIgX3JlZiA9IHR5cGVvZiBvZmZzZXQgPT09ICdmdW5jdGlvbicgPyBvZmZzZXQoT2JqZWN0LmFzc2lnbih7fSwgcmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudFxuICB9KSkgOiBvZmZzZXQsXG4gICAgICBza2lkZGluZyA9IF9yZWZbMF0sXG4gICAgICBkaXN0YW5jZSA9IF9yZWZbMV07XG5cbiAgc2tpZGRpbmcgPSBza2lkZGluZyB8fCAwO1xuICBkaXN0YW5jZSA9IChkaXN0YW5jZSB8fCAwKSAqIGludmVydERpc3RhbmNlO1xuICByZXR1cm4gW2xlZnQsIHJpZ2h0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpID49IDAgPyB7XG4gICAgeDogZGlzdGFuY2UsXG4gICAgeTogc2tpZGRpbmdcbiAgfSA6IHtcbiAgICB4OiBza2lkZGluZyxcbiAgICB5OiBkaXN0YW5jZVxuICB9O1xufVxuXG5mdW5jdGlvbiBvZmZzZXQoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjIub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmMi5uYW1lO1xuICB2YXIgX29wdGlvbnMkb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXQsXG4gICAgICBvZmZzZXQgPSBfb3B0aW9ucyRvZmZzZXQgPT09IHZvaWQgMCA/IFswLCAwXSA6IF9vcHRpb25zJG9mZnNldDtcbiAgdmFyIGRhdGEgPSBwbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgICBhY2NbcGxhY2VtZW50XSA9IGRpc3RhbmNlQW5kU2tpZGRpbmdUb1hZKHBsYWNlbWVudCwgc3RhdGUucmVjdHMsIG9mZnNldCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuICB2YXIgX2RhdGEkc3RhdGUkcGxhY2VtZW50ID0gZGF0YVtzdGF0ZS5wbGFjZW1lbnRdLFxuICAgICAgeCA9IF9kYXRhJHN0YXRlJHBsYWNlbWVudC54LFxuICAgICAgeSA9IF9kYXRhJHN0YXRlJHBsYWNlbWVudC55O1xuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMgIT0gbnVsbCkge1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cy54ICs9IHg7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLnkgKz0geTtcbiAgfVxuXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBkYXRhO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnb2Zmc2V0JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgcmVxdWlyZXM6IFsncG9wcGVyT2Zmc2V0cyddLFxuICBmbjogb2Zmc2V0XG59OyIsICJpbXBvcnQgY29tcHV0ZU9mZnNldHMgZnJvbSBcIi4uL3V0aWxzL2NvbXB1dGVPZmZzZXRzLmpzXCI7XG5cbmZ1bmN0aW9uIHBvcHBlck9mZnNldHMoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcbiAgLy8gT2Zmc2V0cyBhcmUgdGhlIGFjdHVhbCBwb3NpdGlvbiB0aGUgcG9wcGVyIG5lZWRzIHRvIGhhdmUgdG8gYmVcbiAgLy8gcHJvcGVybHkgcG9zaXRpb25lZCBuZWFyIGl0cyByZWZlcmVuY2UgZWxlbWVudFxuICAvLyBUaGlzIGlzIHRoZSBtb3N0IGJhc2ljIHBsYWNlbWVudCwgYW5kIHdpbGwgYmUgYWRqdXN0ZWQgYnlcbiAgLy8gdGhlIG1vZGlmaWVycyBpbiB0aGUgbmV4dCBzdGVwXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBjb21wdXRlT2Zmc2V0cyh7XG4gICAgcmVmZXJlbmNlOiBzdGF0ZS5yZWN0cy5yZWZlcmVuY2UsXG4gICAgZWxlbWVudDogc3RhdGUucmVjdHMucG9wcGVyLFxuICAgIHN0cmF0ZWd5OiAnYWJzb2x1dGUnLFxuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAncG9wcGVyT2Zmc2V0cycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAncmVhZCcsXG4gIGZuOiBwb3BwZXJPZmZzZXRzLFxuICBkYXRhOiB7fVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QWx0QXhpcyhheGlzKSB7XG4gIHJldHVybiBheGlzID09PSAneCcgPyAneScgOiAneCc7XG59IiwgImltcG9ydCB7IHRvcCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgc3RhcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRBbHRBeGlzIGZyb20gXCIuLi91dGlscy9nZXRBbHRBeGlzLmpzXCI7XG5pbXBvcnQgeyB3aXRoaW4sIHdpdGhpbk1heENsYW1wIH0gZnJvbSBcIi4uL3V0aWxzL3dpdGhpbi5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCBnZXRGcmVzaFNpZGVPYmplY3QgZnJvbSBcIi4uL3V0aWxzL2dldEZyZXNoU2lkZU9iamVjdC5qc1wiO1xuaW1wb3J0IHsgbWluIGFzIG1hdGhNaW4sIG1heCBhcyBtYXRoTWF4IH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gcHJldmVudE92ZXJmbG93KF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICB2YXIgX29wdGlvbnMkbWFpbkF4aXMgPSBvcHRpb25zLm1haW5BeGlzLFxuICAgICAgY2hlY2tNYWluQXhpcyA9IF9vcHRpb25zJG1haW5BeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkbWFpbkF4aXMsXG4gICAgICBfb3B0aW9ucyRhbHRBeGlzID0gb3B0aW9ucy5hbHRBeGlzLFxuICAgICAgY2hlY2tBbHRBeGlzID0gX29wdGlvbnMkYWx0QXhpcyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfb3B0aW9ucyRhbHRBeGlzLFxuICAgICAgYm91bmRhcnkgPSBvcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IG9wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgX29wdGlvbnMkdGV0aGVyID0gb3B0aW9ucy50ZXRoZXIsXG4gICAgICB0ZXRoZXIgPSBfb3B0aW9ucyR0ZXRoZXIgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyR0ZXRoZXIsXG4gICAgICBfb3B0aW9ucyR0ZXRoZXJPZmZzZXQgPSBvcHRpb25zLnRldGhlck9mZnNldCxcbiAgICAgIHRldGhlck9mZnNldCA9IF9vcHRpb25zJHRldGhlck9mZnNldCA9PT0gdm9pZCAwID8gMCA6IF9vcHRpb25zJHRldGhlck9mZnNldDtcbiAgdmFyIG92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgcGFkZGluZzogcGFkZGluZyxcbiAgICBhbHRCb3VuZGFyeTogYWx0Qm91bmRhcnlcbiAgfSk7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgdmFyaWF0aW9uID0gZ2V0VmFyaWF0aW9uKHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciBpc0Jhc2VQbGFjZW1lbnQgPSAhdmFyaWF0aW9uO1xuICB2YXIgbWFpbkF4aXMgPSBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCk7XG4gIHZhciBhbHRBeGlzID0gZ2V0QWx0QXhpcyhtYWluQXhpcyk7XG4gIHZhciBwb3BwZXJPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciB0ZXRoZXJPZmZzZXRWYWx1ZSA9IHR5cGVvZiB0ZXRoZXJPZmZzZXQgPT09ICdmdW5jdGlvbicgPyB0ZXRoZXJPZmZzZXQoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KSkgOiB0ZXRoZXJPZmZzZXQ7XG4gIHZhciBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUgPSB0eXBlb2YgdGV0aGVyT2Zmc2V0VmFsdWUgPT09ICdudW1iZXInID8ge1xuICAgIG1haW5BeGlzOiB0ZXRoZXJPZmZzZXRWYWx1ZSxcbiAgICBhbHRBeGlzOiB0ZXRoZXJPZmZzZXRWYWx1ZVxuICB9IDogT2JqZWN0LmFzc2lnbih7XG4gICAgbWFpbkF4aXM6IDAsXG4gICAgYWx0QXhpczogMFxuICB9LCB0ZXRoZXJPZmZzZXRWYWx1ZSk7XG4gIHZhciBvZmZzZXRNb2RpZmllclN0YXRlID0gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQgPyBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldFtzdGF0ZS5wbGFjZW1lbnRdIDogbnVsbDtcbiAgdmFyIGRhdGEgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgaWYgKCFwb3BwZXJPZmZzZXRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNoZWNrTWFpbkF4aXMpIHtcbiAgICB2YXIgX29mZnNldE1vZGlmaWVyU3RhdGUkO1xuXG4gICAgdmFyIG1haW5TaWRlID0gbWFpbkF4aXMgPT09ICd5JyA/IHRvcCA6IGxlZnQ7XG4gICAgdmFyIGFsdFNpZGUgPSBtYWluQXhpcyA9PT0gJ3knID8gYm90dG9tIDogcmlnaHQ7XG4gICAgdmFyIGxlbiA9IG1haW5BeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG4gICAgdmFyIG9mZnNldCA9IHBvcHBlck9mZnNldHNbbWFpbkF4aXNdO1xuICAgIHZhciBtaW4gPSBvZmZzZXQgKyBvdmVyZmxvd1ttYWluU2lkZV07XG4gICAgdmFyIG1heCA9IG9mZnNldCAtIG92ZXJmbG93W2FsdFNpZGVdO1xuICAgIHZhciBhZGRpdGl2ZSA9IHRldGhlciA/IC1wb3BwZXJSZWN0W2xlbl0gLyAyIDogMDtcbiAgICB2YXIgbWluTGVuID0gdmFyaWF0aW9uID09PSBzdGFydCA/IHJlZmVyZW5jZVJlY3RbbGVuXSA6IHBvcHBlclJlY3RbbGVuXTtcbiAgICB2YXIgbWF4TGVuID0gdmFyaWF0aW9uID09PSBzdGFydCA/IC1wb3BwZXJSZWN0W2xlbl0gOiAtcmVmZXJlbmNlUmVjdFtsZW5dOyAvLyBXZSBuZWVkIHRvIGluY2x1ZGUgdGhlIGFycm93IGluIHRoZSBjYWxjdWxhdGlvbiBzbyB0aGUgYXJyb3cgZG9lc24ndCBnb1xuICAgIC8vIG91dHNpZGUgdGhlIHJlZmVyZW5jZSBib3VuZHNcblxuICAgIHZhciBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdztcbiAgICB2YXIgYXJyb3dSZWN0ID0gdGV0aGVyICYmIGFycm93RWxlbWVudCA/IGdldExheW91dFJlY3QoYXJyb3dFbGVtZW50KSA6IHtcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwXG4gICAgfTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nT2JqZWN0ID0gc3RhdGUubW9kaWZpZXJzRGF0YVsnYXJyb3cjcGVyc2lzdGVudCddID8gc3RhdGUubW9kaWZpZXJzRGF0YVsnYXJyb3cjcGVyc2lzdGVudCddLnBhZGRpbmcgOiBnZXRGcmVzaFNpZGVPYmplY3QoKTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nTWluID0gYXJyb3dQYWRkaW5nT2JqZWN0W21haW5TaWRlXTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nTWF4ID0gYXJyb3dQYWRkaW5nT2JqZWN0W2FsdFNpZGVdOyAvLyBJZiB0aGUgcmVmZXJlbmNlIGxlbmd0aCBpcyBzbWFsbGVyIHRoYW4gdGhlIGFycm93IGxlbmd0aCwgd2UgZG9uJ3Qgd2FudFxuICAgIC8vIHRvIGluY2x1ZGUgaXRzIGZ1bGwgc2l6ZSBpbiB0aGUgY2FsY3VsYXRpb24uIElmIHRoZSByZWZlcmVuY2UgaXMgc21hbGxcbiAgICAvLyBhbmQgbmVhciB0aGUgZWRnZSBvZiBhIGJvdW5kYXJ5LCB0aGUgcG9wcGVyIGNhbiBvdmVyZmxvdyBldmVuIGlmIHRoZVxuICAgIC8vIHJlZmVyZW5jZSBpcyBub3Qgb3ZlcmZsb3dpbmcgYXMgd2VsbCAoZS5nLiB2aXJ0dWFsIGVsZW1lbnRzIHdpdGggbm9cbiAgICAvLyB3aWR0aCBvciBoZWlnaHQpXG5cbiAgICB2YXIgYXJyb3dMZW4gPSB3aXRoaW4oMCwgcmVmZXJlbmNlUmVjdFtsZW5dLCBhcnJvd1JlY3RbbGVuXSk7XG4gICAgdmFyIG1pbk9mZnNldCA9IGlzQmFzZVBsYWNlbWVudCA/IHJlZmVyZW5jZVJlY3RbbGVuXSAvIDIgLSBhZGRpdGl2ZSAtIGFycm93TGVuIC0gYXJyb3dQYWRkaW5nTWluIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzIDogbWluTGVuIC0gYXJyb3dMZW4gLSBhcnJvd1BhZGRpbmdNaW4gLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXM7XG4gICAgdmFyIG1heE9mZnNldCA9IGlzQmFzZVBsYWNlbWVudCA/IC1yZWZlcmVuY2VSZWN0W2xlbl0gLyAyICsgYWRkaXRpdmUgKyBhcnJvd0xlbiArIGFycm93UGFkZGluZ01heCArIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcyA6IG1heExlbiArIGFycm93TGVuICsgYXJyb3dQYWRkaW5nTWF4ICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzO1xuICAgIHZhciBhcnJvd09mZnNldFBhcmVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93ICYmIGdldE9mZnNldFBhcmVudChzdGF0ZS5lbGVtZW50cy5hcnJvdyk7XG4gICAgdmFyIGNsaWVudE9mZnNldCA9IGFycm93T2Zmc2V0UGFyZW50ID8gbWFpbkF4aXMgPT09ICd5JyA/IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudFRvcCB8fCAwIDogYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50TGVmdCB8fCAwIDogMDtcbiAgICB2YXIgb2Zmc2V0TW9kaWZpZXJWYWx1ZSA9IChfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQgPSBvZmZzZXRNb2RpZmllclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBvZmZzZXRNb2RpZmllclN0YXRlW21haW5BeGlzXSkgIT0gbnVsbCA/IF9vZmZzZXRNb2RpZmllclN0YXRlJCA6IDA7XG4gICAgdmFyIHRldGhlck1pbiA9IG9mZnNldCArIG1pbk9mZnNldCAtIG9mZnNldE1vZGlmaWVyVmFsdWUgLSBjbGllbnRPZmZzZXQ7XG4gICAgdmFyIHRldGhlck1heCA9IG9mZnNldCArIG1heE9mZnNldCAtIG9mZnNldE1vZGlmaWVyVmFsdWU7XG4gICAgdmFyIHByZXZlbnRlZE9mZnNldCA9IHdpdGhpbih0ZXRoZXIgPyBtYXRoTWluKG1pbiwgdGV0aGVyTWluKSA6IG1pbiwgb2Zmc2V0LCB0ZXRoZXIgPyBtYXRoTWF4KG1heCwgdGV0aGVyTWF4KSA6IG1heCk7XG4gICAgcG9wcGVyT2Zmc2V0c1ttYWluQXhpc10gPSBwcmV2ZW50ZWRPZmZzZXQ7XG4gICAgZGF0YVttYWluQXhpc10gPSBwcmV2ZW50ZWRPZmZzZXQgLSBvZmZzZXQ7XG4gIH1cblxuICBpZiAoY2hlY2tBbHRBeGlzKSB7XG4gICAgdmFyIF9vZmZzZXRNb2RpZmllclN0YXRlJDI7XG5cbiAgICB2YXIgX21haW5TaWRlID0gbWFpbkF4aXMgPT09ICd4JyA/IHRvcCA6IGxlZnQ7XG5cbiAgICB2YXIgX2FsdFNpZGUgPSBtYWluQXhpcyA9PT0gJ3gnID8gYm90dG9tIDogcmlnaHQ7XG5cbiAgICB2YXIgX29mZnNldCA9IHBvcHBlck9mZnNldHNbYWx0QXhpc107XG5cbiAgICB2YXIgX2xlbiA9IGFsdEF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICAgIHZhciBfbWluID0gX29mZnNldCArIG92ZXJmbG93W19tYWluU2lkZV07XG5cbiAgICB2YXIgX21heCA9IF9vZmZzZXQgLSBvdmVyZmxvd1tfYWx0U2lkZV07XG5cbiAgICB2YXIgaXNPcmlnaW5TaWRlID0gW3RvcCwgbGVmdF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSAhPT0gLTE7XG5cbiAgICB2YXIgX29mZnNldE1vZGlmaWVyVmFsdWUgPSAoX29mZnNldE1vZGlmaWVyU3RhdGUkMiA9IG9mZnNldE1vZGlmaWVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG9mZnNldE1vZGlmaWVyU3RhdGVbYWx0QXhpc10pICE9IG51bGwgPyBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyIDogMDtcblxuICAgIHZhciBfdGV0aGVyTWluID0gaXNPcmlnaW5TaWRlID8gX21pbiA6IF9vZmZzZXQgLSByZWZlcmVuY2VSZWN0W19sZW5dIC0gcG9wcGVyUmVjdFtfbGVuXSAtIF9vZmZzZXRNb2RpZmllclZhbHVlICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLmFsdEF4aXM7XG5cbiAgICB2YXIgX3RldGhlck1heCA9IGlzT3JpZ2luU2lkZSA/IF9vZmZzZXQgKyByZWZlcmVuY2VSZWN0W19sZW5dICsgcG9wcGVyUmVjdFtfbGVuXSAtIF9vZmZzZXRNb2RpZmllclZhbHVlIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLmFsdEF4aXMgOiBfbWF4O1xuXG4gICAgdmFyIF9wcmV2ZW50ZWRPZmZzZXQgPSB0ZXRoZXIgJiYgaXNPcmlnaW5TaWRlID8gd2l0aGluTWF4Q2xhbXAoX3RldGhlck1pbiwgX29mZnNldCwgX3RldGhlck1heCkgOiB3aXRoaW4odGV0aGVyID8gX3RldGhlck1pbiA6IF9taW4sIF9vZmZzZXQsIHRldGhlciA/IF90ZXRoZXJNYXggOiBfbWF4KTtcblxuICAgIHBvcHBlck9mZnNldHNbYWx0QXhpc10gPSBfcHJldmVudGVkT2Zmc2V0O1xuICAgIGRhdGFbYWx0QXhpc10gPSBfcHJldmVudGVkT2Zmc2V0IC0gX29mZnNldDtcbiAgfVxuXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBkYXRhO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAncHJldmVudE92ZXJmbG93JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IHByZXZlbnRPdmVyZmxvdyxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydvZmZzZXQnXVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0SFRNTEVsZW1lbnRTY3JvbGwoZWxlbWVudCkge1xuICByZXR1cm4ge1xuICAgIHNjcm9sbExlZnQ6IGVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IGVsZW1lbnQuc2Nyb2xsVG9wXG4gIH07XG59IiwgImltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRIVE1MRWxlbWVudFNjcm9sbCBmcm9tIFwiLi9nZXRIVE1MRWxlbWVudFNjcm9sbC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZVNjcm9sbChub2RlKSB7XG4gIGlmIChub2RlID09PSBnZXRXaW5kb3cobm9kZSkgfHwgIWlzSFRNTEVsZW1lbnQobm9kZSkpIHtcbiAgICByZXR1cm4gZ2V0V2luZG93U2Nyb2xsKG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRIVE1MRWxlbWVudFNjcm9sbChub2RlKTtcbiAgfVxufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldE5vZGVTY3JvbGwgZnJvbSBcIi4vZ2V0Tm9kZVNjcm9sbC5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBpc1Njcm9sbFBhcmVudCBmcm9tIFwiLi9pc1Njcm9sbFBhcmVudC5qc1wiO1xuaW1wb3J0IHsgcm91bmQgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBpc0VsZW1lbnRTY2FsZWQoZWxlbWVudCkge1xuICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciBzY2FsZVggPSByb3VuZChyZWN0LndpZHRoKSAvIGVsZW1lbnQub2Zmc2V0V2lkdGggfHwgMTtcbiAgdmFyIHNjYWxlWSA9IHJvdW5kKHJlY3QuaGVpZ2h0KSAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8IDE7XG4gIHJldHVybiBzY2FsZVggIT09IDEgfHwgc2NhbGVZICE9PSAxO1xufSAvLyBSZXR1cm5zIHRoZSBjb21wb3NpdGUgcmVjdCBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIGl0cyBvZmZzZXRQYXJlbnQuXG4vLyBDb21wb3NpdGUgbWVhbnMgaXQgdGFrZXMgaW50byBhY2NvdW50IHRyYW5zZm9ybXMgYXMgd2VsbCBhcyBsYXlvdXQuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q29tcG9zaXRlUmVjdChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCwgb2Zmc2V0UGFyZW50LCBpc0ZpeGVkKSB7XG4gIGlmIChpc0ZpeGVkID09PSB2b2lkIDApIHtcbiAgICBpc0ZpeGVkID0gZmFsc2U7XG4gIH1cblxuICB2YXIgaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgPSBpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCk7XG4gIHZhciBvZmZzZXRQYXJlbnRJc1NjYWxlZCA9IGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KSAmJiBpc0VsZW1lbnRTY2FsZWQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIGRvY3VtZW50RWxlbWVudCA9IGdldERvY3VtZW50RWxlbWVudChvZmZzZXRQYXJlbnQpO1xuICB2YXIgcmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCwgb2Zmc2V0UGFyZW50SXNTY2FsZWQsIGlzRml4ZWQpO1xuICB2YXIgc2Nyb2xsID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH07XG4gIHZhciBvZmZzZXRzID0ge1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9O1xuXG4gIGlmIChpc09mZnNldFBhcmVudEFuRWxlbWVudCB8fCAhaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgJiYgIWlzRml4ZWQpIHtcbiAgICBpZiAoZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSAhPT0gJ2JvZHknIHx8IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvMTA3OFxuICAgIGlzU2Nyb2xsUGFyZW50KGRvY3VtZW50RWxlbWVudCkpIHtcbiAgICAgIHNjcm9sbCA9IGdldE5vZGVTY3JvbGwob2Zmc2V0UGFyZW50KTtcbiAgICB9XG5cbiAgICBpZiAoaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpKSB7XG4gICAgICBvZmZzZXRzID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KG9mZnNldFBhcmVudCwgdHJ1ZSk7XG4gICAgICBvZmZzZXRzLnggKz0gb2Zmc2V0UGFyZW50LmNsaWVudExlZnQ7XG4gICAgICBvZmZzZXRzLnkgKz0gb2Zmc2V0UGFyZW50LmNsaWVudFRvcDtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgb2Zmc2V0cy54ID0gZ2V0V2luZG93U2Nyb2xsQmFyWChkb2N1bWVudEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgeDogcmVjdC5sZWZ0ICsgc2Nyb2xsLnNjcm9sbExlZnQgLSBvZmZzZXRzLngsXG4gICAgeTogcmVjdC50b3AgKyBzY3JvbGwuc2Nyb2xsVG9wIC0gb2Zmc2V0cy55LFxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgIGhlaWdodDogcmVjdC5oZWlnaHRcbiAgfTtcbn0iLCAiaW1wb3J0IHsgbW9kaWZpZXJQaGFzZXMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjsgLy8gc291cmNlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80OTg3NTI1NVxuXG5mdW5jdGlvbiBvcmRlcihtb2RpZmllcnMpIHtcbiAgdmFyIG1hcCA9IG5ldyBNYXAoKTtcbiAgdmFyIHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgbWFwLnNldChtb2RpZmllci5uYW1lLCBtb2RpZmllcik7XG4gIH0pOyAvLyBPbiB2aXNpdGluZyBvYmplY3QsIGNoZWNrIGZvciBpdHMgZGVwZW5kZW5jaWVzIGFuZCB2aXNpdCB0aGVtIHJlY3Vyc2l2ZWx5XG5cbiAgZnVuY3Rpb24gc29ydChtb2RpZmllcikge1xuICAgIHZpc2l0ZWQuYWRkKG1vZGlmaWVyLm5hbWUpO1xuICAgIHZhciByZXF1aXJlcyA9IFtdLmNvbmNhdChtb2RpZmllci5yZXF1aXJlcyB8fCBbXSwgbW9kaWZpZXIucmVxdWlyZXNJZkV4aXN0cyB8fCBbXSk7XG4gICAgcmVxdWlyZXMuZm9yRWFjaChmdW5jdGlvbiAoZGVwKSB7XG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKGRlcCkpIHtcbiAgICAgICAgdmFyIGRlcE1vZGlmaWVyID0gbWFwLmdldChkZXApO1xuXG4gICAgICAgIGlmIChkZXBNb2RpZmllcikge1xuICAgICAgICAgIHNvcnQoZGVwTW9kaWZpZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmVzdWx0LnB1c2gobW9kaWZpZXIpO1xuICB9XG5cbiAgbW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgaWYgKCF2aXNpdGVkLmhhcyhtb2RpZmllci5uYW1lKSkge1xuICAgICAgLy8gY2hlY2sgZm9yIHZpc2l0ZWQgb2JqZWN0XG4gICAgICBzb3J0KG1vZGlmaWVyKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvcmRlck1vZGlmaWVycyhtb2RpZmllcnMpIHtcbiAgLy8gb3JkZXIgYmFzZWQgb24gZGVwZW5kZW5jaWVzXG4gIHZhciBvcmRlcmVkTW9kaWZpZXJzID0gb3JkZXIobW9kaWZpZXJzKTsgLy8gb3JkZXIgYmFzZWQgb24gcGhhc2VcblxuICByZXR1cm4gbW9kaWZpZXJQaGFzZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBoYXNlKSB7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQob3JkZXJlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgICByZXR1cm4gbW9kaWZpZXIucGhhc2UgPT09IHBoYXNlO1xuICAgIH0pKTtcbiAgfSwgW10pO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWJvdW5jZShmbikge1xuICB2YXIgcGVuZGluZztcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXBlbmRpbmcpIHtcbiAgICAgIHBlbmRpbmcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwZW5kaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHJlc29sdmUoZm4oKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBlbmRpbmc7XG4gIH07XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlQnlOYW1lKG1vZGlmaWVycykge1xuICB2YXIgbWVyZ2VkID0gbW9kaWZpZXJzLnJlZHVjZShmdW5jdGlvbiAobWVyZ2VkLCBjdXJyZW50KSB7XG4gICAgdmFyIGV4aXN0aW5nID0gbWVyZ2VkW2N1cnJlbnQubmFtZV07XG4gICAgbWVyZ2VkW2N1cnJlbnQubmFtZV0gPSBleGlzdGluZyA/IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLCBjdXJyZW50LCB7XG4gICAgICBvcHRpb25zOiBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZy5vcHRpb25zLCBjdXJyZW50Lm9wdGlvbnMpLFxuICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbih7fSwgZXhpc3RpbmcuZGF0YSwgY3VycmVudC5kYXRhKVxuICAgIH0pIDogY3VycmVudDtcbiAgICByZXR1cm4gbWVyZ2VkO1xuICB9LCB7fSk7IC8vIElFMTEgZG9lcyBub3Qgc3VwcG9ydCBPYmplY3QudmFsdWVzXG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKG1lcmdlZCkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gbWVyZ2VkW2tleV07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0Q29tcG9zaXRlUmVjdCBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0Q29tcG9zaXRlUmVjdC5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBsaXN0U2Nyb2xsUGFyZW50cyBmcm9tIFwiLi9kb20tdXRpbHMvbGlzdFNjcm9sbFBhcmVudHMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCBvcmRlck1vZGlmaWVycyBmcm9tIFwiLi91dGlscy9vcmRlck1vZGlmaWVycy5qc1wiO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gXCIuL3V0aWxzL2RlYm91bmNlLmpzXCI7XG5pbXBvcnQgdmFsaWRhdGVNb2RpZmllcnMgZnJvbSBcIi4vdXRpbHMvdmFsaWRhdGVNb2RpZmllcnMuanNcIjtcbmltcG9ydCB1bmlxdWVCeSBmcm9tIFwiLi91dGlscy91bmlxdWVCeS5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IG1lcmdlQnlOYW1lIGZyb20gXCIuL3V0aWxzL21lcmdlQnlOYW1lLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gXCIuL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgeyBhdXRvIH0gZnJvbSBcIi4vZW51bXMuanNcIjtcbnZhciBJTlZBTElEX0VMRU1FTlRfRVJST1IgPSAnUG9wcGVyOiBJbnZhbGlkIHJlZmVyZW5jZSBvciBwb3BwZXIgYXJndW1lbnQgcHJvdmlkZWQuIFRoZXkgbXVzdCBiZSBlaXRoZXIgYSBET00gZWxlbWVudCBvciB2aXJ0dWFsIGVsZW1lbnQuJztcbnZhciBJTkZJTklURV9MT09QX0VSUk9SID0gJ1BvcHBlcjogQW4gaW5maW5pdGUgbG9vcCBpbiB0aGUgbW9kaWZpZXJzIGN5Y2xlIGhhcyBiZWVuIGRldGVjdGVkISBUaGUgY3ljbGUgaGFzIGJlZW4gaW50ZXJydXB0ZWQgdG8gcHJldmVudCBhIGJyb3dzZXIgY3Jhc2guJztcbnZhciBERUZBVUxUX09QVElPTlMgPSB7XG4gIHBsYWNlbWVudDogJ2JvdHRvbScsXG4gIG1vZGlmaWVyczogW10sXG4gIHN0cmF0ZWd5OiAnYWJzb2x1dGUnXG59O1xuXG5mdW5jdGlvbiBhcmVWYWxpZEVsZW1lbnRzKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuICFhcmdzLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gIShlbGVtZW50ICYmIHR5cGVvZiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9wcGVyR2VuZXJhdG9yKGdlbmVyYXRvck9wdGlvbnMpIHtcbiAgaWYgKGdlbmVyYXRvck9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIGdlbmVyYXRvck9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfZ2VuZXJhdG9yT3B0aW9ucyA9IGdlbmVyYXRvck9wdGlvbnMsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYgPSBfZ2VuZXJhdG9yT3B0aW9ucy5kZWZhdWx0TW9kaWZpZXJzLFxuICAgICAgZGVmYXVsdE1vZGlmaWVycyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZiA9PT0gdm9pZCAwID8gW10gOiBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyID0gX2dlbmVyYXRvck9wdGlvbnMuZGVmYXVsdE9wdGlvbnMsXG4gICAgICBkZWZhdWx0T3B0aW9ucyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZjIgPT09IHZvaWQgMCA/IERFRkFVTFRfT1BUSU9OUyA6IF9nZW5lcmF0b3JPcHRpb25zJGRlZjI7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVQb3BwZXIocmVmZXJlbmNlLCBwb3BwZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgfVxuXG4gICAgdmFyIHN0YXRlID0ge1xuICAgICAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgICAgIG9yZGVyZWRNb2RpZmllcnM6IFtdLFxuICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBkZWZhdWx0T3B0aW9ucyksXG4gICAgICBtb2RpZmllcnNEYXRhOiB7fSxcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIHJlZmVyZW5jZTogcmVmZXJlbmNlLFxuICAgICAgICBwb3BwZXI6IHBvcHBlclxuICAgICAgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IHt9LFxuICAgICAgc3R5bGVzOiB7fVxuICAgIH07XG4gICAgdmFyIGVmZmVjdENsZWFudXBGbnMgPSBbXTtcbiAgICB2YXIgaXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB2YXIgaW5zdGFuY2UgPSB7XG4gICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICBzZXRPcHRpb25zOiBmdW5jdGlvbiBzZXRPcHRpb25zKHNldE9wdGlvbnNBY3Rpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygc2V0T3B0aW9uc0FjdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHNldE9wdGlvbnNBY3Rpb24oc3RhdGUub3B0aW9ucykgOiBzZXRPcHRpb25zQWN0aW9uO1xuICAgICAgICBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIHN0YXRlLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgc3RhdGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIHN0YXRlLnNjcm9sbFBhcmVudHMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlOiBpc0VsZW1lbnQocmVmZXJlbmNlKSA/IGxpc3RTY3JvbGxQYXJlbnRzKHJlZmVyZW5jZSkgOiByZWZlcmVuY2UuY29udGV4dEVsZW1lbnQgPyBsaXN0U2Nyb2xsUGFyZW50cyhyZWZlcmVuY2UuY29udGV4dEVsZW1lbnQpIDogW10sXG4gICAgICAgICAgcG9wcGVyOiBsaXN0U2Nyb2xsUGFyZW50cyhwb3BwZXIpXG4gICAgICAgIH07IC8vIE9yZGVycyB0aGUgbW9kaWZpZXJzIGJhc2VkIG9uIHRoZWlyIGRlcGVuZGVuY2llcyBhbmQgYHBoYXNlYFxuICAgICAgICAvLyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgdmFyIG9yZGVyZWRNb2RpZmllcnMgPSBvcmRlck1vZGlmaWVycyhtZXJnZUJ5TmFtZShbXS5jb25jYXQoZGVmYXVsdE1vZGlmaWVycywgc3RhdGUub3B0aW9ucy5tb2RpZmllcnMpKSk7IC8vIFN0cmlwIG91dCBkaXNhYmxlZCBtb2RpZmllcnNcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzID0gb3JkZXJlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICByZXR1cm4gbS5lbmFibGVkO1xuICAgICAgICB9KTsgLy8gVmFsaWRhdGUgdGhlIHByb3ZpZGVkIG1vZGlmaWVycyBzbyB0aGF0IHRoZSBjb25zdW1lciB3aWxsIGdldCB3YXJuZWRcbiAgICAgICAgLy8gaWYgb25lIG9mIHRoZSBtb2RpZmllcnMgaXMgaW52YWxpZCBmb3IgYW55IHJlYXNvblxuXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICB2YXIgbW9kaWZpZXJzID0gdW5pcXVlQnkoW10uY29uY2F0KG9yZGVyZWRNb2RpZmllcnMsIHN0YXRlLm9wdGlvbnMubW9kaWZpZXJzKSwgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lO1xuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsaWRhdGVNb2RpZmllcnMobW9kaWZpZXJzKTtcblxuICAgICAgICAgIGlmIChnZXRCYXNlUGxhY2VtZW50KHN0YXRlLm9wdGlvbnMucGxhY2VtZW50KSA9PT0gYXV0bykge1xuICAgICAgICAgICAgdmFyIGZsaXBNb2RpZmllciA9IHN0YXRlLm9yZGVyZWRNb2RpZmllcnMuZmluZChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgICAgICAgICAgdmFyIG5hbWUgPSBfcmVmMi5uYW1lO1xuICAgICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gJ2ZsaXAnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZmxpcE1vZGlmaWVyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoWydQb3BwZXI6IFwiYXV0b1wiIHBsYWNlbWVudHMgcmVxdWlyZSB0aGUgXCJmbGlwXCIgbW9kaWZpZXIgYmUnLCAncHJlc2VudCBhbmQgZW5hYmxlZCB0byB3b3JrLiddLmpvaW4oJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIF9nZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwb3BwZXIpLFxuICAgICAgICAgICAgICBtYXJnaW5Ub3AgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5tYXJnaW5Ub3AsXG4gICAgICAgICAgICAgIG1hcmdpblJpZ2h0ID0gX2dldENvbXB1dGVkU3R5bGUubWFyZ2luUmlnaHQsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbSA9IF9nZXRDb21wdXRlZFN0eWxlLm1hcmdpbkJvdHRvbSxcbiAgICAgICAgICAgICAgbWFyZ2luTGVmdCA9IF9nZXRDb21wdXRlZFN0eWxlLm1hcmdpbkxlZnQ7IC8vIFdlIG5vIGxvbmdlciB0YWtlIGludG8gYWNjb3VudCBgbWFyZ2luc2Agb24gdGhlIHBvcHBlciwgYW5kIGl0IGNhblxuICAgICAgICAgIC8vIGNhdXNlIGJ1Z3Mgd2l0aCBwb3NpdGlvbmluZywgc28gd2UnbGwgd2FybiB0aGUgY29uc3VtZXJcblxuXG4gICAgICAgICAgaWYgKFttYXJnaW5Ub3AsIG1hcmdpblJpZ2h0LCBtYXJnaW5Cb3R0b20sIG1hcmdpbkxlZnRdLnNvbWUoZnVuY3Rpb24gKG1hcmdpbikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobWFyZ2luKTtcbiAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFsnUG9wcGVyOiBDU1MgXCJtYXJnaW5cIiBzdHlsZXMgY2Fubm90IGJlIHVzZWQgdG8gYXBwbHkgcGFkZGluZycsICdiZXR3ZWVuIHRoZSBwb3BwZXIgYW5kIGl0cyByZWZlcmVuY2UgZWxlbWVudCBvciBib3VuZGFyeS4nLCAnVG8gcmVwbGljYXRlIG1hcmdpbiwgdXNlIHRoZSBgb2Zmc2V0YCBtb2RpZmllciwgYXMgd2VsbCBhcycsICd0aGUgYHBhZGRpbmdgIG9wdGlvbiBpbiB0aGUgYHByZXZlbnRPdmVyZmxvd2AgYW5kIGBmbGlwYCcsICdtb2RpZmllcnMuJ10uam9pbignICcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBydW5Nb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIC8vIFN5bmMgdXBkYXRlIFx1MjAxMyBpdCB3aWxsIGFsd2F5cyBiZSBleGVjdXRlZCwgZXZlbiBpZiBub3QgbmVjZXNzYXJ5LiBUaGlzXG4gICAgICAvLyBpcyB1c2VmdWwgZm9yIGxvdyBmcmVxdWVuY3kgdXBkYXRlcyB3aGVyZSBzeW5jIGJlaGF2aW9yIHNpbXBsaWZpZXMgdGhlXG4gICAgICAvLyBsb2dpYy5cbiAgICAgIC8vIEZvciBoaWdoIGZyZXF1ZW5jeSB1cGRhdGVzIChlLmcuIGByZXNpemVgIGFuZCBgc2Nyb2xsYCBldmVudHMpLCBhbHdheXNcbiAgICAgIC8vIHByZWZlciB0aGUgYXN5bmMgUG9wcGVyI3VwZGF0ZSBtZXRob2RcbiAgICAgIGZvcmNlVXBkYXRlOiBmdW5jdGlvbiBmb3JjZVVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKGlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9zdGF0ZSRlbGVtZW50cyA9IHN0YXRlLmVsZW1lbnRzLFxuICAgICAgICAgICAgcmVmZXJlbmNlID0gX3N0YXRlJGVsZW1lbnRzLnJlZmVyZW5jZSxcbiAgICAgICAgICAgIHBvcHBlciA9IF9zdGF0ZSRlbGVtZW50cy5wb3BwZXI7IC8vIERvbid0IHByb2NlZWQgaWYgYHJlZmVyZW5jZWAgb3IgYHBvcHBlcmAgYXJlIG5vdCB2YWxpZCBlbGVtZW50c1xuICAgICAgICAvLyBhbnltb3JlXG5cbiAgICAgICAgaWYgKCFhcmVWYWxpZEVsZW1lbnRzKHJlZmVyZW5jZSwgcG9wcGVyKSkge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoSU5WQUxJRF9FTEVNRU5UX0VSUk9SKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gU3RvcmUgdGhlIHJlZmVyZW5jZSBhbmQgcG9wcGVyIHJlY3RzIHRvIGJlIHJlYWQgYnkgbW9kaWZpZXJzXG5cblxuICAgICAgICBzdGF0ZS5yZWN0cyA9IHtcbiAgICAgICAgICByZWZlcmVuY2U6IGdldENvbXBvc2l0ZVJlY3QocmVmZXJlbmNlLCBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKSwgc3RhdGUub3B0aW9ucy5zdHJhdGVneSA9PT0gJ2ZpeGVkJyksXG4gICAgICAgICAgcG9wcGVyOiBnZXRMYXlvdXRSZWN0KHBvcHBlcilcbiAgICAgICAgfTsgLy8gTW9kaWZpZXJzIGhhdmUgdGhlIGFiaWxpdHkgdG8gcmVzZXQgdGhlIGN1cnJlbnQgdXBkYXRlIGN5Y2xlLiBUaGVcbiAgICAgICAgLy8gbW9zdCBjb21tb24gdXNlIGNhc2UgZm9yIHRoaXMgaXMgdGhlIGBmbGlwYCBtb2RpZmllciBjaGFuZ2luZyB0aGVcbiAgICAgICAgLy8gcGxhY2VtZW50LCB3aGljaCB0aGVuIG5lZWRzIHRvIHJlLXJ1biBhbGwgdGhlIG1vZGlmaWVycywgYmVjYXVzZSB0aGVcbiAgICAgICAgLy8gbG9naWMgd2FzIHByZXZpb3VzbHkgcmFuIGZvciB0aGUgcHJldmlvdXMgcGxhY2VtZW50IGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgICAgLy8gc3RhbGUvaW5jb3JyZWN0XG5cbiAgICAgICAgc3RhdGUucmVzZXQgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUucGxhY2VtZW50ID0gc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQ7IC8vIE9uIGVhY2ggdXBkYXRlIGN5Y2xlLCB0aGUgYG1vZGlmaWVyc0RhdGFgIHByb3BlcnR5IGZvciBlYWNoIG1vZGlmaWVyXG4gICAgICAgIC8vIGlzIGZpbGxlZCB3aXRoIHRoZSBpbml0aWFsIGRhdGEgc3BlY2lmaWVkIGJ5IHRoZSBtb2RpZmllci4gVGhpcyBtZWFuc1xuICAgICAgICAvLyBpdCBkb2Vzbid0IHBlcnNpc3QgYW5kIGlzIGZyZXNoIG9uIGVhY2ggdXBkYXRlLlxuICAgICAgICAvLyBUbyBlbnN1cmUgcGVyc2lzdGVudCBkYXRhLCB1c2UgYCR7bmFtZX0jcGVyc2lzdGVudGBcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLm1vZGlmaWVyc0RhdGFbbW9kaWZpZXIubmFtZV0gPSBPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllci5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfX2RlYnVnX2xvb3BzX18gPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICAgIF9fZGVidWdfbG9vcHNfXyArPSAxO1xuXG4gICAgICAgICAgICBpZiAoX19kZWJ1Z19sb29wc19fID4gMTAwKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoSU5GSU5JVEVfTE9PUF9FUlJPUik7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdGF0ZS5yZXNldCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgc3RhdGUucmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX3N0YXRlJG9yZGVyZWRNb2RpZmllID0gc3RhdGUub3JkZXJlZE1vZGlmaWVyc1tpbmRleF0sXG4gICAgICAgICAgICAgIGZuID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLmZuLFxuICAgICAgICAgICAgICBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLm9wdGlvbnMsXG4gICAgICAgICAgICAgIF9vcHRpb25zID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllMiA9PT0gdm9pZCAwID8ge30gOiBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyLFxuICAgICAgICAgICAgICBuYW1lID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLm5hbWU7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IGZuKHtcbiAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgICBvcHRpb25zOiBfb3B0aW9ucyxcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlXG4gICAgICAgICAgICB9KSB8fCBzdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBBc3luYyBhbmQgb3B0aW1pc3RpY2FsbHkgb3B0aW1pemVkIHVwZGF0ZSBcdTIwMTMgaXQgd2lsbCBub3QgYmUgZXhlY3V0ZWQgaWZcbiAgICAgIC8vIG5vdCBuZWNlc3NhcnkgKGRlYm91bmNlZCB0byBydW4gYXQgbW9zdCBvbmNlLXBlci10aWNrKVxuICAgICAgdXBkYXRlOiBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIGluc3RhbmNlLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgcmVzb2x2ZShzdGF0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSksXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIGlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCFhcmVWYWxpZEVsZW1lbnRzKHJlZmVyZW5jZSwgcG9wcGVyKSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICBjb25zb2xlLmVycm9yKElOVkFMSURfRUxFTUVOVF9FUlJPUik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5zZXRPcHRpb25zKG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICBpZiAoIWlzRGVzdHJveWVkICYmIG9wdGlvbnMub25GaXJzdFVwZGF0ZSkge1xuICAgICAgICBvcHRpb25zLm9uRmlyc3RVcGRhdGUoc3RhdGUpO1xuICAgICAgfVxuICAgIH0pOyAvLyBNb2RpZmllcnMgaGF2ZSB0aGUgYWJpbGl0eSB0byBleGVjdXRlIGFyYml0cmFyeSBjb2RlIGJlZm9yZSB0aGUgZmlyc3RcbiAgICAvLyB1cGRhdGUgY3ljbGUgcnVucy4gVGhleSB3aWxsIGJlIGV4ZWN1dGVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSB1cGRhdGVcbiAgICAvLyBjeWNsZS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBhIG1vZGlmaWVyIGFkZHMgc29tZSBwZXJzaXN0ZW50IGRhdGEgdGhhdFxuICAgIC8vIG90aGVyIG1vZGlmaWVycyBuZWVkIHRvIHVzZSwgYnV0IHRoZSBtb2RpZmllciBpcyBydW4gYWZ0ZXIgdGhlIGRlcGVuZGVudFxuICAgIC8vIG9uZS5cblxuICAgIGZ1bmN0aW9uIHJ1bk1vZGlmaWVyRWZmZWN0cygpIHtcbiAgICAgIHN0YXRlLm9yZGVyZWRNb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBfcmVmMy5uYW1lLFxuICAgICAgICAgICAgX3JlZjMkb3B0aW9ucyA9IF9yZWYzLm9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zID0gX3JlZjMkb3B0aW9ucyA9PT0gdm9pZCAwID8ge30gOiBfcmVmMyRvcHRpb25zLFxuICAgICAgICAgICAgZWZmZWN0ID0gX3JlZjMuZWZmZWN0O1xuXG4gICAgICAgIGlmICh0eXBlb2YgZWZmZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIGNsZWFudXBGbiA9IGVmZmVjdCh7XG4gICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlLFxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFyIG5vb3BGbiA9IGZ1bmN0aW9uIG5vb3BGbigpIHt9O1xuXG4gICAgICAgICAgZWZmZWN0Q2xlYW51cEZucy5wdXNoKGNsZWFudXBGbiB8fCBub29wRm4pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCkge1xuICAgICAgZWZmZWN0Q2xlYW51cEZucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0pO1xuICAgICAgZWZmZWN0Q2xlYW51cEZucyA9IFtdO1xuICAgIH1cblxuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcbn1cbmV4cG9ydCB2YXIgY3JlYXRlUG9wcGVyID0gLyojX19QVVJFX18qL3BvcHBlckdlbmVyYXRvcigpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGRldGVjdE92ZXJmbG93IH07IiwgImltcG9ydCB7IHBvcHBlckdlbmVyYXRvciwgZGV0ZWN0T3ZlcmZsb3cgfSBmcm9tIFwiLi9jcmVhdGVQb3BwZXIuanNcIjtcbmltcG9ydCBldmVudExpc3RlbmVycyBmcm9tIFwiLi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanNcIjtcbmltcG9ydCBwb3BwZXJPZmZzZXRzIGZyb20gXCIuL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzXCI7XG5pbXBvcnQgY29tcHV0ZVN0eWxlcyBmcm9tIFwiLi9tb2RpZmllcnMvY29tcHV0ZVN0eWxlcy5qc1wiO1xuaW1wb3J0IGFwcGx5U3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9hcHBseVN0eWxlcy5qc1wiO1xuaW1wb3J0IG9mZnNldCBmcm9tIFwiLi9tb2RpZmllcnMvb2Zmc2V0LmpzXCI7XG5pbXBvcnQgZmxpcCBmcm9tIFwiLi9tb2RpZmllcnMvZmxpcC5qc1wiO1xuaW1wb3J0IHByZXZlbnRPdmVyZmxvdyBmcm9tIFwiLi9tb2RpZmllcnMvcHJldmVudE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgYXJyb3cgZnJvbSBcIi4vbW9kaWZpZXJzL2Fycm93LmpzXCI7XG5pbXBvcnQgaGlkZSBmcm9tIFwiLi9tb2RpZmllcnMvaGlkZS5qc1wiO1xudmFyIGRlZmF1bHRNb2RpZmllcnMgPSBbZXZlbnRMaXN0ZW5lcnMsIHBvcHBlck9mZnNldHMsIGNvbXB1dGVTdHlsZXMsIGFwcGx5U3R5bGVzLCBvZmZzZXQsIGZsaXAsIHByZXZlbnRPdmVyZmxvdywgYXJyb3csIGhpZGVdO1xudmFyIGNyZWF0ZVBvcHBlciA9IC8qI19fUFVSRV9fKi9wb3BwZXJHZW5lcmF0b3Ioe1xuICBkZWZhdWx0TW9kaWZpZXJzOiBkZWZhdWx0TW9kaWZpZXJzXG59KTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIsIHBvcHBlckdlbmVyYXRvciwgZGVmYXVsdE1vZGlmaWVycywgZGV0ZWN0T3ZlcmZsb3cgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIgYXMgY3JlYXRlUG9wcGVyTGl0ZSB9IGZyb20gXCIuL3BvcHBlci1saXRlLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0ICogZnJvbSBcIi4vbW9kaWZpZXJzL2luZGV4LmpzXCI7IiwgImV4cG9ydCBjb25zdCBST1VORF9BUlJPVyA9XG4gICc8c3ZnIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCI2XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMCA2czEuNzk2LS4wMTMgNC42Ny0zLjYxNUM1Ljg1MS45IDYuOTMuMDA2IDggMGMxLjA3LS4wMDYgMi4xNDguODg3IDMuMzQzIDIuMzg1QzE0LjIzMyA2LjAwNSAxNiA2IDE2IDZIMHpcIj48L3N2Zz4nO1xuXG5leHBvcnQgY29uc3QgQk9YX0NMQVNTID0gYF9fTkFNRVNQQUNFX1BSRUZJWF9fLWJveGA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9DTEFTUyA9IGBfX05BTUVTUEFDRV9QUkVGSVhfXy1jb250ZW50YDtcbmV4cG9ydCBjb25zdCBCQUNLRFJPUF9DTEFTUyA9IGBfX05BTUVTUEFDRV9QUkVGSVhfXy1iYWNrZHJvcGA7XG5leHBvcnQgY29uc3QgQVJST1dfQ0xBU1MgPSBgX19OQU1FU1BBQ0VfUFJFRklYX18tYXJyb3dgO1xuZXhwb3J0IGNvbnN0IFNWR19BUlJPV19DTEFTUyA9IGBfX05BTUVTUEFDRV9QUkVGSVhfXy1zdmctYXJyb3dgO1xuXG5leHBvcnQgY29uc3QgVE9VQ0hfT1BUSU9OUyA9IHtwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiB0cnVlfTtcblxuZXhwb3J0IGNvbnN0IFRJUFBZX0RFRkFVTFRfQVBQRU5EX1RPID0gKCkgPT4gZG9jdW1lbnQuYm9keTtcbiIsICJpbXBvcnQge0Jhc2VQbGFjZW1lbnQsIFBsYWNlbWVudH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShcbiAgb2JqOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAga2V5OiBzdHJpbmdcbik6IGJvb2xlYW4ge1xuICByZXR1cm4ge30uaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZUF0SW5kZXhPclJldHVybjxUPihcbiAgdmFsdWU6IFQgfCBbVCB8IG51bGwsIFQgfCBudWxsXSxcbiAgaW5kZXg6IG51bWJlcixcbiAgZGVmYXVsdFZhbHVlOiBUIHwgW1QsIFRdXG4pOiBUIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgY29uc3QgdiA9IHZhbHVlW2luZGV4XTtcbiAgICByZXR1cm4gdiA9PSBudWxsXG4gICAgICA/IEFycmF5LmlzQXJyYXkoZGVmYXVsdFZhbHVlKVxuICAgICAgICA/IGRlZmF1bHRWYWx1ZVtpbmRleF1cbiAgICAgICAgOiBkZWZhdWx0VmFsdWVcbiAgICAgIDogdjtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVHlwZSh2YWx1ZTogYW55LCB0eXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3Qgc3RyID0ge30udG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIHJldHVybiBzdHIuaW5kZXhPZignW29iamVjdCcpID09PSAwICYmIHN0ci5pbmRleE9mKGAke3R5cGV9XWApID4gLTE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZva2VXaXRoQXJnc09yUmV0dXJuKHZhbHVlOiBhbnksIGFyZ3M6IGFueVtdKTogYW55IHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IHZhbHVlKC4uLmFyZ3MpIDogdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZTxUPihcbiAgZm46IChhcmc6IFQpID0+IHZvaWQsXG4gIG1zOiBudW1iZXJcbik6IChhcmc6IFQpID0+IHZvaWQge1xuICAvLyBBdm9pZCB3cmFwcGluZyBpbiBgc2V0VGltZW91dGAgaWYgbXMgaXMgMCBhbnl3YXlcbiAgaWYgKG1zID09PSAwKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgbGV0IHRpbWVvdXQ6IGFueTtcblxuICByZXR1cm4gKGFyZyk6IHZvaWQgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBmbihhcmcpO1xuICAgIH0sIG1zKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByb3BlcnRpZXM8VD4ob2JqOiBULCBrZXlzOiBzdHJpbmdbXSk6IFBhcnRpYWw8VD4ge1xuICBjb25zdCBjbG9uZSA9IHsuLi5vYmp9O1xuICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGRlbGV0ZSAoY2xvbmUgYXMgYW55KVtrZXldO1xuICB9KTtcbiAgcmV0dXJuIGNsb25lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRCeVNwYWNlcyh2YWx1ZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICByZXR1cm4gdmFsdWUuc3BsaXQoL1xccysvKS5maWx0ZXIoQm9vbGVhbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVUb0FycmF5PFQ+KHZhbHVlOiBUIHwgVFtdKTogVFtdIHtcbiAgcmV0dXJuIChbXSBhcyBUW10pLmNvbmNhdCh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwdXNoSWZVbmlxdWU8VD4oYXJyOiBUW10sIHZhbHVlOiBUKTogdm9pZCB7XG4gIGlmIChhcnIuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgYXJyLnB1c2godmFsdWUpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRQeElmTnVtYmVyKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyA/IGAke3ZhbHVlfXB4YCA6IHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5pcXVlPFQ+KGFycjogVFtdKTogVFtdIHtcbiAgcmV0dXJuIGFyci5maWx0ZXIoKGl0ZW0sIGluZGV4KSA9PiBhcnIuaW5kZXhPZihpdGVtKSA9PT0gaW5kZXgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TnVtYmVyKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VGbG9hdCh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudDogUGxhY2VtZW50KTogQmFzZVBsYWNlbWVudCB7XG4gIHJldHVybiBwbGFjZW1lbnQuc3BsaXQoJy0nKVswXSBhcyBCYXNlUGxhY2VtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlGcm9tKHZhbHVlOiBBcnJheUxpa2U8YW55Pik6IGFueVtdIHtcbiAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVW5kZWZpbmVkUHJvcHMoXG4gIG9iajogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbik6IFBhcnRpYWw8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+IHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgIGlmIChvYmpba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAoYWNjIGFzIGFueSlba2V5XSA9IG9ialtrZXldO1xuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cbiIsICJpbXBvcnQge1JlZmVyZW5jZUVsZW1lbnQsIFRhcmdldHN9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtQb3BwZXJUcmVlRGF0YX0gZnJvbSAnLi90eXBlcy1pbnRlcm5hbCc7XG5pbXBvcnQge2FycmF5RnJvbSwgaXNUeXBlLCBub3JtYWxpemVUb0FycmF5LCBnZXRCYXNlUGxhY2VtZW50fSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRpdigpOiBIVE1MRGl2RWxlbWVudCB7XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRWxlbWVudCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50IHtcbiAgcmV0dXJuIFsnRWxlbWVudCcsICdGcmFnbWVudCddLnNvbWUoKHR5cGUpID0+IGlzVHlwZSh2YWx1ZSwgdHlwZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlTGlzdCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIE5vZGVMaXN0IHtcbiAgcmV0dXJuIGlzVHlwZSh2YWx1ZSwgJ05vZGVMaXN0Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc01vdXNlRXZlbnQodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBNb3VzZUV2ZW50IHtcbiAgcmV0dXJuIGlzVHlwZSh2YWx1ZSwgJ01vdXNlRXZlbnQnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVmZXJlbmNlRWxlbWVudCh2YWx1ZTogYW55KTogdmFsdWUgaXMgUmVmZXJlbmNlRWxlbWVudCB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fdGlwcHkgJiYgdmFsdWUuX3RpcHB5LnJlZmVyZW5jZSA9PT0gdmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJyYXlPZkVsZW1lbnRzKHZhbHVlOiBUYXJnZXRzKTogRWxlbWVudFtdIHtcbiAgaWYgKGlzRWxlbWVudCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gW3ZhbHVlXTtcbiAgfVxuXG4gIGlmIChpc05vZGVMaXN0KHZhbHVlKSkge1xuICAgIHJldHVybiBhcnJheUZyb20odmFsdWUpO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIGFycmF5RnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbHVlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFuc2l0aW9uRHVyYXRpb24oXG4gIGVsczogKEhUTUxEaXZFbGVtZW50IHwgbnVsbClbXSxcbiAgdmFsdWU6IG51bWJlclxuKTogdm9pZCB7XG4gIGVscy5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGlmIChlbCkge1xuICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gYCR7dmFsdWV9bXNgO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRWaXNpYmlsaXR5U3RhdGUoXG4gIGVsczogKEhUTUxEaXZFbGVtZW50IHwgbnVsbClbXSxcbiAgc3RhdGU6ICd2aXNpYmxlJyB8ICdoaWRkZW4nXG4pOiB2b2lkIHtcbiAgZWxzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgaWYgKGVsKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCBzdGF0ZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE93bmVyRG9jdW1lbnQoXG4gIGVsZW1lbnRPckVsZW1lbnRzOiBFbGVtZW50IHwgRWxlbWVudFtdXG4pOiBEb2N1bWVudCB7XG4gIGNvbnN0IFtlbGVtZW50XSA9IG5vcm1hbGl6ZVRvQXJyYXkoZWxlbWVudE9yRWxlbWVudHMpO1xuXG4gIC8vIEVsZW1lbnRzIGNyZWF0ZWQgdmlhIGEgPHRlbXBsYXRlPiBoYXZlIGFuIG93bmVyRG9jdW1lbnQgd2l0aCBubyByZWZlcmVuY2UgdG8gdGhlIGJvZHlcbiAgcmV0dXJuIGVsZW1lbnQ/Lm93bmVyRG9jdW1lbnQ/LmJvZHkgPyBlbGVtZW50Lm93bmVyRG9jdW1lbnQgOiBkb2N1bWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ3Vyc29yT3V0c2lkZUludGVyYWN0aXZlQm9yZGVyKFxuICBwb3BwZXJUcmVlRGF0YTogUG9wcGVyVHJlZURhdGFbXSxcbiAgZXZlbnQ6IE1vdXNlRXZlbnRcbik6IGJvb2xlYW4ge1xuICBjb25zdCB7Y2xpZW50WCwgY2xpZW50WX0gPSBldmVudDtcblxuICByZXR1cm4gcG9wcGVyVHJlZURhdGEuZXZlcnkoKHtwb3BwZXJSZWN0LCBwb3BwZXJTdGF0ZSwgcHJvcHN9KSA9PiB7XG4gICAgY29uc3Qge2ludGVyYWN0aXZlQm9yZGVyfSA9IHByb3BzO1xuICAgIGNvbnN0IGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHBvcHBlclN0YXRlLnBsYWNlbWVudCk7XG4gICAgY29uc3Qgb2Zmc2V0RGF0YSA9IHBvcHBlclN0YXRlLm1vZGlmaWVyc0RhdGEub2Zmc2V0O1xuXG4gICAgaWYgKCFvZmZzZXREYXRhKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCB0b3BEaXN0YW5jZSA9IGJhc2VQbGFjZW1lbnQgPT09ICdib3R0b20nID8gb2Zmc2V0RGF0YS50b3AhLnkgOiAwO1xuICAgIGNvbnN0IGJvdHRvbURpc3RhbmNlID0gYmFzZVBsYWNlbWVudCA9PT0gJ3RvcCcgPyBvZmZzZXREYXRhLmJvdHRvbSEueSA6IDA7XG4gICAgY29uc3QgbGVmdERpc3RhbmNlID0gYmFzZVBsYWNlbWVudCA9PT0gJ3JpZ2h0JyA/IG9mZnNldERhdGEubGVmdCEueCA6IDA7XG4gICAgY29uc3QgcmlnaHREaXN0YW5jZSA9IGJhc2VQbGFjZW1lbnQgPT09ICdsZWZ0JyA/IG9mZnNldERhdGEucmlnaHQhLnggOiAwO1xuXG4gICAgY29uc3QgZXhjZWVkc1RvcCA9XG4gICAgICBwb3BwZXJSZWN0LnRvcCAtIGNsaWVudFkgKyB0b3BEaXN0YW5jZSA+IGludGVyYWN0aXZlQm9yZGVyO1xuICAgIGNvbnN0IGV4Y2VlZHNCb3R0b20gPVxuICAgICAgY2xpZW50WSAtIHBvcHBlclJlY3QuYm90dG9tIC0gYm90dG9tRGlzdGFuY2UgPiBpbnRlcmFjdGl2ZUJvcmRlcjtcbiAgICBjb25zdCBleGNlZWRzTGVmdCA9XG4gICAgICBwb3BwZXJSZWN0LmxlZnQgLSBjbGllbnRYICsgbGVmdERpc3RhbmNlID4gaW50ZXJhY3RpdmVCb3JkZXI7XG4gICAgY29uc3QgZXhjZWVkc1JpZ2h0ID1cbiAgICAgIGNsaWVudFggLSBwb3BwZXJSZWN0LnJpZ2h0IC0gcmlnaHREaXN0YW5jZSA+IGludGVyYWN0aXZlQm9yZGVyO1xuXG4gICAgcmV0dXJuIGV4Y2VlZHNUb3AgfHwgZXhjZWVkc0JvdHRvbSB8fCBleGNlZWRzTGVmdCB8fCBleGNlZWRzUmlnaHQ7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVHJhbnNpdGlvbkVuZExpc3RlbmVyKFxuICBib3g6IEhUTUxEaXZFbGVtZW50LFxuICBhY3Rpb246ICdhZGQnIHwgJ3JlbW92ZScsXG4gIGxpc3RlbmVyOiAoZXZlbnQ6IFRyYW5zaXRpb25FdmVudCkgPT4gdm9pZFxuKTogdm9pZCB7XG4gIGNvbnN0IG1ldGhvZCA9IGAke2FjdGlvbn1FdmVudExpc3RlbmVyYCBhc1xuICAgIHwgJ2FkZEV2ZW50TGlzdGVuZXInXG4gICAgfCAncmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG5cbiAgLy8gc29tZSBicm93c2VycyBhcHBhcmVudGx5IHN1cHBvcnQgYHRyYW5zaXRpb25gICh1bnByZWZpeGVkKSBidXQgb25seSBmaXJlXG4gIC8vIGB3ZWJraXRUcmFuc2l0aW9uRW5kYC4uLlxuICBbJ3RyYW5zaXRpb25lbmQnLCAnd2Via2l0VHJhbnNpdGlvbkVuZCddLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgYm94W21ldGhvZF0oZXZlbnQsIGxpc3RlbmVyIGFzIEV2ZW50TGlzdGVuZXIpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb21wYXJlZCB0byB4eHguY29udGFpbnMsIHRoaXMgZnVuY3Rpb24gd29ya3MgZm9yIGRvbSBzdHJ1Y3R1cmVzIHdpdGggc2hhZG93XG4gKiBkb21cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFjdHVhbENvbnRhaW5zKHBhcmVudDogRWxlbWVudCwgY2hpbGQ6IEVsZW1lbnQpOiBib29sZWFuIHtcbiAgbGV0IHRhcmdldCA9IGNoaWxkO1xuICB3aGlsZSAodGFyZ2V0KSB7XG4gICAgaWYgKHBhcmVudC5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGFyZ2V0ID0gKHRhcmdldC5nZXRSb290Tm9kZT8uKCkgYXMgYW55KT8uaG9zdDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4iLCAiaW1wb3J0IHtUT1VDSF9PUFRJT05TfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQge2lzUmVmZXJlbmNlRWxlbWVudH0gZnJvbSAnLi9kb20tdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgY3VycmVudElucHV0ID0ge2lzVG91Y2g6IGZhbHNlfTtcbmxldCBsYXN0TW91c2VNb3ZlVGltZSA9IDA7XG5cbi8qKlxuICogV2hlbiBhIGB0b3VjaHN0YXJ0YCBldmVudCBpcyBmaXJlZCwgaXQncyBhc3N1bWVkIHRoZSB1c2VyIGlzIHVzaW5nIHRvdWNoXG4gKiBpbnB1dC4gV2UnbGwgYmluZCBhIGBtb3VzZW1vdmVgIGV2ZW50IGxpc3RlbmVyIHRvIGxpc3RlbiBmb3IgbW91c2UgaW5wdXQgaW5cbiAqIHRoZSBmdXR1cmUuIFRoaXMgd2F5LCB0aGUgYGlzVG91Y2hgIHByb3BlcnR5IGlzIGZ1bGx5IGR5bmFtaWMgYW5kIHdpbGwgaGFuZGxlXG4gKiBoeWJyaWQgZGV2aWNlcyB0aGF0IHVzZSBhIG1peCBvZiB0b3VjaCArIG1vdXNlIGlucHV0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb25Eb2N1bWVudFRvdWNoU3RhcnQoKTogdm9pZCB7XG4gIGlmIChjdXJyZW50SW5wdXQuaXNUb3VjaCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGN1cnJlbnRJbnB1dC5pc1RvdWNoID0gdHJ1ZTtcblxuICBpZiAod2luZG93LnBlcmZvcm1hbmNlKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Eb2N1bWVudE1vdXNlTW92ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBXaGVuIHR3byBgbW91c2Vtb3ZlYCBldmVudCBhcmUgZmlyZWQgY29uc2VjdXRpdmVseSB3aXRoaW4gMjBtcywgaXQncyBhc3N1bWVkXG4gKiB0aGUgdXNlciBpcyB1c2luZyBtb3VzZSBpbnB1dCBhZ2Fpbi4gYG1vdXNlbW92ZWAgY2FuIGZpcmUgb24gdG91Y2ggZGV2aWNlcyBhc1xuICogd2VsbCwgYnV0IHZlcnkgcmFyZWx5IHRoYXQgcXVpY2tseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uRG9jdW1lbnRNb3VzZU1vdmUoKTogdm9pZCB7XG4gIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gIGlmIChub3cgLSBsYXN0TW91c2VNb3ZlVGltZSA8IDIwKSB7XG4gICAgY3VycmVudElucHV0LmlzVG91Y2ggPSBmYWxzZTtcblxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uRG9jdW1lbnRNb3VzZU1vdmUpO1xuICB9XG5cbiAgbGFzdE1vdXNlTW92ZVRpbWUgPSBub3c7XG59XG5cbi8qKlxuICogV2hlbiBhbiBlbGVtZW50IGlzIGluIGZvY3VzIGFuZCBoYXMgYSB0aXBweSwgbGVhdmluZyB0aGUgdGFiL3dpbmRvdyBhbmRcbiAqIHJldHVybmluZyBjYXVzZXMgaXQgdG8gc2hvdyBhZ2Fpbi4gRm9yIG1vdXNlIHVzZXJzIHRoaXMgaXMgdW5leHBlY3RlZCwgYnV0XG4gKiBmb3Iga2V5Ym9hcmQgdXNlIGl0IG1ha2VzIHNlbnNlLlxuICogVE9ETzogZmluZCBhIGJldHRlciB0ZWNobmlxdWUgdG8gc29sdmUgdGhpcyBwcm9ibGVtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvbldpbmRvd0JsdXIoKTogdm9pZCB7XG4gIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcblxuICBpZiAoaXNSZWZlcmVuY2VFbGVtZW50KGFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBhY3RpdmVFbGVtZW50Ll90aXBweSE7XG5cbiAgICBpZiAoYWN0aXZlRWxlbWVudC5ibHVyICYmICFpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGUpIHtcbiAgICAgIGFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBiaW5kR2xvYmFsRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkRvY3VtZW50VG91Y2hTdGFydCwgVE9VQ0hfT1BUSU9OUyk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgb25XaW5kb3dCbHVyKTtcbn1cbiIsICJleHBvcnQgY29uc3QgaXNCcm93c2VyID1cbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcblxuZXhwb3J0IGNvbnN0IGlzSUUxMSA9IGlzQnJvd3NlclxuICA/IC8vIEB0cy1pZ25vcmVcbiAgICAhIXdpbmRvdy5tc0NyeXB0b1xuICA6IGZhbHNlO1xuIiwgImltcG9ydCB7VGFyZ2V0c30gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNZW1vcnlMZWFrV2FybmluZyhtZXRob2Q6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHR4dCA9IG1ldGhvZCA9PT0gJ2Rlc3Ryb3knID8gJ24gYWxyZWFkeS0nIDogJyAnO1xuXG4gIHJldHVybiBbXG4gICAgYCR7bWV0aG9kfSgpIHdhcyBjYWxsZWQgb24gYSR7dHh0fWRlc3Ryb3llZCBpbnN0YW5jZS4gVGhpcyBpcyBhIG5vLW9wIGJ1dGAsXG4gICAgJ2luZGljYXRlcyBhIHBvdGVudGlhbCBtZW1vcnkgbGVhay4nLFxuICBdLmpvaW4oJyAnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzcGFjZXNBbmRUYWJzID0gL1sgXFx0XXsyLH0vZztcbiAgY29uc3QgbGluZVN0YXJ0V2l0aFNwYWNlcyA9IC9eWyBcXHRdKi9nbTtcblxuICByZXR1cm4gdmFsdWVcbiAgICAucmVwbGFjZShzcGFjZXNBbmRUYWJzLCAnICcpXG4gICAgLnJlcGxhY2UobGluZVN0YXJ0V2l0aFNwYWNlcywgJycpXG4gICAgLnRyaW0oKTtcbn1cblxuZnVuY3Rpb24gZ2V0RGV2TWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gY2xlYW4oYFxuICAlY3RpcHB5LmpzXG5cbiAgJWMke2NsZWFuKG1lc3NhZ2UpfVxuXG4gICVjXHVEODNEXHVEQzc3XHUyMDBEIFRoaXMgaXMgYSBkZXZlbG9wbWVudC1vbmx5IG1lc3NhZ2UuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiBwcm9kdWN0aW9uLlxuICBgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1hdHRlZE1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICByZXR1cm4gW1xuICAgIGdldERldk1lc3NhZ2UobWVzc2FnZSksXG4gICAgLy8gdGl0bGVcbiAgICAnY29sb3I6ICMwMEM1ODQ7IGZvbnQtc2l6ZTogMS4zZW07IGZvbnQtd2VpZ2h0OiBib2xkOycsXG4gICAgLy8gbWVzc2FnZVxuICAgICdsaW5lLWhlaWdodDogMS41JyxcbiAgICAvLyBmb290ZXJcbiAgICAnY29sb3I6ICNhNmEwOTU7JyxcbiAgXTtcbn1cblxuLy8gQXNzdW1lIHdhcm5pbmdzIGFuZCBlcnJvcnMgbmV2ZXIgaGF2ZSB0aGUgc2FtZSBtZXNzYWdlXG5sZXQgdmlzaXRlZE1lc3NhZ2VzOiBTZXQ8c3RyaW5nPjtcbmlmIChfX0RFVl9fKSB7XG4gIHJlc2V0VmlzaXRlZE1lc3NhZ2VzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldFZpc2l0ZWRNZXNzYWdlcygpOiB2b2lkIHtcbiAgdmlzaXRlZE1lc3NhZ2VzID0gbmV3IFNldCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2FybldoZW4oY29uZGl0aW9uOiBib29sZWFuLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKGNvbmRpdGlvbiAmJiAhdmlzaXRlZE1lc3NhZ2VzLmhhcyhtZXNzYWdlKSkge1xuICAgIHZpc2l0ZWRNZXNzYWdlcy5hZGQobWVzc2FnZSk7XG4gICAgY29uc29sZS53YXJuKC4uLmdldEZvcm1hdHRlZE1lc3NhZ2UobWVzc2FnZSkpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcnJvcldoZW4oY29uZGl0aW9uOiBib29sZWFuLCBtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKGNvbmRpdGlvbiAmJiAhdmlzaXRlZE1lc3NhZ2VzLmhhcyhtZXNzYWdlKSkge1xuICAgIHZpc2l0ZWRNZXNzYWdlcy5hZGQobWVzc2FnZSk7XG4gICAgY29uc29sZS5lcnJvciguLi5nZXRGb3JtYXR0ZWRNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUYXJnZXRzKHRhcmdldHM6IFRhcmdldHMpOiB2b2lkIHtcbiAgY29uc3QgZGlkUGFzc0ZhbHN5VmFsdWUgPSAhdGFyZ2V0cztcbiAgY29uc3QgZGlkUGFzc1BsYWluT2JqZWN0ID1cbiAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFyZ2V0cykgPT09ICdbb2JqZWN0IE9iamVjdF0nICYmXG4gICAgISh0YXJnZXRzIGFzIGFueSkuYWRkRXZlbnRMaXN0ZW5lcjtcblxuICBlcnJvcldoZW4oXG4gICAgZGlkUGFzc0ZhbHN5VmFsdWUsXG4gICAgW1xuICAgICAgJ3RpcHB5KCkgd2FzIHBhc3NlZCcsXG4gICAgICAnYCcgKyBTdHJpbmcodGFyZ2V0cykgKyAnYCcsXG4gICAgICAnYXMgaXRzIHRhcmdldHMgKGZpcnN0KSBhcmd1bWVudC4gVmFsaWQgdHlwZXMgYXJlOiBTdHJpbmcsIEVsZW1lbnQsJyxcbiAgICAgICdFbGVtZW50W10sIG9yIE5vZGVMaXN0LicsXG4gICAgXS5qb2luKCcgJylcbiAgKTtcblxuICBlcnJvcldoZW4oXG4gICAgZGlkUGFzc1BsYWluT2JqZWN0LFxuICAgIFtcbiAgICAgICd0aXBweSgpIHdhcyBwYXNzZWQgYSBwbGFpbiBvYmplY3Qgd2hpY2ggaXMgbm90IHN1cHBvcnRlZCBhcyBhbiBhcmd1bWVudCcsXG4gICAgICAnZm9yIHZpcnR1YWwgcG9zaXRpb25pbmcuIFVzZSBwcm9wcy5nZXRSZWZlcmVuY2VDbGllbnRSZWN0IGluc3RlYWQuJyxcbiAgICBdLmpvaW4oJyAnKVxuICApO1xufVxuIiwgImltcG9ydCB7RGVmYXVsdFByb3BzLCBQbHVnaW4sIFByb3BzLCBSZWZlcmVuY2VFbGVtZW50LCBUaXBweX0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge1xuICBoYXNPd25Qcm9wZXJ0eSxcbiAgcmVtb3ZlUHJvcGVydGllcyxcbiAgaW52b2tlV2l0aEFyZ3NPclJldHVybixcbn0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQge3dhcm5XaGVufSBmcm9tICcuL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHtUSVBQWV9ERUZBVUxUX0FQUEVORF9UT30gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5jb25zdCBwbHVnaW5Qcm9wcyA9IHtcbiAgYW5pbWF0ZUZpbGw6IGZhbHNlLFxuICBmb2xsb3dDdXJzb3I6IGZhbHNlLFxuICBpbmxpbmVQb3NpdGlvbmluZzogZmFsc2UsXG4gIHN0aWNreTogZmFsc2UsXG59O1xuXG5jb25zdCByZW5kZXJQcm9wcyA9IHtcbiAgYWxsb3dIVE1MOiBmYWxzZSxcbiAgYW5pbWF0aW9uOiAnZmFkZScsXG4gIGFycm93OiB0cnVlLFxuICBjb250ZW50OiAnJyxcbiAgaW5lcnRpYTogZmFsc2UsXG4gIG1heFdpZHRoOiAzNTAsXG4gIHJvbGU6ICd0b29sdGlwJyxcbiAgdGhlbWU6ICcnLFxuICB6SW5kZXg6IDk5OTksXG59O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdFByb3BzOiBEZWZhdWx0UHJvcHMgPSB7XG4gIGFwcGVuZFRvOiBUSVBQWV9ERUZBVUxUX0FQUEVORF9UTyxcbiAgYXJpYToge1xuICAgIGNvbnRlbnQ6ICdhdXRvJyxcbiAgICBleHBhbmRlZDogJ2F1dG8nLFxuICB9LFxuICBkZWxheTogMCxcbiAgZHVyYXRpb246IFszMDAsIDI1MF0sXG4gIGdldFJlZmVyZW5jZUNsaWVudFJlY3Q6IG51bGwsXG4gIGhpZGVPbkNsaWNrOiB0cnVlLFxuICBpZ25vcmVBdHRyaWJ1dGVzOiBmYWxzZSxcbiAgaW50ZXJhY3RpdmU6IGZhbHNlLFxuICBpbnRlcmFjdGl2ZUJvcmRlcjogMixcbiAgaW50ZXJhY3RpdmVEZWJvdW5jZTogMCxcbiAgbW92ZVRyYW5zaXRpb246ICcnLFxuICBvZmZzZXQ6IFswLCAxMF0sXG4gIG9uQWZ0ZXJVcGRhdGUoKSB7fSxcbiAgb25CZWZvcmVVcGRhdGUoKSB7fSxcbiAgb25DcmVhdGUoKSB7fSxcbiAgb25EZXN0cm95KCkge30sXG4gIG9uSGlkZGVuKCkge30sXG4gIG9uSGlkZSgpIHt9LFxuICBvbk1vdW50KCkge30sXG4gIG9uU2hvdygpIHt9LFxuICBvblNob3duKCkge30sXG4gIG9uVHJpZ2dlcigpIHt9LFxuICBvblVudHJpZ2dlcigpIHt9LFxuICBvbkNsaWNrT3V0c2lkZSgpIHt9LFxuICBwbGFjZW1lbnQ6ICd0b3AnLFxuICBwbHVnaW5zOiBbXSxcbiAgcG9wcGVyT3B0aW9uczoge30sXG4gIHJlbmRlcjogbnVsbCxcbiAgc2hvd09uQ3JlYXRlOiBmYWxzZSxcbiAgdG91Y2g6IHRydWUsXG4gIHRyaWdnZXI6ICdtb3VzZWVudGVyIGZvY3VzJyxcbiAgdHJpZ2dlclRhcmdldDogbnVsbCxcbiAgLi4ucGx1Z2luUHJvcHMsXG4gIC4uLnJlbmRlclByb3BzLFxufTtcblxuY29uc3QgZGVmYXVsdEtleXMgPSBPYmplY3Qua2V5cyhkZWZhdWx0UHJvcHMpO1xuXG5leHBvcnQgY29uc3Qgc2V0RGVmYXVsdFByb3BzOiBUaXBweVsnc2V0RGVmYXVsdFByb3BzJ10gPSAocGFydGlhbFByb3BzKSA9PiB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChfX0RFVl9fKSB7XG4gICAgdmFsaWRhdGVQcm9wcyhwYXJ0aWFsUHJvcHMsIFtdKTtcbiAgfVxuXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwYXJ0aWFsUHJvcHMpIGFzIEFycmF5PGtleW9mIERlZmF1bHRQcm9wcz47XG4gIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgKGRlZmF1bHRQcm9wcyBhcyBhbnkpW2tleV0gPSBwYXJ0aWFsUHJvcHNba2V5XTtcbiAgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0ZW5kZWRQYXNzZWRQcm9wcyhcbiAgcGFzc2VkUHJvcHM6IFBhcnRpYWw8UHJvcHM+ICYgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbik6IFBhcnRpYWw8UHJvcHM+IHtcbiAgY29uc3QgcGx1Z2lucyA9IHBhc3NlZFByb3BzLnBsdWdpbnMgfHwgW107XG4gIGNvbnN0IHBsdWdpblByb3BzID0gcGx1Z2lucy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+KChhY2MsIHBsdWdpbikgPT4ge1xuICAgIGNvbnN0IHtuYW1lLCBkZWZhdWx0VmFsdWV9ID0gcGx1Z2luO1xuXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGFjY1tuYW1lXSA9XG4gICAgICAgIHBhc3NlZFByb3BzW25hbWVdICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHBhc3NlZFByb3BzW25hbWVdXG4gICAgICAgICAgOiAoZGVmYXVsdFByb3BzIGFzIGFueSlbbmFtZV0gPz8gZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcblxuICByZXR1cm4ge1xuICAgIC4uLnBhc3NlZFByb3BzLFxuICAgIC4uLnBsdWdpblByb3BzLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YUF0dHJpYnV0ZVByb3BzKFxuICByZWZlcmVuY2U6IFJlZmVyZW5jZUVsZW1lbnQsXG4gIHBsdWdpbnM6IFBsdWdpbltdXG4pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIGNvbnN0IHByb3BLZXlzID0gcGx1Z2luc1xuICAgID8gT2JqZWN0LmtleXMoZ2V0RXh0ZW5kZWRQYXNzZWRQcm9wcyh7Li4uZGVmYXVsdFByb3BzLCBwbHVnaW5zfSkpXG4gICAgOiBkZWZhdWx0S2V5cztcblxuICBjb25zdCBwcm9wcyA9IHByb3BLZXlzLnJlZHVjZShcbiAgICAoYWNjOiBQYXJ0aWFsPFByb3BzPiAmIFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBrZXkpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlQXNTdHJpbmcgPSAoXG4gICAgICAgIHJlZmVyZW5jZS5nZXRBdHRyaWJ1dGUoYGRhdGEtdGlwcHktJHtrZXl9YCkgfHwgJydcbiAgICAgICkudHJpbSgpO1xuXG4gICAgICBpZiAoIXZhbHVlQXNTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH1cblxuICAgICAgaWYgKGtleSA9PT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgIGFjY1trZXldID0gdmFsdWVBc1N0cmluZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYWNjW2tleV0gPSBKU09OLnBhcnNlKHZhbHVlQXNTdHJpbmcpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgYWNjW2tleV0gPSB2YWx1ZUFzU3RyaW5nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICB7fVxuICApO1xuXG4gIHJldHVybiBwcm9wcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV2YWx1YXRlUHJvcHMoXG4gIHJlZmVyZW5jZTogUmVmZXJlbmNlRWxlbWVudCxcbiAgcHJvcHM6IFByb3BzXG4pOiBQcm9wcyB7XG4gIGNvbnN0IG91dCA9IHtcbiAgICAuLi5wcm9wcyxcbiAgICBjb250ZW50OiBpbnZva2VXaXRoQXJnc09yUmV0dXJuKHByb3BzLmNvbnRlbnQsIFtyZWZlcmVuY2VdKSxcbiAgICAuLi4ocHJvcHMuaWdub3JlQXR0cmlidXRlc1xuICAgICAgPyB7fVxuICAgICAgOiBnZXREYXRhQXR0cmlidXRlUHJvcHMocmVmZXJlbmNlLCBwcm9wcy5wbHVnaW5zKSksXG4gIH07XG5cbiAgb3V0LmFyaWEgPSB7XG4gICAgLi4uZGVmYXVsdFByb3BzLmFyaWEsXG4gICAgLi4ub3V0LmFyaWEsXG4gIH07XG5cbiAgb3V0LmFyaWEgPSB7XG4gICAgZXhwYW5kZWQ6XG4gICAgICBvdXQuYXJpYS5leHBhbmRlZCA9PT0gJ2F1dG8nID8gcHJvcHMuaW50ZXJhY3RpdmUgOiBvdXQuYXJpYS5leHBhbmRlZCxcbiAgICBjb250ZW50OlxuICAgICAgb3V0LmFyaWEuY29udGVudCA9PT0gJ2F1dG8nXG4gICAgICAgID8gcHJvcHMuaW50ZXJhY3RpdmVcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6ICdkZXNjcmliZWRieSdcbiAgICAgICAgOiBvdXQuYXJpYS5jb250ZW50LFxuICB9O1xuXG4gIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVByb3BzKFxuICBwYXJ0aWFsUHJvcHM6IFBhcnRpYWw8UHJvcHM+ID0ge30sXG4gIHBsdWdpbnM6IFBsdWdpbltdID0gW11cbik6IHZvaWQge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocGFydGlhbFByb3BzKSBhcyBBcnJheTxrZXlvZiBQcm9wcz47XG4gIGtleXMuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgIGNvbnN0IG5vblBsdWdpblByb3BzID0gcmVtb3ZlUHJvcGVydGllcyhcbiAgICAgIGRlZmF1bHRQcm9wcyxcbiAgICAgIE9iamVjdC5rZXlzKHBsdWdpblByb3BzKVxuICAgICk7XG5cbiAgICBsZXQgZGlkUGFzc1Vua25vd25Qcm9wID0gIWhhc093blByb3BlcnR5KG5vblBsdWdpblByb3BzLCBwcm9wKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBwcm9wIGV4aXN0cyBpbiBgcGx1Z2luc2BcbiAgICBpZiAoZGlkUGFzc1Vua25vd25Qcm9wKSB7XG4gICAgICBkaWRQYXNzVW5rbm93blByb3AgPVxuICAgICAgICBwbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4ubmFtZSA9PT0gcHJvcCkubGVuZ3RoID09PSAwO1xuICAgIH1cblxuICAgIHdhcm5XaGVuKFxuICAgICAgZGlkUGFzc1Vua25vd25Qcm9wLFxuICAgICAgW1xuICAgICAgICBgXFxgJHtwcm9wfVxcYGAsXG4gICAgICAgIFwiaXMgbm90IGEgdmFsaWQgcHJvcC4gWW91IG1heSBoYXZlIHNwZWxsZWQgaXQgaW5jb3JyZWN0bHksIG9yIGlmIGl0J3NcIixcbiAgICAgICAgJ2EgcGx1Z2luLCBmb3Jnb3QgdG8gcGFzcyBpdCBpbiBhbiBhcnJheSBhcyBwcm9wcy5wbHVnaW5zLicsXG4gICAgICAgICdcXG5cXG4nLFxuICAgICAgICAnQWxsIHByb3BzOiBodHRwczovL2F0b21pa3MuZ2l0aHViLmlvL3RpcHB5anMvdjYvYWxsLXByb3BzL1xcbicsXG4gICAgICAgICdQbHVnaW5zOiBodHRwczovL2F0b21pa3MuZ2l0aHViLmlvL3RpcHB5anMvdjYvcGx1Z2lucy8nLFxuICAgICAgXS5qb2luKCcgJylcbiAgICApO1xuICB9KTtcbn1cbiIsICJpbXBvcnQge1xuICBBUlJPV19DTEFTUyxcbiAgQkFDS0RST1BfQ0xBU1MsXG4gIEJPWF9DTEFTUyxcbiAgQ09OVEVOVF9DTEFTUyxcbiAgU1ZHX0FSUk9XX0NMQVNTLFxufSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQge2RpdiwgaXNFbGVtZW50fSBmcm9tICcuL2RvbS11dGlscyc7XG5pbXBvcnQge0luc3RhbmNlLCBQb3BwZXJFbGVtZW50LCBQcm9wc30gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge1BvcHBlckNoaWxkcmVufSBmcm9tICcuL3R5cGVzLWludGVybmFsJztcbmltcG9ydCB7YXJyYXlGcm9tfSBmcm9tICcuL3V0aWxzJztcblxuLy8gRmlyZWZveCBleHRlbnNpb25zIGRvbid0IGFsbG93IC5pbm5lckhUTUwgPSBcIi4uLlwiIHByb3BlcnR5LiBUaGlzIHRyaWNrcyBpdC5cbmNvbnN0IGlubmVySFRNTCA9ICgpOiAnaW5uZXJIVE1MJyA9PiAnaW5uZXJIVE1MJztcblxuZnVuY3Rpb24gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwoZWxlbWVudDogRWxlbWVudCwgaHRtbDogc3RyaW5nKTogdm9pZCB7XG4gIGVsZW1lbnRbaW5uZXJIVE1MKCldID0gaHRtbDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXJyb3dFbGVtZW50KHZhbHVlOiBQcm9wc1snYXJyb3cnXSk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgYXJyb3cgPSBkaXYoKTtcblxuICBpZiAodmFsdWUgPT09IHRydWUpIHtcbiAgICBhcnJvdy5jbGFzc05hbWUgPSBBUlJPV19DTEFTUztcbiAgfSBlbHNlIHtcbiAgICBhcnJvdy5jbGFzc05hbWUgPSBTVkdfQVJST1dfQ0xBU1M7XG5cbiAgICBpZiAoaXNFbGVtZW50KHZhbHVlKSkge1xuICAgICAgYXJyb3cuYXBwZW5kQ2hpbGQodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTChhcnJvdywgdmFsdWUgYXMgc3RyaW5nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXJyb3c7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb250ZW50KGNvbnRlbnQ6IEhUTUxEaXZFbGVtZW50LCBwcm9wczogUHJvcHMpOiB2b2lkIHtcbiAgaWYgKGlzRWxlbWVudChwcm9wcy5jb250ZW50KSkge1xuICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MKGNvbnRlbnQsICcnKTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHByb3BzLmNvbnRlbnQpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9wcy5jb250ZW50ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKHByb3BzLmFsbG93SFRNTCkge1xuICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwoY29udGVudCwgcHJvcHMuY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRlbnQudGV4dENvbnRlbnQgPSBwcm9wcy5jb250ZW50O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4ocG9wcGVyOiBQb3BwZXJFbGVtZW50KTogUG9wcGVyQ2hpbGRyZW4ge1xuICBjb25zdCBib3ggPSBwb3BwZXIuZmlyc3RFbGVtZW50Q2hpbGQgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIGNvbnN0IGJveENoaWxkcmVuID0gYXJyYXlGcm9tKGJveC5jaGlsZHJlbik7XG5cbiAgcmV0dXJuIHtcbiAgICBib3gsXG4gICAgY29udGVudDogYm94Q2hpbGRyZW4uZmluZCgobm9kZSkgPT4gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoQ09OVEVOVF9DTEFTUykpLFxuICAgIGFycm93OiBib3hDaGlsZHJlbi5maW5kKFxuICAgICAgKG5vZGUpID0+XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKEFSUk9XX0NMQVNTKSB8fFxuICAgICAgICBub2RlLmNsYXNzTGlzdC5jb250YWlucyhTVkdfQVJST1dfQ0xBU1MpXG4gICAgKSxcbiAgICBiYWNrZHJvcDogYm94Q2hpbGRyZW4uZmluZCgobm9kZSkgPT5cbiAgICAgIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKEJBQ0tEUk9QX0NMQVNTKVxuICAgICksXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoXG4gIGluc3RhbmNlOiBJbnN0YW5jZVxuKToge1xuICBwb3BwZXI6IFBvcHBlckVsZW1lbnQ7XG4gIG9uVXBkYXRlPzogKHByZXZQcm9wczogUHJvcHMsIG5leHRQcm9wczogUHJvcHMpID0+IHZvaWQ7XG59IHtcbiAgY29uc3QgcG9wcGVyID0gZGl2KCk7XG5cbiAgY29uc3QgYm94ID0gZGl2KCk7XG4gIGJveC5jbGFzc05hbWUgPSBCT1hfQ0xBU1M7XG4gIGJveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCAnaGlkZGVuJyk7XG4gIGJveC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG5cbiAgY29uc3QgY29udGVudCA9IGRpdigpO1xuICBjb250ZW50LmNsYXNzTmFtZSA9IENPTlRFTlRfQ0xBU1M7XG4gIGNvbnRlbnQuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXRlJywgJ2hpZGRlbicpO1xuXG4gIHNldENvbnRlbnQoY29udGVudCwgaW5zdGFuY2UucHJvcHMpO1xuXG4gIHBvcHBlci5hcHBlbmRDaGlsZChib3gpO1xuICBib3guYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cbiAgb25VcGRhdGUoaW5zdGFuY2UucHJvcHMsIGluc3RhbmNlLnByb3BzKTtcblxuICBmdW5jdGlvbiBvblVwZGF0ZShwcmV2UHJvcHM6IFByb3BzLCBuZXh0UHJvcHM6IFByb3BzKTogdm9pZCB7XG4gICAgY29uc3Qge2JveCwgY29udGVudCwgYXJyb3d9ID0gZ2V0Q2hpbGRyZW4ocG9wcGVyKTtcblxuICAgIGlmIChuZXh0UHJvcHMudGhlbWUpIHtcbiAgICAgIGJveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCBuZXh0UHJvcHMudGhlbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBib3gucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXRoZW1lJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBuZXh0UHJvcHMuYW5pbWF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgYm94LnNldEF0dHJpYnV0ZSgnZGF0YS1hbmltYXRpb24nLCBuZXh0UHJvcHMuYW5pbWF0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm94LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hbmltYXRpb24nKTtcbiAgICB9XG5cbiAgICBpZiAobmV4dFByb3BzLmluZXJ0aWEpIHtcbiAgICAgIGJveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5lcnRpYScsICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm94LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pbmVydGlhJyk7XG4gICAgfVxuXG4gICAgYm94LnN0eWxlLm1heFdpZHRoID1cbiAgICAgIHR5cGVvZiBuZXh0UHJvcHMubWF4V2lkdGggPT09ICdudW1iZXInXG4gICAgICAgID8gYCR7bmV4dFByb3BzLm1heFdpZHRofXB4YFxuICAgICAgICA6IG5leHRQcm9wcy5tYXhXaWR0aDtcblxuICAgIGlmIChuZXh0UHJvcHMucm9sZSkge1xuICAgICAgYm94LnNldEF0dHJpYnV0ZSgncm9sZScsIG5leHRQcm9wcy5yb2xlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm94LnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHByZXZQcm9wcy5jb250ZW50ICE9PSBuZXh0UHJvcHMuY29udGVudCB8fFxuICAgICAgcHJldlByb3BzLmFsbG93SFRNTCAhPT0gbmV4dFByb3BzLmFsbG93SFRNTFxuICAgICkge1xuICAgICAgc2V0Q29udGVudChjb250ZW50LCBpbnN0YW5jZS5wcm9wcyk7XG4gICAgfVxuXG4gICAgaWYgKG5leHRQcm9wcy5hcnJvdykge1xuICAgICAgaWYgKCFhcnJvdykge1xuICAgICAgICBib3guYXBwZW5kQ2hpbGQoY3JlYXRlQXJyb3dFbGVtZW50KG5leHRQcm9wcy5hcnJvdykpO1xuICAgICAgfSBlbHNlIGlmIChwcmV2UHJvcHMuYXJyb3cgIT09IG5leHRQcm9wcy5hcnJvdykge1xuICAgICAgICBib3gucmVtb3ZlQ2hpbGQoYXJyb3cpO1xuICAgICAgICBib3guYXBwZW5kQ2hpbGQoY3JlYXRlQXJyb3dFbGVtZW50KG5leHRQcm9wcy5hcnJvdykpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJyb3cpIHtcbiAgICAgIGJveC5yZW1vdmVDaGlsZChhcnJvdyEpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcG9wcGVyLFxuICAgIG9uVXBkYXRlLFxuICB9O1xufVxuXG4vLyBSdW50aW1lIGNoZWNrIHRvIGlkZW50aWZ5IGlmIHRoZSByZW5kZXIgZnVuY3Rpb24gaXMgdGhlIGRlZmF1bHQgb25lOyB0aGlzXG4vLyB3YXkgd2UgY2FuIGFwcGx5IGRlZmF1bHQgQ1NTIHRyYW5zaXRpb25zIGxvZ2ljIGFuZCBpdCBjYW4gYmUgdHJlZS1zaGFrZW4gYXdheVxucmVuZGVyLiQkdGlwcHkgPSB0cnVlO1xuIiwgImltcG9ydCB7Y3JlYXRlUG9wcGVyLCBTdHJpY3RNb2RpZmllcnMsIE1vZGlmaWVyfSBmcm9tICdAcG9wcGVyanMvY29yZSc7XG5pbXBvcnQge2N1cnJlbnRJbnB1dH0gZnJvbSAnLi9iaW5kR2xvYmFsRXZlbnRMaXN0ZW5lcnMnO1xuaW1wb3J0IHtpc0lFMTF9IGZyb20gJy4vYnJvd3Nlcic7XG5pbXBvcnQge1RJUFBZX0RFRkFVTFRfQVBQRU5EX1RPLCBUT1VDSF9PUFRJT05TfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBhY3R1YWxDb250YWlucyxcbiAgZGl2LFxuICBnZXRPd25lckRvY3VtZW50LFxuICBpc0N1cnNvck91dHNpZGVJbnRlcmFjdGl2ZUJvcmRlcixcbiAgaXNNb3VzZUV2ZW50LFxuICBzZXRUcmFuc2l0aW9uRHVyYXRpb24sXG4gIHNldFZpc2liaWxpdHlTdGF0ZSxcbiAgdXBkYXRlVHJhbnNpdGlvbkVuZExpc3RlbmVyLFxufSBmcm9tICcuL2RvbS11dGlscyc7XG5pbXBvcnQge2RlZmF1bHRQcm9wcywgZXZhbHVhdGVQcm9wcywgZ2V0RXh0ZW5kZWRQYXNzZWRQcm9wc30gZnJvbSAnLi9wcm9wcyc7XG5pbXBvcnQge2dldENoaWxkcmVufSBmcm9tICcuL3RlbXBsYXRlJztcbmltcG9ydCB7XG4gIENvbnRlbnQsXG4gIEluc3RhbmNlLFxuICBMaWZlY3ljbGVIb29rcyxcbiAgUG9wcGVyRWxlbWVudCxcbiAgUHJvcHMsXG4gIFJlZmVyZW5jZUVsZW1lbnQsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtMaXN0ZW5lck9iamVjdCwgUG9wcGVyVHJlZURhdGEsIFBvcHBlckNoaWxkcmVufSBmcm9tICcuL3R5cGVzLWludGVybmFsJztcbmltcG9ydCB7XG4gIGFycmF5RnJvbSxcbiAgZGVib3VuY2UsXG4gIGdldFZhbHVlQXRJbmRleE9yUmV0dXJuLFxuICBpbnZva2VXaXRoQXJnc09yUmV0dXJuLFxuICBub3JtYWxpemVUb0FycmF5LFxuICBwdXNoSWZVbmlxdWUsXG4gIHNwbGl0QnlTcGFjZXMsXG4gIHVuaXF1ZSxcbiAgcmVtb3ZlVW5kZWZpbmVkUHJvcHMsXG59IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtjcmVhdGVNZW1vcnlMZWFrV2FybmluZywgZXJyb3JXaGVuLCB3YXJuV2hlbn0gZnJvbSAnLi92YWxpZGF0aW9uJztcblxubGV0IGlkQ291bnRlciA9IDE7XG5sZXQgbW91c2VNb3ZlTGlzdGVuZXJzOiAoKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkKVtdID0gW107XG5cbi8vIFVzZWQgYnkgYGhpZGVBbGwoKWBcbmV4cG9ydCBsZXQgbW91bnRlZEluc3RhbmNlczogSW5zdGFuY2VbXSA9IFtdO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUaXBweShcbiAgcmVmZXJlbmNlOiBSZWZlcmVuY2VFbGVtZW50LFxuICBwYXNzZWRQcm9wczogUGFydGlhbDxQcm9wcz5cbik6IEluc3RhbmNlIHtcbiAgY29uc3QgcHJvcHMgPSBldmFsdWF0ZVByb3BzKHJlZmVyZW5jZSwge1xuICAgIC4uLmRlZmF1bHRQcm9wcyxcbiAgICAuLi5nZXRFeHRlbmRlZFBhc3NlZFByb3BzKHJlbW92ZVVuZGVmaW5lZFByb3BzKHBhc3NlZFByb3BzKSksXG4gIH0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBcdUQ4M0RcdUREMTIgUHJpdmF0ZSBtZW1iZXJzXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBsZXQgc2hvd1RpbWVvdXQ6IGFueTtcbiAgbGV0IGhpZGVUaW1lb3V0OiBhbnk7XG4gIGxldCBzY2hlZHVsZUhpZGVBbmltYXRpb25GcmFtZTogbnVtYmVyO1xuICBsZXQgaXNWaXNpYmxlRnJvbUNsaWNrID0gZmFsc2U7XG4gIGxldCBkaWRIaWRlRHVlVG9Eb2N1bWVudE1vdXNlRG93biA9IGZhbHNlO1xuICBsZXQgZGlkVG91Y2hNb3ZlID0gZmFsc2U7XG4gIGxldCBpZ25vcmVPbkZpcnN0VXBkYXRlID0gZmFsc2U7XG4gIGxldCBsYXN0VHJpZ2dlckV2ZW50OiBFdmVudCB8IHVuZGVmaW5lZDtcbiAgbGV0IGN1cnJlbnRUcmFuc2l0aW9uRW5kTGlzdGVuZXI6IChldmVudDogVHJhbnNpdGlvbkV2ZW50KSA9PiB2b2lkO1xuICBsZXQgb25GaXJzdFVwZGF0ZTogKCkgPT4gdm9pZDtcbiAgbGV0IGxpc3RlbmVyczogTGlzdGVuZXJPYmplY3RbXSA9IFtdO1xuICBsZXQgZGVib3VuY2VkT25Nb3VzZU1vdmUgPSBkZWJvdW5jZShvbk1vdXNlTW92ZSwgcHJvcHMuaW50ZXJhY3RpdmVEZWJvdW5jZSk7XG4gIGxldCBjdXJyZW50VGFyZ2V0OiBFbGVtZW50O1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBcdUQ4M0RcdUREMTEgUHVibGljIG1lbWJlcnNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGNvbnN0IGlkID0gaWRDb3VudGVyKys7XG4gIGNvbnN0IHBvcHBlckluc3RhbmNlID0gbnVsbDtcbiAgY29uc3QgcGx1Z2lucyA9IHVuaXF1ZShwcm9wcy5wbHVnaW5zKTtcblxuICBjb25zdCBzdGF0ZSA9IHtcbiAgICAvLyBJcyB0aGUgaW5zdGFuY2UgY3VycmVudGx5IGVuYWJsZWQ/XG4gICAgaXNFbmFibGVkOiB0cnVlLFxuICAgIC8vIElzIHRoZSB0aXBweSBjdXJyZW50bHkgc2hvd2luZyBhbmQgbm90IHRyYW5zaXRpb25pbmcgb3V0P1xuICAgIGlzVmlzaWJsZTogZmFsc2UsXG4gICAgLy8gSGFzIHRoZSBpbnN0YW5jZSBiZWVuIGRlc3Ryb3llZD9cbiAgICBpc0Rlc3Ryb3llZDogZmFsc2UsXG4gICAgLy8gSXMgdGhlIHRpcHB5IGN1cnJlbnRseSBtb3VudGVkIHRvIHRoZSBET00/XG4gICAgaXNNb3VudGVkOiBmYWxzZSxcbiAgICAvLyBIYXMgdGhlIHRpcHB5IGZpbmlzaGVkIHRyYW5zaXRpb25pbmcgaW4/XG4gICAgaXNTaG93bjogZmFsc2UsXG4gIH07XG5cbiAgY29uc3QgaW5zdGFuY2U6IEluc3RhbmNlID0ge1xuICAgIC8vIHByb3BlcnRpZXNcbiAgICBpZCxcbiAgICByZWZlcmVuY2UsXG4gICAgcG9wcGVyOiBkaXYoKSxcbiAgICBwb3BwZXJJbnN0YW5jZSxcbiAgICBwcm9wcyxcbiAgICBzdGF0ZSxcbiAgICBwbHVnaW5zLFxuICAgIC8vIG1ldGhvZHNcbiAgICBjbGVhckRlbGF5VGltZW91dHMsXG4gICAgc2V0UHJvcHMsXG4gICAgc2V0Q29udGVudCxcbiAgICBzaG93LFxuICAgIGhpZGUsXG4gICAgaGlkZVdpdGhJbnRlcmFjdGl2aXR5LFxuICAgIGVuYWJsZSxcbiAgICBkaXNhYmxlLFxuICAgIHVubW91bnQsXG4gICAgZGVzdHJveSxcbiAgfTtcblxuICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSB3aHkgdGhpcyBlYXJseSByZXR1cm4gY2F1c2VzIGEgVERaIGVycm9yIGluIHRoZSB0ZXN0cyBcdTIwMTRcbiAgLy8gaXQgZG9lc24ndCBzZWVtIHRvIGhhcHBlbiBpbiB0aGUgYnJvd3NlclxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFwcm9wcy5yZW5kZXIpIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgZXJyb3JXaGVuKHRydWUsICdyZW5kZXIoKSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gc3VwcGxpZWQuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEluaXRpYWwgbXV0YXRpb25zXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBjb25zdCB7cG9wcGVyLCBvblVwZGF0ZX0gPSBwcm9wcy5yZW5kZXIoaW5zdGFuY2UpO1xuXG4gIHBvcHBlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtX19OQU1FU1BBQ0VfUFJFRklYX18tcm9vdCcsICcnKTtcbiAgcG9wcGVyLmlkID0gYF9fTkFNRVNQQUNFX1BSRUZJWF9fLSR7aW5zdGFuY2UuaWR9YDtcblxuICBpbnN0YW5jZS5wb3BwZXIgPSBwb3BwZXI7XG4gIHJlZmVyZW5jZS5fdGlwcHkgPSBpbnN0YW5jZTtcbiAgcG9wcGVyLl90aXBweSA9IGluc3RhbmNlO1xuXG4gIGNvbnN0IHBsdWdpbnNIb29rcyA9IHBsdWdpbnMubWFwKChwbHVnaW4pID0+IHBsdWdpbi5mbihpbnN0YW5jZSkpO1xuICBjb25zdCBoYXNBcmlhRXhwYW5kZWQgPSByZWZlcmVuY2UuaGFzQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG5cbiAgYWRkTGlzdGVuZXJzKCk7XG4gIGhhbmRsZUFyaWFFeHBhbmRlZEF0dHJpYnV0ZSgpO1xuICBoYW5kbGVTdHlsZXMoKTtcblxuICBpbnZva2VIb29rKCdvbkNyZWF0ZScsIFtpbnN0YW5jZV0pO1xuXG4gIGlmIChwcm9wcy5zaG93T25DcmVhdGUpIHtcbiAgICBzY2hlZHVsZVNob3coKTtcbiAgfVxuXG4gIC8vIFByZXZlbnQgYSB0aXBweSB3aXRoIGEgZGVsYXkgZnJvbSBoaWRpbmcgaWYgdGhlIGN1cnNvciBsZWZ0IHRoZW4gcmV0dXJuZWRcbiAgLy8gYmVmb3JlIGl0IHN0YXJ0ZWQgaGlkaW5nXG4gIHBvcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgIGlmIChpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSAmJiBpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGUpIHtcbiAgICAgIGluc3RhbmNlLmNsZWFyRGVsYXlUaW1lb3V0cygpO1xuICAgIH1cbiAgfSk7XG5cbiAgcG9wcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgaW5zdGFuY2UucHJvcHMuaW50ZXJhY3RpdmUgJiZcbiAgICAgIGluc3RhbmNlLnByb3BzLnRyaWdnZXIuaW5kZXhPZignbW91c2VlbnRlcicpID49IDBcbiAgICApIHtcbiAgICAgIGdldERvY3VtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZGVib3VuY2VkT25Nb3VzZU1vdmUpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBcdUQ4M0RcdUREMTIgUHJpdmF0ZSBtZXRob2RzXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBmdW5jdGlvbiBnZXROb3JtYWxpemVkVG91Y2hTZXR0aW5ncygpOiBbc3RyaW5nIHwgYm9vbGVhbiwgbnVtYmVyXSB7XG4gICAgY29uc3Qge3RvdWNofSA9IGluc3RhbmNlLnByb3BzO1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRvdWNoKSA/IHRvdWNoIDogW3RvdWNoLCAwXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldElzQ3VzdG9tVG91Y2hCZWhhdmlvcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZ2V0Tm9ybWFsaXplZFRvdWNoU2V0dGluZ3MoKVswXSA9PT0gJ2hvbGQnO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKTogYm9vbGVhbiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiAhIWluc3RhbmNlLnByb3BzLnJlbmRlcj8uJCR0aXBweTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEN1cnJlbnRUYXJnZXQoKTogRWxlbWVudCB7XG4gICAgcmV0dXJuIGN1cnJlbnRUYXJnZXQgfHwgcmVmZXJlbmNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RG9jdW1lbnQoKTogRG9jdW1lbnQge1xuICAgIGNvbnN0IHBhcmVudCA9IGdldEN1cnJlbnRUYXJnZXQoKS5wYXJlbnROb2RlIGFzIEVsZW1lbnQ7XG4gICAgcmV0dXJuIHBhcmVudCA/IGdldE93bmVyRG9jdW1lbnQocGFyZW50KSA6IGRvY3VtZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGVmYXVsdFRlbXBsYXRlQ2hpbGRyZW4oKTogUG9wcGVyQ2hpbGRyZW4ge1xuICAgIHJldHVybiBnZXRDaGlsZHJlbihwb3BwZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGVsYXkoaXNTaG93OiBib29sZWFuKTogbnVtYmVyIHtcbiAgICAvLyBGb3IgdG91Y2ggb3Iga2V5Ym9hcmQgaW5wdXQsIGZvcmNlIGAwYCBkZWxheSBmb3IgVVggcmVhc29uc1xuICAgIC8vIEFsc28gaWYgdGhlIGluc3RhbmNlIGlzIG1vdW50ZWQgYnV0IG5vdCB2aXNpYmxlICh0cmFuc2l0aW9uaW5nIG91dCksXG4gICAgLy8gaWdub3JlIGRlbGF5XG4gICAgaWYgKFxuICAgICAgKGluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCAmJiAhaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlKSB8fFxuICAgICAgY3VycmVudElucHV0LmlzVG91Y2ggfHxcbiAgICAgIChsYXN0VHJpZ2dlckV2ZW50ICYmIGxhc3RUcmlnZ2VyRXZlbnQudHlwZSA9PT0gJ2ZvY3VzJylcbiAgICApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRWYWx1ZUF0SW5kZXhPclJldHVybihcbiAgICAgIGluc3RhbmNlLnByb3BzLmRlbGF5LFxuICAgICAgaXNTaG93ID8gMCA6IDEsXG4gICAgICBkZWZhdWx0UHJvcHMuZGVsYXlcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlU3R5bGVzKGZyb21IaWRlID0gZmFsc2UpOiB2b2lkIHtcbiAgICBwb3BwZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9XG4gICAgICBpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSAmJiAhZnJvbUhpZGUgPyAnJyA6ICdub25lJztcbiAgICBwb3BwZXIuc3R5bGUuekluZGV4ID0gYCR7aW5zdGFuY2UucHJvcHMuekluZGV4fWA7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VIb29rKFxuICAgIGhvb2s6IGtleW9mIExpZmVjeWNsZUhvb2tzLFxuICAgIGFyZ3M6IFtJbnN0YW5jZSwgYW55P10sXG4gICAgc2hvdWxkSW52b2tlUHJvcHNIb29rID0gdHJ1ZVxuICApOiB2b2lkIHtcbiAgICBwbHVnaW5zSG9va3MuZm9yRWFjaCgocGx1Z2luSG9va3MpID0+IHtcbiAgICAgIGlmIChwbHVnaW5Ib29rc1tob29rXSkge1xuICAgICAgICBwbHVnaW5Ib29rc1tob29rXSEoLi4uYXJncyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoc2hvdWxkSW52b2tlUHJvcHNIb29rKSB7XG4gICAgICBpbnN0YW5jZS5wcm9wc1tob29rXSguLi5hcmdzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVBcmlhQ29udGVudEF0dHJpYnV0ZSgpOiB2b2lkIHtcbiAgICBjb25zdCB7YXJpYX0gPSBpbnN0YW5jZS5wcm9wcztcblxuICAgIGlmICghYXJpYS5jb250ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYXR0ciA9IGBhcmlhLSR7YXJpYS5jb250ZW50fWA7XG4gICAgY29uc3QgaWQgPSBwb3BwZXIuaWQ7XG4gICAgY29uc3Qgbm9kZXMgPSBub3JtYWxpemVUb0FycmF5KGluc3RhbmNlLnByb3BzLnRyaWdnZXJUYXJnZXQgfHwgcmVmZXJlbmNlKTtcblxuICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHIpO1xuXG4gICAgICBpZiAoaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHIsIGN1cnJlbnRWYWx1ZSA/IGAke2N1cnJlbnRWYWx1ZX0gJHtpZH1gIDogaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV4dFZhbHVlID0gY3VycmVudFZhbHVlICYmIGN1cnJlbnRWYWx1ZS5yZXBsYWNlKGlkLCAnJykudHJpbSgpO1xuXG4gICAgICAgIGlmIChuZXh0VmFsdWUpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyLCBuZXh0VmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVBcmlhRXhwYW5kZWRBdHRyaWJ1dGUoKTogdm9pZCB7XG4gICAgaWYgKGhhc0FyaWFFeHBhbmRlZCB8fCAhaW5zdGFuY2UucHJvcHMuYXJpYS5leHBhbmRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGVzID0gbm9ybWFsaXplVG9BcnJheShpbnN0YW5jZS5wcm9wcy50cmlnZ2VyVGFyZ2V0IHx8IHJlZmVyZW5jZSk7XG5cbiAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICBpZiAoaW5zdGFuY2UucHJvcHMuaW50ZXJhY3RpdmUpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgJ2FyaWEtZXhwYW5kZWQnLFxuICAgICAgICAgIGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSAmJiBub2RlID09PSBnZXRDdXJyZW50VGFyZ2V0KClcbiAgICAgICAgICAgID8gJ3RydWUnXG4gICAgICAgICAgICA6ICdmYWxzZSdcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhbnVwSW50ZXJhY3RpdmVNb3VzZUxpc3RlbmVycygpOiB2b2lkIHtcbiAgICBnZXREb2N1bWVudCgpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRlYm91bmNlZE9uTW91c2VNb3ZlKTtcbiAgICBtb3VzZU1vdmVMaXN0ZW5lcnMgPSBtb3VzZU1vdmVMaXN0ZW5lcnMuZmlsdGVyKFxuICAgICAgKGxpc3RlbmVyKSA9PiBsaXN0ZW5lciAhPT0gZGVib3VuY2VkT25Nb3VzZU1vdmVcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Eb2N1bWVudFByZXNzKGV2ZW50OiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIC8vIE1vdmVkIGZpbmdlciB0byBzY3JvbGwgaW5zdGVhZCBvZiBhbiBpbnRlbnRpb25hbCB0YXAgb3V0c2lkZVxuICAgIGlmIChjdXJyZW50SW5wdXQuaXNUb3VjaCkge1xuICAgICAgaWYgKGRpZFRvdWNoTW92ZSB8fCBldmVudC50eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWN0dWFsVGFyZ2V0ID1cbiAgICAgIChldmVudC5jb21wb3NlZFBhdGggJiYgZXZlbnQuY29tcG9zZWRQYXRoKClbMF0pIHx8IGV2ZW50LnRhcmdldDtcblxuICAgIC8vIENsaWNrZWQgb24gaW50ZXJhY3RpdmUgcG9wcGVyXG4gICAgaWYgKFxuICAgICAgaW5zdGFuY2UucHJvcHMuaW50ZXJhY3RpdmUgJiZcbiAgICAgIGFjdHVhbENvbnRhaW5zKHBvcHBlciwgYWN0dWFsVGFyZ2V0IGFzIEVsZW1lbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xpY2tlZCBvbiB0aGUgZXZlbnQgbGlzdGVuZXJzIHRhcmdldFxuICAgIGlmIChcbiAgICAgIG5vcm1hbGl6ZVRvQXJyYXkoaW5zdGFuY2UucHJvcHMudHJpZ2dlclRhcmdldCB8fCByZWZlcmVuY2UpLnNvbWUoKGVsKSA9PlxuICAgICAgICBhY3R1YWxDb250YWlucyhlbCwgYWN0dWFsVGFyZ2V0IGFzIEVsZW1lbnQpXG4gICAgICApXG4gICAgKSB7XG4gICAgICBpZiAoY3VycmVudElucHV0LmlzVG91Y2gpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSAmJlxuICAgICAgICBpbnN0YW5jZS5wcm9wcy50cmlnZ2VyLmluZGV4T2YoJ2NsaWNrJykgPj0gMFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaW52b2tlSG9vaygnb25DbGlja091dHNpZGUnLCBbaW5zdGFuY2UsIGV2ZW50XSk7XG4gICAgfVxuXG4gICAgaWYgKGluc3RhbmNlLnByb3BzLmhpZGVPbkNsaWNrID09PSB0cnVlKSB7XG4gICAgICBpbnN0YW5jZS5jbGVhckRlbGF5VGltZW91dHMoKTtcbiAgICAgIGluc3RhbmNlLmhpZGUoKTtcblxuICAgICAgLy8gYG1vdXNlZG93bmAgZXZlbnQgaXMgZmlyZWQgcmlnaHQgYmVmb3JlIGBmb2N1c2AgaWYgcHJlc3NpbmcgdGhlXG4gICAgICAvLyBjdXJyZW50VGFyZ2V0LiBUaGlzIGxldHMgYSB0aXBweSB3aXRoIGBmb2N1c2AgdHJpZ2dlciBrbm93IHRoYXQgaXRcbiAgICAgIC8vIHNob3VsZCBub3Qgc2hvd1xuICAgICAgZGlkSGlkZUR1ZVRvRG9jdW1lbnRNb3VzZURvd24gPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRpZEhpZGVEdWVUb0RvY3VtZW50TW91c2VEb3duID0gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgLy8gVGhlIGxpc3RlbmVyIGdldHMgYWRkZWQgaW4gYHNjaGVkdWxlU2hvdygpYCwgYnV0IHRoaXMgbWF5IGJlIGhpZGluZyBpdFxuICAgICAgLy8gYmVmb3JlIGl0IHNob3dzLCBhbmQgaGlkZSgpJ3MgZWFybHkgYmFpbC1vdXQgYmVoYXZpb3IgY2FuIHByZXZlbnQgaXRcbiAgICAgIC8vIGZyb20gYmVpbmcgY2xlYW5lZCB1cFxuICAgICAgaWYgKCFpbnN0YW5jZS5zdGF0ZS5pc01vdW50ZWQpIHtcbiAgICAgICAgcmVtb3ZlRG9jdW1lbnRQcmVzcygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVG91Y2hNb3ZlKCk6IHZvaWQge1xuICAgIGRpZFRvdWNoTW92ZSA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoKTogdm9pZCB7XG4gICAgZGlkVG91Y2hNb3ZlID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBhZGREb2N1bWVudFByZXNzKCk6IHZvaWQge1xuICAgIGNvbnN0IGRvYyA9IGdldERvY3VtZW50KCk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG9jdW1lbnRQcmVzcywgdHJ1ZSk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Eb2N1bWVudFByZXNzLCBUT1VDSF9PUFRJT05TKTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCwgVE9VQ0hfT1BUSU9OUyk7XG4gICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBUT1VDSF9PUFRJT05TKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZURvY3VtZW50UHJlc3MoKTogdm9pZCB7XG4gICAgY29uc3QgZG9jID0gZ2V0RG9jdW1lbnQoKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Eb2N1bWVudFByZXNzLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvbkRvY3VtZW50UHJlc3MsIFRPVUNIX09QVElPTlMpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LCBUT1VDSF9PUFRJT05TKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUsIFRPVUNIX09QVElPTlMpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25UcmFuc2l0aW9uZWRPdXQoZHVyYXRpb246IG51bWJlciwgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBvblRyYW5zaXRpb25FbmQoZHVyYXRpb24sICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSAmJlxuICAgICAgICBwb3BwZXIucGFyZW50Tm9kZSAmJlxuICAgICAgICBwb3BwZXIucGFyZW50Tm9kZS5jb250YWlucyhwb3BwZXIpXG4gICAgICApIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVHJhbnNpdGlvbmVkSW4oZHVyYXRpb246IG51bWJlciwgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBvblRyYW5zaXRpb25FbmQoZHVyYXRpb24sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVHJhbnNpdGlvbkVuZChkdXJhdGlvbjogbnVtYmVyLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IGJveCA9IGdldERlZmF1bHRUZW1wbGF0ZUNoaWxkcmVuKCkuYm94O1xuXG4gICAgZnVuY3Rpb24gbGlzdGVuZXIoZXZlbnQ6IFRyYW5zaXRpb25FdmVudCk6IHZvaWQge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gYm94KSB7XG4gICAgICAgIHVwZGF0ZVRyYW5zaXRpb25FbmRMaXN0ZW5lcihib3gsICdyZW1vdmUnLCBsaXN0ZW5lcik7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFrZSBjYWxsYmFjayBzeW5jaHJvbm91cyBpZiBkdXJhdGlvbiBpcyAwXG4gICAgLy8gYHRyYW5zaXRpb25lbmRgIHdvbid0IGZpcmUgb3RoZXJ3aXNlXG4gICAgaWYgKGR1cmF0aW9uID09PSAwKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICB1cGRhdGVUcmFuc2l0aW9uRW5kTGlzdGVuZXIoYm94LCAncmVtb3ZlJywgY3VycmVudFRyYW5zaXRpb25FbmRMaXN0ZW5lcik7XG4gICAgdXBkYXRlVHJhbnNpdGlvbkVuZExpc3RlbmVyKGJveCwgJ2FkZCcsIGxpc3RlbmVyKTtcblxuICAgIGN1cnJlbnRUcmFuc2l0aW9uRW5kTGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uKFxuICAgIGV2ZW50VHlwZTogc3RyaW5nLFxuICAgIGhhbmRsZXI6IEV2ZW50TGlzdGVuZXIsXG4gICAgb3B0aW9uczogYm9vbGVhbiB8IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0gZmFsc2VcbiAgKTogdm9pZCB7XG4gICAgY29uc3Qgbm9kZXMgPSBub3JtYWxpemVUb0FycmF5KGluc3RhbmNlLnByb3BzLnRyaWdnZXJUYXJnZXQgfHwgcmVmZXJlbmNlKTtcbiAgICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgIGxpc3RlbmVycy5wdXNoKHtub2RlLCBldmVudFR5cGUsIGhhbmRsZXIsIG9wdGlvbnN9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVycygpOiB2b2lkIHtcbiAgICBpZiAoZ2V0SXNDdXN0b21Ub3VjaEJlaGF2aW9yKCkpIHtcbiAgICAgIG9uKCd0b3VjaHN0YXJ0Jywgb25UcmlnZ2VyLCB7cGFzc2l2ZTogdHJ1ZX0pO1xuICAgICAgb24oJ3RvdWNoZW5kJywgb25Nb3VzZUxlYXZlIGFzIEV2ZW50TGlzdGVuZXIsIHtwYXNzaXZlOiB0cnVlfSk7XG4gICAgfVxuXG4gICAgc3BsaXRCeVNwYWNlcyhpbnN0YW5jZS5wcm9wcy50cmlnZ2VyKS5mb3JFYWNoKChldmVudFR5cGUpID0+IHtcbiAgICAgIGlmIChldmVudFR5cGUgPT09ICdtYW51YWwnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb24oZXZlbnRUeXBlLCBvblRyaWdnZXIpO1xuXG4gICAgICBzd2l0Y2ggKGV2ZW50VHlwZSkge1xuICAgICAgICBjYXNlICdtb3VzZWVudGVyJzpcbiAgICAgICAgICBvbignbW91c2VsZWF2ZScsIG9uTW91c2VMZWF2ZSBhcyBFdmVudExpc3RlbmVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZm9jdXMnOlxuICAgICAgICAgIG9uKGlzSUUxMSA/ICdmb2N1c291dCcgOiAnYmx1cicsIG9uQmx1ck9yRm9jdXNPdXQgYXMgRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ZvY3VzaW4nOlxuICAgICAgICAgIG9uKCdmb2N1c291dCcsIG9uQmx1ck9yRm9jdXNPdXQgYXMgRXZlbnRMaXN0ZW5lcik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgbGlzdGVuZXJzLmZvckVhY2goKHtub2RlLCBldmVudFR5cGUsIGhhbmRsZXIsIG9wdGlvbnN9OiBMaXN0ZW5lck9iamVjdCkgPT4ge1xuICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgfSk7XG4gICAgbGlzdGVuZXJzID0gW107XG4gIH1cblxuICBmdW5jdGlvbiBvblRyaWdnZXIoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgbGV0IHNob3VsZFNjaGVkdWxlQ2xpY2tIaWRlID0gZmFsc2U7XG5cbiAgICBpZiAoXG4gICAgICAhaW5zdGFuY2Uuc3RhdGUuaXNFbmFibGVkIHx8XG4gICAgICBpc0V2ZW50TGlzdGVuZXJTdG9wcGVkKGV2ZW50KSB8fFxuICAgICAgZGlkSGlkZUR1ZVRvRG9jdW1lbnRNb3VzZURvd25cbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3YXNGb2N1c2VkID0gbGFzdFRyaWdnZXJFdmVudD8udHlwZSA9PT0gJ2ZvY3VzJztcblxuICAgIGxhc3RUcmlnZ2VyRXZlbnQgPSBldmVudDtcbiAgICBjdXJyZW50VGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBFbGVtZW50O1xuXG4gICAgaGFuZGxlQXJpYUV4cGFuZGVkQXR0cmlidXRlKCk7XG5cbiAgICBpZiAoIWluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSAmJiBpc01vdXNlRXZlbnQoZXZlbnQpKSB7XG4gICAgICAvLyBJZiBzY3JvbGxpbmcsIGBtb3VzZWVudGVyYCBldmVudHMgY2FuIGJlIGZpcmVkIGlmIHRoZSBjdXJzb3IgbGFuZHNcbiAgICAgIC8vIG92ZXIgYSBuZXcgdGFyZ2V0LCBidXQgYG1vdXNlbW92ZWAgZXZlbnRzIGRvbid0IGdldCBmaXJlZC4gVGhpc1xuICAgICAgLy8gY2F1c2VzIGludGVyYWN0aXZlIHRvb2x0aXBzIHRvIGdldCBzdHVjayBvcGVuIHVudGlsIHRoZSBjdXJzb3IgaXNcbiAgICAgIC8vIG1vdmVkXG4gICAgICBtb3VzZU1vdmVMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgLy8gVG9nZ2xlIHNob3cvaGlkZSB3aGVuIGNsaWNraW5nIGNsaWNrLXRyaWdnZXJlZCB0b29sdGlwc1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnR5cGUgPT09ICdjbGljaycgJiZcbiAgICAgIChpbnN0YW5jZS5wcm9wcy50cmlnZ2VyLmluZGV4T2YoJ21vdXNlZW50ZXInKSA8IDAgfHxcbiAgICAgICAgaXNWaXNpYmxlRnJvbUNsaWNrKSAmJlxuICAgICAgaW5zdGFuY2UucHJvcHMuaGlkZU9uQ2xpY2sgIT09IGZhbHNlICYmXG4gICAgICBpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGVcbiAgICApIHtcbiAgICAgIHNob3VsZFNjaGVkdWxlQ2xpY2tIaWRlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVTaG93KGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgICAgaXNWaXNpYmxlRnJvbUNsaWNrID0gIXNob3VsZFNjaGVkdWxlQ2xpY2tIaWRlO1xuICAgIH1cblxuICAgIGlmIChzaG91bGRTY2hlZHVsZUNsaWNrSGlkZSAmJiAhd2FzRm9jdXNlZCkge1xuICAgICAgc2NoZWR1bGVIaWRlKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBOb2RlO1xuICAgIGNvbnN0IGlzQ3Vyc29yT3ZlclJlZmVyZW5jZU9yUG9wcGVyID1cbiAgICAgIGdldEN1cnJlbnRUYXJnZXQoKS5jb250YWlucyh0YXJnZXQpIHx8IHBvcHBlci5jb250YWlucyh0YXJnZXQpO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZW1vdmUnICYmIGlzQ3Vyc29yT3ZlclJlZmVyZW5jZU9yUG9wcGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9wcGVyVHJlZURhdGEgPSBnZXROZXN0ZWRQb3BwZXJUcmVlKClcbiAgICAgIC5jb25jYXQocG9wcGVyKVxuICAgICAgLm1hcCgocG9wcGVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gcG9wcGVyLl90aXBweSE7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gaW5zdGFuY2UucG9wcGVySW5zdGFuY2U/LnN0YXRlO1xuXG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb3BwZXJSZWN0OiBwb3BwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBwb3BwZXJTdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KVxuICAgICAgLmZpbHRlcihCb29sZWFuKSBhcyBQb3BwZXJUcmVlRGF0YVtdO1xuXG4gICAgaWYgKGlzQ3Vyc29yT3V0c2lkZUludGVyYWN0aXZlQm9yZGVyKHBvcHBlclRyZWVEYXRhLCBldmVudCkpIHtcbiAgICAgIGNsZWFudXBJbnRlcmFjdGl2ZU1vdXNlTGlzdGVuZXJzKCk7XG4gICAgICBzY2hlZHVsZUhpZGUoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VMZWF2ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHNob3VsZEJhaWwgPVxuICAgICAgaXNFdmVudExpc3RlbmVyU3RvcHBlZChldmVudCkgfHxcbiAgICAgIChpbnN0YW5jZS5wcm9wcy50cmlnZ2VyLmluZGV4T2YoJ2NsaWNrJykgPj0gMCAmJiBpc1Zpc2libGVGcm9tQ2xpY2spO1xuXG4gICAgaWYgKHNob3VsZEJhaWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFuY2UucHJvcHMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIGluc3RhbmNlLmhpZGVXaXRoSW50ZXJhY3Rpdml0eShldmVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2NoZWR1bGVIaWRlKGV2ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQmx1ck9yRm9jdXNPdXQoZXZlbnQ6IEZvY3VzRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICBpbnN0YW5jZS5wcm9wcy50cmlnZ2VyLmluZGV4T2YoJ2ZvY3VzaW4nKSA8IDAgJiZcbiAgICAgIGV2ZW50LnRhcmdldCAhPT0gZ2V0Q3VycmVudFRhcmdldCgpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgZm9jdXMgd2FzIG1vdmVkIHRvIHdpdGhpbiB0aGUgcG9wcGVyXG4gICAgaWYgKFxuICAgICAgaW5zdGFuY2UucHJvcHMuaW50ZXJhY3RpdmUgJiZcbiAgICAgIGV2ZW50LnJlbGF0ZWRUYXJnZXQgJiZcbiAgICAgIHBvcHBlci5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0IGFzIEVsZW1lbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2NoZWR1bGVIaWRlKGV2ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzRXZlbnRMaXN0ZW5lclN0b3BwZWQoZXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGN1cnJlbnRJbnB1dC5pc1RvdWNoXG4gICAgICA/IGdldElzQ3VzdG9tVG91Y2hCZWhhdmlvcigpICE9PSBldmVudC50eXBlLmluZGV4T2YoJ3RvdWNoJykgPj0gMFxuICAgICAgOiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVBvcHBlckluc3RhbmNlKCk6IHZvaWQge1xuICAgIGRlc3Ryb3lQb3BwZXJJbnN0YW5jZSgpO1xuXG4gICAgY29uc3Qge1xuICAgICAgcG9wcGVyT3B0aW9ucyxcbiAgICAgIHBsYWNlbWVudCxcbiAgICAgIG9mZnNldCxcbiAgICAgIGdldFJlZmVyZW5jZUNsaWVudFJlY3QsXG4gICAgICBtb3ZlVHJhbnNpdGlvbixcbiAgICB9ID0gaW5zdGFuY2UucHJvcHM7XG5cbiAgICBjb25zdCBhcnJvdyA9IGdldElzRGVmYXVsdFJlbmRlckZuKCkgPyBnZXRDaGlsZHJlbihwb3BwZXIpLmFycm93IDogbnVsbDtcblxuICAgIGNvbnN0IGNvbXB1dGVkUmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdFxuICAgICAgPyB7XG4gICAgICAgICAgZ2V0Qm91bmRpbmdDbGllbnRSZWN0OiBnZXRSZWZlcmVuY2VDbGllbnRSZWN0LFxuICAgICAgICAgIGNvbnRleHRFbGVtZW50OlxuICAgICAgICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdC5jb250ZXh0RWxlbWVudCB8fCBnZXRDdXJyZW50VGFyZ2V0KCksXG4gICAgICAgIH1cbiAgICAgIDogcmVmZXJlbmNlO1xuXG4gICAgY29uc3QgdGlwcHlNb2RpZmllcjogTW9kaWZpZXI8JyQkdGlwcHknLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gPSB7XG4gICAgICBuYW1lOiAnJCR0aXBweScsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgcGhhc2U6ICdiZWZvcmVXcml0ZScsXG4gICAgICByZXF1aXJlczogWydjb21wdXRlU3R5bGVzJ10sXG4gICAgICBmbih7c3RhdGV9KSB7XG4gICAgICAgIGlmIChnZXRJc0RlZmF1bHRSZW5kZXJGbigpKSB7XG4gICAgICAgICAgY29uc3Qge2JveH0gPSBnZXREZWZhdWx0VGVtcGxhdGVDaGlsZHJlbigpO1xuXG4gICAgICAgICAgWydwbGFjZW1lbnQnLCAncmVmZXJlbmNlLWhpZGRlbicsICdlc2NhcGVkJ10uZm9yRWFjaCgoYXR0cikgPT4ge1xuICAgICAgICAgICAgaWYgKGF0dHIgPT09ICdwbGFjZW1lbnQnKSB7XG4gICAgICAgICAgICAgIGJveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGxhY2VtZW50Jywgc3RhdGUucGxhY2VtZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlcltgZGF0YS1wb3BwZXItJHthdHRyfWBdKSB7XG4gICAgICAgICAgICAgICAgYm94LnNldEF0dHJpYnV0ZShgZGF0YS0ke2F0dHJ9YCwgJycpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJveC5yZW1vdmVBdHRyaWJ1dGUoYGRhdGEtJHthdHRyfWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciA9IHt9O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0eXBlIFRpcHB5TW9kaWZpZXIgPSBNb2RpZmllcjwnJCR0aXBweScsIFJlY29yZDxzdHJpbmcsIHVua25vd24+PjtcbiAgICB0eXBlIEV4dGVuZGVkTW9kaWZpZXJzID0gU3RyaWN0TW9kaWZpZXJzIHwgUGFydGlhbDxUaXBweU1vZGlmaWVyPjtcblxuICAgIGNvbnN0IG1vZGlmaWVyczogQXJyYXk8RXh0ZW5kZWRNb2RpZmllcnM+ID0gW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnb2Zmc2V0JyxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdwcmV2ZW50T3ZlcmZsb3cnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgcGFkZGluZzoge1xuICAgICAgICAgICAgdG9wOiAyLFxuICAgICAgICAgICAgYm90dG9tOiAyLFxuICAgICAgICAgICAgbGVmdDogNSxcbiAgICAgICAgICAgIHJpZ2h0OiA1LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnZmxpcCcsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBwYWRkaW5nOiA1LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2NvbXB1dGVTdHlsZXMnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgYWRhcHRpdmU6ICFtb3ZlVHJhbnNpdGlvbixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB0aXBweU1vZGlmaWVyLFxuICAgIF07XG5cbiAgICBpZiAoZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKSAmJiBhcnJvdykge1xuICAgICAgbW9kaWZpZXJzLnB1c2goe1xuICAgICAgICBuYW1lOiAnYXJyb3cnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgZWxlbWVudDogYXJyb3csXG4gICAgICAgICAgcGFkZGluZzogMyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG1vZGlmaWVycy5wdXNoKC4uLihwb3BwZXJPcHRpb25zPy5tb2RpZmllcnMgfHwgW10pKTtcblxuICAgIGluc3RhbmNlLnBvcHBlckluc3RhbmNlID0gY3JlYXRlUG9wcGVyPEV4dGVuZGVkTW9kaWZpZXJzPihcbiAgICAgIGNvbXB1dGVkUmVmZXJlbmNlLFxuICAgICAgcG9wcGVyLFxuICAgICAge1xuICAgICAgICAuLi5wb3BwZXJPcHRpb25zLFxuICAgICAgICBwbGFjZW1lbnQsXG4gICAgICAgIG9uRmlyc3RVcGRhdGUsXG4gICAgICAgIG1vZGlmaWVycyxcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveVBvcHBlckluc3RhbmNlKCk6IHZvaWQge1xuICAgIGlmIChpbnN0YW5jZS5wb3BwZXJJbnN0YW5jZSkge1xuICAgICAgaW5zdGFuY2UucG9wcGVySW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgaW5zdGFuY2UucG9wcGVySW5zdGFuY2UgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdW50KCk6IHZvaWQge1xuICAgIGNvbnN0IHthcHBlbmRUb30gPSBpbnN0YW5jZS5wcm9wcztcblxuICAgIGxldCBwYXJlbnROb2RlOiBhbnk7XG5cbiAgICAvLyBCeSBkZWZhdWx0LCB3ZSdsbCBhcHBlbmQgdGhlIHBvcHBlciB0byB0aGUgdHJpZ2dlclRhcmdldHMncyBwYXJlbnROb2RlIHNvXG4gICAgLy8gaXQncyBkaXJlY3RseSBhZnRlciB0aGUgcmVmZXJlbmNlIGVsZW1lbnQgc28gdGhlIGVsZW1lbnRzIGluc2lkZSB0aGVcbiAgICAvLyB0aXBweSBjYW4gYmUgdGFiYmVkIHRvXG4gICAgLy8gSWYgdGhlcmUgYXJlIGNsaXBwaW5nIGlzc3VlcywgdGhlIHVzZXIgY2FuIHNwZWNpZnkgYSBkaWZmZXJlbnQgYXBwZW5kVG9cbiAgICAvLyBhbmQgZW5zdXJlIGZvY3VzIG1hbmFnZW1lbnQgaXMgaGFuZGxlZCBjb3JyZWN0bHkgbWFudWFsbHlcbiAgICBjb25zdCBub2RlID0gZ2V0Q3VycmVudFRhcmdldCgpO1xuXG4gICAgaWYgKFxuICAgICAgKGluc3RhbmNlLnByb3BzLmludGVyYWN0aXZlICYmIGFwcGVuZFRvID09PSBUSVBQWV9ERUZBVUxUX0FQUEVORF9UTykgfHxcbiAgICAgIGFwcGVuZFRvID09PSAncGFyZW50J1xuICAgICkge1xuICAgICAgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyZW50Tm9kZSA9IGludm9rZVdpdGhBcmdzT3JSZXR1cm4oYXBwZW5kVG8sIFtub2RlXSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIHBvcHBlciBlbGVtZW50IG5lZWRzIHRvIGV4aXN0IG9uIHRoZSBET00gYmVmb3JlIGl0cyBwb3NpdGlvbiBjYW4gYmVcbiAgICAvLyB1cGRhdGVkIGFzIFBvcHBlciBuZWVkcyB0byByZWFkIGl0cyBkaW1lbnNpb25zXG4gICAgaWYgKCFwYXJlbnROb2RlLmNvbnRhaW5zKHBvcHBlcikpIHtcbiAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQocG9wcGVyKTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5zdGF0ZS5pc01vdW50ZWQgPSB0cnVlO1xuXG4gICAgY3JlYXRlUG9wcGVySW5zdGFuY2UoKTtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIC8vIEFjY2Vzc2liaWxpdHkgY2hlY2tcbiAgICAgIHdhcm5XaGVuKFxuICAgICAgICBpbnN0YW5jZS5wcm9wcy5pbnRlcmFjdGl2ZSAmJlxuICAgICAgICAgIGFwcGVuZFRvID09PSBkZWZhdWx0UHJvcHMuYXBwZW5kVG8gJiZcbiAgICAgICAgICBub2RlLm5leHRFbGVtZW50U2libGluZyAhPT0gcG9wcGVyLFxuICAgICAgICBbXG4gICAgICAgICAgJ0ludGVyYWN0aXZlIHRpcHB5IGVsZW1lbnQgbWF5IG5vdCBiZSBhY2Nlc3NpYmxlIHZpYSBrZXlib2FyZCcsXG4gICAgICAgICAgJ25hdmlnYXRpb24gYmVjYXVzZSBpdCBpcyBub3QgZGlyZWN0bHkgYWZ0ZXIgdGhlIHJlZmVyZW5jZSBlbGVtZW50JyxcbiAgICAgICAgICAnaW4gdGhlIERPTSBzb3VyY2Ugb3JkZXIuJyxcbiAgICAgICAgICAnXFxuXFxuJyxcbiAgICAgICAgICAnVXNpbmcgYSB3cmFwcGVyIDxkaXY+IG9yIDxzcGFuPiB0YWcgYXJvdW5kIHRoZSByZWZlcmVuY2UgZWxlbWVudCcsXG4gICAgICAgICAgJ3NvbHZlcyB0aGlzIGJ5IGNyZWF0aW5nIGEgbmV3IHBhcmVudE5vZGUgY29udGV4dC4nLFxuICAgICAgICAgICdcXG5cXG4nLFxuICAgICAgICAgICdTcGVjaWZ5aW5nIGBhcHBlbmRUbzogZG9jdW1lbnQuYm9keWAgc2lsZW5jZXMgdGhpcyB3YXJuaW5nLCBidXQgaXQnLFxuICAgICAgICAgICdhc3N1bWVzIHlvdSBhcmUgdXNpbmcgYSBmb2N1cyBtYW5hZ2VtZW50IHNvbHV0aW9uIHRvIGhhbmRsZScsXG4gICAgICAgICAgJ2tleWJvYXJkIG5hdmlnYXRpb24uJyxcbiAgICAgICAgICAnXFxuXFxuJyxcbiAgICAgICAgICAnU2VlOiBodHRwczovL2F0b21pa3MuZ2l0aHViLmlvL3RpcHB5anMvdjYvYWNjZXNzaWJpbGl0eS8jaW50ZXJhY3Rpdml0eScsXG4gICAgICAgIF0uam9pbignICcpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE5lc3RlZFBvcHBlclRyZWUoKTogUG9wcGVyRWxlbWVudFtdIHtcbiAgICByZXR1cm4gYXJyYXlGcm9tKFxuICAgICAgcG9wcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLV9fTkFNRVNQQUNFX1BSRUZJWF9fLXJvb3RdJylcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGVTaG93KGV2ZW50PzogRXZlbnQpOiB2b2lkIHtcbiAgICBpbnN0YW5jZS5jbGVhckRlbGF5VGltZW91dHMoKTtcblxuICAgIGlmIChldmVudCkge1xuICAgICAgaW52b2tlSG9vaygnb25UcmlnZ2VyJywgW2luc3RhbmNlLCBldmVudF0pO1xuICAgIH1cblxuICAgIGFkZERvY3VtZW50UHJlc3MoKTtcblxuICAgIGxldCBkZWxheSA9IGdldERlbGF5KHRydWUpO1xuICAgIGNvbnN0IFt0b3VjaFZhbHVlLCB0b3VjaERlbGF5XSA9IGdldE5vcm1hbGl6ZWRUb3VjaFNldHRpbmdzKCk7XG5cbiAgICBpZiAoY3VycmVudElucHV0LmlzVG91Y2ggJiYgdG91Y2hWYWx1ZSA9PT0gJ2hvbGQnICYmIHRvdWNoRGVsYXkpIHtcbiAgICAgIGRlbGF5ID0gdG91Y2hEZWxheTtcbiAgICB9XG5cbiAgICBpZiAoZGVsYXkpIHtcbiAgICAgIHNob3dUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGluc3RhbmNlLnNob3coKTtcbiAgICAgIH0sIGRlbGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2Uuc2hvdygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlSGlkZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpbnN0YW5jZS5jbGVhckRlbGF5VGltZW91dHMoKTtcblxuICAgIGludm9rZUhvb2soJ29uVW50cmlnZ2VyJywgW2luc3RhbmNlLCBldmVudF0pO1xuXG4gICAgaWYgKCFpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGUpIHtcbiAgICAgIHJlbW92ZURvY3VtZW50UHJlc3MoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZvciBpbnRlcmFjdGl2ZSB0aXBwaWVzLCBzY2hlZHVsZUhpZGUgaXMgYWRkZWQgdG8gYSBkb2N1bWVudC5ib2R5IGhhbmRsZXJcbiAgICAvLyBmcm9tIG9uTW91c2VMZWF2ZSBzbyBtdXN0IGludGVyY2VwdCBzY2hlZHVsZWQgaGlkZXMgZnJvbSBtb3VzZW1vdmUvbGVhdmVcbiAgICAvLyBldmVudHMgd2hlbiB0cmlnZ2VyIGNvbnRhaW5zIG1vdXNlZW50ZXIgYW5kIGNsaWNrLCBhbmQgdGhlIHRpcCBpc1xuICAgIC8vIGN1cnJlbnRseSBzaG93biBhcyBhIHJlc3VsdCBvZiBhIGNsaWNrLlxuICAgIGlmIChcbiAgICAgIGluc3RhbmNlLnByb3BzLnRyaWdnZXIuaW5kZXhPZignbW91c2VlbnRlcicpID49IDAgJiZcbiAgICAgIGluc3RhbmNlLnByb3BzLnRyaWdnZXIuaW5kZXhPZignY2xpY2snKSA+PSAwICYmXG4gICAgICBbJ21vdXNlbGVhdmUnLCAnbW91c2Vtb3ZlJ10uaW5kZXhPZihldmVudC50eXBlKSA+PSAwICYmXG4gICAgICBpc1Zpc2libGVGcm9tQ2xpY2tcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkZWxheSA9IGdldERlbGF5KGZhbHNlKTtcblxuICAgIGlmIChkZWxheSkge1xuICAgICAgaGlkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSkge1xuICAgICAgICAgIGluc3RhbmNlLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGaXhlcyBhIGB0cmFuc2l0aW9uZW5kYCBwcm9ibGVtIHdoZW4gaXQgZmlyZXMgMSBmcmFtZSB0b29cbiAgICAgIC8vIGxhdGUgc29tZXRpbWVzLCB3ZSBkb24ndCB3YW50IGhpZGUoKSB0byBiZSBjYWxsZWQuXG4gICAgICBzY2hlZHVsZUhpZGVBbmltYXRpb25GcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGluc3RhbmNlLmhpZGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBcdUQ4M0RcdUREMTEgUHVibGljIG1ldGhvZHNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGZ1bmN0aW9uIGVuYWJsZSgpOiB2b2lkIHtcbiAgICBpbnN0YW5jZS5zdGF0ZS5pc0VuYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzYWJsZSgpOiB2b2lkIHtcbiAgICAvLyBEaXNhYmxpbmcgdGhlIGluc3RhbmNlIHNob3VsZCBhbHNvIGhpZGUgaXRcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXRvbWlrcy90aXBweS5qcy1yZWFjdC9pc3N1ZXMvMTA2XG4gICAgaW5zdGFuY2UuaGlkZSgpO1xuICAgIGluc3RhbmNlLnN0YXRlLmlzRW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJEZWxheVRpbWVvdXRzKCk6IHZvaWQge1xuICAgIGNsZWFyVGltZW91dChzaG93VGltZW91dCk7XG4gICAgY2xlYXJUaW1lb3V0KGhpZGVUaW1lb3V0KTtcbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZShzY2hlZHVsZUhpZGVBbmltYXRpb25GcmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRQcm9wcyhwYXJ0aWFsUHJvcHM6IFBhcnRpYWw8UHJvcHM+KTogdm9pZCB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgd2FybldoZW4oaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQsIGNyZWF0ZU1lbW9yeUxlYWtXYXJuaW5nKCdzZXRQcm9wcycpKTtcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnZva2VIb29rKCdvbkJlZm9yZVVwZGF0ZScsIFtpbnN0YW5jZSwgcGFydGlhbFByb3BzXSk7XG5cbiAgICByZW1vdmVMaXN0ZW5lcnMoKTtcblxuICAgIGNvbnN0IHByZXZQcm9wcyA9IGluc3RhbmNlLnByb3BzO1xuICAgIGNvbnN0IG5leHRQcm9wcyA9IGV2YWx1YXRlUHJvcHMocmVmZXJlbmNlLCB7XG4gICAgICAuLi5wcmV2UHJvcHMsXG4gICAgICAuLi5yZW1vdmVVbmRlZmluZWRQcm9wcyhwYXJ0aWFsUHJvcHMpLFxuICAgICAgaWdub3JlQXR0cmlidXRlczogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGluc3RhbmNlLnByb3BzID0gbmV4dFByb3BzO1xuXG4gICAgYWRkTGlzdGVuZXJzKCk7XG5cbiAgICBpZiAocHJldlByb3BzLmludGVyYWN0aXZlRGVib3VuY2UgIT09IG5leHRQcm9wcy5pbnRlcmFjdGl2ZURlYm91bmNlKSB7XG4gICAgICBjbGVhbnVwSW50ZXJhY3RpdmVNb3VzZUxpc3RlbmVycygpO1xuICAgICAgZGVib3VuY2VkT25Nb3VzZU1vdmUgPSBkZWJvdW5jZShcbiAgICAgICAgb25Nb3VzZU1vdmUsXG4gICAgICAgIG5leHRQcm9wcy5pbnRlcmFjdGl2ZURlYm91bmNlXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSBzdGFsZSBhcmlhLWV4cGFuZGVkIGF0dHJpYnV0ZXMgYXJlIHJlbW92ZWRcbiAgICBpZiAocHJldlByb3BzLnRyaWdnZXJUYXJnZXQgJiYgIW5leHRQcm9wcy50cmlnZ2VyVGFyZ2V0KSB7XG4gICAgICBub3JtYWxpemVUb0FycmF5KHByZXZQcm9wcy50cmlnZ2VyVGFyZ2V0KS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKG5leHRQcm9wcy50cmlnZ2VyVGFyZ2V0KSB7XG4gICAgICByZWZlcmVuY2UucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJyk7XG4gICAgfVxuXG4gICAgaGFuZGxlQXJpYUV4cGFuZGVkQXR0cmlidXRlKCk7XG4gICAgaGFuZGxlU3R5bGVzKCk7XG5cbiAgICBpZiAob25VcGRhdGUpIHtcbiAgICAgIG9uVXBkYXRlKHByZXZQcm9wcywgbmV4dFByb3BzKTtcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFuY2UucG9wcGVySW5zdGFuY2UpIHtcbiAgICAgIGNyZWF0ZVBvcHBlckluc3RhbmNlKCk7XG5cbiAgICAgIC8vIEZpeGVzIGFuIGlzc3VlIHdpdGggbmVzdGVkIHRpcHBpZXMgaWYgdGhleSBhcmUgYWxsIGdldHRpbmcgcmUtcmVuZGVyZWQsXG4gICAgICAvLyBhbmQgdGhlIG5lc3RlZCBvbmVzIGdldCByZS1yZW5kZXJlZCBmaXJzdC5cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9taWtzL3RpcHB5anMtcmVhY3QvaXNzdWVzLzE3N1xuICAgICAgLy8gVE9ETzogZmluZCBhIGNsZWFuZXIgLyBtb3JlIGVmZmljaWVudCBzb2x1dGlvbighKVxuICAgICAgZ2V0TmVzdGVkUG9wcGVyVHJlZSgpLmZvckVhY2goKG5lc3RlZFBvcHBlcikgPT4ge1xuICAgICAgICAvLyBSZWFjdCAoYW5kIG90aGVyIFVJIGxpYnMgbGlrZWx5KSByZXF1aXJlcyBhIHJBRiB3cmFwcGVyIGFzIGl0IGZsdXNoZXNcbiAgICAgICAgLy8gaXRzIHdvcmsgaW4gb25lXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShuZXN0ZWRQb3BwZXIuX3RpcHB5IS5wb3BwZXJJbnN0YW5jZSEuZm9yY2VVcGRhdGUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaW52b2tlSG9vaygnb25BZnRlclVwZGF0ZScsIFtpbnN0YW5jZSwgcGFydGlhbFByb3BzXSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDb250ZW50KGNvbnRlbnQ6IENvbnRlbnQpOiB2b2lkIHtcbiAgICBpbnN0YW5jZS5zZXRQcm9wcyh7Y29udGVudH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdygpOiB2b2lkIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICB3YXJuV2hlbihpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCwgY3JlYXRlTWVtb3J5TGVha1dhcm5pbmcoJ3Nob3cnKSk7XG4gICAgfVxuXG4gICAgLy8gRWFybHkgYmFpbC1vdXRcbiAgICBjb25zdCBpc0FscmVhZHlWaXNpYmxlID0gaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlO1xuICAgIGNvbnN0IGlzRGVzdHJveWVkID0gaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQ7XG4gICAgY29uc3QgaXNEaXNhYmxlZCA9ICFpbnN0YW5jZS5zdGF0ZS5pc0VuYWJsZWQ7XG4gICAgY29uc3QgaXNUb3VjaEFuZFRvdWNoRGlzYWJsZWQgPVxuICAgICAgY3VycmVudElucHV0LmlzVG91Y2ggJiYgIWluc3RhbmNlLnByb3BzLnRvdWNoO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gZ2V0VmFsdWVBdEluZGV4T3JSZXR1cm4oXG4gICAgICBpbnN0YW5jZS5wcm9wcy5kdXJhdGlvbixcbiAgICAgIDAsXG4gICAgICBkZWZhdWx0UHJvcHMuZHVyYXRpb25cbiAgICApO1xuXG4gICAgaWYgKFxuICAgICAgaXNBbHJlYWR5VmlzaWJsZSB8fFxuICAgICAgaXNEZXN0cm95ZWQgfHxcbiAgICAgIGlzRGlzYWJsZWQgfHxcbiAgICAgIGlzVG91Y2hBbmRUb3VjaERpc2FibGVkXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTm9ybWFsaXplIGBkaXNhYmxlZGAgYmVoYXZpb3IgYWNyb3NzIGJyb3dzZXJzLlxuICAgIC8vIEZpcmVmb3ggYWxsb3dzIGV2ZW50cyBvbiBkaXNhYmxlZCBlbGVtZW50cywgYnV0IENocm9tZSBkb2Vzbid0LlxuICAgIC8vIFVzaW5nIGEgd3JhcHBlciBlbGVtZW50IChpLmUuIDxzcGFuPikgaXMgcmVjb21tZW5kZWQuXG4gICAgaWYgKGdldEN1cnJlbnRUYXJnZXQoKS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnZva2VIb29rKCdvblNob3cnLCBbaW5zdGFuY2VdLCBmYWxzZSk7XG4gICAgaWYgKGluc3RhbmNlLnByb3BzLm9uU2hvdyhpbnN0YW5jZSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW5zdGFuY2Uuc3RhdGUuaXNWaXNpYmxlID0gdHJ1ZTtcblxuICAgIGlmIChnZXRJc0RlZmF1bHRSZW5kZXJGbigpKSB7XG4gICAgICBwb3BwZXIuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICB9XG5cbiAgICBoYW5kbGVTdHlsZXMoKTtcbiAgICBhZGREb2N1bWVudFByZXNzKCk7XG5cbiAgICBpZiAoIWluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgcG9wcGVyLnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgLy8gSWYgZmxpcHBpbmcgdG8gdGhlIG9wcG9zaXRlIHNpZGUgYWZ0ZXIgaGlkaW5nIGF0IGxlYXN0IG9uY2UsIHRoZVxuICAgIC8vIGFuaW1hdGlvbiB3aWxsIHVzZSB0aGUgd3JvbmcgcGxhY2VtZW50IHdpdGhvdXQgcmVzZXR0aW5nIHRoZSBkdXJhdGlvblxuICAgIGlmIChnZXRJc0RlZmF1bHRSZW5kZXJGbigpKSB7XG4gICAgICBjb25zdCB7Ym94LCBjb250ZW50fSA9IGdldERlZmF1bHRUZW1wbGF0ZUNoaWxkcmVuKCk7XG4gICAgICBzZXRUcmFuc2l0aW9uRHVyYXRpb24oW2JveCwgY29udGVudF0sIDApO1xuICAgIH1cblxuICAgIG9uRmlyc3RVcGRhdGUgPSAoKTogdm9pZCA9PiB7XG4gICAgICBpZiAoIWluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSB8fCBpZ25vcmVPbkZpcnN0VXBkYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWdub3JlT25GaXJzdFVwZGF0ZSA9IHRydWU7XG5cbiAgICAgIC8vIHJlZmxvd1xuICAgICAgdm9pZCBwb3BwZXIub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICBwb3BwZXIuc3R5bGUudHJhbnNpdGlvbiA9IGluc3RhbmNlLnByb3BzLm1vdmVUcmFuc2l0aW9uO1xuXG4gICAgICBpZiAoZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKSAmJiBpbnN0YW5jZS5wcm9wcy5hbmltYXRpb24pIHtcbiAgICAgICAgY29uc3Qge2JveCwgY29udGVudH0gPSBnZXREZWZhdWx0VGVtcGxhdGVDaGlsZHJlbigpO1xuICAgICAgICBzZXRUcmFuc2l0aW9uRHVyYXRpb24oW2JveCwgY29udGVudF0sIGR1cmF0aW9uKTtcbiAgICAgICAgc2V0VmlzaWJpbGl0eVN0YXRlKFtib3gsIGNvbnRlbnRdLCAndmlzaWJsZScpO1xuICAgICAgfVxuXG4gICAgICBoYW5kbGVBcmlhQ29udGVudEF0dHJpYnV0ZSgpO1xuICAgICAgaGFuZGxlQXJpYUV4cGFuZGVkQXR0cmlidXRlKCk7XG5cbiAgICAgIHB1c2hJZlVuaXF1ZShtb3VudGVkSW5zdGFuY2VzLCBpbnN0YW5jZSk7XG5cbiAgICAgIC8vIGNlcnRhaW4gbW9kaWZpZXJzIChlLmcuIGBtYXhTaXplYCkgcmVxdWlyZSBhIHNlY29uZCB1cGRhdGUgYWZ0ZXIgdGhlXG4gICAgICAvLyBwb3BwZXIgaGFzIGJlZW4gcG9zaXRpb25lZCBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgIGluc3RhbmNlLnBvcHBlckluc3RhbmNlPy5mb3JjZVVwZGF0ZSgpO1xuXG4gICAgICBpbnZva2VIb29rKCdvbk1vdW50JywgW2luc3RhbmNlXSk7XG5cbiAgICAgIGlmIChpbnN0YW5jZS5wcm9wcy5hbmltYXRpb24gJiYgZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKSkge1xuICAgICAgICBvblRyYW5zaXRpb25lZEluKGR1cmF0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgaW5zdGFuY2Uuc3RhdGUuaXNTaG93biA9IHRydWU7XG4gICAgICAgICAgaW52b2tlSG9vaygnb25TaG93bicsIFtpbnN0YW5jZV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbW91bnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGUoKTogdm9pZCB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgd2FybldoZW4oaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQsIGNyZWF0ZU1lbW9yeUxlYWtXYXJuaW5nKCdoaWRlJykpO1xuICAgIH1cblxuICAgIC8vIEVhcmx5IGJhaWwtb3V0XG4gICAgY29uc3QgaXNBbHJlYWR5SGlkZGVuID0gIWluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZTtcbiAgICBjb25zdCBpc0Rlc3Ryb3llZCA9IGluc3RhbmNlLnN0YXRlLmlzRGVzdHJveWVkO1xuICAgIGNvbnN0IGlzRGlzYWJsZWQgPSAhaW5zdGFuY2Uuc3RhdGUuaXNFbmFibGVkO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gZ2V0VmFsdWVBdEluZGV4T3JSZXR1cm4oXG4gICAgICBpbnN0YW5jZS5wcm9wcy5kdXJhdGlvbixcbiAgICAgIDEsXG4gICAgICBkZWZhdWx0UHJvcHMuZHVyYXRpb25cbiAgICApO1xuXG4gICAgaWYgKGlzQWxyZWFkeUhpZGRlbiB8fCBpc0Rlc3Ryb3llZCB8fCBpc0Rpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW52b2tlSG9vaygnb25IaWRlJywgW2luc3RhbmNlXSwgZmFsc2UpO1xuICAgIGlmIChpbnN0YW5jZS5wcm9wcy5vbkhpZGUoaW5zdGFuY2UpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIGluc3RhbmNlLnN0YXRlLmlzU2hvd24gPSBmYWxzZTtcbiAgICBpZ25vcmVPbkZpcnN0VXBkYXRlID0gZmFsc2U7XG4gICAgaXNWaXNpYmxlRnJvbUNsaWNrID0gZmFsc2U7XG5cbiAgICBpZiAoZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKSkge1xuICAgICAgcG9wcGVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICB9XG5cbiAgICBjbGVhbnVwSW50ZXJhY3RpdmVNb3VzZUxpc3RlbmVycygpO1xuICAgIHJlbW92ZURvY3VtZW50UHJlc3MoKTtcbiAgICBoYW5kbGVTdHlsZXModHJ1ZSk7XG5cbiAgICBpZiAoZ2V0SXNEZWZhdWx0UmVuZGVyRm4oKSkge1xuICAgICAgY29uc3Qge2JveCwgY29udGVudH0gPSBnZXREZWZhdWx0VGVtcGxhdGVDaGlsZHJlbigpO1xuXG4gICAgICBpZiAoaW5zdGFuY2UucHJvcHMuYW5pbWF0aW9uKSB7XG4gICAgICAgIHNldFRyYW5zaXRpb25EdXJhdGlvbihbYm94LCBjb250ZW50XSwgZHVyYXRpb24pO1xuICAgICAgICBzZXRWaXNpYmlsaXR5U3RhdGUoW2JveCwgY29udGVudF0sICdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVBcmlhQ29udGVudEF0dHJpYnV0ZSgpO1xuICAgIGhhbmRsZUFyaWFFeHBhbmRlZEF0dHJpYnV0ZSgpO1xuXG4gICAgaWYgKGluc3RhbmNlLnByb3BzLmFuaW1hdGlvbikge1xuICAgICAgaWYgKGdldElzRGVmYXVsdFJlbmRlckZuKCkpIHtcbiAgICAgICAgb25UcmFuc2l0aW9uZWRPdXQoZHVyYXRpb24sIGluc3RhbmNlLnVubW91bnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS51bm1vdW50KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGlkZVdpdGhJbnRlcmFjdGl2aXR5KGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgd2FybldoZW4oXG4gICAgICAgIGluc3RhbmNlLnN0YXRlLmlzRGVzdHJveWVkLFxuICAgICAgICBjcmVhdGVNZW1vcnlMZWFrV2FybmluZygnaGlkZVdpdGhJbnRlcmFjdGl2aXR5JylcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0RG9jdW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkZWJvdW5jZWRPbk1vdXNlTW92ZSk7XG4gICAgcHVzaElmVW5pcXVlKG1vdXNlTW92ZUxpc3RlbmVycywgZGVib3VuY2VkT25Nb3VzZU1vdmUpO1xuICAgIGRlYm91bmNlZE9uTW91c2VNb3ZlKGV2ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVubW91bnQoKTogdm9pZCB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgd2FybldoZW4oaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQsIGNyZWF0ZU1lbW9yeUxlYWtXYXJuaW5nKCd1bm1vdW50JykpO1xuICAgIH1cblxuICAgIGlmIChpbnN0YW5jZS5zdGF0ZS5pc1Zpc2libGUpIHtcbiAgICAgIGluc3RhbmNlLmhpZGUoKTtcbiAgICB9XG5cbiAgICBpZiAoIWluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRlc3Ryb3lQb3BwZXJJbnN0YW5jZSgpO1xuXG4gICAgLy8gSWYgYSBwb3BwZXIgaXMgbm90IGludGVyYWN0aXZlLCBpdCB3aWxsIGJlIGFwcGVuZGVkIG91dHNpZGUgdGhlIHBvcHBlclxuICAgIC8vIHRyZWUgYnkgZGVmYXVsdC4gVGhpcyBzZWVtcyBtYWlubHkgZm9yIGludGVyYWN0aXZlIHRpcHBpZXMsIGJ1dCB3ZSBzaG91bGRcbiAgICAvLyBmaW5kIGEgd29ya2Fyb3VuZCBpZiBwb3NzaWJsZVxuICAgIGdldE5lc3RlZFBvcHBlclRyZWUoKS5mb3JFYWNoKChuZXN0ZWRQb3BwZXIpID0+IHtcbiAgICAgIG5lc3RlZFBvcHBlci5fdGlwcHkhLnVubW91bnQoKTtcbiAgICB9KTtcblxuICAgIGlmIChwb3BwZXIucGFyZW50Tm9kZSkge1xuICAgICAgcG9wcGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocG9wcGVyKTtcbiAgICB9XG5cbiAgICBtb3VudGVkSW5zdGFuY2VzID0gbW91bnRlZEluc3RhbmNlcy5maWx0ZXIoKGkpID0+IGkgIT09IGluc3RhbmNlKTtcblxuICAgIGluc3RhbmNlLnN0YXRlLmlzTW91bnRlZCA9IGZhbHNlO1xuICAgIGludm9rZUhvb2soJ29uSGlkZGVuJywgW2luc3RhbmNlXSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCk6IHZvaWQge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIHdhcm5XaGVuKGluc3RhbmNlLnN0YXRlLmlzRGVzdHJveWVkLCBjcmVhdGVNZW1vcnlMZWFrV2FybmluZygnZGVzdHJveScpKTtcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5jbGVhckRlbGF5VGltZW91dHMoKTtcbiAgICBpbnN0YW5jZS51bm1vdW50KCk7XG5cbiAgICByZW1vdmVMaXN0ZW5lcnMoKTtcblxuICAgIGRlbGV0ZSByZWZlcmVuY2UuX3RpcHB5O1xuXG4gICAgaW5zdGFuY2Uuc3RhdGUuaXNEZXN0cm95ZWQgPSB0cnVlO1xuXG4gICAgaW52b2tlSG9vaygnb25EZXN0cm95JywgW2luc3RhbmNlXSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgYmluZEdsb2JhbEV2ZW50TGlzdGVuZXJzLCB7XG4gIGN1cnJlbnRJbnB1dCxcbn0gZnJvbSAnLi9iaW5kR2xvYmFsRXZlbnRMaXN0ZW5lcnMnO1xuaW1wb3J0IGNyZWF0ZVRpcHB5LCB7bW91bnRlZEluc3RhbmNlc30gZnJvbSAnLi9jcmVhdGVUaXBweSc7XG5pbXBvcnQge2dldEFycmF5T2ZFbGVtZW50cywgaXNFbGVtZW50LCBpc1JlZmVyZW5jZUVsZW1lbnR9IGZyb20gJy4vZG9tLXV0aWxzJztcbmltcG9ydCB7ZGVmYXVsdFByb3BzLCBzZXREZWZhdWx0UHJvcHMsIHZhbGlkYXRlUHJvcHN9IGZyb20gJy4vcHJvcHMnO1xuaW1wb3J0IHtIaWRlQWxsLCBIaWRlQWxsT3B0aW9ucywgSW5zdGFuY2UsIFByb3BzLCBUYXJnZXRzfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7dmFsaWRhdGVUYXJnZXRzLCB3YXJuV2hlbn0gZnJvbSAnLi92YWxpZGF0aW9uJztcblxuZnVuY3Rpb24gdGlwcHkoXG4gIHRhcmdldHM6IFRhcmdldHMsXG4gIG9wdGlvbmFsUHJvcHM6IFBhcnRpYWw8UHJvcHM+ID0ge31cbik6IEluc3RhbmNlIHwgSW5zdGFuY2VbXSB7XG4gIGNvbnN0IHBsdWdpbnMgPSBkZWZhdWx0UHJvcHMucGx1Z2lucy5jb25jYXQob3B0aW9uYWxQcm9wcy5wbHVnaW5zIHx8IFtdKTtcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoX19ERVZfXykge1xuICAgIHZhbGlkYXRlVGFyZ2V0cyh0YXJnZXRzKTtcbiAgICB2YWxpZGF0ZVByb3BzKG9wdGlvbmFsUHJvcHMsIHBsdWdpbnMpO1xuICB9XG5cbiAgYmluZEdsb2JhbEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgY29uc3QgcGFzc2VkUHJvcHM6IFBhcnRpYWw8UHJvcHM+ID0gey4uLm9wdGlvbmFsUHJvcHMsIHBsdWdpbnN9O1xuXG4gIGNvbnN0IGVsZW1lbnRzID0gZ2V0QXJyYXlPZkVsZW1lbnRzKHRhcmdldHMpO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChfX0RFVl9fKSB7XG4gICAgY29uc3QgaXNTaW5nbGVDb250ZW50RWxlbWVudCA9IGlzRWxlbWVudChwYXNzZWRQcm9wcy5jb250ZW50KTtcbiAgICBjb25zdCBpc01vcmVUaGFuT25lUmVmZXJlbmNlRWxlbWVudCA9IGVsZW1lbnRzLmxlbmd0aCA+IDE7XG4gICAgd2FybldoZW4oXG4gICAgICBpc1NpbmdsZUNvbnRlbnRFbGVtZW50ICYmIGlzTW9yZVRoYW5PbmVSZWZlcmVuY2VFbGVtZW50LFxuICAgICAgW1xuICAgICAgICAndGlwcHkoKSB3YXMgcGFzc2VkIGFuIEVsZW1lbnQgYXMgdGhlIGBjb250ZW50YCBwcm9wLCBidXQgbW9yZSB0aGFuJyxcbiAgICAgICAgJ29uZSB0aXBweSBpbnN0YW5jZSB3YXMgY3JlYXRlZCBieSB0aGlzIGludm9jYXRpb24uIFRoaXMgbWVhbnMgdGhlJyxcbiAgICAgICAgJ2NvbnRlbnQgZWxlbWVudCB3aWxsIG9ubHkgYmUgYXBwZW5kZWQgdG8gdGhlIGxhc3QgdGlwcHkgaW5zdGFuY2UuJyxcbiAgICAgICAgJ1xcblxcbicsXG4gICAgICAgICdJbnN0ZWFkLCBwYXNzIHRoZSAuaW5uZXJIVE1MIG9mIHRoZSBlbGVtZW50LCBvciB1c2UgYSBmdW5jdGlvbiB0aGF0JyxcbiAgICAgICAgJ3JldHVybnMgYSBjbG9uZWQgdmVyc2lvbiBvZiB0aGUgZWxlbWVudCBpbnN0ZWFkLicsXG4gICAgICAgICdcXG5cXG4nLFxuICAgICAgICAnMSkgY29udGVudDogZWxlbWVudC5pbm5lckhUTUxcXG4nLFxuICAgICAgICAnMikgY29udGVudDogKCkgPT4gZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSknLFxuICAgICAgXS5qb2luKCcgJylcbiAgICApO1xuICB9XG5cbiAgY29uc3QgaW5zdGFuY2VzID0gZWxlbWVudHMucmVkdWNlPEluc3RhbmNlW10+KFxuICAgIChhY2MsIHJlZmVyZW5jZSk6IEluc3RhbmNlW10gPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSByZWZlcmVuY2UgJiYgY3JlYXRlVGlwcHkocmVmZXJlbmNlLCBwYXNzZWRQcm9wcyk7XG5cbiAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICBhY2MucHVzaChpbnN0YW5jZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICBbXVxuICApO1xuXG4gIHJldHVybiBpc0VsZW1lbnQodGFyZ2V0cykgPyBpbnN0YW5jZXNbMF0gOiBpbnN0YW5jZXM7XG59XG5cbnRpcHB5LmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbnRpcHB5LnNldERlZmF1bHRQcm9wcyA9IHNldERlZmF1bHRQcm9wcztcbnRpcHB5LmN1cnJlbnRJbnB1dCA9IGN1cnJlbnRJbnB1dDtcblxuZXhwb3J0IGRlZmF1bHQgdGlwcHk7XG5cbmV4cG9ydCBjb25zdCBoaWRlQWxsOiBIaWRlQWxsID0gKHtcbiAgZXhjbHVkZTogZXhjbHVkZWRSZWZlcmVuY2VPckluc3RhbmNlLFxuICBkdXJhdGlvbixcbn06IEhpZGVBbGxPcHRpb25zID0ge30pID0+IHtcbiAgbW91bnRlZEluc3RhbmNlcy5mb3JFYWNoKChpbnN0YW5jZSkgPT4ge1xuICAgIGxldCBpc0V4Y2x1ZGVkID0gZmFsc2U7XG5cbiAgICBpZiAoZXhjbHVkZWRSZWZlcmVuY2VPckluc3RhbmNlKSB7XG4gICAgICBpc0V4Y2x1ZGVkID0gaXNSZWZlcmVuY2VFbGVtZW50KGV4Y2x1ZGVkUmVmZXJlbmNlT3JJbnN0YW5jZSlcbiAgICAgICAgPyBpbnN0YW5jZS5yZWZlcmVuY2UgPT09IGV4Y2x1ZGVkUmVmZXJlbmNlT3JJbnN0YW5jZVxuICAgICAgICA6IGluc3RhbmNlLnBvcHBlciA9PT0gKGV4Y2x1ZGVkUmVmZXJlbmNlT3JJbnN0YW5jZSBhcyBJbnN0YW5jZSkucG9wcGVyO1xuICAgIH1cblxuICAgIGlmICghaXNFeGNsdWRlZCkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxEdXJhdGlvbiA9IGluc3RhbmNlLnByb3BzLmR1cmF0aW9uO1xuXG4gICAgICBpbnN0YW5jZS5zZXRQcm9wcyh7ZHVyYXRpb259KTtcbiAgICAgIGluc3RhbmNlLmhpZGUoKTtcblxuICAgICAgaWYgKCFpbnN0YW5jZS5zdGF0ZS5pc0Rlc3Ryb3llZCkge1xuICAgICAgICBpbnN0YW5jZS5zZXRQcm9wcyh7ZHVyYXRpb246IG9yaWdpbmFsRHVyYXRpb259KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcbiIsICJpbXBvcnQgdGlwcHkgZnJvbSAnLi4nO1xuaW1wb3J0IHtkaXZ9IGZyb20gJy4uL2RvbS11dGlscyc7XG5pbXBvcnQge1xuICBDcmVhdGVTaW5nbGV0b24sXG4gIFBsdWdpbixcbiAgQ3JlYXRlU2luZ2xldG9uUHJvcHMsXG4gIFJlZmVyZW5jZUVsZW1lbnQsXG4gIENyZWF0ZVNpbmdsZXRvbkluc3RhbmNlLFxuICBJbnN0YW5jZSxcbiAgUHJvcHMsXG59IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7bm9ybWFsaXplVG9BcnJheSwgcmVtb3ZlUHJvcGVydGllc30gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHtlcnJvcldoZW59IGZyb20gJy4uL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHthcHBseVN0eWxlcywgTW9kaWZpZXJ9IGZyb20gJ0Bwb3BwZXJqcy9jb3JlJztcblxuLy8gVGhlIGRlZmF1bHQgYGFwcGx5U3R5bGVzYCBtb2RpZmllciBoYXMgYSBjbGVhbnVwIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWRcbi8vIGV2ZXJ5IHRpbWUgdGhlIHBvcHBlciBpcyBkZXN0cm95ZWQgKGkuZS4gYSBuZXcgdGFyZ2V0KSwgcmVtb3ZpbmcgdGhlIHN0eWxlc1xuLy8gYW5kIGNhdXNpbmcgdHJhbnNpdGlvbnMgdG8gYnJlYWsgZm9yIHNpbmdsZXRvbnMgd2hlbiB0aGUgY29uc29sZSBpcyBvcGVuLCBidXRcbi8vIG1vc3Qgbm90YWJseSBmb3Igbm9uLXRyYW5zZm9ybSBzdHlsZXMgYmVpbmcgdXNlZCwgYGdwdUFjY2VsZXJhdGlvbjogZmFsc2VgLlxuY29uc3QgYXBwbHlTdHlsZXNNb2RpZmllcjogTW9kaWZpZXI8J2FwcGx5U3R5bGVzJywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+ID0ge1xuICAuLi5hcHBseVN0eWxlcyxcbiAgZWZmZWN0KHtzdGF0ZX0pIHtcbiAgICBjb25zdCBpbml0aWFsU3R5bGVzID0ge1xuICAgICAgcG9wcGVyOiB7XG4gICAgICAgIHBvc2l0aW9uOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgICBsZWZ0OiAnMCcsXG4gICAgICAgIHRvcDogJzAnLFxuICAgICAgICBtYXJnaW46ICcwJyxcbiAgICAgIH0sXG4gICAgICBhcnJvdzoge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIH0sXG4gICAgICByZWZlcmVuY2U6IHt9LFxuICAgIH07XG5cbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLmVsZW1lbnRzLnBvcHBlci5zdHlsZSwgaW5pdGlhbFN0eWxlcy5wb3BwZXIpO1xuICAgIHN0YXRlLnN0eWxlcyA9IGluaXRpYWxTdHlsZXM7XG5cbiAgICBpZiAoc3RhdGUuZWxlbWVudHMuYXJyb3cpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oc3RhdGUuZWxlbWVudHMuYXJyb3cuc3R5bGUsIGluaXRpYWxTdHlsZXMuYXJyb3cpO1xuICAgIH1cblxuICAgIC8vIGludGVudGlvbmFsbHkgcmV0dXJuIG5vIGNsZWFudXAgZnVuY3Rpb25cbiAgICAvLyByZXR1cm4gKCkgPT4geyAuLi4gfVxuICB9LFxufTtcblxuY29uc3QgY3JlYXRlU2luZ2xldG9uOiBDcmVhdGVTaW5nbGV0b24gPSAoXG4gIHRpcHB5SW5zdGFuY2VzLFxuICBvcHRpb25hbFByb3BzID0ge31cbikgPT4ge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoX19ERVZfXykge1xuICAgIGVycm9yV2hlbihcbiAgICAgICFBcnJheS5pc0FycmF5KHRpcHB5SW5zdGFuY2VzKSxcbiAgICAgIFtcbiAgICAgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gY3JlYXRlU2luZ2xldG9uKCkgbXVzdCBiZSBhbiBhcnJheSBvZicsXG4gICAgICAgICd0aXBweSBpbnN0YW5jZXMuIFRoZSBwYXNzZWQgdmFsdWUgd2FzJyxcbiAgICAgICAgU3RyaW5nKHRpcHB5SW5zdGFuY2VzKSxcbiAgICAgIF0uam9pbignICcpXG4gICAgKTtcbiAgfVxuXG4gIGxldCBpbmRpdmlkdWFsSW5zdGFuY2VzID0gdGlwcHlJbnN0YW5jZXM7XG4gIGxldCByZWZlcmVuY2VzOiBBcnJheTxSZWZlcmVuY2VFbGVtZW50PiA9IFtdO1xuICBsZXQgdHJpZ2dlclRhcmdldHM6IEFycmF5PEVsZW1lbnQ+ID0gW107XG4gIGxldCBjdXJyZW50VGFyZ2V0OiBFbGVtZW50IHwgbnVsbDtcbiAgbGV0IG92ZXJyaWRlcyA9IG9wdGlvbmFsUHJvcHMub3ZlcnJpZGVzO1xuICBsZXQgaW50ZXJjZXB0U2V0UHJvcHNDbGVhbnVwczogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcbiAgbGV0IHNob3duT25DcmVhdGUgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBzZXRUcmlnZ2VyVGFyZ2V0cygpOiB2b2lkIHtcbiAgICB0cmlnZ2VyVGFyZ2V0cyA9IGluZGl2aWR1YWxJbnN0YW5jZXNcbiAgICAgIC5tYXAoKGluc3RhbmNlKSA9PlxuICAgICAgICBub3JtYWxpemVUb0FycmF5KGluc3RhbmNlLnByb3BzLnRyaWdnZXJUYXJnZXQgfHwgaW5zdGFuY2UucmVmZXJlbmNlKVxuICAgICAgKVxuICAgICAgLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiBhY2MuY29uY2F0KGl0ZW0pLCBbXSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRSZWZlcmVuY2VzKCk6IHZvaWQge1xuICAgIHJlZmVyZW5jZXMgPSBpbmRpdmlkdWFsSW5zdGFuY2VzLm1hcCgoaW5zdGFuY2UpID0+IGluc3RhbmNlLnJlZmVyZW5jZSk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmFibGVJbnN0YW5jZXMoaXNFbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgaW5kaXZpZHVhbEluc3RhbmNlcy5mb3JFYWNoKChpbnN0YW5jZSkgPT4ge1xuICAgICAgaWYgKGlzRW5hYmxlZCkge1xuICAgICAgICBpbnN0YW5jZS5lbmFibGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc3RhbmNlLmRpc2FibGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGludGVyY2VwdFNldFByb3BzKHNpbmdsZXRvbjogSW5zdGFuY2UpOiBBcnJheTwoKSA9PiB2b2lkPiB7XG4gICAgcmV0dXJuIGluZGl2aWR1YWxJbnN0YW5jZXMubWFwKChpbnN0YW5jZSkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxTZXRQcm9wcyA9IGluc3RhbmNlLnNldFByb3BzO1xuXG4gICAgICBpbnN0YW5jZS5zZXRQcm9wcyA9IChwcm9wcyk6IHZvaWQgPT4ge1xuICAgICAgICBvcmlnaW5hbFNldFByb3BzKHByb3BzKTtcblxuICAgICAgICBpZiAoaW5zdGFuY2UucmVmZXJlbmNlID09PSBjdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgc2luZ2xldG9uLnNldFByb3BzKHByb3BzKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuICgpOiB2b2lkID0+IHtcbiAgICAgICAgaW5zdGFuY2Uuc2V0UHJvcHMgPSBvcmlnaW5hbFNldFByb3BzO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGhhdmUgdG8gcGFzcyBzaW5nbGV0b24sIGFzIGl0IG1heWJlIHVuZGVmaW5lZCBvbiBmaXJzdCBjYWxsXG4gIGZ1bmN0aW9uIHByZXBhcmVJbnN0YW5jZShcbiAgICBzaW5nbGV0b246IEluc3RhbmNlLFxuICAgIHRhcmdldDogUmVmZXJlbmNlRWxlbWVudFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IHRyaWdnZXJUYXJnZXRzLmluZGV4T2YodGFyZ2V0KTtcblxuICAgIC8vIGJhaWwtb3V0XG4gICAgaWYgKHRhcmdldCA9PT0gY3VycmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGN1cnJlbnRUYXJnZXQgPSB0YXJnZXQ7XG5cbiAgICBjb25zdCBvdmVycmlkZVByb3BzOiBQYXJ0aWFsPFByb3BzPiA9IChvdmVycmlkZXMgfHwgW10pXG4gICAgICAuY29uY2F0KCdjb250ZW50JylcbiAgICAgIC5yZWR1Y2UoKGFjYywgcHJvcCkgPT4ge1xuICAgICAgICAoYWNjIGFzIGFueSlbcHJvcF0gPSBpbmRpdmlkdWFsSW5zdGFuY2VzW2luZGV4XS5wcm9wc1twcm9wXTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9KTtcblxuICAgIHNpbmdsZXRvbi5zZXRQcm9wcyh7XG4gICAgICAuLi5vdmVycmlkZVByb3BzLFxuICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdDpcbiAgICAgICAgdHlwZW9mIG92ZXJyaWRlUHJvcHMuZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgID8gb3ZlcnJpZGVQcm9wcy5nZXRSZWZlcmVuY2VDbGllbnRSZWN0XG4gICAgICAgICAgOiAoKTogQ2xpZW50UmVjdCA9PiByZWZlcmVuY2VzW2luZGV4XT8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVJbnN0YW5jZXMoZmFsc2UpO1xuICBzZXRSZWZlcmVuY2VzKCk7XG4gIHNldFRyaWdnZXJUYXJnZXRzKCk7XG5cbiAgY29uc3QgcGx1Z2luOiBQbHVnaW4gPSB7XG4gICAgZm4oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgICAgZW5hYmxlSW5zdGFuY2VzKHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBvbkhpZGRlbigpOiB2b2lkIHtcbiAgICAgICAgICBjdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfSxcbiAgICAgICAgb25DbGlja091dHNpZGUoaW5zdGFuY2UpOiB2b2lkIHtcbiAgICAgICAgICBpZiAoaW5zdGFuY2UucHJvcHMuc2hvd09uQ3JlYXRlICYmICFzaG93bk9uQ3JlYXRlKSB7XG4gICAgICAgICAgICBzaG93bk9uQ3JlYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25TaG93KGluc3RhbmNlKTogdm9pZCB7XG4gICAgICAgICAgaWYgKGluc3RhbmNlLnByb3BzLnNob3dPbkNyZWF0ZSAmJiAhc2hvd25PbkNyZWF0ZSkge1xuICAgICAgICAgICAgc2hvd25PbkNyZWF0ZSA9IHRydWU7XG4gICAgICAgICAgICBwcmVwYXJlSW5zdGFuY2UoaW5zdGFuY2UsIHJlZmVyZW5jZXNbMF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25UcmlnZ2VyKGluc3RhbmNlLCBldmVudCk6IHZvaWQge1xuICAgICAgICAgIHByZXBhcmVJbnN0YW5jZShpbnN0YW5jZSwgZXZlbnQuY3VycmVudFRhcmdldCBhcyBFbGVtZW50KTtcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSxcbiAgfTtcblxuICBjb25zdCBzaW5nbGV0b24gPSB0aXBweShkaXYoKSwge1xuICAgIC4uLnJlbW92ZVByb3BlcnRpZXMob3B0aW9uYWxQcm9wcywgWydvdmVycmlkZXMnXSksXG4gICAgcGx1Z2luczogW3BsdWdpbiwgLi4uKG9wdGlvbmFsUHJvcHMucGx1Z2lucyB8fCBbXSldLFxuICAgIHRyaWdnZXJUYXJnZXQ6IHRyaWdnZXJUYXJnZXRzLFxuICAgIHBvcHBlck9wdGlvbnM6IHtcbiAgICAgIC4uLm9wdGlvbmFsUHJvcHMucG9wcGVyT3B0aW9ucyxcbiAgICAgIG1vZGlmaWVyczogW1xuICAgICAgICAuLi4ob3B0aW9uYWxQcm9wcy5wb3BwZXJPcHRpb25zPy5tb2RpZmllcnMgfHwgW10pLFxuICAgICAgICBhcHBseVN0eWxlc01vZGlmaWVyLFxuICAgICAgXSxcbiAgICB9LFxuICB9KSBhcyBDcmVhdGVTaW5nbGV0b25JbnN0YW5jZTxDcmVhdGVTaW5nbGV0b25Qcm9wcz47XG5cbiAgY29uc3Qgb3JpZ2luYWxTaG93ID0gc2luZ2xldG9uLnNob3c7XG5cbiAgc2luZ2xldG9uLnNob3cgPSAodGFyZ2V0PzogUmVmZXJlbmNlRWxlbWVudCB8IEluc3RhbmNlIHwgbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgb3JpZ2luYWxTaG93KCk7XG5cbiAgICAvLyBmaXJzdCB0aW1lLCBzaG93T25DcmVhdGUgb3IgcHJvZ3JhbW1hdGljIGNhbGwgd2l0aCBubyBwYXJhbXNcbiAgICAvLyBkZWZhdWx0IHRvIHNob3dpbmcgZmlyc3QgaW5zdGFuY2VcbiAgICBpZiAoIWN1cnJlbnRUYXJnZXQgJiYgdGFyZ2V0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBwcmVwYXJlSW5zdGFuY2Uoc2luZ2xldG9uLCByZWZlcmVuY2VzWzBdKTtcbiAgICB9XG5cbiAgICAvLyB0cmlnZ2VyZWQgZnJvbSBldmVudCAoZG8gbm90aGluZyBhcyBwcmVwYXJlSW5zdGFuY2UgYWxyZWFkeSBjYWxsZWQgYnkgb25UcmlnZ2VyKVxuICAgIC8vIHByb2dyYW1tYXRpYyBjYWxsIHdpdGggbm8gcGFyYW1zIHdoZW4gYWxyZWFkeSB2aXNpYmxlIChkbyBub3RoaW5nIGFnYWluKVxuICAgIGlmIChjdXJyZW50VGFyZ2V0ICYmIHRhcmdldCA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdGFyZ2V0IGlzIGluZGV4IG9mIGluc3RhbmNlXG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICByZWZlcmVuY2VzW3RhcmdldF0gJiYgcHJlcGFyZUluc3RhbmNlKHNpbmdsZXRvbiwgcmVmZXJlbmNlc1t0YXJnZXRdKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyB0YXJnZXQgaXMgYSBjaGlsZCB0aXBweSBpbnN0YW5jZVxuICAgIGlmIChpbmRpdmlkdWFsSW5zdGFuY2VzLmluZGV4T2YodGFyZ2V0IGFzIEluc3RhbmNlKSA+PSAwKSB7XG4gICAgICBjb25zdCByZWYgPSAodGFyZ2V0IGFzIEluc3RhbmNlKS5yZWZlcmVuY2U7XG4gICAgICByZXR1cm4gcHJlcGFyZUluc3RhbmNlKHNpbmdsZXRvbiwgcmVmKTtcbiAgICB9XG5cbiAgICAvLyB0YXJnZXQgaXMgYSBSZWZlcmVuY2VFbGVtZW50XG4gICAgaWYgKHJlZmVyZW5jZXMuaW5kZXhPZih0YXJnZXQgYXMgUmVmZXJlbmNlRWxlbWVudCkgPj0gMCkge1xuICAgICAgcmV0dXJuIHByZXBhcmVJbnN0YW5jZShzaW5nbGV0b24sIHRhcmdldCBhcyBSZWZlcmVuY2VFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgc2luZ2xldG9uLnNob3dOZXh0ID0gKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGZpcnN0ID0gcmVmZXJlbmNlc1swXTtcbiAgICBpZiAoIWN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybiBzaW5nbGV0b24uc2hvdygwKTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSByZWZlcmVuY2VzLmluZGV4T2YoY3VycmVudFRhcmdldCk7XG4gICAgc2luZ2xldG9uLnNob3cocmVmZXJlbmNlc1tpbmRleCArIDFdIHx8IGZpcnN0KTtcbiAgfTtcblxuICBzaW5nbGV0b24uc2hvd1ByZXZpb3VzID0gKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGxhc3QgPSByZWZlcmVuY2VzW3JlZmVyZW5jZXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKCFjdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm4gc2luZ2xldG9uLnNob3cobGFzdCk7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gcmVmZXJlbmNlcy5pbmRleE9mKGN1cnJlbnRUYXJnZXQpO1xuICAgIGNvbnN0IHRhcmdldCA9IHJlZmVyZW5jZXNbaW5kZXggLSAxXSB8fCBsYXN0O1xuICAgIHNpbmdsZXRvbi5zaG93KHRhcmdldCk7XG4gIH07XG5cbiAgY29uc3Qgb3JpZ2luYWxTZXRQcm9wcyA9IHNpbmdsZXRvbi5zZXRQcm9wcztcblxuICBzaW5nbGV0b24uc2V0UHJvcHMgPSAocHJvcHMpOiB2b2lkID0+IHtcbiAgICBvdmVycmlkZXMgPSBwcm9wcy5vdmVycmlkZXMgfHwgb3ZlcnJpZGVzO1xuICAgIG9yaWdpbmFsU2V0UHJvcHMocHJvcHMpO1xuICB9O1xuXG4gIHNpbmdsZXRvbi5zZXRJbnN0YW5jZXMgPSAobmV4dEluc3RhbmNlcyk6IHZvaWQgPT4ge1xuICAgIGVuYWJsZUluc3RhbmNlcyh0cnVlKTtcbiAgICBpbnRlcmNlcHRTZXRQcm9wc0NsZWFudXBzLmZvckVhY2goKGZuKSA9PiBmbigpKTtcblxuICAgIGluZGl2aWR1YWxJbnN0YW5jZXMgPSBuZXh0SW5zdGFuY2VzO1xuXG4gICAgZW5hYmxlSW5zdGFuY2VzKGZhbHNlKTtcbiAgICBzZXRSZWZlcmVuY2VzKCk7XG4gICAgc2V0VHJpZ2dlclRhcmdldHMoKTtcbiAgICBpbnRlcmNlcHRTZXRQcm9wc0NsZWFudXBzID0gaW50ZXJjZXB0U2V0UHJvcHMoc2luZ2xldG9uKTtcblxuICAgIHNpbmdsZXRvbi5zZXRQcm9wcyh7dHJpZ2dlclRhcmdldDogdHJpZ2dlclRhcmdldHN9KTtcbiAgfTtcblxuICBpbnRlcmNlcHRTZXRQcm9wc0NsZWFudXBzID0gaW50ZXJjZXB0U2V0UHJvcHMoc2luZ2xldG9uKTtcblxuICByZXR1cm4gc2luZ2xldG9uO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU2luZ2xldG9uO1xuIiwgImltcG9ydCB0aXBweSBmcm9tICcuLic7XG5pbXBvcnQge1RPVUNIX09QVElPTlN9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQge2RlZmF1bHRQcm9wc30gZnJvbSAnLi4vcHJvcHMnO1xuaW1wb3J0IHtJbnN0YW5jZSwgUHJvcHMsIFRhcmdldHN9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7TGlzdGVuZXJPYmplY3R9IGZyb20gJy4uL3R5cGVzLWludGVybmFsJztcbmltcG9ydCB7bm9ybWFsaXplVG9BcnJheSwgcmVtb3ZlUHJvcGVydGllc30gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHtlcnJvcldoZW59IGZyb20gJy4uL3ZhbGlkYXRpb24nO1xuXG5jb25zdCBCVUJCTElOR19FVkVOVFNfTUFQID0ge1xuICBtb3VzZW92ZXI6ICdtb3VzZWVudGVyJyxcbiAgZm9jdXNpbjogJ2ZvY3VzJyxcbiAgY2xpY2s6ICdjbGljaycsXG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWxlZ2F0ZSBpbnN0YW5jZSB0aGF0IGNvbnRyb2xzIHRoZSBjcmVhdGlvbiBvZiB0aXBweSBpbnN0YW5jZXNcbiAqIGZvciBjaGlsZCBlbGVtZW50cyAoYHRhcmdldGAgQ1NTIHNlbGVjdG9yKS5cbiAqL1xuZnVuY3Rpb24gZGVsZWdhdGUoXG4gIHRhcmdldHM6IFRhcmdldHMsXG4gIHByb3BzOiBQYXJ0aWFsPFByb3BzPiAmIHt0YXJnZXQ6IHN0cmluZ31cbik6IEluc3RhbmNlIHwgSW5zdGFuY2VbXSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChfX0RFVl9fKSB7XG4gICAgZXJyb3JXaGVuKFxuICAgICAgIShwcm9wcyAmJiBwcm9wcy50YXJnZXQpLFxuICAgICAgW1xuICAgICAgICAnWW91IG11c3Qgc3BlY2l0eSBhIGB0YXJnZXRgIHByb3AgaW5kaWNhdGluZyBhIENTUyBzZWxlY3RvciBzdHJpbmcgbWF0Y2hpbmcnLFxuICAgICAgICAndGhlIHRhcmdldCBlbGVtZW50cyB0aGF0IHNob3VsZCByZWNlaXZlIGEgdGlwcHkuJyxcbiAgICAgIF0uam9pbignICcpXG4gICAgKTtcbiAgfVxuXG4gIGxldCBsaXN0ZW5lcnM6IExpc3RlbmVyT2JqZWN0W10gPSBbXTtcbiAgbGV0IGNoaWxkVGlwcHlJbnN0YW5jZXM6IEluc3RhbmNlW10gPSBbXTtcbiAgbGV0IGRpc2FibGVkID0gZmFsc2U7XG5cbiAgY29uc3Qge3RhcmdldH0gPSBwcm9wcztcblxuICBjb25zdCBuYXRpdmVQcm9wcyA9IHJlbW92ZVByb3BlcnRpZXMocHJvcHMsIFsndGFyZ2V0J10pO1xuICBjb25zdCBwYXJlbnRQcm9wcyA9IHsuLi5uYXRpdmVQcm9wcywgdHJpZ2dlcjogJ21hbnVhbCcsIHRvdWNoOiBmYWxzZX07XG4gIGNvbnN0IGNoaWxkUHJvcHMgPSB7XG4gICAgdG91Y2g6IGRlZmF1bHRQcm9wcy50b3VjaCxcbiAgICAuLi5uYXRpdmVQcm9wcyxcbiAgICBzaG93T25DcmVhdGU6IHRydWUsXG4gIH07XG5cbiAgY29uc3QgcmV0dXJuVmFsdWUgPSB0aXBweSh0YXJnZXRzLCBwYXJlbnRQcm9wcyk7XG4gIGNvbnN0IG5vcm1hbGl6ZWRSZXR1cm5WYWx1ZSA9IG5vcm1hbGl6ZVRvQXJyYXkocmV0dXJuVmFsdWUpO1xuXG4gIGZ1bmN0aW9uIG9uVHJpZ2dlcihldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIWV2ZW50LnRhcmdldCB8fCBkaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldE5vZGUgPSAoZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnQpLmNsb3Nlc3QodGFyZ2V0KTtcblxuICAgIGlmICghdGFyZ2V0Tm9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdldCByZWxldmFudCB0cmlnZ2VyIHdpdGggZmFsbGJhY2tzOlxuICAgIC8vIDEuIENoZWNrIGBkYXRhLXRpcHB5LXRyaWdnZXJgIGF0dHJpYnV0ZSBvbiB0YXJnZXQgbm9kZVxuICAgIC8vIDIuIEZhbGxiYWNrIHRvIGB0cmlnZ2VyYCBwYXNzZWQgdG8gYGRlbGVnYXRlKClgXG4gICAgLy8gMy4gRmFsbGJhY2sgdG8gYGRlZmF1bHRQcm9wcy50cmlnZ2VyYFxuICAgIGNvbnN0IHRyaWdnZXIgPVxuICAgICAgdGFyZ2V0Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGlwcHktdHJpZ2dlcicpIHx8XG4gICAgICBwcm9wcy50cmlnZ2VyIHx8XG4gICAgICBkZWZhdWx0UHJvcHMudHJpZ2dlcjtcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodGFyZ2V0Tm9kZS5fdGlwcHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnICYmIHR5cGVvZiBjaGlsZFByb3BzLnRvdWNoID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBldmVudC50eXBlICE9PSAndG91Y2hzdGFydCcgJiZcbiAgICAgIHRyaWdnZXIuaW5kZXhPZigoQlVCQkxJTkdfRVZFTlRTX01BUCBhcyBhbnkpW2V2ZW50LnR5cGVdKSA8IDBcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbnN0YW5jZSA9IHRpcHB5KHRhcmdldE5vZGUsIGNoaWxkUHJvcHMpO1xuXG4gICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICBjaGlsZFRpcHB5SW5zdGFuY2VzID0gY2hpbGRUaXBweUluc3RhbmNlcy5jb25jYXQoaW5zdGFuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uKFxuICAgIG5vZGU6IEVsZW1lbnQsXG4gICAgZXZlbnRUeXBlOiBzdHJpbmcsXG4gICAgaGFuZGxlcjogRXZlbnRMaXN0ZW5lcixcbiAgICBvcHRpb25zOiBib29sZWFuIHwgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSBmYWxzZVxuICApOiB2b2lkIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7bm9kZSwgZXZlbnRUeXBlLCBoYW5kbGVyLCBvcHRpb25zfSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyhpbnN0YW5jZTogSW5zdGFuY2UpOiB2b2lkIHtcbiAgICBjb25zdCB7cmVmZXJlbmNlfSA9IGluc3RhbmNlO1xuXG4gICAgb24ocmVmZXJlbmNlLCAndG91Y2hzdGFydCcsIG9uVHJpZ2dlciwgVE9VQ0hfT1BUSU9OUyk7XG4gICAgb24ocmVmZXJlbmNlLCAnbW91c2VvdmVyJywgb25UcmlnZ2VyKTtcbiAgICBvbihyZWZlcmVuY2UsICdmb2N1c2luJywgb25UcmlnZ2VyKTtcbiAgICBvbihyZWZlcmVuY2UsICdjbGljaycsIG9uVHJpZ2dlcik7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoe25vZGUsIGV2ZW50VHlwZSwgaGFuZGxlciwgb3B0aW9uc306IExpc3RlbmVyT2JqZWN0KSA9PiB7XG4gICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgICBsaXN0ZW5lcnMgPSBbXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGx5TXV0YXRpb25zKGluc3RhbmNlOiBJbnN0YW5jZSk6IHZvaWQge1xuICAgIGNvbnN0IG9yaWdpbmFsRGVzdHJveSA9IGluc3RhbmNlLmRlc3Ryb3k7XG4gICAgY29uc3Qgb3JpZ2luYWxFbmFibGUgPSBpbnN0YW5jZS5lbmFibGU7XG4gICAgY29uc3Qgb3JpZ2luYWxEaXNhYmxlID0gaW5zdGFuY2UuZGlzYWJsZTtcblxuICAgIGluc3RhbmNlLmRlc3Ryb3kgPSAoc2hvdWxkRGVzdHJveUNoaWxkSW5zdGFuY2VzID0gdHJ1ZSk6IHZvaWQgPT4ge1xuICAgICAgaWYgKHNob3VsZERlc3Ryb3lDaGlsZEluc3RhbmNlcykge1xuICAgICAgICBjaGlsZFRpcHB5SW5zdGFuY2VzLmZvckVhY2goKGluc3RhbmNlKSA9PiB7XG4gICAgICAgICAgaW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2hpbGRUaXBweUluc3RhbmNlcyA9IFtdO1xuXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgICAgb3JpZ2luYWxEZXN0cm95KCk7XG4gICAgfTtcblxuICAgIGluc3RhbmNlLmVuYWJsZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgIG9yaWdpbmFsRW5hYmxlKCk7XG4gICAgICBjaGlsZFRpcHB5SW5zdGFuY2VzLmZvckVhY2goKGluc3RhbmNlKSA9PiBpbnN0YW5jZS5lbmFibGUoKSk7XG4gICAgICBkaXNhYmxlZCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBpbnN0YW5jZS5kaXNhYmxlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgb3JpZ2luYWxEaXNhYmxlKCk7XG4gICAgICBjaGlsZFRpcHB5SW5zdGFuY2VzLmZvckVhY2goKGluc3RhbmNlKSA9PiBpbnN0YW5jZS5kaXNhYmxlKCkpO1xuICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBhZGRFdmVudExpc3RlbmVycyhpbnN0YW5jZSk7XG4gIH1cblxuICBub3JtYWxpemVkUmV0dXJuVmFsdWUuZm9yRWFjaChhcHBseU11dGF0aW9ucyk7XG5cbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBkZWxlZ2F0ZTtcbiIsICJpbXBvcnQge0JBQ0tEUk9QX0NMQVNTfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHtkaXYsIHNldFZpc2liaWxpdHlTdGF0ZX0gZnJvbSAnLi4vZG9tLXV0aWxzJztcbmltcG9ydCB7Z2V0Q2hpbGRyZW59IGZyb20gJy4uL3RlbXBsYXRlJztcbmltcG9ydCB7QW5pbWF0ZUZpbGx9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7ZXJyb3JXaGVufSBmcm9tICcuLi92YWxpZGF0aW9uJztcblxuY29uc3QgYW5pbWF0ZUZpbGw6IEFuaW1hdGVGaWxsID0ge1xuICBuYW1lOiAnYW5pbWF0ZUZpbGwnLFxuICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICBmbihpbnN0YW5jZSkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoIWluc3RhbmNlLnByb3BzLnJlbmRlcj8uJCR0aXBweSkge1xuICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgZXJyb3JXaGVuKFxuICAgICAgICAgIGluc3RhbmNlLnByb3BzLmFuaW1hdGVGaWxsLFxuICAgICAgICAgICdUaGUgYGFuaW1hdGVGaWxsYCBwbHVnaW4gcmVxdWlyZXMgdGhlIGRlZmF1bHQgcmVuZGVyIGZ1bmN0aW9uLidcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIGNvbnN0IHtib3gsIGNvbnRlbnR9ID0gZ2V0Q2hpbGRyZW4oaW5zdGFuY2UucG9wcGVyKTtcblxuICAgIGNvbnN0IGJhY2tkcm9wID0gaW5zdGFuY2UucHJvcHMuYW5pbWF0ZUZpbGxcbiAgICAgID8gY3JlYXRlQmFja2Ryb3BFbGVtZW50KClcbiAgICAgIDogbnVsbDtcblxuICAgIHJldHVybiB7XG4gICAgICBvbkNyZWF0ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKGJhY2tkcm9wKSB7XG4gICAgICAgICAgYm94Lmluc2VydEJlZm9yZShiYWNrZHJvcCwgYm94LmZpcnN0RWxlbWVudENoaWxkISk7XG4gICAgICAgICAgYm94LnNldEF0dHJpYnV0ZSgnZGF0YS1hbmltYXRlZmlsbCcsICcnKTtcbiAgICAgICAgICBib3guc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAgICAgICAgIGluc3RhbmNlLnNldFByb3BzKHthcnJvdzogZmFsc2UsIGFuaW1hdGlvbjogJ3NoaWZ0LWF3YXknfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbk1vdW50KCk6IHZvaWQge1xuICAgICAgICBpZiAoYmFja2Ryb3ApIHtcbiAgICAgICAgICBjb25zdCB7dHJhbnNpdGlvbkR1cmF0aW9ufSA9IGJveC5zdHlsZTtcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE51bWJlcih0cmFuc2l0aW9uRHVyYXRpb24ucmVwbGFjZSgnbXMnLCAnJykpO1xuXG4gICAgICAgICAgLy8gVGhlIGNvbnRlbnQgc2hvdWxkIGZhZGUgaW4gYWZ0ZXIgdGhlIGJhY2tkcm9wIGhhcyBtb3N0bHkgZmlsbGVkIHRoZVxuICAgICAgICAgIC8vIHRvb2x0aXAgZWxlbWVudC4gYGNsaXAtcGF0aGAgaXMgdGhlIG90aGVyIGFsdGVybmF0aXZlIGJ1dCBpcyBub3RcbiAgICAgICAgICAvLyB3ZWxsLXN1cHBvcnRlZCBhbmQgaXMgYnVnZ3kgb24gc29tZSBkZXZpY2VzLlxuICAgICAgICAgIGNvbnRlbnQuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gYCR7TWF0aC5yb3VuZChkdXJhdGlvbiAvIDEwKX1tc2A7XG5cbiAgICAgICAgICBiYWNrZHJvcC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSB0cmFuc2l0aW9uRHVyYXRpb247XG4gICAgICAgICAgc2V0VmlzaWJpbGl0eVN0YXRlKFtiYWNrZHJvcF0sICd2aXNpYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblNob3coKTogdm9pZCB7XG4gICAgICAgIGlmIChiYWNrZHJvcCkge1xuICAgICAgICAgIGJhY2tkcm9wLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwbXMnO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25IaWRlKCk6IHZvaWQge1xuICAgICAgICBpZiAoYmFja2Ryb3ApIHtcbiAgICAgICAgICBzZXRWaXNpYmlsaXR5U3RhdGUoW2JhY2tkcm9wXSwgJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBhbmltYXRlRmlsbDtcblxuZnVuY3Rpb24gY3JlYXRlQmFja2Ryb3BFbGVtZW50KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgYmFja2Ryb3AgPSBkaXYoKTtcbiAgYmFja2Ryb3AuY2xhc3NOYW1lID0gQkFDS0RST1BfQ0xBU1M7XG4gIHNldFZpc2liaWxpdHlTdGF0ZShbYmFja2Ryb3BdLCAnaGlkZGVuJyk7XG4gIHJldHVybiBiYWNrZHJvcDtcbn1cbiIsICJpbXBvcnQge2dldE93bmVyRG9jdW1lbnQsIGlzTW91c2VFdmVudH0gZnJvbSAnLi4vZG9tLXV0aWxzJztcbmltcG9ydCB7Rm9sbG93Q3Vyc29yLCBJbnN0YW5jZX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5sZXQgbW91c2VDb29yZHMgPSB7Y2xpZW50WDogMCwgY2xpZW50WTogMH07XG5sZXQgYWN0aXZlSW5zdGFuY2VzOiBBcnJheTx7aW5zdGFuY2U6IEluc3RhbmNlOyBkb2M6IERvY3VtZW50fT4gPSBbXTtcblxuZnVuY3Rpb24gc3RvcmVNb3VzZUNvb3Jkcyh7Y2xpZW50WCwgY2xpZW50WX06IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgbW91c2VDb29yZHMgPSB7Y2xpZW50WCwgY2xpZW50WX07XG59XG5cbmZ1bmN0aW9uIGFkZE1vdXNlQ29vcmRzTGlzdGVuZXIoZG9jOiBEb2N1bWVudCk6IHZvaWQge1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgc3RvcmVNb3VzZUNvb3Jkcyk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU1vdXNlQ29vcmRzTGlzdGVuZXIoZG9jOiBEb2N1bWVudCk6IHZvaWQge1xuICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgc3RvcmVNb3VzZUNvb3Jkcyk7XG59XG5cbmNvbnN0IGZvbGxvd0N1cnNvcjogRm9sbG93Q3Vyc29yID0ge1xuICBuYW1lOiAnZm9sbG93Q3Vyc29yJyxcbiAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgZm4oaW5zdGFuY2UpIHtcbiAgICBjb25zdCByZWZlcmVuY2UgPSBpbnN0YW5jZS5yZWZlcmVuY2U7XG4gICAgY29uc3QgZG9jID0gZ2V0T3duZXJEb2N1bWVudChpbnN0YW5jZS5wcm9wcy50cmlnZ2VyVGFyZ2V0IHx8IHJlZmVyZW5jZSk7XG5cbiAgICBsZXQgaXNJbnRlcm5hbFVwZGF0ZSA9IGZhbHNlO1xuICAgIGxldCB3YXNGb2N1c0V2ZW50ID0gZmFsc2U7XG4gICAgbGV0IGlzVW5tb3VudGVkID0gdHJ1ZTtcbiAgICBsZXQgcHJldlByb3BzID0gaW5zdGFuY2UucHJvcHM7XG5cbiAgICBmdW5jdGlvbiBnZXRJc0luaXRpYWxCZWhhdmlvcigpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGluc3RhbmNlLnByb3BzLmZvbGxvd0N1cnNvciA9PT0gJ2luaXRpYWwnICYmIGluc3RhbmNlLnN0YXRlLmlzVmlzaWJsZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVuc2V0R2V0UmVmZXJlbmNlQ2xpZW50UmVjdCgpOiB2b2lkIHtcbiAgICAgIGlzSW50ZXJuYWxVcGRhdGUgPSB0cnVlO1xuICAgICAgaW5zdGFuY2Uuc2V0UHJvcHMoe2dldFJlZmVyZW5jZUNsaWVudFJlY3Q6IG51bGx9KTtcbiAgICAgIGlzSW50ZXJuYWxVcGRhdGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgICAgLy8gSWYgdGhlIGluc3RhbmNlIGlzIGludGVyYWN0aXZlLCBhdm9pZCB1cGRhdGluZyB0aGUgcG9zaXRpb24gdW5sZXNzIGl0J3NcbiAgICAgIC8vIG92ZXIgdGhlIHJlZmVyZW5jZSBlbGVtZW50XG4gICAgICBjb25zdCBpc0N1cnNvck92ZXJSZWZlcmVuY2UgPSBldmVudC50YXJnZXRcbiAgICAgICAgPyByZWZlcmVuY2UuY29udGFpbnMoZXZlbnQudGFyZ2V0IGFzIE5vZGUpXG4gICAgICAgIDogdHJ1ZTtcbiAgICAgIGNvbnN0IHtmb2xsb3dDdXJzb3J9ID0gaW5zdGFuY2UucHJvcHM7XG4gICAgICBjb25zdCB7Y2xpZW50WCwgY2xpZW50WX0gPSBldmVudDtcblxuICAgICAgY29uc3QgcmVjdCA9IHJlZmVyZW5jZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHJlbGF0aXZlWCA9IGNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICBjb25zdCByZWxhdGl2ZVkgPSBjbGllbnRZIC0gcmVjdC50b3A7XG5cbiAgICAgIGlmIChpc0N1cnNvck92ZXJSZWZlcmVuY2UgfHwgIWluc3RhbmNlLnByb3BzLmludGVyYWN0aXZlKSB7XG4gICAgICAgIGluc3RhbmNlLnNldFByb3BzKHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gdW5uZWVkZWQgRE9NUmVjdCBwcm9wZXJ0aWVzXG4gICAgICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSByZWZlcmVuY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgIGxldCB4ID0gY2xpZW50WDtcbiAgICAgICAgICAgIGxldCB5ID0gY2xpZW50WTtcblxuICAgICAgICAgICAgaWYgKGZvbGxvd0N1cnNvciA9PT0gJ2luaXRpYWwnKSB7XG4gICAgICAgICAgICAgIHggPSByZWN0LmxlZnQgKyByZWxhdGl2ZVg7XG4gICAgICAgICAgICAgIHkgPSByZWN0LnRvcCArIHJlbGF0aXZlWTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdG9wID0gZm9sbG93Q3Vyc29yID09PSAnaG9yaXpvbnRhbCcgPyByZWN0LnRvcCA6IHk7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGZvbGxvd0N1cnNvciA9PT0gJ3ZlcnRpY2FsJyA/IHJlY3QucmlnaHQgOiB4O1xuICAgICAgICAgICAgY29uc3QgYm90dG9tID0gZm9sbG93Q3Vyc29yID09PSAnaG9yaXpvbnRhbCcgPyByZWN0LmJvdHRvbSA6IHk7XG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gZm9sbG93Q3Vyc29yID09PSAndmVydGljYWwnID8gcmVjdC5sZWZ0IDogeDtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgd2lkdGg6IHJpZ2h0IC0gbGVmdCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBib3R0b20gLSB0b3AsXG4gICAgICAgICAgICAgIHRvcCxcbiAgICAgICAgICAgICAgcmlnaHQsXG4gICAgICAgICAgICAgIGJvdHRvbSxcbiAgICAgICAgICAgICAgbGVmdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlKCk6IHZvaWQge1xuICAgICAgaWYgKGluc3RhbmNlLnByb3BzLmZvbGxvd0N1cnNvcikge1xuICAgICAgICBhY3RpdmVJbnN0YW5jZXMucHVzaCh7aW5zdGFuY2UsIGRvY30pO1xuICAgICAgICBhZGRNb3VzZUNvb3Jkc0xpc3RlbmVyKGRvYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgIGFjdGl2ZUluc3RhbmNlcyA9IGFjdGl2ZUluc3RhbmNlcy5maWx0ZXIoXG4gICAgICAgIChkYXRhKSA9PiBkYXRhLmluc3RhbmNlICE9PSBpbnN0YW5jZVxuICAgICAgKTtcblxuICAgICAgaWYgKGFjdGl2ZUluc3RhbmNlcy5maWx0ZXIoKGRhdGEpID0+IGRhdGEuZG9jID09PSBkb2MpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVNb3VzZUNvb3Jkc0xpc3RlbmVyKGRvYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG9uQ3JlYXRlOiBjcmVhdGUsXG4gICAgICBvbkRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgICBvbkJlZm9yZVVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgcHJldlByb3BzID0gaW5zdGFuY2UucHJvcHM7XG4gICAgICB9LFxuICAgICAgb25BZnRlclVwZGF0ZShfLCB7Zm9sbG93Q3Vyc29yfSk6IHZvaWQge1xuICAgICAgICBpZiAoaXNJbnRlcm5hbFVwZGF0ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBmb2xsb3dDdXJzb3IgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIHByZXZQcm9wcy5mb2xsb3dDdXJzb3IgIT09IGZvbGxvd0N1cnNvclxuICAgICAgICApIHtcbiAgICAgICAgICBkZXN0cm95KCk7XG5cbiAgICAgICAgICBpZiAoZm9sbG93Q3Vyc29yKSB7XG4gICAgICAgICAgICBjcmVhdGUoKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBpbnN0YW5jZS5zdGF0ZS5pc01vdW50ZWQgJiZcbiAgICAgICAgICAgICAgIXdhc0ZvY3VzRXZlbnQgJiZcbiAgICAgICAgICAgICAgIWdldElzSW5pdGlhbEJlaGF2aW9yKClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBhZGRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdW5zZXRHZXRSZWZlcmVuY2VDbGllbnRSZWN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25Nb3VudCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKGluc3RhbmNlLnByb3BzLmZvbGxvd0N1cnNvciAmJiAhd2FzRm9jdXNFdmVudCkge1xuICAgICAgICAgIGlmIChpc1VubW91bnRlZCkge1xuICAgICAgICAgICAgb25Nb3VzZU1vdmUobW91c2VDb29yZHMgYXMgTW91c2VFdmVudCk7XG4gICAgICAgICAgICBpc1VubW91bnRlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZ2V0SXNJbml0aWFsQmVoYXZpb3IoKSkge1xuICAgICAgICAgICAgYWRkTGlzdGVuZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblRyaWdnZXIoXywgZXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTW91c2VFdmVudChldmVudCkpIHtcbiAgICAgICAgICBtb3VzZUNvb3JkcyA9IHtjbGllbnRYOiBldmVudC5jbGllbnRYLCBjbGllbnRZOiBldmVudC5jbGllbnRZfTtcbiAgICAgICAgfVxuICAgICAgICB3YXNGb2N1c0V2ZW50ID0gZXZlbnQudHlwZSA9PT0gJ2ZvY3VzJztcbiAgICAgIH0sXG4gICAgICBvbkhpZGRlbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKGluc3RhbmNlLnByb3BzLmZvbGxvd0N1cnNvcikge1xuICAgICAgICAgIHVuc2V0R2V0UmVmZXJlbmNlQ2xpZW50UmVjdCgpO1xuICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKCk7XG4gICAgICAgICAgaXNVbm1vdW50ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmb2xsb3dDdXJzb3I7XG4iLCAiaW1wb3J0IHtNb2RpZmllciwgUGxhY2VtZW50fSBmcm9tICdAcG9wcGVyanMvY29yZSc7XG5pbXBvcnQge2lzTW91c2VFdmVudH0gZnJvbSAnLi4vZG9tLXV0aWxzJztcbmltcG9ydCB7QmFzZVBsYWNlbWVudCwgSW5saW5lUG9zaXRpb25pbmcsIFByb3BzfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge2FycmF5RnJvbSwgZ2V0QmFzZVBsYWNlbWVudH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5mdW5jdGlvbiBnZXRQcm9wcyhwcm9wczogUHJvcHMsIG1vZGlmaWVyOiBNb2RpZmllcjxhbnksIGFueT4pOiBQYXJ0aWFsPFByb3BzPiB7XG4gIHJldHVybiB7XG4gICAgcG9wcGVyT3B0aW9uczoge1xuICAgICAgLi4ucHJvcHMucG9wcGVyT3B0aW9ucyxcbiAgICAgIG1vZGlmaWVyczogW1xuICAgICAgICAuLi4ocHJvcHMucG9wcGVyT3B0aW9ucz8ubW9kaWZpZXJzIHx8IFtdKS5maWx0ZXIoXG4gICAgICAgICAgKHtuYW1lfSkgPT4gbmFtZSAhPT0gbW9kaWZpZXIubmFtZVxuICAgICAgICApLFxuICAgICAgICBtb2RpZmllcixcbiAgICAgIF0sXG4gICAgfSxcbiAgfTtcbn1cblxuY29uc3QgaW5saW5lUG9zaXRpb25pbmc6IElubGluZVBvc2l0aW9uaW5nID0ge1xuICBuYW1lOiAnaW5saW5lUG9zaXRpb25pbmcnLFxuICBkZWZhdWx0VmFsdWU6IGZhbHNlLFxuICBmbihpbnN0YW5jZSkge1xuICAgIGNvbnN0IHtyZWZlcmVuY2V9ID0gaW5zdGFuY2U7XG5cbiAgICBmdW5jdGlvbiBpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gISFpbnN0YW5jZS5wcm9wcy5pbmxpbmVQb3NpdGlvbmluZztcbiAgICB9XG5cbiAgICBsZXQgcGxhY2VtZW50OiBQbGFjZW1lbnQ7XG4gICAgbGV0IGN1cnNvclJlY3RJbmRleCA9IC0xO1xuICAgIGxldCBpc0ludGVybmFsVXBkYXRlID0gZmFsc2U7XG4gICAgbGV0IHRyaWVkUGxhY2VtZW50czogQXJyYXk8c3RyaW5nPiA9IFtdO1xuXG4gICAgY29uc3QgbW9kaWZpZXI6IE1vZGlmaWVyPFxuICAgICAgJ3RpcHB5SW5saW5lUG9zaXRpb25pbmcnLFxuICAgICAgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICA+ID0ge1xuICAgICAgbmFtZTogJ3RpcHB5SW5saW5lUG9zaXRpb25pbmcnLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIHBoYXNlOiAnYWZ0ZXJXcml0ZScsXG4gICAgICBmbih7c3RhdGV9KSB7XG4gICAgICAgIGlmIChpc0VuYWJsZWQoKSkge1xuICAgICAgICAgIGlmICh0cmllZFBsYWNlbWVudHMuaW5kZXhPZihzdGF0ZS5wbGFjZW1lbnQpICE9PSAtMSkge1xuICAgICAgICAgICAgdHJpZWRQbGFjZW1lbnRzID0gW107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxhY2VtZW50ICE9PSBzdGF0ZS5wbGFjZW1lbnQgJiZcbiAgICAgICAgICAgIHRyaWVkUGxhY2VtZW50cy5pbmRleE9mKHN0YXRlLnBsYWNlbWVudCkgPT09IC0xXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0cmllZFBsYWNlbWVudHMucHVzaChzdGF0ZS5wbGFjZW1lbnQpO1xuICAgICAgICAgICAgaW5zdGFuY2Uuc2V0UHJvcHMoe1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIC0gdW5uZWVkZWQgRE9NUmVjdCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgIGdldFJlZmVyZW5jZUNsaWVudFJlY3Q6ICgpID0+XG4gICAgICAgICAgICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdChzdGF0ZS5wbGFjZW1lbnQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcGxhY2VtZW50ID0gc3RhdGUucGxhY2VtZW50O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRSZWZlcmVuY2VDbGllbnRSZWN0KHBsYWNlbWVudDogUGxhY2VtZW50KTogUGFydGlhbDxET01SZWN0PiB7XG4gICAgICByZXR1cm4gZ2V0SW5saW5lQm91bmRpbmdDbGllbnRSZWN0KFxuICAgICAgICBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCksXG4gICAgICAgIHJlZmVyZW5jZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgYXJyYXlGcm9tKHJlZmVyZW5jZS5nZXRDbGllbnRSZWN0cygpKSxcbiAgICAgICAgY3Vyc29yUmVjdEluZGV4XG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEludGVybmFsUHJvcHMocGFydGlhbFByb3BzOiBQYXJ0aWFsPFByb3BzPik6IHZvaWQge1xuICAgICAgaXNJbnRlcm5hbFVwZGF0ZSA9IHRydWU7XG4gICAgICBpbnN0YW5jZS5zZXRQcm9wcyhwYXJ0aWFsUHJvcHMpO1xuICAgICAgaXNJbnRlcm5hbFVwZGF0ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZE1vZGlmaWVyKCk6IHZvaWQge1xuICAgICAgaWYgKCFpc0ludGVybmFsVXBkYXRlKSB7XG4gICAgICAgIHNldEludGVybmFsUHJvcHMoZ2V0UHJvcHMoaW5zdGFuY2UucHJvcHMsIG1vZGlmaWVyKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG9uQ3JlYXRlOiBhZGRNb2RpZmllcixcbiAgICAgIG9uQWZ0ZXJVcGRhdGU6IGFkZE1vZGlmaWVyLFxuICAgICAgb25UcmlnZ2VyKF8sIGV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmIChpc01vdXNlRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgY29uc3QgcmVjdHMgPSBhcnJheUZyb20oaW5zdGFuY2UucmVmZXJlbmNlLmdldENsaWVudFJlY3RzKCkpO1xuICAgICAgICAgIGNvbnN0IGN1cnNvclJlY3QgPSByZWN0cy5maW5kKFxuICAgICAgICAgICAgKHJlY3QpID0+XG4gICAgICAgICAgICAgIHJlY3QubGVmdCAtIDIgPD0gZXZlbnQuY2xpZW50WCAmJlxuICAgICAgICAgICAgICByZWN0LnJpZ2h0ICsgMiA+PSBldmVudC5jbGllbnRYICYmXG4gICAgICAgICAgICAgIHJlY3QudG9wIC0gMiA8PSBldmVudC5jbGllbnRZICYmXG4gICAgICAgICAgICAgIHJlY3QuYm90dG9tICsgMiA+PSBldmVudC5jbGllbnRZXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHJlY3RzLmluZGV4T2YoY3Vyc29yUmVjdCk7XG4gICAgICAgICAgY3Vyc29yUmVjdEluZGV4ID0gaW5kZXggPiAtMSA/IGluZGV4IDogY3Vyc29yUmVjdEluZGV4O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25IaWRkZW4oKTogdm9pZCB7XG4gICAgICAgIGN1cnNvclJlY3RJbmRleCA9IC0xO1xuICAgICAgfSxcbiAgICB9O1xuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5saW5lUG9zaXRpb25pbmc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmxpbmVCb3VuZGluZ0NsaWVudFJlY3QoXG4gIGN1cnJlbnRCYXNlUGxhY2VtZW50OiBCYXNlUGxhY2VtZW50IHwgbnVsbCxcbiAgYm91bmRpbmdSZWN0OiBET01SZWN0LFxuICBjbGllbnRSZWN0czogRE9NUmVjdFtdLFxuICBjdXJzb3JSZWN0SW5kZXg6IG51bWJlclxuKToge1xuICB0b3A6IG51bWJlcjtcbiAgYm90dG9tOiBudW1iZXI7XG4gIGxlZnQ6IG51bWJlcjtcbiAgcmlnaHQ6IG51bWJlcjtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG59IHtcbiAgLy8gTm90IGFuIGlubGluZSBlbGVtZW50LCBvciBwbGFjZW1lbnQgaXMgbm90IHlldCBrbm93blxuICBpZiAoY2xpZW50UmVjdHMubGVuZ3RoIDwgMiB8fCBjdXJyZW50QmFzZVBsYWNlbWVudCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBib3VuZGluZ1JlY3Q7XG4gIH1cblxuICAvLyBUaGVyZSBhcmUgdHdvIHJlY3RzIGFuZCB0aGV5IGFyZSBkaXNqb2luZWRcbiAgaWYgKFxuICAgIGNsaWVudFJlY3RzLmxlbmd0aCA9PT0gMiAmJlxuICAgIGN1cnNvclJlY3RJbmRleCA+PSAwICYmXG4gICAgY2xpZW50UmVjdHNbMF0ubGVmdCA+IGNsaWVudFJlY3RzWzFdLnJpZ2h0XG4gICkge1xuICAgIHJldHVybiBjbGllbnRSZWN0c1tjdXJzb3JSZWN0SW5kZXhdIHx8IGJvdW5kaW5nUmVjdDtcbiAgfVxuXG4gIHN3aXRjaCAoY3VycmVudEJhc2VQbGFjZW1lbnQpIHtcbiAgICBjYXNlICd0b3AnOlxuICAgIGNhc2UgJ2JvdHRvbSc6IHtcbiAgICAgIGNvbnN0IGZpcnN0UmVjdCA9IGNsaWVudFJlY3RzWzBdO1xuICAgICAgY29uc3QgbGFzdFJlY3QgPSBjbGllbnRSZWN0c1tjbGllbnRSZWN0cy5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IGlzVG9wID0gY3VycmVudEJhc2VQbGFjZW1lbnQgPT09ICd0b3AnO1xuXG4gICAgICBjb25zdCB0b3AgPSBmaXJzdFJlY3QudG9wO1xuICAgICAgY29uc3QgYm90dG9tID0gbGFzdFJlY3QuYm90dG9tO1xuICAgICAgY29uc3QgbGVmdCA9IGlzVG9wID8gZmlyc3RSZWN0LmxlZnQgOiBsYXN0UmVjdC5sZWZ0O1xuICAgICAgY29uc3QgcmlnaHQgPSBpc1RvcCA/IGZpcnN0UmVjdC5yaWdodCA6IGxhc3RSZWN0LnJpZ2h0O1xuICAgICAgY29uc3Qgd2lkdGggPSByaWdodCAtIGxlZnQ7XG4gICAgICBjb25zdCBoZWlnaHQgPSBib3R0b20gLSB0b3A7XG5cbiAgICAgIHJldHVybiB7dG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0LCB3aWR0aCwgaGVpZ2h0fTtcbiAgICB9XG4gICAgY2FzZSAnbGVmdCc6XG4gICAgY2FzZSAncmlnaHQnOiB7XG4gICAgICBjb25zdCBtaW5MZWZ0ID0gTWF0aC5taW4oLi4uY2xpZW50UmVjdHMubWFwKChyZWN0cykgPT4gcmVjdHMubGVmdCkpO1xuICAgICAgY29uc3QgbWF4UmlnaHQgPSBNYXRoLm1heCguLi5jbGllbnRSZWN0cy5tYXAoKHJlY3RzKSA9PiByZWN0cy5yaWdodCkpO1xuICAgICAgY29uc3QgbWVhc3VyZVJlY3RzID0gY2xpZW50UmVjdHMuZmlsdGVyKChyZWN0KSA9PlxuICAgICAgICBjdXJyZW50QmFzZVBsYWNlbWVudCA9PT0gJ2xlZnQnXG4gICAgICAgICAgPyByZWN0LmxlZnQgPT09IG1pbkxlZnRcbiAgICAgICAgICA6IHJlY3QucmlnaHQgPT09IG1heFJpZ2h0XG4gICAgICApO1xuXG4gICAgICBjb25zdCB0b3AgPSBtZWFzdXJlUmVjdHNbMF0udG9wO1xuICAgICAgY29uc3QgYm90dG9tID0gbWVhc3VyZVJlY3RzW21lYXN1cmVSZWN0cy5sZW5ndGggLSAxXS5ib3R0b207XG4gICAgICBjb25zdCBsZWZ0ID0gbWluTGVmdDtcbiAgICAgIGNvbnN0IHJpZ2h0ID0gbWF4UmlnaHQ7XG4gICAgICBjb25zdCB3aWR0aCA9IHJpZ2h0IC0gbGVmdDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGJvdHRvbSAtIHRvcDtcblxuICAgICAgcmV0dXJuIHt0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQsIHdpZHRoLCBoZWlnaHR9O1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gYm91bmRpbmdSZWN0O1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7VmlydHVhbEVsZW1lbnR9IGZyb20gJ0Bwb3BwZXJqcy9jb3JlJztcbmltcG9ydCB7UmVmZXJlbmNlRWxlbWVudCwgU3RpY2t5fSBmcm9tICcuLi90eXBlcyc7XG5cbmNvbnN0IHN0aWNreTogU3RpY2t5ID0ge1xuICBuYW1lOiAnc3RpY2t5JyxcbiAgZGVmYXVsdFZhbHVlOiBmYWxzZSxcbiAgZm4oaW5zdGFuY2UpIHtcbiAgICBjb25zdCB7cmVmZXJlbmNlLCBwb3BwZXJ9ID0gaW5zdGFuY2U7XG5cbiAgICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UoKTogUmVmZXJlbmNlRWxlbWVudCB8IFZpcnR1YWxFbGVtZW50IHtcbiAgICAgIHJldHVybiBpbnN0YW5jZS5wb3BwZXJJbnN0YW5jZVxuICAgICAgICA/IGluc3RhbmNlLnBvcHBlckluc3RhbmNlLnN0YXRlLmVsZW1lbnRzLnJlZmVyZW5jZVxuICAgICAgICA6IHJlZmVyZW5jZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG91bGRDaGVjayh2YWx1ZTogJ3JlZmVyZW5jZScgfCAncG9wcGVyJyk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIGluc3RhbmNlLnByb3BzLnN0aWNreSA9PT0gdHJ1ZSB8fCBpbnN0YW5jZS5wcm9wcy5zdGlja3kgPT09IHZhbHVlO1xuICAgIH1cblxuICAgIGxldCBwcmV2UmVmUmVjdDogQ2xpZW50UmVjdCB8IG51bGwgPSBudWxsO1xuICAgIGxldCBwcmV2UG9wUmVjdDogQ2xpZW50UmVjdCB8IG51bGwgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oKTogdm9pZCB7XG4gICAgICBjb25zdCBjdXJyZW50UmVmUmVjdCA9IHNob3VsZENoZWNrKCdyZWZlcmVuY2UnKVxuICAgICAgICA/IGdldFJlZmVyZW5jZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIDogbnVsbDtcbiAgICAgIGNvbnN0IGN1cnJlbnRQb3BSZWN0ID0gc2hvdWxkQ2hlY2soJ3BvcHBlcicpXG4gICAgICAgID8gcG9wcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIDogbnVsbDtcblxuICAgICAgaWYgKFxuICAgICAgICAoY3VycmVudFJlZlJlY3QgJiYgYXJlUmVjdHNEaWZmZXJlbnQocHJldlJlZlJlY3QsIGN1cnJlbnRSZWZSZWN0KSkgfHxcbiAgICAgICAgKGN1cnJlbnRQb3BSZWN0ICYmIGFyZVJlY3RzRGlmZmVyZW50KHByZXZQb3BSZWN0LCBjdXJyZW50UG9wUmVjdCkpXG4gICAgICApIHtcbiAgICAgICAgaWYgKGluc3RhbmNlLnBvcHBlckluc3RhbmNlKSB7XG4gICAgICAgICAgaW5zdGFuY2UucG9wcGVySW5zdGFuY2UudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcHJldlJlZlJlY3QgPSBjdXJyZW50UmVmUmVjdDtcbiAgICAgIHByZXZQb3BSZWN0ID0gY3VycmVudFBvcFJlY3Q7XG5cbiAgICAgIGlmIChpbnN0YW5jZS5zdGF0ZS5pc01vdW50ZWQpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZVBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb25Nb3VudCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKGluc3RhbmNlLnByb3BzLnN0aWNreSkge1xuICAgICAgICAgIHVwZGF0ZVBvc2l0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHN0aWNreTtcblxuZnVuY3Rpb24gYXJlUmVjdHNEaWZmZXJlbnQoXG4gIHJlY3RBOiBDbGllbnRSZWN0IHwgbnVsbCxcbiAgcmVjdEI6IENsaWVudFJlY3QgfCBudWxsXG4pOiBib29sZWFuIHtcbiAgaWYgKHJlY3RBICYmIHJlY3RCKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHJlY3RBLnRvcCAhPT0gcmVjdEIudG9wIHx8XG4gICAgICByZWN0QS5yaWdodCAhPT0gcmVjdEIucmlnaHQgfHxcbiAgICAgIHJlY3RBLmJvdHRvbSAhPT0gcmVjdEIuYm90dG9tIHx8XG4gICAgICByZWN0QS5sZWZ0ICE9PSByZWN0Qi5sZWZ0XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIiwgImltcG9ydCB0aXBweSBmcm9tICcuLi9zcmMnO1xuaW1wb3J0IHtyZW5kZXJ9IGZyb20gJy4uL3NyYy90ZW1wbGF0ZSc7XG5cbnRpcHB5LnNldERlZmF1bHRQcm9wcyh7cmVuZGVyfSk7XG5cbmV4cG9ydCB7ZGVmYXVsdCwgaGlkZUFsbH0gZnJvbSAnLi4vc3JjJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBjcmVhdGVTaW5nbGV0b259IGZyb20gJy4uL3NyYy9hZGRvbnMvY3JlYXRlU2luZ2xldG9uJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBkZWxlZ2F0ZX0gZnJvbSAnLi4vc3JjL2FkZG9ucy9kZWxlZ2F0ZSc7XG5leHBvcnQge2RlZmF1bHQgYXMgYW5pbWF0ZUZpbGx9IGZyb20gJy4uL3NyYy9wbHVnaW5zL2FuaW1hdGVGaWxsJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBmb2xsb3dDdXJzb3J9IGZyb20gJy4uL3NyYy9wbHVnaW5zL2ZvbGxvd0N1cnNvcic7XG5leHBvcnQge2RlZmF1bHQgYXMgaW5saW5lUG9zaXRpb25pbmd9IGZyb20gJy4uL3NyYy9wbHVnaW5zL2lubGluZVBvc2l0aW9uaW5nJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBzdGlja3l9IGZyb20gJy4uL3NyYy9wbHVnaW5zL3N0aWNreSc7XG5leHBvcnQge1JPVU5EX0FSUk9XIGFzIHJvdW5kQXJyb3d9IGZyb20gJy4uL3NyYy9jb25zdGFudHMnO1xuIiwgImltcG9ydCBcInBob2VuaXhfaHRtbFwiO1xuaW1wb3J0IENoYXJ0IGZyb20gXCJjaGFydC5qcy9hdXRvXCI7XG5pbXBvcnQgeyBTb2NrZXQsIExvbmdQb2xsIH0gZnJvbSBcInBob2VuaXhcIjtcbmltcG9ydCB7IExpdmVTb2NrZXQgfSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIjtcbmltcG9ydCB0aXBweSwgeyByb3VuZEFycm93IH0gZnJvbSBcInRpcHB5LmpzXCI7XG5pbXBvcnQgdG9wYmFyIGZyb20gXCJ0b3BiYXJcIjtcblxuQ2hhcnQuZGVmYXVsdHMuZm9udC5zaXplID0gMTI7XG5DaGFydC5kZWZhdWx0cy5mb250LmZhbWlseSA9IFwiSW50ZXIgdmFyXCI7XG5cbi8vIFRvcGJhciAtLS1cblxubGV0IHRvcEJhclNjaGVkdWxlZCA9IHVuZGVmaW5lZDtcblxudG9wYmFyLmNvbmZpZyh7XG4gIGJhckNvbG9yczogeyAwOiBcIiMwMjg0YzdcIiB9LFxuICBzaGFkb3dDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIC4zKVwiLFxufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCAoaW5mbykgPT4ge1xuICBpZiAoIXRvcEJhclNjaGVkdWxlZCkge1xuICAgIHRvcEJhclNjaGVkdWxlZCA9IHNldFRpbWVvdXQoKCkgPT4gdG9wYmFyLnNob3coKSwgNTAwKTtcbiAgfVxufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIChpbmZvKSA9PiB7XG4gIGNsZWFyVGltZW91dCh0b3BCYXJTY2hlZHVsZWQpO1xuICB0b3BCYXJTY2hlZHVsZWQgPSB1bmRlZmluZWQ7XG4gIHRvcGJhci5oaWRlKCk7XG59KTtcblxuLy8gSG9va3MgLS0tXG5cbmNvbnN0IEhvb2tzID0ge307XG5cbkhvb2tzLlJlZnJlc2hlciA9IHtcbiAgbW91bnRlZCgpIHtcbiAgICBjb25zdCB0YXJnID0gXCIjcmVmcmVzaC1zZWxlY3RvclwiO1xuICAgIGNvbnN0IGVsZW0gPSB0aGlzO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgICAgZWxlbS5wdXNoRXZlbnRUbyh0YXJnLCBcInJlc3VtZS1yZWZyZXNoXCIsIHt9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0ucHVzaEV2ZW50VG8odGFyZywgXCJwYXVzZS1yZWZyZXNoXCIsIHt9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChcInJlZnJlc2hcIiBpbiBsb2NhbFN0b3JhZ2UpIHtcbiAgICAgIGVsZW0ucHVzaEV2ZW50VG8odGFyZywgXCJzZWxlY3QtcmVmcmVzaFwiLCB7IHZhbHVlOiBsb2NhbFN0b3JhZ2UucmVmcmVzaCB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbcm9sZT0nb3B0aW9uJ11cIikuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlZnJlc2ggPSBvcHRpb24uZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbn07XG5cbkhvb2tzLlJlc3RvcmVUaGVtZSA9IHtcbiAgbW91bnRlZCgpIHtcbiAgICB0aGlzLnB1c2hFdmVudFRvKFwiI3RoZW1lLXNlbGVjdG9yXCIsIFwicmVzdG9yZVwiLCB7XG4gICAgICB0aGVtZTogbG9jYWxTdG9yYWdlLnRoZW1lLFxuICAgIH0pO1xuICB9LFxufTtcblxuSG9va3MuQ2hhbmdlVGhlbWUgPSB7XG4gIGFwcGx5VGhlbWUoKSB7XG4gICAgY29uc3Qgd2FudHNEYXJrID0gd2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLm1hdGNoZXM7XG4gICAgY29uc3Qgbm9QcmVmZXJlbmNlID0gIShcInRoZW1lXCIgaW4gbG9jYWxTdG9yYWdlKTtcblxuICAgIGlmIChcbiAgICAgIGxvY2FsU3RvcmFnZS50aGVtZSA9PT0gXCJkYXJrXCIgfHxcbiAgICAgIChsb2NhbFN0b3JhZ2UudGhlbWUgPT09IFwic3lzdGVtXCIgJiYgd2FudHNEYXJrKSB8fFxuICAgICAgKG5vUHJlZmVyZW5jZSAmJiB3YW50c0RhcmspXG4gICAgKSB7XG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImRhcmtcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZGFya1wiKTtcbiAgICB9XG4gIH0sXG5cbiAgbW91bnRlZCgpIHtcbiAgICBjb25zdCBlbGVtID0gdGhpcztcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHRoZW1lID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtcblxuICAgICAgbG9jYWxTdG9yYWdlLnRoZW1lID0gdGhlbWU7XG5cbiAgICAgIHRoaXMuYXBwbHlUaGVtZSgpO1xuXG4gICAgICBlbGVtLnB1c2hFdmVudFRvKFwiI3RoZW1lLXNlbGVjdG9yXCIsIFwicmVzdG9yZVwiLCB7IHRoZW1lOiB0aGVtZSB9KTtcbiAgICB9KTtcbiAgfSxcbn07XG5cbkhvb2tzLlRpcHB5ID0ge1xuICBtb3VudGVkKCkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShcImRhdGEtdGl0bGVcIik7XG5cbiAgICB0aXBweSh0aGlzLmVsLCB7IGFycm93OiByb3VuZEFycm93LCBjb250ZW50OiBjb250ZW50LCBkZWxheTogWzI1MCwgbnVsbF0gfSk7XG4gIH0sXG59O1xuXG4vLyBmaWxsLWN5YW4tNDAwXG4vLyBmaWxsLXZpb2xldC00MDBcbi8vIGZpbGwteWVsbG93LTQwMFxuLy8gZmlsbC1ncmVlbi00MDBcbi8vIGZpbGwtb3JhbmdlLTQwMFxuLy8gZmlsbC10ZWFsLTQwMFxuLy8gZmlsbC1waW5rLTMwMFxuXG5jb25zdCBTVEFDS19PUFRTID0ge1xuICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSxcbiAgaW50ZXJhY3Rpb246IHtcbiAgICBtb2RlOiBcImluZGV4XCIsXG4gIH0sXG4gIHBsdWdpbnM6IHtcbiAgICBsZWdlbmQ6IHtcbiAgICAgIGRpc3BsYXk6IGZhbHNlLFxuICAgIH0sXG4gIH0sXG4gIHNjYWxlczoge1xuICAgIHg6IHtcbiAgICAgIHN0YWNrZWQ6IHRydWUsXG4gICAgICBncmlkOiB7XG4gICAgICAgIGRpc3BsYXk6IGZhbHNlXG4gICAgICB9LFxuICAgIH0sXG4gICAgeToge1xuICAgICAgc3RhY2tlZDogdHJ1ZSxcbiAgICB9LFxuICB9LFxufTtcblxuY29uc3QgTElORVNfT1BUUyA9IHtcbiAgbWFpbnRhaW5Bc3BlY3RSYXRpbzogZmFsc2UsXG4gIGludGVyYWN0aW9uOiB7XG4gICAgbW9kZTogXCJpbmRleFwiLFxuICB9LFxuICBwbHVnaW5zOiB7XG4gICAgbGVnZW5kOiB7XG4gICAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICB9LFxuICB9LFxuICBzY2FsZXM6IHtcbiAgICB4OiB7XG4gICAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICB9LFxuICB9LFxufVxuXG5Ib29rcy5DaGFydCA9IHtcbiAgbW91bnRlZCgpIHtcbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbGFiZWxzOiBbLi4uQXJyYXkoMTAwKS5rZXlzKCldLm1hcCgoeCkgPT4ge1xuICAgICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgLSB4ICogMTAwMCk7XG4gICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZyhcImVuLVVTXCIsIHtcbiAgICAgICAgICBob3VyMTI6IGZhbHNlLFxuICAgICAgICAgIHRpbWVTdHlsZTogXCJzaG9ydFwiLFxuICAgICAgICB9KTtcbiAgICAgIH0pLFxuICAgICAgZGF0YXNldHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBcImNvbXBsZXRlZFwiLFxuICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgIGJhclRoaWNrbmVzczogOSxcbiAgICAgICAgICBib3JkZXJDb2xvcjogXCIjMjJkM2VlXCIsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMyMmQzZWVcIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBcImNhbmNlbGxlZFwiLFxuICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgIGJhclRoaWNrbmVzczogOSxcbiAgICAgICAgICBib3JkZXJDb2xvcjogXCIjYTc4YmZhXCIsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNhNzhiZmFcIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBcImRpc2NhcmRlZFwiLFxuICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgIGJhclRoaWNrbmVzczogOSxcbiAgICAgICAgICBib3JkZXJDb2xvcjogXCIjZmI3MTg1XCIsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmYjcxODVcIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBcInJldHJ5YWJsZVwiLFxuICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgIGJhclRoaWNrbmVzczogOSxcbiAgICAgICAgICBib3JkZXJDb2xvcjogXCIjZmFjYzE1XCIsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmYWNjMTVcIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiBcInNjaGVkdWxlZFwiLFxuICAgICAgICAgIGRhdGE6IFtdLFxuICAgICAgICAgIGJhclRoaWNrbmVzczogOSxcbiAgICAgICAgICBib3JkZXJDb2xvcjogXCIjNGFkZTgwXCIsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiM0YWRlODBcIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcblxuICAgIGNvbnN0IGNoYXJ0ID0gbmV3IENoYXJ0KHRoaXMuZWwsIHsgdHlwZTogXCJiYXJcIiwgb3B0aW9uczogU1RBQ0tfT1BUUywgZGF0YTogZGF0YSB9KTtcblxuICAgIHRoaXMuaGFuZGxlRXZlbnQoXCJjaGFydC11cGRhdGVcIiwgKHsgcG9pbnRzIH0pID0+IHtcbiAgICAgIGNoYXJ0LmRhdGEuZGF0YXNldHMuZm9yRWFjaCgoZGF0YXNldCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gW3BvaW50c1tkYXRhc2V0LmxhYmVsXV0uZmxhdCgpO1xuXG4gICAgICAgIGRhdGFzZXQuZGF0YS5zcGxpY2UoMCwgZGF0YS5sZW5ndGgpO1xuICAgICAgICBkYXRhc2V0LmRhdGEucHVzaCguLi5kYXRhKTtcbiAgICAgIH0pO1xuXG4gICAgICBjaGFydC51cGRhdGUoKTtcbiAgICB9KTtcbiAgfSxcbn07XG5cbi8vIE1vdW50aW5nIC0tLVxuXG5jb25zdCBjc3JmVG9rZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdjc3JmLXRva2VuJ11cIikuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTtcblxuY29uc3QgbGl2ZVRyYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSdsaXZlLXRyYW5zcG9ydCddXCIpLmdldEF0dHJpYnV0ZShcImNvbnRlbnRcIik7XG5cbmNvbnN0IGxpdmVQYXRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT0nbGl2ZS1wYXRoJ11cIikuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKTtcblxuY29uc3QgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KGxpdmVQYXRoLCBTb2NrZXQsIHtcbiAgdHJhbnNwb3J0OiBsaXZlVHJhbiA9PT0gXCJsb25ncG9sbFwiID8gTG9uZ1BvbGwgOiBXZWJTb2NrZXQsXG4gIHBhcmFtczogeyBfY3NyZl90b2tlbjogY3NyZlRva2VuIH0sXG4gIGhvb2tzOiBIb29rcyxcbn0pO1xuXG5saXZlU29ja2V0LmNvbm5lY3QoKTtcbiJdLAogICJtYXBwaW5ncyI6ICIrcUJBQUEsb0JBTUEsQUFBQyxVQUFTLEVBQU8sRUFBUyxDQUFDLGFBQWEsQUFBQyxXQUFVLENBQUMsT0FBUSxHQUFTLEVBQUUsRUFBUSxDQUFDLEtBQUssTUFBTSxTQUFTLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFRLFFBQVEsQ0FBQyxFQUFPLHNCQUFzQixFQUFFLEVBQUUsRUFBTyxzQkFBc0IsRUFBTyxFQUFRLEdBQUcseUJBQXlCLEVB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QUFTLFNBQ1QsS0FBTSxTQUNOLEtBQU0sT0FDTixLQUFNLFNBQ04sT0FBUSxTQUNSLFFBQVMsU0FDVCxTQUFVLFNBQ1YsT0FBUSxTQUNSLE1BQU8sU0FDUCxJQUFLLFNBQ0wsT0FBUSxTQUNSLE9BQVEsU0FDUixLQUFNLFNBQ04sTUFBTyxTQUNQLE1BQU8sU0FDUCxJQUFLLE9BQ0wsT0FBUSxTQUNSLE9BQVEsU0FDUixTQUFVLE9BQ1YsT0FBUSxTQUNSLE9BQVEsU0FDUixTQUFVLFNBQ1YsU0FBVSxTQUNWLFNBQVUsU0FDVixTQUFVLFNBQ1YsT0FBUSxTQUNSLFFBQVMsU0FDVCxVQUFXLFNBQ1gsSUFBSyxTQUNMLE9BQVEsU0FDUixJQUFLLFNBQ0wsSUFBSyxPQUNMLE1BQU8sU0FDUCxJQUFLLFNBQ0wsUUFBUyxTQUNULE9BQVEsU0FDUixRQUFTLFNBQ1QsTUFBTyxTQUNQLEtBQU0sU0FDTixNQUFPLFNBQ1AsT0FBUSxTQUNSLFVBQVcsU0FDWCxRQUFTLFNBQ1QsV0FBWSxTQUNaLElBQUssU0FDTCxLQUFNLFNBQ04sTUFBTyxTQUNQLFVBQVcsU0FDWCxLQUFNLFNBQ04sS0FBTSxTQUNOLEtBQU0sU0FDTixLQUFNLFNBQ04sT0FBUSxTQUNSLE9BQVEsU0FDUixPQUFRLFNBQ1IsTUFBTyxTQUNQLE1BQU8sU0FDUCxRQUFTLFNBQ1QsSUFBSyxTQUNMLEtBQU0sT0FDTixRQUFTLFNBQ1QsSUFBSyxTQUNMLE9BQVEsU0FDUixNQUFPLFNBQ1AsV0FBWSxTQUNaLElBQUssS0FDTCxNQUFPLFNBQ1AsT0FBUSxTQUNSLE9BQVEsU0FDUixLQUFNLFNBQ04sVUFBVyxPQUNYLElBQUssU0FDTCxTQUFVLFNBQ1YsV0FBWSxTQUNaLFFBQVMsU0FDVCxTQUFVLFNBQ1YsUUFBUyxTQUNULFdBQVksU0FDWixLQUFNLEtBQ04sT0FBUSxTQUNSLEtBQU0sU0FDTixRQUFTLFNBQ1QsTUFBTyxTQUNQLFFBQVMsU0FDVCxLQUFNLFNBQ04sVUFBVyxTQUNYLE9BQVEsU0FDUixNQUFPLFNBQ1AsV0FBWSxTQUNaLFVBQVcsU0FDWCxR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QzdCLEVBQUksVUFBUyxFQUNiLFVBQ0csV0FDSCxHQUFPLE9BRUosUUFDSCxFQUFXLEtBQUssSUFBSSxDQUFBLEVBQVEsR0FBSSxFQUFJLEVBQUksR0FDeEMsRUFBVSxLQUFLLElBQUksQ0FBTyxFQUFBLEVBQzFCLEVBQVUsS0FBSyxJQUFJLENBQU8sRUFBQSxFQUMxQixFQUFXLEtBQUssSUFBSSxDQUFBLEVBQVEsR0FBSSxFQUFJLEVBQUksR0FDeEMsRUFBSSxPQUFPLEVBQUksRUFBVSxFQUFJLENBQUEsRUFDN0IsRUFBSSxPQUFPLEVBQUksRUFBVSxFQUFJLENBQUEsRUFDN0IsRUFBSSxPQUFPLEVBQUksRUFBVSxFQUFJLENBQUEsRUFDN0IsRUFBSSxPQUFPLEVBQUksRUFBVSxFQUFJLENBQUEsRUFDN0IsVUFDRyxPQUNILEVBQVcsS0FBSyxJQUFJLENBQUEsRUFBUSxHQUFJLEVBQUksRUFBSSxHQUN4QyxFQUFVLEtBQUssSUFBSSxDQUFPLEVBQUEsRUFDMUIsRUFBVSxLQUFLLElBQUksQ0FBTyxFQUFBLEVBQzFCLEVBQVcsS0FBSyxJQUFJLENBQUEsRUFBUSxHQUFJLEVBQUksRUFBSSxHQUN4QyxFQUFJLE9BQU8sRUFBSSxFQUFVLEVBQUksQ0FBQSxFQUM3QixFQUFJLE9BQU8sRUFBSSxFQUFVLEVBQUksQ0FBQSxFQUM3QixFQUFJLE9BQU8sRUFBSSxFQUFVLEVBQUksQ0FBQSxFQUM3QixFQUFJLE9BQU8sRUFBSSxFQUFVLEVBQUksQ0FBQSxFQUM3QixHQUFPLEdBQ1AsRUFBVyxLQUFLLElBQUksQ0FBQSxFQUFRLEdBQUksRUFBSSxFQUFJLEdBQ3hDLEVBQVUsS0FBSyxJQUFJLENBQU8sRUFBQSxFQUMxQixFQUFVLEtBQUssSUFBSSxDQUFPLEVBQUEsRUFDMUIsRUFBVyxLQUFLLElBQUksQ0FBQSxFQUFRLEdBQUksRUFBSSxFQUFJLEdBQ3hDLEVBQUksT0FBTyxFQUFJLEVBQVUsRUFBSSxDQUFBLEVBQzdCLEVBQUksT0FBTyxFQUFJLEVBQVUsRUFBSSxDQUFBLEVBQzdCLEVBQUksT0FBTyxFQUFJ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
